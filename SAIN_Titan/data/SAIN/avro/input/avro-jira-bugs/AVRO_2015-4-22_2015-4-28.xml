<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:21:47 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2015-4-22+AND+created+%3C%3D+2015-4-28+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="2" total="2"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1663] C Library does not handle enum&apos;s namespace</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1663</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;EventName&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;com.company.avro.schemas&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;eventname_model&quot;&lt;/span&gt;,
     &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: {
       &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt;&quot;&lt;/span&gt;,
       &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;com.company.models&quot;&lt;/span&gt;,
       &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;EventName&quot;&lt;/span&gt;,
       &lt;span class=&quot;code-quote&quot;&gt;&quot;symbols&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;XXXX&quot;&lt;/span&gt;]
     }
    }
 ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Such a schema is perfectly valid but the C library does no handle it because it does not parse the namespace field.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12823454">AVRO-1663</key>
            <summary>C Library does not handle enum&apos;s namespace</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="martinkl">Martin Kleppmann</assignee>
                                    <reporter username="daedric">Thomas Sanchez</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Apr 2015 15:58:07 +0000</created>
                <updated>Thu, 4 Feb 2016 22:53:43 +0000</updated>
                            <resolved>Tue, 19 Jan 2016 21:22:59 +0000</resolved>
                                    <version>1.7.7</version>
                                    <fixVersion>1.8.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14509277" author="daedric" created="Thu, 23 Apr 2015 16:08:15 +0000"  >&lt;p&gt;I also created a pull request on the github repository, I noticed later that was not the preferred way.&lt;/p&gt;</comment>
                            <comment id="14518063" author="rdblue" created="Tue, 28 Apr 2015 21:07:37 +0000"  >&lt;p&gt;Adding a link to the PR&lt;/p&gt;</comment>
                            <comment id="14530302" author="daedric" created="Wed, 6 May 2015 10:28:05 +0000"  >&lt;p&gt;Pull request updated according to the comments.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="14616806" author="daedric" created="Tue, 7 Jul 2015 14:48:58 +0000"  >&lt;p&gt;Any news ?&lt;br/&gt;
Everything&apos;s on github.&lt;/p&gt;</comment>
                            <comment id="15056685" author="martinkl" created="Mon, 14 Dec 2015 20:48:23 +0000"  >&lt;p&gt;The previous patch doesn&apos;t fully address the problem (for example, it does not actually save the namespace in the enum schema struct, so when it comes to writing the schema out to JSON again, the namespace will be omitted).&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a more comprehensive patch. It also deals with &quot;fixed&quot; types (which, being named types, should also be namespace-aware), it deals with fully-qualified names appearing in the &quot;name&quot; field (as permitted by the spec), and it correctly round-trips to and from JSON.&lt;/p&gt;

&lt;p&gt;In this patch I&apos;ve made some public API changes: added a function &lt;tt&gt;avro_schema_namespace&lt;/tt&gt; which returns the namespace of a named schema (as suggested in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1565&quot; title=&quot;C API doesn&amp;#39;t provide mechanism to get namespace of schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1565&quot;&gt;&lt;del&gt;AVRO-1565&lt;/del&gt;&lt;/a&gt;), and added a namespace parameter to the &lt;tt&gt;avro_schema_fixed&lt;/tt&gt; and &lt;tt&gt;avro_schema_enum&lt;/tt&gt; constructors. What&apos;s the policy for such API changes in the C implementation? Rather than changing the existing function signature, would it be better to add alternative versions that take a namespace argument (e.g. &lt;tt&gt;avro_schema_fixed_ns&lt;/tt&gt; and &lt;tt&gt;avro_schema_enum_ns&lt;/tt&gt;)?&lt;/p&gt;</comment>
                            <comment id="15057694" author="martinkl" created="Tue, 15 Dec 2015 09:22:54 +0000"  >&lt;p&gt;Attached v3 patch, slightly tweaked (in v2 I forgot to consider namespaces in the equality comparison of enum/fixed schemas).&lt;/p&gt;</comment>
                            <comment id="15072905" author="dcreager" created="Mon, 28 Dec 2015 16:57:42 +0000"  >&lt;p&gt;Patch looks good.  In &lt;tt&gt;split_namespace_name&lt;/tt&gt;, you can use &lt;tt&gt;strrchr(3)&lt;/tt&gt; to find the last dot instead of walking the string manually.&lt;/p&gt;

&lt;p&gt;Re API change policy, we&apos;ve introduced breaking changes before during minor version bumps, so we could do this since the next release will be 1.8.0.  But I think I like your &quot;new functions&quot; suggestion better.&lt;/p&gt;</comment>
                            <comment id="15075178" author="martinkl" created="Wed, 30 Dec 2015 16:38:43 +0000"  >&lt;p&gt;Thanks for reviewing, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcreager&quot; class=&quot;user-hover&quot; rel=&quot;dcreager&quot;&gt;Douglas Creager&lt;/a&gt;! I&apos;ve attached an updated (v4) patch that uses strrchr.&lt;/p&gt;

&lt;p&gt;The v4 patch also leaves the function signature of &lt;tt&gt;avro_schema_fixed&lt;/tt&gt; and &lt;tt&gt;avro_schema_enum&lt;/tt&gt; unchanged, and instead adds two new functions  &lt;tt&gt;avro_schema_fixed_ns&lt;/tt&gt; and &lt;tt&gt;avro_schema_enum_ns&lt;/tt&gt; that take an additional namespace parameter. This avoids a compatibility-breaking API change. It has the downside of making the API slightly inconsistent (&lt;tt&gt;avro_schema_record&lt;/tt&gt; takes a namespace argument, but doesn&apos;t have a &lt;tt&gt;_ns&lt;/tt&gt; suffix) but on balance this is probably the best compromise. What do you think?&lt;/p&gt;

&lt;p&gt;Finally, could you confirm what changes to &lt;tt&gt;lang/c/version.sh&lt;/tt&gt; are required? If I read the instructions correctly, it should be&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;libavro_micro_version++
libavro_interface_age=0
libavro_binary_age++
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15105562" author="martinkl" created="Mon, 18 Jan 2016 17:37:37 +0000"  >&lt;p&gt;Could someone please clarify how updates to &lt;tt&gt;lang/c/version.sh&lt;/tt&gt; should be handled? Should I update the version number while committing the patch, or does that happen as part of the release process? Judging from the commit history of that file, it seems like it&apos;s been done as part of patch commits in the past, but there also seem to have been commits that changed the API without updating that file, so I&apos;m a bit confused.&lt;/p&gt;</comment>
                            <comment id="15106836" author="dcreager" created="Tue, 19 Jan 2016 14:59:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;This&lt;/a&gt; is the cheat sheet I&apos;ve always used for figuring out what changes to make to each number.  (I&apos;ve been known to &lt;a href=&quot;https://github.com/redjack/libcork/blob/develop/src/CMakeLists.txt#L12&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;copy the rules&lt;/a&gt; into other build scripts before since I sometimes forget the link.)  I think you&apos;re right in the what changes should be made.&lt;/p&gt;

&lt;p&gt;As for when, I think it would be cleaner to do it during the release process, but I don&apos;t know that we&apos;ve ever been strict about that.  Is there a project-wide pre-release process that we can hook into?&lt;/p&gt;</comment>
                            <comment id="15107451" author="jira-bot" created="Tue, 19 Jan 2016 21:16:56 +0000"  >&lt;p&gt;Commit 1725614 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martinkl&quot; class=&quot;user-hover&quot; rel=&quot;martinkl&quot;&gt;Martin Kleppmann&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1725614&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1725614&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1663&quot; title=&quot;C Library does not handle enum&amp;#39;s namespace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1663&quot;&gt;&lt;del&gt;AVRO-1663&lt;/del&gt;&lt;/a&gt;. C: Fix handling of namespaces for enum and fixed types.&lt;/p&gt;</comment>
                            <comment id="15107460" author="martinkl" created="Tue, 19 Jan 2016 21:22:59 +0000"  >&lt;p&gt;Ok, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcreager&quot; class=&quot;user-hover&quot; rel=&quot;dcreager&quot;&gt;Douglas Creager&lt;/a&gt;. I&apos;ve committed the patch, but not made any change to the libtool version.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomwhite&quot; class=&quot;user-hover&quot; rel=&quot;tomwhite&quot;&gt;Tom White&lt;/a&gt;: What process have you been using to generate the release candidates? Is it the one &lt;a href=&quot;https://cwiki.apache.org/confluence/display/AVRO/How+To+Release&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;written up on the wiki&lt;/a&gt;? If so, do you think it would be the right place to add a note about updating &lt;tt&gt;lang/c/version.sh&lt;/tt&gt;? (Note that we can&apos;t use the same as &lt;tt&gt;share/VERSION.txt&lt;/tt&gt;, because the library version for libtool&apos;s purposes needs to be &lt;a href=&quot;https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;intentionally unrelated to the release version&lt;/a&gt;.)&lt;/p&gt;</comment>
                            <comment id="15107651" author="hudson" created="Tue, 19 Jan 2016 23:13:45 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #571 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/571/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/571/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1663&quot; title=&quot;C Library does not handle enum&amp;#39;s namespace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1663&quot;&gt;&lt;del&gt;AVRO-1663&lt;/del&gt;&lt;/a&gt;. C: Fix handling of namespaces for enum and fixed types. (martinkl: rev 1725614)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/src/allocation.c&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/src/avro/allocation.h&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/src/avro/schema.h&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/src/schema.c&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/src/schema.h&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/src/schema_equal.c&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/tests/schema_tests/pass/namespace_enum&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/tests/schema_tests/pass/namespace_fixed&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/tests/schema_tests/pass/namespace_fullname&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15108402" author="tomwhite" created="Wed, 20 Jan 2016 11:30:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martinkl&quot; class=&quot;user-hover&quot; rel=&quot;martinkl&quot;&gt;Martin Kleppmann&lt;/a&gt;, yes the process is the one on the wiki that you linked to. I wonder what the best way would be for the release manager to find out what the C version should be, given that they might not know if functions have been added, backwards compatibility has been broken, etc? What should the version be for the 1.8.0 release?&lt;/p&gt;

&lt;p&gt;Also, I noticed that this has not been merged into the 1.8.0 branch, nor have &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1769&quot; title=&quot;Depend on external libjansson instead of a bundled copy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1769&quot;&gt;&lt;del&gt;AVRO-1769&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1691&quot; title=&quot;Error parsing schema if schema is json string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1691&quot;&gt;&lt;del&gt;AVRO-1691&lt;/del&gt;&lt;/a&gt;. Should they be? Let me know if you&apos;d like me to do it.&lt;/p&gt;</comment>
                            <comment id="15110426" author="jira-bot" created="Thu, 21 Jan 2016 11:00:55 +0000"  >&lt;p&gt;Commit 1725903 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martinkl&quot; class=&quot;user-hover&quot; rel=&quot;martinkl&quot;&gt;Martin Kleppmann&lt;/a&gt; in branch &apos;avro/branches/branch-1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1725903&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1725903&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1663&quot; title=&quot;C Library does not handle enum&amp;#39;s namespace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1663&quot;&gt;&lt;del&gt;AVRO-1663&lt;/del&gt;&lt;/a&gt;. C: Fix handling of namespaces for enum and fixed types.&lt;/p&gt;</comment>
                            <comment id="15110510" author="tomwhite" created="Thu, 21 Jan 2016 12:28:02 +0000"  >&lt;p&gt;I&apos;ve incremented the C version to 23, following an offline suggestion from Martin. He&apos;s going to update the release wiki page to document the procedure for future releases.&lt;/p&gt;</comment>
                            <comment id="15119228" author="martinkl" created="Wed, 27 Jan 2016 13:33:48 +0000"  >&lt;p&gt;I added the version bump instruction to the &lt;a href=&quot;https://cwiki.apache.org/confluence/pages/diffpagesbyversion.action?pageId=21791991&amp;amp;selectedPageVersions=73&amp;amp;selectedPageVersions=72&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;release process wiki page&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15133237" author="githubbot" created="Thu, 4 Feb 2016 22:53:43 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/34&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/34&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12733355">AVRO-1565</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12733355">AVRO-1565</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12777573" name="AVRO-1663-2.patch" size="19586" author="martinkl" created="Mon, 14 Dec 2015 20:48:23 +0000"/>
                            <attachment id="12777702" name="AVRO-1663-3.patch" size="20096" author="martinkl" created="Tue, 15 Dec 2015 09:22:54 +0000"/>
                            <attachment id="12780005" name="AVRO-1663-4.patch" size="21670" author="martinkl" created="Wed, 30 Dec 2015 16:38:43 +0000"/>
                            <attachment id="12727638" name="AVRO-1663.patch" size="2297" author="daedric" created="Thu, 23 Apr 2015 16:04:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Apr 2015 21:07:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2do1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>C API: Handle the namespace field in the enum block</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1664] PHP library can&apos;t serialise records with optional (union-null) values</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1664</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;PHP avro serialising doesn&apos;t appear to support &quot;optional&quot; fields in records.&lt;/p&gt;

&lt;p&gt;Consider the PHP script below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?php

require_once(&lt;span class=&quot;code-quote&quot;&gt;&apos;lib/avro.php&apos;&lt;/span&gt;);

$schema_json = &amp;lt;&amp;lt;&amp;lt;_JSON
{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;member&quot;&lt;/span&gt;,
 &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
 &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;},
           {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;]}
           ]}
_JSON;

$schema = AvroSchema::parse($schema_json);

&lt;span class=&quot;code-comment&quot;&gt;// Our datum is missing the &lt;span class=&quot;code-quote&quot;&gt;&apos;optional&apos;&lt;/span&gt; field (i.e. it&apos;s &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;/span&gt;$datum = array(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt; =&amp;gt; 1);

$io = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AvroStringIO();
$writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AvroIODatumWriter($schema);
$encoder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AvroIOBinaryEncoder($io);
$writer-&amp;gt;write($datum, $encoder);
$bin = $io-&amp;gt;string();

echo bin2hex($bin) . &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My understanding from documentation is that this should work and output the encoded binary in hex.&lt;/p&gt;

&lt;p&gt;Instead it throws:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PHP Fatal error:  Uncaught exception &lt;span class=&quot;code-quote&quot;&gt;&apos;AvroIOTypeException&apos;&lt;/span&gt; with message &apos;The datum array (
  &lt;span class=&quot;code-quote&quot;&gt;&apos;one&apos;&lt;/span&gt; =&amp;gt; 1,
) is not an example of schema {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;member&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;]}]}&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s possible that this is not a valid usage of Avro and I&apos;m mistaken in my expectations, so I tried the python library as a comparison. Sure enough the following script works as expected:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from avro &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; schema
from avro &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; io
from StringIO &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; StringIO

s = schema.parse(&quot;&quot;&quot;
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;member&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;},
              {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;]}
             ]}&quot;&quot;&quot;)

writer = StringIO()
encoder = io.BinaryEncoder(writer)
datum_writer = io.DatumWriter(s)
datum_writer.write({&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;: 1}, encoder)

print writer.getvalue().encode(&lt;span class=&quot;code-quote&quot;&gt;&quot;hex&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which outputs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ python avro_test.py
0200
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As expected.&lt;/p&gt;</description>
                <environment>&lt;p&gt;php 5.5.15 OS X 10.9 &lt;/p&gt;</environment>
        <key id="12823868">AVRO-1664</key>
            <summary>PHP library can&apos;t serialise records with optional (union-null) values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="banks">Paul Banks</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Apr 2015 19:49:38 +0000</created>
                <updated>Wed, 3 Jan 2018 09:34:47 +0000</updated>
                                            <version>1.7.7</version>
                                                    <component>php</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14608245" author="banks" created="Tue, 30 Jun 2015 13:01:37 +0000"  >&lt;p&gt;Seems there is no interest in this issue from others. This seems like a deal breaker to me for using Avro with PHP at all. I&apos;d really like to but PHP is a primary language in our stack and originator of most of our data.&lt;/p&gt;

&lt;p&gt;I traced the cause down to this line:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/avro/blob/trunk/lang/php/lib/avro/schema.php#L446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/trunk/lang/php/lib/avro/schema.php#L446&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For a record type, the incoming array MUST have a field with correct name and valid type.&lt;/p&gt;

&lt;p&gt;Note that python has different (presumably correct) behaviour since the semantics of &lt;tt&gt;datum.get(f.name)&lt;/tt&gt; are such that &lt;tt&gt;None&lt;/tt&gt; is returned if there is no such field which is a &quot;correct&quot; value for &quot;null&quot;.&lt;/p&gt;

&lt;p&gt;The fix it seems would be something like: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-php&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;$value&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;isset&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;$datum&lt;/span&gt;[&lt;span class=&quot;code-object&quot;&gt;$field&lt;/span&gt;-&amp;gt;name()]) ? &lt;span class=&quot;code-object&quot;&gt;$datum&lt;/span&gt;[&lt;span class=&quot;code-object&quot;&gt;$field&lt;/span&gt;-&amp;gt;name()] : &lt;span class=&quot;code-object&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!self::is_valid_datum(&lt;span class=&quot;code-object&quot;&gt;$field&lt;/span&gt;-&amp;gt;type(), &lt;span class=&quot;code-object&quot;&gt;$value&lt;/span&gt;))
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(untested, I&apos;ll review correct procedure for submitting patch later).&lt;/p&gt;

&lt;p&gt;Rationale: if the field is not set (or explicitly &lt;/p&gt;
{null}) assume it&apos;s value is {null}
&lt;p&gt; (this is actually default behaviour in PHP - just removing the &lt;/p&gt;
{array_key_exists}
&lt;p&gt; check would be enough to fix the issue although it will give &apos;undefined index&apos; warning).&lt;/p&gt;
</comment>
                            <comment id="16309359" author="juherr" created="Wed, 3 Jan 2018 09:34:47 +0000"  >&lt;p&gt;Hi, any update on that issue?&lt;/p&gt;

&lt;p&gt;avro-php is not really usable without the support of null and it seems &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=banks&quot; class=&quot;user-hover&quot; rel=&quot;banks&quot;&gt;Paul Banks&lt;/a&gt; has already a fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jan 2018 09:34:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2dqjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
