<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:15:22 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-3-28+AND+created+%3C%3D+2011-4-6+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="8" total="8"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-789] Datafile support in C++</title>
                <link>https://issues.apache.org/jira/browse/AVRO-789</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The forthcoming patch adds Datafile support in C++.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12502613">AVRO-789</key>
            <summary>Datafile support in C++</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Mar 2011 18:07:15 +0000</created>
                <updated>Fri, 6 May 2011 19:14:03 +0000</updated>
                            <resolved>Wed, 30 Mar 2011 07:42:57 +0000</resolved>
                                                    <fixVersion>1.5.1</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13012164" author="thiru_mg" created="Mon, 28 Mar 2011 18:16:25 +0000"  >&lt;p&gt;The patch adds Datafile support for C++.&lt;br/&gt;
Tested on:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Cygwin&lt;/li&gt;
	&lt;li&gt;Ubuntu 10.10&lt;/li&gt;
	&lt;li&gt;RHEL 4.8&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13012716" author="cutting" created="Tue, 29 Mar 2011 21:34:10 +0000"  >&lt;p&gt;This is great to have!  Builds and passes tests for me on Ubuntu 10.10.  +1&lt;/p&gt;

&lt;p&gt;It doesn&apos;t look like any of the API changes are incompatible, so should we include this in 1.5.1?&lt;/p&gt;</comment>
                            <comment id="13012840" author="thiru_mg" created="Wed, 30 Mar 2011 04:37:56 +0000"  >&lt;p&gt;+1 for inclusion in 1.5.1&lt;/p&gt;</comment>
                            <comment id="13012871" author="thiru_mg" created="Wed, 30 Mar 2011 07:42:57 +0000"  >&lt;p&gt;Committed revision 1086866 after adding a couple of more tests and ensuring that the data file is compatible to that used by Avro Java.&lt;/p&gt;

&lt;p&gt;Thank you Doug for reviewing.&lt;/p&gt;</comment>
                            <comment id="13013650" author="cutting" created="Wed, 30 Mar 2011 21:04:57 +0000"  >&lt;p&gt;Should we add datafile interop test for C++?  This is run from the top-level build.sh.  Each language writes one or more data files in build/interop/data/$lang containing randomly generated instances of the share/test/schemas/interop.avsc.  Then each language reads the files written by all of the others.  It&apos;s a rather weak test, but better than nothing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474800" name="AVRO-789.patch" size="26320" author="thiru_mg" created="Mon, 28 Mar 2011 18:16:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Mar 2011 21:34:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80163</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-790] Java: GenericDatumReader can fail when reusing objects with unions containing &apos;bytes&apos; fields</title>
                <link>https://issues.apache.org/jira/browse/AVRO-790</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;GenericDatumReader can fail when reusing GenericRecord objects that contain unions of &apos;bytes&apos; and other types.  &lt;/p&gt;

&lt;p&gt;Enhanced unit tests in TestSchema.java uncovered this.&lt;/p&gt;

&lt;p&gt;Errors are of the form:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ClassCastException: org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData$Array cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to java.nio.ByteBuffer
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.readBytes(GenericDatumReader.java:333)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:145)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:142)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:129)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12502762">AVRO-790</key>
            <summary>Java: GenericDatumReader can fail when reusing objects with unions containing &apos;bytes&apos; fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scott_carey">Scott Carey</assignee>
                                    <reporter username="scott_carey">Scott Carey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Mar 2011 22:22:18 +0000</created>
                <updated>Fri, 6 May 2011 19:13:59 +0000</updated>
                            <resolved>Mon, 18 Apr 2011 23:13:11 +0000</resolved>
                                                    <fixVersion>1.5.1</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13012750" author="scott_carey" created="Tue, 29 Mar 2011 22:28:13 +0000"  >&lt;p&gt;A patch that fixes the issue and contains an enhanced unit test that exposes it.&lt;/p&gt;</comment>
                            <comment id="13012769" author="cutting" created="Tue, 29 Mar 2011 23:16:20 +0000"  >&lt;p&gt;+1 Patch looks good &amp;amp; passes tests for me.&lt;/p&gt;</comment>
                            <comment id="13021331" author="scott_carey" created="Mon, 18 Apr 2011 23:13:11 +0000"  >&lt;p&gt;Committed to trunk @ 1094812.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474935" name="AVRO-790.patch" size="4043" author="scott_carey" created="Tue, 29 Mar 2011 22:28:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Mar 2011 23:16:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80164</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-791] Split avro-tools jar in 1.5.0 to one contains avro tool classes and one contains external dependencies</title>
                <link>https://issues.apache.org/jira/browse/AVRO-791</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently, avro-tools.jar for 1.5.0 contains both avro specific tools classes from org.apache.avro.tool and many external dependencies like org.slf4j.impl. The problem is that if i define my own logback impl for slf4j in my pom, it conflicts with the org.slf4j.impl.StaticLoggerBinder.class in avro-tools. It would be better to split it to two jars: one only contains avro specific tools, and another one only contains external dependencies&lt;/p&gt;</description>
                <environment></environment>
        <key id="12502892">AVRO-791</key>
            <summary>Split avro-tools jar in 1.5.0 to one contains avro tool classes and one contains external dependencies</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scott_carey">Scott Carey</assignee>
                                    <reporter username="xiaoluye">Xiaolu Ye</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2011 15:59:28 +0000</created>
                <updated>Thu, 3 Mar 2016 08:10:46 +0000</updated>
                            <resolved>Fri, 29 Apr 2011 19:37:15 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                            <comments>
                            <comment id="13013664" author="cutting" created="Wed, 30 Mar 2011 21:27:22 +0000"  >&lt;p&gt;I don&apos;t think we should change the contents or name of avro-tools.jar.  It&apos;s convenient to have a single jar that works as a command-line executable.&lt;/p&gt;

&lt;p&gt;But I agree that we should add a new jar that contains just the tool implementations.  I needed this recently when updating the java-serialization benchmark code to use Avro 1.5.0.  Perhaps the new jar could be called avro-tool.jar?&lt;/p&gt;</comment>
                            <comment id="13013666" author="cutting" created="Wed, 30 Mar 2011 21:28:16 +0000"  >&lt;p&gt;This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-758&quot; title=&quot;avro-tools jar contains log4j config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-758&quot;&gt;&lt;del&gt;AVRO-758&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13013667" author="cutting" created="Wed, 30 Mar 2011 21:28:47 +0000"  >&lt;p&gt;It would be good to fix this in 1.5.1.&lt;/p&gt;</comment>
                            <comment id="13013688" author="scott_carey" created="Wed, 30 Mar 2011 21:45:30 +0000"  >&lt;p&gt;How about avro-tools-VERSION-nodeps.jar, with a maven classifier of &apos;nodeps&apos;?  That should be pretty easy to do with a minor pom change, I&apos;ll have a look at it in a few days.&lt;/p&gt;

&lt;p&gt;The thrift-protobuf-compare benchmark requires it, and others call the tools classes directly instead of by command-line.&lt;/p&gt;

&lt;p&gt;Off-topic FYI  RE benchmarks:&lt;br/&gt;
There are some changes to the benchmark code and Avro that can speed up the thrift-protobuf-compare stuff.  If Utf8 is &apos;more lazy&apos; and doesn&apos;t create a byte array initially when constructed from a String, that helps.  Replacing some of the &lt;br/&gt;
for (type thing : things) loops in the harness code with &lt;br/&gt;
for (int counter; condition; increment) loops helps some.   The harness overhead is high, time is mostly in String to Utf8 conversions, GenericDatumReader/Writer, and the harness &amp;#8211; almost nothing is in the low level serialization/deserialization.  Because of the requirement to extract their object from our IndexedRecords, the Reflect API is probably fastest here &amp;#8211; we can avoid the extra copy step and produce the exact object type. &lt;/p&gt;</comment>
                            <comment id="13013950" author="xiaoluye" created="Thu, 31 Mar 2011 12:49:21 +0000"  >&lt;p&gt;To minimize the impact, a new jar with nodeps classifier sounds good me. Thanks!&lt;/p&gt;</comment>
                            <comment id="13014053" author="cutting" created="Thu, 31 Mar 2011 16:25:39 +0000"  >&lt;p&gt;+1 for avro-tools-VERSION-nodeps.jar.&lt;/p&gt;</comment>
                            <comment id="13021872" author="scott_carey" created="Wed, 20 Apr 2011 00:23:33 +0000"  >&lt;p&gt;Patch adds avro-tools-VERSION-nodeps.jar.&lt;/p&gt;

&lt;p&gt;This patch also moves the &apos;sign&apos; portion to a profile, so that users are not forced to sign in order to &apos;install&apos; in normal development (add -P sign to do so).&lt;/p&gt;

&lt;p&gt;We could move that to another ticket, but signing was introduced without one anyhow.&lt;/p&gt;</comment>
                            <comment id="13021874" author="scott_carey" created="Wed, 20 Apr 2011 00:29:09 +0000"  >&lt;p&gt;Fixed patch, there was an error in the prior.&lt;/p&gt;
</comment>
                            <comment id="13022335" author="cutting" created="Wed, 20 Apr 2011 19:48:50 +0000"  >&lt;p&gt;+1 This works for me.  Thanks!&lt;/p&gt;</comment>
                            <comment id="13025304" author="cutting" created="Tue, 26 Apr 2011 16:13:21 +0000"  >&lt;p&gt;I&apos;d like to commit this and roll a 1.5.1 release candidate.  Objections?&lt;/p&gt;</comment>
                            <comment id="13027160" author="cutting" created="Fri, 29 Apr 2011 19:37:15 +0000"  >&lt;p&gt;I committed this.  Thanks, Scott!&lt;/p&gt;</comment>
                            <comment id="15177461" author="salmansaifi7" created="Thu, 3 Mar 2016 08:10:46 +0000"  >&lt;p&gt;is there any maven dependency with this npdeps ?&lt;br/&gt;
i need it in my maven project&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12497727">AVRO-758</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12476806" name="AVRO-791.patch" size="2506" author="scott_carey" created="Wed, 20 Apr 2011 00:29:09 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12946442">AVRO-1805</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Mar 2011 21:27:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80165</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-792] map reduce job for avro 1.5 generates ArrayIndexOutOfBoundsException</title>
                <link>https://issues.apache.org/jira/browse/AVRO-792</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We have an avro map/reduce job used to be working with avro 1.4, but broken with avro 1.5.  The M/R job with avro 1.5 worked fine under our debugging environment, but broken when we moved to a real cluster.  At one instance f testing, the job had 23 reducers.  Four of them succeeded and the rest failed because of the ArrayIndexOutOfBoundsException generated.  Here are two instances of the stack traces:&lt;/p&gt;

&lt;p&gt;=================================================================================&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: -1576799025&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:142)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readMap(GenericDatumReader.java:232)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:141)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:142)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:166)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:138)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:129)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:46)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;/p&gt;

&lt;p&gt;=====================================================================================================&lt;/p&gt;

&lt;p&gt;java.lang.ArrayIndexOutOfBoundsException: 40&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:142)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:166)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:138)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:129)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.sourcing.sessions.NgSessionReducer.reduce(NgSessionReducer.java:74)&lt;br/&gt;
	at com.ngmoco.ngpipes.sourcing.sessions.NgSessionReducer.reduce(NgSessionReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;br/&gt;
=====================================================================================================&lt;/p&gt;

&lt;p&gt;The signature of our map() is:&lt;/p&gt;

&lt;p&gt;public void map(Utf8 input, AvroCollector&amp;lt;Pair&amp;lt;Utf8, GenericRecord&amp;gt;&amp;gt; collector, Reporter reporter) throws IOException;&lt;/p&gt;

&lt;p&gt;and reduce() is:&lt;/p&gt;

&lt;p&gt;public void reduce(Utf8 key, Iterable&amp;lt;GenericRecord&amp;gt; values, AvroCollector&amp;lt;GenericRecord&amp;gt; collector, Reporter reporter) throws IOException;&lt;/p&gt;

&lt;p&gt;All the GenericRecords are of the same schema.&lt;/p&gt;

&lt;p&gt;There are many changes in the area of serialization/de-serailization between avro 1.4 and 1.5, but could not figure out why the exceptions were generated. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac with VMWare running Linux training-vm-Ubuntu&lt;/p&gt;</environment>
        <key id="12502924">AVRO-792</key>
            <summary>map reduce job for avro 1.5 generates ArrayIndexOutOfBoundsException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eychih">ey-chih chow</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2011 21:53:14 +0000</created>
                <updated>Tue, 31 Mar 2015 21:33:07 +0000</updated>
                            <resolved>Thu, 30 Jun 2011 19:28:41 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.5.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="1814400">504h</timeoriginalestimate>
                            <timeestimate seconds="1814400">504h</timeestimate>
                                        <comments>
                            <comment id="13015016" author="thiru_mg" created="Sat, 2 Apr 2011 12:00:01 +0000"  >&lt;p&gt;The problem is because we are reusing ResolvingDecoder objects. ResolvingDecoder objects are stateful and hence cannot be used simultaneously to decode more than one stream. But constructing ResolvingDecoder is expensive. So we cannot construct ResolvingDecoder objects whenever we need.&lt;/p&gt;

&lt;p&gt;The real expensive part of ResolvingDecoder construction is construction of the symbol table (actually a symbol tree). The symbol tree is stateless (in fact it is immutable). Once the symbol tree is ready, construction of ResolvingDecoder is cheap. Before the DecoderFactory refacroring, GenericDatumReader used to cache the symbol tree (which was exposed through ResolvingDecoder.resolve() method.)&lt;br/&gt;
The forthcoming patch fixes the problem by caching the symbol tree within the ResolvingDecoder.&lt;/p&gt;</comment>
                            <comment id="13015018" author="thiru_mg" created="Sat, 2 Apr 2011 12:01:46 +0000"  >&lt;p&gt;This patch fixes the problem.&lt;/p&gt;</comment>
                            <comment id="13015590" author="scott_carey" created="Mon, 4 Apr 2011 20:01:57 +0000"  >&lt;p&gt;-1&lt;/p&gt;

&lt;p&gt;This patch drops performance of GenericDatumReader by a factor of 3 to 5.  The portion of time that is in GenericDatumReader and not BinaryDecoder has increased by up to a factor of 8.&lt;/p&gt;

&lt;p&gt;Perf.java results with JVM args: -Xmx256 -Xms256 -server -XX:+UseParallelGC -XX:+UseCompressedOops&lt;br/&gt;
and params: -nowrite -generic -generic-onetime&lt;/p&gt;

&lt;p&gt;before:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Executing tests: 
[GenericTest, GenericNested, GenericNestedFake, GenericWithDefault, GenericWithOutOfOrder, GenericWithPromotion, GenericOneTimeDecoderUse, GenericOneTimeReaderUse, GenericOneTimeUse]
 readTests:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 writeTests:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
 cycles=800
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle
                  GenericRead:   5054 ms       3.297       127.953        808498
           GenericNested_Read:   7701 ms       2.164        83.980        808498
       GenericNestedFake_Read:   2869 ms       5.809       225.433        808498
      GenericWithDefault_Read:   8993 ms       1.853        71.922        808498
   GenericWithOutOfOrder_Read:   5051 ms       3.300       128.050        808498
    GenericWithPromotion_Read:   5210 ms       3.199       124.132        808498
GenericOneTimeDecoderUse_Read:   5060 ms       3.293       127.804        808498
 GenericOneTimeReaderUse_Read:   6433 ms       2.590       100.531        808498
       GenericOneTimeUse_Read:   6306 ms       2.643       102.558        808498
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Executing tests: 
[GenericTest, GenericNested, GenericNestedFake, GenericWithDefault, GenericWithOutOfOrder, GenericWithPromotion, GenericOneTimeDecoderUse, GenericOneTimeReaderUse, GenericOneTimeUse]
 readTests:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 writeTests:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
 cycles=800
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle
                  GenericRead:  18918 ms       0.881        34.189        808498
           GenericNested_Read:  21704 ms       0.768        29.800        808498
       GenericNestedFake_Read:   2899 ms       5.747       223.037        808498
      GenericWithDefault_Read:  25627 ms       0.650        25.238        808498
   GenericWithOutOfOrder_Read:  21413 ms       0.778        30.206        808498
    GenericWithPromotion_Read:  21254 ms       0.784        30.432        808498
GenericOneTimeDecoderUse_Read:  18831 ms       0.885        34.346        808498
 GenericOneTimeReaderUse_Read:  18650 ms       0.894        34.680        808498
       GenericOneTimeUse_Read:  18698 ms       0.891        34.592        808498
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I got a few dozen stack traces while the latter was executing, and the most common stack traces are:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;main&quot; prio=5 tid=103800800 nid=0x100501000 runnable [100500000]
   java.lang.Thread.State: RUNNABLE
	at org.apache.avro.io.Perf$GenericTest.getReader(Perf.java:1087)
	at org.apache.avro.io.Perf$GenericTest.readInternal(Perf.java:1110)
	at org.apache.avro.io.Perf$BasicTest.readTest(Perf.java:313)
	at org.apache.avro.io.Perf.main(Perf.java:210)

&quot;main&quot; prio=5 tid=103800800 nid=0x100501000 runnable [100500000]
   java.lang.Thread.State: RUNNABLE
	at java.util.Arrays.copyOf(Arrays.java:2734)
	at org.apache.avro.io.parsing.Parser.expandStack(Parser.java:66)
	at org.apache.avro.io.parsing.Parser.pushProduction(Parser.java:151)
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:100)
	at org.apache.avro.io.ResolvingDecoder.readFieldOrder(ResolvingDecoder.java:144)
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:126)
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:102)
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:93)
	at org.apache.avro.io.Perf$GenericTest.readInternal(Perf.java:1110)
	at org.apache.avro.io.Perf$BasicTest.readTest(Perf.java:313)
	at org.apache.avro.io.Perf.main(Perf.java:210)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13015941" author="thiru_mg" created="Tue, 5 Apr 2011 14:51:37 +0000"  >&lt;p&gt;I&apos;ll look into the performance issue. In the mean time, Ey-Chih Chow, can you check if this patch solves your problem? Thanks.&lt;/p&gt;</comment>
                            <comment id="13016094" author="eychih" created="Tue, 5 Apr 2011 19:47:51 +0000"  >&lt;p&gt;I will verify the patch in a couple of days.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13016662" author="thiru_mg" created="Thu, 7 Apr 2011 02:34:02 +0000"  >&lt;p&gt;With this patch I don&apos;t see any significant performance difference. Scott, can you please verify. Thanks&lt;/p&gt;</comment>
                            <comment id="13016669" author="scott_carey" created="Thu, 7 Apr 2011 03:28:15 +0000"  >&lt;p&gt;The performance changes for the single-threaded use case is acceptable now.   There is no difference for all use cases that re-use the DatumReader.  For those that create a new GenericDatumReader for each read, there is a 5% decrease.&lt;/p&gt;

&lt;p&gt;However, Perf.java does not test multi-threaded.  A thread using GenericDatumReader that did not create it is not so lucky.&lt;/p&gt;

&lt;p&gt;I added a new test to Perf.java for this case.  This case is still quite slow.&lt;br/&gt;
The code for that is below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericThreadCreateReader &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericTest {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; GenericThreadCreateReader() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;GenericThreadCreateReader_&quot;&lt;/span&gt;);
      isWriteTest = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
    GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; r = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getReader() {
      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;() {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
          r = newReader();
        }
      };
      t.run();
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        t.join();
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
        e.printStackTrace();
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; r;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This case may not be very important for now.&lt;br/&gt;
I plan to propose some changes to the DatumReaders for performance and thread safety for the 1.6.0 timeframe that will avoid all this by making them immutable.  setSchema() makes things very complicated.&lt;/p&gt;

&lt;p&gt;Lastly, this contains an API change, making a public method private.  This is probably a good thing here &amp;#8211; the method in question was one I did not know what to do with previously and was a bit opaque for public consumption.  This might not be acceptable for 1.5.1 and need to remain public &amp;#8211; though we can mark it deprecated and plan to hide it for 1.6.0.&lt;/p&gt;</comment>
                            <comment id="13016670" author="scott_carey" created="Thu, 7 Apr 2011 03:37:08 +0000"  >&lt;p&gt;Actually, my thread test was incorrect.  Performance of the &apos;different thread creates than uses&apos; case is acceptable.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;corrected test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericOtherThreadCreateReader &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericTest {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; GenericOtherThreadCreateReader() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;GenericOtherThreadCreateReader_&quot;&lt;/span&gt;);
      isWriteTest = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
    GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; r = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; superReader() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.newReader();
    }
    
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; newReader() {
      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;() {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
          r = superReader();
        }
      };
      t.run();
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        t.join();
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
        e.printStackTrace();
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; r;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13016864" author="thiru_mg" created="Thu, 7 Apr 2011 15:07:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;Lastly, this contains an API change, making a public method private. This is probably a good thing here &#8211; the method in question was one I did not know what to do with previously and was a bit opaque for public consumption. This might not be acceptable for 1.5.1 and need to remain public though we can mark it deprecated and plan to hide it for 1.6.0.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The only use of the return value of ResolvingDecoder.resolve() is to pass it the constructor of ResolvingDecoder, which is private. In theory someone could have used the resolve() method, but there is no practical value for that method outside ResolvingDecoder.&lt;/p&gt;</comment>
                            <comment id="13017076" author="cutting" created="Thu, 7 Apr 2011 18:33:07 +0000"  >&lt;p&gt;With this patch the value of applyAliases() is no longer cached.  Some of the cost of applyAliases() is incurred whenever the reader and writer schemas are not identical, and I&apos;m pleased to see that this (a walk of the schema looking for aliases and the creation of tables to hold aliases) doesn&apos;t slow things.  But in the case an alias exists, applyAliases must create a copy of the schema, something Perf.java doesn&apos;t currently test.  Is it worth adding a test for this?&lt;/p&gt;</comment>
                            <comment id="13017089" author="scott_carey" created="Thu, 7 Apr 2011 19:04:14 +0000"  >&lt;p&gt;It might be worse than that.  The Resolver won&apos;t be cached if applyAliases() returns a new instance since the cache is based on identity.  Either aliases need to be pushed down into the resolver, or setSchema() and friends have to cache the alias transformation and use the result for accessing the resolver.&lt;/p&gt;

&lt;p&gt;A Perf test that covers aliases is a good idea.&lt;/p&gt;
</comment>
                            <comment id="13017101" author="thiru_mg" created="Thu, 7 Apr 2011 19:48:55 +0000"  >&lt;p&gt;I think the simplest solution is to move applyAliases invocation to ResolvingDecoder. Please see &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-792&quot; title=&quot;map reduce job for avro 1.5 generates ArrayIndexOutOfBoundsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-792&quot;&gt;&lt;del&gt;AVRO-792&lt;/del&gt;&lt;/a&gt;-3.patch.&lt;/p&gt;</comment>
                            <comment id="13017884" author="thiru_mg" created="Sat, 9 Apr 2011 14:53:51 +0000"  >&lt;p&gt;I&apos;ll wait for the confirmation that this indeed solves the problem before I commit.&lt;/p&gt;</comment>
                            <comment id="13019552" author="eychih" created="Wed, 13 Apr 2011 21:08:20 +0000"  >&lt;p&gt;Thanks.  I tested the third patch under our environment.  Unfortunately, this did not fix the problem.  What follows is the trace from our VM.&lt;/p&gt;

&lt;p&gt;===============================================================================================================================&lt;/p&gt;

&lt;p&gt;cloudera@cloudera-demo:~/src/ngpipes-etl/dist$ hadoop jar ngpipesjobs.jar com.ngmoco.ngpipes.etl.NgEventETLJob input/etl/test_avro_bugfix/2011-04-12/0200 etl_out avro/ngpipes-events.avdl&lt;br/&gt;
Input Path =&amp;gt; input/etl/test_avro_bugfix/2011-04-12/0200&lt;br/&gt;
Log Start Time =&amp;gt; 2011:04:12:02&lt;br/&gt;
Setting Job Name =&amp;gt; NgEventETLJob 2011:04:12:02 2011:04:12:03&lt;br/&gt;
Output Path =&amp;gt; etl_out&lt;br/&gt;
Fetching From URL =&amp;gt; &lt;a href=&quot;http://partner.plusplus.com/admin/products.json&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://partner.plusplus.com/admin/products.json&lt;/a&gt;&lt;br/&gt;
isProduction =&amp;gt; false&lt;br/&gt;
11/04/12 10:18:14 INFO etl.NgEventETLJob: Setting plus.json.games.table&lt;br/&gt;
11/04/12 10:18:14 INFO mapred.FileInputFormat: Total input paths to process : 4&lt;br/&gt;
11/04/12 10:18:15 INFO mapred.JobClient: Running job: job_201104081805_0001&lt;br/&gt;
11/04/12 10:18:16 INFO mapred.JobClient:  map 0% reduce 0%&lt;br/&gt;
11/04/12 10:18:28 INFO mapred.JobClient:  map 20% reduce 0%&lt;br/&gt;
11/04/12 10:18:29 INFO mapred.JobClient:  map 40% reduce 0%&lt;br/&gt;
11/04/12 10:18:35 INFO mapred.JobClient:  map 80% reduce 0%&lt;br/&gt;
11/04/12 10:18:39 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/12 10:18:43 INFO mapred.JobClient:  map 100% reduce 26%&lt;br/&gt;
11/04/12 10:18:46 INFO mapred.JobClient: Task Id : attempt_201104081805_0001_r_000000_0, Status : FAILED&lt;br/&gt;
11/04/12 10:18:47 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/12 10:18:57 INFO mapred.JobClient: Task Id : attempt_201104081805_0001_r_000000_1, Status : FAILED&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 3&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:142)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:166)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:138)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:129)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:39)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;/p&gt;

&lt;p&gt;11/04/12 10:19:05 INFO mapred.JobClient:  map 100% reduce 26%&lt;br/&gt;
11/04/12 10:19:08 INFO mapred.JobClient: Task Id : attempt_201104081805_0001_r_000000_2, Status : FAILED&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 3&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:142)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:166)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:138)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:129)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:39)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;/p&gt;

&lt;p&gt;11/04/12 10:19:10 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient: Job complete: job_201104081805_0001&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient: Counters: 31&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:   com.ngmoco.ngpipes.utils.NgPipesGlobals$EventClassCounter&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     PLUS_EVENT=249&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     REV_EVENT=1&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     PC_REV_EVENT=1&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:   Job Counters &lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Launched reduce tasks=4&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=34290&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Launched map tasks=5&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Data-local map tasks=5&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Failed reduce tasks=1&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=53407&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:   com.ngmoco.ngpipes.etl.NgEventETLMapper$EventSourceTypes&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     PLUS_SERVER=222&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     PLUS_CLIENT=28&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:   FileSystemCounters&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     HDFS_BYTES_READ=472855&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=1164803&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:   com.ngmoco.ngpipes.etl.NgEventETLMapper$Event&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     ERR_NO_AFAM=133&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     ERR_NULL_VALUE=109&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     DISCARDED_EVENTS=1058&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     ERR_NO_PUBL=112&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     ERR_MAPPING_ASKU_TO_AFAM=676&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     ERR_NO_ASKU=225&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     ERR_EMPTY_MAP=182&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     ERR_OTHER=45&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:   Map-Reduce Framework&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Combine output records=0&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Map input records=1281&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Spilled Records=205&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Map output bytes=41281&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Map input bytes=468793&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Combine input records=0&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     Map output records=205&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient:     SPLIT_RAW_BYTES=889&lt;br/&gt;
11/04/12 10:19:22 INFO mapred.JobClient: Job Failed: NA&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.IOException: Job failed!&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1246)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLJob.runJob(NgEventETLJob.java:160)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLJob.run(NgEventETLJob.java:108)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLJob.main(NgEventETLJob.java:189)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:186)&lt;br/&gt;
cloudera@cloudera-demo:~/src/ngpipes-etl/dist$ hadoop jar ngpipesjobs.jar com.ngmoco.ngpipes.etl.NgEventETLJob input/etl/test_avro_bugfix/2011-04-12/0200 etl_out avro/ngpipes-events.avdl&lt;br/&gt;
Input Path =&amp;gt; input/etl/test_avro_bugfix/2011-04-12/0200&lt;br/&gt;
Log Start Time =&amp;gt; 2011:04:12:02&lt;br/&gt;
Setting Job Name =&amp;gt; NgEventETLJob 2011:04:12:02 2011:04:12:03&lt;br/&gt;
Output Path =&amp;gt; etl_out&lt;br/&gt;
Fetching From URL =&amp;gt; &lt;a href=&quot;http://partner.plusplus.com/admin/products.json&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://partner.plusplus.com/admin/products.json&lt;/a&gt;&lt;br/&gt;
isProduction =&amp;gt; false&lt;br/&gt;
11/04/12 10:30:33 INFO etl.NgEventETLJob: Setting plus.json.games.table&lt;br/&gt;
11/04/12 10:30:34 INFO mapred.FileInputFormat: Total input paths to process : 4&lt;br/&gt;
11/04/12 10:30:34 INFO mapred.JobClient: Running job: job_201104081805_0002&lt;br/&gt;
11/04/12 10:30:35 INFO mapred.JobClient:  map 0% reduce 0%&lt;br/&gt;
11/04/12 10:30:44 INFO mapred.JobClient:  map 40% reduce 0%&lt;br/&gt;
11/04/12 10:30:51 INFO mapred.JobClient:  map 60% reduce 0%&lt;br/&gt;
11/04/12 10:30:52 INFO mapred.JobClient:  map 80% reduce 0%&lt;br/&gt;
11/04/12 10:30:55 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/12 10:31:00 INFO mapred.JobClient:  map 100% reduce 33%&lt;br/&gt;
11/04/12 10:31:03 INFO mapred.JobClient: Task Id : attempt_201104081805_0002_r_000000_0, Status : FAILED&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 3&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:246)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:223)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:123)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:147)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:119)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:110)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:39)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;/p&gt;

&lt;p&gt;11/04/12 10:31:04 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/12 10:31:11 INFO mapred.JobClient:  map 100% reduce 33%&lt;br/&gt;
11/04/12 10:31:14 INFO mapred.JobClient: Task Id : attempt_201104081805_0002_r_000000_1, Status : FAILED&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 3&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:246)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:223)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:123)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:147)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:119)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:110)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:39)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;/p&gt;

&lt;p&gt;11/04/12 10:31:16 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/12 10:31:26 INFO mapred.JobClient: Task Id : attempt_201104081805_0002_r_000000_2, Status : FAILED&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 3&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:246)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:223)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:123)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:147)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:119)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:110)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:39)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;/p&gt;

&lt;p&gt;11/04/12 10:31:34 INFO mapred.JobClient:  map 100% reduce 13%&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient: Job complete: job_201104081805_0002&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient: Counters: 31&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:   com.ngmoco.ngpipes.utils.NgPipesGlobals$EventClassCounter&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     PLUS_EVENT=249&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     REV_EVENT=1&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     PC_REV_EVENT=1&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:   Job Counters &lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Launched reduce tasks=4&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=32438&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Launched map tasks=5&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Data-local map tasks=5&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Failed reduce tasks=1&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=52425&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:   com.ngmoco.ngpipes.etl.NgEventETLMapper$EventSourceTypes&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     PLUS_SERVER=222&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     PLUS_CLIENT=28&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:   FileSystemCounters&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     HDFS_BYTES_READ=472855&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=1164803&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:   com.ngmoco.ngpipes.etl.NgEventETLMapper$Event&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     ERR_NO_AFAM=133&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     ERR_NULL_VALUE=109&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     DISCARDED_EVENTS=1058&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     ERR_NO_PUBL=112&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     ERR_MAPPING_ASKU_TO_AFAM=676&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     ERR_NO_ASKU=225&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     ERR_EMPTY_MAP=182&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     ERR_OTHER=45&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:   Map-Reduce Framework&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Combine output records=0&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Map input records=1281&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Spilled Records=205&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Map output bytes=41281&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Map input bytes=468793&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Combine input records=0&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     Map output records=205&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient:     SPLIT_RAW_BYTES=889&lt;br/&gt;
11/04/12 10:31:38 INFO mapred.JobClient: Job Failed: NA&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.IOException: Job failed!&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1246)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLJob.runJob(NgEventETLJob.java:160)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLJob.run(NgEventETLJob.java:108)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLJob.main(NgEventETLJob.java:189)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:186)&lt;br/&gt;
===========================================================================================================================  &lt;/p&gt;</comment>
                            <comment id="13019559" author="eychih" created="Wed, 13 Apr 2011 21:18:11 +0000"  >&lt;p&gt;For the test I just posted, we have four input log files.  We tested this under our debugging environment also and it worked.  I think this is probably because, under the debugging environment, the four log files are processed sequentially, instead of concurrently. &lt;/p&gt;</comment>
                            <comment id="13019578" author="eychih" created="Wed, 13 Apr 2011 22:15:39 +0000"  >&lt;p&gt;Let me clarify the trace I just posted. I actually ran the job twice.  The first run didn&apos;t include the patch.  The second run did include the patch.  As you can see, line numbers of the stack trace for the first run are different from those for the second run.  But both runs are broken.&lt;/p&gt;</comment>
                            <comment id="13021148" author="eychih" created="Mon, 18 Apr 2011 17:58:29 +0000"  >&lt;p&gt;I re-ran the test by cutting the number of input files to one and setting the number of reducers to one.  The job was still broken, as shown below.  Does it make sense to try the first patch, rather than the patch 3?  What kind of test I can run to help you debug?&lt;/p&gt;

&lt;p&gt;======================================================================================&lt;br/&gt;
cloudera@cloudera-demo:~/src/ngpipes-etl/dist$ hadoop jar ngpipesjobs.jar com.ngmoco.ngpipes.etl.NgEventETLJob -D mapred.reduce.tasks=1 input/etl/test_avro_bugfix/2011-04-12/0200 etl_out avro/ngpipes-events.avdl&lt;br/&gt;
Input Path =&amp;gt; input/etl/test_avro_bugfix/2011-04-12/0200&lt;br/&gt;
Log Start Time =&amp;gt; 2011:04:12:02&lt;br/&gt;
Setting Job Name =&amp;gt; NgEventETLJob 2011:04:12:02 2011:04:12:03&lt;br/&gt;
Output Path =&amp;gt; etl_out&lt;br/&gt;
Fetching From URL =&amp;gt; &lt;a href=&quot;http://partner.plusplus.com/admin/products.json&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://partner.plusplus.com/admin/products.json&lt;/a&gt;&lt;br/&gt;
isProduction =&amp;gt; false&lt;br/&gt;
11/04/15 14:17:41 INFO etl.NgEventETLJob: Setting plus.json.games.table&lt;br/&gt;
11/04/15 14:17:41 INFO mapred.FileInputFormat: Total input paths to process : 1&lt;br/&gt;
11/04/15 14:17:41 INFO mapred.JobClient: Running job: job_201104132218_0004&lt;br/&gt;
11/04/15 14:17:42 INFO mapred.JobClient:  map 0% reduce 0%&lt;br/&gt;
11/04/15 14:17:51 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/15 14:17:59 INFO mapred.JobClient:  map 100% reduce 33%&lt;br/&gt;
11/04/15 14:18:01 INFO mapred.JobClient: Task Id : attempt_201104132218_0004_r_000000_0, Status : FAILED&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 3&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:246)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:223)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:123)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:147)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:119)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:110)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:47)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:39)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:60)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;br/&gt;
============================================================================&lt;/p&gt;</comment>
                            <comment id="13021316" author="scott_carey" created="Mon, 18 Apr 2011 22:21:56 +0000"  >&lt;p&gt;It makes sense to try the first patch.   It&apos;s performance will be lower, but should be correct.  if that does not fix it either, then our original diagnosis is incorrect.   If patch 1 works and patch 3 does not it also helps us narrow down the problem.&lt;/p&gt;</comment>
                            <comment id="13022423" author="eychih" created="Wed, 20 Apr 2011 23:28:31 +0000"  >&lt;p&gt;I tried with the first patch, but there was no luck.  What follow was the trace.&lt;/p&gt;

&lt;p&gt;=======================================================================&lt;br/&gt;
cloudera@cloudera-demo:~/src/ngpipes-etl/dist$ hadoop jar ngpipesjobs.jar com.ngmoco.ngpipes.etl.NgEventETLJob input/etl/test_avro_bugfix/2011-04-12/0200 etl_out avro/ngpipes-events.avdl&lt;br/&gt;
Input Path =&amp;gt; input/etl/test_avro_bugfix/2011-04-12/0200&lt;br/&gt;
Log Start Time =&amp;gt; 2011:04:12:02&lt;br/&gt;
Setting Job Name =&amp;gt; NgEventETLJob 2011:04:12:02 2011:04:12:03&lt;br/&gt;
Output Path =&amp;gt; etl_out&lt;br/&gt;
Fetching From URL =&amp;gt; &lt;a href=&quot;http://partner.plusplus.com/admin/products.json&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://partner.plusplus.com/admin/products.json&lt;/a&gt;&lt;br/&gt;
isProduction =&amp;gt; false&lt;br/&gt;
11/04/20 16:17:20 INFO etl.NgEventETLJob: Setting plus.json.games.table&lt;br/&gt;
11/04/20 16:17:21 INFO mapred.FileInputFormat: Total input paths to process : 1&lt;br/&gt;
11/04/20 16:17:21 INFO mapred.JobClient: Running job: job_201104132218_0005&lt;br/&gt;
11/04/20 16:17:22 INFO mapred.JobClient:  map 0% reduce 0%&lt;br/&gt;
11/04/20 16:17:31 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/04/20 16:17:38 INFO mapred.JobClient:  map 100% reduce 33%&lt;br/&gt;
11/04/20 16:17:41 INFO mapred.JobClient: Task Id : attempt_201104132218_0005_r_000000_0, Status : FAILED&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 3&lt;br/&gt;
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:246)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:223)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:106)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:130)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:102)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:93)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:86)&lt;br/&gt;
	at org.apache.avro.mapred.AvroSerialization$AvroWrapperDeserializer.deserialize(AvroSerialization.java:68)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1136)&lt;br/&gt;
	at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1076)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:246)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:242)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase$ReduceIterable.next(HadoopReducerBase.java:48)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:39)&lt;br/&gt;
	at com.ngmoco.ngpipes.etl.NgEventETLReducer.reduce(NgEventETLReducer.java:1)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:61)&lt;br/&gt;
	at org.apache.avro.mapred.HadoopReducerBase.reduce(HadoopReducerBase.java:30)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:240)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:234)&lt;br/&gt;
==================================================================&lt;/p&gt;</comment>
                            <comment id="13022832" author="scott_carey" created="Thu, 21 Apr 2011 17:19:15 +0000"  >&lt;p&gt;If none of the patches fix the problem, then it is not the result of how we were re-using the ResolvingDecoder objects.  It is likely in the resolver itself, or perhaps due to field aliases or another feature added between 1.4.1 and 1.5.0.&lt;/p&gt;</comment>
                            <comment id="13022846" author="scott_carey" created="Thu, 21 Apr 2011 17:46:48 +0000"  >&lt;p&gt;At this point, the inability of any of us to reproduce it is a problem.   Can you reduce the problem to reproduce as an Avro unit test (perhaps leveraging one of the pre-existing unit tests)?&lt;/p&gt;

&lt;p&gt;This would allow us to step through the problem in a debugger and solve it without so much trial and error.&lt;/p&gt;</comment>
                            <comment id="13025735" author="thiru_mg" created="Wed, 27 Apr 2011 11:11:43 +0000"  >&lt;p&gt;I don&apos;t have a theory that can explain this behavior.&lt;/p&gt;</comment>
                            <comment id="13025886" author="scott_carey" created="Wed, 27 Apr 2011 16:45:16 +0000"  >&lt;p&gt;To progress further on this, we need a reproducible test case.  We will need to step through a debugger to track where the invalid union index is coming from.&lt;/p&gt;</comment>
                            <comment id="13036939" author="eychih" created="Fri, 20 May 2011 17:26:55 +0000"  >&lt;p&gt;We still don&apos;t have enough time to create a test case to reproduce the problem.  What I have done is, given our MR job, mentioned above, I made it become a map-only job with the argument &lt;br/&gt;
-D mapred.reduce.tasks=0 to generate data after the mapper.  Attached are the data files generated.  I think the problem arises when the reducer de-serializes the data.  Can someone help me to create a test case to simulate the de-serialization process of the reducer by, perhaps, writing a MR job with an identity mapper against the data files attached?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13036969" author="scott_carey" created="Fri, 20 May 2011 18:08:57 +0000"  >&lt;p&gt;I&apos;ve deserialized all the records in these files successfully using a GenericDatumReader and the avro file reading API.   I am working on a data file recovery tool for identifying corrupt files and recovering data, and both of these files check out with it printing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ java -jar avro-tools-1.6.0-SNAPSHOT.jar repair -o report Downloads/part-00000.avro 
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of blocks: 5 &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of corrupt blocks: 0
 &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of records: 249 &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of corrupt records: 0
$ java -jar avro-tools-1.6.0-SNAPSHOT.jar repair -o report Downloads/part-00001.avro 
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of blocks: 7 &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of corrupt blocks: 0
 &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of records: 360 &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of corrupt records: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This doesn&apos;t exactly simulate the situation in a reducer.  This is simply using the schema in the file to decode the data into GenericRecords.&lt;/p&gt;</comment>
                            <comment id="13036973" author="eychih" created="Fri, 20 May 2011 18:20:23 +0000"  >&lt;p&gt;I can also use the avro tool to view the data files in the json format.  But the issue is how to simulate the de-serialization process of a reducer.  &lt;/p&gt;</comment>
                            <comment id="13036986" author="scott_carey" created="Fri, 20 May 2011 18:31:21 +0000"  >&lt;p&gt;The reducer triggers the resolver in a way that might not happen in ordinary file reading.   &lt;/p&gt;</comment>
                            <comment id="13036996" author="eychih" created="Fri, 20 May 2011 18:45:18 +0000"  >&lt;p&gt;By the way the collector of our mapper is of the type AvroCollector&amp;lt;Pair&amp;lt;Utf8, GenericRecord&amp;gt;&amp;gt; and the reducer is a subclass of AvroReducer&amp;lt;Utf8, GenericRecord, GenericRecord&amp;gt;.&lt;/p&gt;</comment>
                            <comment id="13037479" author="eychih" created="Sat, 21 May 2011 23:17:47 +0000"  >&lt;p&gt;I ran the job against jars of 1.5.1.  It seemed working now, as indicated below:&lt;/p&gt;

&lt;p&gt;cloudera@cloudera-demo:~/src/ngpipes-etl/dist$ hadoop jar ngpipesjobs.jar com.ngmoco.ngpipes.etl.NgEventETLJob -D ngpipes.environment=stagging input/etl/test_avro_bugfix/2011-04-12/0200 etl_out avro/ngpipes-events.avdl&lt;br/&gt;
Input Path =&amp;gt; input/etl/test_avro_bugfix/2011-04-12/0200&lt;br/&gt;
Log Start Time =&amp;gt; 2011:04:12:02&lt;br/&gt;
Setting Job Name =&amp;gt; NgEventETLJob 2011:04:12:02 2011:04:12:03&lt;br/&gt;
Output Path =&amp;gt; etl_out&lt;br/&gt;
11/05/20 21:40:16 INFO mapred.FileInputFormat: Total input paths to process : 1&lt;br/&gt;
11/05/20 21:40:16 INFO mapred.JobClient: Running job: job_201105201725_0001&lt;br/&gt;
11/05/20 21:40:17 INFO mapred.JobClient:  map 0% reduce 0%&lt;br/&gt;
11/05/20 21:40:24 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/05/20 21:40:31 INFO mapred.JobClient:  map 100% reduce 33%&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:  map 100% reduce 100%&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient: Job complete: job_201105201725_0001&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient: Counters: 25&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:   Job Counters &lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Launched reduce tasks=1&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=7553&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Launched map tasks=2&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Data-local map tasks=2&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=8371&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:   FileSystemCounters&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     FILE_BYTES_READ=6&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     HDFS_BYTES_READ=29284&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=195797&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=2095&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:   com.ngmoco.ngpipes.etl.NgEventETLMapper$Event&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     INITIALIZATION_ERROR=109&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     DISCARDED_EVENTS=109&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:   Map-Reduce Framework&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Reduce input groups=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Combine output records=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Map input records=109&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Reduce shuffle bytes=12&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Reduce output records=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Spilled Records=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Map output bytes=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Map input bytes=25081&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Combine input records=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Map output records=0&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     SPLIT_RAW_BYTES=358&lt;br/&gt;
11/05/20 21:40:33 INFO mapred.JobClient:     Reduce input records=0&lt;/p&gt;</comment>
                            <comment id="13037483" author="eychih" created="Sun, 22 May 2011 00:17:26 +0000"  >&lt;p&gt;Sorry, I found that there is no data sent to the reducer for the above job.  So I still need to do more investigation.   &lt;/p&gt;</comment>
                            <comment id="13038099" author="eychih" created="Mon, 23 May 2011 18:09:08 +0000"  >&lt;p&gt;I ran it again with 1.5.1 and the problem went away as indicated below.  Probably it is a problem of one of the jars.&lt;/p&gt;


&lt;p&gt;cloudera@cloudera-demo:~/src/ngpipes-etl/dist$ hadoop jar ngpipesjobs.jar com.ngmoco.ngpipes.etl.NgEventETLJob -D ngpipes.environment=staging input/etl/test_avro_bugfix/2011-04-12/0200 etl_out avro/ngpipes-events.avdl&lt;br/&gt;
Input Path =&amp;gt; input/etl/test_avro_bugfix/2011-04-12/0200&lt;br/&gt;
Log Start Time =&amp;gt; 2011:04:12:02&lt;br/&gt;
Setting Job Name =&amp;gt; NgEventETLJob 2011:04:12:02 2011:04:12:03&lt;br/&gt;
Output Path =&amp;gt; etl_out&lt;br/&gt;
11/05/23 11:02:44 INFO mapred.FileInputFormat: Total input paths to process : 1&lt;br/&gt;
11/05/23 11:02:44 INFO mapred.JobClient: Running job: job_201105231018_0003&lt;br/&gt;
11/05/23 11:02:45 INFO mapred.JobClient:  map 0% reduce 0%&lt;br/&gt;
11/05/23 11:02:56 INFO mapred.JobClient:  map 1% reduce 0%&lt;br/&gt;
11/05/23 11:02:57 INFO mapred.JobClient:  map 50% reduce 0%&lt;br/&gt;
11/05/23 11:02:58 INFO mapred.JobClient:  map 100% reduce 0%&lt;br/&gt;
11/05/23 11:03:08 INFO mapred.JobClient:  map 100% reduce 100%&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient: Job complete: job_201105231018_0003&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient: Counters: 27&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:   com.ngmoco.ngpipes.utils.NgPipesGlobals$EventClassCounter&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     PLUS_EVENT=109&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:   Job Counters &lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Launched reduce tasks=1&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=21272&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Launched map tasks=2&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Data-local map tasks=2&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=10509&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:   com.ngmoco.ngpipes.etl.NgEventETLMapper$EventSourceTypes&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     PLUS_SERVER=109&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:   FileSystemCounters&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     FILE_BYTES_READ=18844&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     HDFS_BYTES_READ=29284&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=233467&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=18120&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:   com.ngmoco.ngpipes.etl.NgEventETLMapper$Event&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     ERR_NO_AREL=18&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     ERR_NULL_VALUE=109&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:   Map-Reduce Framework&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Reduce input groups=5&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Combine output records=0&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Map input records=109&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Reduce shuffle bytes=18850&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Reduce output records=109&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Spilled Records=218&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Map output bytes=18538&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Map input bytes=25081&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Combine input records=0&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Map output records=109&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     SPLIT_RAW_BYTES=358&lt;br/&gt;
11/05/23 11:03:09 INFO mapred.JobClient:     Reduce input records=109&lt;/p&gt;</comment>
                            <comment id="13058021" author="cutting" created="Thu, 30 Jun 2011 19:28:41 +0000"  >&lt;p&gt;I&apos;m resolving this as it seems no longer to be a problem.&lt;/p&gt;</comment>
                            <comment id="14372938" author="anujojha" created="Sat, 21 Mar 2015 18:16:58 +0000"  >&lt;p&gt;We are seeing this error with 1.7.6 as stated in one of the mails here: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/avro-user/201401.mbox/%3CCAPKgQ9pb68EADnBbBU91tXSa3pWj-ct0Ezn=bKRVf08Ct7c9Zw@mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/avro-user/201401.mbox/%3CCAPKgQ9pb68EADnBbBU91tXSa3pWj-ct0Ezn=bKRVf08Ct7c9Zw@mail.gmail.com%3E&lt;/a&gt;&lt;br/&gt;
Here is the stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2015-03-21 03:18:04,747 WARN org.apache.hadoop.mapred.Child: Error running child
java.lang.ArrayIndexOutOfBoundsException: -58
	at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364)
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229)
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:152)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:139)
	at org.apache.crunch.types.avro.SafeAvroSerialization$AvroWrapperDeserializer.deserialize(SafeAvroSerialization.java:86)
	at org.apache.crunch.types.avro.SafeAvroSerialization$AvroWrapperDeserializer.deserialize(SafeAvroSerialization.java:70)
	at org.apache.hadoop.mapreduce.task.ReduceContextImpl.nextKeyValue(ReduceContextImpl.java:139)
	at org.apache.hadoop.mapreduce.task.ReduceContextImpl.nextKey(ReduceContextImpl.java:114)
	at org.apache.hadoop.mapreduce.lib.reduce.WrappedReducer$Context.nextKey(WrappedReducer.java:296)
	at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:163)
	at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:610)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:444)
	at org.apache.hadoop.mapred.Child$4.run(Child.java:268)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:394)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1438)
	at org.apache.hadoop.mapred.Child.main(Child.java:262)
2015-03-21 03:18:04,750 INFO org.apache.hadoop.mapred.Task: Runnning cleanup &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the task
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please let me know if I should log a separate bug for this. &lt;/p&gt;</comment>
                            <comment id="14389458" author="rdblue" created="Tue, 31 Mar 2015 21:33:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anujojha&quot; class=&quot;user-hover&quot; rel=&quot;anujojha&quot;&gt;Anuj Ojha&lt;/a&gt; is this something you can reproduce? If you have a file and and split information with this error, I can take a look. A quick look at the trace makes it look like it is probably the same bug.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475656" name="AVRO-792-2.patch" size="4815" author="thiru_mg" created="Thu, 7 Apr 2011 02:34:02 +0000"/>
                            <attachment id="12475738" name="AVRO-792-3.patch" size="4868" author="thiru_mg" created="Thu, 7 Apr 2011 19:48:55 +0000"/>
                            <attachment id="12475283" name="AVRO-792.patch" size="5109" author="thiru_mg" created="Sat, 2 Apr 2011 12:01:46 +0000"/>
                            <attachment id="12479930" name="part-00000.avro" size="76648" author="eychih" created="Fri, 20 May 2011 17:26:55 +0000"/>
                            <attachment id="12479928" name="part-00000.avro" size="76648" author="eychih" created="Fri, 20 May 2011 17:25:33 +0000"/>
                            <attachment id="12479931" name="part-00001.avro" size="113043" author="eychih" created="Fri, 20 May 2011 17:26:55 +0000"/>
                            <attachment id="12479929" name="part-00001.avro" size="113043" author="eychih" created="Fri, 20 May 2011 17:25:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 2 Apr 2011 12:00:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80166</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-793] A strange problem when I am trying to read avro record with a subset of the schema.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-793</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Hi, all. When I am trying to read avro file with a subset of that schema(because I do not need all the details).I meet a strange problem.&lt;br/&gt;
1.I write data using this schema:&lt;br/&gt;
{&lt;br/&gt;
    &quot;name&quot;: &quot;relation&quot;,&lt;br/&gt;
    &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
    &quot;fields&quot;: [&lt;br/&gt;
        &lt;/p&gt;
{
            &quot;name&quot;: &quot;timestamp&quot;,
            &quot;type&quot;: &quot;long&quot;
        }
&lt;p&gt;,&lt;br/&gt;
        {&lt;br/&gt;
            &quot;name&quot;: &quot;type&quot;,&lt;br/&gt;
            &quot;type&quot;: {&lt;br/&gt;
                &quot;type&quot;: &quot;map&quot;,&lt;br/&gt;
                &quot;values&quot;:{&lt;br/&gt;
                    &quot;type&quot; : &quot;array&quot;,&lt;br/&gt;
&quot;items&quot;: {&lt;br/&gt;
&quot;type&quot;:&quot;record&quot;,&lt;br/&gt;
&quot;name&quot;:&quot;sdf&quot;,&lt;br/&gt;
&quot;fields&quot;: [&lt;br/&gt;
{&lt;br/&gt;
&quot;name&quot;: &quot;device&quot;,&lt;br/&gt;
&quot;type&quot;: &quot;string&quot;&lt;br/&gt;
},&lt;br/&gt;
{&lt;br/&gt;
&quot;name&quot;: &quot;children&quot;,&lt;br/&gt;
&quot;type&quot;: &lt;/p&gt;
{
&quot;type&quot;: &quot;array&quot;,
&quot;items&quot;: &quot;string&quot;
}
}
]
}
}
            }
&lt;p&gt;        }&lt;br/&gt;
    ]&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;2.Here is a JSONObject for that schema.&lt;br/&gt;
{&lt;br/&gt;
&quot;timestamp&quot;:1234567890,&lt;br/&gt;
&quot;type&quot;:&lt;/p&gt;
{
&quot;WMA&quot;:[
{
&quot;device&quot;:&quot;WMA1&quot;,
&quot;children&quot;:[&quot;WMB1&quot;,&quot;WMB2&quot;]
},
{
&quot;device&quot;:&quot;WMA2&quot;,
&quot;children&quot;:[&quot;WMB1&quot;,&quot;WMB2&quot;]
}
]
}

}

&lt;p&gt;3.I write that record succefully.And it is okay if I use this schema for reading:&lt;br/&gt;
{&lt;br/&gt;
    &quot;name&quot;: &quot;relation&quot;,&lt;br/&gt;
    &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
    &quot;fields&quot;: [&lt;br/&gt;
        &lt;/p&gt;
{
            &quot;name&quot;: &quot;timestamp&quot;,
            &quot;type&quot;: &quot;long&quot;
        }
&lt;p&gt;,&lt;br/&gt;
        {&lt;br/&gt;
            &quot;name&quot;: &quot;type&quot;,&lt;br/&gt;
            &quot;type&quot;: {&lt;br/&gt;
                &quot;type&quot;: &quot;map&quot;,&lt;br/&gt;
                &quot;values&quot;:{&lt;br/&gt;
                    &quot;type&quot; : &quot;array&quot;,&lt;br/&gt;
&quot;items&quot;: {&lt;br/&gt;
&quot;type&quot;:&quot;record&quot;,&lt;br/&gt;
&quot;name&quot;:&quot;sdf&quot;,&lt;br/&gt;
&quot;fields&quot;: [&lt;br/&gt;
{&lt;br/&gt;
&quot;name&quot;: &quot;children&quot;,&lt;br/&gt;
&quot;type&quot;: &lt;/p&gt;
{
&quot;type&quot;: &quot;array&quot;,
&quot;items&quot;: &quot;string&quot;
}
}
]
}
}
            }
&lt;p&gt;        }&lt;br/&gt;
    ]&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;the result is :&lt;br/&gt;
{&lt;br/&gt;
&quot;timestamp&quot;:1234567890,&lt;br/&gt;
&quot;type&quot;:&lt;/p&gt;
{
&quot;WMA&quot;:[
{
&quot;children&quot;:[&quot;WMB1&quot;,&quot;WMB2&quot;]
},
{
&quot;children&quot;:[&quot;WMB1&quot;,&quot;WMB2&quot;]
}
]
}

}

&lt;p&gt;4.But if i want to igonre the &quot;children&quot; part instead of &quot;device&quot;,  I use this schema for reading:&lt;br/&gt;
{&lt;br/&gt;
    &quot;name&quot;: &quot;relation&quot;,&lt;br/&gt;
    &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
    &quot;fields&quot;: [&lt;br/&gt;
        &lt;/p&gt;
{
            &quot;name&quot;: &quot;timestamp&quot;,
            &quot;type&quot;: &quot;long&quot;
        }
&lt;p&gt;,&lt;br/&gt;
        {&lt;br/&gt;
            &quot;name&quot;: &quot;type&quot;,&lt;br/&gt;
            &quot;type&quot;: {&lt;br/&gt;
                &quot;type&quot;: &quot;map&quot;,&lt;br/&gt;
                &quot;values&quot;:{&lt;br/&gt;
                    &quot;type&quot; : &quot;array&quot;,&lt;br/&gt;
&quot;items&quot;: &lt;/p&gt;
{
&quot;type&quot;:&quot;record&quot;,
&quot;name&quot;:&quot;sdf&quot;,
&quot;fields&quot;: [
{
&quot;name&quot;: &quot;device&quot;,
&quot;type&quot;: &quot;string&quot;
}
]
}
}
            }
&lt;p&gt;        }&lt;br/&gt;
    ]&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Unfortunately,I get exception:&lt;/p&gt;

&lt;p&gt;java.lang.ArrayIndexOutOfBoundsException: -8&lt;br/&gt;
cause:java.lang.ArrayIndexOutOfBoundsException&lt;br/&gt;
at org.apache.avro.io.BinaryDecoder.readInt(BinaryDecoder.java:122)&lt;br/&gt;
at org.apache.avro.io.BinaryDecoder.skipString(BinaryDecoder.java:262)&lt;br/&gt;
at org.apache.avro.io.ValidatingDecoder.skipString(ValidatingDecoder.java:113)&lt;br/&gt;
at org.apache.avro.io.ParsingDecoder.skipTopSymbol(ParsingDecoder.java:60)&lt;br/&gt;
at org.apache.avro.io.parsing.SkipParser.skipTo(SkipParser.java:71)&lt;br/&gt;
at org.apache.avro.io.parsing.SkipParser.skipRepeater(SkipParser.java:83)&lt;br/&gt;
at org.apache.avro.io.ValidatingDecoder.skipArray(ValidatingDecoder.java:195)&lt;br/&gt;
at org.apache.avro.io.ParsingDecoder.skipTopSymbol(ParsingDecoder.java:70)&lt;br/&gt;
at org.apache.avro.io.parsing.SkipParser.skipTo(SkipParser.java:71)&lt;br/&gt;
at org.apache.avro.io.parsing.SkipParser.skipSymbol(SkipParser.java:93)&lt;br/&gt;
at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:226)&lt;br/&gt;
at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
at org.apache.avro.io.ResolvingDecoder.readFieldOrder(ResolvingDecoder.java:127)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:162)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:138)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.readArray(GenericDatumReader.java:196)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:140)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.readMap(GenericDatumReader.java:233)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:141)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:167)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:138)&lt;br/&gt;
at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:129)&lt;br/&gt;
at org.apache.avro.file.DataFileStream.next(DataFileStream.java:236)&lt;br/&gt;
at org.apache.avro.file.DataFileStream.next(DataFileStream.java:223)&lt;br/&gt;
at AvroUtilTest.read(AvroUtilTest.java:77)&lt;br/&gt;
at AvroUtilTest.main(AvroUtilTest.java:61)&lt;/p&gt;



&lt;p&gt;As Scott Carey said,I did like this and it worked.How to fix this bug?&lt;br/&gt;
Scott Carey:&lt;br/&gt;
2:  If you change the schema you write with by making reversing the order of the fields of &quot;sdf&quot; (array, then string), are the results the same?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Avro1.5,Windows xp/Ubuntu 10.0.4&lt;/p&gt;</environment>
        <key id="12502969">AVRO-793</key>
            <summary>A strange problem when I am trying to read avro record with a subset of the schema.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="ygnhzeus">Yingzhong Xu</reporter>
                        <labels>
                            <label>Avro</label>
                            <label>Reading</label>
                            <label>Schema</label>
                            <label>Write</label>
                    </labels>
                <created>Thu, 31 Mar 2011 02:42:14 +0000</created>
                <updated>Fri, 6 May 2011 19:14:02 +0000</updated>
                            <resolved>Fri, 29 Apr 2011 19:05:22 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13025362" author="scott_carey" created="Tue, 26 Apr 2011 18:23:36 +0000"  >&lt;p&gt;this is a bug in the resolver.&lt;/p&gt;</comment>
                            <comment id="13025732" author="thiru_mg" created="Wed, 27 Apr 2011 11:06:58 +0000"  >&lt;p&gt;Very subtle bug. If there is an array needs to be skipped and that happens to be the last field of a record, and the record is contained in an outer array, it does not get skipped properly.&lt;/p&gt;

&lt;p&gt;The test patch has the test that catches the bug and the main patch has the solution.&lt;/p&gt;</comment>
                            <comment id="13027143" author="cutting" created="Fri, 29 Apr 2011 19:05:22 +0000"  >&lt;p&gt;I committed this.  Thanks, Thiru!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12477498" name="AVRO-793-test.patch" size="1235" author="thiru_mg" created="Wed, 27 Apr 2011 11:06:58 +0000"/>
                            <attachment id="12477497" name="AVRO-793.patch" size="547" author="thiru_mg" created="Wed, 27 Apr 2011 11:06:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Apr 2011 18:23:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80167</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-794] Makefile.am is no longer required in C++</title>
                <link>https://issues.apache.org/jira/browse/AVRO-794</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Since we have moved to cmake, Makefile.am (which was used with automake) is no longer required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12503320">AVRO-794</key>
            <summary>Makefile.am is no longer required in C++</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Apr 2011 18:06:23 +0000</created>
                <updated>Fri, 6 May 2011 19:14:02 +0000</updated>
                            <resolved>Tue, 5 Apr 2011 16:42:39 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13015524" author="thiru_mg" created="Mon, 4 Apr 2011 18:08:29 +0000"  >&lt;p&gt;The attached shell script removes Makefile.am.&lt;/p&gt;</comment>
                            <comment id="13015684" author="cutting" created="Mon, 4 Apr 2011 23:47:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13016006" author="thiru_mg" created="Tue, 5 Apr 2011 16:42:39 +0000"  >&lt;p&gt;Committed revision 1089128. Thanks Doug for reviewing it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475393" name="AVRO-794.sh" size="28" author="thiru_mg" created="Mon, 4 Apr 2011 18:08:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Apr 2011 23:47:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94995</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2i7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80168</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-795] C++ Datafile reader makes it hard to build adaptive clients</title>
                <link>https://issues.apache.org/jira/browse/AVRO-795</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The current design of data file requires the C++ type for the data to be read is passed as a template argument to the DataFileReader class.&lt;/p&gt;

&lt;p&gt;This makes it hard for the client who want to examine the schema within the data file before deciding the C++ data type. The forthcoming patch addresses this problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12503323">AVRO-795</key>
            <summary>C++ Datafile reader makes it hard to build adaptive clients</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Apr 2011 18:26:28 +0000</created>
                <updated>Fri, 6 May 2011 19:14:03 +0000</updated>
                            <resolved>Tue, 5 Apr 2011 16:54:26 +0000</resolved>
                                    <version>1.5.1</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13015613" author="thiru_mg" created="Mon, 4 Apr 2011 20:52:59 +0000"  >&lt;p&gt;This patch addresses the problem by replacing inheritance with composition.&lt;/p&gt;</comment>
                            <comment id="13015682" author="cutting" created="Mon, 4 Apr 2011 23:46:54 +0000"  >&lt;p&gt;Looks reasonable and tests pass for me on Ubuntu 10.10.  +1&lt;/p&gt;</comment>
                            <comment id="13016015" author="thiru_mg" created="Tue, 5 Apr 2011 16:54:26 +0000"  >&lt;p&gt;Committed revision 1089131. Thanks Doug for reviewing it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475425" name="AVRO-795.patch" size="11844" author="thiru_mg" created="Mon, 4 Apr 2011 20:52:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Apr 2011 23:46:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-796] Problems using Schema.equals() method</title>
                <link>https://issues.apache.org/jira/browse/AVRO-796</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Schema.equals() does not properly handle null argument - the usual expected behavior is that it should return false.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12503451">AVRO-796</key>
            <summary>Problems using Schema.equals() method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dkaminsky">Douglas Kaminsky</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Apr 2011 20:58:24 +0000</created>
                <updated>Fri, 12 Aug 2011 20:23:45 +0000</updated>
                            <resolved>Thu, 14 Jul 2011 14:14:25 +0000</resolved>
                                    <version>1.5.0</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13016121" author="dkaminsky" created="Tue, 5 Apr 2011 21:05:04 +0000"  >&lt;p&gt;Ditto for various typed schema subclasses&lt;/p&gt;</comment>
                            <comment id="13016126" author="cutting" created="Tue, 5 Apr 2011 21:18:45 +0000"  >&lt;p&gt;I believe the null case is handled by instanceof in the equals implementation for each Schema subclass.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.20.2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.20.2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve attached an explicit test for this in a method that&apos;s called for each type of schema, and this passes for me. &lt;/p&gt;</comment>
                            <comment id="13016226" author="dkaminsky" created="Wed, 6 Apr 2011 03:16:16 +0000"  >&lt;p&gt;So it is - seems to be okay - sorry, I originally had another issue and thought this was the cause, but i was incorrect - the additional test is a great safeguard for future refactoring and I hope it will become part of the next release. Otherwise, I suppose this is not a bug.&lt;/p&gt;</comment>
                            <comment id="13065282" author="dkaminsky" created="Thu, 14 Jul 2011 14:14:25 +0000"  >&lt;p&gt;Per comments, resolving as not a problem. Please correct status if you&apos;d prefer a different one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475531" name="AVRO-796.patch" size="575" author="cutting" created="Tue, 5 Apr 2011 21:18:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Apr 2011 21:18:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
