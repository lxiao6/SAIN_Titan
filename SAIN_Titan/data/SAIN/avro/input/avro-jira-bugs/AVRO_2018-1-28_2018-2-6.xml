<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:26:07 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2018-1-28+AND+created+%3C%3D+2018-2-6+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="5" total="5"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-2136] All Outstreams are not getting closed in DataFileWriter</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2136</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;underlyingStream is getting initialized with output stream provided while writing the data, butis never getting closed. This is causing issue when a file system accepts only one active connection to write the data.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When close method is called it is also close underlyingStream&lt;/p&gt;</description>
                <environment></environment>
        <key id="13134332">AVRO-2136</key>
            <summary>All Outstreams are not getting closed in DataFileWriter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="njrbalu">Balu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Jan 2018 23:36:30 +0000</created>
                <updated>Fri, 21 Dec 2018 20:33:40 +0000</updated>
                                                                            <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16727037" author="unchuckable" created="Fri, 21 Dec 2018 20:33:40 +0000"  >&lt;p&gt;I&apos;m not quite sure what you mean. On first sight, this sounds similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2286&quot; title=&quot;DataFileReader leaks file descriptor on exception during construction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2286&quot;&gt;&lt;del&gt;AVRO-2286&lt;/del&gt;&lt;/a&gt;, but actually, since it&apos;s not the constructor that&apos;s throwing an exception here, all underlying streams that need to be closed will be closed by calling the close method.&lt;/p&gt;

&lt;p&gt;There should be no leaking of file descriptors or output streams possible when using&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( DataFileWriter&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataFileWriter&amp;lt;&amp;gt;( schema ) ) {
  writer.create( file ); &lt;span class=&quot;code-comment&quot;&gt;// or witer.append( oldFile );
&lt;/span&gt;  writer.append( data );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Could you provide a test case for the problem you describe? Otherwise, I think we should close this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Dec 2018 20:33:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pgtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2137] avro JsonDecoding additional field in array type</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2137</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I have following avro schema:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;test.name&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;array&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
            {
              &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;,
              &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;
            },
            {
              &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;,
              &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;
            }
          ]
        }
      }
    },
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;firstname&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;
    }
  ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;when I am using Json decoder and avro encoder to encode Json data (scala code):&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-scala&quot;&gt;

&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumWriter[GenericRecord](schema)

&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReader[GenericRecord](schema)

&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; baos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream

&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; decoder: JsonDecoder = DecoderFactory.get.jsonDecoder(schema, json)

&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; encoder = EncoderFactory.get.binaryEncoder(baos, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; datum = reader.read(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, decoder) writer.write(datum, encoder)

encoder.flush()

&lt;span class=&quot;code-keyword&quot;&gt;val&lt;/span&gt; avroByteArray = baos.toByteArray

&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;scenario1:&lt;/b&gt; when I am passing following json to encode it works fine:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
&#160;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;dallas&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;TX&quot;&lt;/span&gt;
    }
  ],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;firstname&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;arun&quot;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;b&gt;scenario2:&lt;/b&gt; when I am passing additional attribute in json at root level (lastname) it is able to encode and works fine:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;dallas&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;TX&quot;&lt;/span&gt;
    }
  ],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;firstname&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;fname&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;lastname&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;lname&quot;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;scenario3&lt;/b&gt;: when I am add additional attribute in array record (country) it is throwing following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-scala&quot;&gt;
Expected record-end. Got FIELD_NAME org.apache.avro.AvroTypeException: Expected record-end. Got FIELD_NAME at org.apache.avro.io.JsonDecoder.error(JsonDecoder.java:698) { &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [

{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;dallas&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;TX&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;country&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;USA&quot;&lt;/span&gt; }

], &lt;span class=&quot;code-quote&quot;&gt;&quot;firstname&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;fname&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;lastname&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;lname&quot;&lt;/span&gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;In case of if we have any additional element in array type, it should work in same way as normal record; it should just discard them and decode the Json data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13134342">AVRO-2137</key>
            <summary>avro JsonDecoding additional field in array type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asethia">Arun sethia</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jan 2018 02:31:26 +0000</created>
                <updated>Sun, 21 Oct 2018 22:24:28 +0000</updated>
                                            <version>1.8.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16538637" author="sbriquet" created="Tue, 10 Jul 2018 14:01:41 +0000"  >&lt;p&gt;Would a good soul take care of this one?&lt;/p&gt;</comment>
                            <comment id="16658417" author="dmoore247" created="Sun, 21 Oct 2018 22:24:28 +0000"  >&lt;p&gt;Looks like I have this same problem, I&apos;m&#160;using&#160;avro-tools.jar, I&apos;ve tested with these versions and found the same error:&lt;/p&gt;

&lt;p&gt;avro-tools-1.5.4.jar&lt;br/&gt;
avro-tools-1.6.3.jar&lt;br/&gt;
avro-tools-1.7.1.jar&lt;br/&gt;
avro-tools-1.7.6-cdh5.15.1.jar&lt;br/&gt;
avro-tools-1.7.7.jar&lt;br/&gt;
avro-tools-1.8.2.jar&lt;/p&gt;

&lt;p&gt;Is there any workaround?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Jul 2018 14:01:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pgw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2138] org.apache.avro.mapreduce.AvroMultipleOutputs.write copies Configuration on every invocation of write</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2138</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;While profiling a spark job using AvroMultipleOutputs, I noticed that a great deal of time is wasted by copying (hadoop) Configuration.&#160; Indeed this happens on &lt;em&gt;every&lt;/em&gt; invocation of &lt;tt&gt;write&lt;/tt&gt;: &lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/mapred/src/main/java/org/apache/avro/mapreduce/AvroMultipleOutputs.java#L437&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/master/lang/java/mapred/src/main/java/org/apache/avro/mapreduce/AvroMultipleOutputs.java#L437&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After patching, I am seeing a speed-up of 2x and above in running time of the same job.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13134928">AVRO-2138</key>
            <summary>org.apache.avro.mapreduce.AvroMultipleOutputs.write copies Configuration on every invocation of write</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="srosenberg">Stan Rosenberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jan 2018 23:39:02 +0000</created>
                <updated>Sun, 30 Dec 2018 04:09:34 +0000</updated>
                                            <version>1.8.2</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16345988" author="srosenberg" created="Tue, 30 Jan 2018 23:40:12 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.google.common.base.Preconditions;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.Schema;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.conf.Configuration;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapreduce.Job;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapreduce.OutputFormat;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapreduce.RecordWriter;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapreduce.TaskAttemptContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapreduce.TaskAttemptID;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.mapreduce.TaskInputOutputContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.util.ReflectionUtils;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.Constructor;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.HashMap;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;

/**
 * Extending avro&apos;s implementation in order to fix un-necessary copying which happens on _every_ invocation of
 *      write(key, value, keySchema, valSchema, baseOutputPath)
 *
 * see https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/AVRO-2138
&lt;/span&gt; */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PatchedAvroMultipleOutputs &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; org.apache.avro.mapreduce.AvroMultipleOutputs {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, RecordWriter&amp;lt;?, ?&amp;gt;&amp;gt; recordWriters = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; TaskAttemptContext taskContext;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; PatchedAvroMultipleOutputs(TaskInputOutputContext&amp;lt;?, ?, ?, ?&amp;gt; context) {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(context);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            taskContext = createTaskAttemptContext(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Job(context.getConfiguration()).getConfiguration(), context.getTaskAttemptID());
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ex) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to instantiate PatchedAvroMultipleOutputs&quot;&lt;/span&gt;, ex);
        }
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void write(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value, Schema keySchema, Schema valSchema, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; baseOutputPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
        Preconditions.checkArgument(!baseOutputPath.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;part&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;output name cannot be &lt;span class=&quot;code-quote&quot;&gt;&apos;part&apos;&lt;/span&gt;&quot;&lt;/span&gt;);

        getRecordWriter(taskContext, baseOutputPath).write(key, value);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; RecordWriter getRecordWriter(TaskAttemptContext taskContext, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; baseFileName)
            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {

        &lt;span class=&quot;code-comment&quot;&gt;// look &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; record-writer in the cache
&lt;/span&gt;        RecordWriter writer = recordWriters.get(baseFileName);

        &lt;span class=&quot;code-comment&quot;&gt;// If not in cache, create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; one
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (writer == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-comment&quot;&gt;// get the record writer from context output format
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;//FileOutputFormat.setOutputName(taskContext, baseFileName);
&lt;/span&gt;            taskContext.getConfiguration().set(&lt;span class=&quot;code-quote&quot;&gt;&quot;avro.mo.config.namedOutput&quot;&lt;/span&gt;, baseFileName);
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                writer = ((OutputFormat) ReflectionUtils.newInstance(
                        taskContext.getOutputFormatClass(), taskContext.getConfiguration()))
                        .getRecordWriter(taskContext);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ClassNotFoundException e) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(e);
            }
            &lt;span class=&quot;code-comment&quot;&gt;// add the record-writer to the cache
&lt;/span&gt;            recordWriters.put(baseFileName, writer);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; writer;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; TaskAttemptContext createTaskAttemptContext(Configuration conf, TaskAttemptID taskId) {
        &lt;span class=&quot;code-comment&quot;&gt;// Use reflection since the context types changed incompatibly between 1.0
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// and 2.0.
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; c = getTaskAttemptContextClass();
            Constructor&amp;lt;?&amp;gt; cons = c.getConstructor(Configuration.class,
                    TaskAttemptID.class);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (TaskAttemptContext) cons.newInstance(conf, taskId);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(e);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; getTaskAttemptContextClass() {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.mapreduce.task.TaskAttemptContextImpl&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.mapreduce.TaskAttemptContext&quot;&lt;/span&gt;);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(ex);
            }
        }
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (RecordWriter writer : recordWriters.values()) {
          writer.close(taskContext);
       }
       &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.close();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pkhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2139] Unable to use the copy builder with @java-class annotated generated classes</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2139</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Description:&lt;/p&gt;

&lt;p&gt;When I&apos;m using a schema with an &lt;tt&gt;@java-class&lt;/tt&gt;, I can&apos;t seem to be using the &apos;copy&apos; builder.&lt;/p&gt;

&lt;p&gt;I think a piece of code says more than a thousands words:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;.avdl&lt;/tt&gt; snippet:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
  record Money {
    Currency currency;
    @java-class(&quot;java.math.BigDecimal&quot;)
    string amount;
  }
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;@Test
void test_copy_builder() {
    Money original = Money.newBuilder()
            .setAmount(BigDecimal.TEN)
            .setCurrency(Currency.EUR)
            .build();

    Money duplicate = Money.newBuilder(original).build();

    assertThat(duplicate, is(equalTo(original)));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Result:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ClassCastException: org.apache.avro.util.Utf8 cannot be cast to java.math.BigDecimal

	at avro.moneyou.midlayer.common.financial.Money$Builder.&amp;lt;init&amp;gt;(Money.java:193)
	at avro.moneyou.midlayer.common.financial.Money$Builder.&amp;lt;init&amp;gt;(Money.java:155)
	at avro.moneyou.midlayer.common.financial.Money.newBuilder(Money.java:149)
	at avro.moneyou.midlayer.common.financial.MoneyTest.test_copy_builder(MoneyTest.java:20)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:389)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:167)
	at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:163)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13135340">AVRO-2139</key>
            <summary>Unable to use the copy builder with @java-class annotated generated classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aukevanleeuwen">Auke van Leeuwen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Feb 2018 07:52:18 +0000</created>
                <updated>Wed, 14 Feb 2018 13:04:59 +0000</updated>
                                            <version>1.8.2</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16348157" author="aukevanleeuwen" created="Thu, 1 Feb 2018 07:59:43 +0000"  >&lt;p&gt;It looks related to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1811&quot; title=&quot;SpecificData.deepCopy() cannot be used if schema compiler generated Java objects with Strings instead of UTF8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1811&quot;&gt;AVRO-1811&lt;/a&gt;, but on the other hand doesn&apos;t have anything to do with either SpecificRecords or GenericRecords, therefore I filed a different issue.&lt;/p&gt;</comment>
                            <comment id="16363943" author="aldex32" created="Wed, 14 Feb 2018 13:04:59 +0000"  >&lt;p&gt;Hi guys,&lt;/p&gt;

&lt;p&gt;I&apos;m experiencing the same issue and would be very nice not having this problem. Is there any update on this?&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Aldo&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Feb 2018 13:04:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pn1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2140] Validation of Union Schemas</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2140</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When validating a union Schema in the method&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Schema.isValidDefault(Schema schema, JsonNode defaultValue)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;for the case of UNION it only validates the first type of the union:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; UNION: &lt;span class=&quot;code-comment&quot;&gt;// union &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: first branch
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; isValidDefault(schema.getTypes().get(0), defaultValue);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This leads to some warnings that can create confusion.&lt;/p&gt;

&lt;p&gt;For example, if you have a&#160;field like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;synonym&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;&quot;&lt;/span&gt; ],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;and you assign it false as default you get this warning because it only validates that false is not null:&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[WARNING] Avro: Invalid &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; field synonym: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; not a [&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;&quot;&lt;/span&gt;]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think in this cases the validation should check all the types of the union to avoid these warnings.&lt;/p&gt;

&lt;p&gt;I would be happy to create a PR to improve this if you think we should&#160;go for&#160;it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135793">AVRO-2140</key>
            <summary>Validation of Union Schemas</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marcoslg">Marcos Lopez Gonzalez</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2018 15:07:51 +0000</created>
                <updated>Sat, 3 Feb 2018 11:41:52 +0000</updated>
                                            <version>1.8.2</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16350517" author="nkollar" created="Fri, 2 Feb 2018 15:25:18 +0000"  >&lt;p&gt;I think this behavior is compliant with the specification: &lt;tt&gt;Default values for union fields correspond to the first schema in the union.&lt;/tt&gt; Changing this would alter the Avro spec, and would require modification in each language binding.&lt;/p&gt;</comment>
                            <comment id="16351367" author="marcoslg" created="Sat, 3 Feb 2018 11:41:52 +0000"  >&lt;p&gt;Ok, I wasn&apos;t aware of the implications, maybe a specification change could be consider for a&#160;future major version?&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Feb 2018 15:25:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pptr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
