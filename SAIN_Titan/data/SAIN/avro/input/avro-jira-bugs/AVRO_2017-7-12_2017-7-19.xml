<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:25:17 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2017-7-12+AND+created+%3C%3D+2017-7-19+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="11" total="11"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-2047] NettyTransceiver can NPE when getRemoteName() is called</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2047</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;NettyTransceiver can NPE if the channel is closed while a request is underway. The correct thing to do seems to be to check for null and throw an IOException (&quot;underlying transport no longer available&quot;).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;! java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
! at org.apache.avro.ipc.NettyTransceiver.getRemoteName(NettyTransceiver.java:431)
! at org.apache.avro.ipc.Requestor.writeHandshake(Requestor.java:202)
! at org.apache.avro.ipc.Requestor.access$300(Requestor.java:52)
! at org.apache.avro.ipc.Requestor$Request.getBytes(Requestor.java:478)
! at org.apache.avro.ipc.Requestor.request(Requestor.java:181)
! at org.apache.avro.ipc.Requestor.request(Requestor.java:129)
! at org.apache.avro.ipc.specific.SpecificRequestor.invoke(SpecificRequestor.java:84)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13087090">AVRO-2047</key>
            <summary>NettyTransceiver can NPE when getRemoteName() is called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="panghy">Clement Pang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jul 2017 05:41:22 +0000</created>
                <updated>Sun, 30 Dec 2018 05:42:49 +0000</updated>
                                            <version>1.7.7</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16307069" author="imesha" created="Sun, 31 Dec 2017 04:31:02 +0000"  >&lt;p&gt;I too got the same error. Any update on this issue?&lt;/p&gt;</comment>
                            <comment id="16309868" author="nielsbasjes" created="Wed, 3 Jan 2018 16:23:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imesha&quot; class=&quot;user-hover&quot; rel=&quot;imesha&quot;&gt;Imesha Sudasingha&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=panghy&quot; class=&quot;user-hover&quot; rel=&quot;panghy&quot;&gt;Clement Pang&lt;/a&gt; Do you guys have example code/a unit test to reliably reproduce this problem?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 31 Dec 2017 04:31:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hiiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2048] Avro Binary Decoding - Gracefully Handle Long Strings</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2048</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;According to the &lt;a href=&quot;https://avro.apache.org/docs/1.8.2/spec.html#binary_encode_primitive&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;specs&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;a string is encoded as a &lt;b&gt;long&lt;/b&gt; followed by that many bytes of UTF-8 encoded character data.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;However, that is currently not being adhered to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.avro.io.BinaryDecoder&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Utf8 readString(Utf8 old) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length = readInt();
    Utf8 result = (old != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? old : &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Utf8());
    result.setByteLength(length);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (0 != length) {
      doReadBytes(result.getBytes(), 0, length);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first thing the code does here is to load an &lt;b&gt;int&lt;/b&gt; value, not a &lt;b&gt;long&lt;/b&gt;.  Because of the variable length nature of the size, this will mostly work.  However, there may be edge-cases where the serializer is putting in large length values erroneously or nefariously. Let us gracefully detect such scenarios and more closely adhere to the spec.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087304">AVRO-2048</key>
            <summary>Avro Binary Decoding - Gracefully Handle Long Strings</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jul 2017 21:20:53 +0000</created>
                <updated>Fri, 28 Jul 2017 07:18:26 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 07:18:26 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16095803" author="hadoopqa" created="Fri, 21 Jul 2017 05:26:53 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m 13s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  1m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; java in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;  1m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.13.1 Server=1.13.1 Image:yetus/avro:793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2048&quot; title=&quot;Avro Binary Decoding - Gracefully Handle Long Strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2048&quot;&gt;&lt;del&gt;AVRO-2048&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877398/AVRO-2048.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877398/AVRO-2048.1.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  buildtest  javac  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux 8139c24a523e 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; build &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; buildtest &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/32/artifact/patchprocess/test--lang_java.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/32/artifact/patchprocess/test--lang_java.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: lang/java U: lang/java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/32/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/32/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.4.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16095807" author="sacharya" created="Fri, 21 Jul 2017 05:37:34 +0000"  >&lt;p&gt;Seems like the code is not passing checkstyle.&lt;br/&gt;
The artifacts are present here: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/32/artifact/component/patchprocess/test--lang_java.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/32/artifact/component/patchprocess/test--lang_java.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The value is &lt;tt&gt;0l&lt;/tt&gt;. Change it to &lt;tt&gt;0L&lt;/tt&gt; and it should pass.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.17:check (checkstyle-check) @ avro ---
[INFO] Starting audit...
/testptch/avro/lang/java/avro/src/main/java/org/apache/avro/io/BinaryDecoder.java:263:19: error: Should use uppercase &lt;span class=&quot;code-quote&quot;&gt;&apos;L&apos;&lt;/span&gt;.
/testptch/avro/lang/java/avro/src/main/java/org/apache/avro/io/BinaryDecoder.java:268:10: error: Should use uppercase &lt;span class=&quot;code-quote&quot;&gt;&apos;L&apos;&lt;/span&gt;.
Audit done.
[INFO] There are 2 errors reported by Checkstyle 6.11.2 with checkstyle.xml ruleset.
[ERROR] src/main/java/org/apache/avro/io/BinaryDecoder.java:[263,19] (misc) UpperEll: Should use uppercase &lt;span class=&quot;code-quote&quot;&gt;&apos;L&apos;&lt;/span&gt;.
[ERROR] src/main/java/org/apache/avro/io/BinaryDecoder.java:[268,10] (misc) UpperEll: Should use uppercase &lt;span class=&quot;code-quote&quot;&gt;&apos;L&apos;&lt;/span&gt;.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="16096206" author="belugabehr" created="Fri, 21 Jul 2017 12:55:40 +0000"  >&lt;p&gt;Fixed checkstyle failures&lt;/p&gt;</comment>
                            <comment id="16097362" author="belugabehr" created="Sat, 22 Jul 2017 15:18:28 +0000"  >&lt;p&gt;I can&apos;t explain why this is, but it seems to be a tad faster with this patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# Avro Master
StringRead:   3291 ms      12.152       432.835       1780910
StringRead:   3290 ms      12.155       432.949       1780910
StringRead:   3287 ms      12.166       433.320       1780910

# Avro Master + Patch
StringRead:   3270 ms      12.229       435.574       1780910
StringRead:   3288 ms      12.163       433.241       1780910
StringRead:   3271 ms      12.227       435.521       1780910
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16101657" author="gszadovszky" created="Wed, 26 Jul 2017 13:20:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;, the actual string size (or any array size) usually cannot be &lt;tt&gt;Integer.MAX_VALUE&lt;/tt&gt; as &quot;&lt;em&gt;Some VMs reserve some header words in an array.&lt;/em&gt;&quot;.&lt;br/&gt;
See e.g. &lt;tt&gt;java.util.ArrayList.MAX_ARRAY_SIZE&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16101786" author="belugabehr" created="Wed, 26 Jul 2017 15:20:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gszadovszky&quot; class=&quot;user-hover&quot; rel=&quot;gszadovszky&quot;&gt;Gabor Szadovszky&lt;/a&gt; I borrowed same implementation from &lt;a href=&quot;http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/util/ArrayList.java#l190&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16102826" author="gszadovszky" created="Thu, 27 Jul 2017 07:09:58 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;, I&apos;ll wait another day for additional comments before committing.&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="16104571" author="jira-bot" created="Fri, 28 Jul 2017 07:17:29 +0000"  >&lt;p&gt;Commit 14488e35bc31f299de8cd88bd6d1ac07576eaa3e in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=14488e3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=14488e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2048&quot; title=&quot;Avro Binary Decoding - Gracefully Handle Long Strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2048&quot;&gt;&lt;del&gt;AVRO-2048&lt;/del&gt;&lt;/a&gt;: Avro Binary Decoding - Gracefully Handle Long Strings&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12877398" name="AVRO-2048.1.patch" size="2581" author="belugabehr" created="Fri, 14 Jul 2017 21:21:19 +0000"/>
                            <attachment id="12878346" name="AVRO-2048.2.patch" size="2581" author="belugabehr" created="Fri, 21 Jul 2017 12:55:24 +0000"/>
                            <attachment id="12878999" name="AVRO-2048.3.patch" size="3178" author="belugabehr" created="Wed, 26 Jul 2017 15:19:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Jul 2017 05:26:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hjtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2049] Remove Superfluous Configuration From AvroSerializer</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2049</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;In the class &lt;tt&gt;org.apache.avro.hadoop.io.AvroSerializer&lt;/tt&gt;, we see that the Avro block size is configured with a hard-coded value and there is a request to benchmark different buffer sizes.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.avro.hadoop.io.AvroSerializer&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  /**
   * The block size &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the Avro encoder.
   *
   * This number was copied from the AvroSerialization of org.apache.avro.mapred in Avro 1.5.1.
   *
   * TODO(gwu): Do some benchmarking with different numbers here to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it is important.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; AVRO_ENCODER_BLOCK_SIZE_BYTES = 512;

  &lt;span class=&quot;code-comment&quot;&gt;/** An factory &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; creating Avro datum encoders. */&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; EncoderFactory mEncoderFactory
      = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EncoderFactory().configureBlockSize(AVRO_ENCODER_BLOCK_SIZE_BYTES);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, there is no need to benchmark, this setting is superfluous and is ignored with the current implementation.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.avro.hadoop.io.AvroSerializer&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void open(OutputStream outputStream) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    mOutputStream = outputStream;
    mAvroEncoder = mEncoderFactory.binaryEncoder(outputStream, mAvroEncoder);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;org.apache.avro.io.EncoderFactory.binaryEncoder&lt;/tt&gt; ignores this setting.  This setting is only relevant for calls to &lt;tt&gt;org.apache.avro.io.EncoderFactory.blockingBinaryEncoder&lt;/tt&gt; &lt;br/&gt;
 which considers the configured &quot;Block Size&quot; for doing binary encoding of blocked Array types as laid out in the &lt;a href=&quot;https://avro.apache.org/docs/1.8.2/spec.html#binary_encode_complex&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;specs&lt;/a&gt;.  It can simply be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087464">AVRO-2049</key>
            <summary>Remove Superfluous Configuration From AvroSerializer</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jul 2017 01:05:58 +0000</created>
                <updated>Fri, 28 Jul 2017 07:18:43 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 07:18:43 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16089211" author="belugabehr" created="Mon, 17 Jul 2017 01:21:36 +0000"  >&lt;p&gt;Updated patch to include a couple of other instances of the same superfluous execution&lt;/p&gt;</comment>
                            <comment id="16092054" author="hadoopqa" created="Tue, 18 Jul 2017 19:33:27 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  4m 45s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  6m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 11m 24s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.13.1 Server=1.13.1 Image:yetus/avro:793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2049&quot; title=&quot;Remove Superfluous Configuration From AvroSerializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2049&quot;&gt;&lt;del&gt;AVRO-2049&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877504/AVRO-2049.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877504/AVRO-2049.2.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  buildtest  javac  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux de48a9725531 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; build &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: lang/java U: lang/java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/25/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/25/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.4.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16092113" author="hadoopqa" created="Tue, 18 Jul 2017 20:14:23 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m 12s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  6m 46s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;  7m  1s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.13.1 Server=1.13.1 Image:yetus/avro:793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2049&quot; title=&quot;Remove Superfluous Configuration From AvroSerializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2049&quot;&gt;&lt;del&gt;AVRO-2049&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877504/AVRO-2049.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877504/AVRO-2049.2.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  buildtest  javac  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux 89a023614ebe 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; build &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: lang/java U: lang/java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/26/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/26/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.4.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16101553" author="nkollar" created="Wed, 26 Jul 2017 11:13:16 +0000"  >&lt;p&gt;Looks good to me, just one minor comment, in &lt;tt&gt;AvroSerialization&lt;/tt&gt; I think we can reuse the &lt;tt&gt;encoder&lt;/tt&gt; by passing it to the factory method instead of null: &lt;tt&gt;this.encoder = new EncoderFactory().binaryEncoder(out, encoder);&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16101604" author="gszadovszky" created="Wed, 26 Jul 2017 12:23:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;, as far as I can see &lt;tt&gt;ResolvingGramarGenerator&lt;/tt&gt; sets the &lt;em&gt;bufferSize&lt;/em&gt; (not the &lt;em&gt;blockSize&lt;/em&gt;) which is used when a new &lt;em&gt;binaryEncoder&lt;/em&gt; is created. With your change the &lt;em&gt;bufferSize&lt;/em&gt; of the &lt;em&gt;binaryEncoder&lt;/em&gt; will be &lt;tt&gt;2048&lt;/tt&gt; instead of &lt;tt&gt;32&lt;/tt&gt; in &lt;tt&gt;ResolvingGrammarGenerator.getBinary&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16101798" author="belugabehr" created="Wed, 26 Jul 2017 15:25:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gszadovszky&quot; class=&quot;user-hover&quot; rel=&quot;gszadovszky&quot;&gt;Gabor Szadovszky&lt;/a&gt; Good catch.   Thanks.  Perhaps we should create a new ticket to remove the magic number.&lt;/p&gt;</comment>
                            <comment id="16101827" author="belugabehr" created="Wed, 26 Jul 2017 15:36:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkollar&quot; class=&quot;user-hover&quot; rel=&quot;nkollar&quot;&gt;Nandor Kollar&lt;/a&gt; Maybe so, we can reuse encoder.  I&apos;m not sure how often &quot;open&quot; is actually called though.  New ticket?&lt;/p&gt;</comment>
                            <comment id="16102841" author="gszadovszky" created="Thu, 27 Jul 2017 07:24:26 +0000"  >&lt;p&gt;+1 will commit tomorrow if no more comments&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkollar&quot; class=&quot;user-hover&quot; rel=&quot;nkollar&quot;&gt;Nandor Kollar&lt;/a&gt;, I did some research related to the usage of &lt;tt&gt;Serializer.open(OutputStream)&lt;/tt&gt; and it seems they are not really reused. We might set the previous &lt;tt&gt;encoder&lt;/tt&gt; to &lt;tt&gt;EncoderFactory.binaryEncoder(OutputStream, BinaryEncoder)&lt;/tt&gt; to reuse, though. However, it would recommend having another JIRA for that.&lt;/p&gt;</comment>
                            <comment id="16104570" author="jira-bot" created="Fri, 28 Jul 2017 07:17:27 +0000"  >&lt;p&gt;Commit 91d4cc03bbe84ca2aa0ed7f9094a20061b04a8a3 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=91d4cc0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=91d4cc0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2049&quot; title=&quot;Remove Superfluous Configuration From AvroSerializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2049&quot;&gt;&lt;del&gt;AVRO-2049&lt;/del&gt;&lt;/a&gt;: Remove Superfluous Configuration From AvroSerializer&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12877503" name="AVRO-2049.1.patch" size="1369" author="belugabehr" created="Mon, 17 Jul 2017 01:06:26 +0000"/>
                            <attachment id="12877504" name="AVRO-2049.2.patch" size="3065" author="belugabehr" created="Mon, 17 Jul 2017 01:21:12 +0000"/>
                            <attachment id="12879000" name="AVRO-2049.3.patch" size="2203" author="belugabehr" created="Wed, 26 Jul 2017 15:24:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jul 2017 19:33:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hktb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2050] Clear Array To Allow GC</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2050</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Java&apos;s &lt;tt&gt;ArrayList&lt;/tt&gt; implementation clears all Objects from the internal buffer when the &lt;tt&gt;clear()&lt;/tt&gt; method is called.  This allows the Objects to be free for GC.  We should do the same in Avro &lt;tt&gt;org.apache.avro.generic.GenericData&lt;/tt&gt; &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/ArrayList.java#ArrayList.clear%28%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ArrayList Source&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087465">AVRO-2050</key>
            <summary>Clear Array To Allow GC</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jul 2017 01:49:05 +0000</created>
                <updated>Fri, 28 Jul 2017 07:18:57 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 07:18:57 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="16089518" author="nkollar" created="Mon, 17 Jul 2017 08:58:25 +0000"  >&lt;p&gt;I&apos;m wondering why &lt;tt&gt;clear()&lt;/tt&gt; method is in overridden. It looks like the base class is AbstractList, which has clear method implemented correctly, so we might instead implement the &lt;tt&gt;Array&lt;/tt&gt; iterator&apos;s &lt;tt&gt;remove()&lt;/tt&gt; method no?&lt;/p&gt;</comment>
                            <comment id="16089795" author="belugabehr" created="Mon, 17 Jul 2017 13:05:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkollar&quot; class=&quot;user-hover&quot; rel=&quot;nkollar&quot;&gt;Nandor Kollar&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This implementation is essentially an &lt;tt&gt;ArrayList&lt;/tt&gt;.  The &lt;tt&gt;ArrayList&lt;/tt&gt; overwrites the &lt;tt&gt;clear&lt;/tt&gt; method because using the default &lt;tt&gt;AbstractList&lt;/tt&gt; implementation requires instantiating an Iterator and then deleting each item in the Iterator one at a time.  This is bad performance in terms of constant stack manipulation, but also this amounts to draining the array from the head of the list.  Draining from the head requires an array copy for each item removed to shift down the existing records.  It is much better to override the method as &lt;tt&gt;ArrayList&lt;/tt&gt; has done.  However, I did see some overlap with the &lt;tt&gt;toString&lt;/tt&gt; and &lt;tt&gt;add&lt;/tt&gt; methods which can be leveraged.  Changed the patch to remove the two overrides.&lt;/p&gt;</comment>
                            <comment id="16092023" author="cutting" created="Tue, 18 Jul 2017 19:10:09 +0000"  >&lt;p&gt;Arrays.fill() would be simpler than coding the loop yourself and perform similarly.&lt;/p&gt;

&lt;p&gt;A more optimized implementation could use System.arraycopy(), which is native code, but that&apos;s perhaps overkill.&lt;/p&gt;</comment>
                            <comment id="16092098" author="belugabehr" created="Tue, 18 Jul 2017 20:08:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; Thanks for the input.  I was simply mimicking the OpenJDK implementation.  I attached a new patch.  Either will work. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16092131" author="hadoopqa" created="Tue, 18 Jul 2017 20:25:48 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m 14s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  6m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;  7m  8s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.13.1 Server=1.13.1 Image:yetus/avro:793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2050&quot; title=&quot;Clear Array To Allow GC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2050&quot;&gt;&lt;del&gt;AVRO-2050&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877874/AVRO-2050.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877874/AVRO-2050.3.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  buildtest  javac  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux ec17bb8bd028 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; build &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: lang/java U: lang/java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/27/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/27/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.4.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16101567" author="gszadovszky" created="Wed, 26 Jul 2017 11:34:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16104569" author="jira-bot" created="Fri, 28 Jul 2017 07:17:25 +0000"  >&lt;p&gt;Commit d0cce25208ad83a9fb6fcce825ae64881bdda420 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=d0cce25&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=d0cce25&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2050&quot; title=&quot;Clear Array To Allow GC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2050&quot;&gt;&lt;del&gt;AVRO-2050&lt;/del&gt;&lt;/a&gt;: Clear Array To Allow GC&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12877513" name="AVRO-2050.1.patch" size="962" author="belugabehr" created="Mon, 17 Jul 2017 02:49:45 +0000"/>
                            <attachment id="12877579" name="AVRO-2050.2.patch" size="2131" author="belugabehr" created="Mon, 17 Jul 2017 12:59:11 +0000"/>
                            <attachment id="12877874" name="AVRO-2050.3.patch" size="2098" author="belugabehr" created="Tue, 18 Jul 2017 20:07:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Jul 2017 08:58:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hktj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2051] Thread contention accessing JsonProperties props</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2051</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://lists.apache.org/thread.html/dd34ab8439137a81a9de29ad4161f37b17638394cea0806765689976@%3Cuser.avro.apache.org%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://lists.apache.org/thread.html/dd34ab8439137a81a9de29ad4161f37b17638394cea0806765689976@%3Cuser.avro.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically, the getJsonProp method, being synchronized, is causing thread contention issues when trying to share schemas between threads.    My proposal (pull request forthcoming) is to treat &quot;props&quot; as an immutable map and do a copy+add+swap for the addProp method.   This will make the addProp call slower (particularly for large maps of props), but would make the reads significantly faster as no locking will be needed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087697">AVRO-2051</key>
            <summary>Thread contention accessing JsonProperties props</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="dkulp">Daniel Kulp</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jul 2017 19:08:06 +0000</created>
                <updated>Wed, 7 Nov 2018 17:17:39 +0000</updated>
                            <resolved>Wed, 7 Nov 2018 17:17:39 +0000</resolved>
                                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="16090365" author="githubbot" created="Mon, 17 Jul 2017 19:12:59 +0000"  >&lt;p&gt;GitHub user dkulp opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/236&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt; Remove synchronization for JsonProperties.getJsonProp&lt;/p&gt;

&lt;p&gt;    This change does two basic things:&lt;/p&gt;

&lt;p&gt;    1) Makes &quot;props&quot; a private field and requires the subclasses to access it via the additional methods.  This allows some changing of the underlying implementation a bit easier.&lt;/p&gt;

&lt;p&gt;    2) Change props to an AtomicReference and makes it act like an immutable map.  The addProp method does a full copy of the map, adds the new value, and then atomicly swaps in the map thus not affecting other threads that would be using the value that was &quot;current&quot; when they called the get method.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dkulp/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/dkulp/avro&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/236.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/236.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #236&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ad14635fa3af97b90282a79b7e04a0b8753e45b5&lt;br/&gt;
Author: Daniel Kulp &amp;lt;dkulp@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-07-17T19:08:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt; Remove synchronization for JsonProperties.getJsonProp&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16090654" author="cutting" created="Mon, 17 Jul 2017 22:01:15 +0000"  >&lt;p&gt;This can make building schemas quadratic in the number of properties, no?  While for most schemas this is probably not an issue, for some it might significantly impact performance.&lt;/p&gt;

&lt;p&gt;I think instead we should just bite the bullet and make Schema immutable, eliminating the addProp method altogether.  At the same time, we should stop exposing JsonNode in the public API, instead using only Object, as intended in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1585&quot; title=&quot;Deprecate Jackson classes in public API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1585&quot;&gt;&lt;del&gt;AVRO-1585&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16090896" author="dkulp" created="Tue, 18 Jul 2017 00:47:55 +0000"  >&lt;p&gt;I&apos;m trying to find something that will work for Avro 1.8.x as that&apos;s what we&apos;ll need.    Thus, removing all of that is likely not an option. &lt;/p&gt;

&lt;p&gt;That said, I just discovered that we already have parts of guava shaded in as a dependency.   Thus, I believe I can use the CacheBuilder to create the equivalent of a &quot;ConcurrentLinkedHashMap&quot; (there are some google links that mention this) that would work for this and not have the quadratic issue.   I&apos;ll investigate more tomorrow.   Another option would be to either add a dependency to something else (like caffeine) that has a ConcurrentLinkedHashMap or copy/shade an Apache licensed version (like &lt;a href=&quot;https://github.com/ben-manes/concurrentlinkedhashmap/blob/master/src/main/java/com/googlecode/concurrentlinkedhashmap/ConcurrentLinkedHashMap.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ben-manes/concurrentlinkedhashmap/blob/master/src/main/java/com/googlecode/concurrentlinkedhashmap/ConcurrentLinkedHashMap.java&lt;/a&gt;) into the src and use it.   &lt;/p&gt;</comment>
                            <comment id="16090911" author="dkulp" created="Tue, 18 Jul 2017 00:55:06 +0000"  >&lt;p&gt;Of course another option is to just surround the access to the props with a ReentrantReadWriteLock.....  Bunch of ideas to test and benchmark.&lt;/p&gt;</comment>
                            <comment id="16091772" author="dkulp" created="Tue, 18 Jul 2017 16:13:37 +0000"  >&lt;p&gt;&lt;br/&gt;
I just updated the pull request.   Basically, since the JsonProperties props field is only ever iterated across and added to (values never change or are removed), it was simple enough to create a ConcurrentHashMap subclass that can also maintain a linked list type thing to maintain the order.   This keeps the O(log N) lookups, O(log N) inserts, and O(N) iterator.  &lt;/p&gt;</comment>
                            <comment id="16092096" author="cutting" created="Tue, 18 Jul 2017 20:06:52 +0000"  >&lt;p&gt;Should we perhaps instead put the ConcurrentLinkedHashMap into the org.apache.avro.util package, rather than implementing this as a nested utility class?&lt;/p&gt;

&lt;p&gt;Also, I&apos;m not sure why you added methods for the hashCode, equals and hasProps, but I question whether these should be protected (where they appear in javadoc for subclasses to override) or rather package private (so that they can only be used by other classes in the package).  I generally think we should avoid adding publicly visible methods that we don&apos;t expect things outside the package to ever need to call.  The Schema classes are not meant to be extensible.  Perhaps this should at least be a separate issue, since it&apos;s not related to the thread contention issue?&lt;/p&gt;

&lt;p&gt;Lastly, it would be good to add a test that verifys the thread contention has been addressed.  This might be as simple as a synchronized(schema) thread that blocks another thread that tries to change properties without the patch and does not with the patch.&lt;/p&gt;</comment>
                            <comment id="16092124" author="hadoopqa" created="Tue, 18 Jul 2017 20:22:45 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  2m  6s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m 23s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; java in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;  2m 34s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.13.1 Server=1.13.1 Image:yetus/avro:793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; GITHUB PR &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/apache/avro/pull/236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/236&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  buildtest  javac  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux 45aa718b6e74 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; build &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; buildtest &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/29/artifact/patchprocess/test--lang_java.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/29/artifact/patchprocess/test--lang_java.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: lang/java U: lang/java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/29/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/29/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.4.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16159134" author="githubbot" created="Fri, 8 Sep 2017 19:06:46 +0000"  >&lt;p&gt;Github user dkulp closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/236&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16159136" author="githubbot" created="Fri, 8 Sep 2017 19:07:22 +0000"  >&lt;p&gt;GitHub user dkulp opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/245&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/245&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt; Remove synchronization for JsonProperties.getJsonProp&lt;/p&gt;

&lt;p&gt;    This change does two basic things:&lt;/p&gt;

&lt;p&gt;    Makes &quot;props&quot; a private field and requires the subclasses to access it via the additional methods. This allows some changing of the underlying implementation a bit easier.&lt;/p&gt;

&lt;p&gt;    Change props to an ConcurrentHashMap with an extra ConcurrentLinkedQueue to maintain order. With the (1) change, this is fairly simple. This keeps the O(log N) puts and lookups and a simple entrySet iterator for quick iterations. Synchronized blocks are removed.&lt;/p&gt;




&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dkulp/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/dkulp/avro&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/245.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/245.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #245&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ef757c5aefd344a32e100736d419b4717d4dfd9f&lt;br/&gt;
Author: Daniel Kulp &amp;lt;dkulp@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-07-17T19:08:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt; Remove synchronization for JsonProperties.getJsonProp&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16159144" author="dkulp" created="Fri, 8 Sep 2017 19:15:28 +0000"  >&lt;p&gt;Redid the pull request to base off a branch so I can keep my fork more in sync.....&lt;/p&gt;

&lt;p&gt;Anyway, I made the hashCode and propsEquals package protected which should keep those from being exposed.    I needed to add these methods as the subclass (Protocol) needs to know those, but I wanted to keep the &quot;props&quot; field private to make sure any subclass or other does not do any direct access to the props field.   This forces subclasses (and others) to use the addProp method where we can make sure properties don&apos;t &quot;change&quot;.   (Properties can only be added, not modified)&lt;/p&gt;

&lt;p&gt;I don&apos;t think putting the ConcurrentHashMap into utils makes sense.   This is a VERY particular use case and only certain methods are implemented for it.   By keeping it anonymous and limiting access (via a private field), we can make sure the proper methods are called.   For example, for a proper public class, keySet() would need to be implemented to return the keys in the proper order.    I didn&apos;t implement it as, in this case, it&apos;s not ever called.  Likewise, clear/remove/etc... are not implemented as they are not needed in this case.  (the comment in the code mentions this)&lt;/p&gt;
</comment>
                            <comment id="16678511" author="jira-bot" created="Wed, 7 Nov 2018 17:05:44 +0000"  >&lt;p&gt;Commit a318a34d1f5f8146fb441c092c73b6170719e88a in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkulp&quot; class=&quot;user-hover&quot; rel=&quot;dkulp&quot;&gt;Daniel Kulp&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=a318a34&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=a318a34&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt; Remove synchronization for JsonProperties.getJsonProp&lt;br/&gt;
Fixes #245&lt;/p&gt;</comment>
                            <comment id="16678513" author="githubbot" created="Wed, 7 Nov 2018 17:05:53 +0000"  >&lt;p&gt;dkulp closed pull request #245: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2051&quot; title=&quot;Thread contention accessing JsonProperties props&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2051&quot;&gt;&lt;del&gt;AVRO-2051&lt;/del&gt;&lt;/a&gt; Remove synchronization for JsonProperties.getJsonProp&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/245&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/245&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/avro/src/main/java/org/apache/avro/JsonProperties.java b/lang/java/avro/src/main/java/org/apache/avro/JsonProperties.java&lt;br/&gt;
index 4e18c09b0..368c29e75 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/JsonProperties.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/JsonProperties.java&lt;br/&gt;
@@ -17,12 +17,20 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.avro;&lt;/p&gt;

&lt;p&gt;+import java.util.AbstractSet;&lt;br/&gt;
 import java.util.Collections;&lt;br/&gt;
+import java.util.Iterator;&lt;br/&gt;
 import java.util.LinkedHashMap;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
+import java.util.Queue;&lt;br/&gt;
 import java.util.Set;&lt;br/&gt;
+import java.util.concurrent.ConcurrentHashMap;&lt;br/&gt;
+import java.util.concurrent.ConcurrentLinkedQueue;&lt;br/&gt;
+import java.util.concurrent.ConcurrentMap;&lt;br/&gt;
+&lt;br/&gt;
 import java.io.IOException;&lt;/p&gt;

&lt;p&gt;+import org.apache.avro.reflect.MapEntry;&lt;br/&gt;
 import org.apache.avro.util.internal.JacksonUtils;&lt;br/&gt;
 import org.codehaus.jackson.JsonNode;&lt;br/&gt;
 import org.codehaus.jackson.JsonGenerator;&lt;br/&gt;
@@ -114,7 +122,45 @@ private Null() {}&lt;br/&gt;
   /** A value representing a JSON &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt;. */&lt;br/&gt;
   public static final Null NULL_VALUE = new Null();&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Map&amp;lt;String,JsonNode&amp;gt; props = new LinkedHashMap&amp;lt;String,JsonNode&amp;gt;(1);&lt;br/&gt;
+  // use a ConcurrentHashMap for speed and thread safety, but keep a Queue of the entries to maintain order&lt;br/&gt;
+  // the queue is always updated after the main map and is thus is potentially a subset of the map.&lt;br/&gt;
+  // By making props private, we can control access and only implement/override the methods&lt;br/&gt;
+  // we need.  We don&apos;t ever remove anything so we don&apos;t need to implement the clear/remove functionality.&lt;br/&gt;
+  // Also, we only ever ADD to the collection, never changing a value, so putWithAbsent is the&lt;br/&gt;
+  // only modifier&lt;br/&gt;
+  private ConcurrentMap&amp;lt;String,JsonNode&amp;gt; props = new ConcurrentHashMap&amp;lt;String,JsonNode&amp;gt;() {&lt;br/&gt;
+    private static final long serialVersionUID = 1L;&lt;br/&gt;
+    private Queue&amp;lt;MapEntry&amp;lt;String, JsonNode&amp;gt;&amp;gt; propOrder = new ConcurrentLinkedQueue&amp;lt;MapEntry&amp;lt;String, JsonNode&amp;gt;&amp;gt;();&lt;br/&gt;
+    public JsonNode putIfAbsent(String key,  JsonNode value) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+      JsonNode r = super.putIfAbsent(key, value);+      if (r == null) {
+        propOrder.add(new MapEntry&amp;lt;String, JsonNode&amp;gt;(key, value));
+      }+      return r;+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+    public Set&amp;lt;Map.Entry&amp;lt;String, JsonNode&amp;gt;&amp;gt; entrySet() {&lt;br/&gt;
+      return new AbstractSet&amp;lt;Map.Entry&amp;lt;String, JsonNode&amp;gt;&amp;gt;() {&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public Iterator&amp;lt;Map.Entry&amp;lt;String, JsonNode&amp;gt;&amp;gt; iterator() {&lt;br/&gt;
+          return new Iterator&amp;lt;Map.Entry&amp;lt;String, JsonNode&amp;gt;&amp;gt;() &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+            Iterator&amp;lt;MapEntry&amp;lt;String, JsonNode&amp;gt;&amp;gt; it = propOrder.iterator();+            @Override+            public boolean hasNext() {
+              return it.hasNext();
+            }+            @Override+            public java.util.Map.Entry&amp;lt;String, JsonNode&amp;gt; next() {
+              return it.next();
+            }+          }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;;&lt;br/&gt;
+        }&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int size() &lt;/p&gt;
{
+          return propOrder.size();
+        }
&lt;p&gt;+      };&lt;br/&gt;
+    }&lt;br/&gt;
+  };&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   private Set&amp;lt;String&amp;gt; reserved;&lt;/p&gt;

&lt;p&gt;@@ -137,7 +183,7 @@ public String getProp(String name) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@deprecated use 
{@link #getObjectProp(String)}
&lt;p&gt;    */&lt;br/&gt;
   @Deprecated&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public synchronized JsonNode getJsonProp(String name) {&lt;br/&gt;
+  public JsonNode getJsonProp(String name) 
{
     return props.get(name);
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -145,7 +191,7 @@ public synchronized JsonNode getJsonProp(String name) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns the value of the named property in this schema.&lt;/li&gt;
	&lt;li&gt;Returns &amp;lt;tt&amp;gt;null&amp;lt;/tt&amp;gt; if there is no property with that name.&lt;br/&gt;
    */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public synchronized Object getObjectProp(String name) {&lt;br/&gt;
+  public Object getObjectProp(String name) 
{
     return JacksonUtils.toObject(props.get(name));
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -173,23 +219,26 @@ public void addProp(String name, String value) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@deprecated use 
{@link #addProp(String, Object)}
&lt;p&gt;    */&lt;br/&gt;
   @Deprecated&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public synchronized void addProp(String name, JsonNode value) {&lt;br/&gt;
+  public void addProp(String name, JsonNode value) {&lt;br/&gt;
     if (reserved.contains(name))&lt;br/&gt;
       throw new AvroRuntimeException(&quot;Can&apos;t set reserved property: &quot; + name);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     if (value == null)&lt;br/&gt;
       throw new AvroRuntimeException(&quot;Can&apos;t set a property to null: &quot; + name);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JsonNode old = props.get(name);&lt;/li&gt;
	&lt;li&gt;if (old == null)&lt;/li&gt;
	&lt;li&gt;props.put(name, value);&lt;/li&gt;
	&lt;li&gt;else if (!old.equals(value))&lt;br/&gt;
+    JsonNode old = props.putIfAbsent(name,  value);&lt;br/&gt;
+    if (old != null &amp;amp;&amp;amp; !old.equals(value)) 
{
       throw new AvroRuntimeException(&quot;Can&apos;t overwrite property: &quot; + name);
+    }
&lt;p&gt;   }&lt;br/&gt;
-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;public synchronized void addProp(String name, Object value) {&lt;br/&gt;
+  public void addProp(String name, Object value) 
{
     addProp(name, JacksonUtils.toJsonNode(value));
   }
&lt;p&gt;+  public void putAll(JsonProperties np) &lt;/p&gt;
{
+    for (Map.Entry&amp;lt;? extends String, ? extends JsonNode&amp;gt; e : np.props.entrySet())
+      addProp(e.getKey(), e.getValue());
+  }
&lt;p&gt;+&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   /** Return the defined properties that have string values. */&lt;br/&gt;
   @Deprecated public Map&amp;lt;String,String&amp;gt; getProps() {&lt;br/&gt;
@@ -200,14 +249,6 @@ public synchronized void addProp(String name, Object value) &lt;/p&gt;
{
     return result;
   }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/** Convert a map of string-valued properties to Json properties. */&lt;/li&gt;
	&lt;li&gt;Map&amp;lt;String,JsonNode&amp;gt; jsonProps(Map&amp;lt;String,String&amp;gt; stringProps) 
{
-    Map&amp;lt;String,JsonNode&amp;gt; result = new LinkedHashMap&amp;lt;String,JsonNode&amp;gt;();
-    for (Map.Entry&amp;lt;String,String&amp;gt; e : stringProps.entrySet())
-      result.put(e.getKey(), TextNode.valueOf(e.getValue()));
-    return result;
-  }
&lt;p&gt;-&lt;br/&gt;
   /**&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;Return the defined properties as an unmodifieable Map.&lt;/li&gt;
	&lt;li&gt;@deprecated use 
{@link #getObjectProps()}
&lt;p&gt;@@ -230,4 +271,15 @@ void writeProps(JsonGenerator gen) throws IOException &lt;/p&gt;
{
       gen.writeObjectField(e.getKey(), e.getValue());
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+&lt;br/&gt;
+  int propsHashCode() &lt;/p&gt;
{
+    return props.hashCode();
+  }
&lt;p&gt;+  boolean propsEqual(JsonProperties np) &lt;/p&gt;
{
+    return props.equals(np.props);
+  }
&lt;p&gt;+  public boolean hasProps() &lt;/p&gt;
{
+    return !props.isEmpty();
+  }
&lt;p&gt;+&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/Protocol.java b/lang/java/avro/src/main/java/org/apache/avro/Protocol.java&lt;br/&gt;
index 73e235c89..959122759 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/Protocol.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/Protocol.java&lt;br/&gt;
@@ -147,11 +147,11 @@ public boolean equals(Object o) &lt;/p&gt;
{
       Message that = (Message)o;
       return this.name.equals(that.name)
         &amp;amp;&amp;amp; this.request.equals(that.request)
-        &amp;amp;&amp;amp; props.equals(that.props);
+        &amp;amp;&amp;amp; propsEqual(that);
     }

&lt;p&gt;     public int hashCode() &lt;/p&gt;
{
-      return name.hashCode() + request.hashCode() + props.hashCode();
+      return name.hashCode() + request.hashCode() + propsHashCode();
     }

&lt;p&gt;     public String getDoc() &lt;/p&gt;
{ return doc; }
&lt;p&gt;@@ -298,12 +298,12 @@ public boolean equals(Object o) &lt;/p&gt;
{
       &amp;amp;&amp;amp; this.namespace.equals(that.namespace)
       &amp;amp;&amp;amp; this.types.equals(that.types)
       &amp;amp;&amp;amp; this.messages.equals(that.messages)
-      &amp;amp;&amp;amp; this.props.equals(that.props);
+      &amp;amp;&amp;amp; this.propsEqual(that);
   }

&lt;p&gt;   public int hashCode() &lt;/p&gt;
{
     return name.hashCode() + namespace.hashCode()
-      + types.hashCode() + messages.hashCode() + props.hashCode();
+      + types.hashCode() + messages.hashCode() + propsHashCode();
   }

&lt;p&gt;   /** Render this as &amp;lt;a href=&quot;http://json.org/&quot;&amp;gt;JSON&amp;lt;/a&amp;gt;.*/&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/Schema.java b/lang/java/avro/src/main/java/org/apache/avro/Schema.java&lt;br/&gt;
index f01775d64..ea693796d 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/Schema.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/Schema.java&lt;br/&gt;
@@ -330,7 +330,7 @@ public String toString(boolean pretty) {&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;   void toJson(Names names, JsonGenerator gen) throws IOException {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (props.size() == 0) {                      // no props defined&lt;br/&gt;
+    if (!hasProps()) 
{                      // no props defined
       gen.writeString(getName());                 // just write name
     }
&lt;p&gt; else {&lt;br/&gt;
       gen.writeStartObject();&lt;br/&gt;
@@ -349,7 +349,7 @@ public boolean equals(Object o) &lt;/p&gt;
{
     if (!(o instanceof Schema)) return false;
     Schema that = (Schema)o;
     if (!(this.type == that.type)) return false;
-    return equalCachedHash(that) &amp;amp;&amp;amp; props.equals(that.props);
+    return equalCachedHash(that) &amp;amp;&amp;amp; propsEqual(that);
   }
&lt;p&gt;   public final int hashCode() {&lt;br/&gt;
     if (hashCode == NO_HASHCODE)&lt;br/&gt;
@@ -357,7 +357,7 @@ public final int hashCode() &lt;/p&gt;
{
     return hashCode;
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;int computeHash() 
{ return getType().hashCode() + props.hashCode(); }
&lt;p&gt;+  int computeHash() &lt;/p&gt;
{ return getType().hashCode() + propsHashCode(); }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   final boolean equalCachedHash(Schema other) {&lt;br/&gt;
     return (hashCode == other.hashCode)&lt;br/&gt;
@@ -457,7 +457,7 @@ public boolean equals(Object other) &lt;/p&gt;
{
         (schema.equals(that.schema)) &amp;amp;&amp;amp;
         defaultValueEquals(that.defaultValue) &amp;amp;&amp;amp;
         (order == that.order) &amp;amp;&amp;amp;
-        props.equals(that.props);
+        propsEqual(that);
     }
&lt;p&gt;     public int hashCode() &lt;/p&gt;
{ return name.hashCode() + schema.computeHash(); }

&lt;p&gt;@@ -666,7 +666,7 @@ public boolean equals(Object o) {&lt;br/&gt;
       RecordSchema that = (RecordSchema)o;&lt;br/&gt;
       if (!equalCachedHash(that)) return false;&lt;br/&gt;
       if (!equalNames(that)) return false;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (!props.equals(that.props)) return false;&lt;br/&gt;
+      if (!propsEqual(that)) return false;&lt;br/&gt;
       Set seen = SEEN_EQUALS.get();&lt;br/&gt;
       SeenPair here = new SeenPair(this, o);&lt;br/&gt;
       if (seen.contains(here)) return true;       // prevent stack overflow&lt;br/&gt;
@@ -763,7 +763,7 @@ public boolean equals(Object o) 
{
       return equalCachedHash(that)
         &amp;amp;&amp;amp; equalNames(that)
         &amp;amp;&amp;amp; symbols.equals(that.symbols)
-        &amp;amp;&amp;amp; props.equals(that.props);
+        &amp;amp;&amp;amp; propsEqual(that);
     }
&lt;p&gt;     @Override int computeHash() &lt;/p&gt;
{ return super.computeHash() + symbols.hashCode(); }
&lt;p&gt;     void toJson(Names names, JsonGenerator gen) throws IOException {&lt;br/&gt;
@@ -796,7 +796,7 @@ public boolean equals(Object o) &lt;/p&gt;
{
       ArraySchema that = (ArraySchema)o;
       return equalCachedHash(that)
         &amp;amp;&amp;amp; elementType.equals(that.elementType)
-        &amp;amp;&amp;amp; props.equals(that.props);
+        &amp;amp;&amp;amp; propsEqual(that);
     }
&lt;p&gt;     @Override int computeHash() {&lt;br/&gt;
       return super.computeHash() + elementType.computeHash();&lt;br/&gt;
@@ -824,7 +824,7 @@ public boolean equals(Object o) &lt;/p&gt;
{
       MapSchema that = (MapSchema)o;
       return equalCachedHash(that)
         &amp;amp;&amp;amp; valueType.equals(that.valueType)
-        &amp;amp;&amp;amp; props.equals(that.props);
+        &amp;amp;&amp;amp; propsEqual(that);
     }
&lt;p&gt;     @Override int computeHash() {&lt;br/&gt;
       return super.computeHash() + valueType.computeHash();&lt;br/&gt;
@@ -865,7 +865,7 @@ public boolean equals(Object o) &lt;/p&gt;
{
       UnionSchema that = (UnionSchema)o;
       return equalCachedHash(that)
         &amp;amp;&amp;amp; types.equals(that.types)
-        &amp;amp;&amp;amp; props.equals(that.props);
+        &amp;amp;&amp;amp; propsEqual(that);
     }
&lt;p&gt;     @Override int computeHash() &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {       int hash = super.computeHash();@@ -903,7 +903,7 @@ public boolean equals(Object o) {
       return equalCachedHash(that)
         &amp;amp;&amp;amp; equalNames(that)
         &amp;amp;&amp;amp; size == that.size
-        &amp;amp;&amp;amp; props.equals(that.props);
+        &amp;amp;&amp;amp; propsEqual(that);
     }     @Override int computeHash() { return super.computeHash() + size; }     void toJson(Names names, JsonGenerator gen) throws IOException {
@@ -1439,7 +1439,7 @@ private static Schema applyAliases(Schema s, Map&amp;lt;Schema,Schema&amp;gt; seen,
         Schema fSchema = applyAliases(f.schema, seen, aliases, fieldAliases);
         String fName = getFieldAlias(name, f.name, fieldAliases);
         Field newF = new Field(fName, fSchema, f.doc, f.defaultValue, f.order);
-        newF.props.putAll(f.props);               // copy props
+        newF.putAll(f);               // copy props
         newFields.add(newF);
       }       result.setFields(newFields);@@ -1472,7 +1472,7 @@ private static Schema applyAliases(Schema s, Map&amp;lt;Schema,Schema&amp;gt; seen,       break;     }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;     if (result != s)&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;result.props.putAll(s.props);        // copy props&lt;br/&gt;
+      result.putAll(s);        // copy props&lt;br/&gt;
     return result;&lt;br/&gt;
   }&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Jul 2017 19:12:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hm93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2052] Remove org.apache.avro.file.DataFileWriter Double Buffering</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2052</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.avro.file.DataFileWriter&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void init(OutputStream outs) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.underlyingStream = outs;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedFileOutputStream(outs);
    EncoderFactory efactory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EncoderFactory();
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.vout = efactory.binaryEncoder(out, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    dout.setSchema(schema);
    buffer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NonCopyingByteArrayOutputStream(
        &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.min((&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)(syncInterval * 1.25), &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE/2 -1));
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bufOut = efactory.binaryEncoder(buffer, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.codec == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.codec = CodecFactory.nullCodec().createInstance();
    }
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.isOpen = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s clear here that both streams are writing to a buffered destination, {{ BufferedFileOutputStream}} and &lt;tt&gt;ByteArrayOutputStream&lt;/tt&gt; therefore there is no reason to need a buffered encoder and instead, write directly to the buffered streams with &lt;tt&gt;directBinaryEncoder&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087772">AVRO-2052</key>
            <summary>Remove org.apache.avro.file.DataFileWriter Double Buffering</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jul 2017 23:02:45 +0000</created>
                <updated>Sat, 22 Jul 2017 15:04:40 +0000</updated>
                            <resolved>Sat, 22 Jul 2017 15:04:40 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16090768" author="belugabehr" created="Mon, 17 Jul 2017 23:04:03 +0000"  >&lt;p&gt;Call &lt;tt&gt;directBinaryEncoder&lt;/tt&gt; instead of the buffered &lt;tt&gt;binaryEncoder&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16092067" author="cutting" created="Tue, 18 Jul 2017 19:45:27 +0000"  >&lt;p&gt;There may be significant performance differences between a BufferedBinaryEncoder and a DirectBinaryEncoder writing to a buffered output stream.  Ints, longs, doubles and floats are all buffered internally in DirectBinaryEncoder, so removing the BufferedBinaryEncoder&apos;s buffering doesn&apos;t in fact reduce the number of bytes copied for these types but rather increases the number of invocations of the byte copier.  This was deemed significant in the past, but is perhaps worth re-benchmarking.  Perf.java (in ipc/.../io) could be used for this.  This doesn&apos;t likely matter for vout, but may be significant for bufOut.  This shouldn&apos;t be committed without such benchmarking.&lt;/p&gt;</comment>
                            <comment id="16092115" author="belugabehr" created="Tue, 18 Jul 2017 20:14:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; There is a small amount of buffering in &lt;tt&gt;DirectBinaryEncoder&lt;/tt&gt;.  There exists a 12-byte buffer.  However, in one case this buffer is not used and an array is instantiated for each invocation.  Seems like an oversight to me.  Thoughts?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.avro.io.DirectBinaryEncoder.writeDouble(double)&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void writeDouble(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; d) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] buf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[8];
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = BinaryData.encodeDouble(d, buf, 0);
    out.write(buf, 0, len);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16092122" author="belugabehr" created="Tue, 18 Jul 2017 20:21:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2056&quot; title=&quot;DirectBinaryEncoder Creates Buffer For Each Call To writeDouble&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2056&quot;&gt;&lt;del&gt;AVRO-2056&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16092205" author="cutting" created="Tue, 18 Jul 2017 21:19:13 +0000"  >&lt;p&gt;It looks like an oversight to me too, but it might not be.  Perhaps the JVM is smart enough to realize that this does not escape and stack allocates it or something.  I would benchmark this too with Perf.java before I changed it.  Perf.java currently only tests BufferedBinaryEncoder, but it&apos;s a one-line change to get it to instead benchmark DirectBinaryEncoder.  These encoder &amp;amp; decoder methods are among the most performance-critical parts of Avro.&lt;/p&gt;</comment>
                            <comment id="16097358" author="belugabehr" created="Sat, 22 Jul 2017 15:04:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; I just ran the Perf test.  Indeed, the &lt;tt&gt;directBinaryEncoder&lt;/tt&gt; is slower than the &lt;tt&gt;binaryEncoder&lt;/tt&gt; even when writing into a buffered OutputStream.  Closing the ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12877696" name="AVRO-2052.1.patch" size="1177" author="belugabehr" created="Mon, 17 Jul 2017 23:03:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jul 2017 19:45:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hmpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2053] Remove Reference To Deprecated Property mapred.output.compression.type</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2053</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro utilizes &lt;a href=&quot;https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/DeprecatedProperties.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;deprecated&lt;/a&gt; property &lt;em&gt;mapred.output.compression.type&lt;/em&gt;.  Update code to use the MRv2 property and don&apos;t override default behaviors/settings.  Use the appropriate facilities from &lt;tt&gt;org.apache.hadoop.mapreduce.lib.output.FileOutputFormat&lt;/tt&gt; and &lt;tt&gt;org.apache.hadoop.io.SequenceFile&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.avro.mapreduce.AvroSequenceFileOutputFormat&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-comment&quot;&gt;/** Configuration key &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; storing the type of compression &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the target sequence file. */&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; CONF_COMPRESSION_TYPE = &lt;span class=&quot;code-quote&quot;&gt;&quot;mapred.output.compression.type&quot;&lt;/span&gt;;

  &lt;span class=&quot;code-comment&quot;&gt;/** The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; compression type &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the target sequence file. */&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CompressionType DEFAULT_COMPRESSION_TYPE = CompressionType.RECORD;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13088007">AVRO-2053</key>
            <summary>Remove Reference To Deprecated Property mapred.output.compression.type</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2017 18:43:01 +0000</created>
                <updated>Tue, 12 Sep 2017 13:59:55 +0000</updated>
                            <resolved>Tue, 12 Sep 2017 13:59:55 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16101457" author="gszadovszky" created="Wed, 26 Jul 2017 09:46:01 +0000"  >&lt;p&gt;The property &lt;tt&gt;mapred.output.compression.type&lt;/tt&gt; had been deprecated in hadoop &lt;tt&gt;2.7.3&lt;/tt&gt;. Based on the actual &lt;tt&gt;pom.xml&lt;/tt&gt; we still supports haddop1 which uses this property. So the question is when do we want to officially drop hadoop1 support.&lt;br/&gt;
Maybe, we should only add this change to the next major release (&lt;tt&gt;1.9.0&lt;/tt&gt;) after the hadoop1 dependency is removed.&lt;/p&gt;</comment>
                            <comment id="16162977" author="jira-bot" created="Tue, 12 Sep 2017 13:58:56 +0000"  >&lt;p&gt;Commit ce3f821a79d2a653a08da2ac26a14df9deccb7ec in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=ce3f821&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=ce3f821&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2053&quot; title=&quot;Remove Reference To Deprecated Property mapred.output.compression.type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2053&quot;&gt;&lt;del&gt;AVRO-2053&lt;/del&gt;&lt;/a&gt;: Remove Reference To Deprecated Property mapred.output.compression.type&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13090707">AVRO-2059</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12877852" name="AVRO-2053.1.patch" size="2230" author="belugabehr" created="Tue, 18 Jul 2017 18:44:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Jul 2017 09:46:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ho5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2054] Use StringBuilder instead of StringBuffer</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2054</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Use the un-synchronized StringBuilder instead of StringBuffer.  Use &lt;em&gt;char&lt;/em&gt; values instead of Strings.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.trevni.MetaData&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
    &lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt; buffer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt;();
    buffer.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;{ &quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; e : entrySet()) {
      buffer.append(e.getKey());
      buffer.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        buffer.append(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(e.getValue(), &lt;span class=&quot;code-quote&quot;&gt;&quot;ISO-8859-1&quot;&lt;/span&gt;));
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (java.io.UnsupportedEncodingException error) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TrevniRuntimeException(error);
      }
      buffer.append(&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;);
    }
    buffer.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; buffer.toString();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13088024">AVRO-2054</key>
            <summary>Use StringBuilder instead of StringBuffer</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2017 19:06:05 +0000</created>
                <updated>Fri, 28 Jul 2017 07:19:13 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 07:19:13 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16095797" author="sacharya" created="Fri, 21 Jul 2017 05:21:47 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Only one comment :&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Can you change the variable from &lt;tt&gt;buffer&lt;/tt&gt; to &lt;tt&gt;builder&lt;/tt&gt;. It makes the consistency better.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16095801" author="hadoopqa" created="Fri, 21 Jul 2017 05:25:29 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m 12s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  6m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;  6m 51s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.13.1 Server=1.13.1 Image:yetus/avro:793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2054&quot; title=&quot;Use StringBuilder instead of StringBuffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2054&quot;&gt;&lt;del&gt;AVRO-2054&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877859/AVRO-2054.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877859/AVRO-2054.1.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  buildtest  javac  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux 009ba9974657 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; build &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: lang/java U: lang/java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/31/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/31/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.4.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16096201" author="belugabehr" created="Fri, 21 Jul 2017 12:47:04 +0000"  >&lt;p&gt;Renamed the automatic variable from &lt;em&gt;buffer&lt;/em&gt; to &lt;em&gt;builder&lt;/em&gt;.&lt;/p&gt;</comment>
                            <comment id="16101405" author="gszadovszky" created="Wed, 26 Jul 2017 09:13:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16104568" author="jira-bot" created="Fri, 28 Jul 2017 07:17:23 +0000"  >&lt;p&gt;Commit 224f75f64982fa65c56039e4c413b5d9c138800b in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=224f75f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=224f75f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2054&quot; title=&quot;Use StringBuilder instead of StringBuffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2054&quot;&gt;&lt;del&gt;AVRO-2054&lt;/del&gt;&lt;/a&gt;: Use StringBuilder instead of StringBuffer&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12877859" name="AVRO-2054.1.patch" size="1256" author="belugabehr" created="Tue, 18 Jul 2017 19:06:14 +0000"/>
                            <attachment id="12878345" name="AVRO-2054.2.patch" size="1396" author="belugabehr" created="Fri, 21 Jul 2017 12:46:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Jul 2017 05:21:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ho9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2055] Remove Magic Value From org.apache.avro.hadoop.io.AvroSequenceFile</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2055</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Remove magic string &lt;em&gt;io.file.buffer.size&lt;/em&gt; and &lt;em&gt;DEFAULT_BUFFER_SIZE_BYTES&lt;/em&gt; and instead rely on the Hadoop libraries to provide this information.  Will help to keep Avro in sync with changes in Hadoop.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13088039">AVRO-2055</key>
            <summary>Remove Magic Value From org.apache.avro.hadoop.io.AvroSequenceFile</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2017 19:56:53 +0000</created>
                <updated>Tue, 12 Sep 2017 14:00:10 +0000</updated>
                            <resolved>Tue, 12 Sep 2017 14:00:10 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16095810" author="sacharya" created="Fri, 21 Jul 2017 05:42:05 +0000"  >&lt;p&gt;+1.&lt;br/&gt;
LGTM&lt;/p&gt;</comment>
                            <comment id="16095813" author="hadoopqa" created="Fri, 21 Jul 2017 05:45:30 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m 12s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  1s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; buildtest &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  6m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;  6m 50s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.13.1 Server=1.13.1 Image:yetus/avro:793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2055&quot; title=&quot;Remove Magic Value From org.apache.avro.hadoop.io.AvroSequenceFile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2055&quot;&gt;&lt;del&gt;AVRO-2055&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877868/AVRO-2055.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877868/AVRO-2055.1.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  buildtest  javac  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux 7f5310dc7da6 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; build &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 793178a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.7.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: lang/java U: lang/java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/33/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-AVRO-Build-TEST/33/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.4.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16101345" author="gszadovszky" created="Wed, 26 Jul 2017 08:41:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16102915" author="gszadovszky" created="Thu, 27 Jul 2017 08:19:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;, sorry I&apos;ve just realised during doing a build with your patches that we are in the same situation than with &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2053&quot; title=&quot;Remove Reference To Deprecated Property mapred.output.compression.type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2053&quot;&gt;&lt;del&gt;AVRO-2053&lt;/del&gt;&lt;/a&gt;. It does not even compile as we are using hadoop-1 by default. So, let&apos;s wait if we can get rid of Hadoop 1 in 1.9.&lt;/p&gt;</comment>
                            <comment id="16162978" author="jira-bot" created="Tue, 12 Sep 2017 13:58:58 +0000"  >&lt;p&gt;Commit 9f3ceefda1ee31c388f535a8d3007f0749119447 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=9f3ceef&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=9f3ceef&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2055&quot; title=&quot;Remove Magic Value From org.apache.avro.hadoop.io.AvroSequenceFile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2055&quot;&gt;&lt;del&gt;AVRO-2055&lt;/del&gt;&lt;/a&gt;: Remove Magic Value From org.apache.avro.hadoop.io.AvroSequenceFile&lt;/p&gt;

&lt;p&gt;Signed-off-by: sacharya &amp;lt;suraj@apache.org&amp;gt;&lt;br/&gt;
Signed-off-by: Gabor Szadovszky &amp;lt;gabor@apache.org&amp;gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13090707">AVRO-2059</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12877868" name="AVRO-2055.1.patch" size="1786" author="belugabehr" created="Tue, 18 Jul 2017 19:57:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Jul 2017 05:42:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hod3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2056] DirectBinaryEncoder Creates Buffer For Each Call To writeDouble</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2056</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Each call to &lt;tt&gt;writeDouble&lt;/tt&gt; creates a new buffer and promptly throws it away even though the class has a re-usable buffer and is used in other methods such as &lt;tt&gt;writeFloat&lt;/tt&gt;.  Remove this extra buffer.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.avro.io.DirectBinaryEncoder&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-comment&quot;&gt;// the buffer is used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; writing floats, doubles, and large longs.
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] buf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[12];

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void writeFloat(&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; f) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = BinaryData.encodeFloat(f, buf, 0);
    out.write(buf, 0, len);
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void writeDouble(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; d) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] buf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[8];
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = BinaryData.encodeDouble(d, buf, 0);
    out.write(buf, 0, len);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13088048">AVRO-2056</key>
            <summary>DirectBinaryEncoder Creates Buffer For Each Call To writeDouble</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="belugabehr">BELUGA BEHR</assignee>
                                    <reporter username="belugabehr">BELUGA BEHR</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2017 20:20:30 +0000</created>
                <updated>Fri, 28 Jul 2017 07:19:26 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 07:19:26 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16092208" author="cutting" created="Tue, 18 Jul 2017 21:21:50 +0000"  >&lt;p&gt;This may or may not be a mistake. Perhaps the JVM is smart enough to realize that this array does not escape and stack allocates it or something. We should benchmark this with Perf.java before changing it. (Perf.java currently only tests BufferedBinaryEncoder, but it&apos;s a one-line change to get it to instead benchmark DirectBinaryEncoder.) These encoder &amp;amp; decoder methods are among the most performance-critical parts of Avro and should not be altered without benchmarking.&lt;/p&gt;</comment>
                            <comment id="16096959" author="belugabehr" created="Fri, 21 Jul 2017 22:44:44 +0000"  >&lt;p&gt;With the patch applied, writing Doubles is between 1% and 2% faster and has the added benefit of cutting down on garbage collection&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# Avro Master + Patch

DoubleWrite:   2762 ms      72.407       579.258       2000000
DoubleWrite:   2786 ms      71.787       574.293       2000000
DoubleWrite:   2755 ms      72.570       580.561       2000000							   

# Avro Master

DoubleWrite:   2822 ms      70.871       566.965       2000000
DoubleWrite:   2830 ms      70.667       565.336       2000000
DoubleWrite:   2807 ms      71.230       569.842       2000000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16101342" author="gszadovszky" created="Wed, 26 Jul 2017 08:38:16 +0000"  >&lt;p&gt;+1 from my side.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;, Could you please add the Perf change as well to the patch?&lt;br/&gt;
(hint: next time you should use pull requests instead of patch files. It is easier to review, comment and track the changes.)&lt;/p&gt;</comment>
                            <comment id="16101805" author="belugabehr" created="Wed, 26 Jul 2017 15:29:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gszadovszky&quot; class=&quot;user-hover&quot; rel=&quot;gszadovszky&quot;&gt;Gabor Szadovszky&lt;/a&gt; I&apos;m sorry, but I do not understand your request to &quot;add the Perf change.&quot;  I did not change the Perf test to accomplish the testing other than un-comment the direct binary encoder:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      Encoder e = encoder_factory.binaryEncoder(out, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&lt;span class=&quot;code-comment&quot;&gt;//    Encoder e = encoder_factory.directBinaryEncoder(out, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16102845" author="gszadovszky" created="Thu, 27 Jul 2017 07:28:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;, I&apos;ve took a look on Perf and I see how it works now. So, there is no relevant change there, it is more for testing your stuff offline like in an IDE...&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="16104567" author="jira-bot" created="Fri, 28 Jul 2017 07:17:21 +0000"  >&lt;p&gt;Commit 3801888fa8c9dc96a1613e41cbc33800bc84f1b4 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=3801888&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=3801888&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2056&quot; title=&quot;DirectBinaryEncoder Creates Buffer For Each Call To writeDouble&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2056&quot;&gt;&lt;del&gt;AVRO-2056&lt;/del&gt;&lt;/a&gt;: DirectBinaryEncoder Creates Buffer For Each Call To writeDouble&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12877879" name="AVRO-2056.1.patch" size="727" author="belugabehr" created="Tue, 18 Jul 2017 20:20:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jul 2017 21:21:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hof3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2057] JsonDecoder.skipChildren does not skip map/records correctly</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2057</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;at &lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/io/JsonDecoder.java#L585&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/io/JsonDecoder.java#L585&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JsonParser skipChildren() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        JsonToken tkn = elements.get(pos).token;
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; level = (tkn == JsonToken.START_ARRAY || tkn == JsonToken.END_ARRAY) ? 1 : 0;
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (level &amp;gt; 0) {
          &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;(elements.get(++pos).token) {
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; START_ARRAY:
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; START_OBJECT:
            level++;
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; END_ARRAY:
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; END_OBJECT:
            level--;
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
          }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JsonParser skipChildren() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        JsonToken tkn = elements.get(pos).token;
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; level = (tkn == JsonToken.START_ARRAY || tkn == JsonToken.START_OBJECT) ? 1 : 0;
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (level &amp;gt; 0) {
          &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;(elements.get(++pos).token) {
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; START_ARRAY:
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; START_OBJECT:
            level++;
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; END_ARRAY:
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; END_OBJECT:
            level--;
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
          }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This results in de-serialization failures when the reader schema does not have fields that are present in the serialized object and the writer schema. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13088062">AVRO-2057</key>
            <summary>JsonDecoder.skipChildren does not skip map/records correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zolyfarkas">Zoltan Farkas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2017 20:53:23 +0000</created>
                <updated>Sun, 30 Dec 2018 04:09:33 +0000</updated>
                                            <version>1.8.2</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hoi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
