<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:24:23 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2016-12-6+AND+created+%3C%3D+2016-12-13+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="1" total="1"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1968] Python DatumWriter seems to evaluate union types in reverse order </title>
                <link>https://issues.apache.org/jira/browse/AVRO-1968</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The Python DatumWriter seems to evaluate types in a union in reverse order. For example, with the following schema:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        {
            &quot;type&quot;: &quot;record&quot;,
            &quot;name&quot;: &quot;MyRecord&quot;,
            &quot;fields&quot;: [
                {&quot;name&quot;: &quot;my_field&quot;, &quot;type&quot;: [&quot;boolean&quot;, &quot;double&quot;]}
            ]
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I set my_field to a boolean in my data, it seems to be encoded as a double. However, if I reverse the order of the types in my union (&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;double&amp;quot;, &amp;quot;boolean&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt;) it seems to be encoded as a boolean.&lt;/p&gt;

&lt;p&gt;This seems unintuitive for a couple of reasons:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I&apos;d expect the types in the union to be evaluated in the order they are specified, but they seem to be evaluated in reverse order&lt;/li&gt;
	&lt;li&gt;Encoding a boolean as a double is a bit weird&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m not sure if this is a bug or expected behaviour though. If this is the expected behaviour (or it can&apos;t be changed without breaking things) then it would be nice if this was documented somewhere (I searched by couldn&apos;t find anything), as it&apos;s pretty unintuitive.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a full test case. The test case encodes and then decodes the data with both the original schema and the reversed version. For me it prints:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Type: &amp;lt;type &apos;float&apos;&amp;gt;
Type from reversed schema: &amp;lt;type &apos;bool&apos;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ideally I&apos;d expect the type to be &apos;bool&apos; both times, but failing that I&apos;d expect the type to be &apos;bool&apos; the first time, and &apos;float&apos; the second time. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13026984">AVRO-1968</key>
            <summary>Python DatumWriter seems to evaluate union types in reverse order </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="neilf">Neil Ferguson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Dec 2016 12:46:48 +0000</created>
                <updated>Fri, 9 Dec 2016 12:51:03 +0000</updated>
                                            <version>1.8.1</version>
                                                    <component>python</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15735228" author="neilf" created="Fri, 9 Dec 2016 12:48:27 +0000"  >&lt;p&gt;Test case for issue&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12842546" name="avro_test.py" size="1666" author="neilf" created="Fri, 9 Dec 2016 12:48:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37egv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
