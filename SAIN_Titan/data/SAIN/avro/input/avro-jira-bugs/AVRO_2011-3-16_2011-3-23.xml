<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:15:19 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-3-16+AND+created+%3C%3D+2011-3-23+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="6" total="6"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-782] issue of cache coherence or reuse for avro map reduce</title>
                <link>https://issues.apache.org/jira/browse/AVRO-782</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Our map reduce jobs are using Avro map/reduce API.  For one of the jobs, we got the following trace for the reducer:&lt;/p&gt;

&lt;p&gt;====================================================================================================&lt;br/&gt;
attempt_20110310145147365_0002_r_000000_0/syslog:2011-03-10 14:52:31,226 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000000000000000000000000000000000 whose rowKey is 0000000000000000000000000000000000000&lt;br/&gt;
attempt_20110310145315542_0002_r_000000_0/syslog:2011-03-10 14:53:59,010 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000000000000000000000000000000000 whose rowKey is 0000000000000000000000000000000000000&lt;br/&gt;
attempt_20110310145315542_0002_r_000000_0/syslog:2011-03-10 14:53:59,016 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000100000000000000000000000000001 whose rowKey is 0000000200000000000000000000000000002&lt;br/&gt;
attempt_20110310145315542_0002_r_000000_0/syslog:2011-03-10 14:53:59,017 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000200000000000000000000000000002 whose rowKey is 0000000300000000000000000000000000003&lt;br/&gt;
attempt_20110310145315542_0002_r_000000_0/syslog:2011-03-10 14:53:59,021 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000300000000000000000000000000003 whose rowKey is 0000000400000000000000000000000000004&lt;br/&gt;
attempt_20110310145315542_0002_r_000000_0/syslog:2011-03-10 14:53:59,023 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000400000000000000000000000000004 whose rowKey is 0000000500000000000000000000000000005&lt;br/&gt;
attempt_20110310145315542_0002_r_000000_0/syslog:2011-03-10 14:53:59,024 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000500000000000000000000000000005 whose rowKey is 0000000500000000000000000000000000005&lt;br/&gt;
====================================================================================================&lt;/p&gt;

&lt;p&gt;If we add the following two lines to the reducer code:&lt;/p&gt;

&lt;p&gt;====================================================================================================&lt;br/&gt;
boolean workAround = getConf().getBoolean(NgActivityGatheringJob.NG_AVRO_BUG_WORKAROUND, true);&lt;br/&gt;
Utf8 dupKey = (workAround) ? new Utf8(key.toString()) : key; // use dupKey instead of key passed to reducer&lt;br/&gt;
====================================================================================================&lt;/p&gt;

&lt;p&gt;We got the following trace, which we consider as the right behavior:&lt;/p&gt;

&lt;p&gt;====================================================================================================&lt;br/&gt;
2011-03-10 15:04:33,431 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000000000000000000000000000000000 whose rowKey is 0000000000000000000000000000000000000&lt;br/&gt;
attempt_20110310150517897_0002_r_000000_0/syslog:2011-03-10 15:06:01,374 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000000000000000000000000000000000 whose rowKey is 0000000000000000000000000000000000000&lt;br/&gt;
attempt_20110310150517897_0002_r_000000_0/syslog:2011-03-10 15:06:01,381 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000100000000000000000000000000001 whose rowKey is 0000000100000000000000000000000000001&lt;br/&gt;
attempt_20110310150517897_0002_r_000000_0/syslog:2011-03-10 15:06:01,383 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000200000000000000000000000000002 whose rowKey is 0000000200000000000000000000000000002&lt;br/&gt;
attempt_20110310150517897_0002_r_000000_0/syslog:2011-03-10 15:06:01,389 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000300000000000000000000000000003 whose rowKey is 0000000300000000000000000000000000003&lt;br/&gt;
attempt_20110310150517897_0002_r_000000_0/syslog:2011-03-10 15:06:01,391 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000400000000000000000000000000004 whose rowKey is 0000000400000000000000000000000000004&lt;br/&gt;
attempt_20110310150517897_0002_r_000000_0/syslog:2011-03-10 15:06:01,393 INFO com.ngmoco.ngpipes.sourcing.NgActivityGatheringReducer: working on 0000000500000000000000000000000000005 whose rowKey is 0000000500000000000000000000000000005&lt;br/&gt;
====================================================================================================&lt;/p&gt;

&lt;p&gt;According to Scott Carey, this might relate to object reuse.  We have created an Unit test case that will reproduce the problem.  The test case will be attached as a patch.  Note that we run this test case under our Ngmoco dev environment, which might need to make some adjustment to run on other environment.   &lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac with VMWare running Linux training-vm 2.6.28-19-server #61-Ubuntu&lt;/p&gt;</environment>
        <key id="12501637">AVRO-782</key>
            <summary>issue of cache coherence or reuse for avro map reduce</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eychih">ey-chih chow</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Mar 2011 00:28:11 +0000</created>
                <updated>Wed, 23 May 2012 21:51:47 +0000</updated>
                                            <version>1.5.0</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="13007767" author="eychih" created="Thu, 17 Mar 2011 01:02:41 +0000"  >&lt;p&gt;Note that this patch running under our environment.  For the other environment, please change the following statement&lt;/p&gt;

&lt;p&gt;System.setProperty(&quot;share.dir&quot;, &quot;share&quot;);&lt;/p&gt;

&lt;p&gt;in the testProcessing() method.&lt;/p&gt;</comment>
                            <comment id="13007769" author="eychih" created="Thu, 17 Mar 2011 01:09:19 +0000"  >&lt;p&gt;We run this patch under avro 1.5 with the fix of the bug avro-780.&lt;/p&gt;</comment>
                            <comment id="13007801" author="scott_carey" created="Thu, 17 Mar 2011 04:12:11 +0000"  >&lt;p&gt;Something is odd with how the  objects passed in to reduce() are re-used by the framework.&lt;/p&gt;

&lt;p&gt;So, if you change&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;value.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;rowKey&quot;&lt;/span&gt;, key);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;value.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;rowKey&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Utf8(Arrays.copyOf(key.getBytes(),key.getByteLength())));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;value.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;rowKey&quot;&lt;/span&gt;, key.toString();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It works.  &lt;/p&gt;

&lt;p&gt;Since Utf8 is mutable, the next reduce call modifies it rather than creating a new one.   The same thing can happen with any object.&lt;/p&gt;

&lt;p&gt;For example, try this version of the mapper:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MapImpl &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AvroMapper&amp;lt;GenericRecord, Pair&amp;lt;Utf8, GenericRecord&amp;gt;&amp;gt; {
	  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; GenericRecord foo = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
		@Override
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void map(GenericRecord input, AvroCollector&amp;lt;Pair&amp;lt;Utf8, GenericRecord&amp;gt;&amp;gt; collector,
				Reporter reporter) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
		  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; == foo) foo = input;
			collector.collect(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair&amp;lt;Utf8,GenericRecord&amp;gt;(input.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;rowKey&quot;&lt;/span&gt;),input));

      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;working on &quot;&lt;/span&gt; + input.toString() );
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;the first was &quot;&lt;/span&gt; + foo.toString());
		}
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It will print out:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;working on 0000000000000000000000000000000000000
the first was 0000000000000000000000000000000000000
working on 0000000100000000000000000000000000001
the first was 0000000100000000000000000000000000001
working on 0000000200000000000000000000000000002
the first was 0000000200000000000000000000000000002
working on 0000000300000000000000000000000000003
the first was 0000000300000000000000000000000000003
working on 0000000400000000000000000000000000004
the first was 0000000400000000000000000000000000004
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the call to collect() here works without copying in the mapper because it immediately serializes the value.   The problem on the reducer side is during reading, not writing.  It reads a value twice in a row for some reason. In fact, it reads both the &apos;1&apos; and &apos;2&apos; values and keys in the &apos;1&apos; loop.  &lt;/p&gt;

&lt;p&gt;I think what is happening is that &apos;key&apos;, passed into reduce() is used by the internal Hadoop value iterator.  Once we read a second value in in the generic record, we overwrite the iterator state and breaks, causing it to skip an iteration and become offset such that the current loop matches the next key.&lt;/p&gt;


&lt;p&gt;The workaround in the short term is to copy the key before setting it on a mutable object where it can be changed.  &lt;/p&gt;

&lt;p&gt;We probably want a copy-constructor for Utf8 to make copies easier too.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12473866" name="AVRO-782.patch" size="6193" author="eychih" created="Thu, 17 Mar 2011 01:02:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Mar 2011 04:12:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80157</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-783] Specifc object support in C++</title>
                <link>https://issues.apache.org/jira/browse/AVRO-783</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Forthcoming patch provides a way to encode and decode user objects and a code generator that generates classes for given Avro schema.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501879">AVRO-783</key>
            <summary>Specifc object support in C++</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Mar 2011 19:14:52 +0000</created>
                <updated>Fri, 6 May 2011 19:14:01 +0000</updated>
                            <resolved>Sun, 27 Mar 2011 12:22:52 +0000</resolved>
                                                    <fixVersion>1.5.1</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13008812" author="thiru_mg" created="Sat, 19 Mar 2011 19:41:52 +0000"  >&lt;p&gt;This patch support encoding and decoding specific objects and code generator for given Avro schema.&lt;/p&gt;</comment>
                            <comment id="13011404" author="cutting" created="Fri, 25 Mar 2011 20:27:03 +0000"  >&lt;p&gt;This looks good and passes tests for me.  +1&lt;/p&gt;</comment>
                            <comment id="13011788" author="thiru_mg" created="Sun, 27 Mar 2011 12:22:52 +0000"  >&lt;p&gt;Committed revision 1085921 after adding a few more tests. Tested on RHEL 4.8, Ubuntu 10.10 and Cygwin.&lt;/p&gt;

&lt;p&gt;Thanks Doug for reviewing.&lt;/p&gt;</comment>
                            <comment id="13012721" author="cutting" created="Tue, 29 Mar 2011 21:38:28 +0000"  >&lt;p&gt;Should we merge this to the 1.5 branch and include it in 1.5.1?  It doesn&apos;t appear to have any incompatible API changes, and is a wonderful feature to have.&lt;/p&gt;</comment>
                            <comment id="13012839" author="thiru_mg" created="Wed, 30 Mar 2011 04:36:43 +0000"  >&lt;p&gt;&lt;ins&gt;1. One major feature that is missing in Avro C&lt;/ins&gt;+ is Avro RPC. But I don&apos;t think we can add that in the next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474083" name="AVRO-783.patch" size="33123" author="thiru_mg" created="Sat, 19 Mar 2011 19:41:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Mar 2011 20:27:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2fz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-784] SpecificCompiler should generate accessors</title>
                <link>https://issues.apache.org/jira/browse/AVRO-784</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro&apos;s Java SpecificCompiler should generate java bean style accessors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501894">AVRO-784</key>
            <summary>SpecificCompiler should generate accessors</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="esammer">E. Sammer</reporter>
                        <labels>
                            <label>features</label>
                    </labels>
                <created>Sun, 20 Mar 2011 04:40:18 +0000</created>
                <updated>Tue, 6 Mar 2012 01:05:18 +0000</updated>
                            <resolved>Wed, 5 Oct 2011 20:08:44 +0000</resolved>
                                    <version>1.5.0</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13008877" author="esammer" created="Sun, 20 Mar 2011 04:45:41 +0000"  >&lt;p&gt;Input welcome. I thought this would be useful in supporting backward compatible APIs with aliases down the road so client code doesn&apos;t need to reference generated members directly.&lt;/p&gt;

&lt;p&gt;I have an ICLA on file with the ASF and assign all rights to the ASF under the same license as Avro.&lt;/p&gt;</comment>
                            <comment id="13009212" author="cutting" created="Mon, 21 Mar 2011 17:09:21 +0000"  >&lt;p&gt;The approach I&apos;ve heard others mention is, rather than back-compatible, to use a new set of templates that generates setters and have applications explicitly upgrade to the new templates.  Then the fields could become private and the generated API would become more abstract, permitting optimizations.  But we could pursue both approaches too.&lt;/p&gt;

&lt;p&gt;A few concerns with this patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;appending get/set onto the front of field names may result in name conflicts.  For example, a record may have fields named both &apos;setSize&apos; and &apos;size&apos;.  For other generated names we include a dollar sign, a character that is not permitted in Avro names.  My preference here would be to generate, for a field named &apos;foo&apos;, a &apos;foo()&apos; getter and a &apos;foo&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&apos; setter.&lt;/li&gt;
	&lt;li&gt;we don&apos;t need to generate calls to the &apos;put&apos; and &apos;get&apos; methods but can directly set/get the fields.&lt;/li&gt;
	&lt;li&gt;if we directly access the fields then we should use javaUnbox instead of javaType, so that, e.g., the setter for an int field accepts an &quot;int&quot; paramter rather than an &quot;Integer&quot;.&lt;/li&gt;
	&lt;li&gt;we should ideally generate javadoc for the setter/getters.  if the field in the schema has documentation then we should include that, otherwise perhaps generate some vanilla javadoc.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13009228" author="esammer" created="Mon, 21 Mar 2011 17:37:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;appending get/set onto the front of field names may result in name conflicts. For example, a record may have fields named both &apos;setSize&apos; and &apos;size&apos;. For other generated names we include a dollar sign, a character that is not permitted in Avro names. My preference here would be to generate, for a field named &apos;foo&apos;, a &apos;foo()&apos; getter and a &apos;foo&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&apos; setter.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The prepending, in the case of similarly named fields, would simply result in &apos;setSetSize(sizeSize)&apos; which would probably be as the user intended. This should be fine.&lt;/p&gt;

&lt;p&gt;The rationale for adhering to the javabean style accessors is that many frameworks and libraries already grok these names during reflection. For instance, Spring takes advantage of this for automatic resolution of names of properties all over the place.&lt;/p&gt;

&lt;p&gt;Would you be willing to accept these conventions? Also, if you don&apos;t think this makes sense, would it be acceptable to create an annotation / json property that results in generated accessor so users have the choice? i.e.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;record {
  @get @set &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; foo;
  string inacessableType;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or similar?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we don&apos;t need to generate calls to the &apos;put&apos; and &apos;get&apos; methods but can directly set/get the fields.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wasn&apos;t sure if that was OK. Sounds good.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If we directly access the fields then we should use javaUnbox instead of javaType, so that, e.g., the setter for an int field accepts an &quot;int&quot; paramter rather than an &quot;Integer&quot;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Makes sense.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we should ideally generate javadoc for the setter/getters. if the field in the schema has documentation then we should include that, otherwise perhaps generate some vanilla javadoc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No problem.&lt;/p&gt;</comment>
                            <comment id="13009239" author="scott_carey" created="Mon, 21 Mar 2011 17:54:03 +0000"  >&lt;p&gt;In the long run we&apos;ll end up with a few variations for generated code.  One of them will nee to be &apos;standard&apos; bean compatible, with set/get prefixes because other frameworks look for that.&lt;/p&gt;

&lt;p&gt;In general, the user should have a choice on how to generate the access methods.  However, the first iteration does not need to be that flexible, as long as it doesn&apos;t cause difficulty implementing other variations in the future.&lt;/p&gt;

&lt;p&gt;The signature for a nullable type would differ from a non-nullable type if they both are not objects, for example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; getFooCount();
void setFooCount(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; fooCount);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;for nullable types and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getFooCount();
void setFooCount(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; fooCount);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;for non-nullable types.&lt;/p&gt;

&lt;p&gt;Other likely variations that others may contribute later:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;getters without setters, using an immutable object + builder pattern.&lt;/li&gt;
	&lt;li&gt;nullable intrinsics not boxed, but using a BitSet or similar to check for null (minimize memory footprint).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Do we want to simply mark the whole record with an annotation (@bean, @immutable, @builder)?  Or do we need the flexibility at the field level?&lt;/p&gt;</comment>
                            <comment id="13009250" author="cutting" created="Mon, 21 Mar 2011 18:07:31 +0000"  >&lt;p&gt;I don&apos;t have a problem with the convention, I&apos;m just paranoid about the potential for name conflicts in generated code.  My example above was not good, however, as you point out.&lt;/p&gt;

&lt;p&gt;We do need to worry about conflicts with names we inherit.  From Object we inherit &apos;getClass()&apos; and from GenericContainer we inherit &apos;getSchema()&apos;, so I think, if a field is named &apos;class&apos; or &apos;schema&apos; then we&apos;ll need to mangle the generated accessor method.  This actually requires &lt;b&gt;less&lt;/b&gt; mangling than un-prefixed names, since otherwise we&apos;d need to mangle accessor names for fields named &apos;wait&apos;, &apos;hashCode&apos;, &apos;equals&apos;, etc.&lt;/p&gt;

&lt;p&gt;Also, if someone has a record with fields named &quot;foo&quot; and &quot;Foo&quot; then we&apos;d be in trouble.&lt;/p&gt;</comment>
                            <comment id="13009251" author="esammer" created="Mon, 21 Mar 2011 18:09:02 +0000"  >&lt;p&gt;Scott:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In the long run we&apos;ll end up with a few variations for generated code. One of them will nee to be &apos;standard&apos; bean compatible, with set/get prefixes because other frameworks look for that.&lt;/p&gt;

&lt;p&gt;In general, the user should have a choice on how to generate the access methods. However, the first iteration does not need to be that flexible, as long as it doesn&apos;t cause difficulty implementing other variations in the future.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1. Makes sense to me. I also like your point on nullable types. That&apos;s a nice (and easy) thing to expose like that.&lt;/p&gt;

&lt;p&gt;I think having field level flexibility is a good long term goal and will be useful. Support for advanced annotations like @immutable and @builder (at the record level) are very cool.&lt;/p&gt;

&lt;p&gt;I guess my current question is, assuming I can brow beat Doug sufficiently, what subset of these features are required as a v1 feature set? In addition to what I have, I&apos;m confident I can handle:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Making the changes Doug suggested (e.g. doc addition / generation, removing use of put() / get(), dealing with the boxing appropriately).&lt;/li&gt;
	&lt;li&gt;Generating accessors that support ref types for nullable and primitives for non-nullables (assuming that information is easy to get at from Schema$Field or friends).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I haven&apos;t yet looked at what it takes to implement annotations. For that reason, I&apos;m inclined to defer that to another JIRA if that&apos;s acceptable (although I&apos;d still be interested in doing it).&lt;/p&gt;</comment>
                            <comment id="13009252" author="cutting" created="Mon, 21 Mar 2011 18:09:03 +0000"  >&lt;p&gt;Scott: the javaUnbox() method should already handle nullable types correctly.&lt;/p&gt;</comment>
                            <comment id="13009255" author="cutting" created="Mon, 21 Mar 2011 18:15:27 +0000"  >&lt;p&gt;Doc addition is not required for v1, but is easy, so why not.&lt;/p&gt;

&lt;p&gt;I don&apos;t think we should implement both prefixed and unprefixed.  Let&apos;s just pick one.  I now think that prefixing leads to fewer name conflicts and is thus preferable.&lt;/p&gt;</comment>
                            <comment id="13009507" author="esammer" created="Tue, 22 Mar 2011 01:40:01 +0000"  >&lt;p&gt;Updated patch with:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Javadoc for each accessor (either custom or generic docs if docs aren&apos;t provided).&lt;/li&gt;
	&lt;li&gt;Generate accessors for aliases, if they exist.&lt;/li&gt;
	&lt;li&gt;No longer use get() / put() for member access.&lt;/li&gt;
	&lt;li&gt;Use javaUnbox() rather than javaType() to figure out java types for setter args and getter return types.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13009523" author="scott_carey" created="Tue, 22 Mar 2011 02:39:44 +0000"  >&lt;p&gt;Looking good.&lt;/p&gt;

&lt;p&gt;We&apos;ll need to create a different velocity profile instead of breaking the current one (perhaps &apos;bean&apos; instead of &apos;classic&apos;?) and figure out how to wire this up to switch types at user request in the Tool/AntTask/MavenPlugin.&lt;/p&gt;

&lt;p&gt;I&apos;d like to see some name collision tests too.  We can have collisions with Object.getClass(), IndexedRecord.getSchema(), and perhaps others.  Those will need to be mangled.  I believe &quot;class&quot; should already be mangled at the field name level (see SpecificCompiler.mangle()).&lt;/p&gt;

&lt;p&gt;The mangling for method names will differ from mangling for field names.  Currently, a field named &quot;volatile&quot; gets mangled to be a member variable named &quot;volatile$&quot;.  The getter can be getVolatile() rather than getVolatile$().  Conversely, &quot;schema&quot; does not need to have its field mangled, but does need to have its getter mangled.  Its setter does not require mangling, but for consistency should be.&lt;/p&gt;</comment>
                            <comment id="13009528" author="esammer" created="Tue, 22 Mar 2011 02:56:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;We&apos;ll need to create a different velocity profile instead of breaking the current one (perhaps &apos;bean&apos; instead of &apos;classic&apos;?) and figure out how to wire this up to switch types at user request in the Tool/AntTask/MavenPlugin.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I made sure the changes didn&apos;t break backward compatibility; the only changes are additions. That said, I guess having a separate template so we can make instance vars private makes sense.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;d like to see some name collision tests too...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is there a reasonable (predictable) mangling scheme that really makes sense though? There&apos;s also some nastiness in actually being able to detect collisions programmatically when we&apos;re talking about generated classes without making significant assumptions about super classes. I suppose an alternative is to make it all annotation based and allow the user to override the names (or force them to if they want to avoid collisions).&lt;/p&gt;</comment>
                            <comment id="13009682" author="cutting" created="Tue, 22 Mar 2011 15:45:40 +0000"  >&lt;p&gt;I think there are only a finite number of collisions possible, unless we start adding methods to the superclasses of generated classes.  The only collisions I see at present are with Object#getClass() and IndexedRecord#getSchema().  I&apos;d be happy to see just those handled and tested now.&lt;/p&gt;</comment>
                            <comment id="13089835" author="cutting" created="Tue, 23 Aug 2011 22:41:40 +0000"  >&lt;p&gt;Scott, would you be willing to have this committed as a compatible extension of the existing templates?  If so, then I think all this lacks before we commmit it is mangling of getClass and getSchema, perhaps to be getClass$ and getSchema$.&lt;/p&gt;</comment>
                            <comment id="13090453" author="cutting" created="Wed, 24 Aug 2011 20:20:24 +0000"  >&lt;p&gt;I think this is subsumed by &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-839&quot; title=&quot;Implement builder pattern in generated record classes that sets default values when omitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-839&quot;&gt;&lt;del&gt;AVRO-839&lt;/del&gt;&lt;/a&gt;.  Is there anything here that&apos;s not there?&lt;/p&gt;</comment>
                            <comment id="13121424" author="cutting" created="Wed, 5 Oct 2011 20:08:44 +0000"  >&lt;p&gt;Resolving as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-839&quot; title=&quot;Implement builder pattern in generated record classes that sets default values when omitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-839&quot;&gt;&lt;del&gt;AVRO-839&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13222130" author="scott_carey" created="Mon, 5 Mar 2012 02:33:45 +0000"  >&lt;p&gt;I think there were some details that did not make it into &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-839&quot; title=&quot;Implement builder pattern in generated record classes that sets default values when omitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-839&quot;&gt;&lt;del&gt;AVRO-839&lt;/del&gt;&lt;/a&gt;.  In particular, all accessors in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-839&quot; title=&quot;Implement builder pattern in generated record classes that sets default values when omitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-839&quot;&gt;&lt;del&gt;AVRO-839&lt;/del&gt;&lt;/a&gt; appear to be boxed, whether the value is nullable or not.  I have not moved to using the API there because of the boxing overhead incurred.  These issues will need to go into another ticket for later.&lt;/p&gt;</comment>
                            <comment id="13222847" author="cutting" created="Tue, 6 Mar 2012 01:05:18 +0000"  >&lt;p&gt;Scott, good point.  Let&apos;s open a new issue to add unboxed accessors.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12510523">AVRO-839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12474257" name="avro-784.diff" size="4963" author="esammer" created="Tue, 22 Mar 2011 01:40:01 +0000"/>
                            <attachment id="12474109" name="avro-784.diff" size="3270" author="esammer" created="Sun, 20 Mar 2011 04:46:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Mar 2011 17:09:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a4gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The Java SpecificCompiler now generates bean style accessor methods for fields.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-785] SpecificCompiler - noisy log from Velocity </title>
                <link>https://issues.apache.org/jira/browse/AVRO-785</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This log message is noisy and almost looks like an error for the casual observer.&lt;/p&gt;


&lt;p&gt; This is while calling SpecificCompiler.compileSchema. &lt;/p&gt;

&lt;p&gt;*************************&lt;/p&gt;

&lt;p&gt;4:56:28.819 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Created &apos;20&apos; parsers.&lt;/p&gt;

&lt;p&gt;14:56:28.823 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Velocimacro : &quot;velocimacro.library&quot; is not set.  Trying default library: VM_global_library.vm&lt;/p&gt;

&lt;p&gt;14:56:28.824 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Velocity was not initialized! Calling init()...&lt;/p&gt;

&lt;p&gt;14:56:28.827 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Could not load resource &apos;VM_global_library.vm&apos; from ResourceLoader org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader: &lt;/p&gt;

&lt;p&gt;org.apache.velocity.exception.ResourceNotFoundException: ClasspathResourceLoader Error: cannot find resource VM_global_library.vm&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader.getResourceStream(ClasspathResourceLoader.java:131) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.resource.loader.ResourceLoader.resourceExists(ResourceLoader.java:224) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.resource.ResourceManagerImpl.getLoaderForResource(ResourceManagerImpl.java:641) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.resource.ResourceManagerImpl.getLoaderNameForResource(ResourceManagerImpl.java:624) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.RuntimeInstance.getLoaderNameForResource(RuntimeInstance.java:1464) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.VelocimacroFactory.initVelocimacro(VelocimacroFactory.java:159) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.RuntimeInstance.init(RuntimeInstance.java:261) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.RuntimeInstance.requireInitialization(RuntimeInstance.java:290) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1398) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1380) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.velocity.app.VelocityEngine.getTemplate(VelocityEngine.java:401) &lt;span class=&quot;error&quot;&gt;&amp;#91;velocity-1.6.4.jar:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.avro.compiler.specific.SpecificCompiler.renderTemplate(SpecificCompiler.java:226) &lt;span class=&quot;error&quot;&gt;&amp;#91;avro-compiler-1.5.0.jar.zip:1.5.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.avro.compiler.specific.SpecificCompiler.compile(SpecificCompiler.java:269) &lt;span class=&quot;error&quot;&gt;&amp;#91;avro-compiler-1.5.0.jar.zip:1.5.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.avro.compiler.specific.SpecificCompiler.compileToDestination(SpecificCompiler.java:215) &lt;span class=&quot;error&quot;&gt;&amp;#91;avro-compiler-1.5.0.jar.zip:1.5.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at org.apache.avro.compiler.specific.SpecificCompiler.compileSchema(SpecificCompiler.java:165) &lt;span class=&quot;error&quot;&gt;&amp;#91;avro-compiler-1.5.0.jar.zip:1.5.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;at com.incentica.avro.GenJava.main(GenJava.java:32) &lt;span class=&quot;error&quot;&gt;&amp;#91;bin/:na&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;14:56:28.828 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Velocimacro : Default library not found.&lt;/p&gt;

&lt;p&gt;14:56:28.828 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Velocimacro : allowInline = true : VMs can be defined inline in templates&lt;/p&gt;

&lt;p&gt;14:56:28.828 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Velocimacro : allowInlineToOverride = false : VMs defined inline may NOT replace previous VM definitions&lt;/p&gt;

&lt;p&gt;14:56:28.828 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Velocimacro : allowInlineLocal = false : VMs defined inline will be global in scope if allowed.&lt;/p&gt;

&lt;p&gt;14:56:28.828 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - Velocimacro : autoload off : VM system will not automatically reload global library macros&lt;/p&gt;

&lt;p&gt;14:56:28.849 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG AvroVelocityLogChute - ResourceManager : found /org/apache/avro/compiler/specific/templates/java/classic/record.vm with loader org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader&lt;br/&gt;
**********************&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501971">AVRO-785</key>
            <summary>SpecificCompiler - noisy log from Velocity </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="smartnut007">Arun Ramakrishnan</reporter>
                        <labels>
                            <label>compiler</label>
                            <label>specificcompiler</label>
                            <label>velocity</label>
                    </labels>
                <created>Mon, 21 Mar 2011 19:21:51 +0000</created>
                <updated>Fri, 6 May 2011 19:14:01 +0000</updated>
                            <resolved>Tue, 29 Mar 2011 20:41:58 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13009319" author="smartnut007" created="Mon, 21 Mar 2011 19:22:46 +0000"  >&lt;p&gt;This was Doug&apos;s response on the user list.&lt;/p&gt;

&lt;p&gt;***&lt;br/&gt;
Sounds like:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/VELOCITY-720&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VELOCITY-720&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Which would be reduced to a one-line warning if we upgrade to Velocity 1.7.&lt;br/&gt;
****&lt;/p&gt;</comment>
                            <comment id="13011406" author="cutting" created="Fri, 25 Mar 2011 20:35:54 +0000"  >&lt;p&gt;Here&apos;s a patch to update Velocity to 1.7.&lt;/p&gt;</comment>
                            <comment id="13012678" author="cutting" created="Tue, 29 Mar 2011 20:41:58 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12426496">VELOCITY-720</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12474658" name="AVRO-785.patch" size="560" author="cutting" created="Fri, 25 Mar 2011 20:35:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Mar 2011 20:35:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94987</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2g7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-786] Equality for &quot;order&quot;:&quot;ignore&quot; fields cannot use compareTo</title>
                <link>https://issues.apache.org/jira/browse/AVRO-786</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;According to the spec:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;map data may not be compared. It is an error to attempt to compare data containing maps unless those maps are in an &quot;order&quot;:&quot;ignore&quot; record field.&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It looks like GenericData.Record implements equals() in terms of GenericData.compareTo(), which will fail for any record containing a Map, although the spec seems to indicate that it should succeed for &quot;order&quot;:&quot;ignore&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12502093">AVRO-786</key>
            <summary>Equality for &quot;order&quot;:&quot;ignore&quot; fields cannot use compareTo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="stuhood">Stu Hood</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2011 19:43:28 +0000</created>
                <updated>Fri, 6 May 2011 19:14:00 +0000</updated>
                            <resolved>Tue, 29 Mar 2011 20:36:41 +0000</resolved>
                                                    <fixVersion>1.5.1</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13011348" author="cutting" created="Fri, 25 Mar 2011 18:53:38 +0000"  >&lt;p&gt;Here&apos;s a patch for this including a test.&lt;/p&gt;</comment>
                            <comment id="13011595" author="stuhood" created="Sat, 26 Mar 2011 09:45:51 +0000"  >&lt;p&gt;+1&lt;br/&gt;
This looks great: thanks a lot Doug.&lt;/p&gt;</comment>
                            <comment id="13012674" author="cutting" created="Tue, 29 Mar 2011 20:36:41 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474647" name="AVRO-786.patch" size="5437" author="cutting" created="Fri, 25 Mar 2011 18:53:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Mar 2011 18:53:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80160</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-787] Ruby 1.9 compatibility to &apos;require&apos; and run tests</title>
                <link>https://issues.apache.org/jira/browse/AVRO-787</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The avro gem does not &apos;require&apos; on Ruby 1.9, complaining about a missing &apos;md5&apos;.  It also uses a bunch of Ruby 1.8 string-isms, like assuming that Strings enumerate to bytes, which is not necessarily true in 1.9.  &lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OSX, Rubies installed with RVM&lt;/p&gt;</environment>
        <key id="12502104">AVRO-787</key>
            <summary>Ruby 1.9 compatibility to &apos;require&apos; and run tests</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mlartz">Michael L. Artz</assignee>
                                    <reporter username="mlartz">Michael L. Artz</reporter>
                        <labels>
                            <label>ruby</label>
                    </labels>
                <created>Tue, 22 Mar 2011 20:59:40 +0000</created>
                <updated>Fri, 6 May 2011 19:14:01 +0000</updated>
                            <resolved>Wed, 30 Mar 2011 23:11:32 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>ruby</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13009839" author="mlartz" created="Tue, 22 Mar 2011 21:01:31 +0000"  >&lt;p&gt;Patch to ensure that Ruby 1.9 can &apos;require&apos; the avro gem and successfully run the tests.&lt;/p&gt;</comment>
                            <comment id="13011315" author="cutting" created="Fri, 25 Mar 2011 18:03:31 +0000"  >&lt;p&gt;This passes tests for me using Ruby 1.8, so it appears to be a back-compatible change.&lt;/p&gt;

&lt;p&gt;Unless there are objections, I&apos;ll commit this soon for inclusion in 1.5.1.&lt;/p&gt;</comment>
                            <comment id="13013724" author="cutting" created="Wed, 30 Mar 2011 23:11:32 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474341" name="0001-Basic-Ruby-1.9-updates.patch" size="3119" author="mlartz" created="Tue, 22 Mar 2011 21:01:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Mar 2011 18:03:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80161</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>ruby1.9</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
