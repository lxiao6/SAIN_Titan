<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:18:37 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2013-4-24+AND+created+%3C%3D+2013-5-1+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="6" total="6"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1310] Avro Maven project can&apos;t be built from scratch</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1310</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When getting the Java &apos;trunk&apos; from SVN and trying to use Maven Install (&apos;mvn install&apos;) there are errors.&lt;/p&gt;

&lt;p&gt;Most of the errors are in tests so I tried skipping the tests but it still fails.&lt;/p&gt;

&lt;p&gt;See more details in my post on Avro Users: &lt;br/&gt;
&lt;a href=&quot;http://apache-avro.679487.n3.nabble.com/help-with-Avro-compilation-td4026946.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache-avro.679487.n3.nabble.com/help-with-Avro-compilation-td4026946.html&lt;/a&gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Maven on Eclipse&lt;/p&gt;</environment>
        <key id="12645067">AVRO-1310</key>
            <summary>Avro Maven project can&apos;t be built from scratch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nir.zamir">Nir Zamir</reporter>
                        <labels>
                            <label>should_be_dev_discussion</label>
                    </labels>
                <created>Sun, 28 Apr 2013 08:59:08 +0000</created>
                <updated>Fri, 18 Aug 2017 13:16:47 +0000</updated>
                            <resolved>Fri, 18 Aug 2017 13:10:32 +0000</resolved>
                                    <version>1.7.4</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13644146" author="scott_carey" created="Sun, 28 Apr 2013 21:24:03 +0000"  >&lt;p&gt;Run &apos;mvn clean install&apos; from top level first  (where &apos;lang&apos; is).&lt;/p&gt;

&lt;p&gt;It is not supported to run submodules without building their dependencies first.  There are some snapshot depencencies on apache, but they may be out of sync.&lt;/p&gt;

&lt;p&gt;If you wish to only run/test for the avro-mapred, use the following maven options from top level or from lang/java:&lt;/p&gt;

&lt;p&gt;&apos;-pl :avro-mapred&apos;  (project list) and &apos;-am&apos;  (also-make - also runs projects that the items in the list depend on).&lt;/p&gt;

&lt;p&gt;e.g. &apos;mvn compile -pl:avro-mapred -am&apos; does only what is needed to compile for avro-mapred and the things it depends on.&lt;/p&gt;

&lt;p&gt;Alternatively you can &apos;install&apos; from top level to build all artifacts, then descend to a child project afterwards &amp;#8211; the child will then use the installed artifacts from your local repo.&lt;/p&gt;</comment>
                            <comment id="13644487" author="nir.zamir" created="Mon, 29 Apr 2013 13:44:46 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
I don&apos;t have a problem installing the whole trunk, but it just doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;I still tried what you suggested, but no luck:&lt;/p&gt;

&lt;p&gt;1. &apos;mvn clean install&apos; from &apos;trunk&apos; fails on &apos;Avro Compiler&apos; (3 tests fail). I proceeded anyway...&lt;br/&gt;
2. &apos;mvn install&apos; from lang/java is not working (build fails).&lt;br/&gt;
3. &apos;mvn -pl mapred -am&apos; also failed on avro-ipc build:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal on project avro-mapred: Could not resolve dependencies for project org.apache.avro:avro-mapred:jar:1.7.5-SNAPSHOT: Could not find artifact org.apache.avro:avro-ipc:jar:tests:1.7.5-SNAPSHOT in apache.snapshots (&lt;a href=&quot;http://repository.apache.org/snapshots&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repository.apache.org/snapshots&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="13644589" author="cutting" created="Mon, 29 Apr 2013 15:47:33 +0000"  >&lt;p&gt;What OS are you running?  What version of Java?  Which 3 tests fail?&lt;/p&gt;</comment>
                            <comment id="13644651" author="scott_carey" created="Mon, 29 Apr 2013 16:58:43 +0000"  >&lt;p&gt;I purged my repo and tried &apos;mvn install&apos; from trunk, and that worked fine.&lt;/p&gt;

&lt;p&gt;I had one modification for mac in the lang/java pom.xml due to snappy-java issues on mac (&lt;a href=&quot;https://github.com/ptaoussanis/carmine/issues/5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ptaoussanis/carmine/issues/5&lt;/a&gt;) to update to version 1.0.5-M4.&lt;/p&gt;

&lt;p&gt;What three tests fail in step 1?  Test failures in avro compiler will prevent the remainder from building.&lt;/p&gt;

&lt;p&gt;What happens if you skip tests:&lt;/p&gt;

&lt;p&gt;&apos;mvn clean install -DskipTests&apos; from trunk?&lt;/p&gt;</comment>
                            <comment id="13644661" author="scott_carey" created="Mon, 29 Apr 2013 17:14:04 +0000"  >&lt;p&gt;The end result you are having:&lt;br/&gt;
&quot;Could not find artifact org.apache.avro:avro-ipc:jar:tests:1.7.5-SNAPSHOT&quot;&lt;/p&gt;

&lt;p&gt;Is due to either:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;not having the avro-ipc test jar deployed in your local repo after being built form an install that includes the test phase of avro-ipc.&lt;/li&gt;
	&lt;li&gt;not having it available in the maven reactor as part of the build.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What is the output of &apos;mvn --version&apos; ?  Mine is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.0.3 (r1075438; 2011-02-28 09:31:09-0800)
Maven home: /usr/share/maven
Java version: 1.7.0_13, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;mac os x&quot;, version: &quot;10.7.5&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13646563" author="nir.zamir" created="Wed, 1 May 2013 13:24:07 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Well, I&apos;m trying to do it on both my Win7 x64 and my Linux.&lt;/p&gt;

&lt;p&gt;Not sure why, but now everything looks better (maybe I was trying to build trunk/lang/Java and not trunk):&lt;br/&gt;
I managed to clean and build it on windows (it failed a test on the last project, so I re-ran it with skipped tests and re-ran it again).&lt;br/&gt;
On Linux, only the last project fails (and skipping tests doesn&apos;t help):&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:integration-test (default-integration-test) on project avro-service-archetype: Execution default-integration-test of goal org.apache.maven.plugins:maven-archetype-plugin:2.2:integration-test failed: ${maven.home} is not specified as a directory: &apos;/home/cloudera/workspace/trunk/EMBEDDED&apos;.&lt;/p&gt;

&lt;p&gt;Anyway, it looks like the core Jars are built, which is great &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Please let me know if I should close the issue.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Nir&lt;/p&gt;

</comment>
                            <comment id="13647146" author="scott_carey" created="Thu, 2 May 2013 00:56:35 +0000"  >&lt;p&gt;Thanks for the update!&lt;/p&gt;

&lt;p&gt;Yes, the maven archetypes at the end have some extra dependencies.  Lets not close this quite yet, but I&apos;ll lower the priority &amp;#8211; I won&apos;t worry about it for the next release.&lt;/p&gt;

&lt;p&gt;There may be something worth fixing in the archetype part of the build.  If not, then we can close this.&lt;/p&gt;</comment>
                            <comment id="13656537" author="martinkl" created="Mon, 13 May 2013 23:42:31 +0000"  >&lt;p&gt;FWIW (may be a red herring, but worth mentioning as a possibility since you say you&apos;re running in Eclipse): I&apos;ve had mysterious build and test failures when running command-line maven while Eclipse is open. If I quit Eclipse and then do a clean rebuild, it all runs smoothly. So it looks like there might be some bad interaction there.&lt;/p&gt;</comment>
                            <comment id="13657175" author="scott_carey" created="Tue, 14 May 2013 16:22:16 +0000"  >&lt;p&gt;Martin: Are you using M2E or maven:eclipse ?&lt;/p&gt;

&lt;p&gt;With M2E as long as eclipse is not rebuilding I can use the command line to do all but clean.  Both Eclipse and maven share the same output for compiled class files, so they can step on each-others toes but it is manageable.  This is the same experience I have with every maven project, Avro or otherwise, with M2E.&lt;br/&gt;
I haven&apos;t used the maven eclipse plugin in years, so I don&apos;t know much about that.&lt;/p&gt;</comment>
                            <comment id="13657229" author="martinkl" created="Tue, 14 May 2013 17:22:58 +0000"  >&lt;p&gt;Scott: Using &lt;tt&gt;mvn eclipse:eclipse&lt;/tt&gt; to generate project files. I think it&apos;s exactly the same problem as you describe (same output directory for class files). Not usually a problem, and certainly not Avro-specific. I just wanted to mention it as a possible cause of strange behaviour.&lt;/p&gt;</comment>
                            <comment id="16132158" author="busbey" created="Fri, 18 Aug 2017 13:10:32 +0000"  >&lt;p&gt;Please use the dev@ mailing list to troubleshoot compilation problems.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 Apr 2013 21:24:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k57b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325774</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1311] Java: Upgrade snappy-java dependency to 1.0.5</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1311</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;snappy-java 1.0.4 does not work with Mac + Java 7.  1.0.5-M4 is on maven, but it does not appear that there will be a final release of that.  1.1.0 is at -M3 status, and is being developed now.  &lt;/p&gt;

&lt;p&gt;Both of these work locally for me, when the dust settles we need to pick one before the next release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645318">AVRO-1311</key>
            <summary>Java: Upgrade snappy-java dependency to 1.0.5</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scott_carey">Scott Carey</assignee>
                                    <reporter username="scott_carey">Scott Carey</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2013 21:54:48 +0000</created>
                <updated>Tue, 20 Aug 2013 17:46:04 +0000</updated>
                            <resolved>Tue, 21 May 2013 04:08:08 +0000</resolved>
                                    <version>1.7.4</version>
                                    <fixVersion>1.7.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13646760" author="scott_carey" created="Wed, 1 May 2013 17:55:36 +0000"  >&lt;p&gt;1.0.5 may be released this week (based on -M4 see: &lt;a href=&quot;https://github.com/xerial/snappy-java/issues/6&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/xerial/snappy-java/issues/6&lt;/a&gt;)  but we may want to test it more first.&lt;/p&gt;

&lt;p&gt;1.0.5-M4 works for me (OSX 10.7.5, Java 7).&lt;/p&gt;

&lt;p&gt;Can some others test changing the snappy.version in lang/java/pom.xml to 1.0.5-M4?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;snappy.version&amp;gt;&lt;/span&gt;1.0.5-M4&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/snappy.version&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13660024" author="cutting" created="Thu, 16 May 2013 21:29:55 +0000"  >&lt;p&gt;Works for me on Ubuntu 12.04 with Java 7.&lt;/p&gt;</comment>
                            <comment id="13662511" author="scott_carey" created="Tue, 21 May 2013 00:33:45 +0000"  >&lt;p&gt;snappy-java 1.0.5 is out, with fixes to Java 7 on mac.&lt;br/&gt;
&lt;a href=&quot;http://repo1.maven.org/maven2/org/xerial/snappy/snappy-java/1.0.5/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo1.maven.org/maven2/org/xerial/snappy/snappy-java/1.0.5/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The attached patch ups the version from 1.0.4 to 1.0.5.&lt;/p&gt;

&lt;p&gt;I will commit this soon if there are no objections.&lt;/p&gt;</comment>
                            <comment id="13662658" author="scott_carey" created="Tue, 21 May 2013 04:08:08 +0000"  >&lt;p&gt;committed @ r1484656&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12583926" name="AVRO-1311.patch" size="540" author="scott_carey" created="Tue, 21 May 2013 00:33:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 May 2013 21:29:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k6r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1312] Make use of the sun.misc.Unsafe class in the IO streams implementation if a JDK supports it</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1312</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This is a follow-up of the &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1282&quot; title=&quot;Make use of the sun.misc.Unsafe class during serialization if a JDK supports it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1282&quot;&gt;&lt;del&gt;AVRO-1282&lt;/del&gt;&lt;/a&gt; issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1282&quot; title=&quot;Make use of the sun.misc.Unsafe class during serialization if a JDK supports it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1282&quot;&gt;&lt;del&gt;AVRO-1282&lt;/del&gt;&lt;/a&gt; has used Unsafe to significantly improve performance of Reflection-based serialization. But Unsafe can be also used to improve performance of IO streams, which would be beneficial not only for Reflection-based, but for all kinds of serializers. Experience with Kryo shows that it can boost performance even higher that the speedups provided by &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1282&quot; title=&quot;Make use of the sun.misc.Unsafe class during serialization if a JDK supports it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1282&quot;&gt;&lt;del&gt;AVRO-1282&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Pros:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Overall performance boost&lt;/li&gt;
	&lt;li&gt;Biggest speedups of this optimizations are expected for the arrays of primitive types, as they can be very efficiently written using bulk operations instead of writing their elements one by one.&lt;/li&gt;
	&lt;li&gt;It is possible to write directly into the off-heap memory buffers at the native speed, without using intermediate byte arrays. This can be interesting for Big Data apps, which often keep a lot of data off-heap&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Cons:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Unsafe can efficiently write only primitive types in their native byte order and using their fixed size. This is not quite compatible with Avro&apos;s format.&lt;br/&gt;
(While one can still use Unsafe to more efficiently write single elements even using their variable length encoding, the biggest benefits of bulk array serialization would be lost.)&lt;/li&gt;
	&lt;li&gt;Introducing this feature may require a definition of a new format for Avro. This format would be very fast, but not very space efficient as it would use fixed-size representation.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;BTW, initial tests where a sketch of the proposed optimization is applied only to Floats and Doubles has shown immediate boost of 35%. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12645375">AVRO-1312</key>
            <summary>Make use of the sun.misc.Unsafe class in the IO streams implementation if a JDK supports it</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="romixlev">Leo Romanoff</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 06:34:30 +0000</created>
                <updated>Fri, 18 Aug 2017 13:04:42 +0000</updated>
                                                                            <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k73r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1313] Java: Add system property for disabling sun.misc.Unsafe</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1313</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We should be able to disable use of sun.misc.Unsafe.&lt;/p&gt;

&lt;p&gt;I propose that if the system property &quot;avro.disable.unsafe&quot; is non-null, we use reflection rather than Unsafe.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645454">AVRO-1313</key>
            <summary>Java: Add system property for disabling sun.misc.Unsafe</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scott_carey">Scott Carey</assignee>
                                    <reporter username="scott_carey">Scott Carey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 16:21:35 +0000</created>
                <updated>Tue, 20 Aug 2013 17:46:05 +0000</updated>
                            <resolved>Thu, 2 May 2013 01:03:07 +0000</resolved>
                                                    <fixVersion>1.7.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13645732" author="scott_carey" created="Tue, 30 Apr 2013 17:10:37 +0000"  >&lt;p&gt;This patch adds the check for &quot;avro.disable.unsafe&quot;.&lt;/p&gt;

&lt;p&gt;When -Davro.disable.unsafe is added to the command line, performance drops as expected for field access, but array performance is still fast:&lt;/p&gt;

&lt;p&gt;Unsafe On:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                                                   test name     time    M entries/sec   M bytes/sec  bytes/cycle
                         ReflectRecordRead:   7405 ms       2.251        87.343        808498
                        ReflectRecordWrite:   4786 ms       3.482       135.121        808498
                      ReflectBigRecordRead:   7478 ms       1.337        82.089        767380
                     ReflectBigRecordWrite:   4984 ms       2.006       123.153        767380
                          ReflectFloatRead:   6927 ms       0.000       115.486       1000004
                         ReflectFloatWrite:   1087 ms       0.001       735.371       1000004
                         ReflectDoubleRead:   8678 ms       0.000       184.369       2000004
                        ReflectDoubleWrite:   2398 ms       0.000       666.980       2000004
                       ReflectIntArrayRead:  11756 ms       1.418        58.503        859709
                      ReflectIntArrayWrite:   3798 ms       4.388       181.070        859709
                      ReflectLongArrayRead:   6542 ms       1.274        98.481        805344
                     ReflectLongArrayWrite:   2189 ms       3.806       294.278        805344
                    ReflectDoubleArrayRead:   6316 ms       1.583       103.625        818144
                   ReflectDoubleArrayWrite:   1589 ms       6.292       411.827        818144
                     ReflectFloatArrayRead:  13986 ms       1.430        48.400        846172
                    ReflectFloatArrayWrite:   2953 ms       6.771       229.186        846172
               ReflectNestedFloatArrayRead:  16618 ms       1.203        40.733        846172
              ReflectNestedFloatArrayWrite:   4841 ms       4.131       139.820        846172
              ReflectNestedObjectArrayRead:  12905 ms       0.310        39.989        645104
             ReflectNestedObjectArrayWrite:   6868 ms       0.582        75.139        645104
          ReflectNestedLargeFloatArrayRead:  10141 ms       0.329        85.781       1087381
         ReflectNestedLargeFloatArrayWrite:   2049 ms       1.626       424.432       1087381
   ReflectNestedLargeFloatArrayBlockedRead:  10501 ms       0.317        83.899       1101357
  ReflectNestedLargeFloatArrayBlockedWrite:   5554 ms       0.600       158.634       1101357
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unsafe Off:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                                                   test name     time    M entries/sec   M bytes/sec  bytes/cycle
                         ReflectRecordRead:  13282 ms       1.255        48.694        808498
                        ReflectRecordWrite:   8981 ms       1.856        72.011        808498
                      ReflectBigRecordRead:  17118 ms       0.584        35.863        767380
                     ReflectBigRecordWrite:  13178 ms       0.759        46.584        767380
                          ReflectFloatRead:   6713 ms       0.000       119.160       1000004
                         ReflectFloatWrite:   2444 ms       0.000       327.229       1000004
                         ReflectDoubleRead:   8094 ms       0.000       197.677       2000004
                        ReflectDoubleWrite:   2133 ms       0.000       749.844       2000004
                       ReflectIntArrayRead:  12127 ms       1.374        56.712        859709
                      ReflectIntArrayWrite:   3832 ms       4.349       179.463        859709
                      ReflectLongArrayRead:   6312 ms       1.320       102.059        805344
                     ReflectLongArrayWrite:   2548 ms       3.269       252.785        805344
                    ReflectDoubleArrayRead:   7460 ms       1.340        87.726        818144
                   ReflectDoubleArrayWrite:   2048 ms       4.882       319.526        818144
                     ReflectFloatArrayRead:  11761 ms       1.700        57.554        846172
                    ReflectFloatArrayWrite:   3370 ms       5.935       200.871        846172
               ReflectNestedFloatArrayRead:  15946 ms       1.254        42.450        846172
              ReflectNestedFloatArrayWrite:   6429 ms       3.111       105.291        846172
              ReflectNestedObjectArrayRead:  17478 ms       0.229        29.527        645104
             ReflectNestedObjectArrayWrite:  12148 ms       0.329        42.480        645104
          ReflectNestedLargeFloatArrayRead:   9012 ms       0.370        96.524       1087381
         ReflectNestedLargeFloatArrayWrite:   3950 ms       0.844       220.223       1087381
   ReflectNestedLargeFloatArrayBlockedRead:  10390 ms       0.321        84.795       1101357
  ReflectNestedLargeFloatArrayBlockedWrite:   6972 ms       0.478       126.368       1101357
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;This also fixes a bug introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1282&quot; title=&quot;Make use of the sun.misc.Unsafe class during serialization if a JDK supports it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1282&quot;&gt;&lt;del&gt;AVRO-1282&lt;/del&gt;&lt;/a&gt; for reflection where non-public classes/fields could not be read or written when using reflection, but could with Unsafe.&lt;/p&gt;

&lt;p&gt;I will commit this soon if there are no objections.&lt;/p&gt;</comment>
                            <comment id="13645886" author="scott_carey" created="Tue, 30 Apr 2013 19:42:47 +0000"  >&lt;p&gt;Ready for review.&lt;/p&gt;</comment>
                            <comment id="13645954" author="cutting" created="Tue, 30 Apr 2013 20:45:28 +0000"  >&lt;p&gt;Should we add a reflect test with a private field?&lt;/p&gt;</comment>
                            <comment id="13646145" author="scott_carey" created="Tue, 30 Apr 2013 23:21:06 +0000"  >&lt;p&gt;Even better, the check at runtime when loading should check that it will work.&lt;/p&gt;

&lt;p&gt;This patch (-v2) changes the runtime test to have fields of all types and validates that it works with all of them before loading an implementation.&lt;/p&gt;

&lt;p&gt;Both Unsafe and Reflect cases of these code paths are covered in the Unit tests.&lt;/p&gt;</comment>
                            <comment id="13646591" author="cutting" created="Wed, 1 May 2013 13:57:26 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13647148" author="scott_carey" created="Thu, 2 May 2013 01:03:07 +0000"  >&lt;p&gt;Committed in revision 1478244.&lt;/p&gt;</comment>
                            <comment id="13647297" author="hudson" created="Thu, 2 May 2013 05:10:39 +0000"  >&lt;p&gt;Integrated in AvroJava #370 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/370/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/370/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1313&quot; title=&quot;Java: Add system property for disabling sun.misc.Unsafe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1313&quot;&gt;&lt;del&gt;AVRO-1313&lt;/del&gt;&lt;/a&gt;. Java: Add system property avro.disable.unsafe for disabling&lt;br/&gt;
    use of sun.misc.Unsafe. (Revision 1478244)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
scottcarey : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/reflect/FieldAccessReflect.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/reflect/ReflectionUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12581266" name="AVRO-1313-v2.patch" size="1748" author="scott_carey" created="Tue, 30 Apr 2013 23:21:06 +0000"/>
                            <attachment id="12581194" name="AVRO-1313.patch" size="1464" author="scott_carey" created="Tue, 30 Apr 2013 17:10:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Apr 2013 20:45:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k7lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326161</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1314] Java: Add @threadSafe annotation to maven plugins</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1314</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Our plugins are thread-safe, mark them as much so that warnings will not be printed when running parallel maven builds.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645502">AVRO-1314</key>
            <summary>Java: Add @threadSafe annotation to maven plugins</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scott_carey">Scott Carey</assignee>
                                    <reporter username="scott_carey">Scott Carey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 19:39:39 +0000</created>
                <updated>Tue, 20 Aug 2013 17:46:05 +0000</updated>
                            <resolved>Wed, 15 May 2013 21:00:35 +0000</resolved>
                                                    <fixVersion>1.7.5</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13645883" author="scott_carey" created="Tue, 30 Apr 2013 19:41:46 +0000"  >&lt;p&gt;Trivial patch that sets the Mojos to be tagged @threadSafe.&lt;/p&gt;</comment>
                            <comment id="13645885" author="scott_carey" created="Tue, 30 Apr 2013 19:42:07 +0000"  >&lt;p&gt;I&apos;ll commit this soon unless there are objections.&lt;/p&gt;</comment>
                            <comment id="13647151" author="scott_carey" created="Thu, 2 May 2013 01:14:48 +0000"  >&lt;p&gt;Attaching the correct patch.&lt;/p&gt;</comment>
                            <comment id="13658814" author="scott_carey" created="Wed, 15 May 2013 21:00:35 +0000"  >&lt;p&gt;I committed this @ r1483078&lt;/p&gt;</comment>
                            <comment id="13659202" author="hudson" created="Thu, 16 May 2013 04:11:25 +0000"  >&lt;p&gt;Integrated in AvroJava #373 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/373/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/373/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1314&quot; title=&quot;Java: Add @threadSafe annotation to maven plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1314&quot;&gt;&lt;del&gt;AVRO-1314&lt;/del&gt;&lt;/a&gt;. Java: add @threadSafe annotation to maven plugins. (Revision 1483078)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
scottcarey : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/IDLProtocolMojo.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/ProtocolMojo.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/SchemaMojo.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12581448" name="AVRO-1314.patch" size="1534" author="scott_carey" created="Thu, 2 May 2013 01:14:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 May 2013 04:11:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325864</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k7vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326209</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1315] Java: Schema Validation utilities</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1315</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1124&quot; title=&quot;RESTful service for holding schemas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1124&quot;&gt;AVRO-1124&lt;/a&gt; we needed Schema Validation utilities.  I have separated those out of that ticket as a stand-alone item.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645507">AVRO-1315</key>
            <summary>Java: Schema Validation utilities</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scott_carey">Scott Carey</assignee>
                                    <reporter username="scott_carey">Scott Carey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 19:55:54 +0000</created>
                <updated>Thu, 24 Jul 2014 20:16:23 +0000</updated>
                            <resolved>Mon, 9 Jun 2014 11:37:11 +0000</resolved>
                                                    <fixVersion>1.7.7</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>7</votes>
                                    <watches>18</watches>
                                                                <comments>
                            <comment id="13645908" author="scott_carey" created="Tue, 30 Apr 2013 20:04:43 +0000"  >&lt;p&gt;This incorporates the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;An additional public method on Symbol.java to detect whether a Symbol tree has an error in it.  In the case of a Symbol returned by schema resolution, this indicates that the schemas are not compatible.&lt;/li&gt;
	&lt;li&gt;An interface o.a.a.SchemaValidator that checks a schema against an Iterable of other schemas.  The notion of compatibility is left to the implementation.  Schemas in the Iterable are returned from most recent to oldest, if chronological order is applicable.&lt;/li&gt;
	&lt;li&gt;An interface o.a.a.SchemaValidationStrategy that validates one schema against another.  The notion of compatibility is left to the implementation.&lt;/li&gt;
	&lt;li&gt;A concrete SchemaValidator &amp;#8211; ValidateAll.  This takes a SchemaValidationStrategy as a constructor parameter and when its validate() method is called, uses the strategy for each item in the Iterable, in order.&lt;/li&gt;
	&lt;li&gt;A concrete SchemaValidator &amp;#8211; ValidateLatest.  This takes a SchemaValidationStrategy as a constructor parameter and when its validate() method is called, uses the strategy for only the first item in the Iterable.&lt;/li&gt;
	&lt;li&gt;A SchemaValidationBuilder for constructing SchemaValidators, with private implementations of SchemaValidationStrategy that can be configured:
	&lt;ul&gt;
		&lt;li&gt;Validate that the schema can read all others.&lt;/li&gt;
		&lt;li&gt;Validate that all others can read the schema.&lt;/li&gt;
		&lt;li&gt;Validate that the schema and all others are mutually compatible (can read each other).&lt;/li&gt;
		&lt;li&gt;Validate that the schema can read the latest.&lt;/li&gt;
		&lt;li&gt;Validate that the latest can read the schema.&lt;/li&gt;
		&lt;li&gt;Validate that the latest and the schema are mutually compatible.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;A few questions for discussion:&lt;/p&gt;

&lt;p&gt;I am tempted to hide the concrete implementations and not expose publicly.  In the forthcoming patch, all are hidden so that only the interfaces and builder are public and need to be supported public APIs.  Alternatively we can expose some of the SchemaValidator and SchemaValidationStrategy implementations as public.  I am tempted to start private and see how this implementation works out.&lt;/p&gt;
</comment>
                            <comment id="13646108" author="scott_carey" created="Tue, 30 Apr 2013 23:00:00 +0000"  >&lt;p&gt;Another option is to only have SchemaValidationStrategy &amp;#8211; the pair-wise validation &amp;#8211; in org.apache.avro.  The Validation over a list of &apos;previous&apos; schemas can stay in the schema-repo being developed in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1124&quot; title=&quot;RESTful service for holding schemas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1124&quot;&gt;AVRO-1124&lt;/a&gt;.  This would reduce what code is in the core avro package but might be more universally usable.&lt;/p&gt;</comment>
                            <comment id="13646113" author="scott_carey" created="Tue, 30 Apr 2013 23:03:39 +0000"  >&lt;p&gt;Patch implementing the design discussed above.&lt;/p&gt;</comment>
                            <comment id="13647896" author="kryzthov" created="Thu, 2 May 2013 20:56:16 +0000"  >&lt;p&gt;That looks great.&lt;br/&gt;
If validator and strategy implementations are hidden, I would probably want factory methods for those, to allow me to write custom ones that combine with those.&lt;br/&gt;
Maybe we could add a validator and a strategy that combines a set of validators/strategies.&lt;/p&gt;

&lt;p&gt;Other than that, the interfaces look good to me.&lt;/p&gt;

&lt;p&gt;For instance, here are some validators or strategies I may want to build in the future:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;enfore some schema style (eg. make sure new fields are optional/have default values);&lt;/li&gt;
	&lt;li&gt;ensure fields that have been removed are not inadvertently resurrected (that&apos;s a reason why I may want to actively remove former schemas).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13657301" author="kryzthov" created="Tue, 14 May 2013 18:03:54 +0000"  >&lt;p&gt;Scott, has there been any progress on this issue? May I help in any way?&lt;/p&gt;</comment>
                            <comment id="13659490" author="tomwhite" created="Thu, 16 May 2013 12:53:39 +0000"  >&lt;p&gt;This looks very useful. A couple of minor comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The test doesn&apos;t have any positive tests, i.e. where validation succeeds.&lt;/li&gt;
	&lt;li&gt;Nit: we don&apos;t need serialVersionUID in SchemaValidationException do we? Other classes don&apos;t have this field.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13659893" author="scott_carey" created="Thu, 16 May 2013 19:56:48 +0000"  >&lt;p&gt;Chrisophe:&lt;/p&gt;

&lt;p&gt;I&apos;ll add some factory methods for creating composite validators, or similar, to address your use case for composing custom validations with these.&lt;/p&gt;

&lt;p&gt;Tom:  &lt;br/&gt;
I&apos;ll add tests that explicitly test the positive case &amp;#8211; the positive cases are all covered now on the path to failure.&lt;br/&gt;
Re: serialVersionUID &amp;#8211; any Serializable class without one can be considered a bug.  Eclipse gives me a warning without it.  Its unlikely that a user will use Java serialization for these exceptions, but there is a chance.&lt;/p&gt;</comment>
                            <comment id="13659918" author="cutting" created="Thu, 16 May 2013 20:13:23 +0000"  >&lt;p&gt;Unless we have tests that check whether we update serialVersionUID every time we incompatibly alter the class then I don&apos;t see that specifying it does much good.  The default value is a hash of the fields &amp;amp; methods, which is conservative and probably safest.  An Eclipse warning doesn&apos;t influence me here.&lt;/p&gt;</comment>
                            <comment id="13659943" author="scott_carey" created="Thu, 16 May 2013 20:31:35 +0000"  >&lt;p&gt;The issue is that the default value is different on different JVMs/compilers, and that we break compatibility if there are any changes, even if they don&apos;t have any effect &amp;#8211; such as adding an additional constructor.  I felt that we would be more likely to cause the default value to change than to make a change that influenced serialization on such a trivial exception type.&lt;/p&gt;

&lt;p&gt;Low risk no matter which way we go; I&apos;d rather focus our energies elsewhere.  I&apos;ll remove it from the next patch.&lt;/p&gt;</comment>
                            <comment id="13732622" author="cutting" created="Wed, 7 Aug 2013 19:32:28 +0000"  >&lt;p&gt;It doesn&apos;t look like this will make 1.7.5, so pushing it to 1.8.0.&lt;/p&gt;</comment>
                            <comment id="13809836" author="jimjh" created="Thu, 31 Oct 2013 01:34:42 +0000"  >&lt;p&gt;It appears that &lt;tt&gt;Symbols#hasErrors&lt;/tt&gt; will get into a infinite recursion if the validator is applied on an array or map. For example,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;test.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Schema mpSchema = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Schema.Parser().parse(
    &lt;span class=&quot;code-quote&quot;&gt;&quot;{\&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;mapType\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;map\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;values\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;string\&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;
);

SchemaValidator validator = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SchemaValidatorBuilder().canReadStrategy().validateAll();
validator.validate(mpSchema, ImmutableList.of(mpSchema));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will cause &lt;tt&gt;Symbols#hasErrors&lt;/tt&gt; to get stuck inside the `REPEATER` case, since the repeater symbol refers to itself inside its production array. I found a fix that uses a TreeSet to maintain a collection of visited symbols, and will submit a patch shortly.&lt;/p&gt;</comment>
                            <comment id="13960481" author="felixgv" created="Fri, 4 Apr 2014 22:02:26 +0000"  >&lt;p&gt;Bump. Are there any updates on this?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scott_carey&quot; class=&quot;user-hover&quot; rel=&quot;scott_carey&quot;&gt;Scott Carey&lt;/a&gt;, are you guys using this code in production to validate new schemas?&lt;/p&gt;

&lt;p&gt;Anyone else has any comments, blessings, warnings or outstanding patch for this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ?&lt;/p&gt;</comment>
                            <comment id="13991803" author="tomwhite" created="Wed, 7 May 2014 13:29:36 +0000"  >&lt;p&gt;We hit the same infinite loop problem in &lt;a href=&quot;https://issues.cloudera.org/browse/CDK-410&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Kite&lt;/a&gt; that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jimjh&quot; class=&quot;user-hover&quot; rel=&quot;jimjh&quot;&gt;Jim Lim&lt;/a&gt; saw. I&apos;ve updated the latest patch on this JIRA with a fix, as well as a schema validation unit test that covers all Avro types (it fails without the fix), as well as a set of positive tests for schema validations.&lt;/p&gt;</comment>
                            <comment id="14013439" author="tomwhite" created="Fri, 30 May 2014 09:04:08 +0000"  >&lt;p&gt;I updated this patch a few weeks ago to fix an infinite loop and add tests but it may have gone unnoticed because of the ASF email outage. It would be good to get this into 1.7.7 - it&apos;s purely additive so shouldn&apos;t raise any compatibility concerns.&lt;/p&gt;</comment>
                            <comment id="14020398" author="cutting" created="Fri, 6 Jun 2014 21:24:15 +0000"  >&lt;p&gt;+1 This would be great to have.&lt;/p&gt;</comment>
                            <comment id="14022159" author="jira-bot" created="Mon, 9 Jun 2014 11:36:35 +0000"  >&lt;p&gt;Commit 1601345 from tomwhite@apache.org in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1601345&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1601345&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1315&quot; title=&quot;Java: Schema Validation utilities&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1315&quot;&gt;&lt;del&gt;AVRO-1315&lt;/del&gt;&lt;/a&gt;. Java: Schema Validation utilities. Contributed by scottcarey and tomwhite.&lt;/p&gt;</comment>
                            <comment id="14022190" author="tomwhite" created="Mon, 9 Jun 2014 11:37:12 +0000"  >&lt;p&gt;I just committed this. Thanks Scott!&lt;/p&gt;</comment>
                            <comment id="14024183" author="hudson" created="Mon, 9 Jun 2014 12:38:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #456 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/456/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/456/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1315&quot; title=&quot;Java: Schema Validation utilities&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1315&quot;&gt;&lt;del&gt;AVRO-1315&lt;/del&gt;&lt;/a&gt;. Java: Schema Validation utilities. Contributed by scottcarey and tomwhite. (tomwhite: rev 1601345)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/SchemaValidationException.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/SchemaValidationStrategy.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/SchemaValidator.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/SchemaValidatorBuilder.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/ValidateAll.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/ValidateCanBeRead.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/ValidateCanRead.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/ValidateLatest.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/ValidateMutualRead.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/io/parsing/Symbol.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/test/java/org/apache/avro/TestSchemaValidation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14051924" author="jira-bot" created="Thu, 3 Jul 2014 21:20:35 +0000"  >&lt;p&gt;Commit 1607748 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1607748&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1607748&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1315&quot; title=&quot;Java: Schema Validation utilities&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1315&quot;&gt;&lt;del&gt;AVRO-1315&lt;/del&gt;&lt;/a&gt;. Add missing license header.&lt;/p&gt;</comment>
                            <comment id="14051935" author="hudson" created="Thu, 3 Jul 2014 21:33:41 +0000"  >&lt;p&gt;FAILURE: Integrated in AvroJava #464 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/464/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/464/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1315&quot; title=&quot;Java: Schema Validation utilities&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1315&quot;&gt;&lt;del&gt;AVRO-1315&lt;/del&gt;&lt;/a&gt;. Add missing license header. (cutting: rev 1607748)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/SchemaValidationStrategy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12598315">AVRO-1124</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643751" name="AVRO-1315.patch" size="26263" author="tomwhite" created="Wed, 7 May 2014 13:29:36 +0000"/>
                            <attachment id="12581260" name="AVRO-1315.patch" size="25133" author="scott_carey" created="Tue, 30 Apr 2013 23:03:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 May 2013 20:56:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k7x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326214</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
