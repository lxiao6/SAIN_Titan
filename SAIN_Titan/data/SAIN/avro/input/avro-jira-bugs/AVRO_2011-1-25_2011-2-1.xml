<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:15:05 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-1-25+AND+created+%3C%3D+2011-2-1+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="5" total="5"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-747] NettyTransceiver: release semaphores on close so that clients are not blocked.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-747</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I use Avro RPC with the NettyTransceiver.&lt;/p&gt;

&lt;p&gt;When I kill the server, often the client hangs, jstack shows the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;pool-6-thread-1&quot; prio=10 tid=0x09fef000 nid=0x3382 waiting on condition [0x76fc7000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  &amp;lt;0xa1df2e40&amp;gt; (a java.util.concurrent.Semaphore$NonfairSync)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:969)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1281)
        at java.util.concurrent.Semaphore.acquire(Semaphore.java:286)
        at org.apache.avro.ipc.NettyTransceiver$CallFuture.get(NettyTransceiver.java:207)
        at org.apache.avro.ipc.NettyTransceiver.transceive(NettyTransceiver.java:137)
        at org.apache.avro.ipc.Requestor.request(Requestor.java:123)
        - locked &amp;lt;0xa20986c0&amp;gt; (a org.apache.avro.specific.SpecificRequestor)
        at org.apache.avro.specific.SpecificRequestor.invoke(SpecificRequestor.java:52)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not that this matters much, but the client application is written such that it discovers the available servers via ZooKeeper. When a server disappears, it calls close on the corresponding NettyTransceiver.&lt;/p&gt;

&lt;p&gt;I have adjusted the NettyTransceiver.close() method to release any remaining semaphores, the same as is done in the exceptionCaught method of the UpstreamHandler. This solves the problem for me.&lt;/p&gt;

&lt;p&gt;Alternatively, we could handle channel close events in handleUpstream(), but I&apos;m not sure if Netty automatically reconnects if the server re-appears, in which case this wouldn&apos;t be a good idea. OTOH, if the server would never come back, client threads could hang forever?&lt;/p&gt;

&lt;p&gt;Patch in attachment, against svn r1064125.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12496944">AVRO-747</key>
            <summary>NettyTransceiver: release semaphores on close so that clients are not blocked.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bruno">Bruno Dumon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Jan 2011 14:11:33 +0000</created>
                <updated>Fri, 12 Aug 2011 20:23:46 +0000</updated>
                            <resolved>Thu, 30 Jun 2011 19:32:32 +0000</resolved>
                                    <version>1.5.0</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12992016" author="bruno" created="Tue, 8 Feb 2011 15:51:32 +0000"  >&lt;p&gt;A problem with my previous patch is that when it releases the semaphore, NettyTransceiver.transceive() will return null. I thought this was fine, since this was already done in case of the other catched exceptions. However, this will give problems further on (NPE in ByteBufferInputStream) since apparently the transceive method is not supposed to return null.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a newer patch that throws an IOException instead.&lt;/p&gt;

&lt;p&gt;BTW, releaseSemaphore is also called by NettyClientAvroHandler.exceptionCaught, we should probably pass on the exception reported there.&lt;/p&gt;

&lt;p&gt;It wouldn&apos;t harm if someone who actually knows Netty had a look at this.&lt;/p&gt;</comment>
                            <comment id="12992017" author="bruno" created="Tue, 8 Feb 2011 15:53:08 +0000"  >&lt;p&gt;Patch against r1068446. Also includes the small change proposed in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-754&quot; title=&quot;NettyTransceiver: allow to provide custom ChannelFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-754&quot;&gt;&lt;del&gt;AVRO-754&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12999100" author="cutting" created="Thu, 24 Feb 2011 22:46:15 +0000"  >&lt;p&gt;This looks fine to me, although I know little about Netty.  Could you please add a test?  Thanks!&lt;/p&gt;</comment>
                            <comment id="13054746" author="jbaldassari" created="Fri, 24 Jun 2011 23:19:04 +0000"  >&lt;p&gt;As of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-539&quot; title=&quot;Allow asynchronous clients to specify a callback to be run when server processing completes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-539&quot;&gt;&lt;del&gt;AVRO-539&lt;/del&gt;&lt;/a&gt;, CallFuture no longer contains a Semaphore.  However, I think this enhancement still applies.  If the transceiver is explicitly closed (as opposed to the connection being lost for some other reason), any pending requests should be canceled.  I should be able to roll this behavior into the patch I just submitted for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-842&quot; title=&quot;Internal NPE when accessing proxy to a closed server endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-842&quot;&gt;&lt;del&gt;AVRO-842&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13058024" author="cutting" created="Thu, 30 Jun 2011 19:32:32 +0000"  >&lt;p&gt;This is incorporated in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-842&quot; title=&quot;Internal NPE when accessing proxy to a closed server endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-842&quot;&gt;&lt;del&gt;AVRO-842&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12470599" name="avro-747v2-patch.txt" size="2216" author="bruno" created="Tue, 8 Feb 2011 15:53:08 +0000"/>
                            <attachment id="12469548" name="netty-transceiver-release-semaphores-on-close-patch.txt" size="689" author="bruno" created="Thu, 27 Jan 2011 14:12:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Feb 2011 22:46:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e27z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-748] Python library does not include the implicit &apos;string&apos; error type for messages</title>
                <link>https://issues.apache.org/jira/browse/AVRO-748</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Here&apos;s a trivial test case:&lt;/p&gt;


&lt;p&gt;schema = &quot;&quot;&quot;&lt;br/&gt;
{&lt;br/&gt;
  &quot;namespace&quot;: &quot;test&quot;,&lt;br/&gt;
  &quot;protocol&quot;: &quot;test&quot;,&lt;br/&gt;
  &quot;types&quot;: [],&lt;br/&gt;
  &quot;messages&quot;: {&quot;test_method&quot;: {&lt;br/&gt;
               &quot;request&quot;: [],&lt;br/&gt;
               &quot;response&quot;: &quot;string&quot;}}&lt;br/&gt;
}&lt;br/&gt;
&quot;&quot;&quot;&lt;/p&gt;

&lt;p&gt;from avro.protocol import parse&lt;br/&gt;
protocol = parse(schema)&lt;br/&gt;
assert protocol.messages&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;test_method&amp;#39;&amp;#93;&lt;/span&gt;.errors is not None&lt;/p&gt;


&lt;p&gt;This may be a bit white-box; the problem actually manifests in avro.ipc.Responder.respond (line 338), when making a call to write_error with the &quot;writers_schema&quot; being &quot;local_message.errors&quot;. local_message.errors is None, and it blows up while validating the schema.&lt;/p&gt;

&lt;p&gt;This only seems to happen when there is &lt;b&gt;no&lt;/b&gt; errors field in the message; if an errors field is provided, it still doesn&apos;t explicitly include &quot;string&quot; in the &quot;errors&quot; field, but it does seem to allow the error message to be passed back. So maybe this is an error in the protocol parser, or maybe it&apos;s an error in the code that actually tries to write the error response.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu, Python 2.6.6&lt;/p&gt;</environment>
        <key id="12496997">AVRO-748</key>
            <summary>Python library does not include the implicit &apos;string&apos; error type for messages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radix">Christopher Armstrong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Jan 2011 23:13:37 +0000</created>
                <updated>Thu, 27 Jan 2011 23:28:39 +0000</updated>
                                            <version>1.4.1</version>
                                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12987825" author="radix" created="Thu, 27 Jan 2011 23:28:39 +0000"  >&lt;p&gt;Actually, there&apos;s a similar error in the code which reads errors, so I would say that the best place to fix this is in the parser. I made it so protocol.Message._&lt;em&gt;init&lt;/em&gt;_ sets the &apos;errors&apos; property to the result of a call to self._parse_errors with an empty list, and that seemed to work for me.&lt;/p&gt;

&lt;p&gt;Sorry, I can&apos;t provide a patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e287:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80123</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-749] Jansson build artefacts shouldn&apos;t be installed</title>
                <link>https://issues.apache.org/jira/browse/AVRO-749</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The C library contains an internal copy of the Jansson JSON library.  Our copy should be strictly internal, but the autotools build currently installs the Jansson include file and pkg-config description.  Those shouldn&apos;t be part of the installation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12497069">AVRO-749</key>
            <summary>Jansson build artefacts shouldn&apos;t be installed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcreager">Douglas Creager</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jan 2011 15:38:35 +0000</created>
                <updated>Sat, 12 Mar 2011 00:32:52 +0000</updated>
                            <resolved>Mon, 31 Jan 2011 12:29:48 +0000</resolved>
                                                    <fixVersion>1.5.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12988117" author="dcreager" created="Fri, 28 Jan 2011 15:44:34 +0000"  >&lt;p&gt;Here&apos;s a patch&lt;/p&gt;</comment>
                            <comment id="12988742" author="brucem" created="Mon, 31 Jan 2011 12:19:54 +0000"  >&lt;p&gt;I&apos;m willing to apply this now ... but I think we should revisit how Jansson is handled entirely in the autotools build.&lt;/p&gt;

&lt;p&gt;I&apos;ll open a separate issue and assign it to you?  You can assign it back if not interested or no time.&lt;/p&gt;</comment>
                            <comment id="12988743" author="brucem" created="Mon, 31 Jan 2011 12:29:48 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469683" name="0001-Don-t-install-Jansson-files.patch" size="1285" author="dcreager" created="Fri, 28 Jan 2011 15:44:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Jan 2011 12:19:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4157</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e28f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-750] pkg-config file</title>
                <link>https://issues.apache.org/jira/browse/AVRO-750</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;It would be nice for the library to have a pkg-config file.  That would make it easier to link with the library in other projects.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12497072">AVRO-750</key>
            <summary>pkg-config file</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcreager">Douglas Creager</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jan 2011 15:51:29 +0000</created>
                <updated>Sat, 12 Mar 2011 00:32:51 +0000</updated>
                            <resolved>Tue, 15 Feb 2011 15:28:01 +0000</resolved>
                                                    <fixVersion>1.5.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12988119" author="dcreager" created="Fri, 28 Jan 2011 15:51:43 +0000"  >&lt;p&gt;Et voila&lt;/p&gt;</comment>
                            <comment id="12988744" author="brucem" created="Mon, 31 Jan 2011 12:32:49 +0000"  >&lt;p&gt;Please update this to work with the CMake build?&lt;/p&gt;</comment>
                            <comment id="12988759" author="dcreager" created="Mon, 31 Jan 2011 13:43:30 +0000"  >&lt;p&gt;Here you go &#8212; works with the CMake build now too.&lt;/p&gt;</comment>
                            <comment id="12994839" author="dcreager" created="Tue, 15 Feb 2011 15:28:01 +0000"  >&lt;p&gt;Committed to SVN&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469684" name="0001-Install-pkg-config-description.patch" size="1947" author="dcreager" created="Fri, 28 Jan 2011 15:51:43 +0000"/>
                            <attachment id="12469820" name="with-cmake.patch" size="2480" author="dcreager" created="Mon, 31 Jan 2011 13:43:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Jan 2011 12:32:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4156</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e28n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-751] Store schema reference in datum instances</title>
                <link>https://issues.apache.org/jira/browse/AVRO-751</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This is a patch that lets us keep track of which schema an avro_datum_t is an instance of.  This is a breaking API change, but I think it makes the API simpler and more logical.  From the commit message:&lt;/p&gt;

&lt;p&gt;    We now keep track of which particular schema an avro_datum_t is an&lt;br/&gt;
    instance of.  For primitive values, there&apos;s only one possible schema,&lt;br/&gt;
    and so we don&apos;t store an explicit reference.  For compound values, the&lt;br/&gt;
    datum constructors now take in a schema parameter, which is stored in&lt;br/&gt;
    the avro_datum_t instance.  For records, enums, and fixeds, this means&lt;br/&gt;
    that we don&apos;t need to store the name of the schema type anymore, since&lt;br/&gt;
    we can get this from the schema.&lt;/p&gt;

&lt;p&gt;    There were also several functions, which operate on datum instances,&lt;br/&gt;
    which needed to take in a schema parameter &#8212; avro_datum_to_json, as an&lt;br/&gt;
    example.  Those parameters aren&apos;t needed anymore, since the datum&lt;br/&gt;
    carries a reference to its own schema already.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12497083">AVRO-751</key>
            <summary>Store schema reference in datum instances</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcreager">Douglas Creager</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jan 2011 17:24:12 +0000</created>
                <updated>Sat, 12 Mar 2011 00:32:55 +0000</updated>
                            <resolved>Fri, 25 Feb 2011 15:45:15 +0000</resolved>
                                                    <fixVersion>1.5.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12988747" author="brucem" created="Mon, 31 Jan 2011 12:44:08 +0000"  >&lt;p&gt;Can you explain a bit more what the concrete gain is here?&lt;/p&gt;</comment>
                            <comment id="12989294" author="cutting" created="Tue, 1 Feb 2011 17:45:33 +0000"  >&lt;p&gt;This is the way that Java implements this.  It is consistent and convenient to keep a reference to the schema, providing full type information at runtime.  It slightly increases the size of only the map and array headers.&lt;/p&gt;</comment>
                            <comment id="12989671" author="dcreager" created="Wed, 2 Feb 2011 15:34:36 +0000"  >&lt;p&gt;On the C side, we were keeping a strdup-ed copy of the type name for records, enums, and fixeds.  (And being inconsistent about whether we were also storing the namespace.)  This also reduces the memory footprint by only storing a reference to the schema, and getting the names from that.&lt;/p&gt;</comment>
                            <comment id="12989675" author="brucem" created="Wed, 2 Feb 2011 15:41:21 +0000"  >&lt;p&gt;That sounds like a good win.&lt;/p&gt;

&lt;p&gt;This conflicts with work that I&apos;m hoping to finish up by tomorrow for a Win32 port ... so we&apos;ll have to resolve that in the next couple of days.&lt;/p&gt;</comment>
                            <comment id="12989883" author="dcreager" created="Wed, 2 Feb 2011 23:40:11 +0000"  >&lt;p&gt;Cool.  I&apos;m at the Strata conference this week, so my availability might be spotty, but let me know how I can help.  Is there a JIRA entry for the Win32 port yet?&lt;/p&gt;</comment>
                            <comment id="12999413" author="dcreager" created="Fri, 25 Feb 2011 15:45:15 +0000"  >&lt;p&gt;I&apos;ve gone ahead and committed this to SVN, to make sure that the API change gets in for 1.5.0.  We can open up a new issue to address the conflict with your Win32 patch for 1.5.1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469693" name="0001-Store-schema-reference-in-datum-instances.patch" size="39905" author="dcreager" created="Fri, 28 Jan 2011 17:24:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Jan 2011 12:44:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e28v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
