<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:14:04 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2010-6-9+AND+created+%3C%3D+2010-6-16+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="8" total="8"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-571] Fix how we handle out-of-bounds indexes for union and enum parsing in Python</title>
                <link>https://issues.apache.org/jira/browse/AVRO-571</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12466606">AVRO-571</key>
            <summary>Fix how we handle out-of-bounds indexes for union and enum parsing in Python</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hammer">Jeff Hammerbacher</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jun 2010 22:36:21 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:53 +0000</updated>
                            <resolved>Wed, 9 Jun 2010 23:18:40 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12877260" author="hammer" created="Wed, 9 Jun 2010 23:18:40 +0000"  >&lt;p&gt;Committed to trunk with revision 953186.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446730" name="AVRO-571.patch" size="2093" author="hammer" created="Wed, 9 Jun 2010 23:15:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e153:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79947</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-572] Create a Maven plugin goal and Ant task to generate an avpr file from a avdl file</title>
                <link>https://issues.apache.org/jira/browse/AVRO-572</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro currently can generate Java source from an an AvroIDL file (*.avdl) but can not generate an avro protocol file from an avdl.  This is a request to create build system tools for this process.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12466614">AVRO-572</key>
            <summary>Create a Maven plugin goal and Ant task to generate an avpr file from a avdl file</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jun 2010 02:50:50 +0000</created>
                <updated>Wed, 6 Jul 2011 00:54:44 +0000</updated>
                                                                            <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12877511" author="cutting" created="Thu, 10 Jun 2010 18:03:07 +0000"  >&lt;p&gt;Do you mean an Ant task?  If not, we probably need one of those too.&lt;/p&gt;</comment>
                            <comment id="12888838" author="phunt" created="Thu, 15 Jul 2010 15:59:57 +0000"  >&lt;p&gt;I think this is a dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-159&quot; title=&quot;maven-avro-plugin: Allow maven builds to use avro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-159&quot;&gt;&lt;del&gt;AVRO-159&lt;/del&gt;&lt;/a&gt; - I&apos;ve already submitted a patch there, but it needs to be integrated into the build system (see the comments on that jira)&lt;/p&gt;</comment>
                            <comment id="12888869" author="hammer" created="Thu, 15 Jul 2010 17:49:11 +0000"  >&lt;p&gt;Hey Patrick,&lt;/p&gt;

&lt;p&gt;It depends on the scope of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-159&quot; title=&quot;maven-avro-plugin: Allow maven builds to use avro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-159&quot;&gt;&lt;del&gt;AVRO-159&lt;/del&gt;&lt;/a&gt;, as there are two stages where plugins are needed: first, to go from Avro IDL to .avpr or .avsc, and second, when using code generation, to generate code from the .avpr and .avsc files. I believe your tasks at &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-159&quot; title=&quot;maven-avro-plugin: Allow maven builds to use avro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-159&quot;&gt;&lt;del&gt;AVRO-159&lt;/del&gt;&lt;/a&gt; only covered the latter stage, but if you intend to cover the former as well, more power to you.&lt;/p&gt;

&lt;p&gt;We should probably, as Doug notes, have tasks for both Ant and Maven, though I think Maven can just use Ant tasks.&lt;/p&gt;

&lt;p&gt;Later,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12971872" author="scott_carey" created="Wed, 15 Dec 2010 22:39:23 +0000"  >&lt;p&gt;Not fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-159&quot; title=&quot;maven-avro-plugin: Allow maven builds to use avro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-159&quot;&gt;&lt;del&gt;AVRO-159&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-647&quot; title=&quot;Break avro.jar into avro.jar, avro-dev.jar and avro-hadoop.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-647&quot;&gt;&lt;del&gt;AVRO-647&lt;/del&gt;&lt;/a&gt;.     &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-647&quot; title=&quot;Break avro.jar into avro.jar, avro-dev.jar and avro-hadoop.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-647&quot;&gt;&lt;del&gt;AVRO-647&lt;/del&gt;&lt;/a&gt; added a maven plugin for compiling directly from avdl to java with no intermediate avpr or avsc.&lt;/p&gt;</comment>
                            <comment id="12975652" author="hammer" created="Tue, 28 Dec 2010 22:03:24 +0000"  >&lt;p&gt;Hey Scott,&lt;/p&gt;

&lt;p&gt;You mention that &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-647&quot; title=&quot;Break avro.jar into avro.jar, avro-dev.jar and avro-hadoop.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-647&quot;&gt;&lt;del&gt;AVRO-647&lt;/del&gt;&lt;/a&gt; added a plugin for compiling directly from avdl to java; where can I find documentation on how to use this plugin?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12975664" author="scott_carey" created="Tue, 28 Dec 2010 22:38:49 +0000"  >&lt;p&gt;Documentation will be addressed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-714&quot; title=&quot;New Java build: Documentation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-714&quot;&gt;&lt;del&gt;AVRO-714&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Currently, the best documentation is the trunk build process and the source code.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/avro/trunk/lang/java/ipc/pom.xml?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/avro/trunk/lang/java/ipc/pom.xml?view=markup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;is an example usage, and the source:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/avro/trunk/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/IDLProtocolMojo.java?view=markup&amp;amp;revision=1049734&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/avro/trunk/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/IDLProtocolMojo.java?view=markup&amp;amp;revision=1049734&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12975666" author="hammer" created="Tue, 28 Dec 2010 22:47:18 +0000"  >&lt;p&gt;Cool, thanks. Will we publish some jars to the Avro 1.4.1 repositories for compiling with Maven, by any chance, or will we need to wait until 1.5.0 to use this goodness?&lt;/p&gt;</comment>
                            <comment id="12975877" author="scott_carey" created="Wed, 29 Dec 2010 19:18:08 +0000"  >&lt;p&gt;There are no current plans to back-port it, although I think the source of the current avro-maven-plugin would be compatible with 1.4.1 so it would mostly be a matter of packaging and tweaking the 1.4.x ant build to produce a separate artifact with those 4 classes and the appropriate pom.xml.   Its not much code, but it does have to be its own jar file.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12472990">AVRO-647</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12438616">AVRO-159</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12497727">AVRO-758</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Jun 2010 18:03:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e15b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-573] Need to include Handshake Response when handling a system error on the Java server side</title>
                <link>https://issues.apache.org/jira/browse/AVRO-573</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;System error is not handling everything right now. Details in the comments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466711">AVRO-573</key>
            <summary>Need to include Handshake Response when handling a system error on the Java server side</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jun 2010 05:16:11 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:53 +0000</updated>
                            <resolved>Wed, 28 Jul 2010 19:46:09 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>java</component>
                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12877724" author="hammer" created="Fri, 11 Jun 2010 06:00:04 +0000"  >&lt;p&gt;Let&apos;s say, for example, that I have an Avro implementation of an Avro protocol that is misbehaving slightly. One of the message implementations declares that it throws, for example, an AIOError, but during some processing in that message, a RuntimeException (say an NPE) gets thrown. Now, this has never happened in my code, because I statically compile future states of the universe before shipping. But hypothetically.&lt;/p&gt;

&lt;p&gt;In ipc/Responder.java, on line 132, inside of the respond method, we entry a try/catch clause. Inside of this try/catch clause, we try calling whichever message is indicated by the request. If, in the body of that message, we throw an NPE, the catch clause will catch it and record the NPE as the &quot;error&quot; variable. Later, in line 149 of the same method, we have an if/else clause. We check to ensure the error is not null, and if it is not, we call writeError with the &quot;error&quot; variable as the object to be written. Since this object is of type NPE, which was not one of the errors declared by the message in the Avro protocol, we throw an error while trying to write the error, I think. Which is fine; we&apos;ve now triggered a system error.&lt;/p&gt;

&lt;p&gt;Inside of the catch block where we handle system errors, however, I believe we&apos;re doing something bad: we&apos;re creating a new ByteBufferOutputStream bbo, which blows away our old bbo. Our old bbo, however, had some useful stuff in it that we&apos;ve failed to recreate: the HandshakeResponse. Thus any client trying to read a system error appears SOL&lt;/p&gt;

&lt;p&gt;One thing I don&apos;t get, and I&apos;m having trouble instrumenting to figure out why it is happening because I don&apos;t understand Maven, is that the logs write the &quot;system error&quot; twice; so somehow, for a single RPC, we&apos;re writing this system error log entry twice:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10/06/10 22:21:59 WARN ipc.Responder: system error
org.apache.avro.AvroRuntimeException: Not in union [&quot;string&quot;,{&quot;type&quot;:&quot;error&quot;,&quot;name&quot;:&quot;AIOError&quot;,&quot;namespace&quot;:&quot;org.apache.hadoop.hbase.avro.generated&quot;,&quot;fields&quot;:[{&quot;name&quot;:&quot;message&quot;,&quot;type&quot;:&quot;string&quot;}]}]: java.lang.NullPointerException
	at org.apache.avro.generic.GenericData.resolveUnion(GenericData.java:340)
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:67)
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:55)
	at org.apache.avro.specific.SpecificResponder.writeError(SpecificResponder.java:81)
	at org.apache.avro.ipc.Responder.respond(Responder.java:137)
	at org.apache.avro.ipc.ResponderServlet.doPost(ResponderServlet.java:48)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
	at org.mortbay.jetty.Server.handle(Server.java:326)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
	at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:943)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
	at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
10/06/10 22:21:59 WARN ipc.Responder: system error
org.apache.avro.AvroRuntimeException: Not in union [&quot;string&quot;,{&quot;type&quot;:&quot;error&quot;,&quot;name&quot;:&quot;AIOError&quot;,&quot;namespace&quot;:&quot;org.apache.hadoop.hbase.avro.generated&quot;,&quot;fields&quot;:[{&quot;name&quot;:&quot;message&quot;,&quot;type&quot;:&quot;string&quot;}]}]: java.lang.NullPointerException
	at org.apache.avro.generic.GenericData.resolveUnion(GenericData.java:340)
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:67)
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:55)
	at org.apache.avro.specific.SpecificResponder.writeError(SpecificResponder.java:81)
	at org.apache.avro.ipc.Responder.respond(Responder.java:137)
	at org.apache.avro.ipc.ResponderServlet.doPost(ResponderServlet.java:48)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
	at org.mortbay.jetty.Server.handle(Server.java:326)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
	at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:943)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
	at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12877727" author="hammer" created="Fri, 11 Jun 2010 06:09:14 +0000"  >&lt;p&gt;I&apos;m not exactly sure what the correct behavior might be here; we may have blown up while processing the handshake, so we certainly don&apos;t want to try that again; should we just hardcode CLIENT as the match value?&lt;/p&gt;</comment>
                            <comment id="12877848" author="cutting" created="Fri, 11 Jun 2010 16:40:29 +0000"  >&lt;p&gt;We probably need a match=ERROR in HandshakeResponse.  Arguably it&apos;s a back-compatible change, since it will cause applications to fail with an enum-out-of-bounds error rather than some other error.&lt;/p&gt;

&lt;p&gt;Here&apos;s a proposal:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;move the handshake to it&apos;s own try block.  in case of error, write a match=ERROR response&lt;/li&gt;
	&lt;li&gt;add mark() &amp;amp; reset() methods to ByteBufferOutputStream(), to save &amp;amp; restore its position&lt;/li&gt;
	&lt;li&gt;call bbo.mark() after the handshake response is written&lt;/li&gt;
	&lt;li&gt;call bbo.reset() in the catch clause before writing system error&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;How&apos;s that sound?&lt;/p&gt;</comment>
                            <comment id="12877941" author="hammer" created="Fri, 11 Jun 2010 19:56:28 +0000"  >&lt;p&gt;Hey Doug,&lt;/p&gt;

&lt;p&gt;That sounds reasonable, but could you complete the description of the match=ERROR response? Should it be the same as CLIENT (e.g. give a server protocol and hash)?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12877951" author="cutting" created="Fri, 11 Jun 2010 20:18:21 +0000"  >&lt;p&gt;I don&apos;t think a match=ERROR should be required to include the server&apos;s protocol or hash.&lt;br/&gt;
Imagine a misconfigured server that cannot manage to locate its protocol for, e.g., a requested URL.&lt;br/&gt;
Ideally this might throw an HTTP error, but it might also result in an NPE within Avro.&lt;br/&gt;
It&apos;d be nice if a client didn&apos;t hang or fail strangely in such cases.&lt;/p&gt;

&lt;p&gt;We should probably specify a metadata key for an error message.  Does that sound reasonable?&lt;/p&gt;</comment>
                            <comment id="12878206" author="hammer" created="Sat, 12 Jun 2010 04:15:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think a match=ERROR should be required to include the server&apos;s protocol or hash.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yep that makes sense.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We should probably specify a metadata key for an error message. Does that sound reasonable?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What would be the contents of the value portion?&lt;/p&gt;</comment>
                            <comment id="12878758" author="cutting" created="Mon, 14 Jun 2010 21:42:27 +0000"  >&lt;p&gt;&amp;gt; What would be the contents of the value portion?&lt;/p&gt;

&lt;p&gt;A system error message, in UTF-8.  So if for some reason the handshake process itself generates, e.g., a NullPointerException, you&apos;ll get a HandhakeResponse with match=ERROR and &quot;avro.error.message&quot; set in the response&apos;s metadata to &quot;NullPointerException&quot;.  Make sense?&lt;/p&gt;</comment>
                            <comment id="12879067" author="hammer" created="Tue, 15 Jun 2010 18:45:36 +0000"  >&lt;p&gt;So in the client we&apos;d skip the server protocol and hash reading, look for a specific metadata key, and then bail on trying to read the message as well (since we don&apos;t have a protocol)? Sounds okay-ish.&lt;/p&gt;</comment>
                            <comment id="12879070" author="cutting" created="Tue, 15 Jun 2010 18:58:38 +0000"  >&lt;p&gt;&amp;gt; So in the client we&apos;d skip the server protocol and hash reading&lt;/p&gt;

&lt;p&gt;Those are both already optional in the HandshakeResponse, so this should require no change.&lt;/p&gt;

&lt;p&gt;&amp;gt; look for a specific metadata key&lt;/p&gt;

&lt;p&gt;Only if you want to generate a pretty error message.&lt;/p&gt;

&lt;p&gt;&amp;gt; and then bail on trying to read the message as well (since we don&apos;t have a protocol)?&lt;/p&gt;

&lt;p&gt;This is in logic that&apos;s already handling each value of HandshakeResponse.match.  Some cases already don&apos;t read the message (match=NONE).  So that logic could add a new case to handle match=ERROR.  Or, if that logic already throws an error when the match type is unrecognized then it would not need to be changed at all, unless you want a more descriptive error to be thrown.&lt;/p&gt;

&lt;p&gt;&amp;gt; Sounds okay-ish.&lt;/p&gt;

&lt;p&gt;Do you have an alternate proposal or suggested improvements?&lt;/p&gt;
</comment>
                            <comment id="12890957" author="cutting" created="Wed, 21 Jul 2010 23:59:46 +0000"  >&lt;p&gt;It seems that there were no tests for system errors in Java, and that they were broken.  I&apos;m not sure what I was proposing earlier or why, but here&apos;s a patch that adds java tests for system errors and fixes the bugs detected.  With this applied, a remote system error is thrown locally as an AvroRuntimeException rather than an AvroRemoteException.&lt;/p&gt;</comment>
                            <comment id="12890981" author="hammer" created="Thu, 22 Jul 2010 01:02:54 +0000"  >&lt;p&gt;Doug,&lt;/p&gt;

&lt;p&gt;The problem I turned up was in ipc/Responder.java, and was described by:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Inside of the catch block where we handle system errors, however, I believe we&apos;re doing something bad: we&apos;re creating a new ByteBufferOutputStream bbo, which blows away our old bbo. Our old bbo, however, had some useful stuff in it that we&apos;ve failed to recreate: the HandshakeResponse. Thus any client trying to read a system error appears SOL&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did a quick glance at the patch and don&apos;t see any change to ipc/Responder.java, so I&apos;m not sure if the new tests (which are great!) are hitting the same problem I&apos;m seeing above. I&apos;ll get out my test environment and see what I find.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12891230" author="cutting" created="Thu, 22 Jul 2010 16:33:18 +0000"  >&lt;p&gt;&amp;gt; blows away our old bbo. Our old bbo, however, had some useful stuff in it&lt;br/&gt;
&amp;gt; I did a quick glance at the patch and don&apos;t see any change to ipc/Responder.java,&lt;/p&gt;

&lt;p&gt;That was changed in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-578&quot; title=&quot;Add RPC Payload to RPCContext class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-578&quot;&gt;&lt;del&gt;AVRO-578&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=958149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=958149&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The handshake response data is now copied from the bbo before this, so this is no longer a potential problem.&lt;br/&gt;
There were several other problems handling system errors that the tests exposed that I fix in the patch.&lt;/p&gt;</comment>
                            <comment id="12893064" author="hammer" created="Wed, 28 Jul 2010 05:00:28 +0000"  >&lt;p&gt;Hey Doug,&lt;/p&gt;

&lt;p&gt;I can confirm that this patch works nicely with the Python client currently in trunk. When throwing an unexpected error in the Java Responder, I get this error in my client:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;avro.ipc.AvroRemoteException: org.apache.avro.AvroRuntimeException: Not in union [&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;,{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;AIOError&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hbase.avro.generated&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;}]}]: java.lang.NullPointerException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That looks correct to me. Great work!&lt;/p&gt;

&lt;p&gt;Later,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12893332" author="cutting" created="Wed, 28 Jul 2010 19:46:09 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12466122">AVRO-561</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12457931">AVRO-447</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12469663">AVRO-599</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12450114" name="AVRO-573.patch" size="7917" author="cutting" created="Wed, 21 Jul 2010 23:59:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Jun 2010 16:40:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e15j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79949</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-574] Avro MapReduce input schema is not honoured</title>
                <link>https://issues.apache.org/jira/browse/AVRO-574</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;AvroJob.INPUT_SCHEMA is used to set the schema, but it&apos;s never read. AvroRecordReader should use it as the expected schema for the DatumReader.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466871">AVRO-574</key>
            <summary>Avro MapReduce input schema is not honoured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tomwhite">Tom White</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2010 04:08:32 +0000</created>
                <updated>Wed, 25 Aug 2010 19:01:47 +0000</updated>
                            <resolved>Mon, 14 Jun 2010 16:18:09 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12878491" author="qwertymaniac" created="Mon, 14 Jun 2010 05:59:36 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-534&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-534&lt;/a&gt;&lt;br/&gt;
I&apos;ll be adding a test case soon-ish, sorry for the delay.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Jun 2010 05:59:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e15r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-575] AvroOutputFormat doesn&apos;t work for map-only jobs if only the map output schema has been set</title>
                <link>https://issues.apache.org/jira/browse/AVRO-575</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;AvroOutputFormat should use AvroJob.MAP_OUTPUT_SCHEMA for map-only jobs if AvroJob.OUTPUT_SCHEMA has not been set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466872">AVRO-575</key>
            <summary>AvroOutputFormat doesn&apos;t work for map-only jobs if only the map output schema has been set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tomwhite">Tom White</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2010 04:32:54 +0000</created>
                <updated>Mon, 21 Jan 2013 11:03:14 +0000</updated>
                            <resolved>Mon, 21 Jan 2013 11:03:14 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12878474" author="tomwhite" created="Mon, 14 Jun 2010 04:35:52 +0000"  >&lt;p&gt;Here&apos;s a fix. A unit test is needed.&lt;/p&gt;</comment>
                            <comment id="13539460" author="pradeepg26" created="Wed, 26 Dec 2012 03:38:36 +0000"  >&lt;p&gt;This JIRA seems to be OBE. The patch attached is no longer applicable and the AvroOutputFormat is already handling map-only jobs.&lt;/p&gt;</comment>
                            <comment id="13557659" author="cutting" created="Fri, 18 Jan 2013 21:58:04 +0000"  >&lt;p&gt;Tom, is this still a problem?&lt;/p&gt;</comment>
                            <comment id="13558688" author="tomwhite" created="Mon, 21 Jan 2013 11:03:14 +0000"  >&lt;p&gt;No, looks like this has been fixed in another JIRA. There are unit tests for map-only jobs too. Closing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446996" name="AVRO-575.patch" size="3304" author="tomwhite" created="Mon, 14 Jun 2010 04:35:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Dec 2012 03:38:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e15z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-576] Improved Statistics and Dapper-Style Tracing</title>
                <link>https://issues.apache.org/jira/browse/AVRO-576</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;My summer project is improving the stats plug-in and adding Dapper-style RPC tracing within Avro. I will create sub Jira&apos;s corresponding to individual components. &lt;/p&gt;

&lt;p&gt;Hopefully this Jira can facilitate discussion on the design and implementation of the project.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466926">AVRO-576</key>
            <summary>Improved Statistics and Dapper-Style Tracing</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pwendell">Patrick Wendell</assignee>
                                    <reporter username="pwendell">Patrick Wendell</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2010 20:22:19 +0000</created>
                <updated>Tue, 13 Dec 2011 19:06:51 +0000</updated>
                                                                            <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12467039">AVRO-578</subtask>
                            <subtask id="12467148">AVRO-579</subtask>
                            <subtask id="12467750">AVRO-584</subtask>
                            <subtask id="12467837">AVRO-587</subtask>
                            <subtask id="12469129">AVRO-595</subtask>
                            <subtask id="12470843">AVRO-606</subtask>
                            <subtask id="12471570">AVRO-613</subtask>
                            <subtask id="12471592">AVRO-614</subtask>
                            <subtask id="12472656">AVRO-636</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e167:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79952</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-577] Add input format for plain text files</title>
                <link>https://issues.apache.org/jira/browse/AVRO-577</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro doesn&apos;t support MapReduce over plain text files very well. Hadoop&apos;s TextInputFormat doesn&apos;t work directly with AvroMapper, and the alternative of using AvroWrapper objects is not very elegant. It would be nice to have an input format that returns lines as Utf8 keys to work with AvroMapper.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466931">AVRO-577</key>
            <summary>Add input format for plain text files</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tomwhite">Tom White</assignee>
                                    <reporter username="tomwhite">Tom White</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2010 20:39:53 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:54 +0000</updated>
                            <resolved>Tue, 15 Jun 2010 21:51:15 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12878735" author="tomwhite" created="Mon, 14 Jun 2010 20:44:05 +0000"  >&lt;p&gt;Here&apos;s a patch for a AvroUtf8InputFormat and a test. &lt;/p&gt;</comment>
                            <comment id="12878756" author="cutting" created="Mon, 14 Jun 2010 21:38:52 +0000"  >&lt;p&gt;+1 Looks good to me.  I&apos;ll commit this soon unless someone objects.&lt;/p&gt;</comment>
                            <comment id="12878768" author="scott_carey" created="Mon, 14 Jun 2010 22:04:24 +0000"  >&lt;p&gt;+1, looks good.  Wraps LineRecordReader which is well tested and optimized already.&lt;/p&gt;</comment>
                            <comment id="12879132" author="cutting" created="Tue, 15 Jun 2010 21:51:15 +0000"  >&lt;p&gt;I just committed this.  Thanks, Tom!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12447064" name="AVRO-577.patch" size="6321" author="tomwhite" created="Mon, 14 Jun 2010 20:44:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Jun 2010 21:38:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94883</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e16f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79953</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-578] Add RPC Payload to RPCContext class</title>
                <link>https://issues.apache.org/jira/browse/AVRO-578</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;For stats/monitoring it is helpful to see how many bytes are encoded for a given RPC call. Right now Encoder&apos;s don&apos;t track how many payload bytes are actually written out when encoding is done.&lt;/p&gt;

&lt;p&gt;Ideally this bytesWritten() would be in Encoder interface, however not sure JSON plugin can track the number of characters actually written, so alternatively just could be added to BinaryEncoder, and stats plugin will only provide payload sizes when that encoder is used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12467039">AVRO-578</key>
            <summary>Add RPC Payload to RPCContext class</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12466926">AVRO-576</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pwendell">Patrick Wendell</assignee>
                                    <reporter username="pwendell">Patrick Wendell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Jun 2010 21:59:41 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:54 +0000</updated>
                            <resolved>Sat, 26 Jun 2010 00:05:08 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12879180" author="cutting" created="Tue, 15 Jun 2010 23:33:02 +0000"  >&lt;p&gt;The easiest way to see the size might be to sum the sizes of the List&amp;lt;ByteBuffer&amp;gt; that are read/written by the Transceiver on the client and by the Responder#respond() on a the server.&lt;/p&gt;</comment>
                            <comment id="12879190" author="pwendell" created="Tue, 15 Jun 2010 23:51:07 +0000"  >&lt;p&gt;Ya except would be nice to monitor outgoing/incoming bandwidth from either node (requester/responder). The way you mention only gives request size to the responder and response size to the requester. &lt;/p&gt;</comment>
                            <comment id="12879363" author="cutting" created="Wed, 16 Jun 2010 15:26:42 +0000"  >&lt;p&gt;&amp;gt; The way you mention only gives request size to the responder and response size to the requester.&lt;/p&gt;

&lt;p&gt;I don&apos;t see that.  Both Responder#respond() and Transceiver#transceive() see both requests and responses.&lt;/p&gt;</comment>
                            <comment id="12879549" author="pwendell" created="Wed, 16 Jun 2010 22:27:23 +0000"  >&lt;p&gt;This patch adds RPC payload to RPCContext and populates it appropriately.&lt;/p&gt;</comment>
                            <comment id="12879610" author="cutting" created="Thu, 17 Jun 2010 01:12:48 +0000"  >&lt;p&gt;This looks good to me.  Should we add a test?&lt;/p&gt;</comment>
                            <comment id="12879959" author="pwendell" created="Thu, 17 Jun 2010 21:57:06 +0000"  >&lt;p&gt;I added a stub for a test, but until we actually generate metrics for the payloads, there&apos;s no direct way to test this. Going to submit a patch for that later today, which will fill in this test.&lt;/p&gt;

&lt;p&gt;Also I change getMessage() to message() in the RPCContext class to make it match the other getter&apos;s already declared in that file.&lt;/p&gt;</comment>
                            <comment id="12880003" author="philip" created="Thu, 17 Jun 2010 23:34:36 +0000"  >&lt;p&gt;I threw this up on reviewboard (pretty nifty, btw!).  I don&apos;t think we&apos;ve configured reviewboard to paste in its messages in the JIRA, so I&apos;m manually adding them.  The thing I&apos;m most worried about is Plugins keeping a hold of the RpcContext object for longer than they ought to, and inadvertently keeping the requests and responses.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Philip&lt;/p&gt;


&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/210/#review255&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/210/#review255&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;For testing, you should check out src/test/java/org/apache/avro/RPCMetaTestPlugin.java.  You can assert that the payload fields are set, that the right number of bytes is being sent and received, etc.&lt;/p&gt;


&lt;p&gt;trunk/lang/java/src/java/org/apache/avro/ipc/RPCContext.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/210/#comment1106&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/210/#comment1106&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;   The other things here are either private or protected; this probably deserves to be too.&lt;/p&gt;



&lt;p&gt;trunk/lang/java/src/java/org/apache/avro/ipc/RPCContext.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/210/#comment1107&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/210/#comment1107&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;   if this is the only accessor you have, do you need setPayload at all, or should you provide access to the entire payload?  If you provide access to the payload, it might make sense to mark it in the javadoc as &quot;read only&quot;, since plugins really shouldn&apos;t be editing the payload on the fly.&lt;/p&gt;



&lt;p&gt;trunk/lang/java/src/java/org/apache/avro/ipc/RPCContext.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/210/#comment1104&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/210/#comment1104&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;nit&amp;#93;&lt;/span&gt; I think the style here is &quot;for (A a : as) {&quot; (i.d., space both before and after &quot;:&quot;, but I could be wrong.&lt;/p&gt;



&lt;p&gt;trunk/lang/java/src/java/org/apache/avro/ipc/Requestor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/210/#comment1105&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/210/#comment1105&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;   It seems a bit odd to use the same field for both request and response payloads.&lt;/p&gt;

&lt;p&gt;   I&apos;m also a bit concerned that the payload data might be large, and that we&apos;re storing it in this RpcContext object for potentially a while.  Is the RpcContext object being stored for a while?&lt;/p&gt;

&lt;p&gt;   One way to do this might be to add plugin.clientReceiveResponse(context, response) (i.e., give the response directly to the plugin).  That breaks the cleanliness of the API.  Another way to do it would be to explain in the javadoc for the plugin that the payload is available only during clientReceiveResponse.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Philip&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12880399" author="pwendell" created="Sat, 19 Jun 2010 01:31:04 +0000"  >&lt;p&gt;Okay I think some re-factoring may need to be done to the RPCPugin module. The problem is that RPCContext&apos;s are confusingly used to pass information in both directions (eg requestor --&amp;gt; plugin and plugin --&amp;gt; requestor). Here is an example:&lt;/p&gt;

&lt;p&gt;Reponder wants to generate a response, it needs to:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Call plugin.serverSendResponse(context) to &lt;b&gt;get&lt;/b&gt; the meta-data to encode in this response (from plugin)&lt;/li&gt;
	&lt;li&gt;Generate encoded payload given the meta-data&lt;/li&gt;
	&lt;li&gt;Call plugin.serverSendResponse(context) to &lt;b&gt;give&lt;/b&gt; the response payload to the plugin&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Obviously this cannot happen with only one call of serverSendResponse(context).&lt;/p&gt;

&lt;p&gt;Not sure what the best way to change this is that will be extensible and useful to future plugin writers. One way would be to add add two calls in each place, one which interacts with plugin pre-encoding payload and the other after. That feels ugly to me... thoughts?&lt;/p&gt;</comment>
                            <comment id="12880694" author="philip" created="Mon, 21 Jun 2010 00:28:18 +0000"  >&lt;p&gt;It&apos;s a question of whether we are considering the Plugin API evolving or stable, and I&apos;m not sure.  The safest thing to do is to add more methods to the RPCContext class, representing the clearer API you propose, and mark as deprecated the old ones.  The code will continue calling both for a release, until we can delete the deprecated methods.  If we&apos;re less scrupulous, we could delete the old methods altogether, but that might cause someone pain.&lt;/p&gt;

&lt;p&gt;Doug, do you have an opinion?&lt;/p&gt;</comment>
                            <comment id="12880922" author="pwendell" created="Mon, 21 Jun 2010 18:09:54 +0000"  >&lt;p&gt;I started to do more heavy re-factoring but decided it was excess.&lt;/p&gt;

&lt;p&gt;This version just takes the two points where this was an issue (client send and server send) and breaks them into two methods, one before payload is generated and one after. Also, I included tests to verify that the content is being populated correctly.&lt;/p&gt;</comment>
                            <comment id="12881322" author="cutting" created="Tue, 22 Jun 2010 19:42:37 +0000"  >&lt;p&gt;Patrick&amp;gt;  One way would be to add add two calls in each place, one which interacts with plugin pre-encoding payload and the other after. That feels ugly to me...&lt;/p&gt;

&lt;p&gt;What&apos;s a better alternative?  Should we have specific mungeServerRequestMetadata(Map&amp;lt;String,ByteBuffer&amp;gt;) and a recordStatsAboutServerResponsePayload(List&amp;lt;ByteBuffer&amp;gt;) methods instead?  That&apos;d be cleaner, but might overly constrain what&apos;s possible.&lt;/p&gt;

&lt;p&gt;Philip&amp;gt; It&apos;s a question of whether we are considering the Plugin API evolving or stable, and I&apos;m not sure.&lt;/p&gt;

&lt;p&gt;I don&apos;t think the plugin API is yet used much, so I think it could change without breaking much, if anything.&lt;/p&gt;

&lt;p&gt;Some comments on the patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;What&apos;s a use case for preServerSendResponse? If a plugin wants to add metadata to the response, it now needs to do it in the serverRecieveRequest() method, which limits what it can do.  I can imagine plugins that want to add stuff to the metadata that depends on the response.  That was possible before, but no longer is.  Perhaps metadata should always be put in a separate ByteBuffer at the head of the response, then we might could (1) serialize the response payload; (2) run the plugins; (3) serialize the metadata.  Then you could collect stats on payload size, but not metadata size.  This would allow a plugin that encrypted or checksummed payloads.&lt;/li&gt;
	&lt;li&gt;Similarly, in Requestor, we might serialize the payload, then call plugins, then serialize the metadata.&lt;/li&gt;
	&lt;li&gt;In Requestor, can we combine the two loops calling postClientSendRequest()?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12881507" author="pwendell" created="Wed, 23 Jun 2010 01:19:27 +0000"  >&lt;p&gt;Handling the payloads distinctly is the best way to do it, as the interface doesn&apos;t have to change. Attached is another rev that does this.&lt;/p&gt;</comment>
                            <comment id="12881815" author="cutting" created="Wed, 23 Jun 2010 18:33:04 +0000"  >&lt;p&gt;Looks generally good.  Some nits:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I think we can use List in method signatures and field declarations. LinkedList should be used as the implementation, since it supports faster prepends, but that detail can be hidden, I think.&lt;/li&gt;
	&lt;li&gt;we could add a method like ByteBufferOutputStream#prepend(List&amp;lt;ByteBuffer&amp;gt;... lists).  this could then have the option of converting things to perhaps a single ByteBuffer when small, to reduce the number of i/o operations, since each ByteBuffer may correspond to a write and/or read.  We may or may not make that optimization now, but it might be a nice option to have later.&lt;/li&gt;
	&lt;li&gt;RPCContext: new public methods in a public class should have javadoc.  some of the existing public methods there lack javadoc, which is a bug.&lt;/li&gt;
	&lt;li&gt;there&apos;s some commented-out code in Requestor that should probably be deleted.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12881873" author="pwendell" created="Wed, 23 Jun 2010 20:56:37 +0000"  >&lt;p&gt;Nits addressed...&lt;/p&gt;</comment>
                            <comment id="12882765" author="cutting" created="Fri, 25 Jun 2010 23:41:34 +0000"  >&lt;p&gt;I just committed this, with a few cosmetic tweaks.  Thanks, Patrick!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12467837">AVRO-587</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12447287" name="AVRO-578.patch" size="5346" author="pwendell" created="Wed, 16 Jun 2010 22:27:23 +0000"/>
                            <attachment id="12447388" name="AVRO-578.patch.v2" size="8755" author="pwendell" created="Thu, 17 Jun 2010 21:57:06 +0000"/>
                            <attachment id="12447620" name="AVRO-578.patch.v3" size="13511" author="pwendell" created="Mon, 21 Jun 2010 18:09:53 +0000"/>
                            <attachment id="12447783" name="AVRO-578.patch.v4" size="15086" author="pwendell" created="Wed, 23 Jun 2010 01:19:27 +0000"/>
                            <attachment id="12447881" name="AVRO-578.patch.v5" size="15753" author="pwendell" created="Wed, 23 Jun 2010 20:56:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Jun 2010 23:33:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94884</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e16n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79954</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
