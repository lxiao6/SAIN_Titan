<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:26:04 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2018-1-16+AND+created+%3C%3D+2018-1-23+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="5" total="5"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-2130] [RUBY] QUESTION: Is Avro::SchemaValidator class accessible in version 1.8.2?</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2130</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I can&apos;t seem to access `Avro::SchemaValidator.validate!()` in the current version 1.8.2. I was wondering if this class is being made public in a future version or am I missing something in how I use it? It seems that it is not one of the accessible classes from the Avro module, if this is the case, I was wondering what the reason for this would be?&lt;/p&gt;

&lt;p&gt;I figured doing&#160;&lt;br/&gt;
```&lt;br/&gt;
require &apos;avro&apos;&lt;br/&gt;
Avro::SchemaValidator.validate!(schema, data)&lt;br/&gt;
```&lt;br/&gt;
Would be enough.&#160;&lt;/p&gt;

&lt;p&gt;I was interested in the ValidtionError class to&#160;return specific error messages.&lt;/p&gt;

&lt;p&gt;file:&#160;&lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/ruby/lib/avro/schema_validator.rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/master/lang/ruby/lib/avro/schema_validator.rb&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13131127">AVRO-2130</key>
            <summary>[RUBY] QUESTION: Is Avro::SchemaValidator class accessible in version 1.8.2?</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shabab">Shabab Ayub</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jan 2018 03:29:26 +0000</created>
                <updated>Tue, 16 Jan 2018 19:28:55 +0000</updated>
                            <resolved>Tue, 16 Jan 2018 18:33:37 +0000</resolved>
                                    <version>1.8.2</version>
                                    <fixVersion>1.8.2</fixVersion>
                                    <component>ruby</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="16327550" author="shabab" created="Tue, 16 Jan 2018 18:33:16 +0000"  >&lt;p&gt;I just realized this class is not included in the current release. &lt;/p&gt;</comment>
                            <comment id="16327647" author="tjwp" created="Tue, 16 Jan 2018 19:28:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shabab&quot; class=&quot;user-hover&quot; rel=&quot;shabab&quot;&gt;Shabab Ayub&lt;/a&gt; you might find this gem of interest: &lt;a href=&quot;https://github.com/salsify/avro-patches&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/salsify/avro-patches&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It collects several of the Ruby changes that have not yet made it into an official release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12906160" name="image-2018-01-15-22-25-27-964.png" size="122571" author="shabab" created="Tue, 16 Jan 2018 03:25:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Jan 2018 19:28:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oxov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The SchemaValidator class is not in the 1.8.2 release.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2131] Records with unions with self references fail to parse.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2131</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Records with unions with self references fail to parse.&lt;/p&gt;

&lt;p&gt;The example below fails to parse with &lt;tt&gt;&quot;Type not supported: Node&quot;&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;
[
  {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;tree&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Node&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;left&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: [
          &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
          {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Node&quot;&lt;/span&gt;
          }
        ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;right&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: [
          &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
          {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Node&quot;&lt;/span&gt;
          }
        ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
      }
    ]
  }
]
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When we don&apos;t allow nullability it parses successfully:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;
[
  {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;tree&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Node&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;left&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Node&quot;&lt;/span&gt;
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;right&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Node&quot;&lt;/span&gt;
      }
    ]
  }
]
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The root cause: When the second element of the union, {&lt;tt&gt;&quot;type&quot;:&quot;Node&quot;&lt;/tt&gt;}, is parsed there is no path that can successfully handle the &lt;tt&gt;JsonNode&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The solution is to add this logic to the &lt;tt&gt;Schema.parse(JsonNode schema, Names names)&lt;/tt&gt; method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {  &lt;span class=&quot;code-comment&quot;&gt;//For unions with self reference
&lt;/span&gt;        Name nameFromType = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Name(type, names.space);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (names.containsKey(nameFromType)) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; names.get(nameFromType);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SchemaParseException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Type not supported: &quot;&lt;/span&gt;+type);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pull request attached&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.8.0_152-b1&lt;/p&gt;</environment>
        <key id="13131718">AVRO-2131</key>
            <summary>Records with unions with self references fail to parse.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="jeff.maxwell">Jeff Maxwell</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jan 2018 22:52:57 +0000</created>
                <updated>Thu, 29 Nov 2018 20:17:44 +0000</updated>
                            <resolved>Thu, 29 Nov 2018 20:17:44 +0000</resolved>
                                    <version>1.8.1</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16329656" author="githubbot" created="Wed, 17 Jan 2018 22:55:59 +0000"  >&lt;p&gt;GitHub user jmax01 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/278&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/278&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2131&quot; title=&quot;Records with unions with self references fail to parse.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2131&quot;&gt;&lt;del&gt;AVRO-2131&lt;/del&gt;&lt;/a&gt; Modified Schema.parse(JsonNode schema, Names names) to allow Unions with self referencess.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jmax01/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jmax01/avro&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/278.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/278.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #278&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fbca0c529d7e345dacabc2f693114c980fd08a2a&lt;br/&gt;
Author: jmaxwell &amp;lt;jmaxwell@...&amp;gt;&lt;br/&gt;
Date:   2018-01-17T22:54:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2131&quot; title=&quot;Records with unions with self references fail to parse.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2131&quot;&gt;&lt;del&gt;AVRO-2131&lt;/del&gt;&lt;/a&gt; Modified Schema.parse(JsonNode schema, Names names) to allow Unions with self references.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16329660" author="jeff.maxwell" created="Wed, 17 Jan 2018 22:59:46 +0000"  >&lt;p&gt;Formatting&lt;/p&gt;</comment>
                            <comment id="16703705" author="githubbot" created="Thu, 29 Nov 2018 19:42:22 +0000"  >&lt;p&gt;dkulp closed pull request #278: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2131&quot; title=&quot;Records with unions with self references fail to parse.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2131&quot;&gt;&lt;del&gt;AVRO-2131&lt;/del&gt;&lt;/a&gt; Modified Schema.parse(JsonNode schema, Names names) to allow Unions with self referencess.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/278&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/278&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/avro/src/main/java/org/apache/avro/Schema.java b/lang/java/avro/src/main/java/org/apache/avro/Schema.java&lt;br/&gt;
index a87c7a27c..f0d1f867d 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/Schema.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/Schema.java&lt;br/&gt;
@@ -1404,8 +1404,13 @@ static Schema parse(JsonNode schema, Names names) &lt;/p&gt;
{
           throw new SchemaParseException(&quot;Invalid or no size: &quot;+schema);
         result = new FixedSchema(name, doc, sizeNode.intValue());
         if (name != null) names.add(result);
-      }
&lt;p&gt; else&lt;br/&gt;
+      } else {  //For unions with self reference&lt;br/&gt;
+        Name nameFromType = new Name(type, names.space);&lt;br/&gt;
+        if (names.containsKey(nameFromType)) &lt;/p&gt;
{
+          return names.get(nameFromType);
+        }
&lt;p&gt;         throw new SchemaParseException(&quot;Type not supported: &quot;+type);&lt;br/&gt;
+      }&lt;br/&gt;
       Iterator&amp;lt;String&amp;gt; i = schema.fieldNames();&lt;/p&gt;

&lt;p&gt;       Set reserved = SCHEMA_RESERVED;&lt;br/&gt;
diff --git a/lang/java/avro/src/test/java/org/apache/avro/TestUnionSelfReference.java b/lang/java/avro/src/test/java/org/apache/avro/TestUnionSelfReference.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..fa3c23d64&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/avro/src/test/java/org/apache/avro/TestUnionSelfReference.java&lt;br/&gt;
@@ -0,0 +1,114 @@&lt;br/&gt;
+package org.apache.avro;&lt;br/&gt;
+&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.*;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.avro.Schema.Field;&lt;br/&gt;
+import org.apache.avro.Schema.Type;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+&lt;br/&gt;
+public class TestUnionSelfReference {&lt;br/&gt;
+  /** The logger for TestUnionSelfReference */&lt;br/&gt;
+  @SuppressWarnings(&quot;unused&quot;)&lt;br/&gt;
+  private static final Logger LOGGER = LoggerFactory.getLogger(TestUnionSelfReference.class);&lt;br/&gt;
+  &lt;br/&gt;
+  private static final String SIMPLE_BINARY_TREE =&lt;br/&gt;
+	  &quot;{&quot;&lt;br/&gt;
+	  +&quot;    \&quot;namespace\&quot;: \&quot;tree\&quot;,&quot;&lt;br/&gt;
+	  +&quot;    \&quot;type\&quot;: \&quot;record\&quot;,&quot;&lt;br/&gt;
+	  +&quot;    \&quot;name\&quot;: \&quot;Node\&quot;,&quot;&lt;br/&gt;
+	  +&quot;    \&quot;fields\&quot;: [&quot;&lt;br/&gt;
+	  +&quot;      {&quot;&lt;br/&gt;
+	  +&quot;        \&quot;name\&quot;: \&quot;left\&quot;,&quot;&lt;br/&gt;
+	  +&quot;        \&quot;type\&quot;: [&quot;&lt;br/&gt;
+	  +&quot;          \&quot;null\&quot;,&quot;&lt;br/&gt;
+	  +&quot;          &lt;/p&gt;
{&quot;
+	  +&quot;            \&quot;type\&quot;: \&quot;Node\&quot;&quot;
+	  +&quot;          }
&lt;p&gt;&quot;&lt;br/&gt;
+	  +&quot;        ],&quot;&lt;br/&gt;
+	  +&quot;        \&quot;default\&quot;: null&quot;&lt;br/&gt;
+	  +&quot;      },&quot;&lt;br/&gt;
+	  +&quot;      {&quot;&lt;br/&gt;
+	  +&quot;        \&quot;name\&quot;: \&quot;right\&quot;,&quot;&lt;br/&gt;
+	  +&quot;        \&quot;type\&quot;: [&quot;&lt;br/&gt;
+	  +&quot;          \&quot;null\&quot;,&quot;&lt;br/&gt;
+	  +&quot;          &lt;/p&gt;
{&quot;
+	  +&quot;            \&quot;type\&quot;: \&quot;Node\&quot;&quot;
+	  +&quot;          }
&lt;p&gt;&quot;&lt;br/&gt;
+	  +&quot;        ],&quot;&lt;br/&gt;
+	  +&quot;        \&quot;default\&quot;: null&quot;&lt;br/&gt;
+	  +&quot;      }&quot;&lt;br/&gt;
+	  +&quot;    ]&quot;&lt;br/&gt;
+	  +&quot;  }&quot;;&lt;br/&gt;
+  &lt;br/&gt;
+  private static final String THREE_TYPE_UNION =&lt;br/&gt;
+	  &quot;{&quot;&lt;br/&gt;
+	  +&quot;    \&quot;namespace\&quot;: \&quot;tree\&quot;,&quot;&lt;br/&gt;
+	  +&quot;    \&quot;type\&quot;: \&quot;record\&quot;,&quot;&lt;br/&gt;
+	  +&quot;    \&quot;name\&quot;: \&quot;Node\&quot;,&quot;&lt;br/&gt;
+	  +&quot;    \&quot;fields\&quot;: [&quot;&lt;br/&gt;
+	  +&quot;      {&quot;&lt;br/&gt;
+	  +&quot;        \&quot;name\&quot;: \&quot;left\&quot;,&quot;&lt;br/&gt;
+	  +&quot;        \&quot;type\&quot;: [&quot;&lt;br/&gt;
+	  +&quot;          \&quot;null\&quot;,&quot;&lt;br/&gt;
+	  +&quot;          \&quot;string\&quot;,&quot;&lt;br/&gt;
+	  +&quot;          &lt;/p&gt;
{&quot;
+	  +&quot;            \&quot;type\&quot;: \&quot;Node\&quot;&quot;
+	  +&quot;          }
&lt;p&gt;&quot;&lt;br/&gt;
+	  +&quot;        ],&quot;&lt;br/&gt;
+	  +&quot;        \&quot;default\&quot;: null&quot;&lt;br/&gt;
+	  +&quot;      },&quot;&lt;br/&gt;
+	  +&quot;      {&quot;&lt;br/&gt;
+	  +&quot;        \&quot;name\&quot;: \&quot;right\&quot;,&quot;&lt;br/&gt;
+	  +&quot;        \&quot;type\&quot;: [&quot;&lt;br/&gt;
+	  +&quot;          \&quot;null\&quot;,&quot;&lt;br/&gt;
+	  +&quot;          \&quot;string\&quot;,&quot;&lt;br/&gt;
+	  +&quot;          &lt;/p&gt;
{&quot;
+	  +&quot;            \&quot;type\&quot;: \&quot;Node\&quot;&quot;
+	  +&quot;          }
&lt;p&gt;&quot;&lt;br/&gt;
+	  +&quot;        ],&quot;&lt;br/&gt;
+	  +&quot;        \&quot;default\&quot;: null&quot;&lt;br/&gt;
+	  +&quot;      }&quot;&lt;br/&gt;
+	  +&quot;    ]&quot;&lt;br/&gt;
+	  +&quot;  }&quot;;&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testSelfReferenceInUnion()&lt;/p&gt;
{ 
+     Schema schema = new Schema.Parser().parse(SIMPLE_BINARY_TREE);
+     Field leftField = schema.getField(&quot;left&quot;);
+     assertEquals(JsonProperties.NULL_VALUE,leftField.defaultVal());
+     final Schema leftFieldSchema = leftField.schema();
+     assertEquals(Type.UNION,leftFieldSchema.getType());
+     assertEquals(&quot;null&quot;,leftFieldSchema.getTypes().get(0).getName());
+     assertEquals(&quot;Node&quot;,leftFieldSchema.getTypes().get(1).getName());
+     
+     Field rightField = schema.getField(&quot;right&quot;);
+     assertEquals(JsonProperties.NULL_VALUE,rightField.defaultVal());
+     final Schema rightFieldSchema = rightField.schema();
+     assertEquals(Type.UNION,rightFieldSchema.getType());
+     assertEquals(&quot;null&quot;,rightFieldSchema.getTypes().get(0).getName());
+     assertEquals(&quot;Node&quot;,rightFieldSchema.getTypes().get(1).getName());
+  }
&lt;p&gt;+  &lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testSelfReferenceInThreeUnion()&lt;/p&gt;
{ 
+     Schema schema = new Schema.Parser().parse(THREE_TYPE_UNION);
+     Field leftField = schema.getField(&quot;left&quot;);
+     assertEquals(JsonProperties.NULL_VALUE,leftField.defaultVal());
+     final Schema leftFieldSchema = leftField.schema();
+     assertEquals(Type.UNION,leftFieldSchema.getType());
+     assertEquals(&quot;null&quot;,leftFieldSchema.getTypes().get(0).getName());
+     assertEquals(&quot;string&quot;,leftFieldSchema.getTypes().get(1).getName());
+     assertEquals(&quot;Node&quot;,leftFieldSchema.getTypes().get(2).getName());
+     
+     Field rightField = schema.getField(&quot;right&quot;);
+     assertEquals(JsonProperties.NULL_VALUE,rightField.defaultVal());
+     final Schema rightFieldSchema = rightField.schema();
+     assertEquals(Type.UNION,rightFieldSchema.getType());
+     assertEquals(&quot;null&quot;,rightFieldSchema.getTypes().get(0).getName());
+     assertEquals(&quot;string&quot;,rightFieldSchema.getTypes().get(1).getName());
+     assertEquals(&quot;Node&quot;,rightFieldSchema.getTypes().get(2).getName());
+  }
&lt;p&gt;+  &lt;br/&gt;
+}&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703706" author="jira-bot" created="Thu, 29 Nov 2018 19:42:26 +0000"  >&lt;p&gt;Commit 0beb39d78f6bdccb803b8c6eb58af02b2cc80429 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeff.maxwell&quot; class=&quot;user-hover&quot; rel=&quot;jeff.maxwell&quot;&gt;Jeff Maxwell&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=0beb39d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=0beb39d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2131&quot; title=&quot;Records with unions with self references fail to parse.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2131&quot;&gt;&lt;del&gt;AVRO-2131&lt;/del&gt;&lt;/a&gt; Modified Schema.parse(JsonNode schema, Names names) to allow Unions with self references. (#278)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Jan 2018 22:55:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/avro/pull/278]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p1av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2132] Avro IDL: Support dot (&apos;.&apos;) character in property annotation names</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2132</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Unless there is a strong reason why names like &lt;tt&gt;@foo.bar&lt;/tt&gt;&#160;can&apos;t be used as property annotations in IDL, I propose an enhancement to the IDL parser to allow it.&lt;/p&gt;

&lt;p&gt;The major drive for this change comes from Kafka Connect; for a certain fields &#8211; namely timestamps &#8211; additional metadata must be present in the schema when certain consumers read the data (e.g. &lt;a href=&quot;https://github.com/confluentinc/kafka-connect-jdbc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the JDBC connector&lt;/a&gt;). What I hoped when using IDL was to write the following for a record field:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
union {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, @connect.version(1) @connect.name(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.kafka.connect.data.Timestamp&quot;&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;} queryTime;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so that the following would be available in the schemata:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;queryTime&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: [
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;connect.version&quot;&lt;/span&gt;: 1,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;connect.name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.kafka.connect.data.Timestamp&quot;&lt;/span&gt;
    }
  ],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately, both &lt;tt&gt;connect.version&lt;/tt&gt;&#160;and &lt;tt&gt;connect.name&lt;/tt&gt;&#160;are&#160;unacceptable by the parser.&lt;/p&gt;

&lt;p&gt;The change for this is quite minimal as it can be based on &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1267&quot; title=&quot;permit dashes in IDL property names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1267&quot;&gt;&lt;del&gt;AVRO-1267&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13131764">AVRO-2132</key>
            <summary>Avro IDL: Support dot (&apos;.&apos;) character in property annotation names</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="kdrakon">Sean Policarpio</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jan 2018 02:49:13 +0000</created>
                <updated>Fri, 23 Feb 2018 00:10:37 +0000</updated>
                            <resolved>Thu, 22 Feb 2018 19:26:30 +0000</resolved>
                                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="16329925" author="githubbot" created="Thu, 18 Jan 2018 03:01:34 +0000"  >&lt;p&gt;GitHub user kdrakon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/279&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/279&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt;: allow the dot character to be used in the name of an IDL property annotation&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kdrakon/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kdrakon/avro&lt;/a&gt; kdrakon/allow-dot-in-idl-property-name&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/279.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/279.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #279&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3f46d65d905523c60f642771300fb58cd2d93553&lt;br/&gt;
Author: Sean Policarpio &amp;lt;sean.policarpio@...&amp;gt;&lt;br/&gt;
Date:   2018-01-18T01:21:26Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt;: allow the dot character to be used in the name of an IDL property annotation&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16347694" author="kdrakon" created="Wed, 31 Jan 2018 22:22:02 +0000"  >&lt;p&gt;Hello, anyone able to quickly review this?&lt;/p&gt;</comment>
                            <comment id="16369719" author="githubbot" created="Tue, 20 Feb 2018 05:01:09 +0000"  >&lt;p&gt;kdrakon commented on issue #279: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt;: allow the dot character to be used in the name of an IDL property annotation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/279#issuecomment-366867507&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/279#issuecomment-366867507&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Is anyone have the time to review this? I have an issue open at &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-2132&lt;/a&gt; too.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16371756" author="cutting" created="Wed, 21 Feb 2018 17:56:31 +0000"  >&lt;p&gt;Patch looks good to me.  Does anyone object to committing this?&lt;/p&gt;</comment>
                            <comment id="16373285" author="jira-bot" created="Thu, 22 Feb 2018 19:24:24 +0000"  >&lt;p&gt;Commit 9c200c993147dd3ac0b5f6ed94b558ad863d7c18 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=9c200c9&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=9c200c9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt;: Allow dots in IDL property names. (kdrakon via cutting)&lt;/p&gt;</comment>
                            <comment id="16373289" author="cutting" created="Thu, 22 Feb 2018 19:26:30 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                            <comment id="16373291" author="githubbot" created="Thu, 22 Feb 2018 19:27:03 +0000"  >&lt;p&gt;cutting closed pull request #279: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt;: allow the dot character to be used in the name of an IDL property annotation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/279&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/279&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/compiler/src/main/javacc/org/apache/avro/compiler/idl/idl.jj b/lang/java/compiler/src/main/javacc/org/apache/avro/compiler/idl/idl.jj&lt;br/&gt;
index 421321019..7de123e20 100644&lt;br/&gt;
&amp;#8212; a/lang/java/compiler/src/main/javacc/org/apache/avro/compiler/idl/idl.jj&lt;br/&gt;
+++ b/lang/java/compiler/src/main/javacc/org/apache/avro/compiler/idl/idl.jj&lt;br/&gt;
@@ -1528,6 +1528,8 @@ String PropertyName():&lt;br/&gt;
 {&lt;br/&gt;
   t = &amp;lt;IDENTIFIER&amp;gt;   &lt;/p&gt;
{ name.append(t.image); }&lt;br/&gt;
   ( t = &amp;lt;DASH&amp;gt;       { name.append(t.image); }
&lt;p&gt;+    t = &amp;lt;IDENTIFIER&amp;gt; &lt;/p&gt;
{ name.append(t.image); } |&lt;br/&gt;
+    t = &amp;lt;DOT&amp;gt;        { name.append(t.image); }
&lt;p&gt;     t = &amp;lt;IDENTIFIER&amp;gt; &lt;/p&gt;
{ name.append(t.image); }
&lt;p&gt;   ) *&lt;/p&gt;
   { return name.toString(); }
&lt;p&gt;diff --git a/lang/java/compiler/src/test/idl/input/simple.avdl b/lang/java/compiler/src/test/idl/input/simple.avdl&lt;br/&gt;
index 37aed9e11..1bfcd7b27 100644&lt;br/&gt;
&amp;#8212; a/lang/java/compiler/src/test/idl/input/simple.avdl&lt;br/&gt;
+++ b/lang/java/compiler/src/test/idl/input/simple.avdl&lt;br/&gt;
@@ -49,6 +49,9 @@ protocol Simple {&lt;br/&gt;
     float average = -Infinity;&lt;br/&gt;
     date d = 0;&lt;br/&gt;
     time_ms t = 0;&lt;br/&gt;
+&lt;br/&gt;
+    @foo.bar(&quot;bar.foo&quot;) long l;&lt;br/&gt;
+    union &lt;/p&gt;
{null, @foo.foo.bar(42) @foo.foo.foo(&quot;3foo&quot;) string}
&lt;p&gt; nested_properties;&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;   error TestError {&lt;br/&gt;
diff --git a/lang/java/compiler/src/test/idl/output/simple.avpr b/lang/java/compiler/src/test/idl/output/simple.avpr&lt;br/&gt;
index c3e18e237..f40030790 100644&lt;br/&gt;
&amp;#8212; a/lang/java/compiler/src/test/idl/output/simple.avpr&lt;br/&gt;
+++ b/lang/java/compiler/src/test/idl/output/simple.avpr&lt;br/&gt;
@@ -54,7 +54,13 @@&lt;br/&gt;
       &quot;name&quot;: &quot;t&quot;,&lt;br/&gt;
       &quot;type&quot;: &lt;/p&gt;
{&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;time-millis&quot;}
&lt;p&gt;,&lt;br/&gt;
       &quot;default&quot;: 0&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;} ],&lt;br/&gt;
+    } , 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+      &amp;quot;name&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; , &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+      &amp;quot;name&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;],&lt;br/&gt;
     &quot;my-property&quot; : &lt;/p&gt;
{
       &quot;key&quot; : 3
     }&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16373316" author="githubbot" created="Thu, 22 Feb 2018 19:36:20 +0000"  >&lt;p&gt;kdrakon commented on issue #279: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt;: allow the dot character to be used in the name of an IDL property annotation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/279#issuecomment-367795242&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/279#issuecomment-367795242&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Cheers @cutting &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16373418" author="zolyfarkas" created="Thu, 22 Feb 2018 20:46:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kdrakon&quot; class=&quot;user-hover&quot; rel=&quot;kdrakon&quot;&gt;Sean Policarpio&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I just looked at this commit and tried to apply it to my fork.. and since my fork does not allow invalid default values defined in schemas/idl, the changes made here break the unit tests in the fork.....&lt;/p&gt;

&lt;p&gt;here is where the issue is:&lt;/p&gt;

&lt;p&gt;the new declared fields in simple.avdl do not have default values:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    record TestRecord {
    ...............
    @foo.bar(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar.foo&quot;&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; l;
    union {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, @foo.foo.bar(42) @foo.foo.foo(&lt;span class=&quot;code-quote&quot;&gt;&quot;3foo&quot;&lt;/span&gt;) string} nested_properties;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and as such the method declaration bellow is invalid:&lt;/p&gt;

&lt;p&gt;  TestRecord echo(TestRecord `record` = &lt;/p&gt;
{&quot;name&quot;:&quot;bar&quot;,&quot;kind&quot;:&quot;BAR&quot;}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;and to be correct since the new added fields do not have defaults it should be something like:&lt;/p&gt;

&lt;p&gt;  TestRecord echo(TestRecord `record` = &lt;/p&gt;
{&quot;name&quot;:&quot;bar&quot;,&quot;kind&quot;:&quot;BAR&quot;,&quot;l&quot;:0,&quot;nested_properties&quot;:null}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;I thought &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-2035&lt;/a&gt; is resolved?&lt;/p&gt;

&lt;p&gt;worthwhile to look into this... cheers.&lt;/p&gt;</comment>
                            <comment id="16373515" author="cutting" created="Thu, 22 Feb 2018 21:45:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zolyfarkas&quot; class=&quot;user-hover&quot; rel=&quot;zolyfarkas&quot;&gt;Zoltan Farkas&lt;/a&gt;, Yes, you are right.  However I&apos;m not seeing any tests fail, are you?  There are multiple versions of simple.avdl in the sources, and I think the one altered here is compiled to JSON but never subsequently parsed as a protocol.&lt;/p&gt;

&lt;p&gt;Thanks for catching this.&lt;/p&gt;</comment>
                            <comment id="16373572" author="kdrakon" created="Thu, 22 Feb 2018 22:23:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zolyfarkas&quot; class=&quot;user-hover&quot; rel=&quot;zolyfarkas&quot;&gt;Zoltan Farkas&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt;&lt;br/&gt;
If I&apos;m understanding this correctly, 1.9.0 will enforce default values? If so, I can append defaults for both my new fields &lt;tt&gt;l&lt;/tt&gt; and &lt;tt&gt;nested_properties&lt;/tt&gt; (&lt;tt&gt;0&lt;/tt&gt; and &lt;tt&gt;null&lt;/tt&gt; respectively). However, shouldn&apos;t the enum field &lt;tt&gt;kind&lt;/tt&gt; also specified a default?&lt;/p&gt;</comment>
                            <comment id="16373580" author="githubbot" created="Thu, 22 Feb 2018 22:30:46 +0000"  >&lt;p&gt;kdrakon opened a new pull request #287: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt; added missing defaults for new fields&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/287&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/287&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16373696" author="cutting" created="Thu, 22 Feb 2018 23:49:57 +0000"  >&lt;p&gt;It turns out that the problem was that defaults were only checked when parsing schemas from JSON, not when creating them from constructors.  Fixing that caused a few other things to fail.  I&apos;ve submitted the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2035&quot; title=&quot;enable validation of default values in schemas by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2035&quot;&gt;&lt;del&gt;AVRO-2035&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16373721" author="githubbot" created="Fri, 23 Feb 2018 00:10:36 +0000"  >&lt;p&gt;kdrakon commented on issue #287: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt; added missing defaults for new fields&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/287#issuecomment-367866284&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/287#issuecomment-367866284&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   no problem @cutting &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16373722" author="githubbot" created="Fri, 23 Feb 2018 00:10:37 +0000"  >&lt;p&gt;kdrakon closed pull request #287: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2132&quot; title=&quot;Avro IDL: Support dot (&amp;#39;.&amp;#39;) character in property annotation names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2132&quot;&gt;&lt;del&gt;AVRO-2132&lt;/del&gt;&lt;/a&gt; added missing defaults for new fields&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/287&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/287&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/compiler/src/test/idl/input/simple.avdl b/lang/java/compiler/src/test/idl/input/simple.avdl&lt;br/&gt;
index 1bfcd7b27..d41d7116f 100644&lt;br/&gt;
&amp;#8212; a/lang/java/compiler/src/test/idl/input/simple.avdl&lt;br/&gt;
+++ b/lang/java/compiler/src/test/idl/input/simple.avdl&lt;br/&gt;
@@ -50,8 +50,8 @@ protocol Simple {&lt;br/&gt;
     date d = 0;&lt;br/&gt;
     time_ms t = 0;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@foo.bar(&quot;bar.foo&quot;) long l;&lt;/li&gt;
	&lt;li&gt;union 
{null, @foo.foo.bar(42) @foo.foo.foo(&quot;3foo&quot;) string} nested_properties;&lt;br/&gt;
+    @foo.bar(&quot;bar.foo&quot;) long l = 0;&lt;br/&gt;
+    union {null, @foo.foo.bar(42) @foo.foo.foo(&quot;3foo&quot;) string}
&lt;p&gt; nested_properties = null;&lt;br/&gt;
   }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   error TestError &lt;/p&gt;
{
diff --git a/lang/java/compiler/src/test/idl/output/simple.avpr b/lang/java/compiler/src/test/idl/output/simple.avpr
index f40030790..e315d7851 100644
--- a/lang/java/compiler/src/test/idl/output/simple.avpr
+++ b/lang/java/compiler/src/test/idl/output/simple.avpr
@@ -56,10 +56,12 @@
       &quot;default&quot;: 0
     }
&lt;p&gt; , {&lt;br/&gt;
       &quot;name&quot;: &quot;l&quot;,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;type&quot;: 
{&quot;type&quot;: &quot;long&quot;, &quot;foo.bar&quot;: &quot;bar.foo&quot;}
&lt;p&gt;+      &quot;type&quot;: &lt;/p&gt;
{&quot;type&quot;: &quot;long&quot;, &quot;foo.bar&quot;: &quot;bar.foo&quot;}
&lt;p&gt;,&lt;br/&gt;
+      &quot;default&quot;: 0&lt;br/&gt;
     } , {&lt;br/&gt;
       &quot;name&quot;: &quot;nested_properties&quot;,&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&quot;type&quot;: [ &quot;null&quot; , 
{&quot;type&quot;:&quot;string&quot;, &quot;foo.foo.bar&quot;: 42, &quot;foo.foo.foo&quot;: &quot;3foo&quot;}
&lt;p&gt; ]&lt;br/&gt;
+      &quot;type&quot;: [ &quot;null&quot; , &lt;/p&gt;
{&quot;type&quot;:&quot;string&quot;, &quot;foo.foo.bar&quot;: 42, &quot;foo.foo.foo&quot;: &quot;3foo&quot;}
&lt;p&gt; ],&lt;br/&gt;
+      &quot;default&quot;: null&lt;br/&gt;
     }],&lt;br/&gt;
     &quot;my-property&quot; : {&lt;br/&gt;
       &quot;key&quot; : 3&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Jan 2018 03:01:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p1l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2133] Log rat failures</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2133</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently, rat plugin does not log anything useful in case of failure (e.g. found files without a license). The details can be found only in the generated &lt;tt&gt;rat.txt&lt;/tt&gt; file. This can make hard to find the problem in environments where the build workspace is not easily accessible (e.g. Jenkins).&lt;/p&gt;

&lt;p&gt;The rat plugin should be configured to log the erroneous files so accessing &lt;tt&gt;rat.txt&lt;/tt&gt; is not required to fix the issues.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13131820">AVRO-2133</key>
            <summary>Log rat failures</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gszadovszky">Gabor Szadovszky</assignee>
                                    <reporter username="gszadovszky">Gabor Szadovszky</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jan 2018 09:09:35 +0000</created>
                <updated>Thu, 18 Jan 2018 10:17:31 +0000</updated>
                            <resolved>Thu, 18 Jan 2018 10:17:31 +0000</resolved>
                                                    <fixVersion>1.9.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16330277" author="githubbot" created="Thu, 18 Jan 2018 09:11:14 +0000"  >&lt;p&gt;GitHub user gszadovszky opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/280&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/280&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2133&quot; title=&quot;Log rat failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2133&quot;&gt;&lt;del&gt;AVRO-2133&lt;/del&gt;&lt;/a&gt;: Log rat failures&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/gszadovszky/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/gszadovszky/avro&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2133&quot; title=&quot;Log rat failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2133&quot;&gt;&lt;del&gt;AVRO-2133&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/280.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/280.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #280&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7a7e3aca11e4bc12f4e7bc7e9d878b4365662fbb&lt;br/&gt;
Author: Gabor Szadovszky &amp;lt;gabor@...&amp;gt;&lt;br/&gt;
Date:   2018-01-18T09:10:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2133&quot; title=&quot;Log rat failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2133&quot;&gt;&lt;del&gt;AVRO-2133&lt;/del&gt;&lt;/a&gt;: Log rat failures&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16330341" author="jira-bot" created="Thu, 18 Jan 2018 10:16:33 +0000"  >&lt;p&gt;Commit 37bd84dc608c39f611c19557d4b2d1052d08db32 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gszadovszky&quot; class=&quot;user-hover&quot; rel=&quot;gszadovszky&quot;&gt;Gabor Szadovszky&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=37bd84d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=37bd84d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2133&quot; title=&quot;Log rat failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2133&quot;&gt;&lt;del&gt;AVRO-2133&lt;/del&gt;&lt;/a&gt;: Log rat failures&lt;/p&gt;

&lt;p&gt;This closes #280&lt;/p&gt;

&lt;p&gt;Signed-off-by: Nandor Kollar &amp;lt;nkollar@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16330343" author="githubbot" created="Thu, 18 Jan 2018 10:16:58 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/280&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/280&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Jan 2018 09:11:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p1xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2134] Cannot define optional field tags in Avro schema</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2134</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We are designing an Avro schema for kafka&#160;event payload and trying to use that for validating event&#160;message with Avro schema by posting to Kafka rest proxy.&lt;/p&gt;

&lt;p&gt;The avro schema has some fields which are defined with union encoding having null values&#160; &#160;&lt;/p&gt;

{\&quot;name\&quot;: \&quot;address\&quot;, \&quot;type\&quot;: ,[\&quot;null\&quot;,\&quot;string\&quot;], default:null}

&lt;p&gt;Our clients want to send event message data to kafka broker for some complex data types optionally i.e. without JSON key/value even though it is specified in Avro schema or few of the primitive data types as optional within complex data type.&lt;/p&gt;

&lt;p&gt;Is there&#160;an&#160;avro&#160;version which can skip the validation for no field data sent in event message or payload for field specified in Avro schema?&lt;/p&gt;

&lt;p&gt;&#160;The error message we see as follows:&lt;/p&gt;

&lt;p&gt;&quot;error_code&quot;:&#160;42203,&lt;/p&gt;

&lt;p&gt;&quot;message&quot;: &quot;Conversion of JSON to Avro failed: Failed to convert JSON to Avro: Expected start-union. Got END_OBJECT&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13132084">AVRO-2134</key>
            <summary>Cannot define optional field tags in Avro schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gogiraghu">raghugogi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jan 2018 04:40:59 +0000</created>
                <updated>Fri, 19 Jan 2018 16:01:32 +0000</updated>
                                            <version>1.8.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p3jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
