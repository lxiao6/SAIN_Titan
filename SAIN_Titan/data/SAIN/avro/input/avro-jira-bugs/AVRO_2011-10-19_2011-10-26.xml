<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:16:15 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-10-19+AND+created+%3C%3D+2011-10-26+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="9" total="9"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-936] Avro Java does not build with Maven 2.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-936</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;It is because we use the feature &quot;Support Enum-type parameters in mojos&quot; of Maven 3:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jira.codehaus.org/browse/MNG-4292&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.codehaus.org/browse/MNG-4292&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The forthcoming patch fixes it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527696">AVRO-936</key>
            <summary>Avro Java does not build with Maven 2.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2011 03:55:21 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:07 +0000</updated>
                            <resolved>Thu, 20 Oct 2011 06:00:47 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13130341" author="thiru_mg" created="Wed, 19 Oct 2011 03:58:49 +0000"  >&lt;p&gt;The patch also adds Maven 2 as a requirement in BUILD.txt&lt;/p&gt;</comment>
                            <comment id="13130751" author="thiru_mg" created="Wed, 19 Oct 2011 16:44:29 +0000"  >&lt;p&gt;I&apos;ll commit this soon if there are no objections to this.&lt;/p&gt;</comment>
                            <comment id="13130979" author="cutting" created="Wed, 19 Oct 2011 20:44:51 +0000"  >&lt;p&gt;+1 This looks fine to me.&lt;/p&gt;</comment>
                            <comment id="13131399" author="thiru_mg" created="Thu, 20 Oct 2011 06:00:48 +0000"  >&lt;p&gt;Committed revision 1186622. Thanks Doug for reviewing it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499631" name="AVRO-936.patch" size="3309" author="thiru_mg" created="Wed, 19 Oct 2011 03:58:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 Oct 2011 20:44:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>89016</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80310</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-937] C++ CMake keeps generating code even when there is no change</title>
                <link>https://issues.apache.org/jira/browse/AVRO-937</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;If there is no change in the input schema for tests, the header files should not be regenerated. But the current CMake scripts regenerates the code every time it is run.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527741">AVRO-937</key>
            <summary>C++ CMake keeps generating code even when there is no change</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2011 13:09:51 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:05 +0000</updated>
                            <resolved>Thu, 20 Oct 2011 04:54:27 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13131374" author="thiru_mg" created="Thu, 20 Oct 2011 04:54:27 +0000"  >&lt;p&gt;Committed revision 1186617.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499680" name="AVRO-937.patch" size="5080" author="thiru_mg" created="Wed, 19 Oct 2011 13:20:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>89232</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80311</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-938] Some more warning when built on RHEL</title>
                <link>https://issues.apache.org/jira/browse/AVRO-938</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;A couple of more warnings show up when compiled on RedHat Linux.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527780">AVRO-938</key>
            <summary>Some more warning when built on RHEL</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2011 16:41:22 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:06 +0000</updated>
                            <resolved>Thu, 20 Oct 2011 04:50:42 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13131371" author="thiru_mg" created="Thu, 20 Oct 2011 04:50:42 +0000"  >&lt;p&gt;Committed revision 1186614.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499709" name="AVRO-938.patch" size="2070" author="thiru_mg" created="Wed, 19 Oct 2011 16:46:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>89277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-939] Java: optimize BinaryData#compareBytes() to use sun.misc.Unsafe when available</title>
                <link>https://issues.apache.org/jira/browse/AVRO-939</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Google&apos;s Guava libraries include an optimized implementation of lexicographic byte comparison based on sun.misc.Unsafe that&apos;s ~4x faster than the normal Java implementation.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hiroshiyamauchi.blogspot.com/2010/08/fast-unsigned-byte-lexicographical.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hiroshiyamauchi.blogspot.com/2010/08/fast-unsigned-byte-lexicographical.html&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.google.com/codesearch#UKMs0lhE9bg/trunk/src/com/google/common/primitives/UnsignedBytes.java&amp;amp;l=276&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.google.com/codesearch#UKMs0lhE9bg/trunk/src/com/google/common/primitives/UnsignedBytes.java&amp;amp;l=276&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We might similarly optimize BinaryData#compareBytes().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527998">AVRO-939</key>
            <summary>Java: optimize BinaryData#compareBytes() to use sun.misc.Unsafe when available</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Oct 2011 18:14:58 +0000</created>
                <updated>Thu, 26 Jul 2012 18:19:25 +0000</updated>
                                            <version>1.7.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13196397" author="fwiffo" created="Mon, 30 Jan 2012 20:34:59 +0000"  >&lt;p&gt;The Google Code Search link doesn&apos;t work because it&apos;s been shutdown. Here&apos;s a (hopefully) permanent link to the compare() method:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/primitives/UnsignedBytes.java?r=5fe70b8509b2a14787d3823b5f928ef399a7afdc#274&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/primitives/UnsignedBytes.java?r=5fe70b8509b2a14787d3823b5f928ef399a7afdc#274&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13417637" author="initialcontext" created="Wed, 18 Jul 2012 20:14:08 +0000"  >&lt;p&gt;I&apos;m going to try to upload a patch for this today&lt;/p&gt;</comment>
                            <comment id="13417745" author="initialcontext" created="Wed, 18 Jul 2012 22:09:52 +0000"  >&lt;p&gt;First version, I am fairly certain this uses the Guava Lexicographical byte comparator without any undue byte[] copying, but in order to support indexed comparisons in BinaryData#compareBytes() I do have to wrap the inputs in ByteBuffers temporarily.&lt;/p&gt;

&lt;p&gt;This does not make me happy, but did seem the the only way to do this? As long as we aren&apos;t copying our byte[] arguments, the use of the static ByteBuffer methods to wrap and slice the byte[] inputs down to indexed sizes is probably not too inefficient compared to the gains we get from the Guava (sun Unsafe based) comparator? Any thoughts? Is there a better way?&lt;/p&gt;</comment>
                            <comment id="13417767" author="cutting" created="Wed, 18 Jul 2012 22:33:03 +0000"  >&lt;p&gt;Look at the version in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7761&quot; title=&quot;Improve performance of raw comparisons&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7761&quot;&gt;&lt;del&gt;HADOOP-7761&lt;/del&gt;&lt;/a&gt;.  It handles this without creating wrapper ByteBuffers.&lt;/p&gt;

&lt;p&gt;Ideally we could just depend on hadoop-common and use the FastByteComparisons class there, but I don&apos;t think we should add a dependency on Hadoop 2.0.  So I think we need to instead copy FastByteComparisons.java into Avro.&lt;/p&gt;
</comment>
                            <comment id="13417792" author="initialcontext" created="Wed, 18 Jul 2012 22:50:02 +0000"  >&lt;p&gt;I&apos;ll do it now, thanks!&lt;/p&gt;</comment>
                            <comment id="13417876" author="initialcontext" created="Thu, 19 Jul 2012 00:04:14 +0000"  >&lt;p&gt;Is this a little more what you had in mind?&lt;/p&gt;</comment>
                            <comment id="13417888" author="initialcontext" created="Thu, 19 Jul 2012 00:20:31 +0000"  >&lt;p&gt;sorry, missed something. Passes mvn verify etc. now&lt;/p&gt;</comment>
                            <comment id="13417896" author="scott_carey" created="Thu, 19 Jul 2012 00:26:57 +0000"  >&lt;p&gt;Approach looks good.  The patch is adding guava as a dependency, we don&apos;t need that now, do we?&lt;/p&gt;

&lt;p&gt;A benchmark would be useful, is there something we can add to the test tree to measure this and the before/after?&lt;/p&gt;</comment>
                            <comment id="13417917" author="initialcontext" created="Thu, 19 Jul 2012 00:53:27 +0000"  >&lt;p&gt;I noticed in the FastByteComparisons file there were several references to the original Guava code! I realize what FBC does is expose the indexed comparisons that Guava does not, but I suspect Guava is already a part of Hadoop and not yet for Avro. &lt;/p&gt;

&lt;p&gt;Any reason not to replace the UnsignedBytes/Longs calls in FastByteComparisons with something from code already in Sun Java or in Avro already to avoid bringing the whole Guava library into Avro just for one file that already duplicates 90% of the Guava code we needed in the first place? Or is it time for Avro to import Guava anyway for future use?&lt;/p&gt;</comment>
                            <comment id="13417986" author="scott_carey" created="Thu, 19 Jul 2012 02:05:52 +0000"  >&lt;p&gt;I see, it is using a few utility methods from Guava.  Most of these look easily replaceable with small private methods.  I think we&apos;ll want a bigger reason to pull in guava, Avro already runs into enough downstream dependency conflicts with other libraries.&lt;/p&gt;</comment>
                            <comment id="13418427" author="initialcontext" created="Thu, 19 Jul 2012 16:43:38 +0000"  >&lt;p&gt;No longer requires Guava imports, everything is done within FastByteComparisons.java so it also avoids Hadoop dependencies.&lt;/p&gt;</comment>
                            <comment id="13418555" author="cutting" created="Thu, 19 Jul 2012 18:37:08 +0000"  >&lt;p&gt;Here&apos;s the same patch but with a benchmark added to Perf.java.  This can be run with:&lt;/p&gt;

&lt;p&gt;mvn exec:java -Dexec.classpathScope=&quot;test&quot; -Dexec.mainClass=&quot;org.apache.avro.io.Perf&quot; -Dexec.args=&quot;-bc&quot;&lt;/p&gt;

&lt;p&gt;On a 32-bit machine shorter byte arrays (~10 bytes) the older implementation is considerably faster.  For medium byte arrays (~100 bytes) they&apos;re about even, and for longer byte arrays (~1000 bytes) the new implementation is about 20% faster.&lt;/p&gt;

&lt;p&gt;Can someone try this with a 64-bit JVM?&lt;/p&gt;</comment>
                            <comment id="13418588" author="initialcontext" created="Thu, 19 Jul 2012 19:13:54 +0000"  >&lt;p&gt;I&apos;ll try it out, for one. Thanks for the help! Guava docs indicate it is on 64bit machines that this code really shines.&lt;/p&gt;</comment>
                            <comment id="13418676" author="initialcontext" created="Thu, 19 Jul 2012 21:19:28 +0000"  >&lt;p&gt;having a little trouble patching this back in, mvn is not finding Perf.java in org.apache.io? patch took just fine though. Also, in Perf code: usage string indicates new &quot;-nocompare&quot; option, but details.append() call names this &quot;-nocompute&quot; will this affect anything important?&lt;/p&gt;

&lt;p&gt;I ran patch -p0 &amp;lt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-939&quot; title=&quot;Java: optimize BinaryData#compareBytes() to use sun.misc.Unsafe when available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-939&quot;&gt;AVRO-939&lt;/a&gt;.patch from the lang/java/avro/ dir since the patch starts at &quot;src/&quot; dir.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13418687" author="cutting" created="Thu, 19 Jul 2012 21:33:03 +0000"  >&lt;p&gt;Oops.  I generated the patch from the wrong directory, but (cd lang/java/avro; patch -p 0 &amp;lt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-939&quot; title=&quot;Java: optimize BinaryData#compareBytes() to use sun.misc.Unsafe when available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-939&quot;&gt;AVRO-939&lt;/a&gt;.patch) should work, since all changes are under there.&lt;/p&gt;

&lt;p&gt;You need to first run &apos;mvn test-compile&apos; since Perf.java is in the test tree.  Sorry I forgot to mention that.&lt;/p&gt;</comment>
                            <comment id="13418706" author="initialcontext" created="Thu, 19 Jul 2012 21:50:29 +0000"  >&lt;p&gt;got it. will try it now. thanks again!&lt;/p&gt;</comment>
                            <comment id="13418757" author="initialcontext" created="Thu, 19 Jul 2012 22:58:51 +0000"  >&lt;p&gt;GOOD NEWS: tests ran through this time. BAD NEWS: I&apos;m on a 32bit kernel (sorry, this is my work machine and I&apos;m new to macs, was sure this was 64bit until I did uname -a):&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ByteCompare&amp;#93;&lt;/span&gt;&lt;br/&gt;
 readTests:true&lt;br/&gt;
 writeTests:true&lt;br/&gt;
 cycles=800&lt;br/&gt;
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle&lt;br/&gt;
           ByteCompareCompute:   1560 ms      32.041         0.000             0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD SUCCESS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 5.989s&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Thu Jul 19 15:52:59 PDT 2012&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 7M/81M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;I can try to get set up on 64 bit rig and see what happens. Anyone else get any results yet for 64 bit?&lt;/p&gt;</comment>
                            <comment id="13418796" author="scott_carey" created="Thu, 19 Jul 2012 23:36:33 +0000"  >&lt;p&gt;Macs are different than Linux or Windows &amp;#8211;  32 bit kernels can run 64 bit apps.  What does java -version say?&lt;/p&gt;</comment>
                            <comment id="13418894" author="qwertymaniac" created="Fri, 20 Jul 2012 03:04:45 +0000"  >&lt;p&gt;Yeah I think Eli did run it on x64 JVM, so it should be fine. Besides, I thought Snow Leopard alone did that 32 vs 64 thing, and its gone away in Lion now? Am wrong?&lt;/p&gt;

&lt;p&gt;Here&apos;s mine, from a *nix box with env info added, for Eli&apos;s benefit:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ByteCompare]
 readTests:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 writeTests:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 cycles=800
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle
           ByteCompareCompute:   2271 ms      22.015         0.000             0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;Linux &amp;lt;host&amp;gt; 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 23:56:34 BST 2012 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Intel(R) Xeon(R) CPU L5630 @ 2.13GHz&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;java version &quot;1.6.0_31&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_31-b04)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13419382" author="initialcontext" created="Fri, 20 Jul 2012 17:46:27 +0000"  >&lt;p&gt;nice! I did check java -version and its 64bit hotspot so we&apos;re good. I&apos;m used to Linux uname dump where 64 bit is &quot;x86_64&quot; this dump said I386, didn&apos;t know what that meant in mac universe. Thanks again!&lt;/p&gt;</comment>
                            <comment id="13419384" author="initialcontext" created="Fri, 20 Jul 2012 17:48:31 +0000"  >&lt;p&gt;wait a minute, if you meant 32 bit kernel running 64 bit hotspot thats still no good for a real 64 bit benchmark, is it?&lt;/p&gt;</comment>
                            <comment id="13419511" author="cutting" created="Fri, 20 Jul 2012 20:08:07 +0000"  >&lt;p&gt;Folks seem to only be running the benchmark after the change.  You need to &apos;svn revert src/main/java/org/apache/avro/io/BinaryData.java&apos; and run it again to see what the performance is like without the change.  You might also try changing the LENGTH constant in Perf.java to 10 and to 1000 to see how that changes things.&lt;/p&gt;

&lt;p&gt;Given the results I saw, unless we can make the new version much faster on shorter byte arrays we&apos;d need to change things to only use the optimized version for longer arrays (&amp;gt; 100 bytes) so that performance is never slower.  Even that&apos;s probably only worthwhile if performance on 64-bit systems is significantly better than the current implementation.&lt;/p&gt;</comment>
                            <comment id="13419540" author="scott_carey" created="Fri, 20 Jul 2012 20:36:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;wait a minute, if you meant 32 bit kernel running 64 bit hotspot thats still no good for a real 64 bit benchmark, is it?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is fine.  If the JVM says it is 64 bit, then it is getting the benefit of the 64 bit registers and operations in user-space, which is what we need to measure here.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Given the results I saw, unless we can make the new version much faster on shorter byte arrays we&apos;d need to change things to only use the optimized version for longer arrays (&amp;gt; 100 bytes) so that performance is never slower. Even that&apos;s probably only worthwhile if performance on 64-bit systems is significantly better than the current implementation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It looks like there are some opportunities to make this code faster.  The method seems large, breaking it up may help Hotspot since it profiles at the method level and has more optimizations enabled for smaller methods.  Using an abstract class instead of interface might help.  We may be able to reduce the number of conditionals or present them to the JIT in a way that leads to better profiling and optimization. &lt;/p&gt;</comment>
                            <comment id="13419549" author="initialcontext" created="Fri, 20 Jul 2012 20:48:19 +0000"  >&lt;p&gt;There could be some useful notes in the Hadoop thread where they developed this class &amp;#8211; I just copied it over from there. Odd that they didn&apos;t break up the code as you mentioned, sounds reasonable. Good catch on the tests, of course that makes a difference (duh) I will attempt a trunk build and retest ASAP since the word is my 32 bit macbook running 64bit JVM is OK for benchmarking.&lt;/p&gt;</comment>
                            <comment id="13420751" author="initialcontext" created="Mon, 23 Jul 2012 16:19:37 +0000"  >&lt;p&gt;So here&apos;s my results WITH the patch, compiling and testing without now, I&apos;ll post those in a moment...&lt;/p&gt;


&lt;p&gt;&amp;#8212; 1000 bytes, with patch, 64bit jvm &amp;#8212;&lt;br/&gt;
Executing tests: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ByteCompare&amp;#93;&lt;/span&gt;&lt;br/&gt;
 readTests:true&lt;br/&gt;
 writeTests:true&lt;br/&gt;
 cycles=800&lt;br/&gt;
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle&lt;br/&gt;
           ByteCompareCompute:  13696 ms       3.650         0.000             0&lt;/p&gt;

&lt;p&gt;&amp;#8212; 100 bytes, with patch, 64bit jvm &amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ByteCompare&amp;#93;&lt;/span&gt;&lt;br/&gt;
 readTests:true&lt;br/&gt;
 writeTests:true&lt;br/&gt;
 cycles=800&lt;br/&gt;
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle&lt;br/&gt;
           ByteCompareCompute:   1570 ms      31.838         0.000             0&lt;/p&gt;

&lt;p&gt;&amp;#8212; 10 bytes, with patch, 64bit jvm &amp;#8212;&lt;br/&gt;
Executing tests: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ByteCompare&amp;#93;&lt;/span&gt;&lt;br/&gt;
 readTests:true&lt;br/&gt;
 writeTests:true&lt;br/&gt;
 cycles=800&lt;br/&gt;
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle&lt;br/&gt;
           ByteCompareCompute:   1100 ms      45.446         0.000             0&lt;/p&gt;</comment>
                            <comment id="13420765" author="initialcontext" created="Mon, 23 Jul 2012 16:36:52 +0000"  >&lt;p&gt;&amp;#8212; 1000 bytes, trunk, 64bit jvm &amp;#8212;&lt;br/&gt;
Executing tests: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ByteCompare&amp;#93;&lt;/span&gt;&lt;br/&gt;
 readTests:true&lt;br/&gt;
 writeTests:true&lt;br/&gt;
 cycles=800&lt;br/&gt;
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle&lt;br/&gt;
           ByteCompareCompute:  17129 ms       2.919         0.000             0&lt;/p&gt;

&lt;p&gt;&amp;#8212; 100 bytes, trunk, 64bit jvm &amp;#8212;&lt;br/&gt;
Executing tests: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ByteCompare&amp;#93;&lt;/span&gt;&lt;br/&gt;
 readTests:true&lt;br/&gt;
 writeTests:true&lt;br/&gt;
 cycles=800&lt;br/&gt;
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle&lt;br/&gt;
           ByteCompareCompute:   2286 ms      21.864         0.000             0&lt;/p&gt;

&lt;p&gt;&amp;#8212; 10 bytes, trunk, 64bit jvm &amp;#8212;&lt;br/&gt;
Executing tests: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ByteCompare&amp;#93;&lt;/span&gt;&lt;br/&gt;
 readTests:true&lt;br/&gt;
 writeTests:true&lt;br/&gt;
 cycles=800&lt;br/&gt;
                    test name     time    M entries/sec   M bytes/sec  bytes/cycle&lt;br/&gt;
           ByteCompareCompute:    999 ms      50.024         0.000             0&lt;/p&gt;</comment>
                            <comment id="13420772" author="tlipcon" created="Mon, 23 Jul 2012 16:46:02 +0000"  >&lt;p&gt;So, if I&apos;m reading this correctly, the patch gives 20-30% speedup for 1000-byte and 100-byte, and ~10% slowdown for 10 byte?&lt;/p&gt;</comment>
                            <comment id="13420794" author="scott_carey" created="Mon, 23 Jul 2012 17:14:23 +0000"  >&lt;p&gt;That is what it looks like &amp;#8211; a modest gain for larger sizes and a loss for smaller sizes.  I have not had time to look into more details.  I suspect there are some ways to improve the 10 byte time.  It would be useful to see a few other data points around that &amp;#8211; 5 bytes, 25 bytes, 50 bytes.    The slowdown for smaller sizes is an issue, and the modest improvement for larger ones is a surprise.  There may be something getting in the way of better improvements there as well &amp;#8211; or the JVM is doing a better job than expected optimizing this.&lt;/p&gt;</comment>
                            <comment id="13420861" author="thiru_mg" created="Mon, 23 Jul 2012 18:38:10 +0000"  >&lt;p&gt;We seem to violate principles of good programming by using something that is not a part of published API and by accessing private stuff through reflection. The designers of Unsafe would have thought enough and decided to keep it out of the published API and declaring the function private.&lt;/p&gt;

&lt;p&gt;This is setting a bad precedent. The code will not compile where com.sun.Unsafe is not available. There is no guarantee that it will be present in any Java distribution. Neither is there a guarantee that this will be present in Sun&apos;s (Oracle&apos;s) distribution in later releases.&lt;/p&gt;

&lt;p&gt;Traditionally, Java has done not so great job in defining module boundaries. (Package-private is of some use, but not really a great facility). Hadoop community, for example, has taken pains to annotate classes and interfaces to indicate their accessibility outside the module. Java language is trying to fix it in Java 8 using Jigsaw. Once that is in, probably this patch won&apos;t work.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if marginal performance improvement in a micro-benchmark is a good enough reason. Do we have evidence that this patch would significantly improve performance in a real application?&lt;/p&gt;

&lt;p&gt;Probably, this debate has happened and settled in the Hadoop community or they considered it a Guava&apos;s internal matter. Since we decided to use &quot;Unsafe&quot; directly, we should have an opinion. I&apos;m raising it here because even if we accept this patch, I think, we should acknowledge that we are doing it with full knowledge of its consequences.&lt;/p&gt;</comment>
                            <comment id="13423319" author="initialcontext" created="Thu, 26 Jul 2012 18:19:25 +0000"  >&lt;p&gt;FYI, this is copied directly from the Hadoop code (same filename etc.) so they definitely must have had this debate somewhere, they did not use the verbatim Guava version of this. I wonder what their numbers were like? I agree for a small win this might not be worth the trouble.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12527984">HADOOP-7761</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12537083" name="AVRO-939-1.patch" size="2941" author="initialcontext" created="Wed, 18 Jul 2012 22:10:09 +0000"/>
                            <attachment id="12537101" name="AVRO-939-2.patch" size="9809" author="initialcontext" created="Thu, 19 Jul 2012 00:04:14 +0000"/>
                            <attachment id="12537103" name="AVRO-939-3.patch" size="9805" author="initialcontext" created="Thu, 19 Jul 2012 00:20:31 +0000"/>
                            <attachment id="12537210" name="AVRO-939-4.patch" size="9517" author="initialcontext" created="Thu, 19 Jul 2012 16:43:38 +0000"/>
                            <attachment id="12537224" name="AVRO-939.patch" size="16559" author="cutting" created="Thu, 19 Jul 2012 18:37:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Jan 2012 20:34:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92533</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3ef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80313</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-940] C++ design for generic datum could be better.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-940</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The template functions &lt;tt&gt;avro::encode()&lt;/tt&gt; and &lt;tt&gt;avro::decode&lt;/tt&gt; along with &lt;tt&gt;codec_traits&lt;/tt&gt; has a clean way of encoding and decoding built-in C++ types corresponding to Avro types and types generated by the code generator. However, encoding and decoding &lt;tt&gt;GenricDatum&lt;/tt&gt; is clunky. It uses &lt;tt&gt;std::pair&lt;/tt&gt; and schema objects make makes it hard for programmers to grasp and use. Added complexity is due to use of reference in &lt;tt&gt;pair&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The forthcoming patch simplifies this and makes things uniform.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528143">AVRO-940</key>
            <summary>C++ design for generic datum could be better.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Oct 2011 05:14:20 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:03 +0000</updated>
                            <resolved>Fri, 21 Oct 2011 14:58:55 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13132722" author="thiru_mg" created="Fri, 21 Oct 2011 14:58:55 +0000"  >&lt;p&gt;Committed revision 1187383.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500094" name="AVRO-940.patch" size="25496" author="thiru_mg" created="Fri, 21 Oct 2011 05:28:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80314</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-941] Avro should support the Apache Maven Shade plugin class relocation feature</title>
                <link>https://issues.apache.org/jira/browse/AVRO-941</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The Apache shade plugin allows maven builds to create an uber jar that contains dependencies in the project.  In addition, the shade plugin allows you to relocate dependencies into a private namespace to prevent class conflicts on shared class paths.  Avro does not support relocation.&lt;/p&gt;

&lt;p&gt;All generated Avro objects contain a string field named SCHEMA$ which serves as the authority for the class namespace.  When the shade plugin updates the byte code to relocate the class, it doesn&apos;t alter the SCHEMA$ string.  This break Avro use of reflection since the namespace in SCHEMA$ points to an incorrect location.&lt;/p&gt;

&lt;p&gt;I spoke with Doug about the issue and he was kind enough to provide a quick hack in order to fix this issue.  The hack is to check for mismatches between the byte code and the SCHEMA$ and, when they don&apos;t match, to defer to the byte code.  I&apos;ll attach Doug&apos;s patch to this Jira.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12528397">AVRO-941</key>
            <summary>Avro should support the Apache Maven Shade plugin class relocation feature</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="massie">Matt Massie</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Oct 2011 22:00:45 +0000</created>
                <updated>Tue, 1 Nov 2011 18:35:57 +0000</updated>
                            <resolved>Fri, 28 Oct 2011 22:14:23 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13133497" author="massie" created="Sat, 22 Oct 2011 22:02:48 +0000"  >&lt;p&gt;Doug&apos;s patch against 1.5.4.&lt;/p&gt;</comment>
                            <comment id="13133511" author="philip" created="Sat, 22 Oct 2011 23:02:24 +0000"  >&lt;p&gt;Instead of doing string substitution, the patch should probably only substitute the namespace field specifically.  If someone had the classname in a comment, it shouldn&apos;t be replaced, for example.&lt;/p&gt;

&lt;p&gt;Otherwise, I&apos;m a big fan of being able to shade avro when necessary.&lt;/p&gt;</comment>
                            <comment id="13134406" author="cutting" created="Mon, 24 Oct 2011 19:41:02 +0000"  >&lt;p&gt;&amp;gt; the patch should probably only substitute the namespace field specifically&lt;/p&gt;

&lt;p&gt;That&apos;s a flaw, but probably not the most critical one.  Avro identifiers cannot contain dots except in namespaces.  So as long as the package name contains a dot (which most do) then the global replace should not harm the schema.  Fixing this requires a fair amount of code, walking the schema and creating a copy with things renamed.  (We already do this in a few places, so probably we should create a SchemaVisitor API to simplify this, but that&apos;s a separate issue.)&lt;/p&gt;

&lt;p&gt;Note that this approach will always be flawed, since it won&apos;t always be able to perfectly reconstruct the relocations used when shading.  However replacement is only attempted when things are already broken, so it does no harm and imperfections are thus tolerable.&lt;/p&gt;

&lt;p&gt;Probably the biggest flaw of the current patch is that it will fails if nested schemas are not all in the same namespace.  To address this we might look for a common suffix or prefix in the new and old package and then replace the differing text.  For example, if the current class is com.baz.hidden.org.foo.Bar and the schema is org.foo.Bar then the replacement should be to prefix all namespaces with com.baz.hidden.&lt;/p&gt;

&lt;p&gt;I&apos;d be happy to see such improvements to this patch, but I&apos;d not object to it being committed more-or-less as-is since it does no harm.&lt;/p&gt;</comment>
                            <comment id="13138658" author="cutting" created="Fri, 28 Oct 2011 19:11:21 +0000"  >&lt;p&gt;I&apos;ll commit this soon unless someone objects.  It&apos;s not perfect but it&apos;s better than nothing.&lt;/p&gt;</comment>
                            <comment id="13138847" author="cutting" created="Fri, 28 Oct 2011 22:14:23 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500337" name="shade.patch" size="1709" author="massie" created="Sat, 22 Oct 2011 22:02:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 22 Oct 2011 23:02:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214257</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-942] Java ReflectData should add default value null for @Nullable fields </title>
                <link>https://issues.apache.org/jira/browse/AVRO-942</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Java ReflectData should add default value null for @Nullable fields&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528407">AVRO-942</key>
            <summary>Java ReflectData should add default value null for @Nullable fields </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="decster">Binglin Chang</assignee>
                                    <reporter username="decster">Binglin Chang</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 Oct 2011 06:34:19 +0000</created>
                <updated>Tue, 13 Dec 2011 19:06:55 +0000</updated>
                            <resolved>Mon, 24 Oct 2011 21:07:50 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13134486" author="cutting" created="Mon, 24 Oct 2011 21:07:50 +0000"  >&lt;p&gt;This is a great fix.  I just committed it.  Thanks for providing this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500358" name="AVRO-942.v1.patch" size="2574" author="decster" created="Sun, 23 Oct 2011 06:35:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Oct 2011 21:07:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80316</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-943] TestNettyServerWithCallbacks sometimes hangs</title>
                <link>https://issues.apache.org/jira/browse/AVRO-943</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I&apos;m periodically seeing tests hang in TestNettyServerWithCallbacks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528706">AVRO-943</key>
            <summary>TestNettyServerWithCallbacks sometimes hangs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbaldassari">James Baldassari</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2011 16:19:16 +0000</created>
                <updated>Tue, 15 Nov 2011 17:30:28 +0000</updated>
                            <resolved>Tue, 1 Nov 2011 19:10:00 +0000</resolved>
                                                    <fixVersion>1.6.1</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13135194" author="cutting" created="Tue, 25 Oct 2011 16:20:51 +0000"  >&lt;p&gt;Here&apos;s the thread dump.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Full thread dump Java HotSpot(TM) Server VM (17.1-b03 mixed mode):
&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O client boss #2&quot;&lt;/span&gt; prio=10 tid=0x6e8eec00 nid=0x4222 waiting on condition [0x6e5ad000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x9edf6c58&amp;gt; (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:842)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1178)
	at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(ReentrantReadWriteLock.java:807)
	at org.apache.avro.ipc.NettyTransceiver.disconnect(NettyTransceiver.java:191)
	at org.apache.avro.ipc.NettyTransceiver.disconnect(NettyTransceiver.java:180)
	at org.apache.avro.ipc.NettyTransceiver.access$200(NettyTransceiver.java:59)
	at org.apache.avro.ipc.NettyTransceiver$NettyClientAvroHandler.handleUpstream(NettyTransceiver.java:361)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:783)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.cleanup(FrameDecoder.java:344)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.channelClosed(FrameDecoder.java:232)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:98)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireChannelClosed(Channels.java:404)
	at org.jboss.netty.channel.socket.nio.NioWorker.close(NioWorker.java:602)
	at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink.eventSunk(NioClientSocketPipelineSink.java:91)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:771)
	at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:60)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:582)
	at org.jboss.netty.channel.Channels.close(Channels.java:720)
	at org.jboss.netty.channel.AbstractChannel.close(AbstractChannel.java:200)
	at org.jboss.netty.channel.ChannelFutureListener$2.operationComplete(ChannelFutureListener.java:57)
	at org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:381)
	at org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:367)
	at org.jboss.netty.channel.DefaultChannelFuture.setFailure(DefaultChannelFuture.java:334)
	at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.connect(NioClientSocketPipelineSink.java:389)
	at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.processSelectedKeys(NioClientSocketPipelineSink.java:354)
	at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.run(NioClientSocketPipelineSink.java:276)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O client worker #1-1&quot;&lt;/span&gt; prio=10 tid=0x6eaedc00 nid=0x4220 runnable [0x6e75c000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:210)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
	- locked &amp;lt;0x9e8fdbc0&amp;gt; (a sun.nio.ch.Util$1)
	- locked &amp;lt;0x9e8fdbb0&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x9e8fd9c8&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:38)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:165)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O server worker #1-1&quot;&lt;/span&gt; prio=10 tid=0x09387c00 nid=0x421e runnable [0x6e7fe000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:210)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
	- locked &amp;lt;0x9e783cc8&amp;gt; (a sun.nio.ch.Util$1)
	- locked &amp;lt;0x9e783cb8&amp;gt; (a java.util.Collections$UnmodifiableSet)
	- locked &amp;lt;0x9e783ad0&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:38)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:165)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O server boss #1 ([id: 0x008238f4, /0:0:0:0:0:0:0:0:51208])&quot;&lt;/span&gt; prio=10 tid=0x6e84d400 nid=0x421d runnable [0x6eb5c000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:137)
	- locked &amp;lt;0x9e6bf3d0&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink$Boss.run(NioServerSocketPipelineSink.java:244)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;span class=&quot;code-quote&quot;&gt;&quot;Low Memory Detector&quot;&lt;/span&gt; daemon prio=10 tid=0x6f2aac00 nid=0x421b runnable [0x00000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
&lt;span class=&quot;code-quote&quot;&gt;&quot;CompilerThread1&quot;&lt;/span&gt; daemon prio=10 tid=0x6f2a9000 nid=0x421a waiting on condition [0x00000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
&lt;span class=&quot;code-quote&quot;&gt;&quot;CompilerThread0&quot;&lt;/span&gt; daemon prio=10 tid=0x6f2a7000 nid=0x4219 waiting on condition [0x00000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
&lt;span class=&quot;code-quote&quot;&gt;&quot;Signal Dispatcher&quot;&lt;/span&gt; daemon prio=10 tid=0x6f2a5800 nid=0x4218 waiting on condition [0x00000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
&lt;span class=&quot;code-quote&quot;&gt;&quot;Finalizer&quot;&lt;/span&gt; daemon prio=10 tid=0x6f295c00 nid=0x4217 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x6f015000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x9f4302d8&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
	- locked &amp;lt;0x9f4302d8&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)
&lt;span class=&quot;code-quote&quot;&gt;&quot;Reference Handler&quot;&lt;/span&gt; daemon prio=10 tid=0x6f294800 nid=0x4216 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x6f066000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x9f434070&amp;gt; (a java.lang.ref.Reference$Lock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
	- locked &amp;lt;0x9f434070&amp;gt; (a java.lang.ref.Reference$Lock)
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=10 tid=0x0922c400 nid=0x4210 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0xb6b16000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x9f040470&amp;gt; (a org.jboss.netty.channel.DefaultChannelFuture)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at org.jboss.netty.channel.DefaultChannelFuture.awaitUninterruptibly(DefaultChannelFuture.java:211)
	- locked &amp;lt;0x9f040470&amp;gt; (a org.jboss.netty.channel.DefaultChannelFuture)
	at org.apache.avro.ipc.NettyTransceiver.getChannel(NettyTransceiver.java:160)
	at org.apache.avro.ipc.NettyTransceiver.getRemoteName(NettyTransceiver.java:254)
	at org.apache.avro.ipc.Requestor.writeHandshake(Requestor.java:202)
	at org.apache.avro.ipc.Requestor.access$300(Requestor.java:52)
	at org.apache.avro.ipc.Requestor$Request.getBytes(Requestor.java:478)
	at org.apache.avro.ipc.Requestor.request(Requestor.java:147)
	at org.apache.avro.ipc.Requestor.request(Requestor.java:129)
	at org.apache.avro.ipc.specific.SpecificRequestor.invoke(SpecificRequestor.java:68)
	at $Proxy9.add(Unknown Source)
	at org.apache.avro.ipc.TestNettyServerWithCallbacks.testSendAfterChannelClose(TestNettyServerWithCallbacks.java:308)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
	at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
	at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
	at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:81)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13135210" author="cutting" created="Tue, 25 Oct 2011 16:36:59 +0000"  >&lt;p&gt;It hangs around one time in 10.&lt;/p&gt;

&lt;p&gt;I can reproduce this by running TestNettyServerWithCallbacks in a loop, e.g.:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; ); &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; mvn test -Dtest=TestNettyServerWithCallbacks; done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13135225" author="jbaldassari" created="Tue, 25 Oct 2011 16:51:28 +0000"  >&lt;p&gt;Thanks for logging this issue.  I&apos;ve noticed this behavior too, and it has been on my radar for a while to try to figure out what&apos;s going on.  I saved a stack trace the last time I noticed it, and it&apos;s very similar to yours.  The most important parts seem to be the main thread waiting on org.jboss.netty.channel.DefaultChannelFuture.awaitUninterruptibly() and the Netty thread trying to acquire the write lock in org.apache.avro.ipc.NettyTransceiver.disconnect(boolean, boolean):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;main [WAITING] CPU time: 0:00
org.jboss.netty.channel.DefaultChannelFuture.awaitUninterruptibly()
org.apache.avro.ipc.NettyTransceiver.getChannel()
org.apache.avro.ipc.NettyTransceiver.getRemoteName()
org.apache.avro.ipc.Requestor.writeHandshake(Encoder)
org.apache.avro.ipc.Requestor.access$3(Requestor, Encoder)
org.apache.avro.ipc.Requestor$Request.getBytes()
org.apache.avro.ipc.Requestor.request(Requestor$Request, Callback)
org.apache.avro.ipc.Requestor.request(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, Callback)
org.apache.avro.ipc.specific.SpecificRequestor.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, Method, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[])
$Proxy10.add(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, Callback)
org.apache.avro.ipc.TestNettyServerWithCallbacks.testSendAfterChannelClose()
org.junit.runners.ParentRunner.run(RunNotifier)
org.apache.maven.surefire.junit4.JUnit4TestSet.execute(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;, RunNotifier)
org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;, Reporter, &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;, RunNotifier)
org.apache.maven.surefire.junit4.JUnit4Provider.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
java.lang.reflect.Method.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[])
org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, Method, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[])
$Proxy0.invoke(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;)
org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, File, Properties)
org.apache.maven.surefire.booter.ForkedBooter.main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;New I/O client boss #2 [WAITING] CPU time: 0:00
java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock()
org.apache.avro.ipc.NettyTransceiver.disconnect(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
org.apache.avro.ipc.NettyTransceiver.disconnect()
org.apache.avro.ipc.NettyTransceiver.access$200(NettyTransceiver)
org.apache.avro.ipc.NettyTransceiver$NettyClientAvroHandler.handleUpstream(ChannelHandlerContext, ChannelEvent)
java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll try to find some time this week to dig deeper on this.&lt;/p&gt;</comment>
                            <comment id="13135230" author="jbaldassari" created="Tue, 25 Oct 2011 16:55:39 +0000"  >&lt;p&gt;It also looks like it&apos;s the testSendAfterChannelClose test that triggers the issue.&lt;/p&gt;</comment>
                            <comment id="13137626" author="jbaldassari" created="Thu, 27 Oct 2011 22:15:45 +0000"  >&lt;p&gt;The root of the problem seems to be the unbounded waiting on the connect future (channelFuture.awaitUninterruptibly()) when NettyTransceiver attempts to connect to the remote peer.  Under some circumstances this call never returns.  I have a patch which addresses the issue by making sure that we always supply a connection timeout.  I added new NettyTransceiver constructors for specifying the connection timeout.  Backward compatibility is preserved by using a default connection timeout if none is specified.  I picked 60 seconds for the default timeout, but let me know if you think a different value is more appropriate.  In the unit tests I&apos;ve set the connection timeout to 2 seconds.  I ran these in a loop as you did, and I haven&apos;t seen any more hanging.  Please try out the patch and verify when you get a chance.&lt;/p&gt;

&lt;p&gt;I&apos;ve also addressed the concerns in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-848&quot; title=&quot;Duplicate/confusing exception logging in NettyTransceiver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-848&quot;&gt;&lt;del&gt;AVRO-848&lt;/del&gt;&lt;/a&gt; by removing some log statements and changing others to debug level.&lt;/p&gt;</comment>
                            <comment id="13137630" author="jbaldassari" created="Thu, 27 Oct 2011 22:16:44 +0000"  >&lt;p&gt;Here&apos;s the patch.  I haven&apos;t tried applying this to 1.5, but it shouldn&apos;t be much work to adapt it.  Let me know if you want me to work on that.&lt;/p&gt;</comment>
                            <comment id="13138683" author="cutting" created="Fri, 28 Oct 2011 19:38:19 +0000"  >&lt;p&gt;This still hangs sometimes for me.  I&apos;ve attached the full stack dump.  It includes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Found one Java-level deadlock:
=============================
&lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O client worker #3-1&quot;&lt;/span&gt;:
  waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ownable synchronizer 0x9ee22be0, (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync),
  which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt;:
  waiting to lock monitor 0x08a57b9c (object 0x9ee233a8, a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;),
  which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;New I/O client worker #3-1&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13138872" author="jbaldassari" created="Fri, 28 Oct 2011 22:34:01 +0000"  >&lt;p&gt;OK, I guess I didn&apos;t loop my test enough times.  I think this deadlock is different from the one reported originally, and I think it may have to do with the other ChannelFuture.waitUninterruptibly() call in NettyTransceiver.disconnect() when the channel is closed.  I&apos;ll take another look at it over the weekend.&lt;/p&gt;</comment>
                            <comment id="13139808" author="jbaldassari" created="Sun, 30 Oct 2011 22:22:41 +0000"  >&lt;p&gt;Here&apos;s a second version of the patch.  In this version the connection is not closed while the write lock is held, and a timeout is used while waiting for the connection to be closed.  I ran the test in a loop 100 consecutive times, and I has never hung for me.&lt;/p&gt;</comment>
                            <comment id="13139809" author="jbaldassari" created="Sun, 30 Oct 2011 22:29:26 +0000"  >&lt;p&gt;I also added a custom ThreadFactory that names the threads used in the Netty thread pools, e.g. &quot;Avro NettyTransceiver I/O Worker 0&quot;.  This should make it easier to debug issues like this in the future.&lt;/p&gt;</comment>
                            <comment id="13140903" author="jbaldassari" created="Tue, 1 Nov 2011 04:18:30 +0000"  >&lt;p&gt;A third version of the patch that provides the ability to specify all Netty ClientBootstrap options if necessary.  The options are passed as a Map&amp;lt;String, Object&amp;gt; to the NettyTransceiver constructor.  I&apos;ve tested this in trunk and the 1.5 branch, and I haven&apos;t seen any deadlocks/hanging.&lt;/p&gt;</comment>
                            <comment id="13141474" author="cutting" created="Tue, 1 Nov 2011 19:10:00 +0000"  >&lt;p&gt;I committed this.  Thanks, James!&lt;/p&gt;</comment>
                            <comment id="13141510" author="jbaldassari" created="Tue, 1 Nov 2011 19:57:05 +0000"  >&lt;p&gt;Thanks, Doug.  I think you can also close out &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-848&quot; title=&quot;Duplicate/confusing exception logging in NettyTransceiver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-848&quot;&gt;&lt;del&gt;AVRO-848&lt;/del&gt;&lt;/a&gt; now, or at least ask the reporter to verify whether the problem still exists after applying the &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-943&quot; title=&quot;TestNettyServerWithCallbacks sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-943&quot;&gt;&lt;del&gt;AVRO-943&lt;/del&gt;&lt;/a&gt; patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12512450">AVRO-848</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12501536" name="AVRO-943-v2.patch" size="13868" author="jbaldassari" created="Sun, 30 Oct 2011 22:22:41 +0000"/>
                            <attachment id="12501733" name="AVRO-943-v3.patch" size="16466" author="jbaldassari" created="Tue, 1 Nov 2011 04:18:30 +0000"/>
                            <attachment id="12501168" name="AVRO-943.patch" size="11606" author="jbaldassari" created="Thu, 27 Oct 2011 22:16:43 +0000"/>
                            <attachment id="12501352" name="hang.log" size="32925" author="cutting" created="Fri, 28 Oct 2011 19:38:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Oct 2011 16:51:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3fb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80317</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-944] Java: reduce-side combine uses wrong serializer</title>
                <link>https://issues.apache.org/jira/browse/AVRO-944</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When a reduce-side combine is run, Avro&apos;s mapreduce API incorrectly uses the final output serializer rather than the map-output serializer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528708">AVRO-944</key>
            <summary>Java: reduce-side combine uses wrong serializer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2011 16:33:24 +0000</created>
                <updated>Tue, 1 Nov 2011 18:35:58 +0000</updated>
                            <resolved>Fri, 28 Oct 2011 22:24:37 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13135214" author="cutting" created="Tue, 25 Oct 2011 16:41:34 +0000"  >&lt;p&gt;Here&apos;s a patch that should fix this.  It would be difficult to write a test for this.  Can someone who&apos;s seen this bug please verify whether this fixes things?&lt;/p&gt;</comment>
                            <comment id="13138808" author="cutting" created="Fri, 28 Oct 2011 21:46:32 +0000"  >&lt;p&gt;eclark reported some success with this patch on IRC but intended to do more testing.&lt;/p&gt;

&lt;p&gt;I intend to commit this and include it in a new 1.6.0 RC on Monday.&lt;/p&gt;</comment>
                            <comment id="13138861" author="cutting" created="Fri, 28 Oct 2011 22:24:37 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                            <comment id="13139392" author="julien.muller" created="Sat, 29 Oct 2011 18:35:13 +0000"  >&lt;p&gt;I have jobs that presented the same symptoms when having a combiner. &lt;br/&gt;
We ran some testing on our jobs with this patch on 1.5.1 and the result is successful. &lt;br/&gt;
This is good news that this patch will be included in the RC, since using the combiner divided the job execution time by 30!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500715" name="AVRO-944.patch" size="1667" author="cutting" created="Tue, 25 Oct 2011 16:41:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Oct 2011 18:35:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
