<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:20:15 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2014-4-28+AND+created+%3C%3D+2014-5-7+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="5" total="5"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1500] Unknown datum type exception during union type resolution (no short to int conversion).</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1500</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;There is a conversion for values of type &lt;tt&gt;short&lt;/tt&gt; (and other numeric types) if in the schema they are declared as int:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;/lang/java/avro/src/main/java/org/apache/avro/generic/GenericDatumWriter.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void write(Schema schema, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum, Encoder out)
    &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (schema.getType()) {
        &lt;span class=&quot;code-comment&quot;&gt;// ...
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; INT:     out.writeInt(((&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;)datum).intValue()); &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
        &lt;span class=&quot;code-comment&quot;&gt;// ...&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, if a value of &lt;tt&gt;short&lt;/tt&gt; type is passed to INT field, it will be converted and saved as INT in avro.&lt;/p&gt;

&lt;p&gt;But, when there is next field in schema: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; [&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;thrift&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;&quot;&lt;/span&gt;}] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is a union with int in it, and short is passed in (lets say 5), then we are having the next exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.avro.AvroRuntimeException: Unknown datum type: 5
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData.getSchemaName(GenericData.java:593)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData.resolveUnion(GenericData.java:558)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.resolveUnion(GenericDatumWriter.java:144) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happens because in &lt;tt&gt;org.apache.avro.generic.GenericData&lt;/tt&gt; there is no check if the passed object has a type of &lt;tt&gt;java.lang.Short&lt;/tt&gt;, and it is not get converted then in &lt;tt&gt;write&lt;/tt&gt; method of &lt;tt&gt;GenericDatumWriter&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/** Return the schema full name &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a datum.  Called by {@link
   * #resolveUnion(Schema,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)}. */
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSchemaName(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum) {
&lt;span class=&quot;code-comment&quot;&gt;/* ... */&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isInteger(datum))
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.INT.getName();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isLong(datum))
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.LONG.getName();
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isFloat(datum))
 &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.FLOAT.getName();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isDouble(datum))
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.DOUBLE.getName();
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isBoolean(datum))
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.BOOLEAN.getName();
&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AvroRuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unknown datum type: &quot;&lt;/span&gt;+datum);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This error initially occured during thrift to avro conversion, when thrift obj had optional field of type i16.&lt;br/&gt;
In thrift to avro schema converter, if the type is short in thrift (i16) it will be implicitly converted to int in avro-schema, so the values should be converted as well. This is already done if they are not in the union (not optional). Otherwise the exception is thrown.&lt;br/&gt;
The snippet from schema conversion code is below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;lang/java/thrift/src/main/java/org/apache/avro/thrift/ThriftData.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Schema getSchema(FieldValueMetaData f) {
  &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (f.type) {
  &lt;span class=&quot;code-comment&quot;&gt;/* ... */&lt;/span&gt; 
    &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; TType.I16:
      Schema s = Schema.create(Schema.Type.INT);
      s.addProp(THRIFT_PROP, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; s;
   &lt;span class=&quot;code-comment&quot;&gt;/* ... */&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Proposal is to add isShort check to generic data, as well as isShort method implementation:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSchemaName(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum) {
&lt;span class=&quot;code-comment&quot;&gt;// ..
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isInteger(datum) || isShort(datum))
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.INT.getName();
&lt;span class=&quot;code-comment&quot;&gt;// ..&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or maybe even some kind of isNumeric method, so the behaviour will be same for INT fields and INT fields that are in Union.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java API&lt;/p&gt;</environment>
        <key id="12711462">AVRO-1500</key>
            <summary>Unknown datum type exception during union type resolution (no short to int conversion).</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pershyn">Michael Pershyn</assignee>
                                    <reporter username="pershyn">Michael Pershyn</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>newbie</label>
                            <label>patch</label>
                    </labels>
                <created>Wed, 30 Apr 2014 13:38:41 +0000</created>
                <updated>Thu, 24 Jul 2014 20:16:13 +0000</updated>
                            <resolved>Fri, 6 Jun 2014 21:57:57 +0000</resolved>
                                    <version>1.7.4</version>
                    <version>1.7.5</version>
                    <version>1.7.6</version>
                                    <fixVersion>1.7.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14009761" author="pershyn" created="Tue, 27 May 2014 15:11:13 +0000"  >&lt;p&gt;Added a patch that have fixed this problem in our case. With this patch the conversion of thrift-objects with optional int16 fields is correct.&lt;br/&gt;
Also, isNumber check was not added because Long is a different type, so only two cases should be checked.&lt;br/&gt;
Please review &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14009763" author="pershyn" created="Tue, 27 May 2014 15:13:35 +0000"  >&lt;p&gt;I have used git to generate the patch with command: &lt;br/&gt;
`git --no-pager diff --no-prefix`&lt;/p&gt;

&lt;p&gt;So I am not sure with svn compatibility, but It should be applicable with `patch -p0 &amp;lt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1500&quot; title=&quot;Unknown datum type exception during union type resolution (no short to int conversion).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1500&quot;&gt;&lt;del&gt;AVRO-1500&lt;/del&gt;&lt;/a&gt;.diff`&lt;/p&gt;</comment>
                            <comment id="14009767" author="pershyn" created="Tue, 27 May 2014 15:16:04 +0000"  >&lt;p&gt;Also I have used latest revision from today that was on github, so patch should be applicable to trunk.&lt;br/&gt;
c754127 - (6 weeks ago) &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1402&quot; title=&quot;Support for DECIMAL type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1402&quot;&gt;&lt;del&gt;AVRO-1402&lt;/del&gt;&lt;/a&gt;. Add optional subtypes to specification... (trunk)&lt;/p&gt;</comment>
                            <comment id="14009914" author="cutting" created="Tue, 27 May 2014 17:15:52 +0000"  >&lt;p&gt;Might we just override getSchemaName() in ThriftData to test for short?&lt;/p&gt;

&lt;p&gt;This might look something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSchemaName(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (datum &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Type.INT.getName();
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getSchemaName(datum);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, we should add a test that fails without this patch to TestThrift.java.&lt;/p&gt;</comment>
                            <comment id="14011070" author="pershyn" created="Wed, 28 May 2014 13:10:11 +0000"  >&lt;p&gt;Intially I was looking forward to make this test in avro proj, but haven&apos;t found where to put it.&lt;br/&gt;
ThriftData looks a good place, so I&apos;m on it, but have some questions:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;There is environment dependency - current test is compiled with thrift v0.7 dependency, so I had to fire up a vagrant environment that has all the necessary tools for thrift (provisioning to install thrift 0.7, java, maven). In my dev environment I have thrift 0.9.1, so I found virtual env really useful way to avoid versions clash, but have doubts even to suggest to contribute that, because it is specific version of linux only... So I need some advice here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;On my dev environment test fail on clear checkout from trunk, when compiling Apache Avro IPC:&lt;br/&gt;
Failed tests:   testBasicMaxSpans(org.apache.avro.ipc.trace.TestFileSpanStorage): expected:&amp;lt;9&amp;gt; but was:&amp;lt;10&amp;gt;&lt;br/&gt;
in virtual environment this test passes... no bloker, just strange.&lt;/li&gt;
	&lt;li&gt;generated thrift files are checked-in, so it requires manual updating of those, while in pom.xml there is a profile definition &quot;thrift-generate&quot;, but it is not updated when generated.&lt;br/&gt;
So I have a question - why maven-thrift-plugin is not used here? My suggestion is that this was done years ago and back then this plugin may not have been around. Also, should I commit the generated thrift-objects back?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14011129" author="pershyn" created="Wed, 28 May 2014 14:14:26 +0000"  >&lt;p&gt;Unit test for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1500&quot; title=&quot;Unknown datum type exception during union type resolution (no short to int conversion).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1500&quot;&gt;&lt;del&gt;AVRO-1500&lt;/del&gt;&lt;/a&gt;, also with generated thrift classes. Used version 0.7 to generate them (according to comments, same version was used to generate previous version).&lt;/p&gt;</comment>
                            <comment id="14011145" author="pershyn" created="Wed, 28 May 2014 14:37:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;Might we just override getSchemaName() in ThriftData to test for short?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is also a solution... but, imho, the problem is in avro union resolution. &lt;br/&gt;
Namely if I provide Short to INT field, it would be converted automatically, but if Short is provided to INT field in union, then it fails. This behaviour seems incosistent to me.&lt;br/&gt;
Also, potentially, it may lead to errors in other conversion utils.&lt;/p&gt;</comment>
                            <comment id="14011211" author="cutting" created="Wed, 28 May 2014 15:35:58 +0000"  >&lt;p&gt;&amp;gt; if Short is provided to INT field in union, then it fails. This behaviour seems inconsistent to me.&lt;/p&gt;

&lt;p&gt;This change doesn&apos;t make it consistent though.  Shorts would be written as ints, even in unions, but wouldn&apos;t be read back in as shorts.  Moreover, there may be other subclasses of GenericData that rely on the current behavior.  So the safest change is to fix ThriftData, which does already read and write shorts correctly, it just doesn&apos;t handle them in unions.&lt;/p&gt;

&lt;p&gt;The Thrift-generated files are checked-in so that every developer who runs tests need not have the Thrift compiler installed.  (The same is done with Protobuf.)  Feel free to propose an improved mechanism.&lt;/p&gt;</comment>
                            <comment id="14013487" author="pershyn" created="Fri, 30 May 2014 10:04:45 +0000"  >&lt;p&gt;Agreed on arguments.&lt;br/&gt;
Implemented the fix in ThriftData through @Override getSchemaName.&lt;/p&gt;</comment>
                            <comment id="14013503" author="pershyn" created="Fri, 30 May 2014 10:43:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;The Thrift-generated files are checked-in so that every developer who runs tests need not have the Thrift compiler installed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This sounds reasonable.&lt;/p&gt;

&lt;p&gt;My initial though was to submit a Vagrant file with couple provisioning scripts to get thrift up and running on virtual machine. This would make regeneration of thrift with specific version of compiler (e.g. 0.7) easier. But, this will at the same time limit it to one platform (scripts are for linux only). Also, this only would be helpful when someone wants to recompile thrift, which is I believe rare occasion. &lt;/p&gt;

&lt;p&gt;So I have serious doubts on vagrant file, and now my proposal is just to add README file to the thrift projects, where to write, that&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The Thrift-generated files are checked-in so that every developer who runs tests need not have the Thrift compiler installed.&lt;/li&gt;
	&lt;li&gt;For regeneration of thrift files make sure you have required version of thrift-compiler installed (0.7) and run &lt;tt&gt;mvn -Pthrift-generate generate-test-sources&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14020428" author="jira-bot" created="Fri, 6 Jun 2014 21:56:40 +0000"  >&lt;p&gt;Commit 1601020 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1601020&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1601020&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1500&quot; title=&quot;Unknown datum type exception during union type resolution (no short to int conversion).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1500&quot;&gt;&lt;del&gt;AVRO-1500&lt;/del&gt;&lt;/a&gt;. Java: Fix bug in handling of Thrift shorts in unions.  Contributed by Michael Pershyn.&lt;/p&gt;</comment>
                            <comment id="14020429" author="cutting" created="Fri, 6 Jun 2014 21:57:57 +0000"  >&lt;p&gt;I committed this.  Thanks, Michael!&lt;/p&gt;</comment>
                            <comment id="14020473" author="hudson" created="Fri, 6 Jun 2014 22:36:52 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #455 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/455/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/455/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1500&quot; title=&quot;Unknown datum type exception during union type resolution (no short to int conversion).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1500&quot;&gt;&lt;del&gt;AVRO-1500&lt;/del&gt;&lt;/a&gt;. Java: Fix bug in handling of Thrift shorts in unions.  Contributed by Michael Pershyn. (cutting: rev 1601020)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/README&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/main/java/org/apache/avro/thrift/ThriftData.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/test/java/org/apache/avro/thrift/TestThrift.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/test/java/org/apache/avro/thrift/test/Test.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/test/thrift/test.thrift&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12647577" name="AVRO-1500-README.patch" size="448" author="pershyn" created="Fri, 30 May 2014 10:43:33 +0000"/>
                            <attachment id="12647570" name="AVRO-1500-ThriftData.patch" size="820" author="pershyn" created="Fri, 30 May 2014 10:04:45 +0000"/>
                            <attachment id="12647141" name="AVRO-1500-unit-test.diff" size="11562" author="pershyn" created="Wed, 28 May 2014 14:14:26 +0000"/>
                            <attachment id="12646921" name="AVRO-1500.patch" size="1112" author="pershyn" created="Tue, 27 May 2014 15:13:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 27 May 2014 17:15:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389783</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v51r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1501] Document py3 on the &quot;How To Release&quot; wiki page</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1501</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/AVRO/How+To+Release&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/AVRO/How+To+Release&lt;/a&gt; is missing information about the new py3 implementation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12711802">AVRO-1501</key>
            <summary>Document py3 on the &quot;How To Release&quot; wiki page</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kryzthov">Christophe Taton</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 21:27:42 +0000</created>
                <updated>Sat, 5 Jul 2014 05:10:13 +0000</updated>
                            <resolved>Sat, 5 Jul 2014 05:10:13 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13987019" author="kryzthov" created="Thu, 1 May 2014 21:30:21 +0000"  >&lt;p&gt;Ah, how do I get edit permissions on this page?&lt;/p&gt;</comment>
                            <comment id="14001140" author="kryzthov" created="Sun, 18 May 2014 17:30:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; How do I edit this page? Do I need to request permission somewhere?&lt;/p&gt;</comment>
                            <comment id="14002173" author="cutting" created="Mon, 19 May 2014 18:58:46 +0000"  >&lt;p&gt;Christophe, I gave you permission to edit the wiki.&lt;/p&gt;</comment>
                            <comment id="14052797" author="kryzthov" created="Sat, 5 Jul 2014 05:10:13 +0000"  >&lt;p&gt;I added a section for python3.&lt;br/&gt;
The procedure is similar to python2: &lt;tt&gt;setup.py sdist upload&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 May 2014 21:30:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390123</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v73z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390360</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1502] Avro objects should implement Serializable</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1502</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;To ease use of Avro objects with systems that rely on Java serialization, i.e. Apache Spark, this change updates generated classes to implement &lt;tt&gt;java.io.Externalizable&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This change is marked incompatible because the class hierarchy for SpecificFixed has changed. Updating the Avro library without recompiling the IPC classes (in my test this was for Flume) results in an AbstractMethodError.&lt;/p&gt;

&lt;p&gt;(I couldn&apos;t add a Release Note since the jira is Closed, so I&apos;m updating the description instead.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12712203">AVRO-1502</key>
            <summary>Avro objects should implement Serializable</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 May 2014 18:29:24 +0000</created>
                <updated>Thu, 23 Mar 2017 13:48:44 +0000</updated>
                            <resolved>Fri, 3 Oct 2014 21:43:20 +0000</resolved>
                                                    <fixVersion>1.8.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>18</watches>
                                                                <comments>
                            <comment id="13989082" author="hammer" created="Sun, 4 May 2014 18:42:18 +0000"  >&lt;p&gt;Spark relies on Java&apos;s Serializable interface to serialize objects. Avro objects don&apos;t implement Serializable. So, to work with Avro objects in Spark, you need to subclass your Avro generated classes and implement Serializable, e.g. &lt;a href=&quot;https://github.com/massie/spark-parquet-example/blob/master/src/main/scala/com/zenfractal/SerializableAminoAcid.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/massie/spark-parquet-example/blob/master/src/main/scala/com/zenfractal/SerializableAminoAcid.java&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14114230" author="cutting" created="Thu, 28 Aug 2014 19:43:57 +0000"  >&lt;p&gt;It&apos;s tempting to add &apos;extends Serializable&apos; to GenericContainer.  But this would serialize the schema along with every instance which is probably too expensive.&lt;/p&gt;

&lt;p&gt;So we might we limit this to specific-compiler-generated classes, which hold their schema in a static field.  To be safe, we should probably set the serialVersionUID to the schema fingerprint.  Also, SpecificFixed currently inherits from GenericData.Fixed which includes the schema as a field, so that needs to be changed so that it instead directly implements GenericFixed and uses the statically generated schema.&lt;/p&gt;</comment>
                            <comment id="14114261" author="cutting" created="Thu, 28 Aug 2014 20:10:40 +0000"  >&lt;p&gt;Here&apos;s a patch that changes generated code to implement Serializable, as outlined above.  Tests pass.&lt;/p&gt;</comment>
                            <comment id="14114263" author="cutting" created="Thu, 28 Aug 2014 20:12:34 +0000"  >&lt;p&gt;Can someone verify that this makes it easier to use Avro-generated classes with Java serialization, either in Spark or elsewhere?&lt;/p&gt;</comment>
                            <comment id="14114438" author="robair" created="Thu, 28 Aug 2014 21:57:43 +0000"  >&lt;p&gt;Presumably this will not work for Utf8,  ByteBuffer and GenericData.Array objects contained within instances of specific-compiler-generated classes as these are not serializable?&lt;/p&gt;</comment>
                            <comment id="14114480" author="cutting" created="Thu, 28 Aug 2014 22:23:04 +0000"  >&lt;p&gt;Rob, great question!&lt;/p&gt;

&lt;p&gt;Utf8 we can fix easily.&lt;/p&gt;

&lt;p&gt;ByteBuffer is harder.  We&apos;d need to switch to using a wrapper or byte[] for bytes schemas in generated code.&lt;/p&gt;

&lt;p&gt;For GenericData.Array we could add a SpecificDatumReader#readArray() implementation that uses an ArrayList rather than a GenericData.Array.  This would prevent the reuse of items in the array that GenericData.Array permits.  I don&apos;t know how big of a loss that would be...&lt;/p&gt;</comment>
                            <comment id="14114533" author="robair" created="Thu, 28 Aug 2014 22:54:43 +0000"  >&lt;p&gt;A slightly different solution would be to make the specific-compiler-generated classes implement Externalizable and have the writeExternal and readExternal methods serialize and deserialize respectively using the Avro binary encoding.&lt;/p&gt;</comment>
                            <comment id="14114557" author="cutting" created="Thu, 28 Aug 2014 23:04:42 +0000"  >&lt;p&gt;Rob, that sounds like a good improvement, with smaller and probably faster data.  The serialVersionUID would still ensure that the reader &amp;amp; writer have matching schemas, right?&lt;/p&gt;</comment>
                            <comment id="14114575" author="robair" created="Thu, 28 Aug 2014 23:19:11 +0000"  >&lt;p&gt;Doug, yes the serialVersionUID would still be a good idea unless both reader and writer schemas are available and schema resolution is required.  &lt;/p&gt;</comment>
                            <comment id="14155711" author="cutting" created="Wed, 1 Oct 2014 22:45:51 +0000"  >&lt;p&gt;Here&apos;s an updated version of the patch that uses Externalizable.  This avoids the problem of embedded ByteBuffer instances, etc.&lt;/p&gt;

&lt;p&gt;I added a simple test and it seems to work.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this soon unless folks object.&lt;/p&gt;</comment>
                            <comment id="14158545" author="jira-bot" created="Fri, 3 Oct 2014 21:24:48 +0000"  >&lt;p&gt;Commit 1629326 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629326&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1629326&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt;. Java: Generated classes now implement Serializable.&lt;/p&gt;</comment>
                            <comment id="14158558" author="hudson" created="Fri, 3 Oct 2014 21:37:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #484 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/484/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/484/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt;. Java: Generated classes now implement Serializable. (cutting: rev 1629326)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/ExternalizableInput.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/ExternalizableOutput.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificData.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificExceptionBase.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificFixed.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBase.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/test/java/org/apache/avro/FooBarSpecificRecord.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/test/java/org/apache/avro/TypeEnum.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/test/java/org/apache/avro/specific/TestSpecificData.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/fixed.vm&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/ipc/src/test/java/org/apache/avro/specific/TestSpecificData.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/test/compiler/output-string/avro/examples/baseball/Player.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/test/compiler/output/Player.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14158561" author="cutting" created="Fri, 3 Oct 2014 21:43:20 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                            <comment id="14191984" author="tomwhite" created="Fri, 31 Oct 2014 16:10:38 +0000"  >&lt;p&gt;It looks like this change means users will have to regenerate their specific-compiler-generated classes or they will get a runtime exception, because the old source files (and hence compiled class files) don&apos;t implement Externalizable. Not sure if there&apos;s a way to avoid this though. We should at least add a warning in the release notes.&lt;/p&gt;</comment>
                            <comment id="14192086" author="busbey" created="Fri, 31 Oct 2014 17:10:59 +0000"  >&lt;p&gt;Shouldn&apos;t the base classes for the specific api should have enough information to implement a default externalizable?&lt;/p&gt;</comment>
                            <comment id="14192780" author="cutting" created="Fri, 31 Oct 2014 23:59:07 +0000"  >&lt;p&gt;It&apos;s possible.  The existing implementation generates code that caches a DatumReader per generated class.&lt;/p&gt;

&lt;p&gt;Here&apos;s an (untested) implementation that should require no per-class methods.  We could remove the code generation, or perhaps leave it as an optimization.  Some benchmarking would help determine whether it was premature or not.&lt;/p&gt;</comment>
                            <comment id="14194708" author="tomwhite" created="Mon, 3 Nov 2014 16:40:27 +0000"  >&lt;p&gt;Thanks for the patch Doug. I&apos;ll write a benchmark to see if the static writer makes a difference.&lt;/p&gt;</comment>
                            <comment id="14194769" author="tomwhite" created="Mon, 3 Nov 2014 17:36:17 +0000"  >&lt;p&gt;I wrote a test that writes 10 million specific objects to an ObjectOutputStream (in memory to avoid file IO overhead). With the static writer member it is just over 10% faster, so we should leave it as an optimization.&lt;/p&gt;

&lt;p&gt;Code is at &lt;a href=&quot;https://github.com/tomwhite/avro-1502-perf-test&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/tomwhite/avro-1502-perf-test&lt;/a&gt;. Here&apos;s the test I did:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; withstatic = c(23637,23261,22936,22664,23097,23395,22972,22650,22747,22869)
&amp;gt; withoutstatic = c(25568,25648,25769,25681,26084,25741,25542,25509,25686,26128)
&amp;gt; t.test(withstatic,withoutstatic)

	Welch Two Sample t-test

data:  withstatic and withoutstatic 
t = -22.0512, df = 15.484, p-value = 4.082e-13
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -2974.304 -2451.296 
sample estimates:
mean of x mean of y 
  23022.8   25735.6 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14194885" author="zolyfarkas" created="Mon, 3 Nov 2014 18:48:54 +0000"  >&lt;p&gt;Hi gentlemen, Can we create a subproject for avro with standard benchmarks with JMH?&lt;br/&gt;
Jmh, is a good benchmarking framework that mitigates some of the common benchmarking pitfalls (&lt;a href=&quot;http://openjdk.java.net/projects/code-tools/jmh/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://openjdk.java.net/projects/code-tools/jmh/&lt;/a&gt;)&lt;br/&gt;
these benchmarks results, can then be reported on (trends, detail..) jenkins with &lt;a href=&quot;https://github.com/blackboard/jmh-jenkins&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/blackboard/jmh-jenkins&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is how I do it in a project that I maintain: &lt;br/&gt;
&lt;a href=&quot;https://code.google.com/p/spf4j/source/browse/#svn%2Ftrunk%2Fspf4j-benchmarks&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://code.google.com/p/spf4j/source/browse/#svn%2Ftrunk%2Fspf4j-benchmarks&lt;/a&gt;&lt;br/&gt;
I also publish the results to the project site: &lt;a href=&quot;http://zolyfarkas.github.io/spf4j/spf4j-benchmarks/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://zolyfarkas.github.io/spf4j/spf4j-benchmarks/index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In my case I also collect profiling information during benchmarking, which allows be to have the data ready when I see a performance degradation. (I also publish them to the project site, both spf4j stack sample data and java flight recorder data)&lt;/p&gt;

&lt;p&gt;I use this approach and it is really really useful.&lt;/p&gt;

&lt;p&gt;let me know what you think, cheers&lt;/p&gt;
</comment>
                            <comment id="14194894" author="busbey" created="Mon, 3 Nov 2014 18:58:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zolyfarkas&quot; class=&quot;user-hover&quot; rel=&quot;zolyfarkas&quot;&gt;Zoltan Farkas&lt;/a&gt;, you should bring this up on the dev list rather than on this jira.&lt;/p&gt;</comment>
                            <comment id="14195103" author="zolyfarkas" created="Mon, 3 Nov 2014 21:18:14 +0000"  >&lt;p&gt;will do, thanks&lt;/p&gt;</comment>
                            <comment id="14196263" author="jira-bot" created="Tue, 4 Nov 2014 15:49:31 +0000"  >&lt;p&gt;Commit 1636616 from tomwhite@apache.org in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1636616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1636616&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Compatibility fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt;. Contributed by cutting.&lt;/p&gt;</comment>
                            <comment id="14196264" author="tomwhite" created="Tue, 4 Nov 2014 15:49:42 +0000"  >&lt;p&gt;I&apos;ve committed the compatibility fix. Thanks Doug for the patch and Sean for the suggestion.&lt;/p&gt;</comment>
                            <comment id="14196326" author="hudson" created="Tue, 4 Nov 2014 16:38:08 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #492 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/492/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/492/&lt;/a&gt;)&lt;br/&gt;
Compatibility fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt;. Contributed by cutting. (tomwhite: rev 1636616)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14196396" author="jira-bot" created="Tue, 4 Nov 2014 17:27:18 +0000"  >&lt;p&gt;Commit 1636657 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1636657&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1636657&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt;. Add a test for SpecificRecordBase&apos;s Externalizable implemenatation.&lt;/p&gt;</comment>
                            <comment id="14196413" author="hudson" created="Tue, 4 Nov 2014 17:36:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #493 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/493/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/493/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt;. Add a test for SpecificRecordBase&apos;s Externalizable implemenatation. (cutting: rev 1636657)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/test/java/org/apache/avro/specific/TestSpecificData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14627899" author="tomwhite" created="Wed, 15 Jul 2015 11:14:03 +0000"  >&lt;p&gt;Marking this as incompatible, as it changes the class hierarchy for SpecificFixed. Updating the Avro library without recompiling the IPC classes (in my test this was for Flume) results in an AbstractMethodError.&lt;/p&gt;

&lt;p&gt;I&apos;ll add something to the release notes.&lt;/p&gt;</comment>
                            <comment id="14627908" author="jira-bot" created="Wed, 15 Jul 2015 11:26:55 +0000"  >&lt;p&gt;Commit 1691170 from tomwhite@apache.org in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1691170&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1691170&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Moved &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt; to incompatible section of CHANGES.&lt;/p&gt;</comment>
                            <comment id="14627921" author="hudson" created="Wed, 15 Jul 2015 11:37:03 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #533 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/533/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/533/&lt;/a&gt;)&lt;br/&gt;
Moved &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1502&quot; title=&quot;Avro objects should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1502&quot;&gt;&lt;del&gt;AVRO-1502&lt;/del&gt;&lt;/a&gt; to incompatible section of CHANGES. (tomwhite: rev 1691170)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15905393" author="busbey" created="Fri, 10 Mar 2017 16:55:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Marking this as incompatible, as it changes the class hierarchy for SpecificFixed. Updating the Avro library without recompiling the IPC classes (in my test this was for Flume) results in an AbstractMethodError.&lt;/p&gt;

&lt;p&gt;I&apos;ll add something to the release notes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m trying to make sure this gets documented enough in the description, since we can&apos;t add a release note to a closed issue. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomwhite&quot; class=&quot;user-hover&quot; rel=&quot;tomwhite&quot;&gt;Tom White&lt;/a&gt; do you happen to have an easy way to generate an example stacktrace for the failure?&lt;/p&gt;

&lt;p&gt;Looking at the changes related to this jira, I think the problem is that &lt;tt&gt;SpecificFixed&lt;/tt&gt; now expects the generated code to implement the &lt;tt&gt;getSchema()&lt;/tt&gt; method. Is that right? I think this means that anyone with generated classes that embed a &lt;tt&gt;fixed&lt;/tt&gt; type need to regenerate. Or maybe it&apos;s just if the top level generated class is for a &lt;tt&gt;fixed&lt;/tt&gt; type (and for example, a &lt;tt&gt;record&lt;/tt&gt; with a &lt;tt&gt;fixed&lt;/tt&gt; field would be fine)? I just want to make sure I call out the right thing in the note.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12704540">SPARK-746</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12990595">SPARK-16617</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13058536">AVRO-2011</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12672442" name="AVRO-1502.patch" size="35013" author="cutting" created="Wed, 1 Oct 2014 22:45:51 +0000"/>
                            <attachment id="12665052" name="AVRO-1502.patch" size="5943" author="cutting" created="Thu, 28 Aug 2014 20:10:40 +0000"/>
                            <attachment id="12678619" name="serializeable_base.patch" size="971" author="cutting" created="Fri, 31 Oct 2014 23:59:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Aug 2014 19:43:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390522</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v9mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390775</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1503] Add Decimal type in Avro C Library.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1503</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Implement the spec (&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1402&quot; title=&quot;Support for DECIMAL type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1402&quot;&gt;&lt;del&gt;AVRO-1402&lt;/del&gt;&lt;/a&gt;) for the c library.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12712630">AVRO-1503</key>
            <summary>Add Decimal type in Avro C Library.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nongli">Nong Li</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 May 2014 17:40:01 +0000</created>
                <updated>Tue, 17 Jun 2014 02:58:04 +0000</updated>
                                                                            <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14033378" author="spachev" created="Tue, 17 Jun 2014 02:58:04 +0000"  >&lt;p&gt;Is anybody working on this? If not, I would like to code it up.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12709140">AVRO-1497</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12679032">AVRO-1402</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Jun 2014 02:58:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vc47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1504] Improve python implementation performance</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1504</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Inspired by &lt;a href=&quot;https://www.python.org/doc/essays/list2str/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://www.python.org/doc/essays/list2str/&lt;/a&gt;, there are some low hanging fruit to increase the performance for python implementation.&lt;/p&gt;

&lt;p&gt;Patch soon follow:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/smoy/avro/commits/smoy_reader_performance&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/smoy/avro/commits/smoy_reader_performance&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;relevant commits&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;71220bb4a84c7aa4d42b593a2c0f7cefa8cda82d&lt;/li&gt;
	&lt;li&gt;542139ce1a40492c9234ee5f84a4410515877af4&lt;/li&gt;
	&lt;li&gt;2f7a0ef8d02148cf69269f5b59f89481e7c86d34&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12712707">AVRO-1504</key>
            <summary>Improve python implementation performance</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="smoy">Steven Moy</reporter>
                        <labels>
                            <label>patch</label>
                            <label>performance</label>
                    </labels>
                <created>Tue, 6 May 2014 23:09:25 +0000</created>
                <updated>Thu, 12 Feb 2015 00:31:18 +0000</updated>
                                            <version>1.7.6</version>
                                                    <component>python</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13991319" author="smoy" created="Tue, 6 May 2014 23:21:52 +0000"  >&lt;p&gt;patch attached&lt;/p&gt;</comment>
                            <comment id="13991325" author="smoy" created="Tue, 6 May 2014 23:26:58 +0000"  >&lt;p&gt;before:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;~/github/avro/lang/py/src (trunk) $ PYTHONPATH=. python ../test/av_bench.py 10000
Write 0.6488
Read 0.3794
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;after: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;~/github/avro/lang/py/src (smoy_writer_performance) $ PYTHONPATH=. python ../test/av_bench.py 10000
Write 0.5817
Read 0.3842
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13995459" author="smoy" created="Mon, 12 May 2014 18:51:40 +0000"  >&lt;p&gt;New patch&lt;/p&gt;</comment>
                            <comment id="13995465" author="smoy" created="Mon, 12 May 2014 18:54:52 +0000"  >&lt;p&gt;Latest improvement:&lt;/p&gt;

&lt;p&gt;Before:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;~/github/avro/lang/py/src (trunk) $ PYTHONPATH=. python ../test/av_bench.py 10000
Write 0.6444
Read 0.3712
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;~/github/avro/lang/py/src (smoy_reader_performance) $ PYTHONPATH=. python ../test/av_bench.py 10000
Write 0.5358
Read 0.1624
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13995466" author="smoy" created="Mon, 12 May 2014 18:55:41 +0000"  >&lt;p&gt;Can a python committer/reviewer do a code review on the patches?&lt;/p&gt;

&lt;p&gt;Thank you&lt;/p&gt;</comment>
                            <comment id="14020888" author="smoy" created="Sat, 7 Jun 2014 17:29:33 +0000"  >&lt;p&gt;Patch is to improve both encode and decode performance in the python implementation.&lt;/p&gt;</comment>
                            <comment id="14297800" author="jcnnghm" created="Thu, 29 Jan 2015 22:13:02 +0000"  >&lt;p&gt;I started looking into making some performance improvements for writing in the python clientlib before I came across this ticket, and I found that the lookup table Steven implemented at &lt;a href=&quot;https://github.com/smoy/avro/commit/71220bb4a84c7aa4d42b593a2c0f7cefa8cda82d#diff-438b29138d73e88e1a515a63c8250e25R124&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/smoy/avro/commit/71220bb4a84c7aa4d42b593a2c0f7cefa8cda82d#diff-438b29138d73e88e1a515a63c8250e25R124&lt;/a&gt; and replacing the property at &lt;a href=&quot;https://github.com/smoy/avro/commit/71220bb4a84c7aa4d42b593a2c0f7cefa8cda82d#diff-438b29138d73e88e1a515a63c8250e25R268&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/smoy/avro/commit/71220bb4a84c7aa4d42b593a2c0f7cefa8cda82d#diff-438b29138d73e88e1a515a63c8250e25R268&lt;/a&gt; alone resulted in a 15% performance improvement.  To encode 100,000 records, runtime dropped from 6.587 seconds to 5.616 seconds in my benchmark.&lt;/p&gt;

&lt;p&gt;Performance of the python client isn&apos;t great write now, these changes will result in a substantial improvement.  &lt;/p&gt;

&lt;p&gt;Any chance a committer could do a code review?&lt;/p&gt;</comment>
                            <comment id="14302296" author="rdblue" created="Mon, 2 Feb 2015 23:13:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcnnghm&quot; class=&quot;user-hover&quot; rel=&quot;jcnnghm&quot;&gt;Justin Cunningham&lt;/a&gt;, I&apos;ll take a look this week. Thanks for bumping the ticket!&lt;/p&gt;</comment>
                            <comment id="14317269" author="rdblue" created="Thu, 12 Feb 2015 00:31:18 +0000"  >&lt;p&gt;Unfortunately, I haven&apos;t been following this from the beginning, so I&apos;m not sure what the changes are for the improvements that Steven posted. However, since &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcnnghm&quot; class=&quot;user-hover&quot; rel=&quot;jcnnghm&quot;&gt;Justin Cunningham&lt;/a&gt; can validate that the validation lookup table and direct access to _writer are an improvement and they make sense, let&apos;s start by getting just those changes in a patch. Then we can look at optimizing the numeric deserialization.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12441165">AVRO-217</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12644457" name="AVRO-1504.patch" size="29298" author="smoy" created="Mon, 12 May 2014 18:51:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Jan 2015 22:13:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vcj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391249</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
