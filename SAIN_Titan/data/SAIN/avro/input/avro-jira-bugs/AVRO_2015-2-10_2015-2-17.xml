<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:21:29 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2015-2-10+AND+created+%3C%3D+2015-2-17+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="2" total="2"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1638] SpecificDatumReader cannot read inner classes</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1638</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;After generating Specific classes from the attached avro file&apos;s schema, the file&apos;s content cannot be read by the following code.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DatumReader&amp;lt;Foo&amp;gt; r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpecificDatumReader&amp;lt;&amp;gt;(Foo.class);
DataFileReader&amp;lt;Foo&amp;gt; fr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataFileReader&amp;lt;&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo.avro&quot;&lt;/span&gt;), r);
fr.next(); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; will &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It appears to me that the logic in SpecificData#getClassName for dealing with names ending with &apos;$&apos; is incorrect, which causes avro to fall back to GenericDatumReader and ultimately fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12773922">AVRO-1638</key>
            <summary>SpecificDatumReader cannot read inner classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tychol">Tycho Lamerigts</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Feb 2015 18:58:33 +0000</created>
                <updated>Tue, 10 Feb 2015 19:02:51 +0000</updated>
                                            <version>1.7.7</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14314671" author="tychol" created="Tue, 10 Feb 2015 19:02:51 +0000"  >&lt;p&gt;Although not needed to reproduce the bug, for completeness sake I will mention that I generated the attached avro file with ReflectDatumWriter&amp;lt;Foo&amp;gt;, where Foo is defined as&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Bar bar;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Foo(Bar bar) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bar = bar;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Bar getBar() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; bar;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar {

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Bar(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.str = str;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getStr() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; str;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12697841" name="foo.avro" size="239" author="tychol" created="Tue, 10 Feb 2015 18:59:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25fnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1639] python IPC request causes an exception if the client happens to use the same protocol and port again</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1639</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;IPC request causes the exception below if the client happens to use the same protocol and port again.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2015-02-13 22:08:17 - &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; - &amp;lt;type &apos;exceptions.AttributeError&apos;&amp;gt;&lt;br/&gt;
2015-02-13 22:08:17 - &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; - Traceback (most recent call last):&lt;br/&gt;
File &quot;/home/spyder/work/spyderZkAgent/camera/server/&lt;em&gt;init&lt;/em&gt;.py&quot;, line 69, in _request&lt;br/&gt;
result = requestor.request(command, param)&lt;br/&gt;
File &quot;/usr/local/lib/python2.7/dist-packages/avro/ipc.py&quot;, line 145, in request&lt;br/&gt;
return self.issue_request(call_request, message_name, request_datum)&lt;br/&gt;
File &quot;/usr/local/lib/python2.7/dist-packages/avro/ipc.py&quot;, line 262, in issue_request&lt;br/&gt;
return self.read_call_response(message_name, buffer_decoder)&lt;br/&gt;
File &quot;/usr/local/lib/python2.7/dist-packages/avro/ipc.py&quot;, line 225, in read_call_response&lt;br/&gt;
remote_message_schema = self.remote_protocol.messages.get(message_name)&lt;br/&gt;
AttributeError: &apos;NoneType&apos; object has no attribute &apos;messages&apos;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What&apos;s happening in my environment is as follows:&lt;br/&gt;
1. In BaseRequestor.write_handshake_request, remote_hash gets something other than None, and self.remote_protocol is not updated&lt;br/&gt;
2. In BaseRequestor.read_handshake_response, the server returns &apos;BOTH&apos; for &apos;match&apos; response. This still doesn&apos;t update self.remote_protocol.&lt;br/&gt;
3. BaseRequestor.read_call_response accesses self.remote_protocol.messages but self.remote_protocol is None.&lt;/p&gt;

&lt;p&gt;I am avoiding this issue by applying the patch below to my system.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;diff -u avro/ipc.py avro.patched/ipc.py&lt;br/&gt;
&amp;#8212; avro/ipc.py	2015-02-16 10:54:04.000000000 +0900&lt;br/&gt;
+++ avro.patched/ipc.py	2015-02-16 10:58:21.000000000 +0900&lt;br/&gt;
@@ -151,6 +151,8 @@&lt;br/&gt;
     if remote_hash is None:&lt;br/&gt;
       remote_hash = local_hash&lt;br/&gt;
       self.remote_protocol = self.local_protocol&lt;br/&gt;
+    else:&lt;br/&gt;
+      self.remote_protocol = REMOTE_PROTOCOLS.get(remote_name)&lt;br/&gt;
     request_datum = {}&lt;br/&gt;
     request_datum&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;clientHash&amp;#39;&amp;#93;&lt;/span&gt; = local_hash&lt;br/&gt;
     request_datum&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;serverHash&amp;#39;&amp;#93;&lt;/span&gt; = remote_hash&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment>&lt;p&gt;Client: python avro 1.7.7&lt;br/&gt;
Server: Java avro 1.7.7&lt;/p&gt;</environment>
        <key id="12775271">AVRO-1639</key>
            <summary>python IPC request causes an exception if the client happens to use the same protocol and port again</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zksm">SHIMOZAKI, Moriaki</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 03:47:39 +0000</created>
                <updated>Mon, 16 Feb 2015 03:47:39 +0000</updated>
                                            <version>1.7.7</version>
                                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25nvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
