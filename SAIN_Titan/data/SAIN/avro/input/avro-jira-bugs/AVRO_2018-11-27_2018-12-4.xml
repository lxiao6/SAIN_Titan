<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:27:35 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2018-11-27+AND+created+%3C%3D+2018-12-4+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="5" total="5"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-2276] GenericData.toString does not always generate valid JSON for Map datum</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2276</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro represents data as json internally so it requires to escape the keys of the objects (Maps) as mandated by &lt;a href=&quot;https://tools.ietf.org/html/rfc8259&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://tools.ietf.org/html/rfc8259&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I discover this while running a build on windows because of &apos;\&apos; characters. But it can be easily reproduced on linux creating a file/dir with backspaces.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13200902">AVRO-2276</key>
            <summary>GenericData.toString does not always generate valid JSON for Map datum</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="iemejia">Isma&#235;l Mej&#237;a</assignee>
                                    <reporter username="iemejia">Isma&#235;l Mej&#237;a</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Nov 2018 17:05:25 +0000</created>
                <updated>Thu, 29 Nov 2018 22:33:12 +0000</updated>
                            <resolved>Thu, 29 Nov 2018 22:33:12 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16700734" author="githubbot" created="Tue, 27 Nov 2018 17:12:40 +0000"  >&lt;p&gt;iemejia opened a new pull request #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   The extra changes in the pom file is to fix for a maven RAT run on windows.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16701271" author="githubbot" created="Wed, 28 Nov 2018 01:37:00 +0000"  >&lt;p&gt;thiru-apache commented on a change in pull request #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394#discussion_r236911408&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394#discussion_r236911408&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: lang/java/grpc/pom.xml&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -21,8 +21,8 @@&lt;br/&gt;
   &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;parent&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     &amp;lt;artifactId&amp;gt;avro-parent&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+    &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     &amp;lt;version&amp;gt;1.9.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   The convention is to have `&amp;lt;groupId&amp;gt;` before `&amp;lt;artififactId&amp;gt;`. Has some tool changed the order here accidentally?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16701272" author="githubbot" created="Wed, 28 Nov 2018 01:37:00 +0000"  >&lt;p&gt;thiru-apache commented on a change in pull request #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394#discussion_r236912579&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394#discussion_r236912579&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: lang/java/grpc/pom.xml&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,6 +92,12 @@&lt;br/&gt;
       &amp;lt;!-- use netty only for tests as user can use grpc transports other than Netty --&amp;gt;&lt;br/&gt;
       &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;io.netty&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;netty-codec-http2&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${netty-codec-http2.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+      &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   The change does not seem to do anything with grpc. Did you patch this pom and the main pom by mistake?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16701558" author="githubbot" created="Wed, 28 Nov 2018 09:01:48 +0000"  >&lt;p&gt;iemejia commented on a change in pull request #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394#discussion_r236991185&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394#discussion_r236991185&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: lang/java/grpc/pom.xml&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -21,8 +21,8 @@&lt;br/&gt;
   &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;parent&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     &amp;lt;artifactId&amp;gt;avro-parent&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+    &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
     &amp;lt;version&amp;gt;1.9.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Hi, actually I noticed that this was in this order in other pom files so I changed to be consistent but I can revert it if you prefer.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16701562" author="githubbot" created="Wed, 28 Nov 2018 09:04:09 +0000"  >&lt;p&gt;iemejia commented on a change in pull request #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394#discussion_r236992017&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394#discussion_r236992017&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: lang/java/grpc/pom.xml&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -87,6 +92,12 @@&lt;br/&gt;
       &amp;lt;!-- use netty only for tests as user can use grpc transports other than Netty --&amp;gt;&lt;br/&gt;
       &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;io.netty&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;netty-codec-http2&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${netty-codec-http2.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+      &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   It does, apparently grpc has some implicit dependencies that both IntelliJ (2018.3) and Maven 3.5.4 aren&apos;t happy with in windows, so we need to set them explicit.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16701566" author="githubbot" created="Wed, 28 Nov 2018 09:07:51 +0000"  >&lt;p&gt;iemejia commented on issue #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394#issuecomment-442372701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394#issuecomment-442372701&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   You are right, there is more than the fix because I could not validate the issue because the build in windows was broken so I created an additional commit to fix the build. I can create a new JIRA for this, just tell me your preferences.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703025" author="githubbot" created="Thu, 29 Nov 2018 11:00:15 +0000"  >&lt;p&gt;iemejia closed pull request #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703118" author="githubbot" created="Thu, 29 Nov 2018 12:47:51 +0000"  >&lt;p&gt;iemejia commented on issue #394: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/394#issuecomment-442821425&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/394#issuecomment-442821425&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I will break the fixes in two different PRs and ping you there. Thanks @thiru-apache &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703120" author="githubbot" created="Thu, 29 Nov 2018 12:50:11 +0000"  >&lt;p&gt;iemejia opened a new pull request #396: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/396&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/396&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Isolated the fix and added an extra test that shows the problem can happen in linux too so we can avoid this in the future.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703573" author="githubbot" created="Thu, 29 Nov 2018 17:57:32 +0000"  >&lt;p&gt;dkulp closed pull request #396: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate JSON&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/396&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/396&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
index 714f4e8b4..6dffa15c5 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
@@ -541,7 +541,7 @@ protected void toString(Object datum, StringBuilder buffer, IdentityHashMap&amp;lt;Obje&lt;br/&gt;
       Map&amp;lt;Object,Object&amp;gt; map = (Map&amp;lt;Object,Object&amp;gt;)datum;&lt;br/&gt;
       for (Map.Entry&amp;lt;Object,Object&amp;gt; entry : map.entrySet()) {&lt;br/&gt;
         buffer.append(&quot;\&quot;&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;buffer.append(String.valueOf(entry.getKey()));&lt;br/&gt;
+        writeEscapedString(String.valueOf(entry.getKey()), buffer);&lt;br/&gt;
         buffer.append(&quot;\&quot;: &quot;);&lt;br/&gt;
         toString(entry.getValue(), buffer, seenObjects);&lt;br/&gt;
         if (++count &amp;lt; map.size())&lt;br/&gt;
diff --git a/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericData.java b/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericData.java&lt;br/&gt;
index 0a98c7aab..fe8f61818 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericData.java&lt;br/&gt;
+++ b/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericData.java&lt;br/&gt;
@@ -323,26 +323,26 @@ public void testMapWithNonStringKeyToStringIsJson() throws Exception {&lt;br/&gt;
     Schema decMapSchema = new Schema.Parser().parse(&quot;
{\&quot;type\&quot;: \&quot;map\&quot;, \&quot;values\&quot;: \&quot;string\&quot;, \&quot;java-key-class\&quot; : \&quot;java.math.BigDecimal\&quot;}
&lt;p&gt;&quot;);&lt;br/&gt;
     Field decMapField = new Field(&quot;decMap&quot;, Schema.createMap(decMapSchema), null, null);&lt;br/&gt;
     Schema boolMapSchema = new Schema.Parser().parse(&quot;&lt;/p&gt;
{\&quot;type\&quot;: \&quot;map\&quot;, \&quot;values\&quot;: \&quot;string\&quot;, \&quot;java-key-class\&quot; : \&quot;java.lang.Boolean\&quot;}
&lt;p&gt;&quot;);&lt;/p&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Field boolMapField = new Field(&quot;boolMap&quot;, Schema.createMap(decMapSchema), null, null);&lt;br/&gt;
+    Field boolMapField = new Field(&quot;boolMap&quot;, Schema.createMap(boolMapSchema), null, null);&lt;br/&gt;
     Schema fileMapSchema = new Schema.Parser().parse(&quot;
{\&quot;type\&quot;: \&quot;map\&quot;, \&quot;values\&quot;: \&quot;string\&quot;, \&quot;java-key-class\&quot; : \&quot;java.io.File\&quot;}
&lt;p&gt;&quot;);&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Field fileMapField = new Field(&quot;fileMap&quot;, Schema.createMap(decMapSchema), null, null);&lt;br/&gt;
+    Field fileMapField = new Field(&quot;fileMap&quot;, Schema.createMap(fileMapSchema), null, null);&lt;br/&gt;
     Schema schema = Schema.createRecord(&quot;my_record&quot;, &quot;doc&quot;, &quot;mytest&quot;, false);&lt;br/&gt;
     schema.setFields(Arrays.asList(intMapField,decMapField,boolMapField,fileMapField));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;HashMap&amp;lt;Integer, String&amp;gt; intPair =  new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    HashMap&amp;lt;Integer, String&amp;gt; intPair = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
     intPair.put(1, &quot;one&quot;);&lt;br/&gt;
     intPair.put(2, &quot;two&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;HashMap&amp;lt;java.math.BigDecimal, String&amp;gt; decPair =  new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    HashMap&amp;lt;java.math.BigDecimal, String&amp;gt; decPair = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
     decPair.put(java.math.BigDecimal.valueOf(1), &quot;one&quot;);&lt;br/&gt;
     decPair.put(java.math.BigDecimal.valueOf(2), &quot;two&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;HashMap&amp;lt;Boolean, String&amp;gt; boolPair =  new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    HashMap&amp;lt;Boolean, String&amp;gt; boolPair = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
     boolPair.put(true, &quot;isTrue&quot;);&lt;br/&gt;
     boolPair.put(false, &quot;isFalse&quot;);&lt;br/&gt;
     boolPair.put(null, null);&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;HashMap&amp;lt;java.io.File, String&amp;gt; filePair =  new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    HashMap&amp;lt;java.io.File, String&amp;gt; filePair = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
     java.io.File f = new java.io.File( getClass().getResource(&quot;/SchemaBuilder.avsc&quot;).toURI() );&lt;br/&gt;
     filePair.put(f, &quot;File&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -368,6 +368,13 @@ public void testMapWithNonStringKeyToStringIsJson() throws Exception {&lt;br/&gt;
     assertEquals(&quot;&lt;/p&gt;
{\&quot;bytes\&quot;: \&quot;a\\nb\&quot;}
&lt;p&gt;&quot;, data.toString(bytes));&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;+  @Test public void testToStringEscapesControlCharsInMap() {&lt;br/&gt;
+    GenericData data = GenericData.get();&lt;br/&gt;
+    Map&amp;lt;String, String&amp;gt; m = new HashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    m.put(&quot;a\n&lt;br class=&quot;atl-forced-newline&quot; /&gt;b&quot;, &quot;a\n&lt;br class=&quot;atl-forced-newline&quot; /&gt;b&quot;);&lt;br/&gt;
+    assertEquals(&quot;&lt;/p&gt;
{\&quot;a\\n\\\\b\&quot;: \&quot;a\\n\\\\b\&quot;}
&lt;p&gt;&quot;, data.toString(m));&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
   @Test public void testToStringFixed() throws Exception {&lt;br/&gt;
     GenericData data = GenericData.get();&lt;br/&gt;
     assertEquals(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;97, 10, 98&amp;#93;&lt;/span&gt;&quot;, data.toString(new GenericData.Fixed(&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703574" author="jira-bot" created="Thu, 29 Nov 2018 17:57:37 +0000"  >&lt;p&gt;Commit bbea1cec3ed6ffae631b4c0d975639a098687ab4 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iemejia&quot; class=&quot;user-hover&quot; rel=&quot;iemejia&quot;&gt;Isma&#235;l Mej&#237;a&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=bbea1ce&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=bbea1ce&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2276&quot; title=&quot;GenericData.toString does not always generate valid JSON for Map datum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2276&quot;&gt;&lt;del&gt;AVRO-2276&lt;/del&gt;&lt;/a&gt;: Escape Map keys in GenericData.toString to generate valid JSON&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 27 Nov 2018 17:12:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00x3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2277] clean up Ruby warnings</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2277</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Running tests for the Ruby implementation generates a lot of warnings and makes it unclear that the Ruby tests are passing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13200908">AVRO-2277</key>
            <summary>clean up Ruby warnings</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="tjwp">Tim Perkins</assignee>
                                    <reporter username="tjwp">Tim Perkins</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Nov 2018 17:20:31 +0000</created>
                <updated>Tue, 4 Dec 2018 21:05:45 +0000</updated>
                                                            <fixVersion>1.9.0</fixVersion>
                                    <component>ruby</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16700750" author="tjwp" created="Tue, 27 Nov 2018 17:20:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/avro/pull/392&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/392&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16703575" author="githubbot" created="Thu, 29 Nov 2018 17:58:21 +0000"  >&lt;p&gt;dkulp closed pull request #392: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2277&quot; title=&quot;clean up Ruby warnings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2277&quot;&gt;AVRO-2277&lt;/a&gt;: Clean up Ruby warnings&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/392&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/392&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/ruby/lib/avro/io.rb b/lang/ruby/lib/avro/io.rb&lt;br/&gt;
index 958159c79..5961a4802 100644&lt;br/&gt;
&amp;#8212; a/lang/ruby/lib/avro/io.rb&lt;br/&gt;
+++ b/lang/ruby/lib/avro/io.rb&lt;br/&gt;
@@ -175,7 +175,6 @@ def write_int&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;int and long values are written using variable-length,&lt;/li&gt;
	&lt;li&gt;zig-zag coding.&lt;br/&gt;
       def write_long&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;foo = n&lt;br/&gt;
         n = (n &amp;lt;&amp;lt; 1) ^ (n &amp;gt;&amp;gt; 63)&lt;br/&gt;
         while (n &amp;amp; ~0x7F) != 0&lt;br/&gt;
           @writer.write(((n &amp;amp; 0x7f) | 0x80).chr)&lt;br/&gt;
@@ -299,7 +298,7 @@ def read_array(writers_schema, readers_schema, decoder)&lt;br/&gt;
         while block_count != 0&lt;br/&gt;
           if block_count &amp;lt; 0&lt;br/&gt;
             block_count = -block_count&lt;/li&gt;
	&lt;li&gt;block_size = decoder.read_long&lt;br/&gt;
+            _block_size = decoder.read_long&lt;br/&gt;
           end&lt;br/&gt;
           block_count.times do&lt;br/&gt;
             read_items &amp;lt;&amp;lt; read_data(writers_schema.items,&lt;br/&gt;
@@ -318,7 +317,7 @@ def read_map(writers_schema, readers_schema, decoder)&lt;br/&gt;
         while block_count != 0&lt;br/&gt;
           if block_count &amp;lt; 0&lt;br/&gt;
             block_count = -block_count&lt;/li&gt;
	&lt;li&gt;block_size = decoder.read_long&lt;br/&gt;
+            _block_size = decoder.read_long&lt;br/&gt;
           end&lt;br/&gt;
           block_count.times do&lt;br/&gt;
             key = decoder.read_string&lt;br/&gt;
@@ -483,7 +482,7 @@ def skip_blocks(decoder, &amp;amp;blk)&lt;br/&gt;
           if block_count &amp;lt; 0&lt;br/&gt;
             decoder.skip(decoder.read_long)&lt;br/&gt;
           else&lt;/li&gt;
	&lt;li&gt;block_count.times &amp;amp;blk&lt;br/&gt;
+            block_count.times(&amp;amp;blk)&lt;br/&gt;
           end&lt;br/&gt;
           block_count = decoder.read_long&lt;br/&gt;
         end&lt;br/&gt;
diff --git a/lang/ruby/lib/avro/ipc.rb b/lang/ruby/lib/avro/ipc.rb&lt;br/&gt;
index 03278225d..f0816e83f 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/ruby/lib/avro/ipc.rb&lt;br/&gt;
+++ b/lang/ruby/lib/avro/ipc.rb&lt;br/&gt;
@@ -5,9 +5,9 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;to you under the Apache License, Version 2.0 (the&lt;/li&gt;
	&lt;li&gt;&quot;License&quot;); you may not use this file except in compliance&lt;/li&gt;
	&lt;li&gt;with the License.  You may obtain a copy of the License at
	&lt;ol&gt;
		&lt;li&gt;&lt;p&gt;+#&lt;/p&gt;&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;
	&lt;ol&gt;
		&lt;li&gt;&lt;p&gt;+#&lt;/p&gt;&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
	&lt;li&gt;Unless required by applicable law or agreed to in writing, software&lt;/li&gt;
	&lt;li&gt;distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;/li&gt;
	&lt;li&gt;WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
@@ -74,10 +74,10 @@ class AvroRemoteException &amp;lt; Avro::AvroError; end&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   class ConnectionClosedException &amp;lt; Avro::AvroError; end&lt;/p&gt;

&lt;p&gt;+  # Base class for the client side of a protocol interaction.&lt;br/&gt;
   class Requestor&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;&quot;&quot;Base class for the client side of a protocol interaction.&quot;&quot;&quot;&lt;/li&gt;
	&lt;li&gt;attr_reader :local_protocol, :transport&lt;/li&gt;
	&lt;li&gt;attr_accessor :remote_protocol, :remote_hash, :send_protocol&lt;br/&gt;
+    attr_reader :local_protocol, :transport, :remote_protocol, :remote_hash&lt;br/&gt;
+    attr_accessor :send_protocol&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     def initialize(local_protocol, transport)&lt;br/&gt;
       @local_protocol = local_protocol&lt;br/&gt;
@@ -193,9 +193,9 @@ def read_call_response(message_name, decoder)&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;* a one-byte error flag boolean, followed by either:&lt;/li&gt;
	&lt;li&gt;* if the error flag is false,&lt;/li&gt;
	&lt;li&gt;the message response, serialized per the message&apos;s response schema.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;#     * if the error flag is true,&lt;br/&gt;
+      #     * if the error flag is true,&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;the error, serialized per the message&apos;s error union schema.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;response_metadata = META_READER.read(decoder)&lt;br/&gt;
+      _response_metadata = META_READER.read(decoder)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;remote response schema&lt;br/&gt;
       remote_message_schema = remote_protocol.messages&lt;span class=&quot;error&quot;&gt;&amp;#91;message_name&amp;#93;&lt;/span&gt;&lt;br/&gt;
@@ -257,7 +257,7 @@ def respond(call_request, transport=nil)&lt;br/&gt;
         end&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;read request using remote protocol&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;request_metadata = META_READER.read(buffer_decoder)&lt;br/&gt;
+        _request_metadata = META_READER.read(buffer_decoder)&lt;br/&gt;
         remote_message_name = buffer_decoder.read_string&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;get remote and local request schemas so we can do&lt;br/&gt;
diff --git a/lang/ruby/lib/avro/protocol.rb b/lang/ruby/lib/avro/protocol.rb&lt;br/&gt;
index 989f27021..9f509dde9 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/ruby/lib/avro/protocol.rb&lt;br/&gt;
+++ b/lang/ruby/lib/avro/protocol.rb&lt;br/&gt;
@@ -69,7 +69,6 @@ def ==(other)&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;     private&lt;br/&gt;
     def parse_types(types, type_names)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;type_objects = []&lt;br/&gt;
       types.collect do |type|&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;FIXME adding type.name to type_names is not defined in the&lt;/li&gt;
	&lt;li&gt;spec. Possible bug in the python impl and the spec.&lt;br/&gt;
diff --git a/lang/ruby/lib/avro/schema.rb b/lang/ruby/lib/avro/schema.rb&lt;br/&gt;
index c1b150ead..86e5c456f 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/ruby/lib/avro/schema.rb&lt;br/&gt;
+++ b/lang/ruby/lib/avro/schema.rb&lt;br/&gt;
@@ -231,6 +231,8 @@ def initialize(name, namespace, fields, names=nil, schema_type=:record, doc=nil)&lt;br/&gt;
         if schema_type == :request || schema_type == &apos;request&apos;&lt;br/&gt;
           @type_sym = schema_type.to_sym&lt;br/&gt;
           @namespace = namespace&lt;br/&gt;
+          @name = nil&lt;br/&gt;
+          @doc = nil&lt;br/&gt;
         else&lt;br/&gt;
           super(schema_type, name, namespace, names, doc)&lt;br/&gt;
         end&lt;br/&gt;
@@ -315,7 +317,7 @@ class EnumSchema &amp;lt; NamedSchema&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;       def initialize(name, space, symbols, names=nil, doc=nil)&lt;br/&gt;
         if symbols.uniq.length &amp;lt; symbols.length&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fail_msg = &apos;Duplicate symbol: %s&apos; % symbols&lt;br/&gt;
+          fail_msg = &quot;Duplicate symbol: #
{symbols}
&lt;p&gt;&quot;&lt;br/&gt;
           raise Avro::SchemaParseError, fail_msg&lt;br/&gt;
         end&lt;br/&gt;
         super(:enum, name, space, names, doc)&lt;br/&gt;
diff --git a/lang/ruby/test/test_io.rb b/lang/ruby/test/test_io.rb&lt;br/&gt;
index b518708b0..350d48bc8 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/ruby/test/test_io.rb&lt;br/&gt;
+++ b/lang/ruby/test/test_io.rb&lt;br/&gt;
@@ -181,8 +181,8 @@ def test_map_with_nil&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   def test_enum_with_duplicate&lt;br/&gt;
     str = &apos;&lt;/p&gt;
{&quot;type&quot;: &quot;enum&quot;, &quot;name&quot;: &quot;Test&quot;,&quot;symbols&quot; : [&quot;AA&quot;, &quot;AA&quot;]}
&lt;p&gt;&apos;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;assert_raises(Avro::SchemaParseError) do&lt;/li&gt;
	&lt;li&gt;schema = Avro::Schema.parse str&lt;br/&gt;
+    assert_raises(Avro::SchemaParseError.new(&apos;Duplicate symbol: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;AA&amp;quot;, &amp;quot;AA&amp;quot;&amp;#93;&lt;/span&gt;&apos;)) do&lt;br/&gt;
+      Avro::Schema.parse str&lt;br/&gt;
     end&lt;br/&gt;
   end&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -289,7 +289,7 @@ def test_fixed_encoding&lt;br/&gt;
   end&lt;/p&gt;

&lt;p&gt;   def test_skip_long&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for value_to_skip, hex_encoding in BINARY_INT_ENCODINGS&lt;br/&gt;
+    for value_to_skip, _hex_encoding in BINARY_INT_ENCODINGS&lt;br/&gt;
       value_to_read = 6253&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;write some data in binary to string buffer&lt;br/&gt;
@@ -314,7 +314,7 @@ def test_skip_long&lt;br/&gt;
   end&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   def test_skip_int&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for value_to_skip, hex_encoding in BINARY_INT_ENCODINGS&lt;br/&gt;
+    for value_to_skip, _hex_encoding in BINARY_INT_ENCODINGS&lt;br/&gt;
       value_to_read = 6253&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       writer = StringIO.new&lt;br/&gt;
@@ -364,7 +364,7 @@ def test_schema_promotion&lt;br/&gt;
       datum_to_write = 219&lt;br/&gt;
       for rs in promotable_schemas&lt;span class=&quot;error&quot;&gt;&amp;#91;(i + 1)..-1&amp;#93;&lt;/span&gt;&lt;br/&gt;
         readers_schema = Avro::Schema.parse(rs)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;writer, enc, dw = write_datum(datum_to_write, writers_schema)&lt;br/&gt;
+        writer, _enc, _dw = write_datum(datum_to_write, writers_schema)&lt;br/&gt;
         datum_read = read_datum(writer, writers_schema, readers_schema)&lt;br/&gt;
         if datum_read != datum_to_write&lt;br/&gt;
           incorrect += 1&lt;br/&gt;
diff --git a/lang/ruby/test/test_logical_types.rb b/lang/ruby/test/test_logical_types.rb&lt;br/&gt;
index 5416e117d..529ef2970 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/ruby/test/test_logical_types.rb&lt;br/&gt;
+++ b/lang/ruby/test/test_logical_types.rb&lt;br/&gt;
@@ -34,7 +34,7 @@ def test_int_date_conversion&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     assert_equal 5, type.encode(Date.new(1970, 1, 6))&lt;br/&gt;
     assert_equal 0, type.encode(Date.new(1970, 1, 1))&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;assert_equal -5, type.encode(Date.new(1969, 12, 27))&lt;br/&gt;
+    assert_equal(-5, type.encode(Date.new(1969, 12, 27)))&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     assert_equal Date.new(1970, 1, 6), type.decode(5)&lt;br/&gt;
     assert_equal Date.new(1970, 1, 1), type.decode(0)&lt;br/&gt;
diff --git a/lang/ruby/test/test_schema.rb b/lang/ruby/test/test_schema.rb&lt;br/&gt;
index 66ea77b75..56636438d 100644&lt;br/&gt;
&amp;#8212; a/lang/ruby/test/test_schema.rb&lt;br/&gt;
+++ b/lang/ruby/test/test_schema.rb&lt;br/&gt;
@@ -274,7 +274,7 @@ def test_enum_doc_attribute&lt;br/&gt;
     assert_equal enum_schema_hash, enum_schema_json.to_avro&lt;br/&gt;
   end&lt;/p&gt;

&lt;p&gt;-def test_empty_record&lt;br/&gt;
+  def test_empty_record&lt;br/&gt;
     schema = Avro::Schema.parse(&apos;&lt;/p&gt;
{&quot;type&quot;:&quot;record&quot;, &quot;name&quot;:&quot;Empty&quot;}
&lt;p&gt;&apos;)&lt;br/&gt;
     assert_empty(schema.fields)&lt;br/&gt;
   end&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16709249" author="githubbot" created="Tue, 4 Dec 2018 21:05:45 +0000"  >&lt;p&gt;Fokko commented on issue #392: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2277&quot; title=&quot;clean up Ruby warnings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2277&quot;&gt;AVRO-2277&lt;/a&gt;: Clean up Ruby warnings&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/392#issuecomment-444257865&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/392#issuecomment-444257865&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks @tjwp &lt;/p&gt;

&lt;p&gt;   Sorry for the late response, I&apos;m moving, so I&apos;m a bit short on time :&apos;(&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Nov 2018 17:58:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00x54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2278] GenericData.Record field getter not correct</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2278</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently the get field implementation is not correct in GenericData.Record:&lt;/p&gt;

&lt;p&gt;at: &lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L209&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L209&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key) {
      Field field = schema.getField(key);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; values[field.pos()];
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The method returns null when a field is not present, making it impossible to distinguish between:&lt;/p&gt;

&lt;p&gt;field value = null&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;field does not exist.&lt;/p&gt;

&lt;p&gt;A more &quot;correct&quot; implementation would be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Override &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key) {
      Field field = schema.getField(key);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Invalid field &quot;&lt;/span&gt; + key);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; values[field.pos()];
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this will make the behavior consistent with put which will throw a exception when setting a non existent field.&lt;/p&gt;

&lt;p&gt;when I make this change in my fork, some bugs in unit tests showed up....&lt;/p&gt;</description>
                <environment></environment>
        <key id="13200939">AVRO-2278</key>
            <summary>GenericData.Record field getter not correct</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zolyfarkas">Zoltan Farkas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Nov 2018 20:05:57 +0000</created>
                <updated>Sun, 30 Dec 2018 04:09:31 +0000</updated>
                                            <version>1.8.2</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00xbs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2279] Build is broken in windows</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2279</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Current Java build does not complete while doing a simple mvn clean install -DskipTests  on windows.&lt;br/&gt;
This issue tackles fixing any issue in the build but not in the tests (some still fail for mapreduce related modules).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13201278">AVRO-2279</key>
            <summary>Build is broken in windows</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="iemejia">Isma&#235;l Mej&#237;a</assignee>
                                    <reporter username="iemejia">Isma&#235;l Mej&#237;a</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Nov 2018 08:50:54 +0000</created>
                <updated>Thu, 29 Nov 2018 22:33:27 +0000</updated>
                            <resolved>Thu, 29 Nov 2018 22:33:27 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>build</component>
                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16703306" author="githubbot" created="Thu, 29 Nov 2018 14:58:25 +0000"  >&lt;p&gt;iemejia opened a new pull request #397: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2279&quot; title=&quot;Build is broken in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2279&quot;&gt;&lt;del&gt;AVRO-2279&lt;/del&gt;&lt;/a&gt;: Fix broken java build on windows&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I also includes fixes for most of the warnings reported via `mvn versions:display-plugin-updates`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703569" author="githubbot" created="Thu, 29 Nov 2018 17:56:50 +0000"  >&lt;p&gt;dkulp closed pull request #397: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2279&quot; title=&quot;Build is broken in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2279&quot;&gt;&lt;del&gt;AVRO-2279&lt;/del&gt;&lt;/a&gt;: Fix broken java build on windows&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/397&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/.gitignore b/.gitignore&lt;br/&gt;
index 83e7336c3..edb7931ce 100644&lt;br/&gt;
&amp;#8212; a/.gitignore&lt;br/&gt;
+++ b/.gitignore&lt;br/&gt;
@@ -16,3 +16,4 @@ test-output&lt;br/&gt;
 /lang/java/compiler/nbactions.xml&lt;br/&gt;
 /lang/java/compiler/nb-configuration.xml&lt;br/&gt;
 /lang/java/compiler/nbproject/&lt;br/&gt;
+*&lt;b&gt;/.vscode/&lt;/b&gt;&lt;b&gt;/&lt;/b&gt;&lt;br/&gt;
diff --git a/lang/java/grpc/pom.xml b/lang/java/grpc/pom.xml&lt;br/&gt;
index a64d8cd54..97dfe3671 100644&lt;br/&gt;
&amp;#8212; a/lang/java/grpc/pom.xml&lt;br/&gt;
+++ b/lang/java/grpc/pom.xml&lt;br/&gt;
@@ -75,6 +75,11 @@&lt;br/&gt;
   &amp;lt;/build&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;dependencies&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;io.grpc&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;grpc-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${grpc.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
     &amp;lt;dependency&amp;gt;&lt;br/&gt;
       &amp;lt;groupId&amp;gt;io.grpc&amp;lt;/groupId&amp;gt;&lt;br/&gt;
       &amp;lt;artifactId&amp;gt;grpc-stub&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
@@ -87,6 +92,12 @@&lt;br/&gt;
       &amp;lt;!-- use netty only for tests as user can use grpc transports other than Netty --&amp;gt;&lt;br/&gt;
       &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;io.netty&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;netty-codec-http2&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${netty-codec-http2.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+      &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
     &amp;lt;dependency&amp;gt;&lt;br/&gt;
       &amp;lt;groupId&amp;gt;${project.groupId}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
       &amp;lt;artifactId&amp;gt;avro&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
diff --git a/lang/java/maven-plugin/pom.xml b/lang/java/maven-plugin/pom.xml&lt;br/&gt;
index e09222192..3ebba528e 100644&lt;br/&gt;
&amp;#8212; a/lang/java/maven-plugin/pom.xml&lt;br/&gt;
+++ b/lang/java/maven-plugin/pom.xml&lt;br/&gt;
@@ -33,10 +33,6 @@&lt;br/&gt;
   &amp;lt;name&amp;gt;Apache Avro Maven Plugin&amp;lt;/name&amp;gt;&lt;br/&gt;
   &amp;lt;description&amp;gt;Maven plugin for Avro IDL and Specific API Compilers&amp;lt;/description&amp;gt;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;prerequisites&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;maven&amp;gt;${maven.version}&amp;lt;/maven&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;/prerequisites&amp;gt;&lt;br/&gt;
-&lt;br/&gt;
   &amp;lt;properties&amp;gt;&lt;br/&gt;
     &amp;lt;pluginTestingVersion&amp;gt;1.3&amp;lt;/pluginTestingVersion&amp;gt;&lt;br/&gt;
   &amp;lt;/properties&amp;gt;&lt;br/&gt;
diff --git a/lang/java/pom.xml b/lang/java/pom.xml&lt;br/&gt;
index 6a426fe39..773d71c5e 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/pom.xml&lt;br/&gt;
+++ b/lang/java/pom.xml&lt;br/&gt;
@@ -62,6 +62,7 @@&lt;br/&gt;
     &amp;lt;hamcrest.version&amp;gt;1.3&amp;lt;/hamcrest.version&amp;gt;&lt;br/&gt;
     &amp;lt;joda.version&amp;gt;2.10.1&amp;lt;/joda.version&amp;gt;&lt;br/&gt;
     &amp;lt;grpc.version&amp;gt;1.16.1&amp;lt;/grpc.version&amp;gt;&lt;br/&gt;
+    &amp;lt;netty-codec-http2.version&amp;gt;4.1.30.Final&amp;lt;/netty-codec-http2.version&amp;gt;&lt;br/&gt;
     &amp;lt;findbugs-annotations.version&amp;gt;1.3.9-1&amp;lt;/findbugs-annotations.version&amp;gt;&lt;br/&gt;
     &amp;lt;zstd-jni.version&amp;gt;1.3.7-1&amp;lt;/zstd-jni.version&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -79,7 +80,7 @@&lt;br/&gt;
     &amp;lt;surefire-plugin.version&amp;gt;2.22.1&amp;lt;/surefire-plugin.version&amp;gt;&lt;br/&gt;
     &amp;lt;file-management.version&amp;gt;1.2.1&amp;lt;/file-management.version&amp;gt;&lt;br/&gt;
     &amp;lt;shade-plugin.version&amp;gt;3.2.0&amp;lt;/shade-plugin.version&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;archetype-plugin.version&amp;gt;2.4&amp;lt;/archetype-plugin.version&amp;gt;&lt;br/&gt;
+    &amp;lt;archetype-plugin.version&amp;gt;3.0.1&amp;lt;/archetype-plugin.version&amp;gt;&lt;br/&gt;
   &amp;lt;/properties&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;modules&amp;gt;&lt;br/&gt;
@@ -513,6 +514,11 @@&lt;br/&gt;
         &amp;lt;artifactId&amp;gt;joda-time&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
         &amp;lt;version&amp;gt;${joda.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
       &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;dependency&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;io.grpc&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;grpc-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;${grpc.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+      &amp;lt;/dependency&amp;gt;&lt;br/&gt;
       &amp;lt;dependency&amp;gt;&lt;br/&gt;
         &amp;lt;groupId&amp;gt;io.grpc&amp;lt;/groupId&amp;gt;&lt;br/&gt;
         &amp;lt;artifactId&amp;gt;grpc-stub&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
@@ -523,6 +529,11 @@&lt;br/&gt;
         &amp;lt;artifactId&amp;gt;grpc-netty&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
         &amp;lt;version&amp;gt;${grpc.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
       &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;dependency&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;io.netty&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;netty-codec-http2&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;${netty-codec-http2.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+      &amp;lt;/dependency&amp;gt;&lt;br/&gt;
       &amp;lt;dependency&amp;gt;&lt;br/&gt;
         &amp;lt;groupId&amp;gt;com.github.luben&amp;lt;/groupId&amp;gt;&lt;br/&gt;
         &amp;lt;artifactId&amp;gt;zstd-jni&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
diff --git a/lang/java/protobuf/pom.xml b/lang/java/protobuf/pom.xml&lt;br/&gt;
index 313ab2508..8ead26e0e 100644&lt;br/&gt;
&amp;#8212; a/lang/java/protobuf/pom.xml&lt;br/&gt;
+++ b/lang/java/protobuf/pom.xml&lt;br/&gt;
@@ -50,6 +50,7 @@&lt;br/&gt;
         &amp;lt;plugins&amp;gt;&lt;br/&gt;
           &amp;lt;plugin&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;maven-antrun-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;${antrun-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;executions&amp;gt;&lt;br/&gt;
               &amp;lt;execution&amp;gt;&lt;br/&gt;
                 &amp;lt;phase&amp;gt;generate-test-sources&amp;lt;/phase&amp;gt;&lt;br/&gt;
diff --git a/lang/java/thrift/pom.xml b/lang/java/thrift/pom.xml&lt;br/&gt;
index ce3c591d0..f98f09ec6 100644&lt;br/&gt;
&amp;#8212; a/lang/java/thrift/pom.xml&lt;br/&gt;
+++ b/lang/java/thrift/pom.xml&lt;br/&gt;
@@ -50,6 +50,7 @@&lt;br/&gt;
         &amp;lt;plugins&amp;gt;&lt;br/&gt;
           &amp;lt;plugin&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;maven-antrun-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;${antrun-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;executions&amp;gt;&lt;br/&gt;
               &amp;lt;execution&amp;gt;&lt;br/&gt;
                 &amp;lt;phase&amp;gt;generate-test-sources&amp;lt;/phase&amp;gt;&lt;br/&gt;
diff --git a/lang/java/tools/pom.xml b/lang/java/tools/pom.xml&lt;br/&gt;
index 17e019527..d7e94e99e 100644&lt;br/&gt;
&amp;#8212; a/lang/java/tools/pom.xml&lt;br/&gt;
+++ b/lang/java/tools/pom.xml&lt;br/&gt;
@@ -50,6 +50,7 @@&lt;br/&gt;
         &amp;lt;plugin&amp;gt;&lt;br/&gt;
           &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
           &amp;lt;artifactId&amp;gt;maven-source-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+          &amp;lt;version&amp;gt;${source-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
           &amp;lt;configuration&amp;gt;&lt;br/&gt;
             &amp;lt;excludes&amp;gt;&lt;br/&gt;
               &amp;lt;exclude&amp;gt;META-INF/LICENSE&amp;lt;/exclude&amp;gt;&lt;br/&gt;
diff --git a/pom.xml b/pom.xml&lt;br/&gt;
index 0792baaa1..7577fbc29 100644&lt;br/&gt;
&amp;#8212; a/pom.xml&lt;br/&gt;
+++ b/pom.xml&lt;br/&gt;
@@ -20,7 +20,7 @@&lt;br/&gt;
   &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;prerequisites&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;maven&amp;gt;2.2.1&amp;lt;/maven&amp;gt;&lt;br/&gt;
+    &amp;lt;maven&amp;gt;3.0.5&amp;lt;/maven&amp;gt;&lt;br/&gt;
   &amp;lt;/prerequisites&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;parent&amp;gt;&lt;br/&gt;
@@ -51,10 +51,13 @@&lt;br/&gt;
     &amp;lt;apache-rat-tasks.version&amp;gt;0.7&amp;lt;/apache-rat-tasks.version&amp;gt;&lt;/p&gt;

&lt;p&gt;     &amp;lt;!-- plugin versions --&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;antrun-plugin.version&amp;gt;1.7&amp;lt;/antrun-plugin.version&amp;gt;&lt;br/&gt;
+    &amp;lt;antrun-plugin.version&amp;gt;1.8&amp;lt;/antrun-plugin.version&amp;gt;&lt;br/&gt;
     &amp;lt;enforcer-plugin.version&amp;gt;1.3.1&amp;lt;/enforcer-plugin.version&amp;gt;&lt;br/&gt;
     &amp;lt;rat.version&amp;gt;0.13&amp;lt;/rat.version&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;checkstyle-plugin.version&amp;gt;2.17&amp;lt;/checkstyle-plugin.version&amp;gt;&lt;br/&gt;
+    &amp;lt;checkstyle-plugin.version&amp;gt;3.0.0&amp;lt;/checkstyle-plugin.version&amp;gt;&lt;br/&gt;
+    &amp;lt;gpg-plugin.version&amp;gt;1.6&amp;lt;/gpg-plugin.version&amp;gt;&lt;br/&gt;
+    &amp;lt;javadoc-plugin.version&amp;gt;3.0.1&amp;lt;/javadoc-plugin.version&amp;gt;&lt;br/&gt;
+    &amp;lt;source-plugin.version&amp;gt;3.0.1&amp;lt;/source-plugin.version&amp;gt;&lt;br/&gt;
   &amp;lt;/properties&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;modules&amp;gt;&lt;br/&gt;
@@ -132,6 +135,7 @@&lt;br/&gt;
           &amp;lt;plugin&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;maven-javadoc-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;${javadoc-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;executions&amp;gt;&lt;br/&gt;
               &amp;lt;execution&amp;gt;&lt;br/&gt;
                 &amp;lt;!-- build javadoc jars per jar for publishing to maven --&amp;gt;&lt;br/&gt;
@@ -157,6 +161,7 @@&lt;br/&gt;
           &amp;lt;plugin&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;maven-source-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;${source-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;executions&amp;gt;&lt;br/&gt;
               &amp;lt;execution&amp;gt;&lt;br/&gt;
                 &amp;lt;!-- builds source jars and attaches them to the project for publishing --&amp;gt;&lt;br/&gt;
@@ -190,6 +195,7 @@&lt;br/&gt;
           &amp;lt;plugin&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;maven-gpg-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;${gpg-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;executions&amp;gt;&lt;br/&gt;
               &amp;lt;execution&amp;gt;&lt;br/&gt;
                 &amp;lt;id&amp;gt;sign-artifacts&amp;lt;/id&amp;gt;&lt;br/&gt;
@@ -272,6 +278,7 @@&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;lang/c/tests/schema_tests/fail/*&amp;lt;/exclude&amp;gt; &amp;lt;!-- C test cases --&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;lang/c/tests/schema_tests/pass/*&amp;lt;/exclude&amp;gt; &amp;lt;!-- C test cases --&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;lang/c+&lt;ins&gt;/jsonschemas/*&amp;lt;/exclude&amp;gt; &amp;lt;!-- C&lt;/ins&gt;+ test cases --&amp;gt;&lt;br/&gt;
+                &amp;lt;exclude&amp;gt;lang/js/test/dat/**&amp;lt;/exclude&amp;gt;&lt;br/&gt;
                 &amp;lt;!-- IDE settings and files --&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;**/.classpath&amp;lt;/exclude&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;**/.project&amp;lt;/exclude&amp;gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16703570" author="jira-bot" created="Thu, 29 Nov 2018 17:56:56 +0000"  >&lt;p&gt;Commit 226013fdc311fca600af1207e756518e1b153de8 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iemejia&quot; class=&quot;user-hover&quot; rel=&quot;iemejia&quot;&gt;Isma&#235;l Mej&#237;a&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=226013f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=226013f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2279&quot; title=&quot;Build is broken in windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2279&quot;&gt;&lt;del&gt;AVRO-2279&lt;/del&gt;&lt;/a&gt;: Fix broken java build on windows&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Nov 2018 14:58:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00zf4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2280] Calling DataFileWriter::flush() when there is no data to write can subsequently cause an exception when the file is read</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2280</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;If you call flush() on a DataFileWriter object that has no data waiting to be written, this will produce an empty block at the end of the file which will cause an exception on the last call to DataFileReader::read(T&amp;amp; datum)&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Example&quot;&gt;&lt;/a&gt;Example&lt;/h2&gt;

&lt;p&gt;For example adding the following to the Data File unit tests will cause them to break&#160;&lt;a href=&quot;https://github.com/bwalshe/avro/blob/7c6a229b2fcbb0b88368e1503a58daef9f43ee64/lang/c%2B%2B/test/DataFileTests.cc#L192&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/bwalshe/avro/blob/7c6a229b2fcbb0b88368e1503a58daef9f43ee64/lang/c%2B%2B/test/DataFileTests.cc#L192&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;PossibleSolution&quot;&gt;&lt;/a&gt;Possible Solution&lt;/h2&gt;

&lt;p&gt;Altering DataFileWriter::sync() to check if there are objects to be written before proceeding will get the code to pass the unit tests. e.g.: &lt;a href=&quot;https://github.com/bwalshe/avro/blob/7c6a229b2fcbb0b88368e1503a58daef9f43ee64/lang/c%2B%2B/impl/DataFile.cc#L141&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/bwalshe/avro/blob/7c6a229b2fcbb0b88368e1503a58daef9f43ee64/lang/c%2B%2B/impl/DataFile.cc#L141 &lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13202131">AVRO-2280</key>
            <summary>Calling DataFileWriter::flush() when there is no data to write can subsequently cause an exception when the file is read</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="bwalshe">Brian Walshe</reporter>
                        <labels>
                            <label>newbie</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 3 Dec 2018 23:24:23 +0000</created>
                <updated>Tue, 25 Dec 2018 02:11:56 +0000</updated>
                            <resolved>Tue, 25 Dec 2018 02:11:38 +0000</resolved>
                                                    <fixVersion>1.9.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16728001" author="thiru_mg" created="Sun, 23 Dec 2018 16:51:19 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bwalshe&quot; class=&quot;user-hover&quot; rel=&quot;bwalshe&quot;&gt;Brian Walshe&lt;/a&gt; for identifying the problem and providing an example where it breaks.&lt;/p&gt;

&lt;p&gt;Even through your suggested solution addresses the example problem, it does not address a more general issue. The trouble is with data file blocks with zero objects (call them empty blocks) in them. &lt;a href=&quot;https://avro.apache.org/docs/1.8.1/spec.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Avro specification&lt;/a&gt; allows for&#160;empty blocks. Thus, even if the C++ implementation does not generate empty blocks, other language bindings may generate them. So the C++ reader should be able to handle them.&lt;/p&gt;

&lt;p&gt;I&apos;ve made a &lt;a href=&quot;http://https://github.com/apache/avro/pull/414&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;pull request&lt;/a&gt; to address the reader&apos;s problem.&lt;/p&gt;</comment>
                            <comment id="16728566" author="thiru_mg" created="Tue, 25 Dec 2018 02:11:38 +0000"  >&lt;p&gt;Merged the Pull Request&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 23 Dec 2018 16:51:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s014mw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
