<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:24:14 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2016-11-2+AND+created+%3C%3D+2016-11-8+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="9" total="9"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1946] If user exists by default in docker, there will be an error, and the setup fails.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1946</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently, when a user already exists in a docker, it errors and stops running.&lt;br/&gt;
However, for a group it continues after throwing a warning. This is inconsistent.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13017399">AVRO-1946</key>
            <summary>If user exists by default in docker, there will be an error, and the setup fails.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sacharya">Suraj Acharya</assignee>
                                    <reporter username="sacharya">Suraj Acharya</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Nov 2016 21:13:59 +0000</created>
                <updated>Thu, 17 Jan 2019 20:42:37 +0000</updated>
                            <resolved>Thu, 17 Jan 2019 19:55:43 +0000</resolved>
                                    <version>1.9.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>docker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15630559" author="sacharya" created="Wed, 2 Nov 2016 21:16:58 +0000"  >&lt;p&gt;Initial patch.&lt;/p&gt;</comment>
                            <comment id="16745439" author="jira-bot" created="Thu, 17 Jan 2019 19:55:35 +0000"  >&lt;p&gt;Commit 0d997e5e5952546e0bdeab3080ef7c00d8caffc1 in avro&apos;s branch refs/heads/master from sacharya&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=0d997e5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=0d997e5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1946&quot; title=&quot;If user exists by default in docker, there will be an error, and the setup fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1946&quot;&gt;&lt;del&gt;AVRO-1946&lt;/del&gt;&lt;/a&gt; - Continue if user already exists.&lt;/p&gt;

&lt;p&gt;Currently, if the user running ./build.sh docker already exists on the docker image then there is an error thrown and it stops.&lt;br/&gt;
This is not ideal. So creating it to throw a warning, but still continuing.&lt;br/&gt;
This makes it consistent with groupadd.&lt;/p&gt;

&lt;p&gt;Signed-off-by: sacharya &amp;lt;suraj.spa@gmail.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16745440" author="dkulp" created="Thu, 17 Jan 2019 19:55:43 +0000"  >&lt;p&gt;patch applied&lt;/p&gt;</comment>
                            <comment id="16745489" author="hudson" created="Thu, 17 Jan 2019 20:42:37 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build AvroJava #586 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/586/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1946&quot; title=&quot;If user exists by default in docker, there will be an error, and the setup fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1946&quot;&gt;&lt;del&gt;AVRO-1946&lt;/del&gt;&lt;/a&gt; - Continue if user already exists. (dkulp: &lt;a href=&quot;https://github.com/apache/avro/commit/0d997e5e5952546e0bdeab3080ef7c00d8caffc1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/commit/0d997e5e5952546e0bdeab3080ef7c00d8caffc1&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) build.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836667" name="AVRO-1946.patch" size="1107" author="sacharya" created="Wed, 2 Nov 2016 21:16:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Jan 2019 19:55:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35rb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1947] Inconsistent maven profile activation</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1947</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The profiles &lt;tt&gt;hadoop1&lt;/tt&gt; and &lt;tt&gt;hadoop2&lt;/tt&gt; can be activated by setting the property &lt;tt&gt;hadoop.version&lt;/tt&gt;. Currently it is implemented in a way that &lt;tt&gt;hadoop2&lt;/tt&gt; is activated by default (if the property is not set) and &lt;tt&gt;hadoop1&lt;/tt&gt; is activated if the property is set to &lt;tt&gt;1&lt;/tt&gt;. BUT if the property is set to any other value (including &lt;tt&gt;2&lt;/tt&gt;!) none of these profiles will be activated.&lt;/p&gt;

&lt;p&gt;Easily reproducible by using the following commands:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;tt&gt;mvn help:active-profiles&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;mvn help:active-profiles -Dhadoop.version=2&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;mvn help:active-profiles -Dhadoop.version=1&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13017734">AVRO-1947</key>
            <summary>Inconsistent maven profile activation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gszadovszky">Gabor Szadovszky</assignee>
                                    <reporter username="gszadovszky">Gabor Szadovszky</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Nov 2016 16:38:04 +0000</created>
                <updated>Sat, 5 Nov 2016 20:20:49 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 10:28:22 +0000</resolved>
                                    <version>1.8.1</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>build</component>
                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15633408" author="githubbot" created="Thu, 3 Nov 2016 16:46:35 +0000"  >&lt;p&gt;GitHub user gszadovszky opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/150&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1947&quot; title=&quot;Inconsistent maven profile activation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1947&quot;&gt;&lt;del&gt;AVRO-1947&lt;/del&gt;&lt;/a&gt; - Inconsistent maven profile activation&lt;/p&gt;

&lt;p&gt;    Made the build backward compatible to be able to use -Dhadoop.version=2.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/gszadovszky/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/gszadovszky/avro&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1947&quot; title=&quot;Inconsistent maven profile activation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1947&quot;&gt;&lt;del&gt;AVRO-1947&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/150.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/150.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #150&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 796e563b52723bee4ba783f45988f002260ae83a&lt;br/&gt;
Author: Gabor Szadovszky &amp;lt;gabor.szadovszky@cloudera.com&amp;gt;&lt;br/&gt;
Date:   2016-11-03T16:45:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1947&quot; title=&quot;Inconsistent maven profile activation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1947&quot;&gt;&lt;del&gt;AVRO-1947&lt;/del&gt;&lt;/a&gt; - Inconsistent maven profile activation&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15635930" author="jira-bot" created="Fri, 4 Nov 2016 10:27:03 +0000"  >&lt;p&gt;Commit b2cd78d549ad72cc1a1441562ea1bc5181116040 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gszadovszky&quot; class=&quot;user-hover&quot; rel=&quot;gszadovszky&quot;&gt;Gabor Szadovszky&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=b2cd78d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=b2cd78d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1947&quot; title=&quot;Inconsistent maven profile activation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1947&quot;&gt;&lt;del&gt;AVRO-1947&lt;/del&gt;&lt;/a&gt; - Inconsistent maven profile activation&lt;/p&gt;</comment>
                            <comment id="15635935" author="tomwhite" created="Fri, 4 Nov 2016 10:28:24 +0000"  >&lt;p&gt;+1. I committed this. Thanks Gabor.&lt;/p&gt;

&lt;p&gt;It&apos;s probably time to remove the Hadoop 1 profile completely. Something to discuss on the dev list?&lt;/p&gt;</comment>
                            <comment id="15636128" author="githubbot" created="Fri, 4 Nov 2016 11:46:24 +0000"  >&lt;p&gt;Github user gszadovszky closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/150&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/150&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15640517" author="jira-bot" created="Sat, 5 Nov 2016 20:20:49 +0000"  >&lt;p&gt;Commit b28f0d5f8dd5c99d3fff87527627a44be5fd44c4 in avro&apos;s branch refs/heads/branch-1.8 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gszadovszky&quot; class=&quot;user-hover&quot; rel=&quot;gszadovszky&quot;&gt;Gabor Szadovszky&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=b28f0d5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=b28f0d5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1947&quot; title=&quot;Inconsistent maven profile activation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1947&quot;&gt;&lt;del&gt;AVRO-1947&lt;/del&gt;&lt;/a&gt; - Inconsistent maven profile activation&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Nov 2016 16:46:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35tdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1948] Not setting a non-null field in GenericRecord causes a NullPointer exception on Serialisation even though a default is defined in the schema</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1948</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;As per the summary, I had a search through the existing JIRAs but couldn&apos;t find a match apologies if this is a duplicate:&lt;/p&gt;

&lt;p&gt;example schema:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{&quot;namespace&quot;: &quot;example.data&quot;,
  &quot;type&quot;: &quot;record&quot;,
  &quot;name&quot;: &quot;Data&quot;,
  &quot;fields&quot;: [
    {&quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;string&quot;},
    {&quot;name&quot;: &quot;favorite_season&quot;, &quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;Autumn&quot;}
  ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;GenericRecord record = new GenericData.Record(schema);
record.put(&quot;name&quot;, &quot;my name&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Serialising the above throws a NullPointerException:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException: null of string in field favorite_season of example.data.Data
	at org.apache.avro.generic.GenericDatumWriter.npe(GenericDatumWriter.java:145) ~[classes/:?]
	at org.apache.avro.generic.GenericDatumWriter.writeWithoutConversion(GenericDatumWriter.java:139) ~[classes/:?]
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:75) ~[classes/:?]
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:62) ~[classes/:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Surely, given that the schema is available the writeField method should check to see if there is a default field available to use if the required field does not have a value supplied (and is not-null).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, JDK8&lt;/p&gt;</environment>
        <key id="13017988">AVRO-1948</key>
            <summary>Not setting a non-null field in GenericRecord causes a NullPointer exception on Serialisation even though a default is defined in the schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mhurd">Mike Hurd</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Nov 2016 09:12:42 +0000</created>
                <updated>Fri, 4 Nov 2016 13:39:47 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 13:39:46 +0000</resolved>
                                    <version>1.8.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15635941" author="tomwhite" created="Fri, 4 Nov 2016 10:31:47 +0000"  >&lt;p&gt;&lt;tt&gt;GenericRecordBuilder&lt;/tt&gt; will fill in in default fields for you, while &lt;tt&gt;GenericData.Record&lt;/tt&gt; does not. The javadoc for the &lt;tt&gt;GenericData.Record&lt;/tt&gt; mentions this, but it&apos;s easy to miss it.&lt;/p&gt;</comment>
                            <comment id="15636083" author="mhurd" created="Fri, 4 Nov 2016 11:26:21 +0000"  >&lt;p&gt;Many thanks Tom, that works as expected. Just out of interest, when would you use GenericData.Record over the GenericRecordBuilder?&lt;/p&gt;</comment>
                            <comment id="15636356" author="mhurd" created="Fri, 4 Nov 2016 13:39:47 +0000"  >&lt;p&gt;Thanks Tom, I&apos;ve closed the issue&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Nov 2016 10:31:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35uy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1949] Not setting a non-null field in GenericRecord causes a NullPointer exception on Serialisation even though a default is defined in the schema</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1949</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;As per the summary, I had a search through the existing JIRAs but couldn&apos;t find a match apologies if this is a duplicate:&lt;/p&gt;

&lt;p&gt;example schema:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{&quot;namespace&quot;: &quot;example.data&quot;,
  &quot;type&quot;: &quot;record&quot;,
  &quot;name&quot;: &quot;Data&quot;,
  &quot;fields&quot;: [
    {&quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;string&quot;},
    {&quot;name&quot;: &quot;favorite_season&quot;, &quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;Autumn&quot;}
  ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;GenericRecord record = new GenericData.Record(schema);
record.put(&quot;name&quot;, &quot;my name&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Serialising the above throws a NullPointerException:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException: null of string in field favorite_season of example.data.Data
	at org.apache.avro.generic.GenericDatumWriter.npe(GenericDatumWriter.java:145) ~[classes/:?]
	at org.apache.avro.generic.GenericDatumWriter.writeWithoutConversion(GenericDatumWriter.java:139) ~[classes/:?]
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:75) ~[classes/:?]
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:62) ~[classes/:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Surely, given that the schema is available the writeField method should check to see if there is a default field available to use if the required field does not have a value supplied (and is not-null).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, JDK8&lt;/p&gt;</environment>
        <key id="13017990">AVRO-1949</key>
            <summary>Not setting a non-null field in GenericRecord causes a NullPointer exception on Serialisation even though a default is defined in the schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mhurd">Mike Hurd</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Nov 2016 09:13:04 +0000</created>
                <updated>Fri, 4 Nov 2016 11:22:31 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 11:22:29 +0000</resolved>
                                    <version>1.8.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15636063" author="mhurd" created="Fri, 4 Nov 2016 11:22:29 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1948&quot; title=&quot;Not setting a non-null field in GenericRecord causes a NullPointer exception on Serialisation even though a default is defined in the schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1948&quot;&gt;&lt;del&gt;AVRO-1948&lt;/del&gt;&lt;/a&gt; (sorry a re-submit of the JIRA create)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35uyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1950] Better Json serialization for Avro decimal logical types?</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1950</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently as I understand decimal logical types are encoded on top of bytes and fixed avro types. This makes them a bit &quot;unnatural&quot; in the json encoding...&lt;/p&gt;

&lt;p&gt;I worked around a hack in my fork to naturally encode them into json decimals. A good starting point to look at is in: &lt;a href=&quot;https://github.com/zolyfarkas/avro/blob/trunk/lang/java/avro/src/main/java/org/apache/avro/io/DecimalEncoder.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/zolyfarkas/avro/blob/trunk/lang/java/avro/src/main/java/org/apache/avro/io/DecimalEncoder.java&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;My approach is a bit hacky, so I would be interested in suggestions to have this closer to something we can integrate into avro...&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13018618">AVRO-1950</key>
            <summary>Better Json serialization for Avro decimal logical types?</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zolyfarkas">Zoltan Farkas</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Nov 2016 15:22:42 +0000</created>
                <updated>Sun, 30 Dec 2018 05:44:58 +0000</updated>
                                                                            <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15642430" author="rdblue" created="Sun, 6 Nov 2016 21:19:29 +0000"  >&lt;p&gt;I&apos;ve been thinking about this and I think maybe what we should do is to add an encoding for Decimal that is a more natural fit for people using JSON. Right now, you can store a decimal as bytes or fixed, but that doesn&apos;t work well as you mentioned. But if we added a String type as well, then that would be suited for JSON and wouldn&apos;t have a compatibility problem with implementations that don&apos;t have logical types. This would require adding a String encoding for decimal to the spec and toString / fromString methods to the DecimalConversion class.&lt;/p&gt;</comment>
                            <comment id="15644224" author="zolyfarkas" created="Mon, 7 Nov 2016 13:50:55 +0000"  >&lt;p&gt;I have been using string encoding for decimal in my fork for a while, and &quot;3.14&quot; is a improvement from bytes, but still not the ideal Json representation... The more I think about it, making decimal  a core type seems like the right approach...&lt;/p&gt;</comment>
                            <comment id="15644670" author="rdblue" created="Mon, 7 Nov 2016 16:44:09 +0000"  >&lt;p&gt;I think String is the right encoding for Decimal in JSON. Otherwise, the JSON parser will produce a float or a double, which will be an approximation and not the exact decimal value.&lt;/p&gt;</comment>
                            <comment id="16004065" author="stephane.maarek@gmail.com" created="Wed, 10 May 2017 05:05:02 +0000"  >&lt;p&gt;has there been any progress on this? bytes are highly uncommon and not json friendly, they make serialization and deserialization as avro near impossible. Most of 3rd party libraries will never get past the bytes[] and try a blend .toString on them. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12739954">AVRO-1582</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 6 Nov 2016 21:19:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ytr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1951] Python tests fail because dummyserver.net no longer exists.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1951</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Python&apos;s test_ipc.py uses dummyserver.net to create an IPC client and then check that it has the right configuration. The client doesn&apos;t interact with the endpoint, but the endpoint has to be a valid DNS name and dummyserver.net is no longer resolving. Updating it to a real DNS name fixes the test.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13018644">AVRO-1951</key>
            <summary>Python tests fail because dummyserver.net no longer exists.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rdblue">Ryan Blue</assignee>
                                    <reporter username="rdblue">Ryan Blue</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Nov 2016 22:01:41 +0000</created>
                <updated>Sat, 5 Nov 2016 22:34:47 +0000</updated>
                            <resolved>Sat, 5 Nov 2016 22:34:46 +0000</resolved>
                                    <version>1.8.2</version>
                                    <fixVersion>1.8.2</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15640661" author="jira-bot" created="Sat, 5 Nov 2016 22:03:33 +0000"  >&lt;p&gt;Commit 7a398e0f373fcbe4e9fe5e068c3e720530f0a849 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=7a398e0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=7a398e0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1951&quot; title=&quot;Python tests fail because dummyserver.net no longer exists.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1951&quot;&gt;&lt;del&gt;AVRO-1951&lt;/del&gt;&lt;/a&gt;: Python: Fix ipc_test.py with a valid DNS name.&lt;/p&gt;</comment>
                            <comment id="15640665" author="jira-bot" created="Sat, 5 Nov 2016 22:05:15 +0000"  >&lt;p&gt;Commit edf6a7e6c38f1a5e941fbc79fd8c7d37d04344cf in avro&apos;s branch refs/heads/branch-1.8 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=edf6a7e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=edf6a7e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1951&quot; title=&quot;Python tests fail because dummyserver.net no longer exists.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1951&quot;&gt;&lt;del&gt;AVRO-1951&lt;/del&gt;&lt;/a&gt;: Python: Fix ipc_test.py with a valid DNS name.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 5 Nov 2016 22:03:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35yzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1952] Prevent JIT compilation in C#</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1952</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;C# code includes JIT API (Reflection.Emit) and it occurs error in iOS or other platform that does not support JIT compile.&lt;br/&gt;
Reflection.Emit is used in very specific point and it can be replaced with different safe code.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Typical Unity (C#) development for mobile, iOS compilation.&lt;/p&gt;</environment>
        <key id="13018715">AVRO-1952</key>
            <summary>Prevent JIT compilation in C#</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="dolow">Yuki Kuwabara</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2016 01:24:49 +0000</created>
                <updated>Mon, 10 Dec 2018 18:49:28 +0000</updated>
                            <resolved>Mon, 10 Dec 2018 18:32:23 +0000</resolved>
                                                    <fixVersion>1.9.0</fixVersion>
                                    <component>csharp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16715320" author="jira-bot" created="Mon, 10 Dec 2018 18:31:54 +0000"  >&lt;p&gt;Commit eaaf263372229f9aad9970f54767e043b1e104dc in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkulp&quot; class=&quot;user-hover&quot; rel=&quot;dkulp&quot;&gt;Daniel Kulp&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=eaaf263&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=eaaf263&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1952&quot; title=&quot;Prevent JIT compilation in C#&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1952&quot;&gt;&lt;del&gt;AVRO-1952&lt;/del&gt;&lt;/a&gt; Squashed commit of the following:&lt;br/&gt;
This closes #134&lt;/p&gt;

&lt;p&gt;commit 0cf2081569f3244ae535710d46ea41e15e57bbcc&lt;br/&gt;
Author: dolow &amp;lt;do_low@hotmail.com&amp;gt;&lt;br/&gt;
Date:   Wed Sep 28 20:10:17 2016 +0900&lt;/p&gt;

&lt;p&gt;    removed unused GetConstructor methods&lt;/p&gt;

&lt;p&gt;commit aad24a7b1bbeb39105b8b3ee9578dbc792d8cfea&lt;br/&gt;
Author: dolow &amp;lt;do_low@hotmail.com&amp;gt;&lt;br/&gt;
Date:   Wed Sep 28 17:45:43 2016 +0900&lt;/p&gt;

&lt;p&gt;    replaced Reflection.Emit to simple instantiation for supporting AOT.&lt;/p&gt;</comment>
                            <comment id="16715321" author="githubbot" created="Mon, 10 Dec 2018 18:31:59 +0000"  >&lt;p&gt;dkulp closed pull request #134: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1952&quot; title=&quot;Prevent JIT compilation in C#&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1952&quot;&gt;&lt;del&gt;AVRO-1952&lt;/del&gt;&lt;/a&gt;: Prevent JIT compilation in C#&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/134&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/134&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/csharp/src/apache/main/Specific/ObjectCreator.cs b/lang/csharp/src/apache/main/Specific/ObjectCreator.cs&lt;br/&gt;
index 5435adbc2..d1daa951a 100644&lt;br/&gt;
&amp;#8212; a/lang/csharp/src/apache/main/Specific/ObjectCreator.cs&lt;br/&gt;
+++ b/lang/csharp/src/apache/main/Specific/ObjectCreator.cs&lt;br/&gt;
@@ -1,4 +1,4 @@&lt;br/&gt;
-&#65279;/**&lt;br/&gt;
+/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Licensed to the Apache Software Foundation (ASF) under one&lt;/li&gt;
	&lt;li&gt;or more contributor license agreements.  See the NOTICE file&lt;/li&gt;
	&lt;li&gt;distributed with this work for additional information&lt;br/&gt;
@@ -30,7 +30,7 @@ public sealed class ObjectCreator&lt;br/&gt;
         public static ObjectCreator Instance 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: { get { return instance; } }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         /// &amp;lt;summary&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/// Static generic dictionary type used for creating new dictionary instances&lt;br/&gt;
+        /// Static generic dictionary type used for creating new dictionary instances&lt;br/&gt;
         /// &amp;lt;/summary&amp;gt;&lt;br/&gt;
         private Type GenericMapType = typeof(Dictionary&amp;lt;,&amp;gt;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -43,14 +43,12 @@ public sealed class ObjectCreator&lt;br/&gt;
         /// Static generic nullable type used for creating new nullable instances&lt;br/&gt;
         /// &amp;lt;/summary&amp;gt;&lt;br/&gt;
         private Type GenericNullableType = typeof(Nullable&amp;lt;&amp;gt;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
         private readonly Assembly execAssembly;&lt;br/&gt;
         private readonly Assembly entryAssembly;&lt;br/&gt;
         private readonly bool diffAssembly;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         public delegate object CtorDelegate();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private Type ctorType = typeof(CtorDelegate);&lt;/li&gt;
	&lt;li&gt;Dictionary&amp;lt;NameCtorKey, CtorDelegate&amp;gt; ctors;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         private ObjectCreator()&lt;/p&gt;
         {
@@ -61,8 +59,6 @@ private ObjectCreator()
 
             GenericMapType = typeof(Dictionary&amp;lt;,&amp;gt;);
             GenericListType = typeof(List&amp;lt;&amp;gt;);
-
-            ctors = new Dictionary&amp;lt;NameCtorKey, CtorDelegate&amp;gt;();
         }

&lt;p&gt;         public struct NameCtorKey : IEquatable&amp;lt;NameCtorKey&amp;gt;&lt;br/&gt;
@@ -110,7 +106,7 @@ public override int GetHashCode()&lt;br/&gt;
         /// &amp;lt;param name=&quot;name&quot;&amp;gt;the object type to locate&amp;lt;/param&amp;gt;&lt;br/&gt;
         /// &amp;lt;param name=&quot;throwError&quot;&amp;gt;whether or not to throw an error if the type wasn&apos;t found&amp;lt;/param&amp;gt;&lt;br/&gt;
         /// &amp;lt;returns&amp;gt;the object type, or &amp;lt;c&amp;gt;null&amp;lt;/c&amp;gt; if not found&amp;lt;/returns&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private Type FindType(string name,bool throwError)&lt;br/&gt;
+        private Type FindType(string name,bool throwError)&lt;br/&gt;
         {&lt;br/&gt;
             Type type;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -149,7 +145,7 @@ private Type FindType(string name,bool throwError)&lt;/p&gt;
                     {
                         if (name == t.Name || name == t.FullName) type = t;
                     }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
                     if (type != null)&lt;br/&gt;
                         break;&lt;br/&gt;
                 }&lt;br/&gt;
@@ -185,7 +181,7 @@ public Type GetType(Schema schema)&lt;br/&gt;
             case Schema.Type.Double:&lt;br/&gt;
                 return typeof(double);&lt;br/&gt;
             case Schema.Type.Bytes:&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;return typeof(byte[]);&lt;br/&gt;
+                return typeof(byte[]);&lt;br/&gt;
             case Schema.Type.String:&lt;br/&gt;
                 return typeof(string);&lt;br/&gt;
             case Schema.Type.Union:&lt;br/&gt;
@@ -207,7 +203,7 @@ public Type GetType(Schema schema)&lt;br/&gt;
                             itemType = GetType(s1);&lt;br/&gt;
                         }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (null != itemType )&lt;br/&gt;
+                        if (null != itemType )&lt;br/&gt;
                         {&lt;br/&gt;
                             if (itemType.IsValueType &amp;amp;&amp;amp; !itemType.IsEnum)
                             {
@@ -217,7 +213,7 @@ public Type GetType(Schema schema)
                                 }
&lt;p&gt;                                 catch (Exception) { }&lt;br/&gt;
                             }&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
                             return itemType;&lt;br/&gt;
                         }&lt;br/&gt;
                     }&lt;br/&gt;
@@ -272,28 +268,6 @@ public Type GetType(string name, Schema.Type schemaType)&lt;br/&gt;
             return type;&lt;br/&gt;
         }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/// &amp;lt;summary&amp;gt;&lt;/li&gt;
	&lt;li&gt;/// Gets the default constructor for the specified type&lt;/li&gt;
	&lt;li&gt;/// &amp;lt;/summary&amp;gt;&lt;/li&gt;
	&lt;li&gt;/// &amp;lt;param name=&quot;name&quot;&amp;gt;name of object for the type&amp;lt;/param&amp;gt;&lt;/li&gt;
	&lt;li&gt;/// &amp;lt;param name=&quot;schemaType&quot;&amp;gt;schema type for the object&amp;lt;/param&amp;gt;&lt;/li&gt;
	&lt;li&gt;/// &amp;lt;param name=&quot;type&quot;&amp;gt;type of the object&amp;lt;/param&amp;gt;&lt;/li&gt;
	&lt;li&gt;/// &amp;lt;returns&amp;gt;Default constructor for the type&amp;lt;/returns&amp;gt;&lt;/li&gt;
	&lt;li&gt;public CtorDelegate GetConstructor(string name, Schema.Type schemaType, Type type)&lt;/li&gt;
	&lt;li&gt;{
-            ConstructorInfo ctorInfo = type.GetConstructor(Type.EmptyTypes);
-            if (ctorInfo == null)
-                throw new AvroException(&quot;Class &quot; + name + &quot; has no default constructor&quot;);
-
-            DynamicMethod dynMethod = new DynamicMethod(&quot;DM$OBJ_FACTORY_&quot; + name, typeof(object), null, type, true);
-            ILGenerator ilGen = dynMethod.GetILGenerator();
-            ilGen.Emit(OpCodes.Nop);
-            ilGen.Emit(OpCodes.Newobj, ctorInfo);
-            ilGen.Emit(OpCodes.Ret);
-
-            return (CtorDelegate)dynMethod.CreateDelegate(ctorType);
-        }
&lt;p&gt;-&lt;br/&gt;
         /// &amp;lt;summary&amp;gt;&lt;br/&gt;
         /// Creates new instance of the given type&lt;br/&gt;
         /// &amp;lt;/summary&amp;gt;&lt;br/&gt;
@@ -302,20 +276,7 @@ public CtorDelegate GetConstructor(string name, Schema.Type schemaType, Type typ&lt;br/&gt;
         /// &amp;lt;returns&amp;gt;new object of the given type&amp;lt;/returns&amp;gt;&lt;br/&gt;
         public object New(string name, Schema.Type schemaType)&lt;br/&gt;
         {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;NameCtorKey key = new NameCtorKey(name, schemaType);&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;CtorDelegate ctor;&lt;/li&gt;
	&lt;li&gt;lock(ctors)&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;if (!ctors.TryGetValue(key, out ctor))&lt;/li&gt;
	&lt;li&gt;{
-                    Type type = GetType(name, schemaType);
-                    ctor = GetConstructor(name, schemaType, type);
-
-                    ctors.Add(key, ctor);
-                }&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;return ctor();&lt;br/&gt;
+            return Activator.CreateInstance(GetType(name, schemaType));&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/lang/csharp/src/apache/main/Specific/SpecificDatumReader.cs b/lang/csharp/src/apache/main/Specific/SpecificDatumReader.cs&lt;br/&gt;
index 5611a9c89..0e7b743d4 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/csharp/src/apache/main/Specific/SpecificDatumReader.cs&lt;br/&gt;
+++ b/lang/csharp/src/apache/main/Specific/SpecificDatumReader.cs&lt;br/&gt;
@@ -77,12 +77,6 @@ protected override FixedAccess GetFixedAccess(FixedSchema readerSchema)&lt;br/&gt;
             return new SpecificFixedAccess(readerSchema);&lt;br/&gt;
         }&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static ObjectCreator.CtorDelegate GetConstructor(string name, Schema.Type schemaType)&lt;/li&gt;
	&lt;li&gt;{
-            var creator = ObjectCreator.Instance;
-            return creator.GetConstructor(name, schemaType, creator.GetType(name, schemaType));
-        }
&lt;p&gt;-&lt;br/&gt;
         private class SpecificEnumAccess : EnumAccess&lt;br/&gt;
         {&lt;br/&gt;
             public object CreateEnum(object reuse, int ordinal)&lt;br/&gt;
@@ -93,16 +87,16 @@ public object CreateEnum(object reuse, int ordinal)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         private class SpecificRecordAccess : RecordAccess&lt;br/&gt;
         {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ObjectCreator.CtorDelegate objCreator;&lt;br/&gt;
+            private string typeName;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             public SpecificRecordAccess(RecordSchema readerSchema)&lt;/p&gt;
             {
-                objCreator = GetConstructor(readerSchema.Fullname, Schema.Type.Record);
+                typeName = readerSchema.Fullname;
             }

&lt;p&gt;             public object CreateRecord(object reuse)&lt;/p&gt;
             {
-                return reuse ?? objCreator();
+                return reuse ?? ObjectCreator.Instance.New(typeName, Schema.Type.Record);
             }

&lt;p&gt;             public object GetField(object record, string fieldName, int fieldPos)&lt;br/&gt;
@@ -118,16 +112,16 @@ public void AddField(object record, string fieldName, int fieldPos, object field&lt;/p&gt;

&lt;p&gt;         private class SpecificFixedAccess : FixedAccess&lt;br/&gt;
         {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ObjectCreator.CtorDelegate objCreator;&lt;br/&gt;
+            private string typeName;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             public SpecificFixedAccess(FixedSchema readerSchema)&lt;/p&gt;
             {
-                objCreator = GetConstructor(readerSchema.Fullname, Schema.Type.Fixed);
+                typeName = readerSchema.Fullname;
             }

&lt;p&gt;             public object CreateFixed(object reuse)&lt;/p&gt;
             {
-                return reuse ?? objCreator();
+                return reuse ?? ObjectCreator.Instance.New(typeName, Schema.Type.Fixed);
             }

&lt;p&gt;             public byte[] GetFixedBuffer(object rec)&lt;br/&gt;
@@ -138,7 +132,7 @@ public byte[] GetFixedBuffer(object rec)&lt;/p&gt;

&lt;p&gt;         private class SpecificArrayAccess : ArrayAccess&lt;br/&gt;
         {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ObjectCreator.CtorDelegate objCreator;&lt;br/&gt;
+            private string typeName;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             public SpecificArrayAccess(ArraySchema readerSchema)&lt;/p&gt;
             {
@@ -146,8 +140,8 @@ public SpecificArrayAccess(ArraySchema readerSchema)
                 string type = Avro.CodeGen.getType(readerSchema, false, ref nEnum);
                 type = type.Remove(0, 6);              // remove IList&amp;lt;
                 type = type.Remove(type.Length - 1);   // remove &amp;gt;
-        
-                objCreator = GetConstructor(type, Schema.Type.Array);
+
+                typeName = type;
             }

&lt;p&gt;             public object Create(object reuse)&lt;br/&gt;
@@ -164,7 +158,7 @@ public object Create(object reuse)&lt;br/&gt;
                     array.Clear();&lt;br/&gt;
                 }&lt;br/&gt;
                 else&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;array = objCreator() as IList;&lt;br/&gt;
+                    array = ObjectCreator.Instance.New(typeName, Schema.Type.Array) as IList;&lt;br/&gt;
                 return array;&lt;br/&gt;
             }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -190,7 +184,7 @@ public void AddElements( object array, int elements, int index, ReadItem itemRea&lt;/p&gt;

&lt;p&gt;         private class SpecificMapAccess : MapAccess&lt;br/&gt;
         {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ObjectCreator.CtorDelegate objCreator;&lt;br/&gt;
+            private string typeName;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             public SpecificMapAccess(MapSchema readerSchema)&lt;/p&gt;
             {
@@ -198,8 +192,8 @@ public SpecificMapAccess(MapSchema readerSchema)
                 string type = Avro.CodeGen.getType(readerSchema, false, ref nEnum);
                 type = type.Remove(0, 19);             // remove IDictionary&amp;lt;string,
                 type = type.Remove(type.Length - 1);   // remove &amp;gt;
-        
-                objCreator = GetConstructor(type, Schema.Type.Map);
+
+                typeName = type;
             }

&lt;p&gt;             public object Create(object reuse)&lt;br/&gt;
@@ -214,7 +208,7 @@ public object Create(object reuse)&lt;br/&gt;
                     map.Clear();&lt;br/&gt;
                 }&lt;br/&gt;
                 else&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;map = objCreator() as System.Collections.IDictionary;&lt;br/&gt;
+                    map = ObjectCreator.Instance.New(typeName, Schema.Type.Map) as System.Collections.IDictionary;&lt;br/&gt;
                 return map;&lt;br/&gt;
             }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -229,4 +223,4 @@ public void AddElements(object mapObj, int elements, ReadItem itemReader, Decode&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;br/&gt;
-}&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
+}&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16715354" author="jira-bot" created="Mon, 10 Dec 2018 18:49:28 +0000"  >&lt;p&gt;Commit eaaf263372229f9aad9970f54767e043b1e104dc in avro&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2238&quot; title=&quot;Update Docker image from java to openjdk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2238&quot;&gt;AVRO-2238&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkulp&quot; class=&quot;user-hover&quot; rel=&quot;dkulp&quot;&gt;Daniel Kulp&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=eaaf263&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=eaaf263&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1952&quot; title=&quot;Prevent JIT compilation in C#&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1952&quot;&gt;&lt;del&gt;AVRO-1952&lt;/del&gt;&lt;/a&gt; Squashed commit of the following:&lt;br/&gt;
This closes #134&lt;/p&gt;

&lt;p&gt;commit 0cf2081569f3244ae535710d46ea41e15e57bbcc&lt;br/&gt;
Author: dolow &amp;lt;do_low@hotmail.com&amp;gt;&lt;br/&gt;
Date:   Wed Sep 28 20:10:17 2016 +0900&lt;/p&gt;

&lt;p&gt;    removed unused GetConstructor methods&lt;/p&gt;

&lt;p&gt;commit aad24a7b1bbeb39105b8b3ee9578dbc792d8cfea&lt;br/&gt;
Author: dolow &amp;lt;do_low@hotmail.com&amp;gt;&lt;br/&gt;
Date:   Wed Sep 28 17:45:43 2016 +0900&lt;/p&gt;

&lt;p&gt;    replaced Reflection.Emit to simple instantiation for supporting AOT.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Dec 2018 18:31:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35zfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1953] ArrayIndexOutOfBoundsException in org.apache.avro.io.parsing.Symbol$Alternative.getSymbol</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1953</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We are facing an issue when Avro MapReducer cannot process the avro file in the reducer. &lt;/p&gt;

&lt;p&gt;Here is the schema of our data:&lt;/p&gt;

&lt;p&gt;{&lt;br/&gt;
    &quot;namespace&quot; : &quot;our package name&quot;,&lt;br/&gt;
    &quot;type&quot; : &quot;record&quot;,&lt;br/&gt;
    &quot;name&quot; : &quot;Lists&quot;,&lt;br/&gt;
    &quot;fields&quot; : [&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;account_id&quot;, &quot;type&quot; : &quot;long&quot;}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;list_id&quot;, &quot;type&quot; : &quot;string&quot;}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;sequence_id&quot;, &quot;type&quot; : [&quot;int&quot;, &quot;null&quot;]}
&lt;p&gt; ,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;name&quot;, &quot;type&quot; : [&quot;string&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;state&quot;, &quot;type&quot; : [&quot;string&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;description&quot;, &quot;type&quot; : [&quot;string&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;dynamic_filtered_list&quot;, &quot;type&quot; : [&quot;int&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;filter_criteria&quot;, &quot;type&quot; : [&quot;string&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;created_at&quot;, &quot;type&quot; : [&quot;long&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;updated_at&quot;, &quot;type&quot; : [&quot;long&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;deleted_at&quot;, &quot;type&quot; : [&quot;long&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;favorite&quot;, &quot;type&quot; : [&quot;int&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        &lt;/p&gt;
{&quot;name&quot; : &quot;delta&quot;, &quot;type&quot; : [&quot;boolean&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
        {&lt;br/&gt;
            &quot;name&quot; : &quot;list_memberships&quot;, &quot;type&quot; : {&lt;br/&gt;
                &quot;type&quot; : &quot;array&quot;, &quot;items&quot; : {&lt;br/&gt;
                    &quot;name&quot; : &quot;ListMembership&quot;, &quot;type&quot; : &quot;record&quot;,&lt;br/&gt;
                    &quot;fields&quot; : [&lt;br/&gt;
                        &lt;/p&gt;
{&quot;name&quot; : &quot;channel_id&quot;, &quot;type&quot; : &quot;string&quot;}
&lt;p&gt;,&lt;br/&gt;
                        &lt;/p&gt;
{&quot;name&quot; : &quot;created_at&quot;, &quot;type&quot; : [&quot;long&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
                        &lt;/p&gt;
{&quot;name&quot; : &quot;created_source&quot;, &quot;type&quot; : [&quot;string&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;br/&gt;
                        &lt;/p&gt;
{&quot;name&quot; : &quot;deleted_at&quot;, &quot;type&quot; : [&quot;long&quot;, &quot;null&quot;]}
&lt;p&gt;,&lt;/p&gt;
                        {&quot;name&quot; : &quot;sequence_id&quot;, &quot;type&quot; : [&quot;int&quot;, &quot;null&quot;]}
&lt;p&gt;                    ]&lt;br/&gt;
                }&lt;br/&gt;
            }&lt;br/&gt;
        }&lt;br/&gt;
    ]&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Our MapReduce job is to get the delta of the above dataset, and use our merge logic to merge the latest change into the dataset.&lt;/p&gt;

&lt;p&gt;The whole MR job runs daily, and work fine for 18 months. During this time, we saw 2 times the merge MapReduce job failed with following error (In the reducer stage, which means the Avro data being read successfully, and send to the reducers, which we sort the data based on the key and timestamp, so the delta can be merged in the reducer side):&lt;/p&gt;

&lt;p&gt;java.lang.ArrayIndexOutOfBoundsException at org.apache.avro.io.parsing.Symbol$Alternative.getSymbol(Symbol.java:364) at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229) at org.apache.avro.io.parsing.Parser.advance(Parser.java:88) at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206) at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:152) at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:177) at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:148) at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:139) at org.apache.avro.hadoop.io.AvroDeserializer.deserialize(AvroDeserializer.java:108) at org.apache.avro.hadoop.io.AvroDeserializer.deserialize(AvroDeserializer.java:48) at org.apache.hadoop.mapreduce.task.ReduceContextImpl.nextKeyValue(ReduceContextImpl.java:142) at org.apache.hadoop.mapreduce.task.ReduceContextImpl.nextKey(ReduceContextImpl.java:117) at org.apache.hadoop.mapreduce.lib.reduce.WrappedReducer$Context.nextKey(WrappedReducer.java:297) at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:165) at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:652) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420) at org.apache.hadoop.mapred.Child$4.run(Child.java:255) at java.security.AccessController.doPrivileged(AccessController.java:366) at javax.security.auth.Subject.doAs(Subject.java:572) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1502) at org.apache.hadoop.mapred.Child.main(Child.java:249)&lt;/p&gt;

&lt;p&gt;The MapReducer job will fail eventually in the reducer stage. I don&apos;t think our data is corrupted, as they are read fine in the map stage. Every time we got this error, we have to get the whole huge dataset from the source, then rebuilt the AVRO, and start building merge again daily, until after several months, then face this issue due to whatever reason we don&apos;t know yet.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13018849">AVRO-1953</key>
            <summary>ArrayIndexOutOfBoundsException in org.apache.avro.io.parsing.Symbol$Alternative.getSymbol</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="java8964">Yong Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2016 14:44:22 +0000</created>
                <updated>Sun, 30 Dec 2018 04:09:31 +0000</updated>
                                            <version>1.7.4</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36093:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1954] Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1954</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>
&lt;p&gt;I was creating GenericRecords and populating some fields &amp;#8211; which i could not find the content on some json files &amp;#8211; with the Schema.Field.defaultVal(). &lt;/p&gt;

&lt;p&gt;It seems if the schema has explicitly set the default value to be null, the records generated this way can&apos;t be written. In this case, if default value is null in the schema, an instance of org.apache.avro.JsonProperties.NULL_VALUE is returned by Schema.Field.defaultVal().&lt;/p&gt;

&lt;p&gt;I created an unit test which replicates the bug. I was thinking modify the class org.apache.avro.generic.GenericData to evaluate org.apache.avro.JsonProperties.NULL_VALUE as null. Is this the way to go? or org.apache.avro.JsonProperties.NULL_VALUE is intend for other purposes?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13018908">AVRO-1954</key>
            <summary>Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkollar">Nandor Kollar</assignee>
                                    <reporter username="iamwrong">rui miranda</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2016 17:53:53 +0000</created>
                <updated>Tue, 11 Dec 2018 19:14:37 +0000</updated>
                            <resolved>Fri, 20 Jan 2017 11:53:23 +0000</resolved>
                                    <version>1.8.1</version>
                    <version>1.9.0</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15792686" author="githubbot" created="Mon, 2 Jan 2017 11:06:25 +0000"  >&lt;p&gt;GitHub user nandorKollar opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/180&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/180&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;/p&gt;

&lt;p&gt;    Added the test cases in the patch attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; Jira to TestGenericDatumWriter (since the issue is related to GenericDatumWriter), and modified GenericData to map JsonProperties.NULL_VALUE to Type.NULL&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/nandorKollar/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nandorKollar/avro&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/180.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/180.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #180&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 25635e1fdd66d7275abe7e65e288f3c4ee078d97&lt;br/&gt;
Author: Nandor Kollar &amp;lt;nkollar@cloudera.com&amp;gt;&lt;br/&gt;
Date:   2017-01-02T11:00:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15831604" author="jira-bot" created="Fri, 20 Jan 2017 11:52:48 +0000"  >&lt;p&gt;Commit d9338a4cf008b445ea3efbe2523288d07162ec71 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkollar&quot; class=&quot;user-hover&quot; rel=&quot;nkollar&quot;&gt;Nandor Kollar&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=d9338a4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=d9338a4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null. Contributed by Nandor Kollar&lt;/p&gt;</comment>
                            <comment id="15831605" author="tomwhite" created="Fri, 20 Jan 2017 11:53:23 +0000"  >&lt;p&gt;I just committed this. Thanks Nandor!&lt;/p&gt;</comment>
                            <comment id="15831630" author="nkollar" created="Fri, 20 Jan 2017 12:19:02 +0000"  >&lt;p&gt;Thanks Tom for committing this.&lt;/p&gt;</comment>
                            <comment id="16363305" author="githubbot" created="Wed, 14 Feb 2018 01:03:05 +0000"  >&lt;p&gt;derekstraka commented on issue #180: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/180#issuecomment-365460261&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/180#issuecomment-365460261&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @nandorKollar - I ran into this issue today, and I&apos;m interest in carrying this into master.  Any issues using your work as a starting point and adding you as signed off by on the commits?  I can run them by you first if you&apos;d like.  Thanks&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16363638" author="githubbot" created="Wed, 14 Feb 2018 08:30:38 +0000"  >&lt;p&gt;nandorKollar commented on issue #180: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/180#issuecomment-365531098&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/180#issuecomment-365531098&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @derekstraka I&apos;ve no problem with using my work as base, but I&apos;m afraid this pull request is already merged to master: &lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L730&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L730&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I&apos;m afraid it was left open here accidentally. Are you sure that you ran into the same issue?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16363821" author="githubbot" created="Wed, 14 Feb 2018 11:19:10 +0000"  >&lt;p&gt;derekstraka commented on issue #180: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/180#issuecomment-365573082&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/180#issuecomment-365573082&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Ah, awesome.  I was using the 1.8.0 release, and I had applied this patch to that tag locally and it resolved my issue.  I didn&apos;t think to check in master to see if it was already merged.  Thanks for your help!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16363833" author="githubbot" created="Wed, 14 Feb 2018 11:27:27 +0000"  >&lt;p&gt;nandorKollar commented on issue #180: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/180#issuecomment-365574989&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/180#issuecomment-365574989&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Great! However I think this should be backported to branch-1.8 too.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16363834" author="githubbot" created="Wed, 14 Feb 2018 11:27:40 +0000"  >&lt;p&gt;nandorKollar closed pull request #180: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/180&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/180&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
index ff0893c07..96f5ad50b 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
@@ -35,6 +35,7 @@&lt;br/&gt;
 import org.apache.avro.AvroTypeException;&lt;br/&gt;
 import org.apache.avro.Conversion;&lt;br/&gt;
 import org.apache.avro.Conversions;&lt;br/&gt;
+import org.apache.avro.JsonProperties;&lt;br/&gt;
 import org.apache.avro.LogicalType;&lt;br/&gt;
 import org.apache.avro.Schema;&lt;br/&gt;
 import org.apache.avro.Schema.Field;&lt;br/&gt;
@@ -743,7 +744,7 @@ public int resolveUnion(Schema union, Object datum) {&lt;br/&gt;
   /** Return the schema full name for a datum.  Called by &lt;/p&gt;
{@link
    * #resolveUnion(Schema,Object)}
&lt;p&gt;. */&lt;br/&gt;
   protected String getSchemaName(Object datum) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (datum == null)&lt;br/&gt;
+    if (datum == null || datum == JsonProperties.NULL_VALUE)&lt;br/&gt;
       return Type.NULL.getName();&lt;br/&gt;
     if (isRecord(datum))&lt;br/&gt;
       return getRecordSchema(datum).getFullName();&lt;br/&gt;
diff --git a/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java b/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java&lt;br/&gt;
index f93a326c4..8f99cdfe4 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java&lt;br/&gt;
+++ b/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java&lt;br/&gt;
@@ -24,7 +24,6 @@&lt;br/&gt;
 import java.io.ByteArrayInputStream;&lt;br/&gt;
 import java.io.ByteArrayOutputStream;&lt;br/&gt;
 import java.io.IOException;&lt;br/&gt;
-import java.io.OutputStream;&lt;br/&gt;
 import java.nio.ByteBuffer;&lt;br/&gt;
 import java.util.ConcurrentModificationException;&lt;br/&gt;
 import java.util.HashMap;&lt;br/&gt;
@@ -37,11 +36,10 @@&lt;br/&gt;
 import java.util.concurrent.Future;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import org.apache.avro.Schema;&lt;br/&gt;
+import org.apache.avro.io.BinaryEncoder;&lt;br/&gt;
 import org.apache.avro.io.DecoderFactory;&lt;br/&gt;
-import org.apache.avro.io.DirectBinaryEncoder;&lt;br/&gt;
 import org.apache.avro.io.Encoder;&lt;br/&gt;
 import org.apache.avro.io.EncoderFactory;&lt;br/&gt;
-import org.apache.avro.io.JsonDecoder;&lt;br/&gt;
 import org.apache.avro.AvroTypeException;&lt;br/&gt;
 import org.junit.Test;&lt;br/&gt;
 import org.apache.avro.util.Utf8;&lt;br/&gt;
@@ -257,4 +255,43 @@ public void writeDoesNotAllowJavaEnumForGenericEnum() throws IOException &lt;/p&gt;
{
 
     writer.write(record, encoder);
   }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void writeFieldWithDefaultWithExplicitNullDefaultInSchema() throws Exception &lt;/p&gt;
{
+    Schema schema = schemaWithExplicitNullDefault();
+    GenericRecord record = createRecordWithDefaultField(schema);
+    writeObject(schema, record);
+  }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void writeFieldWithDefaultWithoutExplicitNullDefaultInSchema() throws Exception &lt;/p&gt;
{
+    Schema schema = schemaWithoutExplicitNullDefault();
+    GenericRecord record = createRecordWithDefaultField(schema);
+    writeObject(schema, record);
+  }
&lt;p&gt;+&lt;br/&gt;
+  private Schema schemaWithExplicitNullDefault() {&lt;br/&gt;
+    String schema = &quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;my_record\&quot;,\&quot;namespace\&quot;:\&quot;mytest.namespace\&quot;,\&quot;doc\&quot;:\&quot;doc\&quot;,&quot; +&lt;br/&gt;
+            &quot;\&quot;fields\&quot;:[&lt;/p&gt;
{\&quot;name\&quot;:\&quot;f\&quot;,\&quot;type\&quot;:[\&quot;null\&quot;,\&quot;string\&quot;],\&quot;doc\&quot;:\&quot;field doc doc\&quot;, &quot; +
+            &quot;\&quot;default\&quot;:null}
&lt;p&gt;]}&quot;;&lt;br/&gt;
+    return new Schema.Parser().parse(schema);&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private Schema schemaWithoutExplicitNullDefault() {&lt;br/&gt;
+    String schema = &quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;my_record\&quot;,\&quot;namespace\&quot;:\&quot;mytest.namespace\&quot;,\&quot;doc\&quot;:\&quot;doc\&quot;,&quot; +&lt;br/&gt;
+            &quot;\&quot;fields\&quot;:[&lt;/p&gt;
{\&quot;name\&quot;:\&quot;f\&quot;,\&quot;type\&quot;:[\&quot;null\&quot;,\&quot;string\&quot;],\&quot;doc\&quot;:\&quot;field doc doc\&quot;}
&lt;p&gt;]}&quot;;&lt;br/&gt;
+    return new Schema.Parser().parse(schema);&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private void writeObject(Schema schema, GenericRecord datum) throws Exception &lt;/p&gt;
{
+    BinaryEncoder encoder = EncoderFactory.get().binaryEncoder(new ByteArrayOutputStream(), null);
+    GenericDatumWriter&amp;lt;GenericData.Record&amp;gt; writer = new GenericDatumWriter&amp;lt;GenericData.Record&amp;gt;(schema);
+    writer.write(schema, datum, encoder);
+  }
&lt;p&gt;+&lt;br/&gt;
+  private GenericRecord createRecordWithDefaultField(Schema schema) &lt;/p&gt;
{
+    GenericRecord record = new GenericData.Record(schema);
+    record.put(&quot;f&quot;, schema.getField(&quot;f&quot;).defaultVal());
+    return record;
+  }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16381926" author="githubbot" created="Thu, 1 Mar 2018 12:40:08 +0000"  >&lt;p&gt;derekstraka opened a new pull request #290: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/290&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/290&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Backport the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; to the 1.8 branch&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16381931" author="githubbot" created="Thu, 1 Mar 2018 12:42:11 +0000"  >&lt;p&gt;derekstraka commented on issue #290: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/290#issuecomment-369579755&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/290#issuecomment-369579755&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I&apos;ve run into this issue a few times when using the 1.8 branch, so I backported the fix from #180 .  If the 1.8 branch is effectively closed, this PR can be rejected.  &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16389823" author="jira-bot" created="Wed, 7 Mar 2018 17:15:12 +0000"  >&lt;p&gt;Commit 10792f777f5a31f8c1e5d9a6f6c6d4ba2727ab58 in avro&apos;s branch refs/heads/branch-1.8 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkollar&quot; class=&quot;user-hover&quot; rel=&quot;nkollar&quot;&gt;Nandor Kollar&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=10792f7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=10792f7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null. Contributed by Nandor Kollar&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d9338a4cf008b445ea3efbe2523288d07162ec71)&lt;/p&gt;</comment>
                            <comment id="16389830" author="githubbot" created="Wed, 7 Mar 2018 17:21:49 +0000"  >&lt;p&gt;nandorKollar commented on issue #290: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/290#issuecomment-371214137&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/290#issuecomment-371214137&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @derekstraka I cherry-picket and &lt;span class=&quot;error&quot;&gt;&amp;#91;committed&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/avro/commit/10792f777f5a31f8c1e5d9a6f6c6d4ba2727ab58&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/commit/10792f777f5a31f8c1e5d9a6f6c6d4ba2727ab58&lt;/a&gt;) the fix to branch-1.8 and will be release with the next release from 1.8 branch. If it looks good to you, you can close this PR.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16390034" author="githubbot" created="Wed, 7 Mar 2018 18:59:19 +0000"  >&lt;p&gt;derekstraka closed pull request #290: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/290&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/290&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/CHANGES.txt b/CHANGES.txt&lt;br/&gt;
index 7156f730e..83f214592 100644&lt;br/&gt;
&amp;#8212; a/CHANGES.txt&lt;br/&gt;
+++ b/CHANGES.txt&lt;br/&gt;
@@ -40,6 +40,9 @@ Trunk (not yet released)&lt;br/&gt;
     &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2122&quot; title=&quot;Cannot validate schemas with recursive definitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2122&quot;&gt;&lt;del&gt;AVRO-2122&lt;/del&gt;&lt;/a&gt;: Cannot validate schemas with recursive definitions&lt;br/&gt;
     (Bart via Nandor Kollar)&lt;/p&gt;

&lt;p&gt;+    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt;: Java: Schema.Field.defaultVal() generates: Unknown datum type&lt;br/&gt;
+    (Nandor Kollar via tomwhite)&lt;br/&gt;
+&lt;br/&gt;
 Avro 1.8.2 (10 April 2017)&lt;/p&gt;

&lt;p&gt;   INCOMPATIBLE CHANGES&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
index 67d47d99c..c7931c736 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
@@ -36,6 +36,7 @@&lt;br/&gt;
 import org.apache.avro.AvroTypeException;&lt;br/&gt;
 import org.apache.avro.Conversion;&lt;br/&gt;
 import org.apache.avro.Conversions;&lt;br/&gt;
+import org.apache.avro.JsonProperties;&lt;br/&gt;
 import org.apache.avro.LogicalType;&lt;br/&gt;
 import org.apache.avro.Schema;&lt;br/&gt;
 import org.apache.avro.Schema.Field;&lt;br/&gt;
@@ -744,7 +745,7 @@ public int resolveUnion(Schema union, Object datum) {&lt;br/&gt;
   /** Return the schema full name for a datum.  Called by &lt;/p&gt;
{@link
    * #resolveUnion(Schema,Object)}
&lt;p&gt;. */&lt;br/&gt;
   protected String getSchemaName(Object datum) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (datum == null)&lt;br/&gt;
+    if (datum == null || datum == JsonProperties.NULL_VALUE)&lt;br/&gt;
       return Type.NULL.getName();&lt;br/&gt;
     if (isRecord(datum))&lt;br/&gt;
       return getRecordSchema(datum).getFullName();&lt;br/&gt;
diff --git a/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java b/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java&lt;br/&gt;
index f93a326c4..8f99cdfe4 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java&lt;br/&gt;
+++ b/lang/java/avro/src/test/java/org/apache/avro/generic/TestGenericDatumWriter.java&lt;br/&gt;
@@ -24,7 +24,6 @@&lt;br/&gt;
 import java.io.ByteArrayInputStream;&lt;br/&gt;
 import java.io.ByteArrayOutputStream;&lt;br/&gt;
 import java.io.IOException;&lt;br/&gt;
-import java.io.OutputStream;&lt;br/&gt;
 import java.nio.ByteBuffer;&lt;br/&gt;
 import java.util.ConcurrentModificationException;&lt;br/&gt;
 import java.util.HashMap;&lt;br/&gt;
@@ -37,11 +36,10 @@&lt;br/&gt;
 import java.util.concurrent.Future;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import org.apache.avro.Schema;&lt;br/&gt;
+import org.apache.avro.io.BinaryEncoder;&lt;br/&gt;
 import org.apache.avro.io.DecoderFactory;&lt;br/&gt;
-import org.apache.avro.io.DirectBinaryEncoder;&lt;br/&gt;
 import org.apache.avro.io.Encoder;&lt;br/&gt;
 import org.apache.avro.io.EncoderFactory;&lt;br/&gt;
-import org.apache.avro.io.JsonDecoder;&lt;br/&gt;
 import org.apache.avro.AvroTypeException;&lt;br/&gt;
 import org.junit.Test;&lt;br/&gt;
 import org.apache.avro.util.Utf8;&lt;br/&gt;
@@ -257,4 +255,43 @@ public void writeDoesNotAllowJavaEnumForGenericEnum() throws IOException &lt;/p&gt;
{
 
     writer.write(record, encoder);
   }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void writeFieldWithDefaultWithExplicitNullDefaultInSchema() throws Exception &lt;/p&gt;
{
+    Schema schema = schemaWithExplicitNullDefault();
+    GenericRecord record = createRecordWithDefaultField(schema);
+    writeObject(schema, record);
+  }
&lt;p&gt;+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void writeFieldWithDefaultWithoutExplicitNullDefaultInSchema() throws Exception &lt;/p&gt;
{
+    Schema schema = schemaWithoutExplicitNullDefault();
+    GenericRecord record = createRecordWithDefaultField(schema);
+    writeObject(schema, record);
+  }
&lt;p&gt;+&lt;br/&gt;
+  private Schema schemaWithExplicitNullDefault() {&lt;br/&gt;
+    String schema = &quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;my_record\&quot;,\&quot;namespace\&quot;:\&quot;mytest.namespace\&quot;,\&quot;doc\&quot;:\&quot;doc\&quot;,&quot; +&lt;br/&gt;
+            &quot;\&quot;fields\&quot;:[&lt;/p&gt;
{\&quot;name\&quot;:\&quot;f\&quot;,\&quot;type\&quot;:[\&quot;null\&quot;,\&quot;string\&quot;],\&quot;doc\&quot;:\&quot;field doc doc\&quot;, &quot; +
+            &quot;\&quot;default\&quot;:null}
&lt;p&gt;]}&quot;;&lt;br/&gt;
+    return new Schema.Parser().parse(schema);&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private Schema schemaWithoutExplicitNullDefault() {&lt;br/&gt;
+    String schema = &quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;my_record\&quot;,\&quot;namespace\&quot;:\&quot;mytest.namespace\&quot;,\&quot;doc\&quot;:\&quot;doc\&quot;,&quot; +&lt;br/&gt;
+            &quot;\&quot;fields\&quot;:[&lt;/p&gt;
{\&quot;name\&quot;:\&quot;f\&quot;,\&quot;type\&quot;:[\&quot;null\&quot;,\&quot;string\&quot;],\&quot;doc\&quot;:\&quot;field doc doc\&quot;}
&lt;p&gt;]}&quot;;&lt;br/&gt;
+    return new Schema.Parser().parse(schema);&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private void writeObject(Schema schema, GenericRecord datum) throws Exception &lt;/p&gt;
{
+    BinaryEncoder encoder = EncoderFactory.get().binaryEncoder(new ByteArrayOutputStream(), null);
+    GenericDatumWriter&amp;lt;GenericData.Record&amp;gt; writer = new GenericDatumWriter&amp;lt;GenericData.Record&amp;gt;(schema);
+    writer.write(schema, datum, encoder);
+  }
&lt;p&gt;+&lt;br/&gt;
+  private GenericRecord createRecordWithDefaultField(Schema schema) &lt;/p&gt;
{
+    GenericRecord record = new GenericData.Record(schema);
+    record.put(&quot;f&quot;, schema.getField(&quot;f&quot;).defaultVal());
+    return record;
+  }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717790" author="jira-bot" created="Tue, 11 Dec 2018 19:14:37 +0000"  >&lt;p&gt;Commit 10792f777f5a31f8c1e5d9a6f6c6d4ba2727ab58 in avro&apos;s branch refs/heads/branch-1.8 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkollar&quot; class=&quot;user-hover&quot; rel=&quot;nkollar&quot;&gt;Nandor Kollar&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=10792f7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=10792f7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1954&quot; title=&quot;Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1954&quot;&gt;&lt;del&gt;AVRO-1954&lt;/del&gt;&lt;/a&gt; - Schema.Field.defaultVal() generates: Unknown datum type org.apache.avro.JsonProperties$Null. Contributed by Nandor Kollar&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d9338a4cf008b445ea3efbe2523288d07162ec71)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12837813" name="unitTestDefaultNull.patch" size="4357" author="iamwrong" created="Mon, 7 Nov 2016 18:19:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Jan 2017 11:06:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i360m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
