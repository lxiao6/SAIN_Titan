<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:17:10 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2012-5-16+AND+created+%3C%3D+2012-5-23+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="9" total="9"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1092] avro-c: improving thread safety in error management code</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1092</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Error management code isn`t thread safe at all. I wrote a patch for this issue, but it works only for *nix systems.&lt;/p&gt;

&lt;p&gt;Affected functions: avro_set_error(), avro_prefix_error()&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556011">AVRO-1092</key>
            <summary>avro-c: improving thread safety in error management code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mpugachev">Pugachev Maxim</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2012 10:40:20 +0000</created>
                <updated>Mon, 11 Jun 2012 20:01:34 +0000</updated>
                            <resolved>Sun, 20 May 2012 14:25:44 +0000</resolved>
                                    <version>1.6.3</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13276650" author="mpugachev" created="Wed, 16 May 2012 10:41:05 +0000"  >&lt;p&gt;Patch for this issue.&lt;/p&gt;</comment>
                            <comment id="13277091" author="vnadkarni" created="Wed, 16 May 2012 20:31:11 +0000"  >&lt;p&gt;I downloaded the patch to test it out in Windows, since you had called&lt;br/&gt;
out the potential Windows incompatibility. The code didn&apos;t compile&lt;br/&gt;
under Windows, but I was able to get the code to compile and pass&lt;br/&gt;
tests with a minor modification. &lt;/p&gt;

&lt;p&gt;I am attaching my minor modification as a patch that should be applied&lt;br/&gt;
on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1092&quot; title=&quot;avro-c: improving thread safety in error management code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1092&quot;&gt;&lt;del&gt;AVRO-1092&lt;/del&gt;&lt;/a&gt;.patch. This patch should be applied from within&lt;br/&gt;
the avro-trunk/lang/c directory.&lt;/p&gt;

&lt;p&gt;My patch also updates the file README.maintaining_win32.txt, to&lt;br/&gt;
capture the inability of MSVC++ to support structure initialization&lt;br/&gt;
using element names.&lt;/p&gt;
</comment>
                            <comment id="13277137" author="vnadkarni" created="Wed, 16 May 2012 20:54:50 +0000"  >&lt;p&gt;A few questions regarding the patch, specifically the CMakeLists.txt&lt;br/&gt;
file. I am by no means a CMake expert, so apologies if the answers&lt;br/&gt;
should be obvious &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;1. Are THREAD_LIBRARIES and THREADSAFE cmake intrinsic definitions or&lt;br/&gt;
   are they your definitions?&lt;/p&gt;

&lt;p&gt;2. I didn&apos;t see why the definition _REENTRANT was set. It isn&apos;t used&lt;br/&gt;
   anywhere in the source. Is it a requirement of pthreads?&lt;/p&gt;

&lt;p&gt;3. How do you disable or enable threads (under Linux)? Is there a&lt;br/&gt;
   reason you didn&apos;t use the syntax similar to the zlib and lzma&lt;br/&gt;
   codecs? For example&lt;/p&gt;

&lt;p&gt;    find_package(Threads)&lt;br/&gt;
    if (Threads_FOUND)&lt;br/&gt;
      message(&quot;Threads_FOUND&quot;)&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Use threads here.&lt;br/&gt;
    else (Threads_FOUND)&lt;br/&gt;
      message(&quot;Threads not FOUND&quot;)&lt;br/&gt;
    endif(Threads_FOUND)&lt;/li&gt;
&lt;/ol&gt;



&lt;p&gt;Thanks,&lt;br/&gt;
Vivek&lt;/p&gt;</comment>
                            <comment id="13277626" author="mpugachev" created="Thu, 17 May 2012 07:04:47 +0000"  >&lt;p&gt;&amp;gt; 1. Are THREAD_LIBRARIES and THREADSAFE cmake intrinsic definitions or are they your definitions?&lt;/p&gt;

&lt;p&gt;This is mine definitions.&lt;/p&gt;


&lt;p&gt;&amp;gt; 2. I didn&apos;t see why the definition _REENTRANT was set. It isn&apos;t used anywhere in the source. Is it a requirement of pthreads?&lt;/p&gt;

&lt;p&gt;Defining _REENTRANT causes the compiler to use thread safe (i.e. re-entrant) versions of several functions in the C library. This is not a requirement, but it should be used in MT code.&lt;/p&gt;


&lt;p&gt;&amp;gt; 3. How do you disable or enable threads (under Linux)?&lt;/p&gt;

&lt;p&gt;You need to pass a THREADSAFE flag to cmake: &quot;cmake -DTHREADSAFE=true .&quot;&lt;/p&gt;


&lt;p&gt;&amp;gt; Is there a reason you didn&apos;t use the syntax similar to the zlib and lzma codecs?&lt;/p&gt;

&lt;p&gt;There is no flag named &quot;Threads_FOUND&quot; in cmake`s module FindThreads.cmake. In perfect scenario this code should be like this:&lt;/p&gt;

&lt;p&gt;if(THREADSAFE)&lt;br/&gt;
    find_package(Threads)&lt;br/&gt;
    add_definitions(-DTHREADSAFE -D_REENTRANT)&lt;br/&gt;
    set(THREADS_LIBRARIES ${CMAKE_THREAD_LIBS_INIT})&lt;/p&gt;

&lt;p&gt;    #check for Unix/Win32 and add extra definitions&lt;br/&gt;
endif(THREADSAFE)&lt;/p&gt;

&lt;p&gt;${CMAKE_THREAD_LIBS_INIT} contains correct thread library (pthreads or win32 threads).&lt;/p&gt;</comment>
                            <comment id="13278201" author="vnadkarni" created="Thu, 17 May 2012 20:09:33 +0000"  >&lt;p&gt;Thanks for the clarification. &lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Vivek&lt;/p&gt;</comment>
                            <comment id="13279776" author="dcreager" created="Sun, 20 May 2012 14:25:09 +0000"  >&lt;p&gt;Looks good except for one detail &#8212; we don&apos;t have to add &lt;tt&gt;-pthread&lt;/tt&gt; to the compiler flags since FindThreads will add that for us if it&apos;s needed on the current platform.&lt;/p&gt;</comment>
                            <comment id="13279778" author="dcreager" created="Sun, 20 May 2012 14:25:45 +0000"  >&lt;p&gt;Committed to SVN with Vivek&apos;s Windows-compatibility updates, and without setting &lt;tt&gt;-pthread&lt;/tt&gt; compiler flag manually.&lt;/p&gt;</comment>
                            <comment id="13279779" author="dcreager" created="Sun, 20 May 2012 14:26:42 +0000"  >&lt;p&gt;Oh and I described how to set the &lt;tt&gt;THREADSAFE&lt;/tt&gt; cmake variable in the INSTALL file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12527697" name="AVRO-1092-patch-2.patch" size="1372" author="vnadkarni" created="Wed, 16 May 2012 20:31:11 +0000"/>
                            <attachment id="12527605" name="AVRO-1092.patch" size="5569" author="mpugachev" created="Wed, 16 May 2012 10:41:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 May 2012 20:31:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253644</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1093] DataFileWriter, appendEncoded causes AvroRuntimeException when read back</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1093</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We&apos;re doing this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Check
&lt;/span&gt;		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(objRecordsBuffer
		.containsKey (objShardPath))) {
			&lt;span class=&quot;code-comment&quot;&gt;// Set
&lt;/span&gt;			objRecordsBuffer.put (objShardPath,
			&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteBufferOutputStream ());
		}

		&lt;span class=&quot;code-comment&quot;&gt;// Set
&lt;/span&gt;		Encoder objEncoder =  EncoderFactory.get ()
		.binaryEncoder (objRecordsBuffer
		.get (objShardPath), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

		&lt;span class=&quot;code-comment&quot;&gt;// Write
&lt;/span&gt;		objGenericDatumWriter.write (objRecordConstructor.build (), objEncoder);
		objEncoder.flush ();

&lt;span class=&quot;code-comment&quot;&gt;// For
&lt;/span&gt;				&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ByteBuffer objRecord : objRecordsBuffer
				.get (objKey).getBufferList ()) {
					&lt;span class=&quot;code-comment&quot;&gt;// Append
&lt;/span&gt;					objRecordWriter.appendEncoded (objRecord);
				}

				&lt;span class=&quot;code-comment&quot;&gt;// Erase
&lt;/span&gt;				objRecordWriter.flush ();
				objRecordWriter.close ();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It writes the data to HDFS. Reading it back outputs the follosing exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: org.apache.avro.AvroRuntimeException: java.io.IOException: Block read partially, the data may be corrupt
        at org.apache.avro.file.DataFileStream.hasNext(DataFileStream.java:210)
        at net.RnD.FileUtils.TimestampedReader.hasNext(TimestampedReader.java:113)
        at net.RnD.Hadoop.App.read1BAvros(App.java:131)
        at net.RnD.Hadoop.App.executeCode(App.java:534)
        at net.RnD.Hadoop.App.main(App.java:453)
        ... 5 more
Caused by: java.io.IOException: Block read partially, the data may be corrupt
        at org.apache.avro.file.DataFileStream.hasNext(DataFileStream.java:194)
        ... 9 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The objRecordWriter is an instance of DataFileWriter.create or DataFileWriter.appendto (SeekableInput). In relation to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1090&quot; title=&quot;DataFileWriter should expose &amp;quot;sync marker&amp;quot; to allow concurrent writes to same .avro file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1090&quot;&gt;&lt;del&gt;AVRO-1090&lt;/del&gt;&lt;/a&gt; ticket.&lt;br/&gt;
Instead of having big &quot;hashmaps&quot; in memory, we&apos;ve decided to serialize the data in &quot;byte buffers&quot; in memory. Because it&apos;s faster. Using &quot;appendEncoded&quot; although seems to write something to HDFS, reading the data back, exposes this error.&lt;br/&gt;
Help would be appreciated. I&apos;ve looked @ appendEncoded in DataFileWriter but could not figure out if it&apos;s our job to add a sync marker, or does appendEncoded does that for us.&lt;br/&gt;
Must the &quot;ByteBuffer&quot; we give, be the length of one exact record?&lt;br/&gt;
Examples and documentation on this method is welcomed.&lt;/p&gt;

&lt;p&gt;Files are getting created because:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-rw-r--r--   3 root supergroup  124901360 2012-05-17 10:09 /Streams/Timestamped/Threads/2012/05/17/10/09/Shard.avro
-rw-r--r--   3 root supergroup  124845625 2012-05-17 10:10 /Streams/Timestamped/Threads/2012/05/17/10/10/Shard.avro
-rw-r--r--   3 root supergroup   62378307 2012-05-17 10:11 /Streams/Timestamped/Threads/2012/05/17/10/11/Shard.avro
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12556040">AVRO-1093</key>
            <summary>DataFileWriter, appendEncoded causes AvroRuntimeException when read back</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="catalinalexandru.zamfir@gameloft.com">Catalin Alexandru Zamfir</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2012 14:37:00 +0000</created>
                <updated>Tue, 25 Sep 2012 21:22:59 +0000</updated>
                            <resolved>Thu, 17 May 2012 18:33:10 +0000</resolved>
                                    <version>1.6.3</version>
                    <version>1.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13277779" author="catalinalexandru.zamfir@gameloft.com" created="Thu, 17 May 2012 13:01:44 +0000"  >&lt;p&gt;Close it as invalid please. Fixed. Instead of &quot;ByteBufferOutputStream&quot; use &quot;ByteArrayOutputStream&quot;. When you &quot;flush the encoder&quot; (ex. objEncoder.flush ()) MAKE SURE TO CALL ByteArrayOutputStream.close () afterwards! Then, for each BAOS in memory, when you want to write you just appendEncoded.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ByteArrayOutputStream 
objStream : objRecordsBuffer
.get (objKey)) {
	&lt;span class=&quot;code-comment&quot;&gt;// Bytes
&lt;/span&gt;	ByteBuffer objBytes = ByteBuffer.wrap (objStream.toByteArray ());
	objRecordWriter.appendEncoded (objBytes);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Writing directly to ByteArrayOutputStream, via the EncoderFactory.get ().binaryEncoder, makes sure no objects stay in memory. They&apos;re serialized as soon as possible. Using appendEncoded, you wrap the BAOS into a ByteBuffer and append it to the stream.&lt;/p&gt;

&lt;p&gt;We were trying to write more than 1 record per 1 BAOS. But that did not work. We could not read the data back.&lt;br/&gt;
Thus, we tried to write 1 record per BAOS, closing the stream after each write. That worked. Data could be read back properly.&lt;br/&gt;
I don&apos;t know why we can&apos;t write more than 1 record per 1 BAOS.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1094] Impossible to use non-default velocity templates</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1094</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;It is effectively impossible to use a non-default velocity template for Avro compilation via the Maven plugin because the plugin&apos;s classloader only gives you access to its classpath and its dependencies classpath.&lt;/p&gt;

&lt;p&gt;This can be fixed by adding more resource loaders to Velocity in AvroCompiler.java.&lt;/p&gt;

&lt;p&gt;I&apos;ll update this with a patch soon.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556263">AVRO-1094</key>
            <summary>Impossible to use non-default velocity templates</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekohlwey">Ed Kohlwey</assignee>
                                    <reporter username="ekohlwey">Ed Kohlwey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 May 2012 17:58:05 +0000</created>
                <updated>Mon, 11 Jun 2012 20:01:34 +0000</updated>
                            <resolved>Fri, 18 May 2012 21:30:19 +0000</resolved>
                                    <version>1.6.2</version>
                    <version>1.6.3</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13278038" author="cutting" created="Thu, 17 May 2012 18:10:41 +0000"  >&lt;p&gt;Patch looks good.  Should we add a test that uses this, so that someone doesn&apos;t inadvertently break this?&lt;/p&gt;</comment>
                            <comment id="13278115" author="ekohlwey" created="Thu, 17 May 2012 19:16:03 +0000"  >&lt;p&gt;Here&apos;s a better patch with a test included.&lt;/p&gt;</comment>
                            <comment id="13278116" author="ekohlwey" created="Thu, 17 May 2012 19:16:39 +0000"  >&lt;p&gt;Whats the chance of a 1.6.4 release with this included? Or is the 1.7 release planned fairly soon?&lt;/p&gt;</comment>
                            <comment id="13278258" author="cutting" created="Thu, 17 May 2012 20:59:18 +0000"  >&lt;p&gt;The test didn&apos;t work for me.  Here&apos;s a modified version that does.  Does this work for you too?&lt;/p&gt;

&lt;p&gt;I&apos;m hoping to make a 1.7.0 release soon.&lt;/p&gt;</comment>
                            <comment id="13278307" author="ekohlwey" created="Thu, 17 May 2012 21:46:28 +0000"  >&lt;p&gt;Your patch doesn&apos;t work for me. How are you running it?&lt;/p&gt;

&lt;p&gt;I&apos;m using maven 3 installed from MacPorts on OSX and running the following from the Avro project root: &lt;/p&gt;

&lt;p&gt;mvn -pl .,lang/java/,lang/java/compiler,lang/java/maven-plugin test&lt;/p&gt;

&lt;p&gt;It also works using the JUnit runner inside Eclipse 3.7 with m2e installed.&lt;/p&gt;

&lt;p&gt;I think the notion of the CWD will vary based on where the maven command is actually executed (or Junit, if you&apos;re testing through eclipse).&lt;/p&gt;</comment>
                            <comment id="13278316" author="ekohlwey" created="Thu, 17 May 2012 21:57:22 +0000"  >&lt;p&gt;Does this work a little better? It uses a little fancier class loader manipulation that should be robust in both environments.&lt;/p&gt;</comment>
                            <comment id="13278339" author="cutting" created="Thu, 17 May 2012 22:19:01 +0000"  >&lt;p&gt;Your new patch fails for me with:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.avro.compiler.TestSpecificCompiler.getFilesystemPathForResource(TestSpecificCompiler.java:36)&lt;br/&gt;
	at org.apache.avro.compiler.TestSpecificCompiler.testCanReadTemplateFilesOnTheFilesystem(TestSpecificCompiler.java:43)&lt;/p&gt;

&lt;p&gt;I test with &apos;mvn clean test&apos; from the project root.  The CWD in Maven is the module&apos;s directory.  We rely on this in other tests and in the pom.xml files.  If I want to run just a specific test then I run &apos;mvn test -DTestName&apos;.&lt;/p&gt;

&lt;p&gt;I note that &apos;lang/java/avro&apos; is missing from your project list.  Dunno if that&apos;s required.  I never use &apos;-pl&apos;.&lt;/p&gt;
</comment>
                            <comment id="13278388" author="ekohlwey" created="Thu, 17 May 2012 23:16:19 +0000"  >&lt;p&gt;I just forgot the lang/java/avro when I was typing that in.&lt;/p&gt;

&lt;p&gt;Doing an old fashioned &quot;mvn clean test&quot; works from the root with your first patch. +1&lt;/p&gt;</comment>
                            <comment id="13279207" author="cutting" created="Fri, 18 May 2012 21:30:19 +0000"  >&lt;p&gt;I just committed this. Thanks, Ed!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12527935" name="AVRO-1094.patch" size="5185" author="ekohlwey" created="Thu, 17 May 2012 21:57:22 +0000"/>
                            <attachment id="12527917" name="AVRO-1094.patch" size="4955" author="cutting" created="Thu, 17 May 2012 20:59:18 +0000"/>
                            <attachment id="12527869" name="AVRO-1094.patch" size="1727" author="ekohlwey" created="Thu, 17 May 2012 17:59:15 +0000"/>
                            <attachment id="12527890" name="AVRO-1094.patch.2" size="4159" author="ekohlwey" created="Thu, 17 May 2012 19:16:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 May 2012 18:10:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253646</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1095] C++ compiler warns about control reaching end of doAdavance (in JsonIO.cc) which returns something other than void</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1095</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This warning is because the function calls unexpected() which always throws and the compiler is unaware of it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556501">AVRO-1095</key>
            <summary>C++ compiler warns about control reaching end of doAdavance (in JsonIO.cc) which returns something other than void</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 May 2012 02:46:36 +0000</created>
                <updated>Tue, 25 Sep 2012 21:24:32 +0000</updated>
                            <resolved>Sun, 20 May 2012 16:40:19 +0000</resolved>
                                                    <fixVersion>1.7.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13279812" author="thiru_mg" created="Sun, 20 May 2012 16:40:19 +0000"  >&lt;p&gt;Committed revision 1340767.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528204" name="AVRO-1095.patch" size="3624" author="thiru_mg" created="Sat, 19 May 2012 05:59:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250259</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0awmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61560</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1096] Don&apos;t set default CMAKE_OSX_ARCHITECTURES</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1096</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Our CMake build scripts set CMAKE_OSX_ARCHITECTURES to a default value, and don&apos;t let the user override this value.  It should really be left up to the user to choose whether to build a universal binary or not.  (Especially since the list of supported platforms differs depending on which OS X version you&apos;re running.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556591">AVRO-1096</key>
            <summary>Don&apos;t set default CMAKE_OSX_ARCHITECTURES</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 May 2012 13:46:18 +0000</created>
                <updated>Mon, 11 Jun 2012 20:01:34 +0000</updated>
                            <resolved>Sun, 20 May 2012 13:51:29 +0000</resolved>
                                    <version>1.6.3</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13279757" author="dcreager" created="Sun, 20 May 2012 13:47:07 +0000"  >&lt;p&gt;Patch for this issue&lt;/p&gt;</comment>
                            <comment id="13279758" author="brucem" created="Sun, 20 May 2012 13:48:43 +0000"  >&lt;p&gt;+1 ... although would be nice if the build instructions could tell how to set the architectures being built.&lt;/p&gt;</comment>
                            <comment id="13279759" author="dcreager" created="Sun, 20 May 2012 13:51:30 +0000"  >&lt;p&gt;Committed to SVN&lt;/p&gt;</comment>
                            <comment id="13279768" author="dcreager" created="Sun, 20 May 2012 14:10:32 +0000"  >&lt;p&gt;Good idea, Bruce.  Just updated the INSTALL file to describe this option and list the usual suspects that might be available, depending on which OS X you&apos;re running.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528323" name="0001-No-default-for-CMAKE_OSX_ARCHITECTURES.patch" size="869" author="dcreager" created="Sun, 20 May 2012 13:47:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 20 May 2012 13:48:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253647</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1097] BinaryDecoder does not detect EOF sometimes</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1097</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This is the first problem reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1058&quot; title=&quot;invalid int encoding with binary format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1058&quot;&gt;AVRO-1058&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The trouble is, in case of end of stream, ensureBounds() does not really ensure that the requisite number of actual bytes are available in the buffer. It merely ensures that there won&apos;t be array index overflow. readInt() and readLong() check for overflow at the very end. But these two methods continue to read whatever bytes are in the buffer and interpret. If the bytes do not really belong to the stream (because of EOF), they need not be valid Zigzag encoding. That is the reason we get the &quot;Invalid int encoding&quot; exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556644">AVRO-1097</key>
            <summary>BinaryDecoder does not detect EOF sometimes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 May 2012 05:39:17 +0000</created>
                <updated>Mon, 11 Jun 2012 20:01:36 +0000</updated>
                            <resolved>Wed, 23 May 2012 20:29:04 +0000</resolved>
                                                    <fixVersion>1.7.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13279977" author="thiru_mg" created="Mon, 21 May 2012 05:53:10 +0000"  >&lt;p&gt;This patch addresses the issue by checking if there are indeed bytes to be decoded. If not, it throws an EOFException. If there are some bytes and they do not constitute a valid Zigzag encoding, it throws &quot;Invalid int/long encoding&quot; exception.&lt;/p&gt;</comment>
                            <comment id="13280525" author="cutting" created="Mon, 21 May 2012 21:37:57 +0000"  >&lt;p&gt;This doesn&apos;t seem like it should be that high of a priority, since it&apos;s just about getting a more meaningful exception for bad data.&lt;/p&gt;

&lt;p&gt;Could we instead just put the check into ensureBounds()?  That should keep this from affecting performance.  Here&apos;s a patch that does that.&lt;/p&gt;

&lt;p&gt;The change from EOFException to IOException looks right, but it causes some other tests to fail.  Perhaps we should update those other tests?&lt;/p&gt;

&lt;p&gt;Also, we should add some new tests for the specific case being fixed (EOF reading int or long).&lt;/p&gt;</comment>
                            <comment id="13281131" author="thiru_mg" created="Tue, 22 May 2012 18:21:16 +0000"  >&lt;p&gt;+1. I&apos;m fine with Doug&apos;s patch.&lt;/p&gt;

&lt;p&gt;The attached test reproduces the problem.&lt;/p&gt;
</comment>
                            <comment id="13281882" author="cutting" created="Wed, 23 May 2012 20:29:04 +0000"  >&lt;p&gt;I committed this.  Thanks, Thiru!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528630" name="AVRO-1097-test.patch" size="946" author="thiru_mg" created="Tue, 22 May 2012 18:21:16 +0000"/>
                            <attachment id="12528507" name="AVRO-1097.patch" size="533" author="cutting" created="Mon, 21 May 2012 21:37:57 +0000"/>
                            <attachment id="12528391" name="AVRO-1097.patch" size="1279" author="thiru_mg" created="Mon, 21 May 2012 05:53:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 May 2012 21:37:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80465</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1098] C# SchemaNormalizationTests doesn&apos;t compile on linux</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1098</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Compilation of the new SchemaNormalizationTests.cs fails for me with errors like:&lt;/p&gt;

&lt;p&gt;	Schema/SchemaNormalizationTests.cs(55,17): error CS0029: Cannot implicitly convert type `System.Collections.Generic.List&amp;lt;object[]&amp;gt;&apos; to `System.Collections.Generic.List&amp;lt;object&amp;gt;&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556751">AVRO-1098</key>
            <summary>C# SchemaNormalizationTests doesn&apos;t compile on linux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 May 2012 20:54:58 +0000</created>
                <updated>Mon, 11 Jun 2012 20:01:36 +0000</updated>
                            <resolved>Wed, 23 May 2012 20:35:19 +0000</resolved>
                                                    <fixVersion>1.7.0</fixVersion>
                                    <component>csharp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13280479" author="cutting" created="Mon, 21 May 2012 20:57:01 +0000"  >&lt;p&gt;This gets things to work for me.  But I&apos;m not a C# programmer and have no idea whether this is actually correct.&lt;/p&gt;</comment>
                            <comment id="13281110" author="thiru_mg" created="Tue, 22 May 2012 17:41:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I think you fix is correct. I tested the previous code on Ubuntu 12.04 (which has Mono 2.10) and it worked. I think yours is an older version of mono.&lt;/p&gt;

&lt;p&gt;I tested your change in Windows and it works. I don&apos;t have my Ubuntu 12.04 handy to try.&lt;/p&gt;</comment>
                            <comment id="13281393" author="thiru_mg" created="Wed, 23 May 2012 04:15:41 +0000"  >&lt;p&gt;The change works in Ubuntu 12.04 as well. But there is a slight difference in the command line build procedure.&lt;/p&gt;

&lt;p&gt;The attached patch changes the README file accordingly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528698" name="AVRO-1098-readme.patch" size="453" author="thiru_mg" created="Wed, 23 May 2012 04:15:41 +0000"/>
                            <attachment id="12528499" name="AVRO-1098.patch" size="1025" author="cutting" created="Mon, 21 May 2012 20:57:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 May 2012 17:41:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1099] Int / Float cannot be decoded</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1099</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I am currently using a JSON library that is encoding 0 for a double to &quot;0&quot; instead of &quot;0.0&quot;, without the quotes. First, I feel that &quot;0&quot; is a perfectly valid value for 0 as a double. But, I tried to code around it by changing the &quot;type&quot; of the field to &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;double&amp;quot;, &amp;quot;int&amp;quot;&amp;#93;&lt;/span&gt;&quot;, without the quotes and it is giving me this error:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.avro.AvroTypeException: Expected start-union. Got VALUE_NUMBER_INT&lt;br/&gt;
	at org.apache.avro.io.JsonDecoder.error(JsonDecoder.java:697)&lt;br/&gt;
	at org.apache.avro.io.JsonDecoder.readIndex(JsonDecoder.java:441)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229)&lt;br/&gt;
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)&lt;br/&gt;
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:148)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:173)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:144)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:135)&lt;/p&gt;

&lt;p&gt;If I change it to just &quot;int&quot;, then it works for a few records until it reaches a double.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.7.3. Eclipse IDE for Java EE Developers 1.4.2.20120213&lt;/p&gt;</environment>
        <key id="12556776">AVRO-1099</key>
            <summary>Int / Float cannot be decoded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="jojenki">John Jenkins</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Mon, 21 May 2012 23:22:07 +0000</created>
                <updated>Mon, 11 Jun 2012 20:01:36 +0000</updated>
                            <resolved>Thu, 7 Jun 2012 20:42:29 +0000</resolved>
                                    <version>1.6.3</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13281975" author="cutting" created="Wed, 23 May 2012 22:10:07 +0000"  >&lt;p&gt;Can you please provide complete example code that demonstrates the problem?  Thanks!&lt;/p&gt;</comment>
                            <comment id="13282011" author="jojenki" created="Wed, 23 May 2012 22:50:33 +0000"  >&lt;p&gt;Sure. I am using the &quot;avro-1.6.3.jar&quot; and the &quot;jackson-all-1.9.7.jar&quot; files. Here is some example code all in Java:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.Schema;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.Schema.Parser;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericContainer;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.io.Decoder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.io.DecoderFactory;

/**
 * An example use of Avro.
 *
 * @author John Jenkins
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AvroIntTest {
	/**
	 * This is a sample Avro schema &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;.
	 */
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; DEFINITION = 
		&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;namespace\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;test\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;record\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;DoubleTest\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;fields\&lt;span class=&quot;code-quote&quot;&gt;&quot;:[&quot;&lt;/span&gt; +
				&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
					&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
					&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;DoubleValue\&quot;&quot; +
				&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;;
	
	/**
	 * This is a sample record that matches the above schema.
	 */
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; EXAMPLE_RECORD =
		&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;DoubleValue\&lt;span class=&quot;code-quote&quot;&gt;&quot;:0&quot;&lt;/span&gt; + &lt;span class=&quot;code-comment&quot;&gt;// This will fail.
&lt;/span&gt;			&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;DoubleValue\&lt;span class=&quot;code-quote&quot;&gt;&quot;:0.0&quot;&lt;/span&gt; + // This will succeed.
&lt;/span&gt;		&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;;

	/**
	 * This is the driver of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; example.
	 * 
	 * @param args None accepted.
	 * 
	 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception Never actually thrown, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is stashed here because
	 * 					 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is an example.
	 */
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		&lt;span class=&quot;code-comment&quot;&gt;// Compile the schema.
&lt;/span&gt;		Schema schema = (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parser()).parse(DEFINITION);
		
		&lt;span class=&quot;code-comment&quot;&gt;// Create the reader to read the data that has been decoded.
&lt;/span&gt;		GenericDatumReader&amp;lt;GenericContainer&amp;gt; reader =
			&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReader&amp;lt;GenericContainer&amp;gt;(schema);
		
		&lt;span class=&quot;code-comment&quot;&gt;// Create the decoder to decode our sample record.
&lt;/span&gt;		Decoder decoder =
			(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DecoderFactory()).jsonDecoder(schema, EXAMPLE_RECORD);
		
		&lt;span class=&quot;code-comment&quot;&gt;// Retrieve the container.
&lt;/span&gt;		GenericContainer avroContainer = reader.read(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, decoder);
	}
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We are trying out Avro to see if it will work for our system, so I am very new to it. If there is a more appropriate way to handle this, please let me know.&lt;/p&gt;</comment>
                            <comment id="13282013" author="jojenki" created="Wed, 23 May 2012 22:52:43 +0000"  >&lt;p&gt;That comment on main() is incorrect. It will always throw an AvroTypeException:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.avro.AvroTypeException: Expected &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;. Got VALUE_NUMBER_INT
	at org.apache.avro.io.JsonDecoder.error(JsonDecoder.java:697)
	at org.apache.avro.io.JsonDecoder.readDouble(JsonDecoder.java:208)
	at org.apache.avro.io.ResolvingDecoder.readDouble(ResolvingDecoder.java:187)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:155)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.readRecord(GenericDatumReader.java:173)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:144)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:135)
	at test.AvroIntTest.main(AvroIntTest.java:62)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13282019" author="jojenki" created="Wed, 23 May 2012 23:00:58 +0000"  >&lt;p&gt;Sorry for the comment spam. I wish I could have just edited my original. If you change the &quot;type&quot; of &quot;DoubleValue&quot; from &quot;double&quot; to &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;double&amp;quot;, &amp;quot;int&amp;quot;&amp;#93;&lt;/span&gt; like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * This is a sample Avro schema &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an entry with multiple possible types,
 * &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;&quot;&lt;/span&gt; or &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;.
 */
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; DEFINITION = 
	&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;namespace\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;test\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;record\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;DoubleTest\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;fields\&lt;span class=&quot;code-quote&quot;&gt;&quot;:[&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
				&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;:[\&quot;&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;],&quot;&lt;/span&gt; +
				&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;DoubleValue\&quot;&quot; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt; +
	&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, it will always throw an exception now matter which example you use:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.avro.AvroTypeException: Expected start-union. Got VALUE_NUMBER_FLOAT
	at org.apache.avro.io.JsonDecoder.error(JsonDecoder.java:697)
	at org.apache.avro.io.JsonDecoder.readIndex(JsonDecoder.java:441)
	at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:229)
	at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)
	at org.apache.avro.io.ResolvingDecoder.readIndex(ResolvingDecoder.java:206)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:148)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.readRecord(GenericDatumReader.java:173)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:144)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:135)
	at test.AvroIntTest.main(AvroIntTest.java:62)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13282028" author="cutting" created="Wed, 23 May 2012 23:11:48 +0000"  >&lt;p&gt;In the second case, with the union, your JSON is invalid.  Avro tags non-null values of unions in JSON with the intended type.  So the JSON would need to be &lt;/p&gt;
{&quot;int&quot;: 0}
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://avro.apache.org/docs/current/spec.html#json_encoding&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://avro.apache.org/docs/current/spec.html#json_encoding&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But I think the first example should work.  In JSON all numbers are doubles, so the string &quot;0&quot; and the string &quot;0.0&quot; should be treated equivalently by programs that process JSON, including Avro.  So I believe this is a bug.&lt;/p&gt;</comment>
                            <comment id="13282053" author="jojenki" created="Wed, 23 May 2012 23:54:52 +0000"  >&lt;p&gt;Ok. That all makes sense. I don&apos;t know if this helps or not, but I played around with what you suggested and this also breaks:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * This is a sample Avro schema &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an entry with multiple possible types,
 */
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; DEFINITION = 
	&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;namespace\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;test\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;record\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;DoubleTest\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;fields\&lt;span class=&quot;code-quote&quot;&gt;&quot;:[&quot;&lt;/span&gt; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
				&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;:[\&quot;&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;],&quot;&lt;/span&gt; +
				&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;DoubleValue\&quot;&quot; +
			&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt; +
	&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;;

/**
 * This is a sample record that matches the above schema.
 */
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; EXAMPLE_RECORD =
	&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; +
		&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;DoubleValue\&lt;span class=&quot;code-quote&quot;&gt;&quot;:{\&quot;&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;:0}&quot;&lt;/span&gt; + &lt;span class=&quot;code-comment&quot;&gt;// Fails as it is not a &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;&quot;&lt;/span&gt;.
&lt;/span&gt;	&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But, if I changed it to &quot;0.0&quot;, it is fine. Thank you for looking into this.&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;</comment>
                            <comment id="13286238" author="jojenki" created="Thu, 31 May 2012 00:51:50 +0000"  >&lt;p&gt;I don&apos;t know how to submit a patch or whatever, but my local fix / tests seemed to have fixed it.&lt;/p&gt;

&lt;p&gt;JsonDecoder line 203 goes from:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (in.getCurrentToken() == JsonToken.VALUE_NUMBER_FLOAT) {

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((in.getCurrentToken() == JsonToken.VALUE_NUMBER_INT) ||
        (in.getCurrentToken() == JsonToken.VALUE_NUMBER_FLOAT)) {

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13287550" author="cutting" created="Fri, 1 Jun 2012 17:31:00 +0000"  >&lt;p&gt;Here&apos;s a patch that generalizes your fix to other numeric types and adds unit tests.&lt;/p&gt;</comment>
                            <comment id="13287551" author="cutting" created="Fri, 1 Jun 2012 17:31:45 +0000"  >&lt;p&gt;I&apos;ll commit this soon unless there are objections.&lt;/p&gt;</comment>
                            <comment id="13287555" author="jojenki" created="Fri, 1 Jun 2012 17:36:41 +0000"  >&lt;p&gt;Thank you very much!&lt;/p&gt;

&lt;p&gt;John&lt;/p&gt;</comment>
                            <comment id="13291289" author="cutting" created="Thu, 7 Jun 2012 20:42:29 +0000"  >&lt;p&gt;I committed this.  Thanks, John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12530575" name="AVRO-1099.patch" size="4155" author="cutting" created="Fri, 1 Jun 2012 17:31:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 May 2012 22:10:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>int double zero 0</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1100] ResolveUnion in 1.6.3 thinks a HashMap is a Record.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1100</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Getting an exception thrown on line 542 of ReflectData.java.   Put a breakpoint there and found the following:&lt;/p&gt;

&lt;p&gt;1. Datum is a HashMap with 119 entries.&lt;br/&gt;
2. If I select &quot;getSchemaName(datum)&quot; (line 539) and say inspect, it returns &quot;java.util.HashMap&quot;&lt;br/&gt;
3. The &quot;indexByName&quot; also being accessed on line 539 = &lt;/p&gt;
{map=1, null=0}
&lt;p&gt;4. In &quot;getSchemaName&quot; if I select &quot;isMap(datum)&quot; and say inspect, it returns &quot;true&quot; (this would then return &quot;map&quot; which DOES exist in the indexByName structure&lt;br/&gt;
5. However, still in &quot;getSchemaName&quot; if I select &quot;isRecord(datum)&quot; and say inspect, I also get back &quot;true&quot;.  This then returns &quot;getRecordSchema(datum).getFullName(), which is where the java.util.HashMap from item #2 comes from.   Since this is not in the &quot;indexByName&quot; map, I get an UnresolvedUntionException.&lt;/p&gt;

&lt;p&gt;Either &quot;isRecord&quot; needs to be fixed to not return true for Maps, or the test for &quot;isMap&quot; at line 556 needs to moved up ahead of the test for &quot;isRecord&quot;.&lt;/p&gt;

&lt;p&gt;This works fine under 1.5.4, but breaks under 1.6.3.  I have a JUnit test that reproduces this, if I can figure out how to attach it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, I will.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows, eclipse&lt;/p&gt;</environment>
        <key id="12556872">AVRO-1100</key>
            <summary>ResolveUnion in 1.6.3 thinks a HashMap is a Record.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zookeeperatcabot">Joe Gamache</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 May 2012 15:20:04 +0000</created>
                <updated>Mon, 11 Jun 2012 22:33:39 +0000</updated>
                                            <version>1.6.3</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13281896" author="cutting" created="Wed, 23 May 2012 20:45:38 +0000"  >&lt;p&gt;Is this the same problem as &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1056&quot; title=&quot;ReflectData thinks the instance of a java.util.Map as a record type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1056&quot;&gt;&lt;del&gt;AVRO-1056&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13286674" author="zookeeperatcabot" created="Thu, 31 May 2012 15:54:52 +0000"  >&lt;p&gt;While I think it is the same issue, I am not sure that the solution offered in the other jira is correct.   Is it possible to confirm?&lt;/p&gt;</comment>
                            <comment id="13293145" author="cutting" created="Mon, 11 Jun 2012 22:33:39 +0000"  >&lt;p&gt;Release 1.7.0, containing the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1056&quot; title=&quot;ReflectData thinks the instance of a java.util.Map as a record type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1056&quot;&gt;&lt;del&gt;AVRO-1056&lt;/del&gt;&lt;/a&gt;, is now available.  Can you please confirm whether you&apos;re still seeing this problem?  Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528603" name="IntegerMap.java" size="392" author="zookeeperatcabot" created="Tue, 22 May 2012 15:21:10 +0000"/>
                            <attachment id="12528604" name="ReflectDataTest.java" size="1135" author="zookeeperatcabot" created="Tue, 22 May 2012 15:21:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 May 2012 20:45:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e4cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
