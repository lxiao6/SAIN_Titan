<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:20:40 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2014-8-6+AND+created+%3C%3D+2014-8-13+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="7" total="7"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1560] SNAPPY_INCLUDE_DIR not accounted in CMakeLists.txt</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1560</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The current CMakeLists.txt does not account for Snappy include folders causing the compilation to fail when a custom snappy location is provided using -DSNAPPY_ROOT_DIR&lt;/p&gt;

&lt;p&gt;e.g .&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;cmake avro-c-1.7.7 -DSNAPPY_ROOT_DIR=${SNAPPY_INSTALL_DIR}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In &lt;a href=&quot;https://github.com/apache/avro/blob/release-1.7.7/lang/c/CMakeLists.txt#L143&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/release-1.7.7/lang/c/CMakeLists.txt#L143&lt;/a&gt; we should include &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;include_directories(${SNAPPY_INCLUDE_DIR})
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12732421">AVRO-1560</key>
            <summary>SNAPPY_INCLUDE_DIR not accounted in CMakeLists.txt</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ujjwal.wadhawan">Ujjwal</reporter>
                        <labels>
                            <label>build</label>
                    </labels>
                <created>Wed, 6 Aug 2014 23:23:41 +0000</created>
                <updated>Mon, 1 Feb 2016 14:56:05 +0000</updated>
                            <resolved>Wed, 30 Dec 2015 15:53:54 +0000</resolved>
                                    <version>1.7.7</version>
                                    <fixVersion>1.8.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="14088467" author="ujjwal.wadhawan" created="Wed, 6 Aug 2014 23:32:58 +0000"  >&lt;p&gt;changes added for the fix&lt;/p&gt;</comment>
                            <comment id="15075129" author="jira-bot" created="Wed, 30 Dec 2015 15:52:34 +0000"  >&lt;p&gt;Commit 1722365 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martinkl&quot; class=&quot;user-hover&quot; rel=&quot;martinkl&quot;&gt;Martin Kleppmann&lt;/a&gt; in branch &apos;avro/branches/branch-1.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1722365&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1722365&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1560&quot; title=&quot;SNAPPY_INCLUDE_DIR not accounted in CMakeLists.txt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1560&quot;&gt;&lt;del&gt;AVRO-1560&lt;/del&gt;&lt;/a&gt;: C: Fix build for custom libsnappy location. Contributed by Ujjwal.&lt;/p&gt;</comment>
                            <comment id="15075130" author="jira-bot" created="Wed, 30 Dec 2015 15:52:57 +0000"  >&lt;p&gt;Commit 1722366 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martinkl&quot; class=&quot;user-hover&quot; rel=&quot;martinkl&quot;&gt;Martin Kleppmann&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1722366&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1722366&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1560&quot; title=&quot;SNAPPY_INCLUDE_DIR not accounted in CMakeLists.txt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1560&quot;&gt;&lt;del&gt;AVRO-1560&lt;/del&gt;&lt;/a&gt;: C: Fix build for custom libsnappy location. Contributed by Ujjwal.&lt;/p&gt;</comment>
                            <comment id="15075131" author="martinkl" created="Wed, 30 Dec 2015 15:53:54 +0000"  >&lt;p&gt;+1. I needed this too in order to make the build work with Homebrew on Mac OS X.&lt;/p&gt;

&lt;p&gt;I&apos;ve committed this to branch-1.8 and trunk. Thanks for your contribution, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ujjwal.wadhawan&quot; class=&quot;user-hover&quot; rel=&quot;ujjwal.wadhawan&quot;&gt;Ujjwal&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15075214" author="hudson" created="Wed, 30 Dec 2015 17:11:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #563 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/563/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/563/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1560&quot; title=&quot;SNAPPY_INCLUDE_DIR not accounted in CMakeLists.txt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1560&quot;&gt;&lt;del&gt;AVRO-1560&lt;/del&gt;&lt;/a&gt;: C: Fix build for custom libsnappy location. Contributed by Ujjwal. (martinkl: rev 1722366)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;trunk/lang/c/CMakeLists.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12660269" name="AVRO-1560.patch" size="463" author="ujjwal.wadhawan" created="Wed, 6 Aug 2014 23:32:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Dec 2015 15:52:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ym87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1561] [PATCH] segfault NPE in avro_resolved_map_reader_get_by_index</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1561</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This one took a long time to diagnose, but this bug only appears to happen when you have a map with an embedded record, provided that the record was previously there. Here&apos;s an example avsc that triggers the bug:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{
  &quot;type&quot; : &quot;record&quot;,
  &quot;name&quot; : &quot;ObjectWithMap&quot;,
  &quot;namespace&quot; : &quot;foobar&quot;,
  &quot;fields&quot; : [ {
    &quot;name&quot; : &quot;nested&quot;,
    &quot;type&quot; : {
      &quot;type&quot; : &quot;record&quot;,
      &quot;name&quot; : &quot;Nested&quot;,
      &quot;fields&quot; : [ {
        &quot;name&quot; : &quot;something&quot;,
        &quot;type&quot; : &quot;int&quot;
      } ]
    }
  }, {
    &quot;name&quot; : &quot;mapOfObjects&quot;,
    &quot;type&quot; : {
      &quot;type&quot; : &quot;map&quot;,
      &quot;values&quot; : &quot;Nested&quot;
    }
  } ]
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason the bug occurs in this specific instance is because the schema causes the two Nested objects to be link records, and so a link resolver is set in the iface for the value, but it&apos;s never initialized. &lt;/p&gt;

&lt;p&gt;The patch copies the initialization code present in avro_resolved_array_reader_get_by_index into avro_resolved_map_reader_get_by_index and avro_resolved_map_reader_get_by_name, and the segfault no longer occurs. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12732455">AVRO-1561</key>
            <summary>[PATCH] segfault NPE in avro_resolved_map_reader_get_by_index</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="virtuald">Dustin Spicuzza</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Aug 2014 03:00:36 +0000</created>
                <updated>Mon, 28 Dec 2015 19:38:36 +0000</updated>
                                            <version>1.7.7</version>
                                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14088739" author="virtuald" created="Thu, 7 Aug 2014 03:02:14 +0000"  >&lt;p&gt;Patch for NPE&lt;/p&gt;</comment>
                            <comment id="14111445" author="virtuald" created="Tue, 26 Aug 2014 22:15:47 +0000"  >&lt;p&gt;Ping. Anyone care about this?&lt;/p&gt;</comment>
                            <comment id="14715987" author="virtuald" created="Thu, 27 Aug 2015 02:58:49 +0000"  >&lt;p&gt;I&apos;ve seen chatter about a 1.8 release... seems like this would be good to fix.&lt;/p&gt;</comment>
                            <comment id="15058046" author="martinkl" created="Tue, 15 Dec 2015 13:27:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=virtuald&quot; class=&quot;user-hover&quot; rel=&quot;virtuald&quot;&gt;Dustin Spicuzza&lt;/a&gt;: Thanks for the patch, and sorry that this has been ignored for so long. It looks important, but I&apos;m only just starting to work my way into the resolver code, so I&apos;m not the best person to review it. Perhaps &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcreager&quot; class=&quot;user-hover&quot; rel=&quot;dcreager&quot;&gt;Douglas Creager&lt;/a&gt; could comment?&lt;/p&gt;

&lt;p&gt;It would be helpful if you could update the patch to make the whitespace consistent with surrounding code (you&apos;re using spaces, the rest of the code uses tabs), and provide a test case that can be run automatically on build. That hopefully wouldn&apos;t be hard to construct from your example avsc. Thanks!&lt;/p&gt;</comment>
                            <comment id="15072896" author="dcreager" created="Mon, 28 Dec 2015 16:43:27 +0000"  >&lt;p&gt;This looks like the right fix &#8212; if we reallocate the underlying array to hold new elements, we need to initialize them before trying to use them.&lt;/p&gt;</comment>
                            <comment id="15073070" author="virtuald" created="Mon, 28 Dec 2015 19:38:36 +0000"  >&lt;p&gt;I&apos;ve got too much stuff going on at the moment, I might be able to get to reformatting the patch and adding a test case in April or May. No promises.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12660308" name="map_npe.patch" size="2351" author="virtuald" created="Thu, 7 Aug 2014 03:02:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Dec 2015 13:27:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410483</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ymfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410477</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1562] Add support for types extending Maps/Collections</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1562</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Consider the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ByteArrayOutputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.*;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.Schema;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.file.DataFileWriter;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.reflect.ReflectData;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.avro.reflect.ReflectDatumWriter;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AvroDerivingMaps
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; [] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        MapDerivedContainer orig = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapDerivedContainer();
        ReflectData rdata = ReflectData.AllowNull.get();
        Schema schema = rdata.getSchema(MapDerivedContainer.class);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(schema);
        
        ReflectDatumWriter&amp;lt;MapDerivedContainer&amp;gt; datumWriter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReflectDatumWriter (MapDerivedContainer.class, rdata);
        DataFileWriter&amp;lt;MapDerivedContainer&amp;gt; fileWriter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataFileWriter&amp;lt;MapDerivedContainer&amp;gt; (datumWriter);
        ByteArrayOutputStream baos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
        fileWriter.create(schema, baos);
        fileWriter.append(orig);
        fileWriter.close();
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MapDerived &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;
{
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; a = 1;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; b = &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;;
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MapDerivedContainer
{
    MapDerived2 map = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MapDerived2();
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MapDerived2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MapDerived
{
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; c = &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
It throws the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;MapDerivedContainer&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;avro&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;map&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;MapDerived2&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;],&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;],&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;],&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}]}],&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;font color=&quot;brown&quot;&gt;&lt;br/&gt;
Exception in thread &quot;main&quot; org.apache.avro.file.DataFileWriter$AppendWriteException:&lt;br/&gt;
org.apache.avro.UnresolvedUnionException: &lt;br/&gt;
Caused by: org.apache.avro.UnresolvedUnionException: Not in union [&quot;null&quot;,{&quot;type&quot;:&quot;record&quot;,&quot;name&quot;:&quot;MapDerived2&quot;,&quot;namespace&quot;:&quot;avro&quot;,&quot;fields&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;{&quot;name&quot;:&quot;c&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;string&quot;],&quot;default&quot;:null},{&quot;name&quot;:&quot;a&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;int&quot;],&quot;default&quot;:null},{&quot;name&quot;:&quot;b&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;string&quot;],&quot;default&quot;:null}&amp;#93;&lt;/span&gt;}]: {}&lt;br/&gt;
	at org.apache.avro.generic.GenericData.resolveUnion(GenericData.java:600)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumWriter.resolveUnion(GenericDatumWriter.java:151)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:71)&lt;br/&gt;
	at org.apache.avro.reflect.ReflectDatumWriter.write(ReflectDatumWriter.java:145)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumWriter.writeField(GenericDatumWriter.java:114)&lt;br/&gt;
	at org.apache.avro.reflect.ReflectDatumWriter.writeField(ReflectDatumWriter.java:203)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumWriter.writeRecord(GenericDatumWriter.java:104)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:66)&lt;br/&gt;
	at org.apache.avro.reflect.ReflectDatumWriter.write(ReflectDatumWriter.java:145)&lt;br/&gt;
	at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:58)&lt;br/&gt;
	at org.apache.avro.file.DataFileWriter.append(DataFileWriter.java:290)&lt;br/&gt;
	... 1 more&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
It appears that ReflectData#createSchema() checks for &quot;type instanceof ParameterizedType&quot; and because of this, it skips handling of the map.&lt;br/&gt;
The same is not true of GenericData#isMap() and GenericData#resolveUnion() fails because of this.&lt;/p&gt;

&lt;p&gt;The same may be true for classes extending ArrayList, Collection, Set etc.&lt;br/&gt;
Also, note the schema for the class extending Map:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;{  
   &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
   &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;MapDerived2&quot;&lt;/span&gt;,
   &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[  
      {  
         &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,
         &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[  
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;
         ],
         &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
      },
      {  
         &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;,
         &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[  
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;
         ],
         &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
      },
      {  
         &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;,
         &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[  
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;
         ],
         &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
      }
   ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This schema ignores the Map completely.&lt;br/&gt;
Probably, for such a class, the schema should look like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;{
   &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
   &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;MapDerived2&quot;&lt;/span&gt;,
   &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[  
      {  
         &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,
         &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[  
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;
         ],
         &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
      },
      .... &lt;span class=&quot;code-comment&quot;&gt;// Other fields &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; the class extending the Map
&lt;/span&gt;     {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;BASE_MAP&quot;&lt;/span&gt;,
         &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[
            &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;map&quot;&lt;/span&gt; ... &lt;span class=&quot;code-comment&quot;&gt;// Normal map which the class &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt;?)
&lt;/span&gt;         ],
         &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
     }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12732459">AVRO-1562</key>
            <summary>Add support for types extending Maps/Collections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sachingoyal">Sachin Goyal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Aug 2014 04:10:41 +0000</created>
                <updated>Sun, 30 Dec 2018 05:32:28 +0000</updated>
                                            <version>1.7.6</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14098980" author="sachingoyal" created="Fri, 15 Aug 2014 19:33:17 +0000"  >&lt;p&gt;I have a patch ready for this.&lt;br/&gt;
Will be submitting that shortly.&lt;/p&gt;</comment>
                            <comment id="14106317" author="sachingoyal" created="Fri, 22 Aug 2014 01:37:42 +0000"  >&lt;p&gt;Here is the first patch for this issue.&lt;br/&gt;
Comments welcome!&lt;/p&gt;

&lt;p&gt;Diff created using &apos;svn diff&apos; from the trunk&lt;/p&gt;</comment>
                            <comment id="14115825" author="cutting" created="Fri, 29 Aug 2014 21:05:16 +0000"  >&lt;p&gt;I am not convinced it&apos;s worthwhile to get Avro reflect to correctly model every Java datastructure.  Avro schemas do not support inheritance.  This permits simple interoperability with programming languages without inheritance, like C.  And languages that do support inheritance do so in different ways such that it would be difficult to map a single inheritance-based schema language to every feature of all of them.  Avro data structures are meant to be a common subset, not the superset of all features.&lt;/p&gt;

&lt;p&gt;Continued efforts to force inheritance into Avro&apos;s existing schema language results in odder and odder schemas, schemas that only make sense to Avro reflect and are not a good basis for data interoperability.&lt;/p&gt;

&lt;p&gt;What do others think?&lt;/p&gt;</comment>
                            <comment id="14115961" author="sachingoyal" created="Fri, 29 Aug 2014 22:27:52 +0000"  >&lt;p&gt;My 2c:&lt;br/&gt;
Our decision to include this feature should be based on complexity and performance-penalty.&lt;br/&gt;
If there is a clean solution to support even a complex feature, it should be considered.&lt;/p&gt;

&lt;p&gt;Note that the current patch does not claim to be clean or performant and there may be scope to improve it further.&lt;br/&gt;
But it would be good to understand if its really too complex to support.&lt;br/&gt;
If its too complex or making it less performant, then we should not fix.&lt;/p&gt;

&lt;p&gt;IMHO, lots of Java designs would become usable with Avro, Hadoop and Hive with this fix.&lt;br/&gt;
That would be a good incentive to analyze the complexity.&lt;/p&gt;</comment>
                            <comment id="14125063" author="martinkl" created="Sun, 7 Sep 2014 21:19:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;I am not convinced it&apos;s worthwhile to get Avro reflect to correctly model every Java datastructure.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1. There is significant cost to every spec-level feature in Avro, because it needs to be implemented in every supported language. We already have some language implementations that don&apos;t support all features in the spec, but I&apos;d say we should be trying to keep the number of such incompatibilities as small as possible.&lt;/p&gt;</comment>
                            <comment id="14125830" author="sachingoyal" created="Mon, 8 Sep 2014 18:03:13 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martinkl&quot; class=&quot;user-hover&quot; rel=&quot;martinkl&quot;&gt;Martin Kleppmann&lt;/a&gt; for weighing in on this.&lt;/p&gt;

&lt;p&gt;Please help me understand if you had something else in mind about multi-language compatibility:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It needs to be implemented in every supported language.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The output of the proposed solution is readable in any language.&lt;br/&gt;
For classes extending maps/collections, an implicit map/collection type field is added to the schema.&lt;br/&gt;
Same is used when writing such fields.&lt;br/&gt;
This makes it readable with any language.&lt;/p&gt;</comment>
                            <comment id="14357628" author="githubbot" created="Wed, 11 Mar 2015 21:16:41 +0000"  >&lt;p&gt;GitHub user sachingsachin opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/25&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/25&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1562&quot; title=&quot;Add support for types extending Maps/Collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1562&quot;&gt;AVRO-1562&lt;/a&gt;: Support classes extending Maps/Collections in Avro&lt;/p&gt;

&lt;p&gt;    For classes extending collections and maps, &quot;&lt;em&gt;avro_implicit_collection&lt;/em&gt;&quot; and &quot;&lt;em&gt;avro_implicit_map&lt;/em&gt;&quot; fields are added in the Avro representation while the class itself continues to hold other fields normally like a record.&lt;br/&gt;
    The implicit field-names are currently hardcoded as above.&lt;br/&gt;
    We will need to have an API in ReflectData for making this configurable.&lt;/p&gt;

&lt;p&gt;    We may also need some name-mangling to have different names for classes extending different parameterized collections/maps.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sachingsachin/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sachingsachin/avro&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1562&quot; title=&quot;Add support for types extending Maps/Collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1562&quot;&gt;AVRO-1562&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/25.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/25.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #25&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f13568f3064f56064edddeb2d122e11888e23831&lt;br/&gt;
Author: Sachin Goyal &amp;lt;sgoyal@walmart.com&amp;gt;&lt;br/&gt;
Date:   2015-03-11T21:12:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1562&quot; title=&quot;Add support for types extending Maps/Collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1562&quot;&gt;AVRO-1562&lt;/a&gt;: Support classes extending Maps/Collections in Avro&lt;/p&gt;

&lt;p&gt;    For classes extending collections and maps, &quot;&lt;em&gt;avro_implicit_collection&lt;/em&gt;&quot; and &quot;&lt;em&gt;avro_implicit_map&lt;/em&gt;&quot; fields are added in the Avro representation while the class itself continues to hold other fields normally like a record.&lt;br/&gt;
    The implicit field-names are currently hardcoded as above.&lt;br/&gt;
    We will need to have an API in ReflectData for making this configurable.&lt;/p&gt;

&lt;p&gt;    We may also need some name-mangling to have different names for classes extending different parameterized collections/maps.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14357633" author="sachingoyal" created="Wed, 11 Mar 2015 21:17:47 +0000"  >&lt;p&gt;I have submitted a PR for this, just in case this is considered a desirable feature in the future.&lt;/p&gt;</comment>
                            <comment id="15133233" author="githubbot" created="Thu, 4 Feb 2016 22:53:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/25&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/25&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12663570" name="custom_map_and_collections1.patch" size="33545" author="sachingoyal" created="Fri, 22 Aug 2014 01:38:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Aug 2014 21:05:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ymgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1563] when server use Netty server , clients can&apos;t use Http protocal to connect</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1563</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;when server use Netty server , clients can&apos;t use Http protocal to connect&lt;br/&gt;
if server use Http server ,the performance is bad!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12732771">AVRO-1563</key>
            <summary>when server use Netty server , clients can&apos;t use Http protocal to connect</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mycat">wu zhi hui</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Aug 2014 06:55:40 +0000</created>
                <updated>Mon, 12 Nov 2018 16:20:10 +0000</updated>
                            <resolved>Mon, 12 Nov 2018 16:20:10 +0000</resolved>
                                    <version>1.7.7</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yodb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1564] Unknown datum type exception while converting optional bytes using avro-thrift</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1564</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Very similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1500&quot; title=&quot;Unknown datum type exception during union type resolution (no short to int conversion).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1500&quot;&gt;&lt;del&gt;AVRO-1500&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When in thrift schema (e.g. &lt;tt&gt;Test&lt;/tt&gt;) with optional byte field:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;16: optional &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; byteOptionalField
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This field is initialized like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test.setByteOptionalField((&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)4);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then during conversion of this thrift-object to avro instead of converting it to int 4, the exception is thrown.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.avro.AvroRuntimeException: Unknown datum type java.lang.&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;: 4                                                                                                                                                                     
        at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData.getSchemaName(GenericData.java:637)                                                                                                                                                             
        at org.apache.avro.thrift.ThriftData.getSchemaName(ThriftData.java:120)                                                                                                                                                                
        at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData.resolveUnion(GenericData.java:602)                                                                                                                                                              
        at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.resolveUnion(GenericDatumWriter.java:151)                                                                                                                                                
        at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.write(GenericDatumWriter.java:71)                                                                                                                                                        
        at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.writeField(GenericDatumWriter.java:114) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Proposed solution is also similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1500&quot; title=&quot;Unknown datum type exception during union type resolution (no short to int conversion).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1500&quot;&gt;&lt;del&gt;AVRO-1500&lt;/del&gt;&lt;/a&gt; - to overload &lt;tt&gt;getSchemaName&lt;/tt&gt; in &lt;tt&gt;org.apache.avro.thrift.ThriftData&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12732792">AVRO-1564</key>
            <summary>Unknown datum type exception while converting optional bytes using avro-thrift</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pershyn">Michael Pershyn</assignee>
                                    <reporter username="pershyn">Michael Pershyn</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Fri, 8 Aug 2014 09:22:20 +0000</created>
                <updated>Mon, 1 Feb 2016 14:55:55 +0000</updated>
                            <resolved>Wed, 26 Nov 2014 19:17:27 +0000</resolved>
                                    <version>1.7.7</version>
                                    <fixVersion>1.8.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14090561" author="pershyn" created="Fri, 8 Aug 2014 09:54:00 +0000"  >&lt;p&gt;Attached the unit test for the issue and the fix.&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="14226260" author="pershyn" created="Wed, 26 Nov 2014 14:38:04 +0000"  >&lt;p&gt;I am using patched version already 4 month and really happy with the fix, however would like to see it in upstream, so I can then easily update to new versions of avro and try them out without extra step of applying a patch.&lt;/p&gt;</comment>
                            <comment id="14226674" author="jira-bot" created="Wed, 26 Nov 2014 19:16:51 +0000"  >&lt;p&gt;Commit 1641892 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1641892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1641892&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1564&quot; title=&quot;Unknown datum type exception while converting optional bytes using avro-thrift&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1564&quot;&gt;&lt;del&gt;AVRO-1564&lt;/del&gt;&lt;/a&gt;. Java: Fix handling of optional byte field in Thrift.  Contributed by Michael Pershyn.&lt;/p&gt;</comment>
                            <comment id="14226675" author="cutting" created="Wed, 26 Nov 2014 19:17:27 +0000"  >&lt;p&gt;I committed this.  Thanks Michael!&lt;/p&gt;</comment>
                            <comment id="14226698" author="hudson" created="Wed, 26 Nov 2014 19:36:03 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #501 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/501/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/501/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1564&quot; title=&quot;Unknown datum type exception while converting optional bytes using avro-thrift&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1564&quot;&gt;&lt;del&gt;AVRO-1564&lt;/del&gt;&lt;/a&gt;. Java: Fix handling of optional byte field in Thrift.  Contributed by Michael Pershyn. (cutting: rev 1641892)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/main/java/org/apache/avro/thrift/ThriftData.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/test/java/org/apache/avro/thrift/TestThrift.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/test/java/org/apache/avro/thrift/test/Test.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/thrift/src/test/thrift/test.thrift&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12660599" name="AVRO-1564-fix.patch" size="914" author="pershyn" created="Fri, 8 Aug 2014 09:52:49 +0000"/>
                            <attachment id="12660595" name="AVRO-1564-test.patch" size="10783" author="pershyn" created="Fri, 8 Aug 2014 09:43:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Nov 2014 19:16:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410820</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yohz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1565] C API doesn&apos;t provide mechanism to get namespace of schema</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1565</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Seems like an easy enough thing to add. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12733355">AVRO-1565</key>
            <summary>C API doesn&apos;t provide mechanism to get namespace of schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="martinkl">Martin Kleppmann</assignee>
                                    <reporter username="virtuald">Dustin Spicuzza</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Aug 2014 22:08:50 +0000</created>
                <updated>Tue, 15 Dec 2015 11:30:09 +0000</updated>
                            <resolved>Tue, 15 Dec 2015 11:30:09 +0000</resolved>
                                                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15057896" author="martinkl" created="Tue, 15 Dec 2015 11:30:09 +0000"  >&lt;p&gt;Closing this as duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1663&quot; title=&quot;C Library does not handle enum&amp;#39;s namespace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1663&quot;&gt;&lt;del&gt;AVRO-1663&lt;/del&gt;&lt;/a&gt;, since the patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1663&quot; title=&quot;C Library does not handle enum&amp;#39;s namespace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1663&quot;&gt;&lt;del&gt;AVRO-1663&lt;/del&gt;&lt;/a&gt; addresses this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12823454">AVRO-1663</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12823454">AVRO-1663</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Dec 2015 11:30:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yrwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411374</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1566] Use field default value to fill in missing values when serializing records</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1566</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Field default values according to the spec are meant to fill in fields present in the reader schema but missing from the writer schema during deserialization. In addition to that default values could be used in the writer schema to fill in missing values when serializing. This is already supported in the Java implementation through record builders.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12733573">AVRO-1566</key>
            <summary>Use field default value to fill in missing values when serializing records</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hji">Jeno I. Hajdu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Aug 2014 19:26:54 +0000</created>
                <updated>Tue, 12 Aug 2014 22:59:41 +0000</updated>
                                                                            <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14094561" author="hji" created="Tue, 12 Aug 2014 19:30:25 +0000"  >&lt;p&gt;Attached proposed solution&lt;/p&gt;</comment>
                            <comment id="14094602" author="busbey" created="Tue, 12 Aug 2014 20:14:20 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+      else:
+        self.write_data(field.type, None, encoder)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Worth a note that this maintains the behavior of allowing optional null fields that don&apos;t specify a default? (even though this was probably incorrect behavior, &lt;a href=&quot;http://avro.apache.org/docs/1.7.7/gettingstartedpython.html#Serializing+and+deserializing+without+code+generation&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;our getting started guide mentions relying on this behavior&lt;/a&gt;.)&lt;/p&gt;

&lt;p&gt;Actually, looking at io.py did defaulting to None actually work or did it throw?&lt;/p&gt;</comment>
                            <comment id="14094811" author="hji" created="Tue, 12 Aug 2014 22:35:09 +0000"  >&lt;p&gt;Fixed proposal&lt;/p&gt;</comment>
                            <comment id="14094848" author="hji" created="Tue, 12 Aug 2014 22:59:41 +0000"  >&lt;p&gt;The patch I have attached first was not complete, I have attached a new one which also covers the validation code.&lt;/p&gt;

&lt;p&gt;I have check what you have mentioned, Sean. The original behaviour which is also advised in the guide worked perfectly, during writing the value is first validated and for null None is expected, so when the field type is union with null, null gets picked up. But when the field is not optional the value validation fails, resulting in an avro.io.AvroTypeException. Actually write_record itself is not reached in that case.&lt;/p&gt;

&lt;p&gt;I have extended validation to follow the extended logic of using defaults (if value is available validate it, if not and default available we are OK (assuming default value is validated on schema loading, which is not checked at the moment there&apos;s only a TODO comment in the code ... perhaps I should add validating defaults), otherwise validate None (which keeps the optional field behaviour)). The else branch of the write_record is not used in practice, I have only included it for sake of completeness.&lt;/p&gt;

&lt;p&gt;I have tried both the python 2 and 3 changes with default and optional fields.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12661321" name="AVRO-1566.patch" size="2267" author="hji" created="Tue, 12 Aug 2014 22:35:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Aug 2014 20:14:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411601</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yt7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
