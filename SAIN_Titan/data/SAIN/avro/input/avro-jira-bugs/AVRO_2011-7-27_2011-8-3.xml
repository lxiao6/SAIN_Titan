<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:15:55 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-7-27+AND+created+%3C%3D+2011-8-3+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="3" total="3"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-866] Python: add snappy compression</title>
                <link>https://issues.apache.org/jira/browse/AVRO-866</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Support for snappy compression was added to the Java implementation in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-788&quot; title=&quot;add Snappy compression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-788&quot;&gt;&lt;del&gt;AVRO-788&lt;/del&gt;&lt;/a&gt;. It would be great to add this to the python implementation &amp;#8211; there&apos;s already a library for python 2.5+: &lt;a href=&quot;http://pypi.python.org/pypi/python-snappy&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pypi.python.org/pypi/python-snappy&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515697">AVRO-866</key>
            <summary>Python: add snappy compression</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tomwhite">Tom White</assignee>
                                    <reporter username="joecrobak">Joe Crobak</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2011 19:46:50 +0000</created>
                <updated>Fri, 23 Dec 2011 23:54:10 +0000</updated>
                            <resolved>Wed, 7 Sep 2011 21:36:03 +0000</resolved>
                                                    <fixVersion>1.5.4</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13093924" author="tomwhite" created="Tue, 30 Aug 2011 17:30:18 +0000"  >&lt;p&gt;Here&apos;s a patch for snappy support. I ran a test to check that an Avro data file produced using Python with the Snappy codec could be read from Java, and vice versa.&lt;/p&gt;

&lt;p&gt;I&apos;ve also attached weather-snappy.avro as an example of a snappy-compressed Avro data file, which might be worth checking into share/test/data.&lt;/p&gt;
</comment>
                            <comment id="13098469" author="cutting" created="Tue, 6 Sep 2011 23:31:20 +0000"  >&lt;p&gt;Tom, this looks great!  I&apos;ll commit it tomorrow unless someone objects.&lt;/p&gt;</comment>
                            <comment id="13099576" author="cutting" created="Wed, 7 Sep 2011 21:36:03 +0000"  >&lt;p&gt;I committed this.  Thanks, Tom!&lt;/p&gt;</comment>
                            <comment id="13169907" author="russell.jurney" created="Thu, 15 Dec 2011 01:34:38 +0000"  >&lt;p&gt;Note: python-snappy doesn&apos;t build on OS X 10.6.8, so avro won&apos;t build/install either.&lt;/p&gt;</comment>
                            <comment id="13169910" author="russell.jurney" created="Thu, 15 Dec 2011 01:39:03 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-981&quot; title=&quot;Python Avro library does not build/install on OS X&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-981&quot;&gt;&lt;del&gt;AVRO-981&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12535239">AVRO-981</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12492271" name="AVRO-866.patch" size="5973" author="tomwhite" created="Tue, 30 Aug 2011 17:30:18 +0000"/>
                            <attachment id="12492272" name="weather-snappy.avro" size="330" author="tomwhite" created="Tue, 30 Aug 2011 17:30:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Aug 2011 17:30:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-867] Allow tools to read files via hadoop FileSystem class</title>
                <link>https://issues.apache.org/jira/browse/AVRO-867</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;It would be great if I could use the various tools to read/parse files that are in HDFS, S3, etc via the &lt;a href=&quot;http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/fs/FileSystem.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FileSystem&lt;/a&gt; api. We could retain backwards compatibility by assuming that unqualified urls are &quot;file://&quot; but allow reading of files from fully qualified urls such as hdfs://. The required apis are already part of the avro-tools uber jar to support the TetherTool.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515699">AVRO-867</key>
            <summary>Allow tools to read files via hadoop FileSystem class</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vince83">Vincenz Priesnitz</assignee>
                                    <reporter username="joecrobak">Joe Crobak</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2011 19:58:59 +0000</created>
                <updated>Tue, 20 Aug 2013 17:46:06 +0000</updated>
                            <resolved>Mon, 22 Apr 2013 20:00:17 +0000</resolved>
                                    <version>1.7.5</version>
                                    <fixVersion>1.7.5</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13072516" author="cutting" created="Thu, 28 Jul 2011 20:24:55 +0000"  >&lt;p&gt;I assume you&apos;re proposing to move something like Util#fileOrStdin and #fileOrStdin into another module?  That sounds reasonable.  These could probably go into the mapred module, since it already depends on HDFS.&lt;/p&gt;</comment>
                            <comment id="13072520" author="joecrobak" created="Thu, 28 Jul 2011 20:37:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;I assume you&apos;re proposing to move something like Util#fileOrStdin and #fileOrStdin into another module? That sounds reasonable. These could probably go into the mapred module, since it already depends on HDFS.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah, I hadn&apos;t realized that Util#fileOrStdin does exactly this. In that case, this is more about updating all the tools to use #fileOrStdin if that makes sense (e.g. DataFileReader and DataFileGetSchema don&apos;t use it).&lt;/p&gt;</comment>
                            <comment id="13072530" author="cutting" created="Thu, 28 Jul 2011 21:02:54 +0000"  >&lt;p&gt;If DataFileReader were to incorporate this, then the core Avro pom might depend on Hadoop.  Some have complained about this before, since Hadoop depends on Avro, creating a circular dependency.  (In practice this is not an issue as long as both provide some backwards compatibility.  Avro can build against an older, published version of Hadoop and vice-versa.)&lt;/p&gt;

&lt;p&gt;Perhaps this could be implemented using reflection, e.g., something like:&lt;/p&gt;

&lt;p&gt;Class.forName(&quot;org.apache.hadoop.fs.FileSystem&quot;).getMethod(&quot;open&quot;).invoke(...)&lt;/p&gt;

&lt;p&gt;That way it&apos;d work if Hadoop is on the classpath, but would not require a dependency on Hadoop.&lt;/p&gt;

&lt;p&gt;As a middle ground, Hadoop could be required for compilation but only used at runtime when an HDFS URI is passed in.&lt;/p&gt;

&lt;p&gt;Alternately, we might add a UriResolver interface and a base implementation that just works for local files.  Then Avro&apos;s mapred module could add an implementation that supports HDFS too.  The default factory might first look for an org.apache.avro.mapred.FileSystemResolver class, and, if that doesn&apos;t exist, use the base implementation.&lt;/p&gt;</comment>
                            <comment id="13072571" author="joecrobak" created="Thu, 28 Jul 2011 22:29:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;If DataFileReader were to incorporate this, then the core Avro pom might depend on Hadoop. Some have complained about this before, since Hadoop depends on Avro, creating a circular dependency. (In practice this is not an issue as long as both provide some backwards compatibility. Avro can build against an older, published version of Hadoop and vice-versa.)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry &amp;#8211; when I mentioned DataFileReader I really meant DataFileReaderTool (same goes for DataFileGetSchemaTool).  My thought was to modify DataFileReaderTool as follows...&lt;/p&gt;

&lt;p&gt;Rather than:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
FileReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; fileReader =
      DataFileReader.openReader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(args.get(0)), reader);
...
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum : fileReader) {
  ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;use the DataFileStream like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
DataFileStream&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; streamReader =
      &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataFileStream(Util.fileOrStdin(args.get(0)), reader);
...
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum : streamReader) {
 ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are a few other Tools that could be simplified with the usage of fileOrStdin, too. How does this sound?&lt;/p&gt;</comment>
                            <comment id="13073806" author="cutting" created="Mon, 1 Aug 2011 21:48:12 +0000"  >&lt;p&gt;That sounds great!  +1&lt;/p&gt;</comment>
                            <comment id="13632689" author="vince83" created="Tue, 16 Apr 2013 09:20:01 +0000"  >&lt;p&gt;Attached you find a patch that changes the Utils class to use the hadoop FileSystem class. It is now possible to use any supported filesystem for input or output files in more tools. &lt;/p&gt;

&lt;p&gt;Without any configurations, the tools behave as before:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# reads from local file system by default
# supports relative paths
java -jar avro-tools-1.7.5.jar tojson ~/myDir/myData.avro
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If invoked via hadoop jar, the tools support more filesystems. Different filesystems can be used in a single call. Furthermore, any default filesystem that might be specified in core-site.xml is respected.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# combines an ftp file and a local file and writes result file combinedData.avro directly on the default hdfs server.
hadoop jar avro-tools-1.7.5.jar concat ftp://myFtpServer/data1.avro file:///home/user/data2.avro combinedData.avro
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now it is possible to take a look at remote files quicker, e.g.:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hadoop jar avro-Tools getschema Data_on_hdfs.avro
hadoop jar avro-Tools tojson ftp://server-address/Data_on_ftp.avro 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following tools now use Utils for accessing files: concat, fragtojson, fromjson, fromtext, getmeta, getschema, jsontofrag, recodec, tojson, totext.&lt;/p&gt;</comment>
                            <comment id="13633544" author="cutting" created="Tue, 16 Apr 2013 23:17:20 +0000"  >&lt;p&gt;This looks like a good contribution!&lt;/p&gt;

&lt;p&gt;Here&apos;s a version of the patch with the following minor modifications:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;diff is from root, rather than lang/java/tools&lt;/li&gt;
	&lt;li&gt;removed some spurious whitespace changes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll commit this soon unless someone objects.&lt;/p&gt;</comment>
                            <comment id="13638379" author="cutting" created="Mon, 22 Apr 2013 20:00:17 +0000"  >&lt;p&gt;I committed this.  Thanks, Vincenz!&lt;/p&gt;</comment>
                            <comment id="13638734" author="hudson" created="Tue, 23 Apr 2013 02:47:19 +0000"  >&lt;p&gt;Integrated in AvroJava #363 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/363/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/363/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-867&quot; title=&quot;Allow tools to read files via hadoop FileSystem class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-867&quot;&gt;&lt;del&gt;AVRO-867&lt;/del&gt;&lt;/a&gt;. Java: Enable command-line tools to read data files from any Hadoop FileSystem implementation.  Contributed by Vincenz Priesnitz. (Revision 1470691)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
cutting : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/BinaryFragmentToJsonTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/DataFileGetMetaTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/DataFileGetSchemaTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/DataFileReadTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/DataFileWriteTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/JsonToBinaryFragmentTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/RecodecTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/ToTextTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/Util.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12579056" name="AVRO-867.patch" size="15323" author="cutting" created="Tue, 16 Apr 2013 23:17:20 +0000"/>
                            <attachment id="12578906" name="addedHadoopFileSupport.diff" size="18250" author="vince83" created="Tue, 16 Apr 2013 09:22:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Jul 2011 20:24:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2yf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>avro-tools can now access Hadoop supported filesystem when started via hadoop jar.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-868] NoClassDefFoundError when running avro-maven-plugin:protocol goal</title>
                <link>https://issues.apache.org/jira/browse/AVRO-868</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I have a project that generates Java classes from a avpr using the avro-maven-plugin&apos;s protocol goal.  When I switch from Avro 1.5.1 (everything works perfectly) to 1.5.2-rc1 (also happened with rc0), I get the following error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.maven.plugin.PluginContainerException: A
required class was missing while executing
org.apache.avro:avro-maven-plugin:1.5.2:protocol:
org/apache/maven/shared/model/fileset/util/FileSetManager
-----------------------------------------------------
realm =    plugin&amp;gt;org.apache.avro:avro-maven-plugin:1.5.2
strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
urls[0] = file:/Users/alex/.m2/repository/org/apache/avro/avro-maven-plugin/1.5.2/avro-maven-plugin-1.5.2.jar
urls[1] = file:/Users/alex/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
Number of foreign imports: 1
import: Entry[import  from realm ClassRealm[maven.api, parent: null]]

-----------------------------------------------------

        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:125)
        ... 20 more
Caused by: java.lang.NoClassDefFoundError:
org/apache/maven/shared/model/fileset/util/FileSetManager
        at org.apache.avro.mojo.AbstractAvroMojo.getIncludedFiles(AbstractAvroMojo.java:113)
        at org.apache.avro.mojo.AbstractAvroMojo.execute(AbstractAvroMojo.java:97)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        ... 20 more
Caused by: java.lang.ClassNotFoundException:
org.apache.maven.shared.model.fileset.util.FileSetManager
        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
        ... 23 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It appears to me that there is a missing dependency on the&lt;br/&gt;
FileSetManager class (which is in the&lt;br/&gt;
org.apache.maven.shared:file-management artifact).&lt;/p&gt;

&lt;p&gt;My plugin execution is pretty straightforward, just generating sources&lt;br/&gt;
from the avpr:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      &amp;lt;plugin&amp;gt;
        &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;avro-maven-plugin&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;${avro-version}&amp;lt;/version&amp;gt;
        &amp;lt;executions&amp;gt;
          &amp;lt;execution&amp;gt;
            &amp;lt;phase&amp;gt;generate-sources&amp;lt;/phase&amp;gt;
            &amp;lt;goals&amp;gt;
              &amp;lt;goal&amp;gt;protocol&amp;lt;/goal&amp;gt;
            &amp;lt;/goals&amp;gt;
          &amp;lt;/execution&amp;gt;
        &amp;lt;/executions&amp;gt;
      &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can find the project in question in the sherpa-protocol sub-module at &lt;a href=&quot;https://github.com/revelytix/spark&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/revelytix/spark&lt;/a&gt;.  To reproduce:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;git clone git://github.com/revelytix/spark.git&lt;/li&gt;
	&lt;li&gt;cd spark/sherpa-protocol&lt;/li&gt;
	&lt;li&gt;In pom.xml, change:
	&lt;ul&gt;
		&lt;li&gt;&amp;lt;avro-version&amp;gt;1.5.1&amp;lt;/avro-version&amp;gt; to 1.5.2&lt;/li&gt;
		&lt;li&gt;Add repositories section:
 &lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      &amp;lt;repositories&amp;gt;
        &amp;lt;repository&amp;gt;
          &amp;lt;releases&amp;gt;
            &amp;lt;enabled&amp;gt;true&amp;lt;/enabled&amp;gt;
          &amp;lt;/releases&amp;gt;
          &amp;lt;snapshots&amp;gt;
            &amp;lt;enabled&amp;gt;false&amp;lt;/enabled&amp;gt;
          &amp;lt;/snapshots&amp;gt;
          &amp;lt;id&amp;gt;avro-rc&amp;lt;/id&amp;gt;
          &amp;lt;name&amp;gt;Avro RC&amp;lt;/name&amp;gt;
          &amp;lt;url&amp;gt;https://repository.apache.org/content/repositories/orgapacheavro-010&amp;lt;/url&amp;gt;
        &amp;lt;/repository&amp;gt;
      &amp;lt;/repositories&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;mvn -X -e compile&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>&lt;p&gt;Apache Maven 3.0.3, Java 1.6.0_26, Avro 1.5.2-rc1  (experienced on multiple OSes so don&apos;t think that&apos;s important)&lt;/p&gt;</environment>
        <key id="12515930">AVRO-868</key>
            <summary>NoClassDefFoundError when running avro-maven-plugin:protocol goal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="puredanger">Alex Miller</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Aug 2011 15:50:31 +0000</created>
                <updated>Fri, 7 Oct 2011 20:23:19 +0000</updated>
                            <resolved>Tue, 16 Aug 2011 13:07:17 +0000</resolved>
                                    <version>1.5.2</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13085233" author="cutting" created="Mon, 15 Aug 2011 18:10:19 +0000"  >&lt;p&gt;Setting a fix-version so we don&apos;t lose track of this.&lt;/p&gt;

&lt;p&gt;Is anyone else seeing this?  Does anyone have an idea of what&apos;s happening or how to fix it?&lt;/p&gt;</comment>
                            <comment id="13085241" author="h2o" created="Mon, 15 Aug 2011 18:22:29 +0000"  >&lt;p&gt;I upgraded to 1.5.2 today and have been successfully using the protocol goal without any problem. Same maven version (3.0.3), JDK 1.6.25 etc. No idea why Alex is seeing this.&lt;/p&gt;</comment>
                            <comment id="13085560" author="puredanger" created="Tue, 16 Aug 2011 06:20:32 +0000"  >&lt;p&gt;I&apos;ve added a simpler standalone test case that reproduces the same issue here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/puredanger/avro-868&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/puredanger/avro-868&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To reproduce: &lt;br/&gt;
1. git clone git://github.com/puredanger/avro-868.git&lt;br/&gt;
2. cd avro-868&lt;br/&gt;
3. mvn compile&lt;/p&gt;

&lt;p&gt;Switching the version in the pom back to 1.5.1 results in a clean compile.  The error is the same reported originally.&lt;/p&gt;</comment>
                            <comment id="13085581" author="h2o" created="Tue, 16 Aug 2011 07:47:54 +0000"  >&lt;p&gt;I&apos;ve cloned &amp;amp; ran mvn compile, but got a bunch of warnings that said &quot;org.apache.avro.ipc&quot; does not exist. I added avro-ipc as dependency, ran mvn clean compile and everything worked (on Windows even). Repeated on clean Linux system, worked fine too. Looks like you have gremlins &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13085609" author="scott_carey" created="Tue, 16 Aug 2011 09:37:03 +0000"  >&lt;p&gt;@Alex &lt;br/&gt;
Have you tried the &quot;-U&quot; maven parameter for both builds? Something broken might be in your ~/.m2/repository&lt;/p&gt;

&lt;p&gt;I get the same results as Holger.  With both 1.5.1 and 1.5.2 the project fails due to missing avro-ipc.&lt;/p&gt;

&lt;p&gt;&apos;mvn compile&apos; fails due to missing avro-ipc dependency.&lt;br/&gt;
&apos;mvn generate-sources&apos; works fine&lt;/p&gt;

&lt;p&gt;I modified the pom to include avro-ipc as a dependency, and then it compiles.&lt;/p&gt;


&lt;p&gt;(tested on a Mac)&lt;/p&gt;


&lt;p&gt;I also simplified the pom and it still works:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;removed the repositories section, since Avro 1.5.2 is out and on maven central.&lt;/li&gt;
	&lt;li&gt;removed the resources section in &amp;lt;build&amp;gt;, since it isn&apos;t required by the plugin to locate the sources.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With avro 1.5.2, &apos;mvn avro:help&apos; should also work for you, as well as &apos;mvn avro:help -Ddetail=true&apos;&lt;/p&gt;


&lt;p&gt;Based on the error above, and the failure for us to reproduce, I think there is something corrupt in your local repository.  &lt;/p&gt;</comment>
                            <comment id="13085680" author="puredanger" created="Tue, 16 Aug 2011 13:06:46 +0000"  >&lt;p&gt;Thanks everyone!  I wiped my local repo and indeed things are looking better now.  I must have had some bad stuff in there.  Resolving...&lt;/p&gt;</comment>
                            <comment id="13085681" author="puredanger" created="Tue, 16 Aug 2011 13:07:17 +0000"  >&lt;p&gt;Re-tested with clean repo and could not reproduce.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Aug 2011 18:10:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50515</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e2yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80242</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
