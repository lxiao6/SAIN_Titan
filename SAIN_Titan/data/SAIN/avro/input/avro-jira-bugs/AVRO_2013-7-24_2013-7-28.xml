<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:19:00 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2013-7-24+AND+created+%3C%3D+2013-7-28+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="1" total="1"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1358] internal version of jansson exports the jansson symbols which collide with json-c and jansson libraries</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1358</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The 1.7.x version of AVRO includes an &quot;internal&quot; copy of jansson library, but it also exports all of the jansson symbols which will collide with other libraries. The symbol &apos;json_object_get&apos; will collide with the json-c library and all of the &apos;json_*&apos; symbols collide with the external jansson library.&lt;/p&gt;

&lt;p&gt;If you don&apos;t want to have an external dependency on &apos;jansson&apos; then it seems that the symbols will need to have a hidden visibility or some other mechanism to keep them from being exported with the AVRO library.&lt;/p&gt;

&lt;p&gt;As a temporary solution we have wrapped the internal jansson functions with this so they are hidden:&lt;/p&gt;

&lt;p&gt;#pragma GCC visibility push(hidden)&lt;br/&gt;
json_function()&lt;br/&gt;
#pragma GCC visibility pop&lt;/p&gt;

&lt;p&gt;Many other solutions exist. I don&apos;t see that having an external dependency is such a drawback, as many other open source packages have dependencies on other open source packages, but any solution would be appreciated.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;
</description>
                <environment>&lt;p&gt;linux&lt;/p&gt;</environment>
        <key id="12659678">AVRO-1358</key>
            <summary>internal version of jansson exports the jansson symbols which collide with json-c and jansson libraries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yahoo_build">External Builds</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jul 2013 22:22:43 +0000</created>
                <updated>Thu, 23 Jan 2014 21:58:57 +0000</updated>
                            <resolved>Wed, 18 Dec 2013 13:26:45 +0000</resolved>
                                    <version>1.7.4</version>
                                    <fixVersion>1.7.6</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13720782" author="dcreager" created="Fri, 26 Jul 2013 13:28:14 +0000"  >&lt;p&gt;Good catch &#8212; I actually already have a patch lying around to fix this, which I had forgotten to merge into SVN.  It uses the same GCC pragma that you suggest.&lt;/p&gt;</comment>
                            <comment id="13799304" author="havetisyan" created="Fri, 18 Oct 2013 17:09:31 +0000"  >&lt;p&gt;I&apos;d like to request the same support for hashtable_* functions as well. Other libraries that we use (e.g. zookeeper) also export the hashtable_* functions so during runtime we end up with wrong functions being called resulting in core dumps. Would it be recommended to open up a separate ticket?&lt;/p&gt;</comment>
                            <comment id="13851713" author="jira-bot" created="Wed, 18 Dec 2013 13:25:35 +0000"  >&lt;p&gt;Commit 1551936 from dcreager@apache.org in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1551936&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1551936&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1358&quot; title=&quot;internal version of jansson exports the jansson symbols which collide with json-c and jansson libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1358&quot;&gt;&lt;del&gt;AVRO-1358&lt;/del&gt;&lt;/a&gt;. C: Hide symbols that aren&apos;t part of the public API.&lt;/p&gt;

&lt;p&gt;Right now we&apos;re doing this via GCC visibility pragmas.  The only symbols that&lt;br/&gt;
should be exported by libavro.so begin with `avro_` or `AVRO_`.&lt;/p&gt;</comment>
                            <comment id="13851715" author="dcreager" created="Wed, 18 Dec 2013 13:26:45 +0000"  >&lt;p&gt;Merged this into SVN.  I hid the &lt;tt&gt;hashtable&lt;/tt&gt; functions, as requested, as well as a handful of other internal Jansson functions.  Basically, I id anything that doesn&apos;t start with &lt;tt&gt;avro_&lt;/tt&gt; or &lt;tt&gt;AVRO_&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13851947" author="hudson" created="Wed, 18 Dec 2013 17:38:13 +0000"  >&lt;p&gt;ABORTED: Integrated in AvroJava #411 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/411/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/411/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1358&quot; title=&quot;internal version of jansson exports the jansson symbols which collide with json-c and jansson libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1358&quot;&gt;&lt;del&gt;AVRO-1358&lt;/del&gt;&lt;/a&gt;. C: Hide symbols that aren&apos;t part of the public API.&lt;/p&gt;

&lt;p&gt;Right now we&apos;re doing this via GCC visibility pragmas.  The only symbols that&lt;br/&gt;
should be exported by libavro.so begin with `avro_` or `AVRO_`. (dcreager: rev 1551936)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/jansson/src/hashtable.h&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/jansson/src/jansson.h&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/jansson/src/jansson_private.h&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/jansson/src/strbuffer.h&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/jansson/src/utf.h&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/dump.h&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/st.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12594395" name="0001-Hide-Jansson-symbols-in-Avro-library.patch" size="1835" author="dcreager" created="Fri, 26 Jul 2013 13:28:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Jul 2013 13:28:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mmav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
