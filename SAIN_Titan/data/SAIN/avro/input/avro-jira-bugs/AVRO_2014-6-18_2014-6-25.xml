<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:20:28 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2014-6-18+AND+created+%3C%3D+2014-6-25+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="4" total="4"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1529] ConcatTool issue with empty files</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1529</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I am using the ConcatTool to merge 2 avro files. The first one is empty, the second one has records. The merged file is seen as empty when I am opening it.&lt;/p&gt;

&lt;p&gt;My investigations showed the cause is that DataFileWriter.appendAllFrom(...) copies blocks from source to target even if they are empty, and DataFileReader.hasNext() returns false if the first block of an avro file is empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722796">AVRO-1529</key>
            <summary>ConcatTool issue with empty files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manuel.godbert">Manuel Godbert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 15:16:39 +0000</created>
                <updated>Fri, 28 Aug 2015 08:40:22 +0000</updated>
                                            <version>1.7.6</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14716122" author="sakhtar" created="Thu, 27 Aug 2015 05:48:21 +0000"  >&lt;p&gt;Manuel, Did you find a solution?&lt;/p&gt;</comment>
                            <comment id="14716250" author="manuel.godbert" created="Thu, 27 Aug 2015 08:06:57 +0000"  >&lt;p&gt;Not really, we just managed to avoid creating empty avro files&lt;/p&gt;</comment>
                            <comment id="14717207" author="sakhtar" created="Thu, 27 Aug 2015 18:13:23 +0000"  >&lt;p&gt;ok. if you dont mind, how are you merging these files with concat tool? I am seeing some block size issues. Thanks in advance.&lt;/p&gt;</comment>
                            <comment id="14718189" author="manuel.godbert" created="Fri, 28 Aug 2015 08:12:31 +0000"  >&lt;p&gt;Actually I wrote my own ConcatTool because we needed some intelligence in which files to concat and which were big enough to let them alone. I reported the JIRA on the ConcatTool for easier communication with Apache, after checking the problem was not just mine. I did not keep the commands used for this test, but I remember I just followed the provided documentation. Sorry &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14718223" author="manuel.godbert" created="Fri, 28 Aug 2015 08:40:22 +0000"  >&lt;p&gt;An I forgot to tell, as we just compacted small files for performance issues we never tried to get one bigger than a block size!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Aug 2015 05:48:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x0uf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401068</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1530] Java DataFileStream does not allow distinguishing between empty files and corrupt files</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1530</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When writing data to HDFS, especially with Flume, it&apos;s possible to write empty files. When you run Hive queries over this data, the job fails with &quot;Not a data file.&quot; from here &lt;a href=&quot;https://github.com/apache/avro/blob/trunk/lang/java/avro/src/main/java/org/apache/avro/file/DataFileStream.java#L102&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/trunk/lang/java/avro/src/main/java/org/apache/avro/file/DataFileStream.java#L102&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723199">AVRO-1530</key>
            <summary>Java DataFileStream does not allow distinguishing between empty files and corrupt files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="brocknoland">Brock Noland</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jun 2014 19:54:27 +0000</created>
                <updated>Fri, 2 Oct 2015 20:07:06 +0000</updated>
                            <resolved>Mon, 30 Jun 2014 20:31:28 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14041209" author="brocknoland" created="Mon, 23 Jun 2014 19:56:01 +0000"  >&lt;p&gt;I&apos;d propose that when reading the header EOF and IO Exception should be treated differently. For example the EOF exception should be propagated so that upstream users, e.g. Hive, can detect the difference between the two errors.&lt;/p&gt;</comment>
                            <comment id="14044193" author="cutting" created="Wed, 25 Jun 2014 23:52:01 +0000"  >&lt;p&gt;That would be an incompatible change.  Some folks might rely on the current behaviour.&lt;/p&gt;

&lt;p&gt;One can detect an empty file by looking at its length.  No valid avro data file will ever be empty.&lt;/p&gt;</comment>
                            <comment id="14046933" author="brocknoland" created="Sat, 28 Jun 2014 17:31:44 +0000"  >&lt;p&gt;I was thinking that we&apos;d throw a subclass of IOException so that&apos;d be backwards compatible. Though, I do agree that clients could ignore zero length files.&lt;/p&gt;</comment>
                            <comment id="14048113" author="brocknoland" created="Mon, 30 Jun 2014 20:31:28 +0000"  >&lt;p&gt;Let&apos;s take this forward in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7316&quot; title=&quot;Hive fails on zero length files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7316&quot;&gt;&lt;del&gt;HIVE-7316&lt;/del&gt;&lt;/a&gt;. We&apos;ll re-open this if needed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12724541">HIVE-7316</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12901102">HIVE-11977</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jun 2014 23:52:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401386</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x39b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1531] Assignment missing in AvroDatumConverterFactory</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1531</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The following defect found in method: public &amp;lt;IN, OUT&amp;gt; AvroDatumConverter&amp;lt;IN, OUT&amp;gt; create(Class&amp;lt;IN&amp;gt; inputClass):&lt;/p&gt;

&lt;p&gt;    if (AvroValue.class.isAssignableFrom(inputClass)) {&lt;br/&gt;
      Schema schema = null;&lt;br/&gt;
      if (isMapOnly) {&lt;br/&gt;
        AvroJob.getMapOutputValueSchema(getConf());&amp;lt;--&lt;del&gt;!!!Missing assignment to schema variable&lt;/del&gt;--&amp;gt;&lt;br/&gt;
        if (null == schema) &lt;/p&gt;
{
          schema = AvroJob.getOutputValueSchema(getConf());
        }
&lt;p&gt;      }&lt;br/&gt;
      else &lt;/p&gt;
{
        schema = AvroJob.getOutputValueSchema(getConf());
      }
&lt;p&gt;      if (null == schema) &lt;/p&gt;
{
        throw new IllegalStateException(
            &quot;Writer schema for output value was not set. Use AvroJob.setOutputValueSchema().&quot;);
      }
&lt;p&gt;      return (AvroDatumConverter&amp;lt;IN, OUT&amp;gt;) new AvroWrapperConverter(schema);&lt;br/&gt;
    }&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723208">AVRO-1531</key>
            <summary>Assignment missing in AvroDatumConverterFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="youarehow">Jian Jiang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jun 2014 20:19:56 +0000</created>
                <updated>Tue, 18 Nov 2014 10:06:35 +0000</updated>
                            <resolved>Tue, 18 Nov 2014 10:06:35 +0000</resolved>
                                    <version>1.7.5</version>
                    <version>1.7.6</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14063015" author="youarehow" created="Wed, 16 Jul 2014 02:28:28 +0000"  >&lt;p&gt;As indicated above the statement after  if (isMapOnly) should be changed from :&lt;/p&gt;

&lt;p&gt;AvroJob.getMapOutputValueSchema(getConf());&lt;/p&gt;

&lt;p&gt;to:&lt;/p&gt;

&lt;p&gt;schema = AvroJob.getMapOutputValueSchema(getConf());&lt;/p&gt;</comment>
                            <comment id="14216022" author="tomwhite" created="Tue, 18 Nov 2014 10:06:35 +0000"  >&lt;p&gt;This was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1553&quot; title=&quot;MapReduce never uses MapOutputValueSchema &quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1553&quot;&gt;&lt;del&gt;AVRO-1553&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Nov 2014 10:06:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401395</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x3bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1532] Field deletion not possible for ReflectData: NPE</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1532</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;&lt;b&gt;Actual behaviour:&lt;/b&gt;&lt;br/&gt;
I have a field in my reflection-based schema like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Nullable @AvroDefault(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; someField;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When removing this field, parsing the previous serialized blob yields NullPointerException:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at org.apache.avro.reflect.ReflectData.setField(ReflectData.java:128)
	at org.apache.avro.generic.GenericDatumReader.readField(GenericDatumReader.java:193)
	at org.apache.avro.reflect.ReflectDatumReader.readField(ReflectDatumReader.java:230)
	at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:183)
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:151)
	at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:142)
	at org.apache.avro.file.DataFileStream.next(DataFileStream.java:233)
	at org.apache.avro.file.DataFileStream.next(DataFileStream.java:220)
	at ReflectDataFieldRemovalTest.testFieldRemoval(ReflectDataFieldRemovalTest.java:41)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Expected behaviour:&lt;/b&gt;&lt;br/&gt;
Field removal is crucial for schema evolution and must be possible with ReflectData.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723294">AVRO-1532</key>
            <summary>Field deletion not possible for ReflectData: NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oreissig">O. Rei&#223;ig</reporter>
                        <labels>
                            <label>java</label>
                            <label>reflection</label>
                    </labels>
                <created>Tue, 24 Jun 2014 06:58:20 +0000</created>
                <updated>Mon, 14 Jul 2014 11:55:24 +0000</updated>
                                            <version>1.7.6</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14042325" author="cutting" created="Tue, 24 Jun 2014 16:32:35 +0000"  >&lt;p&gt;Here&apos;s a patch that adds a test where ReflectData successfully handles field deletion.  Can you please provide a test where it fails?  Thanks! &lt;/p&gt;</comment>
                            <comment id="14042327" author="cutting" created="Tue, 24 Jun 2014 16:33:43 +0000"  >&lt;p&gt;Oops.  Just saw that you have provided a test.  Let me look at that more...&lt;/p&gt;</comment>
                            <comment id="14042347" author="cutting" created="Tue, 24 Jun 2014 16:52:27 +0000"  >&lt;p&gt;Here&apos;s a version of your test that passes.&lt;/p&gt;

&lt;p&gt;I changed it so that it uses an alias to permit both versions of the reflected schema to exist at once, so that the binary output doesn&apos;t need to be stored in a constant.  That just makes the test simpler to maintain, and shouldn&apos;t affect what it tests.&lt;/p&gt;

&lt;p&gt;The only substantial change I made was to specify the new schema when constructing the DatumReader.  Without that, the runtime had no way of knowing what the new schema was and was trying to set the field named &apos;victim&apos; on a class that didn&apos;t contain that field.  Perhaps the API should force you to set this, e.g., not permitting a call to createDatumReader with a null schema.&lt;/p&gt;</comment>
                            <comment id="14043253" author="oreissig" created="Wed, 25 Jun 2014 09:43:55 +0000"  >&lt;p&gt;Thanks for your suggestion with AvroAlias, that&apos;s a lot better than my first try &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Explicitly stating the schema does indeed resolve the issue with removed fields, but now I run into problems with union types. In my schema I have a Map containing an abstract type, that has several possible implementations via @Union. I&apos;d like the rest of the serialized data to still be readable when removing one of the Union subtypes.&lt;/p&gt;

&lt;p&gt;I attached a test case to illustrate my example. In the real world, accessing the removed type would yield ClassCastException, but of course I cannot actually remove a class in this test case. As the stuff is stored in a Map, I should still be able to access the rest of the map entries.&lt;/p&gt;

&lt;p&gt;Did I make my use case clear? Is this realistic?&lt;br/&gt;
Why actually store the schema inside the serialized file, if it is overridden anyway? I thought it&apos;s better to parse the serialized data with its according schema.&lt;/p&gt;</comment>
                            <comment id="14060574" author="oreissig" created="Mon, 14 Jul 2014 11:55:24 +0000"  >&lt;p&gt;Wouldn&apos;t something like this suffice? It allows for fields to be removed from the schema.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12652222" name="AVRO-1532.patch" size="1350" author="cutting" created="Tue, 24 Jun 2014 16:32:35 +0000"/>
                            <attachment id="12655527" name="ReflectData.java.patch" size="552" author="oreissig" created="Mon, 14 Jul 2014 11:55:24 +0000"/>
                            <attachment id="12652226" name="ReflectDataFieldRemovalTest.java" size="1883" author="cutting" created="Tue, 24 Jun 2014 16:52:27 +0000"/>
                            <attachment id="12652156" name="ReflectDataFieldRemovalTest.java" size="2639" author="oreissig" created="Tue, 24 Jun 2014 08:11:25 +0000"/>
                            <attachment id="12652378" name="RemovalOfUnionSubtype.java" size="2789" author="oreissig" created="Wed, 25 Jun 2014 09:43:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jun 2014 16:32:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x3tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401554</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
