<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:16:30 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-12-13+AND+created+%3C%3D+2011-12-20+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="6" total="6"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-979] Incorrect variable name in lang/ruby/lib/avro/io.rb</title>
                <link>https://issues.apache.org/jira/browse/AVRO-979</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;There is a misspelled variable name on line 244 of lib/avro/io.rb (&quot;writers_scheam&quot; vs &quot;writers_schema&quot;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--- lib/avro/io.rb	(revision 1213867)
+++ lib/avro/io.rb	(working copy)
@@ -244,7 +244,7 @@
           when &lt;span class=&quot;code-quote&quot;&gt;&apos;record&apos;&lt;/span&gt;
             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; check_props(writers_schema, readers_schema, [:fullname])
           when &lt;span class=&quot;code-quote&quot;&gt;&apos;error&apos;&lt;/span&gt;
-            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; check_props(writers_scheam, readers_schema, [:fullname])
+            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; check_props(writers_schema, readers_schema, [:fullname])
           when &lt;span class=&quot;code-quote&quot;&gt;&apos;request&apos;&lt;/span&gt;
             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
           when &lt;span class=&quot;code-quote&quot;&gt;&apos;fixed&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12535001">AVRO-979</key>
            <summary>Incorrect variable name in lang/ruby/lib/avro/io.rb</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pdlug">Paul Dlug</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Dec 2011 19:18:45 +0000</created>
                <updated>Wed, 27 Feb 2013 00:53:59 +0000</updated>
                            <resolved>Wed, 20 Feb 2013 01:46:11 +0000</resolved>
                                    <version>1.6.1</version>
                                    <fixVersion>1.7.4</fixVersion>
                                    <component>ruby</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13581416" author="martinkl" created="Tue, 19 Feb 2013 16:31:50 +0000"  >&lt;p&gt;Fixed in patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1258&quot; title=&quot;Support &amp;#39;error&amp;#39; datatype in Ruby implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1258&quot;&gt;&lt;del&gt;AVRO-1258&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13581858" author="martinkl" created="Wed, 20 Feb 2013 01:46:11 +0000"  >&lt;p&gt;Doug committed the fix on &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1258&quot; title=&quot;Support &amp;#39;error&amp;#39; datatype in Ruby implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1258&quot;&gt;&lt;del&gt;AVRO-1258&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Feb 2013 16:31:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-980] C: avro_schema_from_json ignores length parameter </title>
                <link>https://issues.apache.org/jira/browse/AVRO-980</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The function avro_schema_from_json() takes in a const char* and a length parameter, but it appears that the length parameter is ignored.&lt;/p&gt;

&lt;p&gt;We have a project where the schema is a binary resource compiled into the executable, and is not guaranteed to have a null terminator at the end.&lt;br/&gt;
This did not appear to be an issue because the function had a length parameter.&lt;/p&gt;

&lt;p&gt;The other day, It kept throwing errors about characters that were not in the file at all.&lt;br/&gt;
Suspecting it was running off the end of the file, I had a look at the Avro-C code and found that even though the function takes in a length parameter, it does not use it and expects a null terminator.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux x86_64 (Ubuntu 11.10)&lt;br/&gt;
Avro 1.6.1&lt;br/&gt;
GCC 4.6.1&lt;br/&gt;
cmake 2.8.5&lt;/p&gt;</environment>
        <key id="12535060">AVRO-980</key>
            <summary>C: avro_schema_from_json ignores length parameter </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mic159">Michael Cooper</reporter>
                        <labels>
                            <label>c</label>
                            <label>schema</label>
                    </labels>
                <created>Tue, 13 Dec 2011 23:29:14 +0000</created>
                <updated>Wed, 15 Feb 2012 00:46:25 +0000</updated>
                            <resolved>Thu, 9 Feb 2012 23:28:56 +0000</resolved>
                                    <version>1.6.1</version>
                                    <fixVersion>1.6.2</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13172869" author="dcreager" created="Tue, 20 Dec 2011 02:46:41 +0000"  >&lt;p&gt;Here&apos;s a patch for this.  Luckily we upgraded our internal copy of Jansson to 2.1 awhile back &#8212; it has a json_loadb function, which takes in a length parameter.  (Before, we used json_loads, which assumed a NUL-terminated string.)&lt;/p&gt;

&lt;p&gt;One thing we might need to consider is that this might break existing code, if they were passing in incorrect (or dummy) values for the length parameter.&lt;/p&gt;</comment>
                            <comment id="13173472" author="dcreager" created="Tue, 20 Dec 2011 20:11:09 +0000"  >&lt;p&gt;Maybe we can assume a NUL-terminated string if the caller passes in 0 for the length parameter?&lt;/p&gt;</comment>
                            <comment id="13173533" author="dcreager" created="Tue, 20 Dec 2011 21:48:03 +0000"  >&lt;p&gt;In particular, a colleague of mine points out that any code following &lt;a href=&quot;http://avro.apache.org/docs/current/api/c/index.html#_examples&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this example&lt;/a&gt; in the documentation will break with this patch, since the &lt;tt&gt;sizeof(PERSON_SCHEMA)&lt;/tt&gt; should be replaced with &lt;tt&gt;sizeof(PERSON_SCHEMA)-1&lt;/tt&gt; or &lt;tt&gt;strlen(PERSON_SCHEMA)&lt;/tt&gt;.  (The length shouldn&apos;t include the NUL terminator.)&lt;/p&gt;</comment>
                            <comment id="13192222" author="dcreager" created="Tue, 24 Jan 2012 15:43:01 +0000"  >&lt;p&gt;I&apos;ve put together a better patch for this issue.  Here&apos;s the commit message from the patch file:&lt;/p&gt;

&lt;p&gt;We now explicitly document that the length and error parameters are unused in the avro_schema_from_json function.  (The error parameter isn&apos;t needed, since any errors parsing or interpreting the JSON text are available using the avro_strerror() function.)&lt;/p&gt;

&lt;p&gt;This patch also adds the new avro_schema_from_json_length function.  This function actually uses its length parameter, and we explicitly document that the length should &lt;b&gt;not&lt;/b&gt; include any NUL terminator, if one is present.  We also provide the avro_schema_from_json_literal helper macro, which automatically calculates the size of a literal JSON string at compile time.  (To work, the JSON string must be defined as a char[], not a char *.)&lt;/p&gt;

&lt;p&gt;We decided to fix this bug using a new function because there&apos;s existing code out there that&apos;s already assuming that avro_schema_from_json&apos;s len parameter is unused.  (Or at least, they&apos;re assuming different things about what kind of value to pass in.)  This solution ensures that existing code still works, while providing a new function for the (needed) non-NUL-terminated case.  It comes at the expense of a sloppy signature for the existing avro_schema_from_json function...but then, the signature was already sloppy.  We&apos;re at least not adding any &lt;b&gt;new&lt;/b&gt; sloppiness.&lt;/p&gt;

&lt;p&gt;We also now use the new avro_schema_from_json_length function when reading an Avro object container file.  This means that we no longer need to append a NUL terminator to the schema JSON when reading in the container file&apos;s header.  (We don&apos;t &lt;b&gt;need to&lt;/b&gt;, but we still do.  One change at a time.)&lt;/p&gt;</comment>
                            <comment id="13201294" author="dcreager" created="Mon, 6 Feb 2012 14:09:37 +0000"  >&lt;p&gt;I&apos;d like to get this patch in for the 1.6.2 release.  If I don&apos;t hear any objections in by tomorrow, I&apos;ll commit to SVN.&lt;/p&gt;</comment>
                            <comment id="13205036" author="dcreager" created="Thu, 9 Feb 2012 23:28:56 +0000"  >&lt;p&gt;Committed to SVN&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508030" name="0001-AVRO-980.-C-Handle-length-parameter-in-avro_schema_f.patch" size="5797" author="dcreager" created="Tue, 20 Dec 2011 02:46:41 +0000"/>
                            <attachment id="12511679" name="0001-AVRO-980.-C-avro_schema_from_json_length.patch" size="16443" author="dcreager" created="Tue, 24 Jan 2012 15:43:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Dec 2011 02:46:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-981] Python Avro library does not build/install on OS X</title>
                <link>https://issues.apache.org/jira/browse/AVRO-981</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;russell-jurneys-macbook-pro:py rjurney$ sudo python2.5 setup.py install&lt;br/&gt;
Password:&lt;br/&gt;
running install&lt;br/&gt;
running bdist_egg&lt;br/&gt;
running egg_info&lt;br/&gt;
writing requirements to avro.egg-info/requires.txt&lt;br/&gt;
writing avro.egg-info/PKG-INFO&lt;br/&gt;
writing top-level names to avro.egg-info/top_level.txt&lt;br/&gt;
writing dependency_links to avro.egg-info/dependency_links.txt&lt;br/&gt;
reading manifest file &apos;avro.egg-info/SOURCES.txt&apos;&lt;br/&gt;
writing manifest file &apos;avro.egg-info/SOURCES.txt&apos;&lt;br/&gt;
installing library code to build/bdist.macosx-10.6-i386/egg&lt;br/&gt;
running install_lib&lt;br/&gt;
running build_py&lt;br/&gt;
creating build/bdist.macosx-10.6-i386&lt;br/&gt;
creating build/bdist.macosx-10.6-i386/egg&lt;br/&gt;
creating build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/_&lt;em&gt;init&lt;/em&gt;_.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/datafile.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/io.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/ipc.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/protocol.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/schema.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/tool.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/avro/txipc.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/avro&lt;br/&gt;
copying build/lib/pyAntTasks-1.3-LICENSE.txt -&amp;gt; build/bdist.macosx-10.6-i386/egg&lt;br/&gt;
copying build/lib/pyAntTasks-1.3.jar -&amp;gt; build/bdist.macosx-10.6-i386/egg&lt;br/&gt;
creating build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
copying build/lib/simplejson/_&lt;em&gt;init&lt;/em&gt;_.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
copying build/lib/simplejson/_speedups.c -&amp;gt; build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
copying build/lib/simplejson/decoder.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
copying build/lib/simplejson/encoder.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
copying build/lib/simplejson/LICENSE.txt -&amp;gt; build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
copying build/lib/simplejson/scanner.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
copying build/lib/simplejson/tool.py -&amp;gt; build/bdist.macosx-10.6-i386/egg/simplejson&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/_&lt;em&gt;init&lt;/em&gt;&lt;em&gt;.py to __init&lt;/em&gt;_.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/datafile.py to datafile.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/io.py to io.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/ipc.py to ipc.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/protocol.py to protocol.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/schema.py to schema.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/tool.py to tool.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/avro/txipc.py to txipc.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/simplejson/_&lt;em&gt;init&lt;/em&gt;&lt;em&gt;.py to __init&lt;/em&gt;_.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/simplejson/decoder.py to decoder.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/simplejson/encoder.py to encoder.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/simplejson/scanner.py to scanner.pyc&lt;br/&gt;
byte-compiling build/bdist.macosx-10.6-i386/egg/simplejson/tool.py to tool.pyc&lt;br/&gt;
creating build/bdist.macosx-10.6-i386/egg/EGG-INFO&lt;br/&gt;
installing scripts to build/bdist.macosx-10.6-i386/egg/EGG-INFO/scripts&lt;br/&gt;
running install_scripts&lt;br/&gt;
running build_scripts&lt;br/&gt;
creating build/scripts-2.5&lt;br/&gt;
copying and adjusting ./scripts/avro -&amp;gt; build/scripts-2.5&lt;br/&gt;
changing mode of build/scripts-2.5/avro from 644 to 755&lt;br/&gt;
creating build/bdist.macosx-10.6-i386/egg/EGG-INFO/scripts&lt;br/&gt;
copying build/scripts-2.5/avro -&amp;gt; build/bdist.macosx-10.6-i386/egg/EGG-INFO/scripts&lt;br/&gt;
changing mode of build/bdist.macosx-10.6-i386/egg/EGG-INFO/scripts/avro to 755&lt;br/&gt;
copying avro.egg-info/PKG-INFO -&amp;gt; build/bdist.macosx-10.6-i386/egg/EGG-INFO&lt;br/&gt;
copying avro.egg-info/SOURCES.txt -&amp;gt; build/bdist.macosx-10.6-i386/egg/EGG-INFO&lt;br/&gt;
copying avro.egg-info/dependency_links.txt -&amp;gt; build/bdist.macosx-10.6-i386/egg/EGG-INFO&lt;br/&gt;
copying avro.egg-info/requires.txt -&amp;gt; build/bdist.macosx-10.6-i386/egg/EGG-INFO&lt;br/&gt;
copying avro.egg-info/top_level.txt -&amp;gt; build/bdist.macosx-10.6-i386/egg/EGG-INFO&lt;br/&gt;
zip_safe flag not set; analyzing archive contents...&lt;br/&gt;
creating &apos;dist/avro-&lt;em&gt;AVRO_VERSION&lt;/em&gt;-py2.5.egg&apos; and adding &apos;build/bdist.macosx-10.6-i386/egg&apos; to it&lt;br/&gt;
removing &apos;build/bdist.macosx-10.6-i386/egg&apos; (and everything under it)&lt;br/&gt;
Processing avro-&lt;em&gt;AVRO_VERSION&lt;/em&gt;-py2.5.egg&lt;br/&gt;
Copying avro-&lt;em&gt;AVRO_VERSION&lt;/em&gt;-py2.5.egg to /Library/Python/2.5/site-packages&lt;br/&gt;
Adding avro &lt;del&gt;AVRO-VERSION&lt;/del&gt; to easy-install.pth file&lt;br/&gt;
Installing avro script to /usr/local/bin&lt;/p&gt;

&lt;p&gt;Installed /Library/Python/2.5/site-packages/avro-&lt;em&gt;AVRO_VERSION&lt;/em&gt;-py2.5.egg&lt;br/&gt;
Processing dependencies for avro==&lt;del&gt;AVRO-VERSION&lt;/del&gt;&lt;br/&gt;
Searching for python-snappy&lt;br/&gt;
Reading &lt;a href=&quot;http://pypi.python.org/simple/python-snappy/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pypi.python.org/simple/python-snappy/&lt;/a&gt;&lt;br/&gt;
Reading &lt;a href=&quot;http://github.com/andrix/python-snappy&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/andrix/python-snappy&lt;/a&gt;&lt;br/&gt;
Best match: python-snappy 0.3.2&lt;br/&gt;
Downloading &lt;a href=&quot;http://pypi.python.org/packages/source/p/python-snappy/python-snappy-0.3.2.tar.gz#md5=94ec3eb54a780fac3b15a6c141af973f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pypi.python.org/packages/source/p/python-snappy/python-snappy-0.3.2.tar.gz#md5=94ec3eb54a780fac3b15a6c141af973f&lt;/a&gt;&lt;br/&gt;
Processing python-snappy-0.3.2.tar.gz&lt;br/&gt;
Running python-snappy-0.3.2/setup.py &lt;del&gt;q bdist_egg --dist-dir /tmp/easy_install-c1VYAq/python-snappy-0.3.2/egg-dist-tmp&lt;/del&gt;_CpoEp&lt;br/&gt;
cc1plus: warning: command line option &quot;-Wstrict-prototypes&quot; is valid for C/ObjC but not for C++&lt;br/&gt;
snappymodule.cc:31:22: error: snappy-c.h: No such file or directory&lt;br/&gt;
snappymodule.cc: In function &apos;PyObject* snappy__compress(PyObject*, PyObject*)&apos;:&lt;br/&gt;
snappymodule.cc:62: error: &apos;snappy_status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:62: error: expected `;&apos; before &apos;status&apos;&lt;br/&gt;
snappymodule.cc:75: error: &apos;snappy_max_compressed_length&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:79: error: &apos;status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:79: error: &apos;snappy_compress&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:81: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc: In function &apos;PyObject* snappy__uncompress(PyObject*, PyObject*)&apos;:&lt;br/&gt;
snappymodule.cc:107: error: &apos;snappy_status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:107: error: expected `;&apos; before &apos;status&apos;&lt;br/&gt;
snappymodule.cc:120: error: &apos;status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:120: error: &apos;snappy_uncompressed_length&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:121: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:128: error: &apos;snappy_uncompress&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:129: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc: In function &apos;PyObject* snappy__is_valid_compressed_buffer(PyObject*, PyObject*)&apos;:&lt;br/&gt;
snappymodule.cc:151: error: &apos;snappy_status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:151: error: expected `;&apos; before &apos;status&apos;&lt;br/&gt;
snappymodule.cc:156: error: &apos;status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:156: error: &apos;snappy_validate_compressed_buffer&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:157: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc: At global scope:&lt;br/&gt;
snappymodule.cc:41: warning: &apos;_state&apos; defined but not used&lt;br/&gt;
cc1plus: warning: command line option &quot;-Wstrict-prototypes&quot; is valid for C/ObjC but not for C++&lt;br/&gt;
snappymodule.cc:31:22: error: snappy-c.h: No such file or directory&lt;br/&gt;
snappymodule.cc: In function &apos;PyObject* snappy__compress(PyObject*, PyObject*)&apos;:&lt;br/&gt;
snappymodule.cc:62: error: &apos;snappy_status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:62: error: expected `;&apos; before &apos;status&apos;&lt;br/&gt;
snappymodule.cc:75: error: &apos;snappy_max_compressed_length&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:79: error: &apos;status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:79: error: &apos;snappy_compress&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:81: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc: In function &apos;PyObject* snappy__uncompress(PyObject*, PyObject*)&apos;:&lt;br/&gt;
snappymodule.cc:107: error: &apos;snappy_status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:107: error: expected `;&apos; before &apos;status&apos;&lt;br/&gt;
snappymodule.cc:120: error: &apos;status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:120: error: &apos;snappy_uncompressed_length&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:121: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:128: error: &apos;snappy_uncompress&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:129: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc: In function &apos;PyObject* snappy__is_valid_compressed_buffer(PyObject*, PyObject*)&apos;:&lt;br/&gt;
snappymodule.cc:151: error: &apos;snappy_status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:151: error: expected `;&apos; before &apos;status&apos;&lt;br/&gt;
snappymodule.cc:156: error: &apos;status&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:156: error: &apos;snappy_validate_compressed_buffer&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc:157: error: &apos;SNAPPY_OK&apos; was not declared in this scope&lt;br/&gt;
snappymodule.cc: At global scope:&lt;br/&gt;
snappymodule.cc:41: warning: &apos;_state&apos; defined but not used&lt;br/&gt;
lipo: can&apos;t open input file: /var/tmp//ccbd0SLZ.out (No such file or directory)&lt;br/&gt;
error: Setup script exited with error: command &apos;gcc-4.2&apos; failed with exit status 1&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.6.8, Python 2.5, 2.6, 2.7&lt;/p&gt;</environment>
        <key id="12535239">AVRO-981</key>
            <summary>Python Avro library does not build/install on OS X</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cavorite">Juan Manuel Caicedo</assignee>
                                    <reporter username="russell.jurney">Russell Jurney</reporter>
                        <labels>
                            <label>avro</label>
                            <label>fun</label>
                            <label>happy</label>
                            <label>pants</label>
                            <label>python</label>
                    </labels>
                <created>Thu, 15 Dec 2011 01:38:16 +0000</created>
                <updated>Mon, 10 Dec 2012 17:57:37 +0000</updated>
                            <resolved>Sat, 6 Oct 2012 15:38:21 +0000</resolved>
                                    <version>1.5.4</version>
                    <version>1.6.1</version>
                                    <fixVersion>1.7.3</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13175624" author="kkrugler" created="Fri, 23 Dec 2011 23:50:15 +0000"  >&lt;p&gt;Has anyone found a workaround for this issue?&lt;/p&gt;

&lt;p&gt;I&apos;ve got a client who&apos;s planning to consume our Avro-based results using Python, and asking him to install homebrew so he can install Snappy so he can install the Avro Python support (which doesn&apos;t yet work for me) so he can access the data isn&apos;t matching up well with my recommendation to use Avro as a good cross-language solution.&lt;/p&gt;</comment>
                            <comment id="13175636" author="joecrobak" created="Sat, 24 Dec 2011 01:09:06 +0000"  >&lt;p&gt;We could file a fix upstream with python-snappy to compile the snappy library if it&apos;s not there.&lt;/p&gt;

&lt;p&gt;Secondly, looking through the code, it looks like snappy is meant to be an optional dependency, e.g.:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;lang/py/src/avro/datafile.py&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;:
  &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; snappy
except:
  pass # fail later &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; snappy is used
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With a few minor changes, it seems like python-snappy could be removed as an explicit dependency in setup.py.&lt;/p&gt;</comment>
                            <comment id="13186351" author="russell.jurney" created="Sat, 14 Jan 2012 21:49:49 +0000"  >&lt;p&gt;That would be great.&lt;/p&gt;</comment>
                            <comment id="13191823" author="russell.jurney" created="Tue, 24 Jan 2012 02:08:56 +0000"  >&lt;p&gt;See related issue: &lt;a href=&quot;https://github.com/andrix/python-snappy/issues/7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/andrix/python-snappy/issues/7&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13191834" author="russell.jurney" created="Tue, 24 Jan 2012 02:37:59 +0000"  >&lt;p&gt;This is a serious bug.&lt;/p&gt;</comment>
                            <comment id="13191839" author="russell.jurney" created="Tue, 24 Jan 2012 02:53:25 +0000"  >&lt;p&gt;This patch removes snappy from setup.py, which allows avro to build, install and function on mac os x.  &lt;/p&gt;</comment>
                            <comment id="13192325" author="russell.jurney" created="Tue, 24 Jan 2012 18:07:08 +0000"  >&lt;p&gt;Resolution of &lt;a href=&quot;https://github.com/andrix/python-snappy/issues/7#issuecomment-3633856&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/andrix/python-snappy/issues/7#issuecomment-3633856&lt;/a&gt; calls this patch into question.  Installing &lt;a href=&quot;http://code.google.com/p/snappy/downloads/list&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/snappy/downloads/list&lt;/a&gt; makes python-snappy build, which should fix this issue.&lt;/p&gt;

&lt;p&gt;However, it seems that snappy, and python-snappy? are dependencies that are not included in the project, and should be.&lt;/p&gt;</comment>
                            <comment id="13192539" author="cutting" created="Tue, 24 Jan 2012 21:28:38 +0000"  >&lt;p&gt;&amp;gt; snappy and python-snappy are dependencies that are not included in the project, and should be&lt;/p&gt;

&lt;p&gt;How do you mean they should they be included?  Do you mean we should mention them in the top-level BUILD.txt or something else?&lt;/p&gt;

&lt;p&gt;Do you still feel we should remove them from setup.py?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13192546" author="russell.jurney" created="Tue, 24 Jan 2012 21:33:39 +0000"  >&lt;p&gt;I&apos;m not too familiar with Python packaging, but ideally snappy and python-snappy would be auto-installed by python-avro.  I don&apos;t want to have to install anything else - I want the install of python-avro to do it for me.  &lt;/p&gt;

&lt;p&gt;Short of that, loudly stating that snappy and then python-snappy are required would help.&lt;/p&gt;

&lt;p&gt;The python-snappy guys look to be helping make the snappy dependence explicit, too.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13468019" author="cavorite" created="Tue, 2 Oct 2012 19:55:05 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I have an alternative solution for this problem: declare python-snappy as a &apos;recommended&apos; dependency. By doing that it is no longer becomes necessary to have the snappy library installed, however, if someone states explicitly that wants to use that feature, the installer will require python-snappy.&lt;/p&gt;

&lt;p&gt;This is already supported by &lt;a href=&quot;http://packages.python.org/distribute/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;setuptools&lt;/a&gt; and the change in the code is trivial. You can see the changes in a sample GitHub project that I created:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/cavorite/python-avro/commit/ee338c88900fd73d88f08dfe4adbd4cf2416afbd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/cavorite/python-avro/commit/ee338c88900fd73d88f08dfe4adbd4cf2416afbd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please let me know if you think that this is a good solution. I&apos;ll be happy to send a patch file if you like.&lt;/p&gt;</comment>
                            <comment id="13468055" author="russell.jurney" created="Tue, 2 Oct 2012 20:44:59 +0000"  >&lt;p&gt;This sounds reasonable to me - as long as we make a loud warning. Snappy compression seems very common from discussions on the lists, and this might lead to further confusion when python avro doesn&apos;t work reading a snappy avro file. Hopefully that error message is informative as well.&lt;/p&gt;</comment>
                            <comment id="13468071" author="cavorite" created="Tue, 2 Oct 2012 21:01:19 +0000"  >&lt;p&gt;Another option is to modify python-snappy so that it installs snappy as a static library. &lt;a href=&quot;http://pypi.python.org/pypi/pyzmq-static/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;pyzmq&lt;/a&gt; does that, although the code seems to be a bit complicated and I thought that the &apos;recommended&apos; approach was simple and good enough.&lt;/p&gt;</comment>
                            <comment id="13468710" author="tebeka" created="Wed, 3 Oct 2012 18:10:10 +0000"  >&lt;p&gt;IMO the best solution is to have snappy as &quot;recommended&quot; and have the code conditionally import it.&lt;/p&gt;</comment>
                            <comment id="13470427" author="cutting" created="Fri, 5 Oct 2012 16:20:14 +0000"  >&lt;p&gt;Juan&amp;gt; Please let me know if you think that this is a good solution. I&apos;ll be happy to send a patch file if you like.&lt;/p&gt;

&lt;p&gt;This seems to be the preferred solution.  Can you please provide such a patch?  Thanks!&lt;/p&gt;</comment>
                            <comment id="13470548" author="cavorite" created="Fri, 5 Oct 2012 18:47:31 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I&apos;m attaching the patch the makes python-snappy a recommended dependency.&lt;/p&gt;</comment>
                            <comment id="13470656" author="cutting" created="Fri, 5 Oct 2012 21:01:12 +0000"  >&lt;p&gt;Thanks, Juan.&lt;/p&gt;

&lt;p&gt;This patch looks good to me.  I&apos;ll commit it unless someone objects.&lt;/p&gt;</comment>
                            <comment id="13470763" author="tebeka" created="Fri, 5 Oct 2012 23:04:49 +0000"  >&lt;p&gt;The patch is not good enough IMO, there are some code changes required as well. Attaching a patch, if it looks OK I&apos;ll commit.&lt;/p&gt;</comment>
                            <comment id="13470768" author="tebeka" created="Fri, 5 Oct 2012 23:05:52 +0000"  >&lt;p&gt;Making snappy optional&lt;/p&gt;</comment>
                            <comment id="13470769" author="tebeka" created="Fri, 5 Oct 2012 23:07:19 +0000"  >&lt;p&gt;Catching ImportError&lt;/p&gt;</comment>
                            <comment id="13471047" author="tebeka" created="Sat, 6 Oct 2012 15:38:11 +0000"  >&lt;p&gt;Committed in revision 1395098.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12515697">AVRO-866</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12548068" name="AVRO-981.patch" size="1398" author="tebeka" created="Fri, 5 Oct 2012 23:07:19 +0000"/>
                            <attachment id="12548067" name="AVRO-981.patch" size="1377" author="tebeka" created="Fri, 5 Oct 2012 23:05:52 +0000"/>
                            <attachment id="12548021" name="AVRO-981.patch" size="757" author="cavorite" created="Fri, 5 Oct 2012 18:47:31 +0000"/>
                            <attachment id="12511617" name="AVRO-981.patch" size="435" author="russell.jurney" created="Tue, 24 Jan 2012 02:53:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Dec 2011 23:50:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220923</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04ln3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>python avro mac os x build</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-982] NettyTransceiver: can hang on connection interruption</title>
                <link>https://issues.apache.org/jira/browse/AVRO-982</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When stopping my avro server, I noticed that my avro client was hanging. This makes it impossible for my client to retry the operation, as it hangs inside the avro code:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;pool-2-thread-1&quot; prio=10 tid=0x00007fc66840e800 nid=0x75fc waiting on condition [0x00007fc674176000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  &amp;lt;0x00000007d7471bd0&amp;gt; (a java.util.concurrent.CountDownLatch$Sync)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:969)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1281)
        at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207)
        at org.apache.avro.ipc.CallFuture.get(CallFuture.java:116)
        at org.apache.avro.ipc.Requestor.request(Requestor.java:106)
        at org.apache.avro.ipc.specific.SpecificRequestor.invoke(SpecificRequestor.java:72)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In a similar situation elsewhere in the NettyTransceiver (method exceptionCaught), the pending requests are canceled. It seems appropriate to do that also on closed connections. I&apos;ll attach a patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535317">AVRO-982</key>
            <summary>NettyTransceiver: can hang on connection interruption</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bruno">Bruno Dumon</assignee>
                                    <reporter username="bruno">Bruno Dumon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Dec 2011 14:24:12 +0000</created>
                <updated>Wed, 15 Feb 2012 00:46:31 +0000</updated>
                            <resolved>Fri, 16 Dec 2011 19:38:30 +0000</resolved>
                                                    <fixVersion>1.6.2</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13170626" author="cutting" created="Fri, 16 Dec 2011 00:33:12 +0000"  >&lt;p&gt;It would be great to have a test that this fixes.  I tried some simple changes to TestNettyServerWithCallbacks to reproduce the problem and could not.  Can you devise a test?&lt;/p&gt;</comment>
                            <comment id="13170943" author="bruno" created="Fri, 16 Dec 2011 12:43:23 +0000"  >&lt;p&gt;I&apos;ve attached a test (the patch has a few empty line diffs that I wasn&apos;t able to avoid).&lt;/p&gt;

&lt;p&gt;Without the patch applied, the test will hang for 10 seconds and then fail with the message &quot;Client request should not be blocked on server shutdown&quot;.&lt;/p&gt;</comment>
                            <comment id="13171159" author="cutting" created="Fri, 16 Dec 2011 19:38:30 +0000"  >&lt;p&gt;The test looks great.  I used diff&apos;s -w flag to remove the spurious whitespace changes.&lt;/p&gt;

&lt;p&gt;I committed this.&lt;/p&gt;

&lt;p&gt;Thanks, Bruno!&lt;/p&gt;</comment>
                            <comment id="13171308" author="scott_carey" created="Fri, 16 Dec 2011 23:35:08 +0000"  >&lt;p&gt;+1  Simple fix, great test.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12507684" name="AVRO-982-testcase.patch" size="9263" author="bruno" created="Fri, 16 Dec 2011 12:40:21 +0000"/>
                            <attachment id="12507530" name="AVRO-982.patch" size="705" author="bruno" created="Thu, 15 Dec 2011 14:25:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Dec 2011 00:33:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221001</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-983] maven-avro-plugin: Allow maven schema compiler to support external reference in an another avro schema file</title>
                <link>https://issues.apache.org/jira/browse/AVRO-983</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro Maven plugin doesn&apos;t support an external reference in an another Avro schema file even this schema is available in the same src directory&lt;/p&gt;

&lt;p&gt;Example :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt; 
[
	{
		&lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;com.afklm.karma.demand.inter&quot;&lt;/span&gt;,
		&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;DatedFlightLegInterType&quot;&lt;/span&gt;,
		&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
		&lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:
			[
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;legOrgArp&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;legDestArp&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;legDepDate&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;flightNb&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;dfl&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;com.afklm.karma.demand.output.DatedFlightLegType&quot;&lt;/span&gt; }
			]
	},
	{
		&lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;com.afklm.karma.demand.inter&quot;&lt;/span&gt;,
		&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;AirportAirportDatedFlightLegInterType&quot;&lt;/span&gt;,
		&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
		&lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:
			[
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;aa&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;AirportAirportInterType&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;legOrgArp&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;legDestArp&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;legDepDate&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt; },
				{ &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;flightNb&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; }
			]
	}
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;generate a fatal error :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
org.apache.avro.SchemaParseException: &lt;span class=&quot;code-quote&quot;&gt;&quot;com.afklm.karma.demand.output.DatedFlightLegType&quot;&lt;/span&gt; is not a defined name. The type of t
he &lt;span class=&quot;code-quote&quot;&gt;&quot;dfl&quot;&lt;/span&gt; field must be a defined name or a {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: ...} expression.
        at org.apache.avro.Schema.parse(Schema.java:1131)
        at org.apache.avro.Schema.parse(Schema.java:1200)
        at org.apache.avro.Schema$Parser.parse(Schema.java:968)
        at org.apache.avro.Schema$Parser.parse(Schema.java:945)
        at org.apache.avro.mojo.SchemaMojo.doCompile(SchemaMojo.java:58)
        at org.apache.avro.mojo.AbstractAvroMojo.compileFiles(AbstractAvroMojo.java:137)
        at org.apache.avro.mojo.AbstractAvroMojo.execute(AbstractAvroMojo.java:107)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;I propose a patch to support also this case :&lt;br/&gt;
In org.apache.avro.mojo.SchemaMojo (line 55):&lt;/p&gt;

&lt;p&gt;		// File src = new File(sourceDirectory, filename);&lt;br/&gt;
		// Schema.Parser parser = new Schema.Parser();&lt;br/&gt;
		// Schema schema = parser.parse(src);&lt;br/&gt;
		// SpecificCompiler compiler = new SpecificCompiler(schema);&lt;br/&gt;
		// compiler.setTemplateDir(templateDirectory);&lt;br/&gt;
		// compiler.setStringType(StringType.valueOf(stringType));&lt;br/&gt;
		// compiler.compileSchema(src,&lt;br/&gt;
		// outputDirectory);&lt;/p&gt;


&lt;p&gt;        DirectoryScanner scanner = new DirectoryScanner();&lt;br/&gt;
        scanner.setBasedir(sourceDirectory);&lt;br/&gt;
        scanner.setIncludes( getIncludes() );&lt;br/&gt;
        scanner.addDefaultExcludes();&lt;br/&gt;
        scanner.scan();&lt;br/&gt;
        File[] avroFiles = new File&lt;span class=&quot;error&quot;&gt;&amp;#91;scanner.getIncludedFiles().length&amp;#93;&lt;/span&gt;;&lt;br/&gt;
        for (int i = 0; i &amp;lt; avroFiles.length; i++) &lt;/p&gt;
{
        	avroFiles[i] = new File( scanner.getBasedir(), scanner.getIncludedFiles()[i] );
		}
&lt;p&gt;        SpecificCompiler.compileSchema(avroFiles, outputDirectory);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535725">AVRO-983</key>
            <summary>maven-avro-plugin: Allow maven schema compiler to support external reference in an another avro schema file</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="tomwhite">Tom White</assignee>
                                    <reporter username="torcq">C&#233;dric Torcq</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Dec 2011 17:32:23 +0000</created>
                <updated>Thu, 8 Nov 2018 15:03:50 +0000</updated>
                            <resolved>Tue, 13 Nov 2012 09:57:57 +0000</resolved>
                                    <version>1.6.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <timeoriginalestimate seconds="900">0.25h</timeoriginalestimate>
                            <timeestimate seconds="900">0.25h</timeestimate>
                                        <comments>
                            <comment id="13173426" author="cutting" created="Tue, 20 Dec 2011 19:01:49 +0000"  >&lt;p&gt;This looks like a useful thing to add.&lt;/p&gt;

&lt;p&gt;Could we instead fix this more simply by changing SchemaMojo#doCompile() to reuse a Schema.Parser across calls?  That class would need to have a Schema.Parser field added.  The parent class already calls doCompile() for each included file.&lt;/p&gt;

&lt;p&gt;The patch includes a lot of spurious whitespace changes &amp;amp; tabs that should not be there.&lt;/p&gt;

&lt;p&gt;We also need to add a test case for this.&lt;/p&gt;</comment>
                            <comment id="13486202" author="tomwhite" created="Mon, 29 Oct 2012 17:55:08 +0000"  >&lt;p&gt;Here&apos;s a simpler patch that follows Doug&apos;s suggestion of reusing Schema.Parser. I haven&apos;t written a unit test but I did verify it manually by writing a schema that referenced another schema and checked that without the patch the plugin failed and with the patch it successfully compiled all the files.&lt;/p&gt;

&lt;p&gt;There is however a big caveat: cross references only work if the type is defined in a file that is compiled before it is referenced.&lt;/p&gt;

&lt;p&gt;So if a.avsc defines type A which depends on type B defined in b.avsc then compilation will fail. That&apos;s because when a.avsc is compiled first (since it is lexically before b.avsc) B will not have been read.&lt;/p&gt;

&lt;p&gt;It&apos;s possible to rename avsc files to make this work, so this patch is an improvement; but it would be better to improve this in the future to either&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;give more control over the order in which the files are compiled, like the command line version. At the moment they are specified as directories in the Maven POM, so the order is the lexical ordering of the files in the directory.&lt;/li&gt;
	&lt;li&gt;or enhance the compiler to support type references between files. This is more involved and would require a two pass approach.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13487161" author="cutting" created="Tue, 30 Oct 2012 19:51:13 +0000"  >&lt;p&gt;Tom, I don&apos;t think lexicographic ordering is guaranteed, since it looks like Maven walks the directory tree in the order that File#list() returns.  So we might add a call to Arrays#sort() in AbstractAvroMojo.java to fix this.&lt;/p&gt;</comment>
                            <comment id="13489016" author="tomwhite" created="Thu, 1 Nov 2012 20:46:41 +0000"  >&lt;p&gt;Good point Doug. Here&apos;s a new patch which does a sort on filenames.&lt;/p&gt;</comment>
                            <comment id="13489031" author="cutting" created="Thu, 1 Nov 2012 21:03:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13492698" author="cutting" created="Wed, 7 Nov 2012 21:07:11 +0000"  >&lt;p&gt;An alternative implementation was proposed in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1188&quot; title=&quot;External Schema Imports via AVSC Schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1188&quot;&gt;&lt;del&gt;AVRO-1188&lt;/del&gt;&lt;/a&gt;.  One might specify &quot;include&quot; directories in the pom.xml that are processed first, permitting dependencies on schemas therein.&lt;/p&gt;</comment>
                            <comment id="13493905" author="tomwhite" created="Fri, 9 Nov 2012 10:48:45 +0000"  >&lt;p&gt;I just committed this. I think &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1188&quot; title=&quot;External Schema Imports via AVSC Schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1188&quot;&gt;&lt;del&gt;AVRO-1188&lt;/del&gt;&lt;/a&gt; would be a good improvement, but this patch is still useful since it makes the behaviour of the command line and Maven schema compilers consistent.&lt;/p&gt;</comment>
                            <comment id="13493935" author="tomwhite" created="Fri, 9 Nov 2012 11:29:35 +0000"  >&lt;p&gt;I just reverted this as it breaks the build. The IPC module doesn&apos;t build with this change since it defines multiple schemas containing an MD5 type, and these clash causing the compilation to fail. For this reason we shouldn&apos;t include the patch in a bugfix release since it is potentially incompatible.&lt;/p&gt;</comment>
                            <comment id="13494159" author="cutting" created="Fri, 9 Nov 2012 17:49:01 +0000"  >&lt;p&gt;The &quot;include&quot; approach of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1188&quot; title=&quot;External Schema Imports via AVSC Schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1188&quot;&gt;&lt;del&gt;AVRO-1188&lt;/del&gt;&lt;/a&gt; would be back-compatible, since folks would need to opt-in.&lt;/p&gt;</comment>
                            <comment id="13496072" author="tomwhite" created="Tue, 13 Nov 2012 09:57:57 +0000"  >&lt;p&gt;Marking this as &quot;Won&apos;t Fix&quot; since &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1188&quot; title=&quot;External Schema Imports via AVSC Schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1188&quot;&gt;&lt;del&gt;AVRO-1188&lt;/del&gt;&lt;/a&gt; provides an alternative.&lt;/p&gt;</comment>
                            <comment id="16679879" author="jira-bot" created="Thu, 8 Nov 2018 15:03:50 +0000"  >&lt;p&gt;Commit aa5860fc355d7d44c3d567fdb1fb2d20ad474cc0 in avro&apos;s branch refs/heads/master from Artem Yarulin&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=aa5860f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=aa5860f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Allow to set template dir for avro-tools compile&lt;/p&gt;

&lt;p&gt;maven-avro-plugin allows to specify custom template&lt;br/&gt;
directory (&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-983&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-983&lt;/a&gt;), same&lt;br/&gt;
applies to&lt;br/&gt;
gradle-avro-plugin (&lt;a href=&quot;https://github.com/commercehub-oss/gradle-avro-plugin#templatedirectory&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/commercehub-oss/gradle-avro-plugin#templatedirectory&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;It would be useful to support that in Arvo CLI tools as well. Use&lt;br/&gt;
case: generating Java classes during CI or for any scripting needs&lt;br/&gt;
when using maven or gradle plugins is too much&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12614621">AVRO-1188</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12614621">AVRO-1188</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12551759" name="AVRO-983.patch" size="1948" author="tomwhite" created="Thu, 1 Nov 2012 20:46:41 +0000"/>
                            <attachment id="12551216" name="AVRO-983.patch" size="924" author="tomwhite" created="Mon, 29 Oct 2012 17:55:08 +0000"/>
                            <attachment id="12507931" name="SchemaMojo.java.patch" size="4299" author="torcq" created="Mon, 19 Dec 2011 17:36:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Dec 2011 19:01:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d8f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-984] Avro C - Resolved reader fails to read nested arrays and reads uninitialized memory</title>
                <link>https://issues.apache.org/jira/browse/AVRO-984</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Summary: &lt;/p&gt;

&lt;p&gt;I created a test program that creates an avro value corresponding to&lt;br/&gt;
the following schema: &lt;/p&gt;

&lt;p&gt;  {&quot;type&quot;:&quot;array&quot;, &quot;items&quot;: {&quot;type&quot;: &quot;array&quot;, &quot;items&quot;: &quot;long&quot;}}&lt;/p&gt;

&lt;p&gt;and tries to read it back using a matched and resolved reader. The&lt;br/&gt;
matched reader is able to reconstruct the avro value, but the resolved&lt;br/&gt;
reader fails to read the value. &lt;/p&gt;

&lt;p&gt;Additionally valgrind indicates that conditional jumps are being&lt;br/&gt;
performed based on uninitialized memory, when trying to reconstruct&lt;br/&gt;
the value using the resolved reader.&lt;/p&gt;

&lt;p&gt;More Details:&lt;/p&gt;

&lt;p&gt;I created a test program that creates an avro value corresponding to&lt;br/&gt;
the following writer schema: &lt;/p&gt;

&lt;p&gt;  {&quot;type&quot;:&quot;array&quot;, &quot;items&quot;: {&quot;type&quot;: &quot;array&quot;, &quot;items&quot;: &quot;long&quot;}}&lt;/p&gt;

&lt;p&gt;The avro value is serialized to memory. &lt;/p&gt;

&lt;p&gt;Then this memory is read back into two readers. In both cases the&lt;br/&gt;
reader schema is set to be identical to the writer schema.&lt;/p&gt;

&lt;p&gt;The first reader is a matched reader &amp;#8211; i.e. the reader knows that the&lt;br/&gt;
writer and reader schema are identical. &lt;/p&gt;

&lt;p&gt;The second reader is a resolved reader &amp;#8211; i.e. the reader tries to&lt;br/&gt;
resolve differences between the writer and reader schema. The schemas&lt;br/&gt;
should resolve perfectly, since the writer and reader schema are&lt;br/&gt;
identical.&lt;/p&gt;

&lt;p&gt;When we try to deserialize the binary buffer with the matched reader,&lt;br/&gt;
the value is reconstructed perfectly.&lt;/p&gt;

&lt;p&gt;When we try to deserialize the binary buffer with the resolved reader,&lt;br/&gt;
the code fails to populate the avro value. This failure indicates that&lt;br/&gt;
the resolved reading of the nested array not working&lt;br/&gt;
properly. Additionally valgrind indicates that conditional jumps are&lt;br/&gt;
being performed based on uninitialized values, in this second case.&lt;/p&gt;

&lt;p&gt;I will attach a test program that shows the issues. &lt;/p&gt;
</description>
                <environment>&lt;p&gt;GNU/Linux Ubuntu 11.10 64-bit &lt;/p&gt;</environment>
        <key id="12535763">AVRO-984</key>
            <summary>Avro C - Resolved reader fails to read nested arrays and reads uninitialized memory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vnadkarni">Vivek Nadkarni</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Dec 2011 23:08:08 +0000</created>
                <updated>Wed, 15 Feb 2012 00:46:26 +0000</updated>
                            <resolved>Tue, 27 Dec 2011 15:15:24 +0000</resolved>
                                    <version>1.6.1</version>
                    <version>1.6.2</version>
                    <version>1.7.0</version>
                                    <fixVersion>1.6.2</fixVersion>
                    <fixVersion>1.7.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="13172739" author="vnadkarni" created="Mon, 19 Dec 2011 23:35:59 +0000"  >&lt;p&gt;This test program (avro-984-test.c) demonstrates failure of the resolver to resolve a nested array. &lt;/p&gt;

&lt;p&gt;The output of the program is in avro-984-output.txt and the output of running valgrind is in avro-984-valgrind-output.txt.&lt;/p&gt;
</comment>
                            <comment id="13173322" author="vnadkarni" created="Tue, 20 Dec 2011 17:21:43 +0000"  >&lt;p&gt;I did a few more tests, and found the following: &lt;/p&gt;

&lt;p&gt;1. When I nest an array inside an array, i.e.&lt;br/&gt;
       {&quot;type&quot;:&quot;array&quot;, &quot;items&quot;: {&quot;type&quot;: &quot;array&quot;, &quot;items&quot;: &quot;long&quot;}}&lt;br/&gt;
   the function avro_resolved_array_writer_init() is called only once&lt;br/&gt;
   for the top level array. (This is the schema in the attached test program.)&lt;/p&gt;

&lt;p&gt;2. When I place an array inside a record, i.e.&lt;br/&gt;
       {&quot;type&quot; : &quot;record&quot;, &lt;br/&gt;
        &quot;name&quot; : &quot;myrecord&quot;, &lt;br/&gt;
        &quot;fields&quot; : [ &lt;/p&gt;
{ &quot;name&quot; : &quot;myfield&quot;, &quot;type&quot;:&quot;long&quot;}
&lt;p&gt;, &lt;br/&gt;
                     { &quot;name&quot; : &quot;myarray&quot;, &quot;type&quot;: &lt;/p&gt;
{ &quot;type&quot;:&quot;array&quot;, &quot;items&quot; : &quot;long&quot;}
&lt;p&gt; }&lt;br/&gt;
                   ] }&lt;br/&gt;
   the functions avro_resolved_record_writer_init(), initializes all&lt;br/&gt;
   of its children, and in that process calls avro_resolved_array_writer_init().&lt;/p&gt;

&lt;p&gt;3. When I place a record inside an array, i.e. &lt;br/&gt;
       {&quot;type&quot;:&quot;array&quot;, &quot;items&quot;: {&quot;type&quot; : &quot;record&quot;, &lt;br/&gt;
                                  &quot;name&quot; : &quot;myrecord&quot;, &lt;br/&gt;
                                  &quot;fields&quot; : [ &lt;/p&gt;
{ &quot;name&quot; : &quot;myfield&quot;, &quot;type&quot;:&quot;long&quot;}
&lt;p&gt;                                             ] } }&lt;br/&gt;
   The function avro_resolved_array_writer_init() is called but the function&lt;br/&gt;
   avro_resolved_record_writer_init() is not called. &lt;/p&gt;

&lt;p&gt;I think that the function avro_resolved_array_writer_init() should&lt;br/&gt;
recursively call the init function on its items, but I am not sure how&lt;br/&gt;
to go about doing this yet. This would be similar to how the function&lt;br/&gt;
avro_resolved_record_writer_init() recursively calls the init function&lt;br/&gt;
on its children.&lt;/p&gt;

&lt;p&gt;For comparision when resolving schemas, the function try_array() calls&lt;br/&gt;
avro_resolved_writer_new_memoized() recursively on the schemas of its&lt;br/&gt;
items.&lt;/p&gt;

&lt;p&gt;I would appreciate any ideas on how to go about recursively calling the &lt;br/&gt;
init functions on the array items, and also any comments on whether that &lt;br/&gt;
indeed is the way to fix the behavior I am seeing. &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Vivek&lt;/p&gt;</comment>
                            <comment id="13173504" author="dcreager" created="Tue, 20 Dec 2011 21:05:09 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I think that the function avro_resolved_array_writer_init() should&lt;br/&gt;
recursively call the init function on its items, but I am not sure how&lt;br/&gt;
to go about doing this yet. This would be similar to how the function&lt;br/&gt;
avro_resolved_record_writer_init() recursively calls the init function&lt;br/&gt;
on its children.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13173505" author="dcreager" created="Tue, 20 Dec 2011 21:08:04 +0000"  >&lt;p&gt;Vivek discovered that the resolved-writer array implementation wasn&apos;t initializing values correctly when they were appended to the array.  For arrays of primitives, this wasn&apos;t a problem, since the space for the array element would be overwritten by the new value once you called the appropriate set method.  For arrays of arrays, however, you&apos;d get some uninitialized memory for the sub-array.  I&apos;m attaching a patch that fixes this.  I&apos;ve also asked Vivek to make a couple of small modifications to his test program so that we can include it in the test suite, to help us avoid seeing this as a regression in the future.&lt;/p&gt;</comment>
                            <comment id="13173583" author="vnadkarni" created="Tue, 20 Dec 2011 22:51:03 +0000"  >&lt;p&gt;I have updated the test program, so that it can be included in the Avro C tests. It contains the following changes:  &lt;/p&gt;

&lt;p&gt;1. Exit with exit code EXIT_FAILURE, if the program fails to run to completion. &lt;/p&gt;

&lt;p&gt;2. Unlink the temporary binary file created by the program, if the program runs to completion. (If it fails, the binary file is not removed.)&lt;/p&gt;

&lt;p&gt;3. Include the Apache License boilerplate at the top of the file. &lt;/p&gt;

&lt;p&gt;I have named the file avro-984-test-v2.c to differentiate it from avro-984-test.c. However, feel free to rename the file appropriately before including it into the Avro tests. &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Vivek&lt;/p&gt;</comment>
                            <comment id="13176205" author="dcreager" created="Tue, 27 Dec 2011 15:15:24 +0000"  >&lt;p&gt;Committed to SVN.  Thanks, Vivek!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508001" name="avro-984-output.txt" size="1346" author="vnadkarni" created="Mon, 19 Dec 2011 23:35:59 +0000"/>
                            <attachment id="12508142" name="avro-984-test-v2.c" size="14198" author="vnadkarni" created="Tue, 20 Dec 2011 22:51:03 +0000"/>
                            <attachment id="12508000" name="avro-984-test.c" size="13254" author="vnadkarni" created="Mon, 19 Dec 2011 23:35:59 +0000"/>
                            <attachment id="12508002" name="avro-984-valgrind-output.txt" size="18211" author="vnadkarni" created="Mon, 19 Dec 2011 23:35:59 +0000"/>
                            <attachment id="12508129" name="resolved-writer.patch" size="567" author="dcreager" created="Tue, 20 Dec 2011 21:08:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Dec 2011 21:05:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80357</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
