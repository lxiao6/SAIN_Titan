<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:14:01 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2010-6-2+AND+created+%3C%3D+2010-6-9+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="14" total="14"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-557] Speed up one-time data decoding</title>
                <link>https://issues.apache.org/jira/browse/AVRO-557</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;There are big gains to be had in performance when using a BinaryDecoder and a GenericDatumReader just one time. This is due to the relatively expensive parsing and initialization that came with 1.3. Patch with example code and a Perf harness to follow.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466001">AVRO-557</key>
            <summary>Speed up one-time data decoding</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="kevinoliver">Kevin Oliver</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Wed, 2 Jun 2010 20:12:22 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:52 +0000</updated>
                            <resolved>Tue, 10 Aug 2010 22:20:31 +0000</resolved>
                                    <version>1.3.2</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12874777" author="kevinoliver" created="Wed, 2 Jun 2010 20:20:19 +0000"  >&lt;p&gt;We do a decent amount of 1 time usage of BinaryDecoders and GenericDatumReaders. When we upgraded to Avro 1.3 we saw significant regression in performance on decoding. A profiler showed the issue pretty quickly.&lt;/p&gt;

&lt;p&gt;Basically, it boiled down to 2 issue:&lt;br/&gt;
1) Having GenericDatumReaders always create the ResolvingDecoder is too expensive for one time usage.&lt;br/&gt;
2) BinaryDecoders now created a bunch of arrays and got more complicated, again significantly slowing down one time usage.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a patch that has a somewhat hacky workaround. I&apos;ve resurrected the BinaryDecoder code from v1.2 (more or less). I&apos;ve also created a GenericDatumReaderWithOptionalResolver class that basically forks GenericDatumReader to allow for reading directly from the supplied decoder. &lt;/p&gt;

&lt;p&gt;Running the newly added &apos;Perf -GoneTimeUse&apos; you can see the stark difference:&lt;br/&gt;
GenericReaderOneTimeUsage12Test: 2175 ms, 1.9147720770945649 million entries/sec.  0.008961491780473783 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUsage13Test: 13152 ms, 0.3167766318368232 million entries/sec.  0.0014825739399539307 million bytes/sec&lt;/p&gt;

&lt;p&gt;I don&apos;t believe we should commit the patch as is. But I&apos;d like some feedback on how to go from here to get this performance back.&lt;/p&gt;</comment>
                            <comment id="12874789" author="scott_carey" created="Wed, 2 Jun 2010 20:44:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;2) BinaryDecoders now created a bunch of arrays and got more complicated, again significantly slowing down one time usage.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Either configure the factory to have a small default buffer size (256 byte  will be fine), or use the DirectBinaryDecoder, which is basically the 1.2 decoder.  See &lt;br/&gt;
DecoderFactory, and its configureDecoderBufferSize(), configureDirectDecoder() and createXXX factory methods.&lt;br/&gt;
You can configure your own factory instance, the default factory does not allow you to configure it.&lt;/p&gt;

&lt;p&gt;The BinaryDecoder is optimized for the case where you are keeping one around and re-using it.  If possible, keep them around.  You can use something like a ThreadLocal&amp;lt;BinaryDecoder&amp;gt; to make this easier.  DirectBinaryDecoder will have smaller initialization costs, but will be about 1.5x to 5x slower when streaming large amounts of data.&lt;/p&gt;

&lt;p&gt;If you aren&apos;t reading from a stream, but are reading from a byte[]. the new decoder will work without creating its own array as well if you use the createBinaryDecoder(byte[], .  .  . ) factory methods.  You can reuse a decoder and reset its state from these as well. &lt;/p&gt;</comment>
                            <comment id="12874795" author="scott_carey" created="Wed, 2 Jun 2010 20:53:51 +0000"  >&lt;p&gt;note that &lt;br/&gt;
&apos;new BinaryDecoder()&apos;&lt;/p&gt;

&lt;p&gt;is deprecated now as well.  The factory allows you to control the performance behavior better.&lt;/p&gt;

&lt;p&gt;I suspect that if you changed the 1.3 &apos;one time&apos; test from:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericReaderOneTimeUsage13Test &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericReaderOneTimeUsageTest {
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GenericReaderOneTimeUsage13Test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;GenericReaderOneTimeUsage13Test&quot;&lt;/span&gt;);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; DatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getReader() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;(writerSchema);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Decoder getDecoder() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; DecoderFactory.defaultFactory().createBinaryDecoder(data, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; DecoderFactory factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DecoderFactory();
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {
    factory.configureDecoderBufferSize(256);
  }
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericReaderOneTimeUsage13Test &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericReaderOneTimeUsageTest {
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GenericReaderOneTimeUsage13Test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;GenericReaderOneTimeUsage13Test&quot;&lt;/span&gt;);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; DatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getReader() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;(writerSchema);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Decoder getDecoder() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; factory.createBinaryDecoder(data, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That the performance would be much better.&lt;/p&gt;</comment>
                            <comment id="12874797" author="kevinoliver" created="Wed, 2 Jun 2010 21:02:47 +0000"  >&lt;p&gt;Thanks Scott.&lt;/p&gt;

&lt;p&gt;Unfortunately, I don&apos;t see any improvement with that. Here&apos;s a revised 1.3 test:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericReaderOneTimeUsage13Test &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericReaderOneTimeUsageTest {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DecoderFactory factory;
    
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GenericReaderOneTimeUsage13Test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;GenericReaderOneTimeUsage13Test&quot;&lt;/span&gt;);
      factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DecoderFactory().configureDecoderBufferSize(256);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; DatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getReader() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;(writerSchema);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Decoder getDecoder() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; factory.createBinaryDecoder(data, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;GenericReaderOneTimeUsage12Test: 2108 ms, 1.9756520386699568 million entries/sec.  0.00924642139783131 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUsage13Test: 13197 ms, 0.31569739270247654 million entries/sec.  0.0014775228987635406 million bytes/sec&lt;/p&gt;


&lt;p&gt;I also tried having the factory configured using direct decoders and a small buffer and the results were about the same:&lt;br/&gt;
GenericReaderOneTimeUsage13Test: 12738 ms, 0.32707876157061233 million entries/sec.  0.0015307898357438956 million bytes/sec&lt;/p&gt;


&lt;p&gt;As far as storing them in ThreadLocals, I have not tested that internally and I&apos;m not in love with that approach. What about adding another option onto DecoderFactory for one-time use?&lt;/p&gt;</comment>
                            <comment id="12874847" author="scott_carey" created="Wed, 2 Jun 2010 23:09:57 +0000"  >&lt;p&gt;Interesting.  DirectBinaryDecoder is the same as the 1.2 decoders, so I suspect that the schema parsing from new GenericDatumReader is the main culprit.&lt;/p&gt;

&lt;p&gt;What if you use your GenericDatumReaderWithOptionalResolver but the 1.3 BinaryDecoder.  Something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericReaderOneTimeUsage13Test &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericReaderOneTimeUsageTest {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DecoderFactory factory;
    
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GenericReaderOneTimeUsage13Test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;GenericReaderOneTimeUsage13Test&quot;&lt;/span&gt;);
      factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DecoderFactory().configureDecoderBufferSize(256);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; DatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getReader() {
      GenericDatumReaderWithOptionalResolver&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReaderWithOptionalResolver&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;(writerSchema);
      reader.setUseResolvingDecoder(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; reader;
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Decoder getDecoder() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; factory.createBinaryDecoder(data, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There is room for improvement in how GenericDatumReader works with resolvers.  &amp;#8211; we could cache them per (expected, actual) schema pair, for example, to avoid too much parsing.  But that won&apos;t be free either, equals() on a Schema is not trivial.&lt;/p&gt;</comment>
                            <comment id="12874867" author="kevinoliver" created="Wed, 2 Jun 2010 23:54:25 +0000"  >&lt;p&gt;Nice. Big improvement.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericReaderOneTimeUsageDirectDecoderNoResolverTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericReaderOneTimeUsageTest {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DecoderFactory factory;
    
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GenericReaderOneTimeUsageDirectDecoderNoResolverTest() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;GenericReaderOneTimeUsageDirectDecoderNoResolverTest&quot;&lt;/span&gt;);
      factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DecoderFactory().configureDecoderBufferSize(256);
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; DatumReader&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getReader() {
      GenericDatumReaderWithOptionalResolver&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericDatumReaderWithOptionalResolver&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;(writerSchema);
      reader.setUseResolvingDecoder(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; reader;
    }
    @Override &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Decoder getDecoder() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; factory.createBinaryDecoder(data, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;GenericReaderOneTimeUsage12Test: 1899 ms, 2.1932087119840316 million entries/sec.  0.010264627357179553 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUsage13Test: 13182 ms, 0.3160544030781795 million entries/sec.  0.0014791937741568462 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUsageDirectDecoderNoResolverTest: 902 ms, 4.61638520363505 million entries/sec.  0.02160554697489103 million bytes/sec&lt;/p&gt;


&lt;p&gt;But... Given what you said, shouldn&apos;t GenericReaderOneTimeUsageDirectDecoderNoResolverTest have the same performance as GenericReaderOneTimeUsage12Test? Mind you, I&apos;m happy with this improvement, just trying to see what the difference is.&lt;/p&gt;

&lt;p&gt;Ok, so it looks like one half of this issue is resolved &amp;#8211; thanks Scott. On to GenericDatumReader. I&apos;d prefer to not do caching &amp;#8211; as you say, the hashes on schemas are expensive. (I did separately push for schema&apos;s to be immutable so that their hashcodes could be memoized, but that hasn&apos;t been done yet). &lt;/p&gt;

&lt;p&gt;I dug into this change a bit, and looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-388&quot; title=&quot;Using ResolvingDecoder in GenericDatumReader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-388&quot;&gt;&lt;del&gt;AVRO-388&lt;/del&gt;&lt;/a&gt; added ResolvingDecoders to GenericDatumReader, and if you look, in version 1 of the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12431862/AVRO-388.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12431862/AVRO-388.patch&lt;/a&gt; the resolver was optional (only used when the actual and expected schemas differed). &lt;/p&gt;</comment>
                            <comment id="12874916" author="scott_carey" created="Thu, 3 Jun 2010 02:15:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;But... Given what you said, shouldn&apos;t GenericReaderOneTimeUsageDirectDecoderNoResolverTest have the same performance as GenericReaderOneTimeUsage12Test? Mind you, I&apos;m happy with this improvement, just trying to see what the difference is.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The test above is not using a DirectBinaryDecoder, but a buffered one with a buffer size of 256 bytes.  To test the DirectBinaryDecoder you would have to call configureDirectDecoder(true) on the factory.&lt;br/&gt;
So the above is the new binary decoder (which avoids the slow InputStream API as much as possible, preferring array access), but with a tiny buffer so that lots of allocations won&apos;t hurt.&lt;/p&gt;

&lt;p&gt;However the above test is creating the decoder on a byte[], which avoids then InputStream entirely.  If your use case wraps around an InputStream it will be slower than the above because it will create that 256 byte buffer each time.&lt;/p&gt;</comment>
                            <comment id="12875168" author="kevinoliver" created="Thu, 3 Jun 2010 15:59:19 +0000"  >&lt;p&gt;Yeah. I had noticed my mistaken naming a few hours later. Interesting. &lt;/p&gt;

&lt;p&gt;Where does the buffer size get used though? I&apos;m looking at DecoderFactory.createBinaryDecoder(byte[], int, int, BinaryDecoder) and it never passes the DecoderFactory&apos;s binaryDecoderBufferSize over to the BinaryDecoder. &lt;/p&gt;</comment>
                            <comment id="12875234" author="scott_carey" created="Thu, 3 Jun 2010 18:40:43 +0000"  >&lt;p&gt;DecoderFactory.createBinaryDecoder(byte[], int, int, BinaryDecoder)&lt;br/&gt;
uses the given byte[] AS the buffer, so it is the most optimal.&lt;/p&gt;

&lt;p&gt;DecoderFactory.createBinaryDecoder(InputStream, BinaryDecoder)&lt;br/&gt;
uses the internal read buffer of size binaryDecoderBufferSize, filling it from the InputStream.   If a user must interleave reads on the given InputStream between some other code and the BinaryDecoder they must either have that other code use the InputStream from BinaryDecoder.inputStream() to compensate for the &apos;read-ahead&apos; that the buffering causes, or use the slower DirectBinaryDecoder which only takes the absolute minimum number of bytes from the InputStream.&lt;/p&gt;

&lt;p&gt;Note that, even if configured to use the DirectBinaryDecoder, it will only do so if a user is attempting to use a factory method that reads from an input stream.  If reading from a byte[] it always uses the more optimal BinaryDecoder. &lt;/p&gt;</comment>
                            <comment id="12895855" author="cutting" created="Thu, 5 Aug 2010 22:45:25 +0000"  >&lt;p&gt;&amp;gt; hashes on schemas are expensive. (I did separately push for schema&apos;s to be immutable so that their hashcodes could be memoized, but that hasn&apos;t been done yet).&lt;/p&gt;

&lt;p&gt;Schema&apos;s are mostly immutable.  You can add properties, and there&apos;s setFields(), which is called once during the construction of a record.  In the latter case, it&apos;s an error to use the schema in any way before setFields() has been called.  In the former, we could reset the memoized hashCode whenever a property is added.  So I think we could reasonably memoize Schema#hashCode(), and it could be a good performance win.&lt;/p&gt;

&lt;p&gt;But perhaps we shouldn&apos;t call hashCode() anyway, but instead use an identity map.  If we used Google collections we could have a weak, identity cache of the form Map&amp;lt;Schema,Map&amp;lt;Schema,Resolver&amp;gt;&amp;gt;.  If someone adds a property to the schema after its used that changed what the resolver does then they&apos;d have trouble, but (a) they shouldn&apos;t do that; and (b) the resolver doesn&apos;t currently use any user-defined schema properties anyway, and I don&apos;t expect it ever will.&lt;/p&gt;

&lt;p&gt;Would identity work for your use cases, Kevin?  Do you have a table of schemas somewhere, or are you parsing them anew each time?&lt;/p&gt;</comment>
                            <comment id="12896918" author="cutting" created="Tue, 10 Aug 2010 16:04:05 +0000"  >&lt;p&gt;Here&apos;s a patch that caches resolvers in a weak, concurrent, identity hash map.&lt;/p&gt;

&lt;p&gt;Before:&lt;/p&gt;

&lt;p&gt;GenericReaderOneTimeUsageTest: 20208 ms, 0.2061803736078433 million entries/sec.  9.649627469945864E-4 million bytes/sec&lt;/p&gt;

&lt;p&gt;After:&lt;/p&gt;

&lt;p&gt;GenericReaderOneTimeUsageTest: 9513 ms, 0.4379442048677028 million entries/sec.  0.002049660865215458 million bytes/sec&lt;/p&gt;

&lt;p&gt;So caching resolvers gets some but not all of the speed back.&lt;/p&gt;</comment>
                            <comment id="12896984" author="cutting" created="Tue, 10 Aug 2010 17:52:17 +0000"  >&lt;p&gt;Okay, here&apos;s a winner.  This one caches the entire ResolvingDecoder, not just its resolver.&lt;/p&gt;

&lt;p&gt;GenericReaderOneTimeUsageTest: 1793 ms, 2.3228573849749345 million entries/sec.  0.010871407417979413 million bytes/sec&lt;/p&gt;

&lt;p&gt;Kevin, can you confirm whether an identity-based cache of schemas works for your use case?  If not, we could try this with an equals-hash and perhaps optimize Schema#hashCode().&lt;/p&gt;</comment>
                            <comment id="12897001" author="scott_carey" created="Tue, 10 Aug 2010 19:05:53 +0000"  >&lt;p&gt;Actually that fixes it.&lt;/p&gt;

&lt;p&gt;Perf.java had some inconsistencies.  I have corrected those and refactored the class a little.  There is still some work to make it more consistent but the measurements for GenericReader tests are accurate with some changes.&lt;/p&gt;

&lt;p&gt;I am working on a patch that includes those changes and measures the performance drop when Decoders and DatumReaders are not re-used.&lt;/p&gt;

&lt;p&gt;I am also considering removing the Google Collections change for now to simplify this.  &lt;/p&gt;

&lt;p&gt;I think we may want to include that later, in the form of Google Guava since Google Collections has merged into that, but should we leave that for another JIRA?.&lt;/p&gt;


</comment>
                            <comment id="12897023" author="cutting" created="Tue, 10 Aug 2010 19:49:15 +0000"  >&lt;p&gt;The google-collections based version causes test-tools to hang running the tethering test, a bit of multi-threaded Avro.  There could well be bugs in the tethering code that use of google&apos;s concurrent hashmap somehow brings out, but I didn&apos;t take the time to debug that.&lt;/p&gt;

&lt;p&gt;Google collections 1.0 is also incompatible with checkstyle, which needs google-collections 0.9.  So, until checkstyle 5.1 is available in a maven repo, if we use google collections, then we need to use 0.9.&lt;/p&gt;

&lt;p&gt;Here&apos;s a new version that doesn&apos;t rely on google collections for the above reasons.  The tethering test passes and checkstyle works, but it&apos;s a bit slower:&lt;/p&gt;

&lt;p&gt;GenericReaderOneTimeUsageTest: 2264 ms, 1.839572825273033 million entries/sec.  0.008609545204085958 million bytes/sec&lt;/p&gt;

&lt;p&gt;I also tried using an equals hashmap, and things slow to around 3800 milliseconds.  Also, folks should not directly compare my timings with Kevin&apos;s: my laptop seems about 35% slower than whatever Kevin uses.  If that&apos;s right, this latest version should be a bit faster than 1.2.&lt;/p&gt;</comment>
                            <comment id="12897024" author="scott_carey" created="Tue, 10 Aug 2010 20:15:46 +0000"  >&lt;p&gt;The one that fixed it for me is not your second one, but the first one you posted.&lt;/p&gt;


&lt;p&gt;Don&apos;t trust the current performance numbers from the test.  I&apos;ll upload a partial patch that only includes enhancements to Perf.java with better measurements right away.&lt;/p&gt;

&lt;p&gt;For me, using your &lt;em&gt;first&lt;/em&gt; patch that only caches the resolver, I get:&lt;/p&gt;

&lt;p&gt;GenericReaderTest: 4413 ms, 0.9439455178163628 million entries/sec.  36.63489596549099 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseReaderTest: 4563 ms, 0.9130533872713805 million entries/sec.  35.44198664989503 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseDecoderTest: 4476 ms, 0.9307708856028631 million entries/sec.  36.128051198318644 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseTest: 4644 ms, 0.8970147804525915 million entries/sec.  34.812096233011566 million bytes/sec&lt;/p&gt;</comment>
                            <comment id="12897027" author="scott_carey" created="Tue, 10 Aug 2010 20:21:14 +0000"  >&lt;p&gt;partial patch with updates to Perf.java for measuring performance impact.&lt;/p&gt;</comment>
                            <comment id="12897044" author="cutting" created="Tue, 10 Aug 2010 21:14:05 +0000"  >&lt;p&gt;Here&apos;s a new version that incorporates Scott&apos;s improved benchmarks.  It also uses a ThreadLocal for the cache instead of synchronization, for better thread scalability.&lt;/p&gt;

&lt;p&gt;Before:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;GenericReaderTest: 9267 ms, 0.4496015202175007 million entries/sec.  17.44851002390717 million bytes/sec
GenericReaderOneTimeUseReaderTest: 20250 ms, 0.2057450903019226 million entries/sec.  7.985813094572571 million bytes/sec
GenericReaderOneTimeUseDecoderTest: 9712 ms, 0.4289618484945668 million entries/sec.  16.649207221055114 million bytes/sec
GenericReaderOneTimeUseTest: 22072 ms, 0.18876675392721157 million entries/sec.  7.325522819121037 million bytes/sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;After: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;GenericReaderTest: 1333 ms, 3.123353146179524 million entries/sec.  121.19457294433288 million bytes/sec
GenericReaderOneTimeUseReaderTest: 2132 ms, 1.9538027524398502 million entries/sec.  75.83652675628883 million bytes/sec
GenericReaderOneTimeUseDecoderTest: 1410 ms, 2.954731932450708 million entries/sec.  114.68139742190509 million bytes/sec
GenericReaderOneTimeUseTest: 2064 ms, 2.0183186700653284 million entries/sec.  78.33658376373683 million bytes/sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12897050" author="h2o" created="Tue, 10 Aug 2010 21:36:35 +0000"  >&lt;p&gt;(just a lurker, sorry to interrupt..)&lt;/p&gt;

&lt;p&gt;Doug, as much as I like performance (really &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;m afraid using ThreadLocals without any exposed lifecycle control only introduces longer-than-necessary garbage retention, file/memory/thread leaks due to un-undeployable webapps and all sorts of other headaches. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12897052" author="cutting" created="Tue, 10 Aug 2010 21:42:55 +0000"  >&lt;p&gt;&amp;gt; I&apos;m afraid using ThreadLocals without any exposed lifecycle control only introduces longer-than-necessary garbage retention&lt;/p&gt;

&lt;p&gt;The ThreadLocal here contains only weak references, so no garbage should be retained longer than necessary.  A 10x performance improvement is not something we should ignore lightly.&lt;/p&gt;</comment>
                            <comment id="12897057" author="scott_carey" created="Tue, 10 Aug 2010 22:03:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Performance results for all GenericReader tests using updated test suite.&lt;/p&gt;

&lt;p&gt;Before:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;GenericReaderTest: 4316 ms, 0.9652518597286222 million entries/sec.  37.46562600631532 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseReaderTest: 12438 ms, 0.33496174128331707 million entries/sec.  13.002931005679518 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseDecoderTest: 4541 ms, 0.9175101858715102 million entries/sec.  35.60243412710682 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseTest: 12994 ms, 0.3206316809649748 million entries/sec.  12.444687860652925 million bytes/sec&lt;br/&gt;
GenericReaderTestWithDefaultTest: 18814 ms, 0.22144625531538778 million entries/sec.  8.594070597799654 million bytes/sec&lt;br/&gt;
GenericReaderTestWithOutOfOrderTest: 13612 ms, 0.3060743396647221 million entries/sec.  11.87857138764328 million bytes/sec&lt;br/&gt;
GenericReaderTestWithPromotionTest: 13968 ms, 0.29828822008881134 million entries/sec.  11.577040834808965 million bytes/sec&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;GenericReaderTest: 1038 ms, 4.010383780204211 million entries/sec.  155.65178722683382 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseReaderTest: 1315 ms, 3.1672704992679512 million entries/sec.  122.93213306717061 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseDecoderTest: 1089 ms, 3.82440681077608 million entries/sec.  148.44554591766487 million bytes/sec&lt;br/&gt;
GenericReaderOneTimeUseTest: 1278 ms, 3.258017977159077 million entries/sec.  126.44808401330889 million bytes/sec&lt;br/&gt;
GenericReaderTestWithDefaultTest: 2281 ms, 1.826564690595329 million entries/sec.  70.89078839731388 million bytes/sec&lt;br/&gt;
GenericReaderTestWithOutOfOrderTest: 1313 ms, 3.1731271581301055 million entries/sec.  123.14764465849947 million bytes/sec&lt;br/&gt;
GenericReaderTestWithPromotionTest: 1627 ms, 2.559650956129309 million entries/sec.  99.33645049856828 million bytes/sec&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;About a 5x to 9x performance improvement.&lt;/p&gt;

&lt;p&gt;A quick summary of changes to Perf.java &amp;#8211; Changed all GenericReader tests to inherit from one parent class.  GenericReader tests write a series of objects, other tests write an array of Records.  All GenericReader tests should be consistent now and it should be much easier to add more variations later.  The MB/sec measurement was broken before, it should be correct now.&lt;/p&gt;
</comment>
                            <comment id="12897063" author="cutting" created="Tue, 10 Aug 2010 22:20:31 +0000"  >&lt;p&gt;I just committed this.  Thanks, Scott!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451705" name="AVRO-557-partial.patch" size="10366" author="scott_carey" created="Tue, 10 Aug 2010 20:21:14 +0000"/>
                            <attachment id="12451712" name="AVRO-557.patch" size="18384" author="cutting" created="Tue, 10 Aug 2010 21:14:04 +0000"/>
                            <attachment id="12451703" name="AVRO-557.patch" size="11165" author="cutting" created="Tue, 10 Aug 2010 19:49:15 +0000"/>
                            <attachment id="12451692" name="AVRO-557.patch" size="6452" author="cutting" created="Tue, 10 Aug 2010 17:52:17 +0000"/>
                            <attachment id="12451682" name="AVRO-557.patch" size="5412" author="cutting" created="Tue, 10 Aug 2010 16:04:05 +0000"/>
                            <attachment id="12446171" name="AVRO-557.patch" size="32132" author="kevinoliver" created="Wed, 2 Jun 2010 20:20:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Jun 2010 20:44:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e11z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79933</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-558] Java server serializing error union schema branch number incorrectly for single-branch unions</title>
                <link>https://issues.apache.org/jira/browse/AVRO-558</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;In my testing of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2400&quot; title=&quot;new connector for Avro RPC access to HBase cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2400&quot;&gt;&lt;del&gt;HBASE-2400&lt;/del&gt;&lt;/a&gt;, I am seeing a branch index of 1 turn up when 0 should have been encoded for messages with a single branch in their union of error schemas. See attached protocol definition, Java server, and Python client which reproduces the error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466076">AVRO-558</key>
            <summary>Java server serializing error union schema branch number incorrectly for single-branch unions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 11:11:24 +0000</created>
                <updated>Wed, 25 Aug 2010 19:01:47 +0000</updated>
                            <resolved>Thu, 3 Jun 2010 17:53:47 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12875064" author="hammer" created="Thu, 3 Jun 2010 11:27:04 +0000"  >&lt;ul&gt;
	&lt;li&gt;Protocol definition: &lt;a href=&quot;http://github.com/hammer/avro-debug/blob/trunk/debug/src/fake.avpr&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/hammer/avro-debug/blob/trunk/debug/src/fake.avpr&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Fake server: &lt;a href=&quot;http://github.com/hammer/avro-debug/blob/trunk/debug/src/FakeServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/hammer/avro-debug/blob/trunk/debug/src/FakeServer.java&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Fake client: &lt;a href=&quot;http://github.com/hammer/avro-debug/blob/trunk/debug/src/fake_client.py&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/hammer/avro-debug/blob/trunk/debug/src/fake_client.py&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12875066" author="hammer" created="Thu, 3 Jun 2010 11:33:50 +0000"  >&lt;p&gt;Something may be borked in SpecificResponder#writeError for single-branch unions, which are admittedly a funny case, but I can&apos;t debug that craziness.&lt;/p&gt;</comment>
                            <comment id="12875220" author="hammer" created="Thu, 3 Jun 2010 17:53:47 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-447&quot; title=&quot;document protocol system error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-447&quot;&gt;&lt;del&gt;AVRO-447&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12457931">AVRO-447</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12466080">AVRO-559</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e127:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79934</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-559] Handle read_union error where the list index of the union branch to follow exceeds the size of the union schema</title>
                <link>https://issues.apache.org/jira/browse/AVRO-559</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Some bugs can cause this code path to be followed, and we should be intelligent about the error in Avro.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466080">AVRO-559</key>
            <summary>Handle read_union error where the list index of the union branch to follow exceeds the size of the union schema</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 11:26:16 +0000</created>
                <updated>Mon, 14 Jun 2010 01:37:08 +0000</updated>
                            <resolved>Fri, 4 Jun 2010 00:59:07 +0000</resolved>
                                                    <fixVersion>1.3.3</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12875397" author="hammer" created="Fri, 4 Jun 2010 00:55:24 +0000"  >&lt;p&gt;Hopefully we never hit this code path...&lt;/p&gt;</comment>
                            <comment id="12875399" author="hammer" created="Fri, 4 Jun 2010 00:57:46 +0000"  >&lt;p&gt;Committed to trunk in revision 951231.&lt;/p&gt;</comment>
                            <comment id="12875400" author="hammer" created="Fri, 4 Jun 2010 00:59:07 +0000"  >&lt;p&gt;Merged into branch-1.3 with revision 951232.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12466076">AVRO-558</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446310" name="AVRO-559.patch" size="658" author="hammer" created="Fri, 4 Jun 2010 00:55:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94868</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e12f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-560] Python impl should include system errors in every protocol</title>
                <link>https://issues.apache.org/jira/browse/AVRO-560</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12466110">AVRO-560</key>
            <summary>Python impl should include system errors in every protocol</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hammer">Jeff Hammerbacher</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 18:01:36 +0000</created>
                <updated>Mon, 14 Jun 2010 01:37:08 +0000</updated>
                            <resolved>Fri, 4 Jun 2010 00:27:53 +0000</resolved>
                                                    <fixVersion>1.3.3</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12875280" author="hammer" created="Thu, 3 Jun 2010 20:17:13 +0000"  >&lt;p&gt;Shazam, patch attached. No new tests, as the existing protocol tests should exercise this path. I suppose tests should be added to the RPC interop, though. Just filed &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-561&quot; title=&quot;Add RPC interop test that exercises error and system error code path.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-561&quot;&gt;AVRO-561&lt;/a&gt; for those tests though, as I&apos;m but one man.&lt;/p&gt;</comment>
                            <comment id="12875281" author="hammer" created="Thu, 3 Jun 2010 20:17:35 +0000"  >&lt;p&gt;Going to get this into 1.3.3.&lt;/p&gt;</comment>
                            <comment id="12875376" author="hammer" created="Fri, 4 Jun 2010 00:06:15 +0000"  >&lt;p&gt;Committed to trunk in revision 951219.&lt;/p&gt;</comment>
                            <comment id="12875389" author="hammer" created="Fri, 4 Jun 2010 00:27:53 +0000"  >&lt;p&gt;Merged into branch-1.3 with revision 951224.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12457931">AVRO-447</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446279" name="AVRO-560.patch" size="6592" author="hammer" created="Thu, 3 Jun 2010 20:17:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e12n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79936</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-561] Add RPC interop test that exercises error and system error code path.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-561</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12466122">AVRO-561</key>
            <summary>Add RPC interop test that exercises error and system error code path.</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pwendell">Patrick Wendell</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 20:16:34 +0000</created>
                <updated>Tue, 13 Dec 2011 19:06:53 +0000</updated>
                                                                            <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12457931">AVRO-447</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12466711">AVRO-573</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e12v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79937</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-562] ruby side has busted client handshaking</title>
                <link>https://issues.apache.org/jira/browse/AVRO-562</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Ruby side has the same busted CLIENT handshake problem the python side did. Testing is hard at the moment.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466161">AVRO-562</key>
            <summary>ruby side has busted client handshaking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmhodges">Jeff Hodges</assignee>
                                    <reporter username="jmhodges">Jeff Hodges</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jun 2010 05:51:29 +0000</created>
                <updated>Mon, 14 Jun 2010 01:37:08 +0000</updated>
                            <resolved>Fri, 4 Jun 2010 06:42:09 +0000</resolved>
                                    <version>1.3.2</version>
                                    <fixVersion>1.3.3</fixVersion>
                                    <component>ruby</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12875493" author="jmhodges" created="Fri, 4 Jun 2010 05:54:08 +0000"  >&lt;p&gt;Ugggggh.&lt;/p&gt;</comment>
                            <comment id="12875509" author="jmhodges" created="Fri, 4 Jun 2010 06:42:09 +0000"  >&lt;p&gt;Committed in r951298.&lt;/p&gt;</comment>
                            <comment id="12875620" author="hammer" created="Fri, 4 Jun 2010 14:57:58 +0000"  >&lt;p&gt;(sorry)&lt;/p&gt;</comment>
                            <comment id="12875696" author="jmhodges" created="Fri, 4 Jun 2010 18:33:31 +0000"  >&lt;p&gt;Not your fault. Should have seen this when I translated it and made a ticket for both.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12465180">AVRO-548</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446327" name="AVRO-562.patch" size="1378" author="jmhodges" created="Fri, 4 Jun 2010 05:59:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Jun 2010 14:57:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94871</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e133:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-563] Reduce startup time for tool.rb rpcreceive</title>
                <link>https://issues.apache.org/jira/browse/AVRO-563</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When running the RPC interop tests for the 1.3.3 release, I noticed that the Ruby implementation is taking around 15s to start the tool.rb rpcreceive server and write the port to stdout. I don&apos;t know where this high latency is coming from, but I think we should investigate, as forcing the RPC interop tests to wait that long between server startup and client send will make the tests last far longer than they need to last.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466271">AVRO-563</key>
            <summary>Reduce startup time for tool.rb rpcreceive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Jun 2010 02:26:26 +0000</created>
                <updated>Mon, 7 Jun 2010 03:49:34 +0000</updated>
                                                                            <component>ruby</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12876115" author="jmhodges" created="Mon, 7 Jun 2010 03:44:17 +0000"  >&lt;p&gt;I&apos;m totally unable to reproduce this. Could you show me what you were doing?&lt;/p&gt;</comment>
                            <comment id="12876116" author="hammer" created="Mon, 7 Jun 2010 03:49:04 +0000"  >&lt;p&gt;Just running the rpc interop tests on an m1.small instance up in the cloud (AWS). You can see the dependencies I installed at &lt;a href=&quot;https://cwiki.apache.org/confluence/display/AVRO/How+To+Release#HowToRelease-UsingAWSforAvroBuildandRelease&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/AVRO/How+To+Release#HowToRelease-UsingAWSforAvroBuildandRelease&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12876117" author="hammer" created="Mon, 7 Jun 2010 03:49:34 +0000"  >&lt;p&gt;Also: repeats reliably across AWS instances&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jun 2010 03:44:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94872</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e13b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79939</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-564] Ruby tests should not leave lang/ruby/data.avr file hanging around</title>
                <link>https://issues.apache.org/jira/browse/AVRO-564</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The Ruby tests should clean up after themselves; in particular, the file lang/ruby/data.avr is left over when running the tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466272">AVRO-564</key>
            <summary>Ruby tests should not leave lang/ruby/data.avr file hanging around</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Jun 2010 02:34:12 +0000</created>
                <updated>Mon, 7 Jun 2010 03:50:31 +0000</updated>
                                                                            <component>ruby</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12876118" author="jmhodges" created="Mon, 7 Jun 2010 03:50:31 +0000"  >&lt;p&gt;Cleaning up data.avr&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446457" name="AVRO-564.patch" size="2144" author="jmhodges" created="Mon, 7 Jun 2010 03:50:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jun 2010 03:50:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94873</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e13j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-565] Investigate Python encoding error</title>
                <link>https://issues.apache.org/jira/browse/AVRO-565</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Tyler B is seeing the following encoding error: &lt;a href=&quot;http://avro.pastebin.com/b4HSYjCz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://avro.pastebin.com/b4HSYjCz&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466274">AVRO-565</key>
            <summary>Investigate Python encoding error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Jun 2010 03:01:43 +0000</created>
                <updated>Tue, 25 Sep 2012 21:22:59 +0000</updated>
                            <resolved>Mon, 16 Apr 2012 21:16:07 +0000</resolved>
                                                                    <component>python</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12875980" author="hammer" created="Sun, 6 Jun 2010 03:02:57 +0000"  >&lt;p&gt;Copying the error here in case the pastebin expires:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/ipc.py&quot;&lt;/span&gt;, line 134, in request
    self.write_call_request(message_name, request_datum, buffer_encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/ipc.py&quot;&lt;/span&gt;, line 181, in write_call_request
    self.write_request(message.request, request_datum, encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/ipc.py&quot;&lt;/span&gt;, line 185, in write_request
    datum_writer.write(request_datum, encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/io.py&quot;&lt;/span&gt;, line 720, in write
    self.write_data(self.writers_schema, datum, encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/io.py&quot;&lt;/span&gt;, line 755, in write_data
    self.write_record(writers_schema, datum, encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/io.py&quot;&lt;/span&gt;, line 843, in write_record
    self.write_data(field.type, datum.get(field.name), encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/io.py&quot;&lt;/span&gt;, line 753, in write_data
    self.write_union(writers_schema, datum, encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/io.py&quot;&lt;/span&gt;, line 833, in write_union
    self.write_data(writers_schema.schemas[index_of_schema], datum, encoder)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/io.py&quot;&lt;/span&gt;, line 733, in write_data
    encoder.write_utf8(datum)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/lib/python2.6/site-packages/avro/io.py&quot;&lt;/span&gt;, line 328, in write_utf8
    datum = datum.encode(&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;)
UnicodeDecodeError: &lt;span class=&quot;code-quote&quot;&gt;&apos;ascii&apos;&lt;/span&gt; codec can&apos;t decode &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; 0xe2 in position 6: ordinal not in range(128)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12876044" author="philip" created="Sun, 6 Jun 2010 13:53:27 +0000"  >&lt;p&gt;What&apos;s the client call?  What&apos;s the value of datum?&lt;/p&gt;

&lt;p&gt;I believe you see this error when you pass a string that python refuses to encode as unicode.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; &quot;\xe2&quot;.encode(&quot;utf-8&quot;)&lt;br/&gt;
Traceback (most recent call last):&lt;br/&gt;
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1, in &amp;lt;module&amp;gt;&lt;br/&gt;
UnicodeDecodeError: &apos;ascii&apos; codec can&apos;t decode byte 0xe2 in position 0: ordinal not in range(128)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="12877886" author="rtyler" created="Fri, 11 Jun 2010 17:53:54 +0000"  >&lt;p&gt;I found the source of our issues, it appears we have some places where UTF-8 encoded str objects are floating around (with utf-8 code-points in them) that were failing to &quot;re-encode&quot; to UTF-8&lt;/p&gt;

&lt;p&gt;The solution we&apos;re working on is removing encoded strings in the code base and just using unicode objects for everything, I think we can close this ticket&lt;/p&gt;</comment>
                            <comment id="13239381" author="russell.jurney" created="Tue, 27 Mar 2012 11:20:42 +0000"  >&lt;p&gt;Oh man, this has been KILLING me for a couple weeks.&lt;/p&gt;

&lt;p&gt;What am I to do?  What is the status of this?  No matter what I do to the input field, python avro cannot write the field.&lt;/p&gt;

&lt;p&gt;Even though I do this: subject.decode(charset).encode(&apos;utf-8&apos;)&lt;/p&gt;

&lt;p&gt;The write still dies.  Oh man this has been KILLING me.  Help &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13239391" author="russell.jurney" created="Tue, 27 Mar 2012 11:47:22 +0000"  >&lt;p&gt;When I change io.py&apos;s BinaryEncoder.write_utf8 to comment out the re-encoding to UTF-8, my problem goes away:&lt;/p&gt;

&lt;p&gt;  def write_utf8(self, datum):&lt;br/&gt;
    datum = datum#.encode(&quot;utf-8&quot;)&lt;br/&gt;
    self.write_bytes(datum)&lt;/p&gt;

&lt;p&gt;However, with the original code, not encoding to UTF-8 before writing the string field also fails.  So I&apos;m not sure what to do here.  Is UTF-8 a requirement for Avro string fields?  How should I fix this?&lt;/p&gt;</comment>
                            <comment id="13239401" author="russell.jurney" created="Tue, 27 Mar 2012 12:09:18 +0000"  >&lt;p&gt;On further reflection...&lt;/p&gt;

&lt;p&gt;I have changed my code to have all strings become Unicode objects, which Avro can write: decode(mystring, mycharset)  &lt;/p&gt;

&lt;p&gt;Before I was using UTF-8 encoded strings: mystring.decode(mycharset).encode(&apos;utf-8)&lt;/p&gt;

&lt;p&gt;As outlined above, this was resulting in double UTF-age.  Suggest that the API/docs should only accept Unicode objects, not strings, since strings do not work well.&lt;/p&gt;</comment>
                            <comment id="13239444" author="tebeka" created="Tue, 27 Mar 2012 13:31:21 +0000"  >&lt;p&gt;Russel, can you provide an example input that causes the problem? Even better will be an example script that reproduces the problem.&lt;/p&gt;</comment>
                            <comment id="13253949" author="russell.jurney" created="Sat, 14 Apr 2012 02:49:33 +0000"  >&lt;p&gt;Miki, the problem is reproduced here: &lt;a href=&quot;https://gist.github.com/2381748&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gist.github.com/2381748&lt;/a&gt; and in an attached file.&lt;/p&gt;

&lt;p&gt;In my use case, some emails don&apos;t contain charsets... so I can&apos;t convert them into unicode objects via decode() to make them play well with Avro. So Avro dies. I&apos;d rather it throw an exception I can catch, and then continue to write the record, than stop mid-record.  Either that, or I would like the ability to remove the last Avro record written, in the Python Avro client.&lt;/p&gt;</comment>
                            <comment id="13253950" author="russell.jurney" created="Sat, 14 Apr 2012 02:50:06 +0000"  >&lt;p&gt;Reproduces the error this ticket describes.&lt;/p&gt;</comment>
                            <comment id="13253964" author="tebeka" created="Sat, 14 Apr 2012 03:18:24 +0000"  >&lt;p&gt;Russel, the problem is that you pass a &lt;b&gt;str&lt;/b&gt; with unicode characters. Python has no way of knowing the encoding and the default if &apos;ascii&apos;. If you prepend a &apos;u&apos; to make the body unicode:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;email_hash = {&lt;span class=&quot;code-quote&quot;&gt;&apos;body&apos;&lt;/span&gt;: u&lt;span class=&quot;code-quote&quot;&gt;&quot;Verit\xc3\xa1\r\nEstat\xc3\xadstica\r\n&quot;&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will work since now it&apos;s a unicode string and it can be encoded.&lt;/p&gt;

&lt;p&gt;As a side note - these kind of things were one of the reasons for Python 3. I also recommend viewing &lt;a href=&quot;http://pyvideo.org/video/948/pragmatic-unicode-or-how-do-i-stop-the-pain&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this video&lt;/a&gt; which personally helped me.&lt;/p&gt;

&lt;p&gt;I&apos;ll give you time to respond before closing this.&lt;/p&gt;</comment>
                            <comment id="13253966" author="russell.jurney" created="Sat, 14 Apr 2012 03:30:21 +0000"  >&lt;p&gt;I create unicode objects when I know the codec, otherwise the decode crashes.&lt;/p&gt;

&lt;p&gt;&amp;lt;code&amp;gt;if charset:&lt;br/&gt;
  subject = subject.decode(charset)&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;It would be neat if Python worked with ugly strings.&lt;/p&gt;</comment>
                            <comment id="13253967" author="russell.jurney" created="Sat, 14 Apr 2012 03:30:49 +0000"  >&lt;p&gt;Pardon me, I mean it would be neat if Avro worked with ugly strings &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13255064" author="tebeka" created="Mon, 16 Apr 2012 21:15:47 +0000"  >&lt;p&gt;IMO it&apos;s not the library role. To quote &quot;&lt;a href=&quot;http://www.python.org/dev/peps/pep-0020/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;The Zen of Python&lt;/a&gt;&quot;: In the face of ambiguity, refuse the temptation to guess.&lt;/p&gt;

&lt;p&gt;You can do the same in your code (try to encode, if fails convert to utf8)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522657" name="reproduce_avro_565.py" size="2566" author="russell.jurney" created="Sat, 14 Apr 2012 02:50:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 6 Jun 2010 13:53:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e13r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-566] test_tools.sh should do something intelligent if JAVA_HOME is not set</title>
                <link>https://issues.apache.org/jira/browse/AVRO-566</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently, test_tools.sh will fail if the JAVA_HOME environment variable is not set, even if there is a java on the PATH. I generally trust Philip on testing, but I&apos;ve been bitten a few times by this requirement while trying to build a release. It&apos;s low priority, but if it doesn&apos;t violate anyone&apos;s test-related sensibilities, I&apos;d love to have this test just run with the first &quot;java&quot; it finds on the path if JAVA_HOME is not set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466309">AVRO-566</key>
            <summary>test_tools.sh should do something intelligent if JAVA_HOME is not set</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2010 02:47:02 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:52 +0000</updated>
                            <resolved>Mon, 7 Jun 2010 17:57:18 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12876300" author="cutting" created="Mon, 7 Jun 2010 16:23:14 +0000"  >&lt;p&gt;I think the bug is that build.xml does not bind JAVA_HOME.&lt;/p&gt;

&lt;p&gt;We should add a line to the test_tools.sh invocation like:&lt;/p&gt;

&lt;p&gt; &amp;lt;env key=&quot;JAVA_HOME&quot; value=&quot;${java.home}&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;Then it will use the same java as Ant, normally the value of JAVA_HOME.  If you want to trust the &apos;java&apos; on $PATH (which on Ubuntu is OpenJDK or GCJ, depending on Ubuntu version) then Ant will use that, but things might break, since most use Sun JDK 6 for development and in production.  If we want to test for an explicit Java version, we should do it in build.xml though, not in test_tools.sh.&lt;/p&gt;</comment>
                            <comment id="12876303" author="scott_carey" created="Mon, 7 Jun 2010 16:32:25 +0000"  >&lt;p&gt;By whatever means it is configured, it should print out the path to the location of the java it is using.&lt;/p&gt;</comment>
                            <comment id="12876309" author="cutting" created="Mon, 7 Jun 2010 16:54:37 +0000"  >&lt;p&gt;Here&apos;s a patch.&lt;/p&gt;</comment>
                            <comment id="12876328" author="philip" created="Mon, 7 Jun 2010 17:40:59 +0000"  >&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="12876338" author="cutting" created="Mon, 7 Jun 2010 17:57:18 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446498" name="AVRO-566.patch" size="443" author="cutting" created="Mon, 7 Jun 2010 16:54:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jun 2010 16:23:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e13z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79942</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-567] add tools for text file import and export</title>
                <link>https://issues.apache.org/jira/browse/AVRO-567</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;It would be good to have command-line tools to convert between newline-delimited text to Avro data files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466393">AVRO-567</key>
            <summary>add tools for text file import and export</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pwendell">Patrick Wendell</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2010 22:08:55 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:52 +0000</updated>
                            <resolved>Fri, 18 Jun 2010 19:06:59 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12876445" author="cutting" created="Mon, 7 Jun 2010 22:11:51 +0000"  >&lt;p&gt;For this issue, I&apos;m imagining a java tool.  A similar C tool would also be tremendously useful.&lt;/p&gt;

&lt;p&gt;Some potential details:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The Avro schema used would simply be &quot;bytes&quot;.&lt;/li&gt;
	&lt;li&gt;Compression would be enabled by default.&lt;/li&gt;
	&lt;li&gt;Input and output could be from files named on the command line or standard in and out.&lt;/li&gt;
	&lt;li&gt;Hadoop URIs should be accepted as input and output, so that one can use this to, e.g., pipe output to a compressed, splittable file in HDFS.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12876450" author="philip" created="Mon, 7 Jun 2010 22:18:18 +0000"  >&lt;p&gt;Would the HDFS integration introduce a dependency on Hadoop Common&apos;s FileSystem?&lt;/p&gt;</comment>
                            <comment id="12876465" author="cutting" created="Mon, 7 Jun 2010 22:33:15 +0000"  >&lt;p&gt;Yes.  Avro already uses the Hadoop 0.20 APIs elsewhere, which are intended to be stable for some time.&lt;/p&gt;</comment>
                            <comment id="12877894" author="pwendell" created="Fri, 11 Jun 2010 18:06:46 +0000"  >&lt;p&gt;This patch provides conversion from text files to avro data files and back. Supports HDFS, local files, and piping. &lt;/p&gt;</comment>
                            <comment id="12877919" author="cutting" created="Fri, 11 Jun 2010 18:50:16 +0000"  >&lt;p&gt;Looks good!  A few nits:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I prefer naming these &quot;totext&quot; and &quot;fromtext&quot;, or perhaps &quot;tolines&quot; and &quot;fromlines&quot;, and classes named ToTextTool and FromTextTool.  Avro&apos;s implicit.&lt;/li&gt;
	&lt;li&gt;System.getProperty(&quot;line.separator&quot;).getBytes() should be stored in a constant&lt;/li&gt;
	&lt;li&gt;inStream and outStream should be buffered for performance so that every call to read or write doesn&apos;t result in a system call.  DataFileStream doesn&apos;t automatically add buffering.  Hadoop streams are always buffered, and DataFileWriter add&apos;s buffering, but adding it redundantly shouldn&apos;t cause problems either.&lt;/li&gt;
	&lt;li&gt;compressionLevel should be optional, no?  you can use withOptionalArg, e.g. 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;OptionSpec&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; level = p.accepts(&lt;span class=&quot;code-quote&quot;&gt;&quot;level&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;compression level&quot;&lt;/span&gt;)
  .withOptionalArg().ofType(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.class);
OptionSet opts = p.parse(...);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ops.hasArgument(level))
  compressionLevel = level.value(opts);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12877944" author="pwendell" created="Fri, 11 Jun 2010 20:04:20 +0000"  >&lt;p&gt;This update addresses those changes... thanks!&lt;/p&gt;</comment>
                            <comment id="12877953" author="cutting" created="Fri, 11 Jun 2010 20:27:45 +0000"  >&lt;p&gt;I think the default compression level should be 1: fast, but compressed.&lt;/p&gt;

&lt;p&gt;Also, where do we document that &apos;-&apos; means standard in or standard out?  The Util class is package-private, so that doesn&apos;t count.  Perhaps we should add it to the help string?&lt;/p&gt;

&lt;p&gt;Other than that, +1.&lt;/p&gt;</comment>
                            <comment id="12878176" author="pwendell" created="Sat, 12 Jun 2010 01:21:15 +0000"  >&lt;p&gt;I agree, here are those changes...&lt;/p&gt;</comment>
                            <comment id="12878803" author="cutting" created="Mon, 14 Jun 2010 23:46:19 +0000"  >&lt;p&gt;Checkstyle fails, complaining about tabs when I run &apos;cd lang/java; ant clean test&apos;.&lt;/p&gt;</comment>
                            <comment id="12879057" author="cutting" created="Tue, 15 Jun 2010 18:23:19 +0000"  >&lt;p&gt;I think my commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-512&quot; title=&quot;define and implement mapreduce connector protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-512&quot;&gt;&lt;del&gt;AVRO-512&lt;/del&gt;&lt;/a&gt; may also create conflicts with this patch, so please be sure to run &apos;svn up&apos; before you re-test and re-submit.  Thanks!&lt;/p&gt;</comment>
                            <comment id="12879980" author="pwendell" created="Thu, 17 Jun 2010 22:30:38 +0000"  >&lt;p&gt;Okay this plays nice with checkstyle. Also made compliant with your patch, I think!&lt;/p&gt;</comment>
                            <comment id="12880286" author="cutting" created="Fri, 18 Jun 2010 19:06:57 +0000"  >&lt;p&gt;I just committed this.  Thanks, Patrick!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12458699">AVRO-456</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458705">AVRO-458</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458703">AVRO-457</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446887" name="AVRO-567.patch.txt" size="10284" author="pwendell" created="Fri, 11 Jun 2010 18:06:46 +0000"/>
                            <attachment id="12446895" name="AVRO-567.patch.txt.v2" size="11022" author="pwendell" created="Fri, 11 Jun 2010 20:04:20 +0000"/>
                            <attachment id="12446935" name="AVRO-567.patch.txt.v3" size="11158" author="pwendell" created="Sat, 12 Jun 2010 01:21:15 +0000"/>
                            <attachment id="12447396" name="AVRO-567.patch.v4.txt" size="11448" author="pwendell" created="Thu, 17 Jun 2010 22:30:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jun 2010 22:18:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e147:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-568] Implement request-only messages in the Python implementation</title>
                <link>https://issues.apache.org/jira/browse/AVRO-568</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12466406">AVRO-568</key>
            <summary>Implement request-only messages in the Python implementation</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2010 23:41:48 +0000</created>
                <updated>Tue, 5 Jul 2011 17:24:12 +0000</updated>
                                                                            <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13058981" author="jeremy@lewi.us" created="Sat, 2 Jul 2011 05:11:19 +0000"  >&lt;p&gt;Does this just mean adding support in python for transport mechanisms which truly allow request only messages as opposed to the http transport mechanism?&lt;br/&gt;
e.g Issue &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-703&quot; title=&quot;socket transport for Python&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-703&quot;&gt;AVRO-703&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13060023" author="cutting" created="Tue, 5 Jul 2011 17:24:12 +0000"  >&lt;p&gt;Jeremy, yes, I think that&apos;s primarily what it means.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12466471">AVRO-570</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12491697">AVRO-703</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12444628">AVRO-285</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 2 Jul 2011 05:11:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69117</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e14f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-569] Add optional checksums to file object container format</title>
                <link>https://issues.apache.org/jira/browse/AVRO-569</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;In addition to compression, it would be useful to have checksums managed by the Avro file format itself rather than through a wrapper and the metadata field.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466408">AVRO-569</key>
            <summary>Add optional checksums to file object container format</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2010 23:58:49 +0000</created>
                <updated>Mon, 7 Jun 2010 23:58:49 +0000</updated>
                                                                            <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e14n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79945</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-570] python implementation of mapreduce connector</title>
                <link>https://issues.apache.org/jira/browse/AVRO-570</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-512&quot; title=&quot;define and implement mapreduce connector protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-512&quot;&gt;&lt;del&gt;AVRO-512&lt;/del&gt;&lt;/a&gt; defines protocols for implementing mapreduce tasks.  It would be good to have a Python implementation of this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466471">AVRO-570</key>
            <summary>python implementation of mapreduce connector</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeremy@lewi.us">Jeremy Lewi</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                            <label>hadoop</label>
                    </labels>
                <created>Tue, 8 Jun 2010 17:16:02 +0000</created>
                <updated>Mon, 1 Feb 2016 14:56:03 +0000</updated>
                            <resolved>Tue, 7 Oct 2014 14:05:26 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.8.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="12876736" author="cutting" created="Tue, 8 Jun 2010 17:19:32 +0000"  >&lt;p&gt;This could be implemented without one-way messages, but performance would be bad, so I&apos;m marking this as dependent on them.&lt;/p&gt;</comment>
                            <comment id="13058982" author="jeremy@lewi.us" created="Sat, 2 Jul 2011 05:15:09 +0000"  >&lt;p&gt;I&apos;m marking this issue as blocked by &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-703&quot; title=&quot;socket transport for Python&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-703&quot;&gt;AVRO-703&lt;/a&gt; because that would provide support for the Socket transport mechanism which does provide support for request only messages.&lt;/p&gt;</comment>
                            <comment id="13058983" author="jeremy@lewi.us" created="Sat, 2 Jul 2011 05:19:42 +0000"  >&lt;p&gt;I think I&apos;m going to take a stab at this but using the HTTP transport mechanism because it is already supported in python and my understanding of transport mechanisms is quite limited. Hopefully by the time I&apos;m done, &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-703&quot; title=&quot;socket transport for Python&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-703&quot;&gt;AVRO-703&lt;/a&gt; will be done and we can switch to using the Socket mechanism.&lt;/p&gt;

&lt;p&gt;I&apos;m aiming to have a first cut done by next Wednesday. &lt;/p&gt;</comment>
                            <comment id="13060024" author="cutting" created="Tue, 5 Jul 2011 17:26:16 +0000"  >&lt;p&gt;Jeremy, that sounds great.  Thanks for working on this!&lt;/p&gt;</comment>
                            <comment id="13060043" author="jeremy@lewi.us" created="Tue, 5 Jul 2011 17:57:01 +0000"  >&lt;p&gt;Happy to contribute, to such a fantastic project. I have most of the python code written and at least partially tested. I&apos;m working on integrating with the java code. I&apos;m hoping to submit a draft tomorrow to begin soliciting feedback from interested parties.&lt;/p&gt;
</comment>
                            <comment id="13060788" author="jeremy@lewi.us" created="Wed, 6 Jul 2011 19:42:38 +0000"  >&lt;p&gt;Filed a related issue.&lt;/p&gt;</comment>
                            <comment id="13060934" author="jeremy@lewi.us" created="Thu, 7 Jul 2011 00:03:46 +0000"  >&lt;p&gt;Here is an initial patch. There are a number of issues which I list below. There is also an example/test of how a  &lt;br/&gt;
python tethered job works in  &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
lang/py/test/test_tether_word_count.py 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;Unfortunately, this test won&apos;t work for anyone but me because the paths for the avro-tools.jar is currently hard-coded. One solution might be to do string substitution as part of the build process like we do for some of the strings representing the various hand shake protocols. &lt;/p&gt;

&lt;p&gt;Here is a list of additional issues &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Tests are a bit fragile -  for example to run the tests for avro tools you need to first install avro-mapred in your local repository&lt;/li&gt;
	&lt;li&gt;There are checkstyle violations&lt;/li&gt;
	&lt;li&gt;The tests for mapred fail if the hadoop version is 0.20.2-cdh3u0, but works for 0.20.203.0&lt;/li&gt;
	&lt;li&gt;Hadoop 0.20.2 won&apos;t work for this version of the patch see &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-852&quot; title=&quot;TetheredProcess - incompatibility between Hadoop-0.20.2 and Cloudera Release 3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-852&quot;&gt;AVRO-852&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;The shade plugin for avro-tools interferes with my use of the assembly plugin to build a *-job.jar file suitable for hadoop submission (described more below).&lt;/li&gt;
	&lt;li&gt;In the python task, messages logged using logger appear to be going to the log for stderr not the log file for stdout&lt;/li&gt;
	&lt;li&gt;Combine reduceFlush and reduce (described more below)&lt;/li&gt;
	&lt;li&gt;Excess comments - I&apos;ve commented changes to existing code with &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt; to facilitate review.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;shade and assembly plugin conflict: &lt;br/&gt;
For avro-tools  I modified the pom.xml file so that we build an avro-tools-VERSION-job.jar using the assembly plugin. The intention was to build a single jar that contains all of the dependent jars in the directory &quot;lib&quot; inside the jar file. Unfortunately, the shade plugin caused problems. In particular, before removing the shade plugin from the pom.xml file, the assembled avro-tools-*-job.jar would end up containing  unpacked versions of all the dependency jars (in addition to storing the jars in ./lib).  &lt;/p&gt;

&lt;p&gt;I removed the shade plugin configuration as a temporary work around. Hopefuly some maven wizards out there can help me resolve this.  &lt;/p&gt;

&lt;p&gt;I think the jar plugin is building two jars one without the dependencies and one with the dependencies unpacked. The shade plugin then seems to be renaming one of these jars and I think that renaming may be part of the problem. &lt;/p&gt;


&lt;p&gt;combining reduceFlush and reduce: &lt;br/&gt;
Currently, to implement the reducer in python a user would implement the methods &quot;reduce&quot; and &quot;reduceFlush&quot; in a subclass of TetherTask. &quot;reduce&quot; is invoked once for each tuple in the reduce phase. &quot;reduceFlush&quot; is invoked once after the last tuple in each group.  &lt;/p&gt;

&lt;p&gt;I would like to replace reduce and reduceFlush with a single reduce function that would take a record generator as opposed to a record as its argument. So the implementation would look something like &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
def reduce(self, recgen, collector): 
    for  rec in recgen: 
          &#8230; process each record in this group 
 
     ... finalize this group... 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;The way I&apos;m thinking of implementing this is by having reduce run in a separate thread from the server. The generator, recgen, would then suspend the thread when no records were available. When the server recieves a record from the parent process, it would wake up the thread running reduce. &lt;/p&gt;

&lt;p&gt;I&apos;ve been working off of a public fork checked into bitbucket&lt;br/&gt;
&lt;a href=&quot;https://bitbucket.org/jlewi/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bitbucket.org/jlewi/avro&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="13084418" author="cutting" created="Fri, 12 Aug 2011 22:16:15 +0000"  >&lt;p&gt;It&apos;d be great to get this working!  Does anyone understand the Maven issue with generating the job.jar?&lt;/p&gt;</comment>
                            <comment id="13086830" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 05:58:09 +0000"  >&lt;p&gt;I&apos;ve found a possible work around for the maven issue. I can adjust the shade plugin so that it builds a jar avro-tools-1.6.0-SNAPSHOT-withdeps.jar which is equivalent to the current output of the shade plugin (i.e the ./tools/target/avro-tools-1.6.0-SNAPSHOT.jar). &lt;/p&gt;

&lt;p&gt;avro-tools-1.6.0-SNAPSHOT-withdeps.jar would contain unpacked versions of all dependency jars.&lt;/p&gt;

&lt;p&gt;avro-tools-1.6.0-SNAPSHOT.jar would only contain the code for avro-tools (i.e no dependencies) &lt;/p&gt;

&lt;p&gt;avro-tools-1.6.0-SNAPSHOT-job.jar would be a jar suitable for hadoop.&lt;/p&gt;

&lt;p&gt;So the only change to existing code would be the jar generated by the shade plugin would be renamed to avro-tools-1.6.0-SNAPSHOT-withdeps.jar. Not sure what this would break if anything.&lt;/p&gt;


</comment>
                            <comment id="13086838" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 06:49:28 +0000"  >&lt;p&gt;This is an updated patch.&lt;/p&gt;

&lt;p&gt;It implements the maven work around that I described in my earlier comment. &lt;/p&gt;

&lt;p&gt;I fixed all of the check style violations. &lt;/p&gt;

&lt;p&gt;I&apos;m trying to run the unittests for mapred and tools but maven seems to abort on the test failures in ipc and I don&apos;t know how to make maven run just the tests for mapred.&lt;/p&gt;

&lt;p&gt;I&apos;m working on a wiki article to provide some useful instructions on how to write tethered jobs in python.&lt;/p&gt;</comment>
                            <comment id="13087035" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 14:36:53 +0000"  >&lt;p&gt;There&apos;s one test failure in mapred that I will work on fixing and hopefully upload an updated patch soon.&lt;/p&gt;

&lt;p&gt;FYI, to run just the tests for mapred I had to first deploy all the modules.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cd AVRO/lang/java
mvn install -DskipTests
cd AVRO/lang/java/mapred
mvn test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13087063" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 15:35:32 +0000"  >&lt;p&gt;It looks like the test failure is in trunk (not part of the patch) and is in TestWordCount.testProjection. There seem to be at least two problems.&lt;/p&gt;

&lt;p&gt;First, testProjection appears to be using the wrong schema for reading the mapred/target/mapred/out/part-0000.avro.&lt;/p&gt;

&lt;p&gt;Second, even after attempting to correct the schema I was still getting an error trying to read records.&lt;/p&gt;</comment>
                            <comment id="13087097" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 16:19:36 +0000"  >&lt;p&gt;Filed a separate issue for the broken unittest TestWordCount.testProjection.&lt;/p&gt;</comment>
                            <comment id="13087409" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 23:43:22 +0000"  >&lt;p&gt;Cleaned up some white space.&lt;/p&gt;</comment>
                            <comment id="13087436" author="jeremy@lewi.us" created="Fri, 19 Aug 2011 00:50:43 +0000"  >&lt;p&gt;Here&apos;s a patch that I think is ready for review.&lt;/p&gt;

&lt;p&gt;I also created a wiki article to explain how tethered jobs work.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/AVRO/Using+AVRO+To+Run+Python+Map+Reduce+Jobs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/AVRO/Using+AVRO+To+Run+Python+Map+Reduce+Jobs&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13087815" author="cutting" created="Fri, 19 Aug 2011 17:28:15 +0000"  >&lt;p&gt;Great to see this working!&lt;/p&gt;

&lt;p&gt;Some cosmetic comments on the patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;please don&apos;t include comments with your name, the date, stack traces, etc.&lt;/li&gt;
	&lt;li&gt;please don&apos;t use tabs for indentation, but only spaces, 2 per indent level&lt;/li&gt;
	&lt;li&gt;please check your patch to make sure no whitespace-only changes are made&lt;/li&gt;
	&lt;li&gt;please put a space after // and before {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These guidelines make it much easier to review patches.&lt;/p&gt;

&lt;p&gt;For the enum TRANSPROTO:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this might better be called simply TRANSPORT or PROTOCOL or maybe TRANSPORT_PROTOCOL.&lt;/li&gt;
	&lt;li&gt;if it&apos;s public in a public, non-test class then it needs javadoc&lt;/li&gt;
	&lt;li&gt;i&apos;d prefer when values of this are processed, rather than using an if-else structure, a switch statement is used with a &apos;default&apos; clause that throws an exception.  this makes it clearer that all values are handled.&lt;/li&gt;
	&lt;li&gt;do we need a NONE value, or should we rather simply default the value to HTTP or SASL?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The need for the flush in TetherKeySerialization is mysterious, since that&apos;s using a DirectBinaryEncoder, which has no buffering.  So the flush only has an effect on the underlying InputStream.  If that&apos;s required then it may be a bug in Hadoop.  Perhaps rather than including the entire stacktrace here, file a separate Jira issue about this with the stack trace, then just add an end-of-line comment referring to this issue, e.g., &apos;flush(); // Possible bug, see: AVRO-XXX&apos;&lt;/p&gt;

&lt;p&gt;We shouldn&apos;t reference Jira issue numbers in sources except in comments.  So, instead of adding a test-570 target in lang/py/build.xml you might define test.include and test.exclude properties near the top of that build.xml, then run it with something like &apos;ant -Dtest.include=...&apos;.&lt;/p&gt;

&lt;p&gt;It would be great if someone more fluent in Python could look over the Python stuff here.&lt;/p&gt;

&lt;p&gt;And it would be great if someone more fluent in Maven could look over the Maven stuff here.&lt;/p&gt;</comment>
                            <comment id="13088102" author="jeremy@lewi.us" created="Sat, 20 Aug 2011 01:23:09 +0000"  >&lt;p&gt;Thanks Doug for taking the time to review the patch. I will start incorporating your comments and hopefully in the meantime some python, maven experts will jump in with additional comments. Sorry about all the white space problems; I thought checkstyle would find all the &quot;tabs&quot;.&lt;/p&gt;


</comment>
                            <comment id="13088524" author="jeremy@lewi.us" created="Mon, 22 Aug 2011 03:57:16 +0000"  >&lt;p&gt;Doug, I appreciate your careful review, and I&apos;ve attempted to fix all the issues you pointed out in this patch.&lt;/p&gt;

&lt;p&gt;TRANSPROTO has been renamed to PROTOCOL and I addeded some javadoc. The code also uses &quot;switch&quot; instead of &quot;if-else&quot; blocks to process the protocol.&lt;/p&gt;

&lt;p&gt;I would argue that currently we need a NONE value for PROTOCOL because there is no intelligent default. From my limited understanding of protocols, http is a very inefficient protocol for tethered jobs. So HTTP probably isn&apos;t a good default. On the other hand, SASL isn&apos;t supported in python and python is the only language other than java supporting tethered jobs so SASL probably isn&apos;t a good choice either.&lt;/p&gt;

&lt;p&gt;I renamed the python test target &quot;test-570&quot; to &quot;test-tether&quot; so that we don&apos;t reference a jira. Is this acceptable?&lt;/p&gt;

&lt;p&gt;I tried to address all of the cosmetic issues Doug pointed out. It does look like SVN is doing some white space only changes but I think this might be because I changed some tabs to spaces. &lt;/p&gt;

&lt;p&gt;I&apos;d also like to call the reviewer&apos;s attention to the fact that I&apos;ve changed the hadoop version for the dependency in the POM. (See &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-852&quot; title=&quot;TetheredProcess - incompatibility between Hadoop-0.20.2 and Cloudera Release 3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-852&quot;&gt;AVRO-852&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13126233" author="cutting" created="Wed, 12 Oct 2011 23:07:26 +0000"  >&lt;p&gt;&amp;gt; SASL isn&apos;t supported in python and python is the only language other than java supporting tethered jobs so SASL probably isn&apos;t a good choice either.&lt;/p&gt;

&lt;p&gt;Implementing SASL&apos;s anonymous mechanism on a TCP socket is very simple.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://avro.apache.org/docs/current/sasl.html#anonymous&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://avro.apache.org/docs/current/sasl.html#anonymous&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But, in the meantime we can use HTTP to get the first version of this debugged &amp;amp; committed.&lt;/p&gt;

&lt;p&gt;This patch has unfortunately gone stale since I last had a chance to inspect it.  Sorry!  If you have a chance, can you please update it?  I&apos;d still really like to see this functionality in an Avro release soon.&lt;/p&gt;</comment>
                            <comment id="13126272" author="jeremy@lewi.us" created="Thu, 13 Oct 2011 00:43:05 +0000"  >&lt;p&gt;I&apos;ll be happy to update the patch. What kind of timeline do you have in mind?&lt;/p&gt;</comment>
                            <comment id="13126715" author="cutting" created="Thu, 13 Oct 2011 16:45:52 +0000"  >&lt;p&gt;I&apos;m hoping to release 1.6.0 in the next week or two.  As long as this doesn&apos;t make any incompatible changes it could go into 1.6.1 which will likely follow in a month or so.  If it makes incompatible changes and doesn&apos;t make 1.6.0 then it wouldn&apos;t go out until 1.7.0, probably sometime in the first half of 2012.&lt;/p&gt;</comment>
                            <comment id="13129718" author="jeremy@lewi.us" created="Tue, 18 Oct 2011 13:16:19 +0000"  >&lt;p&gt;I&apos;ll try to get to it next week or the week after so that it can hopefully go into 1.6.1 assuming no incompatibility changes. &lt;/p&gt;</comment>
                            <comment id="13145143" author="jeremy@lewi.us" created="Sun, 6 Nov 2011 23:04:46 +0000"  >&lt;p&gt;This an updated patch that resolves subversion conflicts. Unfortunately, not all unittests are passing yet. &lt;/p&gt;

&lt;p&gt;TestWordCountTether fails when using the HTTP Protocol. The problem appears to be the following. After the mapper finishes, TetherMapRunner sends a &quot;complete&quot; message to the tethered process and the tethered process sends back a &quot;complete&quot; message and then exits. Based on the log messages, the messages are getting sent and received. However, TetherMapRunner&apos;s sending of &quot;complete&quot; results in a connection refused exception. This appears to only happen with the HTTP Protocol and not the SASL protocol. &lt;/p&gt;

&lt;p&gt;The python code which is also using the HTTP protocol works just fine.&lt;/p&gt;

&lt;p&gt;Any help or ideas would be appreciated.&lt;/p&gt;
</comment>
                            <comment id="13145150" author="jeremy@lewi.us" created="Sun, 6 Nov 2011 23:22:04 +0000"  >&lt;p&gt;Found the bug. Should have a patch ready for review tonight.&lt;/p&gt;</comment>
                            <comment id="13145218" author="jeremy@lewi.us" created="Mon, 7 Nov 2011 04:23:45 +0000"  >&lt;p&gt;Here&apos;s an updated patch ready for review.&lt;/p&gt;</comment>
                            <comment id="13156391" author="cutting" created="Wed, 23 Nov 2011 23:23:31 +0000"  >&lt;p&gt;Finally looking at this.  The Java changes look reasonable and all Java tests pass for me.&lt;/p&gt;

&lt;p&gt;Python tests fail with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[py-test] ./home/cutting/src/avro/trunk/lang/py/build/src/avro/tether/tether_task_runner.py:24: RuntimeWarning: Parent module &lt;span class=&quot;code-quote&quot;&gt;&apos;avro.tether&apos;&lt;/span&gt; not found &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; handling absolute &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;
  [py-test]   from avro &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; tether
  [py-test] INFO:root:tether_task_runner.__main__: Task: word_count_task.WordCountTask
  [py-test] INFO:TetherTask:TetherTask.open: Opening connection to parent server on port=42343
  [py-test] MockParentResponder: Recieved &lt;span class=&quot;code-quote&quot;&gt;&apos;configure&apos;&lt;/span&gt;: inputPort=59800
  [py-test] localhost.localdomain - - [23/Nov/2011 15:15:17] &lt;span class=&quot;code-quote&quot;&gt;&quot;POST / HTTP/1.1&quot;&lt;/span&gt; 200 -
  [py-test] .E
  [py-test] ======================================================================
  [py-test] space&quot;, 
  [py-test] ERROR: test1 (test_tether_word_count.TestTetherWordCount)
  [py-test]        &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [ {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;} ] },
  [py-test] ----------------------------------------------------------------------
  [py-test]      {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;ReferencedRecord&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;, 
  [py-test] Traceback (most recent call last):
  [py-test]        &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [ {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;&quot;&lt;/span&gt;} ] },
  [py-test]   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/cutting/src/avro/trunk/lang/py/build/test/test_tether_word_count.py&quot;&lt;/span&gt;, line 187, in test1
  [py-test]      {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;TestError&quot;&lt;/span&gt;,
  [py-test]     proc=subprocess.Popen(args)
  [py-test]       &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [ {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;} ]
  [py-test]   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python2.6/subprocess.py&quot;&lt;/span&gt;, line 623, in __init__
  [py-test]      }
  [py-test]     errread, errwrite)
  [py-test]  ],
  [py-test]   File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/lib/python2.6/subprocess.py&quot;&lt;/span&gt;, line 1141, in _execute_child
  [py-test] 
  [py-test]     raise child_exception
  [py-test]  &lt;span class=&quot;code-quote&quot;&gt;&quot;messages&quot;&lt;/span&gt;: {
  [py-test] OSError: [Errno 2] No such file or directory
  [py-test]      &lt;span class=&quot;code-quote&quot;&gt;&quot;echo&quot;&lt;/span&gt;: {
  [py-test] 
  [py-test]          &lt;span class=&quot;code-quote&quot;&gt;&quot;request&quot;&lt;/span&gt;: [{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;qualified&quot;&lt;/span&gt;, 
  [py-test] ----------------------------------------------------------------------
  [py-test]              &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;ReferencedRecord&quot;&lt;/span&gt;}],
  [py-test] Ran 45 tests in 8.061s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Any idea what&apos;s causing that?&lt;/p&gt;</comment>
                            <comment id="13171960" author="jeremy@lewi.us" created="Sun, 18 Dec 2011 23:25:36 +0000"  >&lt;p&gt;Doug,&lt;/p&gt;

&lt;p&gt;Sorry for not responding sooner (gmail failed to flag the email as important and it got lost in the deluge).&lt;/p&gt;

&lt;p&gt;It looks like the python path isn&apos;t getting set correctly in the tethered task and it can&apos;t find the tether module. My guess is that you have previously installed the python avro module and this is what is getting found when you do &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;from avro import tether
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;i.e something similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-849&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-849&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Can you try removing any previously installed avro modules? e.g&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;rm -rf /usr/lib/python2.7/site-packages/avro-*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;of course you&apos;ll want to substitute the correct python path.&lt;/p&gt;

&lt;p&gt;One other thing to look at is the output of the python tests. Look for a line like the following&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; [py-test] Command:
 [py-test] 	hadoop-0.20 jar /home/jlewi/svn_avro/lang/java/tools/target/avro-tools-1.6.1-job.jar tether --in /tmp/mapred/in --out /tmp/mapred/out --outschema /tmp/wordcounterN9SD.avsc --protocol http --program /tmp/exec_word_count_9vUzRg
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The file &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/tmp/exec_word_count_??????
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is a temporary file that gets written on each invocation of the tests so the suffix will change on each invocation. This file is a bash script that gets executed to start the tethered process.&lt;/p&gt;

&lt;p&gt;The contents of the file should be something like&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#!/bin/bash
export PYTHONPATH=/home/jlewi/svn_avro/lang/py/build/src:/home/jlewi/svn_avro/lang/py/build/test
python -m avro.tether.tether_task_runner word_count_task.WordCountTask
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you take a look at your file and verify that the python path is set correctly in your case, i.e you could try executing the following in a shell&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;export PYTHONPATH=/home/jlewi/svn_avro/lang/py/build/src:/home/jlewi/svn_avro/lang/py/build/test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then start an interactive python session and executing&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;from avro import tether
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you get an exception then there&apos;s a problem importing avro because 1) either the path isn&apos;t set correctly or 2) there&apos;s an older version of avro with higher precedence on the path. If its the latter you can try the following commands to identify which avro its picking up&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;import avro
avro.__file__
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;J&lt;/p&gt;</comment>
                            <comment id="13173450" author="cutting" created="Tue, 20 Dec 2011 19:26:50 +0000"  >&lt;p&gt;I don&apos;t seem to have avro installed in /usr/lib/python.  The tests you describe above find the version in my build directory, as expected.  The scripts in /tmp look fine.  Yet I still see:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  [py-test] ./home/cutting/src/avro/trunk/lang/py/build/src/avro/tether/tether_task_runner.py:24: RuntimeWarning: Parent module &lt;span class=&quot;code-quote&quot;&gt;&apos;avro.tether&apos;&lt;/span&gt; not found &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; handling absolute &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;
  [py-test]   from avro &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; tether
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13173870" author="jeremy@lewi.us" created="Wed, 21 Dec 2011 05:44:56 +0000"  >&lt;p&gt;Here&apos;s an updated patch. It doesn&apos;t fix the problems Doug&apos;s having. It does, however, fix typos that would prevent the python unittests from being run manually.&lt;/p&gt;</comment>
                            <comment id="13173878" author="jeremy@lewi.us" created="Wed, 21 Dec 2011 05:59:23 +0000"  >&lt;p&gt;Doug, I&apos;m a little confused by the stack trace that&apos;s being printed out. The stack trace shows that &quot;test_tether_word_count.py&quot; is throwing the exception. However, the text (e.g)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{&quot;name&quot;: &quot;ReferencedRecord&quot;, &quot;type&quot;: &quot;record&quot;, 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;looks like schemas that I think are being used in a different test, &quot;test_protocol.py&quot; which shouldn&apos;t have anything to do with the mapreduce API. (Is it possible ant runs the tests in different threads and jumbles the stdout from the different tests?).&lt;/p&gt;

&lt;p&gt;My suggestion would be to run the individual tests manually as follows. You&apos;ll need to grab my latest patch as I fixed a couple issues that would prevent this.&lt;br/&gt;
Build the python files and java jars&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cd SVN_AVRO/lang/java
mvn package -DskipTests
cd SVN_AVRO/lang/py/
ant dist
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set your python path&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;export PYTHONPATH=SVN_AVRO/lang/py/build/src:SVN_AVRO/lang/py/build/test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run the individual tests &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cd SVN_AVRO/lang/py
python build/test/test_tether_task.py 
python build/test/test_tether_task_runner.py 
python build/test/test_tether_word_count.py 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please send me the complete output (not just stack traces) of the tests that fail as that will help me troubleshoot the problem.&lt;/p&gt;

&lt;p&gt;Thanks for your patience and help.&lt;/p&gt;</comment>
                            <comment id="13173883" author="jeremy@lewi.us" created="Wed, 21 Dec 2011 06:02:59 +0000"  >&lt;p&gt;I should also mention that I think this warning&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/home/jlewi/tmp/trunk/lang/py/build/src/avro/tether/tether_task_runner.py:24: RuntimeWarning: Parent module &apos;avro.tether&apos; not found while handling absolute import
  from avro import tether
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is misleading. I&apos;m seeing it as well when I run the unittests and my unittests are passing.&lt;/p&gt;</comment>
                            <comment id="14019852" author="stevenwillis" created="Fri, 6 Jun 2014 13:46:46 +0000"  >&lt;p&gt;Is anyone still working and/or thinking about avro python tether support?&lt;/p&gt;</comment>
                            <comment id="14157222" author="stevenwillis" created="Thu, 2 Oct 2014 21:34:00 +0000"  >&lt;p&gt;Just submitted a patch that should apply cleanly against trunk... Anything I should do to make sure this gets in?&lt;/p&gt;</comment>
                            <comment id="14157489" author="cutting" created="Fri, 3 Oct 2014 00:12:57 +0000"  >&lt;p&gt;This looks great!  Tests pass in both Java and Python.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this soon unless someone objects.&lt;/p&gt;</comment>
                            <comment id="14157557" author="stevenwillis" created="Fri, 3 Oct 2014 01:23:56 +0000"  >&lt;p&gt;Hmm, just looking through the patch again, I noticed this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Index: lang/java/tools/pom.xml
===================================================================
--- lang/java/tools/pom.xml	(revision 1143583)
+++ lang/java/tools/pom.xml	(working copy)
@@ -17,7 +17,7 @@
 --&amp;gt;
 &amp;lt;project
   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;
-  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt;
+  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instancesavro&quot;&amp;gt;
   &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
   &amp;lt;parent&amp;gt;
     &amp;lt;artifactId&amp;gt;avro-parent&amp;lt;/artifactId&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It was in the original patch, but I&apos;m guessing that&apos;s not right.&lt;/p&gt;

&lt;p&gt;There were also some odd whitespace changes in some of the &lt;tt&gt;pom.xml&lt;/tt&gt;&apos;s that I didn&apos;t change.&lt;/p&gt;

&lt;p&gt;I also noticed this change in &lt;tt&gt;TetheredProcess.java&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;       }
       if (hasexited) {
-        LOG.error(&quot;Could not start subprocess&quot;);
-        throw new RuntimeException(&quot;Could not start subprocess&quot;);
+        //What&apos;s the best way to log this
+        System.out.println(&quot;Error: Could not start subprocess&quot;);
+        throw new RuntimeException(&quot;Error: Could not start subprocess&quot;);
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems odd, like it was getting logged via &lt;tt&gt;LOG&lt;/tt&gt; just fine, and then replaced with a comment asking how to log it.&lt;/p&gt;

&lt;p&gt;I also noticed that it seems to create a new jar for &lt;tt&gt;avro-tools&lt;/tt&gt; with &lt;tt&gt;maven-assembly-plugin&lt;/tt&gt; that&apos;s supposed to be useable as a hadoop job jar. However, I found that I actually had to use the &lt;tt&gt;-withdeps&lt;/tt&gt; jar that&apos;s created to get it to work. So maybe the code that creates the &lt;tt&gt;-job&lt;/tt&gt; jar isn&apos;t necessary? It also looks like the &lt;tt&gt;-withdeps&lt;/tt&gt; jar was just the originally created jar but now has a classifier.&lt;/p&gt;

&lt;p&gt;I wouldn&apos;t want to drastically change the artifacts being published with this change, so that might need more scrutiny. I also personally tested with &lt;tt&gt;-Dhadoop.version=2&lt;/tt&gt;, I had some issues compiling and testing without that, and I didn&apos;t try &lt;tt&gt;-Dhadoop.version=1&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14158139" author="stevenwillis" created="Fri, 3 Oct 2014 16:14:38 +0000"  >&lt;p&gt;I&apos;ve been working on a more minimal patch that does away with many of the whitespace changes and code changes that seem unrelated or unnecessary for tethered python. Would it be helpful to see that? I&apos;m torn between about how much I should change from the original patchset, which seemed to be code reviewed thoroughly, and how much change should be done to HEAD.&lt;/p&gt;

&lt;p&gt;I was also reading through:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/AVRO/Using+AVRO+To+Run+Python+Map+Reduce+Jobs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/AVRO/Using+AVRO+To+Run+Python+Map+Reduce+Jobs&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And I saw that the code calls &lt;tt&gt;reduce(record, collector)&lt;/tt&gt; for each &lt;tt&gt;record&lt;/tt&gt; (&lt;tt&gt;record&lt;/tt&gt; includes both key and value) and then &lt;tt&gt;reduceFlush(record, collector)&lt;/tt&gt; once for each key after all the values for the key have been sent to &lt;tt&gt;reduce&lt;/tt&gt;. Wouldn&apos;t it be a better design to have &lt;tt&gt;reduce(key, values, collector)&lt;/tt&gt; called once for each &lt;tt&gt;key&lt;/tt&gt;, where &lt;tt&gt;values&lt;/tt&gt; is an iterable over all the values for that key. You could even not bother with the collector, and just have the user &lt;tt&gt;yield&lt;/tt&gt; the records for output (same for the mapper).&lt;/p&gt;

&lt;p&gt;I&apos;m imagining something like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;class WordCount(TetherTask):
  def __init__(self, *args, **kwargs):
    map_input_schema = &apos;{&quot;type&quot;: &quot;string&quot;}&apos;
    map_output_schema = &apos;{&quot;type&quot;: &quot;record&quot;, &quot;name&quot;: &quot;Pair&quot;, &quot;namespace&quot;:&quot;org.apache.avro.mapred&quot;,&quot;fields&quot;:[
      {&quot;name&quot;:&quot;key&quot;,&quot;type&quot;:&quot;string&quot;},
      {&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;long&quot;}]}&apos;
    output_schema = map_output_schema

    super(WordCount,self).__init__(map_input_schema, map_output_schema, output_schema)

  def map(self, text):
    for word in text.split():
      yield word, 1

    # I think this would also work:
    # return (word, 1 for word in text.split())

  def reduce(self, word, counts):
    yield word, sum(counts)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is how &lt;a href=&quot;https://github.com/spotify/luigi&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;luigi&lt;/a&gt; does it.&lt;/p&gt;</comment>
                            <comment id="14158221" author="stevenwillis" created="Fri, 3 Oct 2014 17:32:21 +0000"  >&lt;p&gt;I pushed my changes up to my own github:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/onlynone/avro/commit/daff90&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/onlynone/avro/commit/daff90&lt;/a&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;This commit should be the same as the &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;.patch I created&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/onlynone/avro/commit/478380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/onlynone/avro/commit/478380&lt;/a&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;This commit is on top of the previous one and removes some changes in the original patch to try to get a smaller patch against trunk&lt;/li&gt;
		&lt;li&gt;It&apos;s mostly whitespace changes, but also:&lt;/li&gt;
		&lt;li&gt;removes the changes to the xmlns in pom.xml&lt;/li&gt;
		&lt;li&gt;removes the changes to the artifacts created (shaded and with maven-assembly-plugin)&lt;/li&gt;
		&lt;li&gt;removes some minor code changes&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/onlynone/avro/compare/apache:trunk...478380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/onlynone/avro/compare/apache:trunk...478380&lt;/a&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;The minimal patchset if I squashed the above two together&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Neither patch changes anything with the behavior of the python mapper and reducer that I mentioned above.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Could we mark the python interface API to tether as &apos;evolving&apos; in case we just wanted to commit the functionality now but still want to make changes later like I mentioned?&lt;/p&gt;</comment>
                            <comment id="14158468" author="cutting" created="Fri, 3 Oct 2014 20:19:39 +0000"  >&lt;p&gt;The minimal patch does look better.  CAn&lt;/p&gt;

&lt;p&gt;A few minor Java style issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the enum PROTOCOL should be Protocol, no?&lt;/li&gt;
	&lt;li&gt;x.compareTo&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; == 0 should be x.equals&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, no?&lt;/li&gt;
	&lt;li&gt;we avoid version literals in dependencies, but instead refer to version variables in lang/java/pom.xml, so all versions are centralized and so they can be overridden&lt;/li&gt;
	&lt;li&gt;since commons-cli is only used in tools, the dependency should be added there, no?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I guess we could label the Python API as &apos;experimental&apos;.  If we include this in 1.8 then normally we&apos;d not permit incompatible API changes until 1.9.  (We try to make point release upgrades risk-free.)  But if we clearly mark this new API as &apos;evolving&apos; in the release notes &amp;amp; other documentation then we might make an exception to that rule here.&lt;/p&gt;</comment>
                            <comment id="14161012" author="stevenwillis" created="Mon, 6 Oct 2014 21:41:19 +0000"  >&lt;p&gt;This is the minimal patch including fixing all the issues Doug brought up.&lt;/p&gt;</comment>
                            <comment id="14161895" author="jira-bot" created="Tue, 7 Oct 2014 14:02:18 +0000"  >&lt;p&gt;Commit 1629897 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1629897&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Python: Add connector for tethered mapreduce. Contributed by Jeremy Lewi and Steven Willis.&lt;/p&gt;</comment>
                            <comment id="14161897" author="jira-bot" created="Tue, 7 Oct 2014 14:04:23 +0000"  >&lt;p&gt;Commit 1629898 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629898&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1629898&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Python: Add connector for tethered mapreduce. Contributed by Jeremy Lewi and Steven Willis.&lt;/p&gt;</comment>
                            <comment id="14161945" author="hudson" created="Tue, 7 Oct 2014 14:36:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #486 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/486/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/486/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Python: Add connector for tethered mapreduce. Contributed by Jeremy Lewi and Steven Willis. (cutting: rev 1629898)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Python: Add connector for tethered mapreduce. Contributed by Jeremy Lewi and Steven Willis. (cutting: rev 1629897)&lt;/li&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/pom.xml&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/main/java/org/apache/avro/mapred/tether/TetherJob.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/main/java/org/apache/avro/mapred/tether/TetherKeySerialization.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/main/java/org/apache/avro/mapred/tether/TetherMapRunner.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/main/java/org/apache/avro/mapred/tether/TetherOutputService.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/main/java/org/apache/avro/mapred/tether/TetheredProcess.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/test/java/org/apache/avro/mapred/tether/TestWordCountTether.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/test/java/org/apache/avro/mapred/tether/TetherTask.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/test/java/org/apache/avro/mapred/tether/TetherTaskRunner.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/mapred/src/test/java/org/apache/avro/mapred/tether/WordCountTask.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/pom.xml&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/pom.xml&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/main/java/org/apache/avro/tool/TetherTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/tools/src/test/java/org/apache/avro/tool/TestTetherTool.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/build.xml&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/src/avro/tether&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/src/avro/tether/_&lt;em&gt;init&lt;/em&gt;_.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/src/avro/tether/tether_task.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/src/avro/tether/tether_task_runner.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/src/avro/tether/util.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/mock_tether_parent.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/set_avro_test_path.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_datafile.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_datafile_interop.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_io.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_ipc.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_schema.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_tether_task.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_tether_task_runner.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/test_tether_word_count.py&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/test/word_count_task.py&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14169535" author="cutting" created="Mon, 13 Oct 2014 16:58:50 +0000"  >&lt;p&gt;This broke the python build, since it now requires the Java tools jar.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/AVRO-python/509/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AVRO-python/509/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://ci.apache.org/builders/avro-py-ubuntu/builds/7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ci.apache.org/builders/avro-py-ubuntu/builds/7&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We might change the Python build to either:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;build the tools jar if it doesn&apos;t exist in the local tree&lt;/li&gt;
	&lt;li&gt;use the tools jar from the latest snapshot build (if a local version doesn&apos;t exist)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Any other ideas?&lt;/p&gt;</comment>
                            <comment id="14187110" author="jira-bot" created="Tue, 28 Oct 2014 17:06:34 +0000"  >&lt;p&gt;Commit 1634919 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634919&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1634919&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Fix build to get avro-tools jar from snapshot repo when not built locally.&lt;/p&gt;</comment>
                            <comment id="14187158" author="hudson" created="Tue, 28 Oct 2014 17:37:57 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #490 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/490/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/490/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Fix build to get avro-tools jar from snapshot repo when not built locally. (cutting: rev 1634919)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/lang/py/build.xml&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/ivy.xml&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/ivysettings.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14187675" author="jira-bot" created="Tue, 28 Oct 2014 23:12:16 +0000"  >&lt;p&gt;Commit 1635004 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1635004&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1635004&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Fix python build to download ivy on demand.&lt;/p&gt;</comment>
                            <comment id="14187719" author="hudson" created="Tue, 28 Oct 2014 23:37:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in AvroJava #491 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/491/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/491/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-570&quot; title=&quot;python implementation of mapreduce connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-570&quot;&gt;&lt;del&gt;AVRO-570&lt;/del&gt;&lt;/a&gt;. Fix python build to download ivy on demand. (cutting: rev 1635004)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/lang/py/build.xml&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/py/lib&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14189057" author="cutting" created="Wed, 29 Oct 2014 21:43:19 +0000"  >&lt;p&gt;I fixed the python build to:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;download Ivy&lt;/li&gt;
	&lt;li&gt;use Ivy to download the avro-tools jar&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12466406">AVRO-568</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12461283">AVRO-512</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12491697">AVRO-703</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12513028">AVRO-852</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12519310">AVRO-878</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12673206" name="AVRO-570.patch" size="95149" author="stevenwillis" created="Mon, 6 Oct 2014 21:41:19 +0000"/>
                            <attachment id="12672650" name="AVRO-570.patch" size="106563" author="stevenwillis" created="Thu, 2 Oct 2014 21:32:53 +0000"/>
                            <attachment id="12508200" name="AVRO-570.patch" size="107784" author="jeremy@lewi.us" created="Wed, 21 Dec 2011 05:44:56 +0000"/>
                            <attachment id="12502720" name="AVRO-570.patch" size="107885" author="jeremy@lewi.us" created="Mon, 7 Nov 2011 04:23:45 +0000"/>
                            <attachment id="12502698" name="AVRO-570.patch" size="110385" author="jeremy@lewi.us" created="Sun, 6 Nov 2011 23:04:46 +0000"/>
                            <attachment id="12491176" name="AVRO-570.patch" size="109015" author="jeremy@lewi.us" created="Mon, 22 Aug 2011 03:57:16 +0000"/>
                            <attachment id="12490896" name="AVRO-570.patch" size="116642" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 23:43:22 +0000"/>
                            <attachment id="12490763" name="AVRO-570.patch" size="116858" author="jeremy@lewi.us" created="Thu, 18 Aug 2011 06:49:28 +0000"/>
                            <attachment id="12485507" name="AVRO-570.patch" size="122553" author="jeremy@lewi.us" created="Thu, 7 Jul 2011 00:03:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 2 Jul 2011 05:15:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e14v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>I committed this.  Thanks, Steven!</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hadoop, mapreduce, tethered, python</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
