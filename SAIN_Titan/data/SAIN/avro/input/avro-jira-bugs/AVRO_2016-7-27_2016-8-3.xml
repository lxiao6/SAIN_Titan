<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:23:48 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2016-7-27+AND+created+%3C%3D+2016-8-3+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="3" total="3"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1890] Java objects compiled from AVDL disregard default values</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1890</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Given the schema&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@namespace(&lt;span class=&quot;code-quote&quot;&gt;&quot;fasdf&quot;&lt;/span&gt;)
protocol foo {

    &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; Domain {
        COM,
        ORG,
        BIZ,
        MIL
    }

    record Wat {
        Domain domain = &lt;span class=&quot;code-quote&quot;&gt;&quot;COM&quot;&lt;/span&gt;;

        string foo = &lt;span class=&quot;code-quote&quot;&gt;&quot;asfdasdf&quot;&lt;/span&gt;;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The resulting &lt;tt&gt;Wat&lt;/tt&gt; Java class does not use the defined default values:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void asdfasdf() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        fasdf.Wat x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Wat();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(x);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This test results in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;domain&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12993628">AVRO-1890</key>
            <summary>Java objects compiled from AVDL disregard default values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ryonday">Ryon Day</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2016 20:04:35 +0000</created>
                <updated>Sun, 30 Dec 2018 04:09:33 +0000</updated>
                                                                            <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15400569" author="yibing" created="Sat, 30 Jul 2016 09:05:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ryonday&quot; class=&quot;user-hover&quot; rel=&quot;ryonday&quot;&gt;Ryon Day&lt;/a&gt;, it is recommended to use record builder to create the specific records. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;fasdf.Wat.newBuilder().build()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This builder should be able to assign the default values for the fields.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 30 Jul 2016 09:05:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ovz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1891] Generated Java code fails with union containing logical type</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1891</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Example schema:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;RecordV1&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;org.brasslock.event&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;first&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;logicalType&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;timestamp-millis&quot;&lt;/span&gt;}]}
      ]
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The avro compiler generates a field using the relevant joda class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; org.joda.time.DateTime first
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running the following code to perform encoding:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; RecordV1 record = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RecordV1(DateTime.parse(&lt;span class=&quot;code-quote&quot;&gt;&quot;2016-07-29T10:15:30.00Z&quot;&lt;/span&gt;));
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DatumWriter&amp;lt;RecordV1&amp;gt; datumWriter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpecificDatumWriter&amp;lt;&amp;gt;(record.getSchema());
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ByteArrayOutputStream stream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream(8192);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; BinaryEncoder encoder = EncoderFactory.get().directBinaryEncoder(stream, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        datumWriter.write(record, encoder);
        encoder.flush();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes = stream.toByteArray();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fails with the exception stacktrace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; org.apache.avro.AvroRuntimeException: Unknown datum type org.joda.time.DateTime: 2016-07-29T10:15:30.000Z

    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData.getSchemaName(GenericData.java:741)
    at org.apache.avro.specific.SpecificData.getSchemaName(SpecificData.java:293)
    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData.resolveUnion(GenericData.java:706)
    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.resolveUnion(GenericDatumWriter.java:192)
    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.writeWithoutConversion(GenericDatumWriter.java:110)
    at org.apache.avro.specific.SpecificDatumWriter.writeField(SpecificDatumWriter.java:87)
    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.writeRecord(GenericDatumWriter.java:143)
    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.writeWithoutConversion(GenericDatumWriter.java:105)
    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.write(GenericDatumWriter.java:73)
    at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumWriter.write(GenericDatumWriter.java:60)
    at org.brasslock.avro.compiler.GeneratedRecordTest.shouldEncodeLogicalTypeInUnion(GeneratedRecordTest.java:82)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:117)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:253)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The failure can be fixed by explicitly adding the relevant conversion(s) to DatumWriter / SpecificData:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; RecordV1 record = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RecordV1(DateTime.parse(&lt;span class=&quot;code-quote&quot;&gt;&quot;2007-12-03T10:15:30.00Z&quot;&lt;/span&gt;));
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SpecificData specificData = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpecificData();
        specificData.addLogicalTypeConversion(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TimeConversions.TimestampConversion());
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DatumWriter&amp;lt;RecordV1&amp;gt; datumWriter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpecificDatumWriter&amp;lt;&amp;gt;(record.getSchema(), specificData);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ByteArrayOutputStream stream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream(AvroUtil.DEFAULT_BUFFER_SIZE);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; BinaryEncoder encoder = EncoderFactory.get().directBinaryEncoder(stream, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        datumWriter.write(record, encoder);
        encoder.flush();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes = stream.toByteArray();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12994181">AVRO-1891</key>
            <summary>Generated Java code fails with union containing logical type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ross.black">Ross Black</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2016 05:26:57 +0000</created>
                <updated>Thu, 13 Dec 2018 09:49:48 +0000</updated>
                                            <version>1.8.1</version>
                                    <fixVersion>1.8.3</fixVersion>
                                    <component>java</component>
                    <component>logical types</component>
                        <due></due>
                            <votes>19</votes>
                                    <watches>34</watches>
                                                                <comments>
                            <comment id="15405931" author="yibing" created="Wed, 3 Aug 2016 13:43:16 +0000"  >&lt;p&gt;Had a quick look at this. The scope of this problem is bigger than I expected. It looks like that current &lt;tt&gt;SpecificCompiler&lt;/tt&gt; and &lt;tt&gt;SpecificDatumWriter/Reader&lt;/tt&gt; haven&apos;t considered the logical type conversion in some complex types (array, map, union) yet.  Will try to find a way to fix this problem.&lt;/p&gt;</comment>
                            <comment id="15406302" author="rdblue" created="Wed, 3 Aug 2016 17:51:55 +0000"  >&lt;p&gt;I&apos;m not sure that is entirely correct. GenericData methods handle most of these cases; few changes were needed for specific assuming that the data model has the conversion.&lt;/p&gt;

&lt;p&gt;I think the problem is that specific adds &lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java#L109&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;alternate lookups for conversions&lt;/a&gt; that aren&apos;t currently called in methods like &lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L686&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;resolveUnion&lt;/tt&gt;&lt;/a&gt;. That only uses the conversions from the data model.&lt;/p&gt;

&lt;p&gt;I think we just need to update a few more methods to know about the alternate lookup. Is that what you meant?&lt;/p&gt;</comment>
                            <comment id="15406991" author="yibing" created="Thu, 4 Aug 2016 02:07:15 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt;, thanks for the reply!&lt;br/&gt;
I agree that we need to modify some methods in SpecificDatumReader/Writer to use conversions contained in SepcificRecord.&lt;br/&gt;
Problem is that currently the &lt;tt&gt;SpecificCompiler&lt;/tt&gt; doesn&apos;t generate conversions for complex type fields:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java#L647-L672&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/master/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java#L647-L672&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The complex types themselves don&apos;t contain a &quot;logical type&quot;. Instead, it is their element types that can contain a logical type. We may need to modify the compiler to include these scenarios.&lt;/p&gt;

&lt;p&gt;I have a quick thought about this, ARRAY and MAP type are OK. They contain only one element type. But for UNION, it is possible that there are multiple element types in it. &lt;a href=&quot;https://github.com/apache/avro/blob/master/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java#L647-L672&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;The current &lt;tt&gt;Conversion&lt;/tt&gt; array&lt;/a&gt; in &lt;tt&gt;SpecificRecord&lt;/tt&gt; cannot hold this. I was considering changing it as &lt;tt&gt;java.util.List&amp;lt;org.apache.avro.Conversion&amp;lt;?&amp;gt;&amp;gt;[] conversions&lt;/tt&gt;, but looks like this is a non compatible change. Now I tend to add another field specially for union fields (need to change &lt;tt&gt;getConversion&lt;/tt&gt; to determine which field to look at &amp;#8211; bad for performance}}. What do you think about this?&lt;/p&gt;</comment>
                            <comment id="15410947" author="yibing" created="Sun, 7 Aug 2016 14:02:35 +0000"  >&lt;p&gt;Things can become even more complicated. AVRO supports multi-dimensional array, and any complex type can be included in another complex type. This makes it necessary for specific compiler to check all the levels of an idl definition and find out all the used conversions. Currently the conversions are stored on a per field basis. This may not be suitable for the scenarios mentioned above. Instead, I propose the store all the conversions (from any level) in a set so that application can use it when necessary.&lt;/p&gt;</comment>
                            <comment id="15411921" author="yibing" created="Mon, 8 Aug 2016 15:04:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;, could you please help confirm whether we need support embedded complex type in specific records? Such as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;union { array&amp;lt;string&amp;gt;, map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15411928" author="busbey" created="Mon, 8 Aug 2016 15:08:02 +0000"  >&lt;p&gt;yes, we should expect those to work.&lt;/p&gt;</comment>
                            <comment id="15452830" author="tomwhite" created="Wed, 31 Aug 2016 17:30:01 +0000"  >&lt;p&gt;Might it not be simpler to take advantage of the conversion code that&apos;s already in GenericDatumWriter (that pre-dates &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1684&quot; title=&quot;Add date, time, and timestamp to specific object model classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1684&quot;&gt;&lt;del&gt;AVRO-1684&lt;/del&gt;&lt;/a&gt;)?&lt;/p&gt;

&lt;p&gt;We could do this by adding a constructor to SpecificDatumWriter that takes a SpecificRecord, so it uses the SpecificData instance from the generated class (which should have the conversions added to it). The downside is that users will need to use this constructor otherwise they&apos;ll get an exception if the generated class uses logical types. However, this is cleaner than trying to support a parallel set of conversions in SpecificRecordBase that SpecificDatumWriter has to know about.&lt;/p&gt;</comment>
                            <comment id="15453755" author="yibing" created="Wed, 31 Aug 2016 23:46:25 +0000"  >&lt;blockquote&gt;
&lt;p&gt;We could do this by adding a constructor to SpecificDatumWriter that takes a SpecificRecord, so it uses the SpecificData instance from the generated class (which should have the conversions added to it). &lt;/p&gt;&lt;/blockquote&gt;

&lt;ol&gt;
	&lt;li&gt;At this moment, only the generated &lt;tt&gt;SpecificRecord&lt;/tt&gt; contains a &lt;tt&gt;SpecificData&lt;/tt&gt; member, and this member is private. &lt;tt&gt;SpecificRecord&lt;/tt&gt; itself doesn&apos;t provide any method that returns a related &lt;tt&gt;SpecificData&lt;/tt&gt;. Adding such a method is not backward compatible.&lt;/li&gt;
	&lt;li&gt;We still need to consider the situation where a &lt;tt&gt;SpecificRecord&lt;/tt&gt; is nested in another &lt;tt&gt;SpecificRecord&lt;/tt&gt;, and these 2 records may use different set of conversions (for example one use decimal conversion while the other uses date conversion). &lt;tt&gt;SpecificDatumWriter/Reader&lt;/tt&gt; need to process such a scenario.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Currently I am thinking of moving the conversion management function away from &lt;tt&gt;Specific/GenericData&lt;/tt&gt; and put it into another class (say ConversionResolver), and pass its objects as a parameter to Specific/Generic datum readers/writers. But I haven&apos;t got time to carefully examine this idea. Will find some time this week to do this.&lt;/p&gt;</comment>
                            <comment id="15455724" author="tomwhite" created="Thu, 1 Sep 2016 15:11:06 +0000"  >&lt;p&gt;Re 1. We could add a static method &lt;tt&gt;getClassDataModel()&lt;/tt&gt; to generated classes, so newly generated classes could use it to get the &lt;tt&gt;SpecificData&lt;/tt&gt; object for the &lt;tt&gt;SpecificRecord&lt;/tt&gt;.&lt;br/&gt;
Re 2. We could have a fixed set of conversions, just like &lt;tt&gt;SpecificCompiler&lt;/tt&gt; does.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch to show what this might look like.&lt;/p&gt;

&lt;p&gt;I also had a look at going down the &quot;alternative conversion lookup&quot; route, but apart from the field position problem (which can be fixed by using maps), there&apos;s a problem with &lt;tt&gt;resolveUnion&lt;/tt&gt;. When &lt;tt&gt;resolveUnion&lt;/tt&gt; is called there is no &lt;tt&gt;SpecificRecordBase&lt;/tt&gt; object to get the conversions from. I can&apos;t see a way around that, but perhaps others have ideas.&lt;/p&gt;</comment>
                            <comment id="15457575" author="yibing" created="Fri, 2 Sep 2016 05:25:21 +0000"  >&lt;blockquote&gt;
&lt;p&gt;When resolveUnion is called there is no SpecificRecordBase object to get the conversions from.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We can add another &lt;tt&gt;resolveUnion&lt;/tt&gt; method that takes an extra parameter that holds all the conversions, and overwrites the &lt;tt&gt;resolveUnion&lt;/tt&gt; method in &lt;tt&gt;SpecificDatumWriter&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I will my patch (not completed yet) as well. Please help have a look. The idea is to overloads the &lt;tt&gt;writeRecord&lt;/tt&gt; in &lt;tt&gt;SepecificDatumWriter&lt;/tt&gt; and utilize the conversions used in the generated specific record  for writing data. A similar thing is done in &lt;tt&gt;SepcificDatumReader&lt;/tt&gt; as well.&lt;/p&gt;

&lt;p&gt;BTW, if we go with your patch, we will have to check the &lt;tt&gt;SpecificCompiler&lt;/tt&gt; parameters to determine whether we should include &lt;tt&gt;DecimalConversion&lt;/tt&gt; to the variable Model$. &lt;/p&gt;</comment>
                            <comment id="15458518" author="yibing" created="Fri, 2 Sep 2016 13:25:16 +0000"  >&lt;p&gt;Attach another patch that fixes the reading problems&lt;/p&gt;</comment>
                            <comment id="15458806" author="tomwhite" created="Fri, 2 Sep 2016 15:21:02 +0000"  >&lt;p&gt;I like the idea of encapsulating the logic for doing logical type conversions (ConversionResolver), although this has the effect of creating another class that doesn&apos;t really need to be public. The modifications to support union look fairly minor. Are any further changes needed for arrays and maps?&lt;/p&gt;

&lt;p&gt;It looks like RecordBuilderBase has an incompatible change to defaultValue().&lt;/p&gt;

&lt;p&gt;We need a test for multiple nested logical types with generated code, as well as ones for arrays and maps of logical types. (BTW the v3 patch doesn&apos;t apply to latest master for me.)&lt;/p&gt;

&lt;p&gt;&amp;gt; BTW, if we go with your patch, we will have to check the SpecificCompiler parameters to determine whether we should include DecimalConversion to the variable Model$.&lt;/p&gt;

&lt;p&gt;The idea was that you&apos;d always include all known conversions (the same set that SpecificCompiler uses). Would that not work?&lt;/p&gt;
</comment>
                            <comment id="15459572" author="cutting" created="Fri, 2 Sep 2016 20:56:51 +0000"  >&lt;p&gt;I don&apos;t see the advantage of adding ConversionResolver.  We&apos;ll be stuck with a bunch of deprecated methods for a number of releases or we break things incompatibly.  Does it add any expressive power, or is it just done for cleanliness?&lt;/p&gt;

&lt;p&gt;In Tom&apos;s patch I wish there were less generated code.  Couldn&apos;t a lot of that be done in the base classes?  In general, we should try to minimize generated code whenever possible.&lt;/p&gt;</comment>
                            <comment id="15460708" author="yibing" created="Sat, 3 Sep 2016 08:42:41 +0000"  >&lt;blockquote&gt;
&lt;p&gt;although this has the effect of creating another class that doesn&apos;t really need to be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I will try to make this class non-public.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The modifications to support union look fairly minor. Are any further changes needed for arrays and maps?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We need some changes to support writing records and record fields. The patch has already covered this. There should be no further change needed for arrays and maps.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;It looks like RecordBuilderBase has an incompatible change to defaultValue().&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I deleted the previous &lt;tt&gt;defaultValue&lt;/tt&gt; method, thinking it is only needed in by the generated code and now the generated code doesn&apos;t use it any more. I forgot this was a protected method and there has been a release that exposes this change. Deleting it would bring a backward compatibility problem. I will add it back. Thanks for pointing this out.&lt;br/&gt;
And sorry for uploading a broken patch. I will try to correct it in next version.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We need a test for multiple nested logical types with generated code, as well as ones for arrays and maps of logical types. (BTW the v3 patch doesn&apos;t apply to latest master for me.)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, I am working on this. I am thinking of changing class &lt;tt&gt;TestRecordWithLogicalTypes&lt;/tt&gt; to make it contain more types of nested types.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The idea was that you&apos;d always include all known conversions (the same set that SpecificCompiler uses)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Users can pass a parameter to &lt;tt&gt;SpecificCompiler&lt;/tt&gt; to control whether it uses &lt;tt&gt;BidDecimal&lt;/tt&gt; or &lt;tt&gt;ByteBuffer&lt;/tt&gt; for decimal types. That is, the &lt;tt&gt;DecimalConversion&lt;/tt&gt; is not always used in generated code. (This is to keep backwards compatibility.  We may not be able to assume &lt;tt&gt;DecimalConversion&lt;/tt&gt; is always used.&lt;/p&gt;</comment>
                            <comment id="15460722" author="yibing" created="Sat, 3 Sep 2016 08:50:42 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I don&apos;t see the advantage of adding ConversionResolver. We&apos;ll be stuck with a bunch of deprecated methods for a number of releases or we break things incompatibly. Does it add any expressive power, or is it just done for cleanliness?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The idea of my patch is to extract find out the conversions used in a child of &lt;tt&gt;SpecificRecordBase&lt;/tt&gt; and merged them with those added to the &lt;tt&gt;Generic/SpecificData&lt;/tt&gt; in datum reader/writer so that the record fields can be processed properly without users having to manually adding the conversions. I extracted &lt;tt&gt;ConversionResolver&lt;/tt&gt; out just to avoid creating heavy &lt;tt&gt;Generic/SpecificData&lt;/tt&gt; objects. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomwhite&quot; class=&quot;user-hover&quot; rel=&quot;tomwhite&quot;&gt;Tom White&lt;/a&gt; mentioned that we could make &lt;tt&gt;ConversionResolver&lt;/tt&gt; non-public. I am thinking about making it an inner class of GenericData. This way, we might be able to avoid exposing &lt;tt&gt;ConversionResolver&lt;/tt&gt; and marking a bunch of methods deprecated.&lt;br/&gt;
I will upload another patch later.&lt;/p&gt;</comment>
                            <comment id="15460903" author="yibing" created="Sat, 3 Sep 2016 11:10:27 +0000"  >&lt;p&gt;I have another look into the code, and find that we might have to extract &lt;tt&gt;ConversionResolver&lt;/tt&gt;, because:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;Generic/SpecificData&lt;/tt&gt; are public classes, and they are not final. Applications may have extended from them, which makes it hard to create them (especially their children) on the fly, which is necessary if we want to add conversions when writing/reading children of &lt;tt&gt;SpecificRecordBase&lt;/tt&gt;. On the other hand, &lt;tt&gt;ConversionResolver&lt;/tt&gt; is a new class, we can define it as final, which make it easy to create objects.&lt;/li&gt;
	&lt;li&gt;creating &lt;tt&gt;Generic/SpecificData&lt;/tt&gt; object in specific datum reader/writer is confusing, especially when the reader/writer already has a &lt;tt&gt;data&lt;/tt&gt; member. Using &lt;tt&gt;ConversionResolver&lt;/tt&gt; makes code much clearer.&lt;/li&gt;
	&lt;li&gt;Actually we don&apos;t have to mark those add/get conversion methods in &lt;tt&gt;GenericData&lt;/tt&gt; as deprecated. They are still useful and provide a convenient way for applications to manage conversions.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;What are you opinions on this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomwhite&quot; class=&quot;user-hover&quot; rel=&quot;tomwhite&quot;&gt;Tom White&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15460908" author="yibing" created="Sat, 3 Sep 2016 11:12:58 +0000"  >&lt;p&gt;Just found the &lt;tt&gt;defaultValue&lt;/tt&gt; method I added has a bug. I guess you were actually mentioning to this bug when you said that my modification was incompatible. I will fix it. Thanks for pointing this out.&lt;/p&gt;</comment>
                            <comment id="15460911" author="yibing" created="Sat, 3 Sep 2016 11:15:26 +0000"  >&lt;p&gt;Upload a new patch that fixes the defaultValue bug and can be applied to master branch&lt;/p&gt;</comment>
                            <comment id="15463687" author="rdblue" created="Sun, 4 Sep 2016 23:27:43 +0000"  >&lt;p&gt;I think all this requires is keeping a set of conversions that should be applied when reading or writing a specific class. Unlike generic where the conversions are determined by the data model at runtime, the conversions that should be used for a specific class are determined at compile time. We have the benefit of knowing that the compiler either added conversions for all instances of a logical type, or for none of them. So we only need to know the set of conversions the compiler had set up when a class was compiled.&lt;/p&gt;

&lt;p&gt;Rather than relying on the set of conversions the SpecificData instance has configured, I think we should keep the set of conversions for the class being written or read. So we don&apos;t need to change how SpecificData looks up conversions, just the way the SpecificDatumReader/Writer does to avoid looking them up in the data model. (I agree with Doug and don&apos;t see an advantage of adding a conversion resolver.)&lt;/p&gt;

&lt;p&gt;What about this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Maintain a thread-local reference to the current specific record class in SpecificDatumReader&lt;/li&gt;
	&lt;li&gt;Add a static conversion map to each specific class with its conversions (generated code)&lt;/li&gt;
	&lt;li&gt;Add conversion lookup methods to GenericDatumReader that delegate to GenericData&lt;/li&gt;
	&lt;li&gt;Override the conversion lookup methods in SpecificDatumReader that use the current record class&apos;s set of conversions instead.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This way, there are no changes to how the data model lookups work, little generated code (just an annotation to conversion map), and few changes to the datum reader and writers. What do you guys think? I think this would be a bit smaller patch. I&apos;ll try to put it together tomorrow if I have time.&lt;/p&gt;</comment>
                            <comment id="15463713" author="yibing" created="Sun, 4 Sep 2016 23:51:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt;, you idea looks good to me!&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Maintain a thread-local reference to the current specific record class in GenericDatumReader&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am also thinking about using a thread local variable, because my patch makes data reader/writer non thread-safe. We may need to keep a stack of class references, which will be helpful when there are nested records.&lt;/p&gt;

&lt;blockquote&gt;
&lt;ol&gt;
	&lt;li&gt;Add conversion lookup methods to GenericDatumReader that delegate to GenericData&lt;/li&gt;
	&lt;li&gt;Override the conversion lookup methods in SpecificDatumReader that use the current record class&apos;s set of conversions instead.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is a great idea! Looking forward to your patch!&lt;br/&gt;
(For backward compatibility, the conversion lookup methods in SpecificDataumReader/Writer may need to fallback to those in GenericDatumReader/Writer if the generated class doesn&apos;t have the static conversion map &amp;#8211; for legacy classes I mean)&lt;/p&gt;</comment>
                            <comment id="15465252" author="tomwhite" created="Mon, 5 Sep 2016 15:33:15 +0000"  >&lt;p&gt;+1 to determining the conversions for specific at compile time.&lt;/p&gt;</comment>
                            <comment id="15465673" author="githubbot" created="Mon, 5 Sep 2016 19:48:26 +0000"  >&lt;p&gt;GitHub user rdblue opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/118&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;/p&gt;

&lt;p&gt;    This changes the datum readers to use `getConversionFor` and `getConversionByClass` instance methods that delegate to the data models. This allows specific to use a set of conversions determined by the current record class to pick up the conversions that were present when it was compiled.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rdblue/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rdblue/avro&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;-fix-specific-nested-logical-types&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/avro/pull/118.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #118&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6c04cb3f3daec9e87e49d440faa35a248767fb3b&lt;br/&gt;
Author: Ryan Blue &amp;lt;blue@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-09-04T21:54:40Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1908&quot; title=&quot;IPC TestSpecificCompiler build is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1908&quot;&gt;&lt;del&gt;AVRO-1908&lt;/del&gt;&lt;/a&gt;: Fix TestSpecificCompiler reference to private method.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1884&quot; title=&quot;Add set source file suffix function for generate non-java file #90&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1884&quot;&gt;&lt;del&gt;AVRO-1884&lt;/del&gt;&lt;/a&gt; changed makePath to a private method from a package-private&lt;br/&gt;
    static method. This broke the test that references the method in IPC.&lt;br/&gt;
    The fix is to make the instance method package-private and update the&lt;br/&gt;
    test to use an instance of SpecificCompiler.&lt;/p&gt;

&lt;p&gt;commit 31be7fa9d4589e7553d274d089aa3bf97c0297b3&lt;br/&gt;
Author: Ryan Blue &amp;lt;blue@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-09-05T19:15:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Add conversion getters to datum readers.&lt;/p&gt;

&lt;p&gt;    This adds getConversionFor and getConversionByClass to&lt;br/&gt;
    GenericDatumReader so that SpecificDatumReader can override them to&lt;br/&gt;
    resolve conversions using the set of conversions used when a specific&lt;br/&gt;
    class was compiled, determined by the CONVERSIONS static variable or by&lt;br/&gt;
    adding the conversions for each field returned by getConversion(String).&lt;/p&gt;

&lt;p&gt;commit cf5bff3b6f7d312a65c28dbb053e6dbb6ab61c58&lt;br/&gt;
Author: Ryan Blue &amp;lt;blue@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-09-05T19:44:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Java: Add converions to compiled specific records.&lt;/p&gt;

&lt;p&gt;    This adds a CONVERSIONS static field with the converisons that the&lt;br/&gt;
    specific compiler used to produce a record. Together with the last&lt;br/&gt;
    commit, this will enable new specific classes to use nested logical&lt;br/&gt;
    types.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15465679" author="rdblue" created="Mon, 5 Sep 2016 19:50:25 +0000"  >&lt;p&gt;I&apos;ve posted a PR with the proposed changes. It still needs tests to validate it works for maps, arrays, and unions, but it demonstrates the idea.&lt;/p&gt;</comment>
                            <comment id="15466040" author="yibing" created="Tue, 6 Sep 2016 00:39:10 +0000"  >&lt;p&gt;The patch looks great, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt;! &lt;br/&gt;
I add a few comments to it.&lt;/p&gt;</comment>
                            <comment id="15467798" author="tomwhite" created="Tue, 6 Sep 2016 16:17:16 +0000"  >&lt;p&gt;Thanks for posting a patch Ryan. How would it work for the write side?&lt;/p&gt;</comment>
                            <comment id="15467900" author="rdblue" created="Tue, 6 Sep 2016 16:47:50 +0000"  >&lt;p&gt;Much the same way, by keeping track of the conversions for the record currently being written or delegating to the data model&apos;s types for generic and reflect. When I get time, I&apos;ll finish the write side and add tests (though if anyone else feels like continuing to get it out quicker, I&apos;m fine with that).&lt;/p&gt;</comment>
                            <comment id="16120835" author="stephane.maarek@gmail.com" created="Wed, 9 Aug 2017 23:36:25 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Yibing&quot; class=&quot;user-hover&quot; rel=&quot;Yibing&quot;&gt;Yibing Shi&lt;/a&gt;.&lt;br/&gt;
Is this issue the same as : &lt;a href=&quot;https://stackoverflow.com/questions/45581437/how-to-specify-converter-for-default-value-in-avro-union-logical-type-fields&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://stackoverflow.com/questions/45581437/how-to-specify-converter-for-default-value-in-avro-union-logical-type-fields&lt;/a&gt; ?&lt;/p&gt;

&lt;p&gt;Additionally, any plans to merge the PR? As it currently stands, it seems we can&apos;t use code generation with a union of null and a logical type, which is really annoying... &lt;/p&gt;</comment>
                            <comment id="16150510" author="busbey" created="Fri, 1 Sep 2017 13:21:11 +0000"  >&lt;p&gt;Can someone give me a synopsis of current status? do we believe this is implemented enough for review?&lt;/p&gt;</comment>
                            <comment id="16189877" author="vultron81" created="Tue, 3 Oct 2017 15:41:56 +0000"  >&lt;p&gt;Agreed this is a very annoying issue when we cant have &quot;null&quot; for built in types like timestamp-millis and decimal.&lt;/p&gt;</comment>
                            <comment id="16336033" author="laphroaig15" created="Tue, 23 Jan 2018 16:36:11 +0000"  >&lt;p&gt;There has been no activity on this ticket for 14 months.&#160; Is this PR abandoned?&#160; Is there another workaround for this bug?&#160; It &lt;b&gt;is&lt;/b&gt; very annoying that built in types are not fully supported.&lt;/p&gt;</comment>
                            <comment id="16410747" author="githubbot" created="Fri, 23 Mar 2018 03:25:27 +0000"  >&lt;p&gt;wheelerlaw commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-375532605&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-375532605&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   What happened to this? This seems pretty major, because without it, unions with built-in logical types are *&lt;b&gt;broken&lt;/b&gt;*.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16411619" author="githubbot" created="Fri, 23 Mar 2018 16:01:14 +0000"  >&lt;p&gt;rdblue commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-375714156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-375714156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @wheelerlaw, feel free to pick this up. I&apos;ll help review the changes.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16422543" author="dongyan.li" created="Mon, 2 Apr 2018 14:11:22 +0000"  >&lt;p&gt;If union with logical type is not well supported, please &lt;b&gt;add a note to the Avro spec page&lt;/b&gt;. We spend several days debug with client only to find it&apos;s a issue with Avro lib. Thanks!&lt;/p&gt;</comment>
                            <comment id="16527372" author="reddy" created="Fri, 29 Jun 2018 09:55:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Do we have an estimate on when this JIRA is going to be merged?&lt;/p&gt;</comment>
                            <comment id="16577424" author="githubbot" created="Sun, 12 Aug 2018 05:35:11 +0000"  >&lt;p&gt;lewisdawson commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-412320009&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-412320009&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Is there still any intention of finishing &amp;amp; merging this PR? I ran into this today when trying to serialize avro data to a Kafka stream.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16587525" author="githubbot" created="Tue, 21 Aug 2018 14:40:17 +0000"  >&lt;p&gt;scatrin opened a new pull request #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2065&quot; title=&quot;Avro java code generation for Unions doesn&amp;#39;t set converters for unions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2065&quot;&gt;&lt;del&gt;AVRO-2065&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Adds support for pluggable conversion classes &amp;#8211; new feature&lt;/p&gt;

&lt;p&gt;   Changes the compiler to add used conversions to the SpecificData instance already stored in the generated class.&lt;/p&gt;

&lt;p&gt;   Adds static utility methods in SpecificData for getting the correct SpecificData instance from a class or a schema (using reflection).&lt;/p&gt;

&lt;p&gt;   Adds calls to these utility methods from contexts where the schema is known.&lt;/p&gt;

&lt;p&gt;   Also:&lt;br/&gt;
   Adds a possibility to add custom conversion classes to the compiler using a parameter to the Maven plugin. The custom conversion instances used are stored in the generated class with the same mechanism as above. They must of course be on the classpath at compile and serde time and whenever else the generated class is used. This feature is not required for the bug fixes to work but the addition is not large and IMO it adds nice value.&lt;/p&gt;

&lt;p&gt;   Not implemented yet:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Custom conversions support needs to be added to the compiler tool. It is only available when using the Maven plugin ATM.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16587834" author="githubbot" created="Tue, 21 Aug 2018 18:26:27 +0000"  >&lt;p&gt;scatrin commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-414774965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-414774965&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I submitted a new PR today, #329, with a different solution approach to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;. Feedback appreciated!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16588490" author="githubbot" created="Wed, 22 Aug 2018 07:42:07 +0000"  >&lt;p&gt;scatrin commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-414942074&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-414942074&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hey @lewisdawson, there is a workaround for the current version that might help you. It involves implementing your own Avro serializer (or slightly modifying the one you&apos;re using, I did that with Confluent&apos;s). The key is to explicitly add the right conversions for logical types to SpecificData when creating the DatumWriter and DatumReader. If you still need help, create a post on StackOverflow and we&apos;ll take it over there.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16590622" author="githubbot" created="Thu, 23 Aug 2018 18:12:41 +0000"  >&lt;p&gt;ivangreene commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-415516402&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-415516402&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Very interested in this PR, I&apos;ve been running into this issue as well. I&apos;m going to try testing it but have you attempted to use this with custom defined types that use a logicalType underneath?&lt;/p&gt;

&lt;p&gt;   For example:&lt;br/&gt;
   ```json&lt;br/&gt;
   [&lt;/p&gt;
     {
       &quot;type&quot;: &quot;fixed&quot;,
       &quot;namespace&quot;: &quot;com.example.avro&quot;,
       &quot;name&quot;: &quot;SomeDecimal&quot;,
       &quot;logicalType&quot;: &quot;decimal&quot;,
       &quot;scale&quot;: 4,
       &quot;precision&quot;: 10,
       &quot;size&quot;: 8
     }
&lt;p&gt;   ]&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   ```json&lt;br/&gt;
   {&lt;br/&gt;
     &quot;fields&quot;: [&lt;/p&gt;
       {
         &quot;name&quot;: &quot;foo&quot;,
         &quot;type&quot;: [&quot;null&quot;, &quot;com.example.avro.SomeDecimal&quot;],
         &quot;default&quot;: null
       }
&lt;p&gt;     ]&lt;br/&gt;
   }&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16591290" author="githubbot" created="Fri, 24 Aug 2018 07:58:49 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-415683420&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-415683420&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @ivangreene As I understand it, the question is about using a generated Avro type as the target type of a custom conversion? So whenever you use the logical type &quot;decimal&quot; you would get that generated class as the type of your field?&lt;/p&gt;

&lt;p&gt;   The target type of the conversion needs to be in the classpath of the Conversion implementation. And the Conversion implementation needs to be in the classpath of the Maven plugin. (See the integration tests for an example of this.) So it would be hard to do with both Avro types being generated at the same time without doing some serious classloading magic in the Maven plugin. However, you could have the project containing the conversion generate its target type from an Avro schema, but that doesn&apos;t make much sense to me.&lt;/p&gt;

&lt;p&gt;   It should be pretty straightforward to add tests with new types of schemas in the codegen-test project if you want to try something out.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16636742" author="githubbot" created="Wed, 3 Oct 2018 10:15:50 +0000"  >&lt;p&gt;kgalieva commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-426582878&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-426582878&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin thank you for this patch! I pulled, rebased and tested it with integration with #309 &lt;br/&gt;
   Everything works just fine. What do you think about rebasing and proceeding with code review? Thanks again, this is a super useful fix of a common problem.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16636982" author="githubbot" created="Wed, 3 Oct 2018 13:42:02 +0000"  >&lt;p&gt;ivangreene commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-426641789&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-426641789&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   +1 to that. Would really like to see this in the next release of Avro as we&apos;re currently using a backport of #118 onto 1.8.2 and want to get back onto an official release ASAP&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16637056" author="githubbot" created="Wed, 3 Oct 2018 14:58:04 +0000"  >&lt;p&gt;kgalieva edited a comment on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-426582878&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-426582878&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin thank you for this patch! I pulled, rebased and tested it in integration with #309 &lt;br/&gt;
   Everything works just fine. What do you think about rebasing and proceeding with code review? Thanks again, this is a super useful fix of a common problem.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16637884" author="githubbot" created="Thu, 4 Oct 2018 07:24:58 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-426912754&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-426912754&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Glad you like it @kgalieva and @ivangreene. I&apos;ll hopefully have time to rebase it during today. Is there something else I need to do for it to proceed to code review?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16638277" author="githubbot" created="Thu, 4 Oct 2018 14:14:11 +0000"  >&lt;p&gt;kgalieva commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-427035082&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-427035082&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt;  I&apos;ll hopefully have time to rebase it during today. Is there something else I need to do for it to proceed to code review?&lt;br/&gt;
   @nandorKollar Could you please help to assign reviewers to this PR?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16638278" author="githubbot" created="Thu, 4 Oct 2018 14:14:26 +0000"  >&lt;p&gt;kgalieva edited a comment on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-427035082&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-427035082&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt;  I&apos;ll hopefully have time to rebase it during today. Is there something else I need to do for it to proceed to code review?&lt;/p&gt;

&lt;p&gt;   @nandorKollar Could you please help to assign reviewers to this PR?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640695" author="githubbot" created="Sat, 6 Oct 2018 11:34:18 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-427566815&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-427566815&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @kgalieva, @nandorKollar, just letting you know that I&apos;m done with the rebase. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16663559" author="githubbot" created="Thu, 25 Oct 2018 10:32:14 +0000"  >&lt;p&gt;kgalieva commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-433000190&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-433000190&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @scatrin. Sorry for slow response. I&apos;ve tested your rebased PR on my project. All conversions including JSR310, decimal and custom ones work just fine.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670170" author="githubbot" created="Wed, 31 Oct 2018 14:27:00 +0000"  >&lt;p&gt;kgalieva commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-434707378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-434707378&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @scatrin! I&apos;ve came across one failing case. `getUsedConversionClasses` method in `SpecificCompiler` doesn&apos;t include conversions for nested records. I define a record with logical types in one avro file. Then use those record as filed types in another avro file. When compiled, parent record doesn&apos;t contain conversions necessary for nested record serialisation. Could you please take a look?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671368" author="githubbot" created="Thu, 1 Nov 2018 09:49:52 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-434988845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-434988845&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks @kgalieva, I&apos;ll take a look during the weekend.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16681216" author="githubbot" created="Fri, 9 Nov 2018 10:26:16 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-437316951&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-437316951&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @kgalieva The problem should be fixed now. I see that there are conflicts to resolve too, will do another rebase soon.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685807" author="githubbot" created="Tue, 13 Nov 2018 22:04:25 +0000"  >&lt;p&gt;malcolmrobbins commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-438455726&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-438455726&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Any chance of getting a PATCH for the collective changes so the &quot;impatient&quot; can apply for themselves until it comes out in an official release? &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685896" author="githubbot" created="Tue, 13 Nov 2018 23:33:50 +0000"  >&lt;p&gt;kgalieva commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-438479297&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-438479297&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @scatrin and @rstata! Thank you both for your great contributions! &lt;br/&gt;
   I&apos;ve tested this build on my schemas and noticed a small bug in master that has been merged to this PR as well. &lt;br/&gt;
   The problem is that `customEncode` and `customDecode` methods are `protected`. &lt;a href=&quot;https://github.com/apache/avro/blame/master/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm#L504&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blame/master/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm#L504&lt;/a&gt;&lt;br/&gt;
   &lt;a href=&quot;https://github.com/apache/avro/blame/master/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm#L518&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blame/master/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm#L518&lt;/a&gt;&lt;br/&gt;
   This means that record with record field located in different package won&apos;t compile. What do you think about making those methods `public`?  Thanks again, and  please correct me if I&apos;m wrong here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686731" author="githubbot" created="Wed, 14 Nov 2018 15:42:17 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-438707755&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-438707755&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @kgalieva, @rstata, from my point of view there is no problem with making those methods public. However I haven&apos;t been involved at all in that feature so I might not have the full picture. Is this only a problem combined with this PR? If not, I guess it should be fixed on master or in a separate PR?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16686939" author="githubbot" created="Wed, 14 Nov 2018 18:15:34 +0000"  >&lt;p&gt;kgalieva commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-438763443&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-438763443&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin @rstata I get the same compilation problem when I use current master version. It can be fixed in master and then rebased into this PR. If you want, I think I can do this. Let me know what you feel will be better.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16690946" author="githubbot" created="Sun, 18 Nov 2018 15:59:43 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-439703392&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-439703392&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @kgalieva Since the problem seems to be unrelated to this feature I think it&apos;s better to fix it on master and then merge it onto this branch. I have no idea when/if this PR will be merged. There are still no reviewers assigned to it.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16694182" author="githubbot" created="Wed, 21 Nov 2018 03:53:27 +0000"  >&lt;p&gt;lagweasel commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-440520791&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-440520791&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin / @kgalieva - I&apos;m using JSR310 java.util.Instant field that can be nullable, and trying latest snapshot from scatrin:avro repo, but found that serializing to bytes and then deserializing those bytes causes a &quot;java.lang.ClassCastException: java.lang.Long cannot be cast to java.time.Instant&quot;.&lt;/p&gt;

&lt;p&gt;   I&apos;m not familiar at all with the avro code, but have created a test that shows the issue. Would appreciate if you can take a look please.&lt;/p&gt;

&lt;p&gt;   You can find my test (and details to reproduce it) here: &lt;a href=&quot;https://github.com/lagweasel/avro-union-issue&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/lagweasel/avro-union-issue&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16694918" author="githubbot" created="Wed, 21 Nov 2018 16:40:41 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-440732237&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-440732237&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks @lagweasel, I&apos;ll take a look.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16695057" author="githubbot" created="Wed, 21 Nov 2018 18:15:23 +0000"  >&lt;p&gt;scatrin commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-440762900&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-440762900&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @lagweasel thanks again, I found and corrected a bug that only appeared when SpecificDatumReader was created from a class instead of a schema.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16695345" author="githubbot" created="Wed, 21 Nov 2018 23:11:05 +0000"  >&lt;p&gt;lagweasel commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-440843784&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-440843784&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin thanks so much! Everything is working perfectly now.  &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16708767" author="githubbot" created="Tue, 4 Dec 2018 14:31:07 +0000"  >&lt;p&gt;lazyval commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-444119371&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-444119371&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin can you follow up on that? it seems like the problem is still ongoing&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16708769" author="githubbot" created="Tue, 4 Dec 2018 14:31:22 +0000"  >&lt;p&gt;lazyval edited a comment on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-444119371&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-444119371&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin can you follow up on that? it seems like the problem is still ongoing despite the effort from Avro community&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16708774" author="githubbot" created="Tue, 4 Dec 2018 14:33:54 +0000"  >&lt;p&gt;lazyval edited a comment on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-444119371&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-444119371&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin can you follow up on that? it seems like the problem is still ongoing despite the effort from Avro community&lt;/p&gt;

&lt;p&gt;   I wonder if it&apos;s possible to do in user space, without building the custom version of avro library&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16708795" author="githubbot" created="Tue, 4 Dec 2018 14:46:13 +0000"  >&lt;p&gt;lazyval commented on issue #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329#issuecomment-444124761&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329#issuecomment-444124761&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @scatrin seems like you would need to make a rebase to get this going&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711160" author="githubbot" created="Thu, 6 Dec 2018 09:03:54 +0000"  >&lt;p&gt;scatrin commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-444798975&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-444798975&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @lazyval The workaround that I did applies to a setting with Kafka and Confluent&apos;s Schema Registry. The trick is to modify the serializer/deserializers (from Confluent) to explicitly register the needed conversions when creating the SpecificDatumWriter/Reader. (for instance &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/confluentinc/schema-registry/blob/ce5132bef1f6f49a7a174183a6867afbb8d564b8/avro-serializer/src/main/java/io/confluent/kafka/serializers/AbstractKafkaAvroSerializer.java#L97&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/confluentinc/schema-registry/blob/ce5132bef1f6f49a7a174183a6867afbb8d564b8/avro-serializer/src/main/java/io/confluent/kafka/serializers/AbstractKafkaAvroSerializer.java#L97&lt;/a&gt;). SpecificDatumWriter has a &lt;span class=&quot;error&quot;&gt;&amp;#91;getter&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/avro/blob/b4ede4b116b24b5308e8419504a73e02b7f7e406/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java#L63&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/b4ede4b116b24b5308e8419504a73e02b7f7e406/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java#L63&lt;/a&gt;) for the SpecificData instance and SpecificData (via its superclass) has a &lt;span class=&quot;error&quot;&gt;&amp;#91;method&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/avro/blob/bbea1cec3ed6ffae631b4c0d975639a098687ab4/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L114&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/bbea1cec3ed6ffae631b4c0d975639a098687ab4/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L114&lt;/a&gt;) for registering logical type conversions. The cool thing is that the conversion class does not have to be part of Avro, you can build your own if you want to. Then just make sure that the modified classes are in the classpath when serializing/deserializing and that it is referenced properly in the Kafka settings. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711161" author="githubbot" created="Thu, 6 Dec 2018 09:04:22 +0000"  >&lt;p&gt;scatrin edited a comment on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-444798975&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-444798975&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @lazyval The workaround that I did applies to a setting with Kafka and Confluent&apos;s Schema Registry. The trick is to modify the serializer/deserializers (from Confluent) to explicitly register the needed conversions when creating the SpecificDatumWriter/Reader. (for instance &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt;)(&lt;a href=&quot;https://github.com/confluentinc/schema-registry/blob/ce5132bef1f6f49a7a174183a6867afbb8d564b8/avro-serializer/src/main/java/io/confluent/kafka/serializers/AbstractKafkaAvroSerializer.java#L97&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/confluentinc/schema-registry/blob/ce5132bef1f6f49a7a174183a6867afbb8d564b8/avro-serializer/src/main/java/io/confluent/kafka/serializers/AbstractKafkaAvroSerializer.java#L97&lt;/a&gt;). SpecificDatumWriter has a &lt;span class=&quot;error&quot;&gt;&amp;#91;getter&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/avro/blob/b4ede4b116b24b5308e8419504a73e02b7f7e406/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java#L63&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/b4ede4b116b24b5308e8419504a73e02b7f7e406/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java#L63&lt;/a&gt;) for the SpecificData instance and SpecificData (via its superclass) has a &lt;span class=&quot;error&quot;&gt;&amp;#91;method&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/avro/blob/bbea1cec3ed6ffae631b4c0d975639a098687ab4/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L114&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/bbea1cec3ed6ffae631b4c0d975639a098687ab4/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L114&lt;/a&gt;) for registering logical type conversions. The cool thing is that the conversion class does not have to be part of Avro, you can build your own if you want to. Then just make sure that the modified classes are in the classpath when serializing/deserializing and that it is referenced properly in the Kafka settings. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16711162" author="githubbot" created="Thu, 6 Dec 2018 09:04:43 +0000"  >&lt;p&gt;scatrin edited a comment on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-444798975&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-444798975&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @lazyval The workaround that I did applies to a setting with Kafka and Confluent&apos;s Schema Registry. The trick is to modify the serializer/deserializers (from Confluent) to explicitly register the needed conversions when creating the SpecificDatumWriter/Reader. (for instance &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/confluentinc/schema-registry/blob/ce5132bef1f6f49a7a174183a6867afbb8d564b8/avro-serializer/src/main/java/io/confluent/kafka/serializers/AbstractKafkaAvroSerializer.java#L97&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/confluentinc/schema-registry/blob/ce5132bef1f6f49a7a174183a6867afbb8d564b8/avro-serializer/src/main/java/io/confluent/kafka/serializers/AbstractKafkaAvroSerializer.java#L97&lt;/a&gt;)). SpecificDatumWriter has a &lt;span class=&quot;error&quot;&gt;&amp;#91;getter&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/avro/blob/b4ede4b116b24b5308e8419504a73e02b7f7e406/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java#L63&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/b4ede4b116b24b5308e8419504a73e02b7f7e406/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java#L63&lt;/a&gt;) for the SpecificData instance and SpecificData (via its superclass) has a &lt;span class=&quot;error&quot;&gt;&amp;#91;method&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/avro/blob/bbea1cec3ed6ffae631b4c0d975639a098687ab4/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L114&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/bbea1cec3ed6ffae631b4c0d975639a098687ab4/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java#L114&lt;/a&gt;) for registering logical type conversions. The cool thing is that the conversion class does not have to be part of Avro, you can build your own if you want to. Then just make sure that the modified classes are in the classpath when serializing/deserializing and that it is referenced properly in the Kafka settings. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717769" author="githubbot" created="Tue, 11 Dec 2018 19:07:12 +0000"  >&lt;p&gt;dkulp closed pull request #329: Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/329&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/avro/src/main/java/org/apache/avro/data/RecordBuilderBase.java b/lang/java/avro/src/main/java/org/apache/avro/data/RecordBuilderBase.java&lt;br/&gt;
index 106c500b4..6d2f4c19e 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/data/RecordBuilderBase.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/data/RecordBuilderBase.java&lt;br/&gt;
@@ -17,19 +17,16 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.avro.data;&lt;/p&gt;

&lt;p&gt;-import java.io.IOException;&lt;br/&gt;
-import java.util.Arrays;&lt;br/&gt;
-&lt;br/&gt;
 import org.apache.avro.AvroRuntimeException;&lt;br/&gt;
-import org.apache.avro.Conversion;&lt;br/&gt;
-import org.apache.avro.Conversions;&lt;br/&gt;
-import org.apache.avro.LogicalType;&lt;br/&gt;
 import org.apache.avro.Schema;&lt;br/&gt;
 import org.apache.avro.Schema.Field;&lt;br/&gt;
 import org.apache.avro.Schema.Type;&lt;br/&gt;
 import org.apache.avro.generic.GenericData;&lt;br/&gt;
 import org.apache.avro.generic.IndexedRecord;&lt;/p&gt;

&lt;p&gt;+import java.io.IOException;&lt;br/&gt;
+import java.util.Arrays;&lt;br/&gt;
+&lt;br/&gt;
 /** Abstract base class for RecordBuilder implementations.  Not thread-safe. */&lt;br/&gt;
 public abstract class RecordBuilderBase&amp;lt;T extends IndexedRecord&amp;gt;&lt;br/&gt;
   implements RecordBuilder&amp;lt;T&amp;gt; {&lt;br/&gt;
@@ -138,29 +135,6 @@ protected Object defaultValue(Field field) throws IOException &lt;/p&gt;
{
     return data.deepCopy(field.schema(), data.getDefaultValue(field));
   }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* Gets the default value of the given field, if any. Pass in a conversion&lt;/li&gt;
	&lt;li&gt;* to convert data to logical type class. Please make sure the schema does&lt;/li&gt;
	&lt;li&gt;* have a logical type, otherwise an exception would be thrown out.&lt;/li&gt;
	&lt;li&gt;* @param field the field whose default value should be retrieved.&lt;/li&gt;
	&lt;li&gt;* @param conversion the tool to convert data to logical type class&lt;/li&gt;
	&lt;li&gt;* @return the default value associated with the given field,&lt;/li&gt;
	&lt;li&gt;* or null if none is specified in the schema.&lt;/li&gt;
	&lt;li&gt;* @throws IOException&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;@SuppressWarnings(
{ &quot;rawtypes&quot;, &quot;unchecked&quot; }
&lt;p&gt;)&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;protected Object defaultValue(Field field, Conversion&amp;lt;?&amp;gt; conversion) throws IOException {&lt;/li&gt;
	&lt;li&gt;Schema schema = field.schema();&lt;/li&gt;
	&lt;li&gt;LogicalType logicalType = schema.getLogicalType();&lt;/li&gt;
	&lt;li&gt;Object rawDefaultValue = data.deepCopy(schema, data.getDefaultValue(field));&lt;/li&gt;
	&lt;li&gt;if (conversion == null || logicalType == null) 
{
-      return rawDefaultValue;
-    }
&lt;p&gt; else &lt;/p&gt;
{
-      return Conversions.convertToLogicalType(rawDefaultValue, schema,
-          logicalType, conversion);
-    }&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;br/&gt;
   @Override&lt;br/&gt;
   public int hashCode() {&lt;br/&gt;
     final int prime = 31;&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
index 6dffa15c5..7294192f3 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/generic/GenericData.java&lt;br/&gt;
@@ -105,6 +105,10 @@ public GenericData(ClassLoader classLoader) {&lt;br/&gt;
   private Map&amp;lt;Class&amp;lt;?&amp;gt;, Map&amp;lt;String, Conversion&amp;lt;?&amp;gt;&amp;gt;&amp;gt; conversionsByClass =&lt;br/&gt;
       new IdentityHashMap&amp;lt;&amp;gt;();&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+  public Collection&amp;lt;Conversion&amp;lt;?&amp;gt;&amp;gt; getConversions() &lt;/p&gt;
{
+    return conversions.values();
+  }
&lt;p&gt;+&lt;br/&gt;
   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Registers the given conversion to be used when reading and writing with&lt;/li&gt;
	&lt;li&gt;this data model.&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificData.java b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificData.java&lt;br/&gt;
index d7b2bf825..c4388caaa 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificData.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificData.java&lt;br/&gt;
@@ -17,6 +17,7 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.avro.specific;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+import java.lang.reflect.Field;&lt;br/&gt;
 import java.util.Arrays;&lt;br/&gt;
 import java.util.HashSet;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
@@ -132,6 +133,55 @@ public DatumWriter createDatumWriter(Schema schema) {&lt;br/&gt;
   /** Return the singleton instance. */&lt;br/&gt;
   public static SpecificData get() &lt;/p&gt;
{ return INSTANCE; }

&lt;p&gt;+  /**&lt;br/&gt;
+   * For RECORD type schemas, this method returns the SpecificData instance of the class associated with the schema,&lt;br/&gt;
+   * in order to get the right conversions for any logical types used.&lt;br/&gt;
+   *&lt;br/&gt;
+   * @param reader the reader schema&lt;br/&gt;
+   * @return the SpecificData associated with the schema&apos;s class, or the default instance.&lt;br/&gt;
+   */&lt;br/&gt;
+  public static SpecificData getForSchema(Schema reader) {&lt;br/&gt;
+    if (reader.getType() == Type.RECORD) {&lt;br/&gt;
+      final String className = getClassName(reader);&lt;br/&gt;
+      if (className != null) {&lt;br/&gt;
+        final Class&amp;lt;?&amp;gt; clazz;&lt;br/&gt;
+        try &lt;/p&gt;
{
+          clazz = Class.forName(className);
+          return getForClass(clazz);
+        }
&lt;p&gt; catch (ClassNotFoundException e) &lt;/p&gt;
{
+          return SpecificData.get();
+        }
&lt;p&gt;+      }&lt;br/&gt;
+    }&lt;br/&gt;
+    return SpecificData.get();&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  /**&lt;br/&gt;
+   * If the given class is assignable to &lt;/p&gt;
{@link SpecificRecordBase}
&lt;p&gt;, this method returns the SpecificData instance&lt;br/&gt;
+   * from the field &lt;/p&gt;
{@code MODEL$}
&lt;p&gt;, in order to get the correct &lt;/p&gt;
{@link org.apache.avro.Conversion} instances for the class.&lt;br/&gt;
+   * Falls back to the default instance {@link SpecificData#get()} for other classes or if the field is not found.&lt;br/&gt;
+   *&lt;br/&gt;
+   * @param c A class&lt;br/&gt;
+   * @param &amp;lt;T&amp;gt; .&lt;br/&gt;
+   * @return The SpecificData from the SpecificRecordBase instance, or the default SpecificData instance.&lt;br/&gt;
+   */&lt;br/&gt;
+  public static &amp;lt;T&amp;gt; SpecificData getForClass(Class&amp;lt;T&amp;gt; c) {&lt;br/&gt;
+    if (SpecificRecordBase.class.isAssignableFrom(c)) {&lt;br/&gt;
+      final Field specificDataField;&lt;br/&gt;
+      try {
+        specificDataField = c.getDeclaredField(&quot;MODEL$&quot;);
+        specificDataField.setAccessible(true);
+        return (SpecificData) specificDataField.get(null);
+      } catch (NoSuchFieldException e) {
+        // Return default instance
+        return SpecificData.get();
+      } catch (IllegalAccessException e) {
+        throw new AvroRuntimeException(e);
+      }&lt;br/&gt;
+    }&lt;br/&gt;
+    return SpecificData.get();&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
   private boolean useCustomCoderFlag&lt;br/&gt;
     = Boolean.parseBoolean(System.getProperty(&quot;org.apache.avro.specific.use_custom_coders&quot;,&quot;false&quot;));&lt;br/&gt;
 &lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java&lt;br/&gt;
index ccf8107ac..7fc91df30 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java&lt;br/&gt;
@@ -33,18 +33,18 @@ public SpecificDatumReader() {&lt;br/&gt;
 &lt;br/&gt;
   /** Construct for reading instances of a class. */&lt;br/&gt;
   public SpecificDatumReader(Class&amp;lt;T&amp;gt; c) {
-    this(new SpecificData(c.getClassLoader()));
+    this(SpecificData.getForClass(c));
     setSchema(getSpecificData().getSchema(c));
   }&lt;br/&gt;
 &lt;br/&gt;
   /** Construct where the writer&apos;s and reader&apos;s schemas are the same. */&lt;br/&gt;
   public SpecificDatumReader(Schema schema) {
-    this(schema, schema, SpecificData.get());
+    this(schema, schema, SpecificData.getForSchema(schema));
   }&lt;br/&gt;
 &lt;br/&gt;
   /** Construct given writer&apos;s and reader&apos;s schema. */&lt;br/&gt;
   public SpecificDatumReader(Schema writer, Schema reader) {
-    this(writer, reader, SpecificData.get());
+    this(writer, reader, SpecificData.getForSchema(reader));
   }&lt;br/&gt;
 &lt;br/&gt;
   /** Construct given writer&apos;s schema, reader&apos;s schema, and a {@link&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumWriter.java b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumWriter.java&lt;br/&gt;
index 3d5e7ff4f..e4662be09 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumWriter.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumWriter.java&lt;br/&gt;
@@ -32,11 +32,11 @@ public SpecificDatumWriter() {&lt;br/&gt;
   }&lt;br/&gt;
 &lt;br/&gt;
   public SpecificDatumWriter(Class&amp;lt;T&amp;gt; c) {
-    super(SpecificData.get().getSchema(c), SpecificData.get());
+    super(SpecificData.get().getSchema(c), SpecificData.getForClass(c));
   }&lt;br/&gt;
 &lt;br/&gt;
   public SpecificDatumWriter(Schema schema) {
-    super(schema, SpecificData.get());
+    super(schema, SpecificData.getForSchema(schema));
   }&lt;br/&gt;
 &lt;br/&gt;
   public SpecificDatumWriter(Schema root, SpecificData specificData) {&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBase.java b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBase.java&lt;br/&gt;
index eed41b514..ac003bacd 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBase.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBase.java&lt;br/&gt;
@@ -37,6 +37,11 @@&lt;br/&gt;
   public abstract Object get(int field);&lt;br/&gt;
   public abstract void put(int field, Object value);&lt;br/&gt;
 &lt;br/&gt;
+  public SpecificData getSpecificData() {
+    // Default implementation for backwards compatibility, overridden in generated code
+    return SpecificData.get();
+  }&lt;br/&gt;
+&lt;br/&gt;
   public Conversion&amp;lt;?&amp;gt; getConversion(int field) {&lt;br/&gt;
     // for backward-compatibility. no older specific classes have conversions.&lt;br/&gt;
     return null;&lt;br/&gt;
@@ -61,22 +66,22 @@ public boolean equals(Object that) {
     if (that == this) return true;                        // identical object
     if (!(that instanceof SpecificRecord)) return false;  // not a record
     if (this.getClass() != that.getClass()) return false; // not same schema
-    return SpecificData.get().compare(this, that, this.getSchema(), true) == 0;
+    return getSpecificData().compare(this, that, this.getSchema(), true) == 0;
   }&lt;br/&gt;
 &lt;br/&gt;
   @Override&lt;br/&gt;
   public int hashCode() {
-    return SpecificData.get().hashCode(this, this.getSchema());
+    return getSpecificData().hashCode(this, this.getSchema());
   }&lt;br/&gt;
 &lt;br/&gt;
   @Override&lt;br/&gt;
   public int compareTo(SpecificRecord that) {
-    return SpecificData.get().compare(this, that, this.getSchema());
+    return getSpecificData().compare(this, that, this.getSchema());
   }&lt;br/&gt;
 &lt;br/&gt;
   @Override&lt;br/&gt;
   public String toString() {
-    return SpecificData.get().toString(this);
+    return getSpecificData().toString(this);
   }&lt;br/&gt;
 &lt;br/&gt;
   @Override&lt;br/&gt;
diff --git a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBuilderBase.java b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBuilderBase.java&lt;br/&gt;
index ecf3c34dc..a8d220b50 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBuilderBase.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificRecordBuilderBase.java&lt;br/&gt;
@@ -32,7 +32,7 @@&lt;br/&gt;
    * @param schema the schema associated with the record class.&lt;br/&gt;
    */&lt;br/&gt;
   protected SpecificRecordBuilderBase(Schema schema) {-    super(schema, SpecificData.get());+    super(schema, SpecificData.getForSchema(schema));   }&lt;br/&gt;
 &lt;br/&gt;
   /**&lt;br/&gt;
@@ -40,7 +40,7 @@ protected SpecificRecordBuilderBase(Schema schema) {&lt;br/&gt;
    * @param other SpecificRecordBuilderBase instance to copy.&lt;br/&gt;
    */&lt;br/&gt;
   protected SpecificRecordBuilderBase(SpecificRecordBuilderBase&amp;lt;T&amp;gt; other) {
-    super(other, SpecificData.get());
+    super(other, other.data());
   }&lt;br/&gt;
 &lt;br/&gt;
   /**&lt;br/&gt;
@@ -48,6 +48,6 @@ protected SpecificRecordBuilderBase(SpecificRecordBuilderBase&amp;lt;T&amp;gt; other) {&lt;br/&gt;
    * @param other the record instance to copy.&lt;br/&gt;
    */&lt;br/&gt;
   protected SpecificRecordBuilderBase(T other) {
-    super(other.getSchema(), SpecificData.get());
+    super(other.getSchema(), SpecificData.getForSchema(other.getSchema()));
   }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/lang/java/avro/src/test/java/org/apache/avro/specific/TestRecordWithJsr310LogicalTypes.java b/lang/java/avro/src/test/java/org/apache/avro/specific/TestRecordWithJsr310LogicalTypes.java&lt;br/&gt;
index 56e31f4b7..352e5f0d6 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/test/java/org/apache/avro/specific/TestRecordWithJsr310LogicalTypes.java&lt;br/&gt;
+++ b/lang/java/avro/src/test/java/org/apache/avro/specific/TestRecordWithJsr310LogicalTypes.java&lt;br/&gt;
@@ -854,16 +854,16 @@ public boolean hasDec() {&lt;br/&gt;
     public TestRecordWithJsr310LogicalTypes build() {&lt;br/&gt;
       try {
         TestRecordWithJsr310LogicalTypes record = new TestRecordWithJsr310LogicalTypes();
-        record.b = fieldSetFlags()[0] ? this.b : (java.lang.Boolean) defaultValue(fields()[0], record.getConversion(0));
-        record.i32 = fieldSetFlags()[1] ? this.i32 : (java.lang.Integer) defaultValue(fields()[1], record.getConversion(1));
-        record.i64 = fieldSetFlags()[2] ? this.i64 : (java.lang.Long) defaultValue(fields()[2], record.getConversion(2));
-        record.f32 = fieldSetFlags()[3] ? this.f32 : (java.lang.Float) defaultValue(fields()[3], record.getConversion(3));
-        record.f64 = fieldSetFlags()[4] ? this.f64 : (java.lang.Double) defaultValue(fields()[4], record.getConversion(4));
-        record.s = fieldSetFlags()[5] ? this.s : (java.lang.CharSequence) defaultValue(fields()[5], record.getConversion(5));
-        record.d = fieldSetFlags()[6] ? this.d : (java.time.LocalDate) defaultValue(fields()[6], record.getConversion(6));
-        record.t = fieldSetFlags()[7] ? this.t : (java.time.LocalTime) defaultValue(fields()[7], record.getConversion(7));
-        record.ts = fieldSetFlags()[8] ? this.ts : (java.time.Instant) defaultValue(fields()[8], record.getConversion(8));
-        record.dec = fieldSetFlags()[9] ? this.dec : (java.math.BigDecimal) defaultValue(fields()[9], record.getConversion(9));
+        record.b = fieldSetFlags()[0] ? this.b : (java.lang.Boolean) defaultValue(fields()[0]);
+        record.i32 = fieldSetFlags()[1] ? this.i32 : (java.lang.Integer) defaultValue(fields()[1]);
+        record.i64 = fieldSetFlags()[2] ? this.i64 : (java.lang.Long) defaultValue(fields()[2]);
+        record.f32 = fieldSetFlags()[3] ? this.f32 : (java.lang.Float) defaultValue(fields()[3]);
+        record.f64 = fieldSetFlags()[4] ? this.f64 : (java.lang.Double) defaultValue(fields()[4]);
+        record.s = fieldSetFlags()[5] ? this.s : (java.lang.CharSequence) defaultValue(fields()[5]);
+        record.d = fieldSetFlags()[6] ? this.d : (java.time.LocalDate) defaultValue(fields()[6]);
+        record.t = fieldSetFlags()[7] ? this.t : (java.time.LocalTime) defaultValue(fields()[7]);
+        record.ts = fieldSetFlags()[8] ? this.ts : (java.time.Instant) defaultValue(fields()[8]);
+        record.dec = fieldSetFlags()[9] ? this.dec : (java.math.BigDecimal) defaultValue(fields()[9]);
         return record;
       } catch (java.lang.Exception e) {
         throw new org.apache.avro.AvroRuntimeException(e);
diff --git a/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java b/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java
index b92025f61..1936bd67a 100644
--- a/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java
+++ b/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java
@@ -293,6 +293,72 @@ public DateTimeLogicalTypeImplementation getDateTimeLogicalTypeImplementation()
     return dateTimeLogicalTypeImplementation;
   }&lt;br/&gt;
 &lt;br/&gt;
+  public void addCustomConversion(Class&amp;lt;?&amp;gt; conversionClass) {&lt;br/&gt;
+    try {
+      final Conversion&amp;lt;?&amp;gt; conversion = (Conversion&amp;lt;?&amp;gt;)conversionClass.newInstance();
+      specificData.addLogicalTypeConversion(conversion);
+    }  catch (IllegalAccessException | InstantiationException e) {
+      throw new RuntimeException(&quot;Failed to instantiate conversion class &quot; + conversionClass, e);
+    }&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  public Collection&amp;lt;String&amp;gt; getUsedConversionClasses(Schema schema) {&lt;br/&gt;
+    LinkedHashMap&amp;lt;String, Conversion&amp;lt;?&amp;gt;&amp;gt; classnameToConversion = new LinkedHashMap&amp;lt;&amp;gt;();&lt;br/&gt;
+    for (Conversion&amp;lt;?&amp;gt; conversion : specificData.getConversions()) {
+      classnameToConversion.put(conversion.getConvertedType().getCanonicalName(), conversion);
+    }&lt;br/&gt;
+    Collection&amp;lt;String&amp;gt; result = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
+    for (String className : getClassNamesOfPrimitiveFields(schema)) {&lt;br/&gt;
+      if (classnameToConversion.containsKey(className)) {
+        result.add(classnameToConversion.get(className).getClass().getCanonicalName());
+      }&lt;br/&gt;
+    }&lt;br/&gt;
+    return result;&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private Set&amp;lt;String&amp;gt; getClassNamesOfPrimitiveFields(Schema schema) {
+    Set&amp;lt;String&amp;gt; result = new HashSet&amp;lt;&amp;gt;();
+    getClassNamesOfPrimitiveFields(schema, result, new HashSet&amp;lt;&amp;gt;());
+    return result;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private void getClassNamesOfPrimitiveFields(Schema schema, Set&amp;lt;String&amp;gt; result, Set&amp;lt;Schema&amp;gt; seenSchemas) {&lt;br/&gt;
+    if (seenSchemas.contains(schema)) {
+      return;
+    }&lt;br/&gt;
+    seenSchemas.add(schema);&lt;br/&gt;
+    switch (schema.getType()) {&lt;br/&gt;
+      case RECORD:&lt;br/&gt;
+        for (Schema.Field field : schema.getFields()) {
+          getClassNamesOfPrimitiveFields(field.schema(), result, seenSchemas);
+        }&lt;br/&gt;
+        break;&lt;br/&gt;
+      case MAP:&lt;br/&gt;
+        getClassNamesOfPrimitiveFields(schema.getValueType(), result, seenSchemas);&lt;br/&gt;
+        break;&lt;br/&gt;
+      case ARRAY:&lt;br/&gt;
+        getClassNamesOfPrimitiveFields(schema.getElementType(), result, seenSchemas);&lt;br/&gt;
+        break;&lt;br/&gt;
+      case UNION:&lt;br/&gt;
+        for (Schema s : schema.getTypes())&lt;br/&gt;
+          getClassNamesOfPrimitiveFields(s, result, seenSchemas);&lt;br/&gt;
+        break;&lt;br/&gt;
+      case ENUM:&lt;br/&gt;
+      case FIXED:&lt;br/&gt;
+      case NULL:&lt;br/&gt;
+        break;&lt;br/&gt;
+      case STRING: case BYTES:&lt;br/&gt;
+      case INT: case LONG:&lt;br/&gt;
+      case FLOAT: case DOUBLE:&lt;br/&gt;
+      case BOOLEAN:&lt;br/&gt;
+        result.add(javaType(schema));&lt;br/&gt;
+        break;&lt;br/&gt;
+      default: throw new RuntimeException(&quot;Unknown type: &quot;+schema);&lt;br/&gt;
+    }&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private static String logChuteName = null;&lt;br/&gt;
+&lt;br/&gt;
   private void initializeVelocity() {&lt;br/&gt;
     this.velocityEngine = new VelocityEngine();&lt;br/&gt;
 &lt;br/&gt;
@@ -810,14 +876,13 @@ public String conversionInstance(Schema schema) {
       return &quot;null&quot;;
     }&lt;br/&gt;
 &lt;br/&gt;
-    if (LogicalTypes.date().equals(schema.getLogicalType())) {
-      return &quot;DATE_CONVERSION&quot;;
-    } else if (LogicalTypes.timeMillis().equals(schema.getLogicalType())) {
-      return &quot;TIME_CONVERSION&quot;;
-    } else if (LogicalTypes.timestampMillis().equals(schema.getLogicalType())) {
-      return &quot;TIMESTAMP_CONVERSION&quot;;
-    } else if (LogicalTypes.Decimal.class.equals(schema.getLogicalType().getClass())) {&lt;br/&gt;
-      return enableDecimalLogicalType ? &quot;DECIMAL_CONVERSION&quot; : &quot;null&quot;;&lt;br/&gt;
+    if (LogicalTypes.Decimal.class.equals(schema.getLogicalType().getClass()) &amp;amp;&amp;amp; !enableDecimalLogicalType) {
+      return &quot;null&quot;;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    final Conversion&amp;lt;Object&amp;gt; conversion = specificData.getConversionFor(schema.getLogicalType());&lt;br/&gt;
+    if (conversion != null) {
+      return &quot;new &quot; + conversion.getClass().getCanonicalName() + &quot;()&quot;;
     }&lt;br/&gt;
 &lt;br/&gt;
     return &quot;null&quot;;&lt;br/&gt;
diff --git a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm&lt;br/&gt;
index 25b4101a6..b5ee4c408 100644&lt;br/&gt;
&amp;#8212; a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm&lt;br/&gt;
+++ b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm&lt;br/&gt;
@@ -42,6 +42,14 @@ public class ${this.mangle($schema.getName())}#if ($schema.isError()) extends or&lt;br/&gt;
   public static org.apache.avro.Schema getClassSchema() { return SCHEMA$; }&lt;br/&gt;
 &lt;br/&gt;
   private static SpecificData MODEL$ = new SpecificData();&lt;br/&gt;
+#set ($usedConversions = $this.getUsedConversionClasses($schema))&lt;br/&gt;
+#if (!$usedConversions.isEmpty())&lt;br/&gt;
+static {&lt;br/&gt;
+#foreach ($conversion in $usedConversions)&lt;br/&gt;
+    MODEL$.addLogicalTypeConversion(new ${conversion}());&lt;br/&gt;
+#end&lt;br/&gt;
+  }&lt;br/&gt;
+#end&lt;br/&gt;
 &lt;br/&gt;
 #if (!$schema.isError())&lt;br/&gt;
   private static final BinaryMessageEncoder&amp;lt;${this.mangle($schema.getName())}&amp;gt; ENCODER =&lt;br/&gt;
@@ -158,6 +166,7 @@ public class ${this.mangle($schema.getName())}#if ($schema.isError()) extends or&lt;br/&gt;
 #end&lt;br/&gt;
 &lt;br/&gt;
 #end&lt;br/&gt;
+  public org.apache.avro.specific.SpecificData getSpecificData() { return MODEL$; }&lt;br/&gt;
   public org.apache.avro.Schema getSchema() { return SCHEMA$; }&lt;br/&gt;
   // Used by DatumWriter.  Applications should not call.&lt;br/&gt;
   public java.lang.Object get(int field$) {&lt;br/&gt;
@@ -172,17 +181,6 @@ public class ${this.mangle($schema.getName())}#if ($schema.isError()) extends or&lt;br/&gt;
   }&lt;br/&gt;
 &lt;br/&gt;
 #if ($this.hasLogicalTypeField($schema))&lt;br/&gt;
-  protected static final org.apache.avro.Conversions.DecimalConversion DECIMAL_CONVERSION = new org.apache.avro.Conversions.DecimalConversion();&lt;br/&gt;
-#if ($this.getDateTimeLogicalTypeImplementation().name() == &quot;JODA&quot;)&lt;br/&gt;
-  protected static final org.apache.avro.data.TimeConversions.DateConversion DATE_CONVERSION = new org.apache.avro.data.TimeConversions.DateConversion();&lt;br/&gt;
-  protected static final org.apache.avro.data.TimeConversions.TimeConversion TIME_CONVERSION = new org.apache.avro.data.TimeConversions.TimeConversion();&lt;br/&gt;
-  protected static final org.apache.avro.data.TimeConversions.TimestampConversion TIMESTAMP_CONVERSION = new org.apache.avro.data.TimeConversions.TimestampConversion();&lt;br/&gt;
-#elseif ($this.getDateTimeLogicalTypeImplementation().name() == &quot;JSR310&quot;)&lt;br/&gt;
-  protected static final org.apache.avro.data.Jsr310TimeConversions.DateConversion DATE_CONVERSION = new org.apache.avro.data.Jsr310TimeConversions.DateConversion();&lt;br/&gt;
-  protected static final org.apache.avro.data.Jsr310TimeConversions.TimeMillisConversion TIME_CONVERSION = new org.apache.avro.data.Jsr310TimeConversions.TimeMillisConversion();&lt;br/&gt;
-  protected static final org.apache.avro.data.Jsr310TimeConversions.TimestampMillisConversion TIMESTAMP_CONVERSION = new org.apache.avro.data.Jsr310TimeConversions.TimestampMillisConversion();&lt;br/&gt;
-#end&lt;br/&gt;
-&lt;br/&gt;
   private static final org.apache.avro.Conversion&amp;lt;?&amp;gt;[] conversions =&lt;br/&gt;
       new org.apache.avro.Conversion&amp;lt;?&amp;gt;[] {&lt;br/&gt;
 #foreach ($field in $schema.getFields())&lt;br/&gt;
@@ -502,19 +500,11 @@ public class ${this.mangle($schema.getName())}#if ($schema.isError()) extends or&lt;br/&gt;
             throw e;&lt;br/&gt;
           }&lt;br/&gt;
         } else {&lt;br/&gt;
-#if ($this.hasLogicalTypeField($schema))&lt;br/&gt;
-          record.${this.mangle($field.name(), $schema.isError())} = fieldSetFlags()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt; ? this.${this.mangle($field.name(), $schema.isError())} : #if(${this.javaType($field.schema())} != &quot;java.lang.Object&quot;)(${this.javaType($field.schema())})#{end} defaultValue(fields()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt;, record.getConversion($field.pos()));&lt;br/&gt;
-#else&lt;br/&gt;
           record.${this.mangle($field.name(), $schema.isError())} = fieldSetFlags()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt; ? this.${this.mangle($field.name(), $schema.isError())} : #if(${this.javaType($field.schema())} != &quot;java.lang.Object&quot;)(${this.javaType($field.schema())})#{end} defaultValue(fields()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt;);&lt;br/&gt;
-#end&lt;br/&gt;
         }&lt;br/&gt;
-#else&lt;br/&gt;
-#if ($this.hasLogicalTypeField($schema))&lt;br/&gt;
-        record.${this.mangle($field.name(), $schema.isError())} = fieldSetFlags()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt; ? this.${this.mangle($field.name(), $schema.isError())} : #if(${this.javaType($field.schema())} != &quot;java.lang.Object&quot;)(${this.javaType($field.schema())})#{end} defaultValue(fields()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt;, record.getConversion($field.pos()));&lt;br/&gt;
 #else&lt;br/&gt;
         record.${this.mangle($field.name(), $schema.isError())} = fieldSetFlags()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt; ? this.${this.mangle($field.name(), $schema.isError())} : #if(${this.javaType($field.schema())} != &quot;java.lang.Object&quot;)(${this.javaType($field.schema())})#{end} defaultValue(fields()&lt;span class=&quot;error&quot;&gt;&amp;#91;$field.pos()&amp;#93;&lt;/span&gt;);&lt;br/&gt;
 #end&lt;br/&gt;
-#end&lt;br/&gt;
 #end&lt;br/&gt;
         return record;&lt;br/&gt;
       } catch (org.apache.avro.AvroMissingFieldException e) {&lt;br/&gt;
diff --git a/lang/java/compiler/src/test/java/org/apache/avro/compiler/specific/TestSpecificCompiler.java b/lang/java/compiler/src/test/java/org/apache/avro/compiler/specific/TestSpecificCompiler.java&lt;br/&gt;
index e1210ac21..f0cb87ab1 100644&lt;br/&gt;
&amp;#8212; a/lang/java/compiler/src/test/java/org/apache/avro/compiler/specific/TestSpecificCompiler.java&lt;br/&gt;
+++ b/lang/java/compiler/src/test/java/org/apache/avro/compiler/specific/TestSpecificCompiler.java&lt;br/&gt;
@@ -474,6 +474,42 @@ public void testJavaUnboxJsr310DateTime() throws Exception {
         &quot;java.time.Instant&quot;, compiler.javaUnbox(timestampSchema));
   }&lt;br/&gt;
 &lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testNullableLogicalTypesJavaUnboxDecimalTypesEnabled() throws Exception {
+    SpecificCompiler compiler = createCompiler();
+    compiler.setEnableDecimalLogicalType(true);
+
+    // Nullable types should return boxed types instead of primitive types
+    Schema nullableDecimalSchema1 = Schema.createUnion(
+      Schema.create(Schema.Type.NULL), LogicalTypes.decimal(9,2)
+        .addToSchema(Schema.create(Schema.Type.BYTES)));
+    Schema nullableDecimalSchema2 = Schema.createUnion(
+      LogicalTypes.decimal(9,2)
+        .addToSchema(Schema.create(Schema.Type.BYTES)), Schema.create(Schema.Type.NULL));
+    Assert.assertEquals(&quot;Should return boxed type&quot;,
+      compiler.javaUnbox(nullableDecimalSchema1), &quot;java.math.BigDecimal&quot;);
+    Assert.assertEquals(&quot;Should return boxed type&quot;,
+      compiler.javaUnbox(nullableDecimalSchema2), &quot;java.math.BigDecimal&quot;);
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testNullableLogicalTypesJavaUnboxDecimalTypesDisabled() throws Exception {
+    SpecificCompiler compiler = createCompiler();
+    compiler.setEnableDecimalLogicalType(false);
+
+    // Since logical decimal types are disabled, a ByteBuffer is expected.
+    Schema nullableDecimalSchema1 = Schema.createUnion(
+      Schema.create(Schema.Type.NULL), LogicalTypes.decimal(9,2)
+        .addToSchema(Schema.create(Schema.Type.BYTES)));
+    Schema nullableDecimalSchema2 = Schema.createUnion(
+      LogicalTypes.decimal(9,2)
+        .addToSchema(Schema.create(Schema.Type.BYTES)), Schema.create(Schema.Type.NULL));
+    Assert.assertEquals(&quot;Should return boxed type&quot;,
+      compiler.javaUnbox(nullableDecimalSchema1), &quot;java.nio.ByteBuffer&quot;);
+    Assert.assertEquals(&quot;Should return boxed type&quot;,
+      compiler.javaUnbox(nullableDecimalSchema2), &quot;java.nio.ByteBuffer&quot;);
+  }&lt;br/&gt;
+&lt;br/&gt;
   @Test&lt;br/&gt;
   public void testNullableTypesJavaUnbox() throws Exception {&lt;br/&gt;
     SpecificCompiler compiler = createCompiler();&lt;br/&gt;
@@ -526,6 +562,76 @@ public void testNullableTypesJavaUnbox() throws Exception {
         compiler.javaUnbox(nullableBooleanSchema2), &quot;java.lang.Boolean&quot;);
   }&lt;br/&gt;
 &lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testGetUsedConversionClassesForNullableLogicalTypes() throws Exception {
+    SpecificCompiler compiler = createCompiler();
+    compiler.setEnableDecimalLogicalType(true);
+
+    Schema nullableDecimal1 = Schema.createUnion(
+      Schema.create(Schema.Type.NULL), LogicalTypes.decimal(9,2)
+        .addToSchema(Schema.create(Schema.Type.BYTES)));
+    Schema schemaWithNullableDecimal1 = Schema.createRecord(&quot;WithNullableDecimal&quot;, &quot;&quot;, &quot;&quot;, false, Collections.singletonList(new Schema.Field(&quot;decimal&quot;, nullableDecimal1, &quot;&quot;, null)));
+
+    final Collection&amp;lt;String&amp;gt; usedConversionClasses = compiler.getUsedConversionClasses(schemaWithNullableDecimal1);
+    Assert.assertEquals(1, usedConversionClasses.size());
+    Assert.assertEquals(&quot;org.apache.avro.Conversions.DecimalConversion&quot;, usedConversionClasses.iterator().next());
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testGetUsedConversionClassesForNullableLogicalTypesInNestedRecord() throws Exception {&lt;br/&gt;
+    SpecificCompiler compiler = createCompiler();&lt;br/&gt;
+&lt;br/&gt;
+    final Schema schema = new Schema.Parser().parse(&quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;NestedLogicalTypesRecord\&quot;,\&quot;namespace\&quot;:\&quot;org.apache.avro.codegentest.testdata\&quot;,\&quot;doc\&quot;:\&quot;Test nested types with logical types in generated Java classes\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;nestedRecord\&quot;,\&quot;type\&quot;:{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;NestedRecord\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;nullableDateField\&quot;,\&quot;type\&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\&amp;quot;null\&amp;quot;,{\&quot;type\&quot;:\&quot;int\&quot;,\&quot;logicalType\&quot;:\&quot;date\&quot;}&amp;#93;&lt;/span&gt;}]}}]}&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    final Collection&amp;lt;String&amp;gt; usedConversionClasses = compiler.getUsedConversionClasses(schema);&lt;br/&gt;
+    Assert.assertEquals(1, usedConversionClasses.size());&lt;br/&gt;
+    Assert.assertEquals(&quot;org.apache.avro.data.TimeConversions.DateConversion&quot;, usedConversionClasses.iterator().next());&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testGetUsedConversionClassesForNullableLogicalTypesInArray() throws Exception {&lt;br/&gt;
+    SpecificCompiler compiler = createCompiler();&lt;br/&gt;
+&lt;br/&gt;
+    final Schema schema = new Schema.Parser().parse(&quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;NullableLogicalTypesArray\&quot;,\&quot;namespace\&quot;:\&quot;org.apache.avro.codegentest.testdata\&quot;,\&quot;doc\&quot;:\&quot;Test nested types with logical types in generated Java classes\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;arrayOfLogicalType\&quot;,\&quot;type\&quot;:{\&quot;type\&quot;:\&quot;array\&quot;,\&quot;items\&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\&amp;quot;null\&amp;quot;,{\&quot;type\&quot;:\&quot;int\&quot;,\&quot;logicalType\&quot;:\&quot;date\&quot;}&amp;#93;&lt;/span&gt;}}]}&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    final Collection&amp;lt;String&amp;gt; usedConversionClasses = compiler.getUsedConversionClasses(schema);&lt;br/&gt;
+    Assert.assertEquals(1, usedConversionClasses.size());&lt;br/&gt;
+    Assert.assertEquals(&quot;org.apache.avro.data.TimeConversions.DateConversion&quot;, usedConversionClasses.iterator().next());&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testGetUsedConversionClassesForNullableLogicalTypesInArrayOfRecords() throws Exception {&lt;br/&gt;
+    SpecificCompiler compiler = createCompiler();&lt;br/&gt;
+&lt;br/&gt;
+    final Schema schema = new Schema.Parser().parse(&quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;NestedLogicalTypesArray\&quot;,\&quot;namespace\&quot;:\&quot;org.apache.avro.codegentest.testdata\&quot;,\&quot;doc\&quot;:\&quot;Test nested types with logical types in generated Java classes\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;arrayOfRecords\&quot;,\&quot;type\&quot;:{\&quot;type\&quot;:\&quot;array\&quot;,\&quot;items\&quot;:{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;RecordInArray\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;nullableDateField\&quot;,\&quot;type\&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\&amp;quot;null\&amp;quot;,{\&quot;type\&quot;:\&quot;int\&quot;,\&quot;logicalType\&quot;:\&quot;date\&quot;}&amp;#93;&lt;/span&gt;}]}}}]}&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    final Collection&amp;lt;String&amp;gt; usedConversionClasses = compiler.getUsedConversionClasses(schema);&lt;br/&gt;
+    Assert.assertEquals(1, usedConversionClasses.size());&lt;br/&gt;
+    Assert.assertEquals(&quot;org.apache.avro.data.TimeConversions.DateConversion&quot;, usedConversionClasses.iterator().next());&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testGetUsedConversionClassesForNullableLogicalTypesInUnionOfRecords() throws Exception {&lt;br/&gt;
+    SpecificCompiler compiler = createCompiler();&lt;br/&gt;
+&lt;br/&gt;
+    final Schema schema = new Schema.Parser().parse(&quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;NestedLogicalTypesUnion\&quot;,\&quot;namespace\&quot;:\&quot;org.apache.avro.codegentest.testdata\&quot;,\&quot;doc\&quot;:\&quot;Test nested types with logical types in generated Java classes\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;unionOfRecords\&quot;,\&quot;type\&quot;:[\&quot;null\&quot;,{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;RecordInUnion\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;nullableDateField\&quot;,\&quot;type\&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\&amp;quot;null\&amp;quot;,{\&quot;type\&quot;:\&quot;int\&quot;,\&quot;logicalType\&quot;:\&quot;date\&quot;}&amp;#93;&lt;/span&gt;}]}]}]}&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    final Collection&amp;lt;String&amp;gt; usedConversionClasses = compiler.getUsedConversionClasses(schema);&lt;br/&gt;
+    Assert.assertEquals(1, usedConversionClasses.size());&lt;br/&gt;
+    Assert.assertEquals(&quot;org.apache.avro.data.TimeConversions.DateConversion&quot;, usedConversionClasses.iterator().next());&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testGetUsedConversionClassesForNullableLogicalTypesInMapOfRecords() throws Exception {&lt;br/&gt;
+    SpecificCompiler compiler = createCompiler();&lt;br/&gt;
+&lt;br/&gt;
+    final Schema schema = new Schema.Parser().parse(&quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;NestedLogicalTypesMap\&quot;,\&quot;namespace\&quot;:\&quot;org.apache.avro.codegentest.testdata\&quot;,\&quot;doc\&quot;:\&quot;Test nested types with logical types in generated Java classes\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;mapOfRecords\&quot;,\&quot;type\&quot;:{\&quot;type\&quot;:\&quot;map\&quot;,\&quot;values\&quot;:{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;RecordInMap\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;nullableDateField\&quot;,\&quot;type\&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;\&amp;quot;null\&amp;quot;,{\&quot;type\&quot;:\&quot;int\&quot;,\&quot;logicalType\&quot;:\&quot;date\&quot;}&amp;#93;&lt;/span&gt;}]},\&quot;avro.java.string\&quot;:\&quot;String\&quot;}}]}&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    final Collection&amp;lt;String&amp;gt; usedConversionClasses = compiler.getUsedConversionClasses(schema);&lt;br/&gt;
+    Assert.assertEquals(1, usedConversionClasses.size());&lt;br/&gt;
+    Assert.assertEquals(&quot;org.apache.avro.data.TimeConversions.DateConversion&quot;, usedConversionClasses.iterator().next());&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
   @Test&lt;br/&gt;
   public void testLogicalTypesWithMultipleFields() throws Exception {
     Schema logicalTypesWithMultipleFields = new Schema.Parser().parse(
@@ -566,12 +672,12 @@ public void testConversionInstanceWithDecimalLogicalTypeDisabled() throws Except
     Schema uuidSchema = LogicalTypes.uuid()
         .addToSchema(Schema.create(Schema.Type.STRING));
 
-    Assert.assertEquals(&quot;Should use DATE_CONVERSION for date type&quot;,
-        &quot;DATE_CONVERSION&quot;, compiler.conversionInstance(dateSchema));
-    Assert.assertEquals(&quot;Should use TIME_CONVERSION for time type&quot;,
-        &quot;TIME_CONVERSION&quot;, compiler.conversionInstance(timeSchema));
-    Assert.assertEquals(&quot;Should use TIMESTAMP_CONVERSION for date type&quot;,
-        &quot;TIMESTAMP_CONVERSION&quot;, compiler.conversionInstance(timestampSchema));
+    Assert.assertEquals(&quot;Should use date conversion for date type&quot;,
+        &quot;new org.apache.avro.data.TimeConversions.DateConversion()&quot;, compiler.conversionInstance(dateSchema));
+    Assert.assertEquals(&quot;Should use time conversion for time type&quot;,
+        &quot;new org.apache.avro.data.TimeConversions.TimeConversion()&quot;, compiler.conversionInstance(timeSchema));
+    Assert.assertEquals(&quot;Should use timestamp conversion for date type&quot;,
+        &quot;new org.apache.avro.data.TimeConversions.TimestampConversion()&quot;, compiler.conversionInstance(timestampSchema));
     Assert.assertEquals(&quot;Should use null for decimal if the flag is off&quot;,
         &quot;null&quot;, compiler.conversionInstance(decimalSchema));
     Assert.assertEquals(&quot;Should use null for decimal if the flag is off&quot;,
@@ -595,14 +701,14 @@ public void testConversionInstanceWithDecimalLogicalTypeEnabled() throws Excepti
     Schema uuidSchema = LogicalTypes.uuid()
         .addToSchema(Schema.create(Schema.Type.STRING));
 
-    Assert.assertEquals(&quot;Should use DATE_CONVERSION for date type&quot;,
-        &quot;DATE_CONVERSION&quot;, compiler.conversionInstance(dateSchema));
-    Assert.assertEquals(&quot;Should use TIME_CONVERSION for time type&quot;,
-        &quot;TIME_CONVERSION&quot;, compiler.conversionInstance(timeSchema));
-    Assert.assertEquals(&quot;Should use TIMESTAMP_CONVERSION for date type&quot;,
-        &quot;TIMESTAMP_CONVERSION&quot;, compiler.conversionInstance(timestampSchema));
+    Assert.assertEquals(&quot;Should use date conversion for date type&quot;,
+            &quot;new org.apache.avro.data.TimeConversions.DateConversion()&quot;, compiler.conversionInstance(dateSchema));
+    Assert.assertEquals(&quot;Should use time conversion for time type&quot;,
+            &quot;new org.apache.avro.data.TimeConversions.TimeConversion()&quot;, compiler.conversionInstance(timeSchema));
+    Assert.assertEquals(&quot;Should use timestamp conversion for date type&quot;,
+            &quot;new org.apache.avro.data.TimeConversions.TimestampConversion()&quot;, compiler.conversionInstance(timestampSchema));
     Assert.assertEquals(&quot;Should use null for decimal if the flag is off&quot;,
-        &quot;DECIMAL_CONVERSION&quot;, compiler.conversionInstance(decimalSchema));
+        &quot;new org.apache.avro.Conversions.DecimalConversion()&quot;, compiler.conversionInstance(decimalSchema));
     Assert.assertEquals(&quot;Should use null for decimal if the flag is off&quot;,
         &quot;null&quot;, compiler.conversionInstance(uuidSchema));
   }&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/pom.xml b/lang/java/integration-test/codegen-test/pom.xml&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..2be8ad774&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/pom.xml&lt;br/&gt;
@@ -0,0 +1,91 @@&lt;br/&gt;
+&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
+&amp;lt;!--&lt;br/&gt;
+   Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+   contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+   this work for additional information regarding copyright ownership.&lt;br/&gt;
+   The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+   (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+   the License.  You may obtain a copy of the License at&lt;br/&gt;
+&lt;br/&gt;
+       &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+&lt;br/&gt;
+   Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+   See the License for the specific language governing permissions and&lt;br/&gt;
+   limitations under the License.&lt;br/&gt;
+--&amp;gt;&lt;br/&gt;
+&amp;lt;project&lt;br/&gt;
+  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 &lt;a href=&quot;http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/xsd/maven-4.0.0.xsd&lt;/a&gt;&quot;&lt;br/&gt;
+  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt;&lt;br/&gt;
+  &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;parent&amp;gt;&lt;br/&gt;
+    &amp;lt;artifactId&amp;gt;avro-integration-test&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+    &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+    &amp;lt;version&amp;gt;1.9.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;relativePath&amp;gt;../&amp;lt;/relativePath&amp;gt;&lt;br/&gt;
+  &amp;lt;/parent&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;artifactId&amp;gt;avro-codegen-test&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;name&amp;gt;Apache Avro Codegen Test&amp;lt;/name&amp;gt;&lt;br/&gt;
+  &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;&lt;br/&gt;
+  &amp;lt;url&amp;gt;&lt;a href=&quot;http://avro.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://avro.apache.org&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
+  &amp;lt;description&amp;gt;Tests generated Avro Specific Java API&amp;lt;/description&amp;gt;&lt;br/&gt;
+  &amp;lt;build&amp;gt;&lt;br/&gt;
+     &amp;lt;plugins&amp;gt;&lt;br/&gt;
+       &amp;lt;plugin&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;avro-maven-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+         &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+        &amp;lt;executions&amp;gt;&lt;br/&gt;
+          &amp;lt;execution&amp;gt;&lt;br/&gt;
+            &amp;lt;phase&amp;gt;generate-test-sources&amp;lt;/phase&amp;gt;&lt;br/&gt;
+            &amp;lt;goals&amp;gt;&lt;br/&gt;
+              &amp;lt;goal&amp;gt;schema&amp;lt;/goal&amp;gt;&lt;br/&gt;
+              &amp;lt;goal&amp;gt;protocol&amp;lt;/goal&amp;gt;&lt;br/&gt;
+              &amp;lt;goal&amp;gt;idl-protocol&amp;lt;/goal&amp;gt;&lt;br/&gt;
+            &amp;lt;/goals&amp;gt;&lt;br/&gt;
+            &amp;lt;configuration&amp;gt;&lt;br/&gt;
+              &amp;lt;stringType&amp;gt;String&amp;lt;/stringType&amp;gt;&lt;br/&gt;
+              &amp;lt;testSourceDirectory&amp;gt;${project.basedir}/src/test/resources/avro&amp;lt;/testSourceDirectory&amp;gt;&lt;br/&gt;
+              &amp;lt;testOutputDirectory&amp;gt;${project.build.directory}/generated-test-sources/java&amp;lt;/testOutputDirectory&amp;gt;&lt;br/&gt;
+              &amp;lt;enableDecimalLogicalType&amp;gt;true&amp;lt;/enableDecimalLogicalType&amp;gt;&lt;br/&gt;
+              &amp;lt;customConversions&amp;gt;&lt;br/&gt;
+                &amp;lt;conversion&amp;gt;org.apache.avro.codegentest.CustomDecimalConversion&amp;lt;/conversion&amp;gt;&lt;br/&gt;
+              &amp;lt;/customConversions&amp;gt;&lt;br/&gt;
+            &amp;lt;/configuration&amp;gt;&lt;br/&gt;
+          &amp;lt;/execution&amp;gt;&lt;br/&gt;
+        &amp;lt;/executions&amp;gt;&lt;br/&gt;
+         &amp;lt;dependencies&amp;gt;&lt;br/&gt;
+           &amp;lt;dependency&amp;gt;&lt;br/&gt;
+             &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+             &amp;lt;artifactId&amp;gt;avro-test-custom-conversions&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+             &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+           &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+         &amp;lt;/dependencies&amp;gt;&lt;br/&gt;
+      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+    &amp;lt;/plugins&amp;gt;&lt;br/&gt;
+  &amp;lt;/build&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;dependencies&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;${project.groupId}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;avro&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;${project.groupId}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;avro-compiler&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;${project.groupId}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;avro-test-custom-conversions&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+  &amp;lt;/dependencies&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+&amp;lt;/project&amp;gt;&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/AbstractSpecificRecordTest.java b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/AbstractSpecificRecordTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..9d8a273cc&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/AbstractSpecificRecordTest.java&lt;br/&gt;
@@ -0,0 +1,73 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.avro.codegentest;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.avro.io.DecoderFactory;&lt;br/&gt;
+import org.apache.avro.io.EncoderFactory;&lt;br/&gt;
+import org.apache.avro.specific.SpecificDatumReader;&lt;br/&gt;
+import org.apache.avro.specific.SpecificDatumWriter;&lt;br/&gt;
+import org.apache.avro.specific.SpecificRecordBase;&lt;br/&gt;
+import org.junit.Assert;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.ByteArrayInputStream;&lt;br/&gt;
+import java.io.ByteArrayOutputStream;&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+&lt;br/&gt;
+abstract class AbstractSpecificRecordTest {&lt;br/&gt;
+&lt;br/&gt;
+  @SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
+  &amp;lt;T extends SpecificRecordBase&amp;gt; void verifySerDeAndStandardMethods(T original) {
+    final SpecificDatumWriter&amp;lt;T&amp;gt; datumWriterFromSchema = new SpecificDatumWriter&amp;lt;&amp;gt;(original.getSchema());
+    final SpecificDatumReader&amp;lt;T&amp;gt; datumReaderFromSchema = new SpecificDatumReader&amp;lt;&amp;gt;(original.getSchema(), original.getSchema());
+    verifySerDeAndStandardMethods(original, datumWriterFromSchema, datumReaderFromSchema);
+    final SpecificDatumWriter&amp;lt;T&amp;gt; datumWriterFromClass = new SpecificDatumWriter(original.getClass());
+    final SpecificDatumReader&amp;lt;T&amp;gt; datumReaderFromClass = new SpecificDatumReader(original.getClass());
+    verifySerDeAndStandardMethods(original, datumWriterFromClass, datumReaderFromClass);
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private &amp;lt;T extends SpecificRecordBase&amp;gt; void verifySerDeAndStandardMethods(T original, SpecificDatumWriter&amp;lt;T&amp;gt; datumWriter, SpecificDatumReader&amp;lt;T&amp;gt; datumReader) {
+    final byte[] serialized = serialize(original, datumWriter);
+    final T copy = deserialize(serialized, datumReader);
+    Assert.assertEquals(original, copy);
+    // In addition to equals() tested above, make sure the other methods that use SpecificData work as intended
+    // compareTo() throws an exception for maps, otherwise we would have tested it here
+    // Assert.assertEquals(0, original.compareTo(copy));
+    Assert.assertEquals(original.hashCode(), copy.hashCode());
+    Assert.assertEquals(original.toString(), copy.toString());
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private &amp;lt;T extends SpecificRecordBase&amp;gt; byte[] serialize(T object, SpecificDatumWriter&amp;lt;T&amp;gt; datumWriter) {&lt;br/&gt;
+    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();&lt;br/&gt;
+    try {
+      datumWriter.write(object, EncoderFactory.get().directBinaryEncoder(outputStream, null));
+      return outputStream.toByteArray();
+    } catch (IOException e) {
+      throw new RuntimeException(e);
+    }&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
+  private &amp;lt;T extends SpecificRecordBase&amp;gt; T deserialize(byte[] bytes, SpecificDatumReader&amp;lt;T&amp;gt; datumReader) {&lt;br/&gt;
+    try {
+      final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bytes);
+      return datumReader.read(null, DecoderFactory.get().directBinaryDecoder(byteArrayInputStream, null));
+    } catch (IOException e) {+      throw new RuntimeException(e);+    }&lt;br/&gt;
+  }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestCustomConversion.java b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestCustomConversion.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..55e60a224&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestCustomConversion.java&lt;br/&gt;
@@ -0,0 +1,45 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.avro.codegentest;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.avro.codegentest.testdata.LogicalTypesWithCustomConversion;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+import java.math.BigInteger;&lt;br/&gt;
+&lt;br/&gt;
+public class TestCustomConversion extends AbstractSpecificRecordTest {&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testNullValues() throws IOException {
+        LogicalTypesWithCustomConversion instanceOfGeneratedClass = LogicalTypesWithCustomConversion.newBuilder()
+                .setNonNullCustomField(new CustomDecimal(BigInteger.valueOf(100), 2))
+                .build();
+        verifySerDeAndStandardMethods(instanceOfGeneratedClass);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testNonNullValues() throws IOException {
+        LogicalTypesWithCustomConversion instanceOfGeneratedClass = LogicalTypesWithCustomConversion.newBuilder()
+                .setNonNullCustomField(new CustomDecimal(BigInteger.valueOf(100), 2))
+                .setNullableCustomField(new CustomDecimal(BigInteger.valueOf(3000), 2))
+                .build();
+        verifySerDeAndStandardMethods(instanceOfGeneratedClass);
+    }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestLogicalTypesWithDefaults.java b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestLogicalTypesWithDefaults.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..c2d2d6d2f&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestLogicalTypesWithDefaults.java&lt;br/&gt;
@@ -0,0 +1,58 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.avro.codegentest;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.avro.codegentest.testdata.LogicalTypesWithDefaults;&lt;br/&gt;
+import org.joda.time.LocalDate;&lt;br/&gt;
+import org.junit.Assert;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+&lt;br/&gt;
+public class TestLogicalTypesWithDefaults extends AbstractSpecificRecordTest {&lt;br/&gt;
+&lt;br/&gt;
+    private static final LocalDate DEFAULT_VALUE = LocalDate.parse(&quot;1973-05-19&quot;);&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDefaultValueOfNullableField() throws IOException {
+        LogicalTypesWithDefaults instanceOfGeneratedClass = LogicalTypesWithDefaults.newBuilder()
+                .setNonNullDate(LocalDate.now())
+                .build();
+        verifySerDeAndStandardMethods(instanceOfGeneratedClass);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDefaultValueOfNonNullField() throws IOException {
+        LogicalTypesWithDefaults instanceOfGeneratedClass = LogicalTypesWithDefaults.newBuilder()
+                .setNullableDate(LocalDate.now())
+                .build();
+        Assert.assertEquals(DEFAULT_VALUE, instanceOfGeneratedClass.getNonNullDate());
+        verifySerDeAndStandardMethods(instanceOfGeneratedClass);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testWithValues() throws IOException {
+        LogicalTypesWithDefaults instanceOfGeneratedClass = LogicalTypesWithDefaults.newBuilder()
+                .setNullableDate(LocalDate.now())
+                .setNonNullDate(LocalDate.now())
+                .build();
+        verifySerDeAndStandardMethods(instanceOfGeneratedClass);
+    }&lt;br/&gt;
+&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestNestedLogicalTypes.java b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestNestedLogicalTypes.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..a33d038f0&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestNestedLogicalTypes.java&lt;br/&gt;
@@ -0,0 +1,67 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.avro.codegentest;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.avro.codegentest.testdata.*;&lt;br/&gt;
+import org.joda.time.LocalDate;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+&lt;br/&gt;
+public class TestNestedLogicalTypes extends AbstractSpecificRecordTest {&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testNullableLogicalTypeInNestedRecord() {
+    final NestedLogicalTypesRecord nestedLogicalTypesRecord =
+      NestedLogicalTypesRecord.newBuilder()
+        .setNestedRecord(NestedRecord.newBuilder()
+          .setNullableDateField(LocalDate.now()).build()).build();
+    verifySerDeAndStandardMethods(nestedLogicalTypesRecord);
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testNullableLogicalTypeInArray() {
+    final NullableLogicalTypesArray logicalTypesArray =
+      NullableLogicalTypesArray.newBuilder().setArrayOfLogicalType(Collections.singletonList(LocalDate.now())).build();
+    verifySerDeAndStandardMethods(logicalTypesArray);
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testNullableLogicalTypeInRecordInArray() {
+    final NestedLogicalTypesArray nestedLogicalTypesArray =
+      NestedLogicalTypesArray.newBuilder().setArrayOfRecords(Collections.singletonList(
+        RecordInArray.newBuilder().setNullableDateField(LocalDate.now()).build())).build();
+    verifySerDeAndStandardMethods(nestedLogicalTypesArray);
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testNullableLogicalTypeInRecordInUnion() {
+    final NestedLogicalTypesUnion nestedLogicalTypesUnion =
+      NestedLogicalTypesUnion.newBuilder().setUnionOfRecords(
+        RecordInUnion.newBuilder().setNullableDateField(LocalDate.now()).build()).build();
+    verifySerDeAndStandardMethods(nestedLogicalTypesUnion);
+  }&lt;br/&gt;
+&lt;br/&gt;
+  @Test&lt;br/&gt;
+  public void testNullableLogicalTypeInRecordInMap() {
+    final NestedLogicalTypesMap nestedLogicalTypesMap =
+      NestedLogicalTypesMap.newBuilder().setMapOfRecords(Collections.singletonMap(&quot;key&quot;,
+        RecordInMap.newBuilder().setNullableDateField(LocalDate.now()).build())).build();
+    verifySerDeAndStandardMethods(nestedLogicalTypesMap);
+  }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestNullableLogicalTypes.java b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestNullableLogicalTypes.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..3a44174dc&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/java/org/apache/avro/codegentest/TestNullableLogicalTypes.java&lt;br/&gt;
@@ -0,0 +1,45 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.avro.codegentest;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.avro.codegentest.testdata.NullableLogicalTypes;&lt;br/&gt;
+import org.joda.time.LocalDate;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.IOException;&lt;br/&gt;
+&lt;br/&gt;
+public class TestNullableLogicalTypes extends AbstractSpecificRecordTest {&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testWithNullValues() throws IOException {
+        NullableLogicalTypes instanceOfGeneratedClass = NullableLogicalTypes.newBuilder()
+                .setNullableDate(null)
+                .build();
+        verifySerDeAndStandardMethods(instanceOfGeneratedClass);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDate() throws IOException {
+        NullableLogicalTypes instanceOfGeneratedClass = NullableLogicalTypes.newBuilder()
+                .setNullableDate(LocalDate.now())
+                .build();
+        verifySerDeAndStandardMethods(instanceOfGeneratedClass);
+    }&lt;br/&gt;
+&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/custom_conversion.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/custom_conversion.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..ff33c39fa&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/custom_conversion.avsc&lt;br/&gt;
@@ -0,0 +1,12 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;LogicalTypesWithCustomConversion&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test unions with logical types in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&quot;name&quot;: &quot;nullableCustomField&quot;,  &quot;type&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;null&amp;quot;, {&quot;type&quot;: &quot;bytes&quot;, &quot;logicalType&quot;: &quot;decimal&quot;, &quot;precision&quot;: 9, &quot;scale&quot;: 2}&amp;#93;&lt;/span&gt;, &quot;default&quot;: null},&lt;br/&gt;
+    {&quot;name&quot;: &quot;nonNullCustomField&quot;,  &quot;type&quot;: {&quot;type&quot;: &quot;bytes&quot;, &quot;logicalType&quot;: &quot;decimal&quot;, &quot;precision&quot;: 9, &quot;scale&quot;: 2}}&lt;br/&gt;
+  ]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/logical_types_with_default_values.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/logical_types_with_default_values.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..d164b0a65&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/logical_types_with_default_values.avsc&lt;br/&gt;
@@ -0,0 +1,12 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;LogicalTypesWithDefaults&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test logical types and default values in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&quot;name&quot;: &quot;nullableDate&quot;,  &quot;type&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;{&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}, &amp;quot;null&amp;quot;&amp;#93;&lt;/span&gt;, &quot;default&quot;: 1234},&lt;br/&gt;
+    {&quot;name&quot;: &quot;nonNullDate&quot;,  &quot;type&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}, &quot;default&quot;: 1234}&lt;br/&gt;
+  ]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_array.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_array.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..c5eba1423&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_array.avsc&lt;br/&gt;
@@ -0,0 +1,26 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;NestedLogicalTypesArray&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test nested types with logical types in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&lt;br/&gt;
+      &quot;name&quot;: &quot;arrayOfRecords&quot;,&lt;br/&gt;
+      &quot;type&quot;: {&lt;br/&gt;
+        &quot;type&quot;: &quot;array&quot;,&lt;br/&gt;
+        &quot;items&quot;: {&lt;br/&gt;
+          &quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+          &quot;name&quot;: &quot;RecordInArray&quot;,&lt;br/&gt;
+          &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+          &quot;fields&quot;: [&lt;br/&gt;
+            {&lt;br/&gt;
+              &quot;name&quot;: &quot;nullableDateField&quot;,&lt;br/&gt;
+              &quot;type&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;null&amp;quot;, {&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}&amp;#93;&lt;/span&gt;&lt;br/&gt;
+            }&lt;br/&gt;
+          ]&lt;br/&gt;
+        }&lt;br/&gt;
+      }&lt;br/&gt;
+    }]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_map.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_map.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..f99e457db&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_map.avsc&lt;br/&gt;
@@ -0,0 +1,26 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;NestedLogicalTypesMap&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test nested types with logical types in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&lt;br/&gt;
+      &quot;name&quot;: &quot;mapOfRecords&quot;,&lt;br/&gt;
+      &quot;type&quot;: {&lt;br/&gt;
+        &quot;type&quot;: &quot;map&quot;,&lt;br/&gt;
+        &quot;values&quot;: {&lt;br/&gt;
+          &quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+          &quot;name&quot;: &quot;RecordInMap&quot;,&lt;br/&gt;
+          &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+          &quot;fields&quot;: [&lt;br/&gt;
+            {&lt;br/&gt;
+              &quot;name&quot;: &quot;nullableDateField&quot;,&lt;br/&gt;
+              &quot;type&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;null&amp;quot;, {&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}&amp;#93;&lt;/span&gt;&lt;br/&gt;
+            }&lt;br/&gt;
+          ]&lt;br/&gt;
+        }&lt;br/&gt;
+      }&lt;br/&gt;
+    }]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_record.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_record.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..d51ac8686&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_record.avsc&lt;br/&gt;
@@ -0,0 +1,23 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;NestedLogicalTypesRecord&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test nested types with logical types in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&lt;br/&gt;
+      &quot;name&quot;: &quot;nestedRecord&quot;,&lt;br/&gt;
+      &quot;type&quot;: {&lt;br/&gt;
+        &quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+        &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+        &quot;name&quot;: &quot;NestedRecord&quot;,&lt;br/&gt;
+        &quot;fields&quot;: [&lt;br/&gt;
+          {&lt;br/&gt;
+            &quot;name&quot;: &quot;nullableDateField&quot;,&lt;br/&gt;
+            &quot;type&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;null&amp;quot;, {&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}&amp;#93;&lt;/span&gt;&lt;br/&gt;
+          }&lt;br/&gt;
+        ]&lt;br/&gt;
+      }&lt;br/&gt;
+    }]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_union.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_union.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..44a495c4a&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/nested_logical_types_union.avsc&lt;br/&gt;
@@ -0,0 +1,23 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;NestedLogicalTypesUnion&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test nested types with logical types in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&lt;br/&gt;
+      &quot;name&quot;: &quot;unionOfRecords&quot;,&lt;br/&gt;
+      &quot;type&quot;: [&quot;null&quot;, {&lt;br/&gt;
+        &quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+        &quot;name&quot;: &quot;RecordInUnion&quot;,&lt;br/&gt;
+        &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+        &quot;fields&quot;: [&lt;br/&gt;
+          {&lt;br/&gt;
+            &quot;name&quot;: &quot;nullableDateField&quot;,&lt;br/&gt;
+            &quot;type&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;null&amp;quot;, {&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}&amp;#93;&lt;/span&gt;&lt;br/&gt;
+          }&lt;br/&gt;
+        ]&lt;br/&gt;
+      }]&lt;br/&gt;
+    }]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/nullable_logical_types.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/nullable_logical_types.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..0133133b4&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/nullable_logical_types.avsc&lt;br/&gt;
@@ -0,0 +1,11 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;NullableLogicalTypes&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test unions with logical types in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&quot;name&quot;: &quot;nullableDate&quot;,  &quot;type&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;null&amp;quot;, {&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}&amp;#93;&lt;/span&gt;, &quot;default&quot;: null}&lt;br/&gt;
+  ]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/codegen-test/src/test/resources/avro/nullable_logical_types_array.avsc b/lang/java/integration-test/codegen-test/src/test/resources/avro/nullable_logical_types_array.avsc&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..8e5caded5&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/codegen-test/src/test/resources/avro/nullable_logical_types_array.avsc&lt;br/&gt;
@@ -0,0 +1,16 @@&lt;br/&gt;
+{&quot;namespace&quot;: &quot;org.apache.avro.codegentest.testdata&quot;,&lt;br/&gt;
+  &quot;type&quot;: &quot;record&quot;,&lt;br/&gt;
+  &quot;name&quot;: &quot;NullableLogicalTypesArray&quot;,&lt;br/&gt;
+  &quot;doc&quot; : &quot;Test nested types with logical types in generated Java classes&quot;,&lt;br/&gt;
+  &quot;fields&quot;: [&lt;br/&gt;
+    {&lt;br/&gt;
+      &quot;name&quot;: &quot;arrayOfLogicalType&quot;,&lt;br/&gt;
+      &quot;type&quot;: {&lt;br/&gt;
+        &quot;type&quot;: &quot;array&quot;,&lt;br/&gt;
+        &quot;items&quot;: &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;null&amp;quot;, {&quot;type&quot;: &quot;int&quot;, &quot;logicalType&quot;: &quot;date&quot;}&amp;#93;&lt;/span&gt;&lt;br/&gt;
+      }&lt;br/&gt;
+    }]&lt;br/&gt;
+}&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/pom.xml b/lang/java/integration-test/pom.xml&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..226a0dcbf&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/pom.xml&lt;br/&gt;
@@ -0,0 +1,99 @@&lt;br/&gt;
+&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
+&amp;lt;!--&lt;br/&gt;
+   Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+   contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+   this work for additional information regarding copyright ownership.&lt;br/&gt;
+   The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+   (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+   the License.  You may obtain a copy of the License at&lt;br/&gt;
+&lt;br/&gt;
+       &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+&lt;br/&gt;
+   Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+   See the License for the specific language governing permissions and&lt;br/&gt;
+   limitations under the License.&lt;br/&gt;
+--&amp;gt;&lt;br/&gt;
+&amp;lt;project&lt;br/&gt;
+        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 &lt;a href=&quot;http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/xsd/maven-4.0.0.xsd&lt;/a&gt;&quot;&lt;br/&gt;
+        xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt;&lt;br/&gt;
+    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+    &amp;lt;parent&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;avro-parent&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;1.9.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
+        &amp;lt;relativePath&amp;gt;../&amp;lt;/relativePath&amp;gt;&lt;br/&gt;
+    &amp;lt;/parent&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+    &amp;lt;artifactId&amp;gt;avro-integration-test&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+    &amp;lt;name&amp;gt;Avro Integration Tests&amp;lt;/name&amp;gt;&lt;br/&gt;
+    &amp;lt;description&amp;gt;Integration tests for code generation or other things that are hard to test within the modules without creating circular Maven dependencies.&amp;lt;/description&amp;gt;&lt;br/&gt;
+    &amp;lt;url&amp;gt;&lt;a href=&quot;http://avro.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://avro.apache.org/&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
+    &amp;lt;packaging&amp;gt;pom&amp;lt;/packaging&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+    &amp;lt;modules&amp;gt;&lt;br/&gt;
+        &amp;lt;module&amp;gt;codegen-test&amp;lt;/module&amp;gt;&lt;br/&gt;
+        &amp;lt;module&amp;gt;test-custom-conversions&amp;lt;/module&amp;gt;&lt;br/&gt;
+    &amp;lt;/modules&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+    &amp;lt;build&amp;gt;&lt;br/&gt;
+        &amp;lt;pluginManagement&amp;gt;&lt;br/&gt;
+            &amp;lt;plugins&amp;gt;&lt;br/&gt;
+                &amp;lt;plugin&amp;gt;&lt;br/&gt;
+                    &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+                    &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+                    &amp;lt;version&amp;gt;${surefire-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+                    &amp;lt;configuration&amp;gt;&lt;br/&gt;
+                        &amp;lt;failIfNoTests&amp;gt;false&amp;lt;/failIfNoTests&amp;gt;&lt;br/&gt;
+                    &amp;lt;/configuration&amp;gt;&lt;br/&gt;
+                &amp;lt;/plugin&amp;gt;&lt;br/&gt;
+                &amp;lt;plugin&amp;gt;&lt;br/&gt;
+                    &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+                    &amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+                    &amp;lt;version&amp;gt;${compiler-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+                    &amp;lt;configuration&amp;gt;&lt;br/&gt;
+                        &amp;lt;source&amp;gt;1.8&amp;lt;/source&amp;gt;&lt;br/&gt;
+                        &amp;lt;target&amp;gt;1.8&amp;lt;/target&amp;gt;&lt;br/&gt;
+                    &amp;lt;/configuration&amp;gt;&lt;br/&gt;
+                &amp;lt;/plugin&amp;gt;&lt;br/&gt;
+                &amp;lt;plugin&amp;gt;&lt;br/&gt;
+                    &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+                    &amp;lt;artifactId&amp;gt;maven-checkstyle-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+                    &amp;lt;version&amp;gt;${checkstyle-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+                    &amp;lt;configuration&amp;gt;&lt;br/&gt;
+                        &amp;lt;consoleOutput&amp;gt;true&amp;lt;/consoleOutput&amp;gt;&lt;br/&gt;
+                        &amp;lt;configLocation&amp;gt;checkstyle.xml&amp;lt;/configLocation&amp;gt;&lt;br/&gt;
+                    &amp;lt;/configuration&amp;gt;&lt;br/&gt;
+                    &amp;lt;executions&amp;gt;&lt;br/&gt;
+                        &amp;lt;execution&amp;gt;&lt;br/&gt;
+                            &amp;lt;id&amp;gt;checkstyle-check&amp;lt;/id&amp;gt;&lt;br/&gt;
+                            &amp;lt;phase&amp;gt;test&amp;lt;/phase&amp;gt;&lt;br/&gt;
+                            &amp;lt;goals&amp;gt;&lt;br/&gt;
+                                &amp;lt;goal&amp;gt;check&amp;lt;/goal&amp;gt;&lt;br/&gt;
+                            &amp;lt;/goals&amp;gt;&lt;br/&gt;
+                        &amp;lt;/execution&amp;gt;&lt;br/&gt;
+                    &amp;lt;/executions&amp;gt;&lt;br/&gt;
+                &amp;lt;/plugin&amp;gt;&lt;br/&gt;
+                &amp;lt;plugin&amp;gt;&lt;br/&gt;
+                    &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+                    &amp;lt;artifactId&amp;gt;maven-jar-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+                    &amp;lt;version&amp;gt;${jar-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+                    &amp;lt;executions&amp;gt;&lt;br/&gt;
+                        &amp;lt;execution&amp;gt;&lt;br/&gt;
+                            &amp;lt;goals&amp;gt;&lt;br/&gt;
+                                &amp;lt;goal&amp;gt;test-jar&amp;lt;/goal&amp;gt;&lt;br/&gt;
+                            &amp;lt;/goals&amp;gt;&lt;br/&gt;
+                        &amp;lt;/execution&amp;gt;&lt;br/&gt;
+                    &amp;lt;/executions&amp;gt;&lt;br/&gt;
+                &amp;lt;/plugin&amp;gt;&lt;br/&gt;
+            &amp;lt;/plugins&amp;gt;&lt;br/&gt;
+        &amp;lt;/pluginManagement&amp;gt;&lt;br/&gt;
+    &amp;lt;/build&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+    &amp;lt;profiles&amp;gt;&lt;br/&gt;
+    &amp;lt;/profiles&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+&amp;lt;/project&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
diff --git a/lang/java/integration-test/test-custom-conversions/pom.xml b/lang/java/integration-test/test-custom-conversions/pom.xml&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..7bac7ae42&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/test-custom-conversions/pom.xml&lt;br/&gt;
@@ -0,0 +1,45 @@&lt;br/&gt;
+&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
+&amp;lt;!--&lt;br/&gt;
+   Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+   contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+   this work for additional information regarding copyright ownership.&lt;br/&gt;
+   The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+   (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+   the License.  You may obtain a copy of the License at&lt;br/&gt;
+&lt;br/&gt;
+       &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+&lt;br/&gt;
+   Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+   See the License for the specific language governing permissions and&lt;br/&gt;
+   limitations under the License.&lt;br/&gt;
+--&amp;gt;&lt;br/&gt;
+&amp;lt;project&lt;br/&gt;
+  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 &lt;a href=&quot;http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/xsd/maven-4.0.0.xsd&lt;/a&gt;&quot;&lt;br/&gt;
+  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt;&lt;br/&gt;
+  &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;parent&amp;gt;&lt;br/&gt;
+    &amp;lt;artifactId&amp;gt;avro-integration-test&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+    &amp;lt;groupId&amp;gt;org.apache.avro&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+    &amp;lt;version&amp;gt;1.9.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;relativePath&amp;gt;../&amp;lt;/relativePath&amp;gt;&lt;br/&gt;
+  &amp;lt;/parent&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;artifactId&amp;gt;avro-test-custom-conversions&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;name&amp;gt;Apache Avro Codegen Test dependencies&amp;lt;/name&amp;gt;&lt;br/&gt;
+  &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;&lt;br/&gt;
+  &amp;lt;url&amp;gt;&lt;a href=&quot;http://avro.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://avro.apache.org&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
+  &amp;lt;description&amp;gt;Contains dependencies for the maven plugin used in avro-codegen-test&amp;lt;/description&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+  &amp;lt;dependencies&amp;gt;&lt;br/&gt;
+    &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;${project.groupId}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;avro&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+  &amp;lt;/dependencies&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+&amp;lt;/project&amp;gt;&lt;br/&gt;
diff --git a/lang/java/integration-test/test-custom-conversions/src/main/java/org.apache.avro.codegentest/CustomDecimal.java b/lang/java/integration-test/test-custom-conversions/src/main/java/org.apache.avro.codegentest/CustomDecimal.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..1d4f40c7e&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/test-custom-conversions/src/main/java/org.apache.avro.codegentest/CustomDecimal.java&lt;br/&gt;
@@ -0,0 +1,65 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.avro.codegentest;&lt;br/&gt;
+&lt;br/&gt;
+import java.math.BigDecimal;&lt;br/&gt;
+import java.math.BigInteger;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Wraps a BigDecimal just to demonstrate that it is possible to use custom implementation classes with custom conversions.&lt;br/&gt;
+ */&lt;br/&gt;
+public class CustomDecimal implements Comparable&amp;lt;CustomDecimal&amp;gt; {&lt;br/&gt;
+&lt;br/&gt;
+    private final BigDecimal internalValue;&lt;br/&gt;
+&lt;br/&gt;
+    public CustomDecimal(BigInteger value, int scale) {
+        internalValue = new BigDecimal(value, scale);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    public byte[] toByteArray(int scale) {&lt;br/&gt;
+        final BigDecimal correctlyScaledValue;&lt;br/&gt;
+        if (scale != internalValue.scale()) {
+            correctlyScaledValue = internalValue.setScale(scale, BigDecimal.ROUND_HALF_UP);
+        } else {
+            correctlyScaledValue = internalValue;
+        }&lt;br/&gt;
+        return correctlyScaledValue.unscaledValue().toByteArray();&lt;br/&gt;
+&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public boolean equals(Object o) {
+        if (this == o) return true;
+        if (o == null || getClass() != o.getClass()) return false;
+
+        CustomDecimal that = (CustomDecimal) o;
+
+        return internalValue.equals(that.internalValue);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public int hashCode() {
+        return internalValue.hashCode();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public int compareTo(CustomDecimal o) {
+        return this.internalValue.compareTo(o.internalValue);
+    }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/lang/java/integration-test/test-custom-conversions/src/main/java/org.apache.avro.codegentest/CustomDecimalConversion.java b/lang/java/integration-test/test-custom-conversions/src/main/java/org.apache.avro.codegentest/CustomDecimalConversion.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..7c200ad0b&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lang/java/integration-test/test-custom-conversions/src/main/java/org.apache.avro.codegentest/CustomDecimalConversion.java&lt;br/&gt;
@@ -0,0 +1,52 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.avro.codegentest;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.avro.Conversion;&lt;br/&gt;
+import org.apache.avro.LogicalType;&lt;br/&gt;
+import org.apache.avro.LogicalTypes;&lt;br/&gt;
+import org.apache.avro.Schema;&lt;br/&gt;
+&lt;br/&gt;
+import java.math.BigInteger;&lt;br/&gt;
+import java.nio.ByteBuffer;&lt;br/&gt;
+&lt;br/&gt;
+public class CustomDecimalConversion extends Conversion&amp;lt;CustomDecimal&amp;gt; {&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Class&amp;lt;CustomDecimal&amp;gt; getConvertedType() {
+        return CustomDecimal.class;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String getLogicalTypeName() {
+        return &quot;decimal&quot;;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    public CustomDecimal fromBytes(ByteBuffer value, Schema schema, LogicalType type) {
+        int scale = ((LogicalTypes.Decimal)type).getScale();
+        byte[] bytes = value.get(new byte[value.remaining()]).array();
+        return new CustomDecimal(new BigInteger(bytes), scale);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    public ByteBuffer toBytes(CustomDecimal value, Schema schema, LogicalType type) {
+        int scale = ((LogicalTypes.Decimal)type).getScale();
+        return ByteBuffer.wrap(value.toByteArray(scale));
+    }&lt;br/&gt;
+&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/lang/java/mapred/pom.xml b/lang/java/mapred/pom.xml&lt;br/&gt;
index 4309b6709..5bffd2649 100644&lt;br/&gt;
&amp;#8212; a/lang/java/mapred/pom.xml&lt;br/&gt;
+++ b/lang/java/mapred/pom.xml&lt;br/&gt;
@@ -48,6 +48,18 @@&lt;br/&gt;
 &lt;br/&gt;
   &amp;lt;build&amp;gt;&lt;br/&gt;
     &amp;lt;plugins&amp;gt;&lt;br/&gt;
+      &amp;lt;plugin&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;maven-jar-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;${jar-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+        &amp;lt;executions&amp;gt;&lt;br/&gt;
+          &amp;lt;execution&amp;gt;&lt;br/&gt;
+            &amp;lt;goals&amp;gt;&lt;br/&gt;
+              &amp;lt;goal&amp;gt;test-jar&amp;lt;/goal&amp;gt;&lt;br/&gt;
+            &amp;lt;/goals&amp;gt;&lt;br/&gt;
+          &amp;lt;/execution&amp;gt;&lt;br/&gt;
+        &amp;lt;/executions&amp;gt;&lt;br/&gt;
+      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
       &amp;lt;plugin&amp;gt;&lt;br/&gt;
         &amp;lt;groupId&amp;gt;${project.groupId}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
         &amp;lt;artifactId&amp;gt;avro-maven-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
diff --git a/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/AbstractAvroMojo.java b/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/AbstractAvroMojo.java&lt;br/&gt;
index 23b77d5be..0d7fbee7a 100644&lt;br/&gt;
&amp;#8212; a/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/AbstractAvroMojo.java&lt;br/&gt;
+++ b/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/AbstractAvroMojo.java&lt;br/&gt;
@@ -20,10 +20,16 @@&lt;br/&gt;
 &lt;br/&gt;
 import java.io.File;&lt;br/&gt;
 import java.io.IOException;&lt;br/&gt;
+import java.net.MalformedURLException;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.net.URLClassLoader;&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
 import java.util.Arrays;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
 &lt;br/&gt;
 import org.apache.avro.compiler.specific.SpecificCompiler;&lt;br/&gt;
 import org.apache.avro.compiler.specific.SpecificCompiler.DateTimeLogicalTypeImplementation;&lt;br/&gt;
+import org.apache.maven.artifact.DependencyResolutionRequiredException;&lt;br/&gt;
 import org.apache.maven.plugin.AbstractMojo;&lt;br/&gt;
 import org.apache.maven.plugin.MojoExecutionException;&lt;br/&gt;
 import org.apache.maven.project.MavenProject;&lt;br/&gt;
@@ -141,6 +147,14 @@&lt;br/&gt;
    */&lt;br/&gt;
   protected boolean createSetters;&lt;br/&gt;
 &lt;br/&gt;
+  /**&lt;br/&gt;
+   * A set of fully qualified class names of custom {@link org.apache.avro.Conversion}
&lt;p&gt; implementations to add to the compiler.&lt;br/&gt;
+   * The classes must be on the classpath at compile time and whenever the Java objects are serialized.&lt;br/&gt;
+   *&lt;br/&gt;
+   * @parameter property=&quot;customConversions&quot;&lt;br/&gt;
+   */&lt;br/&gt;
+  protected String[] customConversions = new String&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+&lt;br/&gt;
   /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Determines whether or not to use Java classes for decimal types&lt;br/&gt;
    *&lt;br/&gt;
@@ -282,6 +296,24 @@ protected DateTimeLogicalTypeImplementation getDateTimeLogicalTypeImplementation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   protected abstract void doCompile(String filename, File sourceDirectory, File outputDirectory) throws IOException;&lt;/p&gt;

&lt;p&gt;+  protected URLClassLoader createClassLoader() throws DependencyResolutionRequiredException, MalformedURLException &lt;/p&gt;
{
+    List&amp;lt;URL&amp;gt; urls = appendElements(project.getRuntimeClasspathElements());
+    urls.addAll(appendElements(project.getTestClasspathElements()));
+    return new URLClassLoader(urls.toArray(new URL[urls.size()]),
+            Thread.currentThread().getContextClassLoader());
+  }
&lt;p&gt;+&lt;br/&gt;
+  private List&amp;lt;URL&amp;gt; appendElements(List runtimeClasspathElements) throws MalformedURLException {&lt;br/&gt;
+    List&amp;lt;URL&amp;gt; runtimeUrls = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
+    if (runtimeClasspathElements != null) {&lt;br/&gt;
+      for (Object runtimeClasspathElement : runtimeClasspathElements) &lt;/p&gt;
{
+        String element = (String) runtimeClasspathElement;
+        runtimeUrls.add(new File(element).toURI().toURL());
+      }
&lt;p&gt;+    }&lt;br/&gt;
+    return runtimeUrls;&lt;br/&gt;
+  }&lt;br/&gt;
+&lt;br/&gt;
   protected abstract String[] getIncludes();&lt;/p&gt;

&lt;p&gt;   protected abstract String[] getTestIncludes();&lt;br/&gt;
diff --git a/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/IDLProtocolMojo.java b/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/IDLProtocolMojo.java&lt;br/&gt;
index da1ae3322..973090137 100644&lt;br/&gt;
&amp;#8212; a/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/IDLProtocolMojo.java&lt;br/&gt;
+++ b/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/IDLProtocolMojo.java&lt;br/&gt;
@@ -82,7 +82,6 @@ protected void doCompile(String filename, File sourceDirectory, File outputDirec&lt;/p&gt;

&lt;p&gt;       URLClassLoader projPathLoader = new URLClassLoader&lt;br/&gt;
           (runtimeUrls.toArray(new URL&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;), Thread.currentThread().getContextClassLoader());&lt;br/&gt;
-&lt;br/&gt;
       try (Idl parser = new Idl(new File(sourceDirectory, filename), projPathLoader)) {&lt;/p&gt;

&lt;p&gt;         Protocol p = parser.CompilationUnit();&lt;br/&gt;
@@ -96,6 +95,9 @@ protected void doCompile(String filename, File sourceDirectory, File outputDirec&lt;br/&gt;
         compiler.setGettersReturnOptional(gettersReturnOptional);&lt;br/&gt;
         compiler.setCreateSetters(createSetters);&lt;br/&gt;
         compiler.setEnableDecimalLogicalType(enableDecimalLogicalType);&lt;br/&gt;
+        for (String customConversion : customConversions) &lt;/p&gt;
{
+          compiler.addCustomConversion(projPathLoader.loadClass(customConversion));
+        }
&lt;p&gt;         compiler.setOutputCharacterEncoding(project.getProperties().getProperty(&quot;project.build.sourceEncoding&quot;));&lt;br/&gt;
         compiler.compileToDestination(null, outputDirectory);&lt;br/&gt;
       }&lt;br/&gt;
@@ -103,6 +105,8 @@ protected void doCompile(String filename, File sourceDirectory, File outputDirec&lt;br/&gt;
       throw new IOException(e);&lt;br/&gt;
     } catch (DependencyResolutionRequiredException drre) &lt;/p&gt;
{
       throw new IOException(drre);
+    }
&lt;p&gt; catch (ClassNotFoundException e) &lt;/p&gt;
{
+      throw new IOException(e);
     }
&lt;p&gt;   }&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/ProtocolMojo.java b/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/ProtocolMojo.java&lt;br/&gt;
index d4b3bf544..ab789031f 100644&lt;br/&gt;
&amp;#8212; a/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/ProtocolMojo.java&lt;br/&gt;
+++ b/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/ProtocolMojo.java&lt;br/&gt;
@@ -22,15 +22,18 @@&lt;/p&gt;

&lt;p&gt; import java.io.File;&lt;br/&gt;
 import java.io.IOException;&lt;br/&gt;
+import java.net.URLClassLoader;&lt;/p&gt;

&lt;p&gt; import org.apache.avro.Protocol;&lt;br/&gt;
 import org.apache.avro.compiler.specific.SpecificCompiler;&lt;br/&gt;
+import org.apache.maven.artifact.DependencyResolutionRequiredException;&lt;/p&gt;

&lt;p&gt; /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Generate Java classes and interfaces from Avro protocol files (.avpr)&lt;br/&gt;
  *&lt;/li&gt;
	&lt;li&gt;@goal protocol&lt;/li&gt;
	&lt;li&gt;@phase generate-sources&lt;br/&gt;
+ * @requiresDependencyResolution runtime&lt;/li&gt;
	&lt;li&gt;@threadSafe&lt;br/&gt;
  */&lt;br/&gt;
 public class ProtocolMojo extends AbstractAvroMojo {&lt;br/&gt;
@@ -64,6 +67,17 @@ protected void doCompile(String filename, File sourceDirectory, File outputDirec&lt;br/&gt;
     compiler.setGettersReturnOptional(gettersReturnOptional);&lt;br/&gt;
     compiler.setCreateSetters(createSetters);&lt;br/&gt;
     compiler.setEnableDecimalLogicalType(enableDecimalLogicalType);&lt;br/&gt;
+    final URLClassLoader classLoader;&lt;br/&gt;
+    try 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+      classLoader = createClassLoader();+      for (String customConversion }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; catch (ClassNotFoundException e) &lt;/p&gt;
{
+      throw new IOException(e);
+    } catch (DependencyResolutionRequiredException e) {+      throw new IOException(e);+    }
&lt;p&gt;     compiler.setOutputCharacterEncoding(project.getProperties().getProperty(&quot;project.build.sourceEncoding&quot;));&lt;br/&gt;
     compiler.compileToDestination(src, outputDirectory);&lt;br/&gt;
   }&lt;br/&gt;
diff --git a/lang/java/pom.xml b/lang/java/pom.xml&lt;br/&gt;
index 773d71c5e..8e5bffae2 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/pom.xml&lt;br/&gt;
+++ b/lang/java/pom.xml&lt;br/&gt;
@@ -95,6 +95,7 @@&lt;br/&gt;
     &amp;lt;module&amp;gt;thrift&amp;lt;/module&amp;gt;&lt;br/&gt;
     &amp;lt;module&amp;gt;archetypes&amp;lt;/module&amp;gt;&lt;br/&gt;
     &amp;lt;module&amp;gt;grpc&amp;lt;/module&amp;gt;&lt;br/&gt;
+    &amp;lt;module&amp;gt;integration-test&amp;lt;/module&amp;gt;&lt;br/&gt;
   &amp;lt;/modules&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;build&amp;gt;&lt;br/&gt;
diff --git a/lang/java/tools/src/test/compiler/output-string/avro/examples/baseball/Player.java b/lang/java/tools/src/test/compiler/output-string/avro/examples/baseball/Player.java&lt;br/&gt;
index 531cc6fd9..691831c5a 100644&lt;br/&gt;
&amp;#8212; a/lang/java/tools/src/test/compiler/output-string/avro/examples/baseball/Player.java&lt;br/&gt;
+++ b/lang/java/tools/src/test/compiler/output-string/avro/examples/baseball/Player.java&lt;br/&gt;
@@ -99,6 +99,7 @@ public Player(java.lang.Integer number, java.lang.String first_name, java.lang.S&lt;br/&gt;
     this.position = position;&lt;br/&gt;
   }&lt;/p&gt;

&lt;p&gt;+  public org.apache.avro.specific.SpecificData getSpecificData() &lt;/p&gt;
{ return MODEL$; }&lt;br/&gt;
   public org.apache.avro.Schema getSchema() { return SCHEMA$; }&lt;br/&gt;
   // Used by DatumWriter.  Applications should not call.&lt;br/&gt;
   public java.lang.Object get(int field$) {
diff --git a/lang/java/tools/src/test/compiler/output/Player.java b/lang/java/tools/src/test/compiler/output/Player.java
index 94fc7d0b3..869239589 100644
--- a/lang/java/tools/src/test/compiler/output/Player.java
+++ b/lang/java/tools/src/test/compiler/output/Player.java
@@ -99,6 +99,7 @@ public Player(java.lang.Integer number, java.lang.CharSequence first_name, java.
     this.position = position;
   }&lt;br/&gt;
 &lt;br/&gt;
+  public org.apache.avro.specific.SpecificData getSpecificData() { return MODEL$; }
&lt;p&gt;   public org.apache.avro.Schema getSchema() &lt;/p&gt;
{ return SCHEMA$; }
&lt;p&gt;   // Used by DatumWriter.  Applications should not call.&lt;br/&gt;
   public java.lang.Object get(int field$) {&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717770" author="jira-bot" created="Tue, 11 Dec 2018 19:07:15 +0000"  >&lt;p&gt;Commit 7ed38d7c7e150987ef8bf035196576fc158e03eb in avro&apos;s branch refs/heads/master from Katrin Skoglund&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=7ed38d7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=7ed38d7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt; (#329)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Added end-to-end test that reproduces union with logical types problem&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Adding required conversions to SpecificData in generated class&lt;br/&gt;
(same as in SpecificCompiler)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added test with BigDecimal&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added test with BigDecimal&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Introduced customizable conversions in compiler and Maven plugin.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed bug&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed Maven plugin classpath&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Get the correct SpecificData whenever possible, to get the right conversions&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;No need to expose the map of conversions so expose only the values.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Better tests&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Default values and conversions&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Cleanup of some changes in Maven plugin&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed equals() for classes with nested logical types. Improved tests&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added missing copyright statement&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed compile error after rebase&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed problem with logical types in nested records.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed failing test.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed serialization problem when creating SpecificDatumReader from a class&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16717777" author="githubbot" created="Tue, 11 Dec 2018 19:09:40 +0000"  >&lt;p&gt;dkulp commented on issue #118: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1891&quot; title=&quot;Generated Java code fails with union containing logical type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1891&quot;&gt;AVRO-1891&lt;/a&gt;: Fix specific nested logical types&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/118#issuecomment-446323747&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/118#issuecomment-446323747&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I merged #329, is this not needed now?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16719939" author="jira-bot" created="Thu, 13 Dec 2018 08:56:59 +0000"  >&lt;p&gt;Commit 7ed38d7c7e150987ef8bf035196576fc158e03eb in avro&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2238&quot; title=&quot;Update Docker image from java to openjdk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2238&quot;&gt;AVRO-2238&lt;/a&gt; from Katrin Skoglund&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=7ed38d7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=7ed38d7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Improved conversions handling + pluggable conversions support &lt;span class=&quot;error&quot;&gt;&amp;#91;AVRO-1891, AVRO-2065&amp;#93;&lt;/span&gt; (#329)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Added end-to-end test that reproduces union with logical types problem&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Adding required conversions to SpecificData in generated class&lt;br/&gt;
(same as in SpecificCompiler)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added test with BigDecimal&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added test with BigDecimal&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Introduced customizable conversions in compiler and Maven plugin.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed bug&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed Maven plugin classpath&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Get the correct SpecificData whenever possible, to get the right conversions&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;No need to expose the map of conversions so expose only the values.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Better tests&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Default values and conversions&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Cleanup of some changes in Maven plugin&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed equals() for classes with nested logical types. Improved tests&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added missing copyright statement&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed compile error after rebase&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed problem with logical types in nested records.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed failing test.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed serialization problem when creating SpecificDatumReader from a class&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13147241">AVRO-2163</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13094383">AVRO-2065</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12826645" name="AVRO-1891.patch" size="17186" author="tomwhite" created="Thu, 1 Sep 2016 15:11:06 +0000"/>
                            <attachment id="12826766" name="AVRO-1891.yshi.1.patch" size="36233" author="Yibing" created="Fri, 2 Sep 2016 05:26:21 +0000"/>
                            <attachment id="12826820" name="AVRO-1891.yshi.2.patch" size="43462" author="Yibing" created="Fri, 2 Sep 2016 13:25:16 +0000"/>
                            <attachment id="12826855" name="AVRO-1891.yshi.3.patch" size="50838" author="Yibing" created="Fri, 2 Sep 2016 14:47:57 +0000"/>
                            <attachment id="12826970" name="AVRO-1891.yshi.4.patch" size="48606" author="Yibing" created="Sat, 3 Sep 2016 11:15:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Aug 2016 13:43:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31sav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1892] Cannot use avro_writer_file with a big schema</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1892</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The schema buffer (defined in datafile.c) is too small for the schema I&apos;m trying to write (112KB) and there is no option to change the size.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12994404">AVRO-1892</key>
            <summary>Cannot use avro_writer_file with a big schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cangussu">Thiago Cangussu de Castro Gomes</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2016 22:04:01 +0000</created>
                <updated>Tue, 2 Aug 2016 22:04:01 +0000</updated>
                                                                            <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31to7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
