<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:24:06 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2016-9-28+AND+created+%3C%3D+2016-10-5+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="1" total="1"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1929] SchemaCompatibility fails to recognize string&lt;-&gt;bytes promotion</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1929</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The class SchemaCompatibility fails to realize the change made as of &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1553&quot; title=&quot;MapReduce never uses MapOutputValueSchema &quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1553&quot;&gt;&lt;del&gt;AVRO-1553&lt;/del&gt;&lt;/a&gt;, where string-to/from-bytes promotions were allowed (according to docs, this was integrated into 1.7.7)&lt;br/&gt;
The submitted fix corrects this (also updating the relevant unit test)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Any Java env&lt;/p&gt;</environment>
        <key id="13009557">AVRO-1929</key>
            <summary>SchemaCompatibility fails to recognize string&lt;-&gt;bytes promotion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="epkanol">Anders Sundelin</assignee>
                                    <reporter username="epkanol">Anders Sundelin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 13:57:25 +0000</created>
                <updated>Fri, 18 Aug 2017 14:57:36 +0000</updated>
                            <resolved>Fri, 18 Aug 2017 14:57:36 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.8.0</version>
                    <version>1.8.1</version>
                    <version>1.9.0</version>
                                    <fixVersion>1.7.8</fixVersion>
                    <fixVersion>1.9.0</fixVersion>
                    <fixVersion>1.8.2</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15545417" author="epkanol" created="Tue, 4 Oct 2016 13:59:34 +0000"  >&lt;p&gt;diff --git a/lang/java/avro/src/main/java/org/apache/avro/SchemaCompatibility.java b/lang/java/avro/src/main/java/org/apache/avro/SchemaCompatibility.java&lt;br/&gt;
index e62ea0b..9ac6dc8 100644&lt;br/&gt;
&amp;#8212; a/lang/java/avro/src/main/java/org/apache/avro/SchemaCompatibility.java&lt;br/&gt;
+++ b/lang/java/avro/src/main/java/org/apache/avro/SchemaCompatibility.java&lt;br/&gt;
@@ -379,8 +379,17 @@ public class SchemaCompatibility &lt;/p&gt;
{
                 ? SchemaCompatibilityType.COMPATIBLE
                 : SchemaCompatibilityType.INCOMPATIBLE;
           }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;case BYTES: return SchemaCompatibilityType.INCOMPATIBLE;&lt;/li&gt;
	&lt;li&gt;case STRING: return SchemaCompatibilityType.INCOMPATIBLE;&lt;br/&gt;
+          case BYTES: 
{
+              return (writer.getType() == Type.STRING)
+                      ? SchemaCompatibilityType.COMPATIBLE
+                      : SchemaCompatibilityType.INCOMPATIBLE;
+                }
&lt;p&gt;+          case STRING: &lt;/p&gt;
{
+              return (writer.getType() == Type.BYTES)
+                  ? SchemaCompatibilityType.COMPATIBLE
+                  : SchemaCompatibilityType.INCOMPATIBLE;
+            }
&lt;p&gt;+&lt;br/&gt;
           case ARRAY: return SchemaCompatibilityType.INCOMPATIBLE;&lt;br/&gt;
           case MAP: return SchemaCompatibilityType.INCOMPATIBLE;&lt;br/&gt;
           case FIXED: return SchemaCompatibilityType.INCOMPATIBLE;&lt;br/&gt;
diff --git a/lang/java/avro/src/test/java/org/apache/avro/TestSchemaCompatibility.java b/lang/java/avro/src/test/java/org/apache/avro/TestSchemaCompatibility.java&lt;br/&gt;
index 9b8cde1..5ff7225 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/avro/src/test/java/org/apache/avro/TestSchemaCompatibility.java&lt;br/&gt;
+++ b/lang/java/avro/src/test/java/org/apache/avro/TestSchemaCompatibility.java&lt;br/&gt;
@@ -17,8 +17,8 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.avro;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-import static junit.framework.Assert.assertEquals;&lt;br/&gt;
 import static org.apache.avro.SchemaCompatibility.checkReaderWriterCompatibility;&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;/p&gt;

&lt;p&gt; import java.io.ByteArrayOutputStream;&lt;br/&gt;
 import java.util.ArrayList;&lt;br/&gt;
@@ -352,6 +352,10 @@ public class TestSchemaCompatibility {&lt;/p&gt;

&lt;p&gt;       new ReaderWriter(ENUM1_AB_SCHEMA, ENUM1_AB_SCHEMA),&lt;br/&gt;
       new ReaderWriter(ENUM1_ABC_SCHEMA, ENUM1_AB_SCHEMA),&lt;br/&gt;
+      &lt;br/&gt;
+      // String-to/from-bytes, introduced in Avro 1.7.7&lt;br/&gt;
+      new ReaderWriter(STRING_SCHEMA, BYTES_SCHEMA),&lt;br/&gt;
+      new ReaderWriter(BYTES_SCHEMA, STRING_SCHEMA),&lt;/p&gt;

&lt;p&gt;       // Tests involving unions:&lt;br/&gt;
       new ReaderWriter(EMPTY_UNION_SCHEMA, EMPTY_UNION_SCHEMA),&lt;br/&gt;
@@ -412,11 +416,9 @@ public class TestSchemaCompatibility {&lt;/p&gt;

&lt;p&gt;       new ReaderWriter(STRING_SCHEMA, BOOLEAN_SCHEMA),&lt;br/&gt;
       new ReaderWriter(STRING_SCHEMA, INT_SCHEMA),&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;new ReaderWriter(STRING_SCHEMA, BYTES_SCHEMA),&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       new ReaderWriter(BYTES_SCHEMA, NULL_SCHEMA),&lt;br/&gt;
       new ReaderWriter(BYTES_SCHEMA, INT_SCHEMA),&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;new ReaderWriter(BYTES_SCHEMA, STRING_SCHEMA),&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       new ReaderWriter(INT_ARRAY_SCHEMA, LONG_ARRAY_SCHEMA),&lt;br/&gt;
       new ReaderWriter(INT_MAP_SCHEMA, INT_ARRAY_SCHEMA),&lt;/p&gt;</comment>
                            <comment id="15545441" author="gszadovszky" created="Tue, 4 Oct 2016 14:08:26 +0000"  >&lt;p&gt;Thanks for the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=epkanol&quot; class=&quot;user-hover&quot; rel=&quot;epkanol&quot;&gt;Anders Sundelin&lt;/a&gt;.&lt;br/&gt;
Could you please attach it in a separate patch file or create a pull request? (See &lt;a href=&quot;https://cwiki.apache.org/confluence/display/AVRO/How+To+Contribute#HowToContribute-Contributingyourcode&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/AVRO/How+To+Contribute#HowToContribute-Contributingyourcode&lt;/a&gt; for details.)&lt;/p&gt;</comment>
                            <comment id="15545467" author="epkanol" created="Tue, 4 Oct 2016 14:21:15 +0000"  >&lt;p&gt;Patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1929&quot; title=&quot;SchemaCompatibility fails to recognize string&amp;lt;-&amp;gt;bytes promotion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1929&quot;&gt;&lt;del&gt;AVRO-1929&lt;/del&gt;&lt;/a&gt; issue&lt;/p&gt;</comment>
                            <comment id="15545469" author="epkanol" created="Tue, 4 Oct 2016 14:21:47 +0000"  >&lt;p&gt;This time, added the patch as a attached file&lt;br/&gt;
HTH&lt;br/&gt;
/Anders&lt;/p&gt;</comment>
                            <comment id="15548208" author="gszadovszky" created="Wed, 5 Oct 2016 09:37:22 +0000"  >&lt;p&gt;Thanks. It looks good to me.&lt;/p&gt;</comment>
                            <comment id="15553337" author="jira-bot" created="Thu, 6 Oct 2016 22:08:07 +0000"  >&lt;p&gt;Commit 0a74e1e0fb45dae8785f204f17d05bd86d0a2d2b in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=0a74e1e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=0a74e1e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1929&quot; title=&quot;SchemaCompatibility fails to recognize string&amp;lt;-&amp;gt;bytes promotion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1929&quot;&gt;&lt;del&gt;AVRO-1929&lt;/del&gt;&lt;/a&gt;: Java: SchemaCompatibility fails to recognize string&amp;lt;-&amp;gt;bytes promotion.  Contributed by Anders Sundelin.&lt;/p&gt;</comment>
                            <comment id="15553362" author="cutting" created="Thu, 6 Oct 2016 22:09:56 +0000"  >&lt;p&gt;I committed this.  Thanks, Anders!&lt;/p&gt;</comment>
                            <comment id="15640512" author="jira-bot" created="Sat, 5 Nov 2016 20:20:26 +0000"  >&lt;p&gt;Commit 1b91c06e92c4b5dd8e3a3e936b36e54fb9c9e023 in avro&apos;s branch refs/heads/branch-1.8 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=1b91c06&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=1b91c06&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1929&quot; title=&quot;SchemaCompatibility fails to recognize string&amp;lt;-&amp;gt;bytes promotion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1929&quot;&gt;&lt;del&gt;AVRO-1929&lt;/del&gt;&lt;/a&gt;: Java: SchemaCompatibility fails to recognize string&amp;lt;-&amp;gt;bytes promotion.  Contributed by Anders Sundelin.&lt;/p&gt;</comment>
                            <comment id="16133062" author="jira-bot" created="Fri, 18 Aug 2017 14:57:27 +0000"  >&lt;p&gt;Commit 492ab98be6b718df6439d782c8b208d11cdf000a in avro&apos;s branch refs/heads/branch-1.7 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cutting&quot; class=&quot;user-hover&quot; rel=&quot;cutting&quot;&gt;Doug Cutting&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=492ab98&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=avro.git;h=492ab98&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1929&quot; title=&quot;SchemaCompatibility fails to recognize string&amp;lt;-&amp;gt;bytes promotion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1929&quot;&gt;&lt;del&gt;AVRO-1929&lt;/del&gt;&lt;/a&gt;: Java: SchemaCompatibility fails to recognize string&amp;lt;-&amp;gt;bytes promotion.  Contributed by Anders Sundelin.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 1b91c06e92c4b5dd8e3a3e936b36e54fb9c9e023)&lt;/p&gt;</comment>
                            <comment id="16133069" author="busbey" created="Fri, 18 Aug 2017 14:57:36 +0000"  >&lt;p&gt;pulled this back to branch-1.7 as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12831538" name="AVRO-1929.patch" size="2908" author="epkanol" created="Tue, 4 Oct 2016 14:21:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Oct 2016 14:08:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34f2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The java SchemaCompatibility class now recognizes the possible promotion between string and bytes fields.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
