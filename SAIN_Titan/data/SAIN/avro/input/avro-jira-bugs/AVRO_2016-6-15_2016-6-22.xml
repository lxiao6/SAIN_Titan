<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:23:35 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2016-6-15+AND+created+%3C%3D+2016-6-22+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="4" total="4"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1862] AvroOutputFormat saves compressed avr&#242; files without respecting codec&apos;s default extension</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1862</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Common pattern in naming compressed files is giving them extension derived from compression codec, for example: &lt;tt&gt;.gz&lt;/tt&gt;, &lt;tt&gt;.zip&lt;/tt&gt;, &lt;tt&gt;.bz2&lt;/tt&gt;. &lt;br/&gt;
&lt;tt&gt;AvroOutputFormat&lt;/tt&gt; currently does not respect this convention. &lt;/p&gt;

&lt;p&gt;I&apos;ve adapted some code from Hadoop&apos;s &lt;tt&gt;TextOutputFormat&lt;/tt&gt; in backward-compatible manner adding following &lt;tt&gt;JobConf&lt;/tt&gt; property:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;avro.mapred.output.extension.from-codec&lt;/tt&gt; (&lt;tt&gt;boolean&lt;/tt&gt;, default: &lt;tt&gt;false&lt;/tt&gt;) - when set to &lt;tt&gt;true&lt;/tt&gt;, extension will be changed according to above rule.&lt;/p&gt;

&lt;p&gt;EDIT: Please take a look at first comment for an update. &lt;tt&gt;.gz.avro&lt;/tt&gt;, &lt;tt&gt;.snappy.avro&lt;/tt&gt; will be an extension of the file when above property will be set to true.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12979274">AVRO-1862</key>
            <summary>AvroOutputFormat saves compressed avr&#242; files without respecting codec&apos;s default extension</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wikp">Piotr Wikie&#322;</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 15 Jun 2016 07:27:28 +0000</created>
                <updated>Mon, 15 May 2017 12:42:23 +0000</updated>
                                            <version>1.8.1</version>
                                    <fixVersion>1.8.3</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15332138" author="rdblue" created="Wed, 15 Jun 2016 17:26:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wikp&quot; class=&quot;user-hover&quot; rel=&quot;wikp&quot;&gt;Piotr Wikie&#322;&lt;/a&gt;, isn&apos;t &lt;tt&gt;.avro&lt;/tt&gt; the correct extension? You&apos;re writing the Avro container format with internal blocks compressed using the compression codec. I think that a final extension like &lt;tt&gt;.gz&lt;/tt&gt; implies that you can run &lt;tt&gt;gunzip&lt;/tt&gt; on the file, but that doesn&apos;t work with Avro. What about adding the compression before the Avro ext, like &lt;tt&gt;.gz.avro&lt;/tt&gt;? I think that better shows what&apos;s happening.&lt;/p&gt;</comment>
                            <comment id="15346363" author="wikp" created="Thu, 23 Jun 2016 12:46:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;Ryan Blue&lt;/a&gt; yep, it&apos;s definitely true so I&apos;ve attached new patch. Please take a look at it and let me know if everything is ok.&lt;/p&gt;</comment>
                            <comment id="15375461" author="mike.hurley" created="Wed, 13 Jul 2016 18:05:57 +0000"  >&lt;p&gt;Is this really that useful? For instance, with zip files I would never name a file &quot;.stored.zip&quot; or &quot;.deflate.zip&quot;. Some people use names like &quot;.h264.mp4&quot; for videos, but that seems kind of rare. I guess it really doesn&apos;t hurt since it&apos;s a new feature that somebody explicitly has to opt-in to use.&lt;/p&gt;</comment>
                            <comment id="15388004" author="wikp" created="Thu, 21 Jul 2016 16:31:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mike.hurley&quot; class=&quot;user-hover&quot; rel=&quot;mike.hurley&quot;&gt;Mike Hurley&lt;/a&gt; let me explain you how I use it. I have a piece of stuff to concatenate multiple small avro files (produced by Kafka-HDFS pipeline) into one big file. It speeds up reading Hive partition with those files for about ~40%. You can set output compression as a parameter. &lt;/p&gt;

&lt;p&gt;Kafka-HDFS ingestion tool we use is Camus - it stores avro files with deflate codec which is (in one of few scenarios) also our output compression. We also don&apos;t want to run concatenation for files within already concatenated directories and, at the same time, support late records. The simplest way is to rely on extension. Camus stores files with &lt;tt&gt;.avro&lt;/tt&gt; extension, so we must use different one (we calculate size of files with &lt;tt&gt;.deflate.avro&lt;/tt&gt; extension and if it is &amp;gt; 0, we run concatenation). &lt;/p&gt;

&lt;p&gt;I know that there are many ways to achieve such a goal but I also think that backward compatible, disabled by default feature that do not change everything around (in code) could be accepted without a harm to the project because it could be useful not only for me. But I don&apos;t have any problem if you don&apos;t accept a patch if you convince me in some way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;If you want to see code of the tool I&apos;ve mentioned, here it is: &lt;a href=&quot;https://github.com/allegro/camus-compressor&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/allegro/camus-compressor&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will be grateful if you tell me what to do to run continuous integration for my patch. This is my first one and I don&apos;t see it in &quot;How to contribute&quot; section in the project wiki. &lt;/p&gt;

&lt;p&gt;Cheers! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16010427" author="nielsbasjes" created="Mon, 15 May 2017 12:42:23 +0000"  >&lt;p&gt;If I create a tar archive and the compress it with gzip I get a name like &lt;tt&gt;example.tar.gz&lt;/tt&gt;. &lt;br/&gt;
If I gunzip that file I actually get a &lt;tt&gt;example.tar&lt;/tt&gt; which is a tar archive.&lt;br/&gt;
Avro files are Avro files.&lt;br/&gt;
You cannot &apos;unavro&apos; a &lt;tt&gt;example.gz.avro&lt;/tt&gt; file and get a &lt;tt&gt;example.gz&lt;/tt&gt; file.&lt;/p&gt;

&lt;p&gt;The other way around is also wrong using a name like &lt;tt&gt;example.avro.gz&lt;/tt&gt; would lead to the expectation that it is a gzipped file and if you ungzip it you get a &lt;tt&gt;example.avro&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Based on the explanation I interpret the reason behind this change as a workaround for a need in scripting to avoid certain situations.&lt;br/&gt;
Alternative solution for the described use case: Run Camus in a script that after running the task simply renames the output file &lt;tt&gt;example.avro&lt;/tt&gt; to &lt;tt&gt;example.camus.avro&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I see this as a problem that does not belong to the avro code base.&lt;br/&gt;
So based on what I see here I think this should not be committed.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12812816" name="AVRO-1862-1.patch" size="4490" author="wikp" created="Thu, 23 Jun 2016 12:46:15 +0000"/>
                            <attachment id="12810785" name="AVRO-1862.patch" size="4459" author="wikp" created="Wed, 15 Jun 2016 07:28:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jun 2016 17:26:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zhc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>avro.mapred.output.extension.from-codec (boolean) MapReduce Job property that allows change extension of output files from .avro to .$compressionCodec.avro</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>


<item>
            <title>[AVRO-1863] Data Type Issue in AVRO</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1863</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Issue when importing into AVRO using Sqoop when the source data type has inconsistent number of decimal places. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12979392">AVRO-1863</key>
            <summary>Data Type Issue in AVRO</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="spencer.harlow@aviva.com">Spencer Harlow</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jun 2016 15:23:17 +0000</created>
                <updated>Wed, 15 Jun 2016 16:27:39 +0000</updated>
                            <resolved>Wed, 15 Jun 2016 16:27:19 +0000</resolved>
                                                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15332024" author="rdblue" created="Wed, 15 Jun 2016 16:27:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spencer.harlow%40aviva.com&quot; class=&quot;user-hover&quot; rel=&quot;spencer.harlow@aviva.com&quot;&gt;Spencer Harlow&lt;/a&gt;, I don&apos;t think this is an Avro bug. If anything, I think it&apos;s a Sqoop bug so I recommend filing a bug on the SQOOP project. You may also want to include what is happening and why you think that behavior is incorrect so that the Sqoop community can figure out how to address it. Thanks for taking the time to file these bugs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jun 2016 16:27:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zi27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1864] Decimal conversion should convert values with scale less than intended scale instead of erroring.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1864</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Using Sqoop to import data to AVRO can mean that decimal scales in the incoming values do not match the scales expected in AVRO. In this situation AVRO file creation fails. However, in some cases this is not the correct behaviour, given a value of 3.1 and a scale of 3 the value will fit into the scale requirements and so should be adjusted.&lt;/p&gt;

&lt;p&gt;Looking through the code this seems to be enforced here:&lt;/p&gt;

&lt;p&gt;src/main/java/org/apache/avro/Conversions.java&lt;br/&gt;
public ByteBuffer toBytes(BigDecimal value, Schema schema, LogicalType type) {&lt;br/&gt;
int scale = ((LogicalTypes.Decimal) type).getScale();&lt;br/&gt;
if (scale != value.scale()) {&lt;br/&gt;
throw new AvroTypeException(&quot;Cannot encode decimal with scale &quot; +&lt;br/&gt;
value.scale() + &quot; as scale &quot; + scale);&lt;/p&gt;

&lt;p&gt;Should this not be:&lt;/p&gt;

&lt;p&gt;if (scale &amp;lt; value.scale()) {&lt;/p&gt;

&lt;p&gt;The same applies in:  toFixed()&lt;/p&gt;</description>
                <environment></environment>
        <key id="12979761">AVRO-1864</key>
            <summary>Decimal conversion should convert values with scale less than intended scale instead of erroring.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="rdblue">Ryan Blue</assignee>
                                    <reporter username="tscott@cloudera.com">Thomas Scott</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jun 2016 10:16:55 +0000</created>
                <updated>Mon, 20 Jun 2016 17:25:35 +0000</updated>
                            <resolved>Mon, 20 Jun 2016 17:25:35 +0000</resolved>
                                    <version>1.7.6</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15339964" author="rdblue" created="Mon, 20 Jun 2016 17:25:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tscott%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;tscott@cloudera.com&quot;&gt;Thomas Scott&lt;/a&gt;, implementing what you suggest here would silently modify values, which is not something that a storage format should do. If you store &quot;2.15&quot; then you should get &quot;2.15&quot; back, not &quot;2.150&quot;. With the semantics of decimal, these conversions are significant and must be explicit.&lt;/p&gt;

&lt;p&gt;The right place to modify these values is in Sqoop, if and only if the user instructs Sqoop to modify the value to fit. Another option that could be supported by Avro is to store the scale as a single by with each value. We decided that this feature wasn&apos;t needed when we first added the decimal spec because the SQL spec requires a fixed scale for a column. If you think you have a use case that requires a per-value scale, then lets discuss that. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcelk&quot; class=&quot;user-hover&quot; rel=&quot;marcelk&quot;&gt;Marcel Kornacker&lt;/a&gt; may also want to weigh in on that use case.&lt;/p&gt;

&lt;p&gt;For now, I&apos;m going to mark this as &quot;won&apos;t fix&quot; because the current behavior is correct.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Jun 2016 17:25:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zjzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1865] GenericData.Array class missing no arg constructor for Kryo serialization</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1865</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When trying to serialize Java classes generated by Avro that contain a field as follows:&lt;br/&gt;
&lt;tt&gt;array&amp;lt;MyClass&amp;gt; myclasses = []&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;serialization fails with the following error message&lt;br/&gt;
&lt;tt&gt;com.esotericsoftware.kryo.KryoException: Class cannot be created (missing no-arg constructor)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Minimum example to recreate this:&lt;br/&gt;
Avro IDL definition:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@namespace(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.adello&quot;&lt;/span&gt;)
protocol KryoTest {
	record TestRecord {
		array&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; values = [];
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This gets compiled using &lt;tt&gt;java -jar avro-tools-1.8.1.jar idl2schemata kryo.avdl .&lt;/tt&gt;&lt;br/&gt;
Resulting Avro schema:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;TestRecord&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;com.adello&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt; : [ {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;values&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;array&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt; : [ ]
  } ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Generate Java class using &lt;tt&gt;java -jar avro-tools-1.8.1.jar compile schema TestRecord.avsc&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Kryo serialization test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Kryo kryo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Kryo();
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            Output output = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Output(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.bin&quot;&lt;/span&gt;));
            TestRecord o = TestRecord.newBuilder().build();
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Before serialization: &quot;&lt;/span&gt;);
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(o.toString());
            kryo.writeObject(output, o);
            output.close();

            Input input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Input(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.bin&quot;&lt;/span&gt;));
            TestRecord i = kryo.readObject(input, TestRecord.class);
            input.close();
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;After deserialization: &quot;&lt;/span&gt;);
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(i.toString());

            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Objects.deepEquals(o, i));
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (FileNotFoundException e) {
            e.printStackTrace();
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a common enough issue with Kryo that they have a dedicated section on their website on it: &lt;a href=&quot;http://docs.datatorrent.com/troubleshooting/#application-throwing-following-kryo-exception&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.datatorrent.com/troubleshooting/#application-throwing-following-kryo-exception&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The attached patch adds a no args constructor for the inner class Array of GenericData with zero entries and a dummy schema. My personal tests for serialization with Kryo were successful when using it. Since I do not have complete insight into Avro I&apos;d like to know if this could be a breaking change and how to test it if so.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12980892">AVRO-1865</key>
            <summary>GenericData.Array class missing no arg constructor for Kryo serialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="AnLei">Alexander Kasper</assignee>
                                    <reporter username="AnLei">Alexander Kasper</reporter>
                        <labels>
                            <label>beginner</label>
                            <label>patch</label>
                    </labels>
                <created>Mon, 20 Jun 2016 15:35:27 +0000</created>
                <updated>Fri, 18 Aug 2017 12:57:59 +0000</updated>
                                            <version>1.8.1</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15341642" author="anlei" created="Tue, 21 Jun 2016 11:58:24 +0000"  >&lt;p&gt;Added minimum example to recreate the issue.&lt;/p&gt;</comment>
                            <comment id="15342267" author="rdblue" created="Tue, 21 Jun 2016 17:34:47 +0000"  >&lt;p&gt;Adding a default constructor sounds fine to me, but I don&apos;t think creating a fake schema for it is a good idea. We should also add a comment that states that the constructor is for Java and Kryo serialization, not use within Avro where it should be constructed with the correct schema. Thanks for working on this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AnLei&quot; class=&quot;user-hover&quot; rel=&quot;AnLei&quot;&gt;Alexander Kasper&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15343874" author="anlei" created="Wed, 22 Jun 2016 07:56:26 +0000"  >&lt;p&gt;I added the schema because both of the existing constructors require it. But if it is not needed, all the better. How should this issue proceed?&lt;/p&gt;</comment>
                            <comment id="15344683" author="rdblue" created="Wed, 22 Jun 2016 16:31:32 +0000"  >&lt;p&gt;The schema needs to be there, but for Kryo will be set during deserialization, not during construction. That&apos;s why we should have a comment on the schema-less constructor saying not to actually use it because it&apos;s for deserialization via Kryo or Java Serialization only.&lt;/p&gt;</comment>
                            <comment id="15357232" author="anlei" created="Thu, 30 Jun 2016 15:11:06 +0000"  >&lt;p&gt;Added comment to constructor&lt;/p&gt;</comment>
                            <comment id="15522517" author="gszadovszky" created="Mon, 26 Sep 2016 09:04:42 +0000"  >&lt;p&gt;What do you think about make the new parameterless constructor deprecated? I know, deprecation does not suppose to only mean that you should not use something but at least it helps to highlight that fact in an IDE or with java warnings.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12815486" name="GenericArray-no-args-ctor-kryo.patch" size="1130" author="AnLei" created="Thu, 30 Jun 2016 15:11:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Jun 2016 17:34:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zqyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
