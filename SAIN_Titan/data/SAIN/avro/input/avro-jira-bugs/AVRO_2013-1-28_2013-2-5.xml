<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:18:15 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2013-1-28+AND+created+%3C%3D+2013-2-5+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="6" total="6"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1236] AvroMultipleOutputs fails to close successfuly</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1236</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When I&apos;m using AvroMultipleOutputs my job fails with exception, but works ok if I replace AvroMultipleOutputs with MultipleOutputs:&lt;br/&gt;
2013-01-29 14:29:04,771 WARN org.apache.hadoop.mapred.Child: Error running child&lt;br/&gt;
org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException): No lease on /tmp/avros/&lt;em&gt;temporary/_attempt_201301290714_0012_m_000000_0/part-m-00000 File is not open for writing. Holder DFSClient_NONMAPREDUCE&lt;/em&gt;-853305103_1 does not have any open files.&lt;br/&gt;
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2316)&lt;br/&gt;
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2299)&lt;br/&gt;
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2095)&lt;br/&gt;
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:471)&lt;br/&gt;
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:297)&lt;br/&gt;
	at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44080)&lt;br/&gt;
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)&lt;br/&gt;
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898)&lt;br/&gt;
	at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693)&lt;br/&gt;
	at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:416)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)&lt;br/&gt;
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1687)&lt;/p&gt;

&lt;p&gt;	at org.apache.hadoop.ipc.Client.call(Client.java:1160)&lt;br/&gt;
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:202)&lt;br/&gt;
	at $Proxy10.addBlock(Unknown Source)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:164)&lt;br/&gt;
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:83)&lt;br/&gt;
	at $Proxy10.addBlock(Unknown Source)&lt;br/&gt;
	at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:290)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.locateFollowingBlock(DFSOutputStream.java:1150)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.nextBlockOutputStream(DFSOutputStream.java:1003)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.run(DFSOutputStream.java:463)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12629760">AVRO-1236</key>
            <summary>AvroMultipleOutputs fails to close successfuly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="iosica">Victor Iacoban</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jan 2013 19:35:23 +0000</created>
                <updated>Sun, 30 Dec 2018 04:26:45 +0000</updated>
                                            <version>1.7.3</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13565704" author="nagav.ashish" created="Tue, 29 Jan 2013 19:40:34 +0000"  >&lt;p&gt;are using the function write(k,V,baseoutputpath) ??&lt;/p&gt;
</comment>
                            <comment id="13565788" author="iosica" created="Tue, 29 Jan 2013 20:44:31 +0000"  >&lt;p&gt;correct&lt;br/&gt;
write(key, value, baseOutputPath)&lt;/p&gt;</comment>
                            <comment id="13565886" author="nagav.ashish" created="Tue, 29 Jan 2013 22:28:00 +0000"  >&lt;p&gt;There was an issue with this function, a patch is already available at &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-1215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can you try applying this patch and doing a test run?&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12622859">AVRO-1215</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Jan 2013 19:40:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310256</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hjlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310601</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1237] Avro-C segfaults when union discriminant out of bounds</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1237</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;libavro will segfault when decrypting a specially crafted (or corrupted) avro file when the discriminant is out of bounds.&lt;br/&gt;
There is already a check for &amp;lt; 0, but there is no upper bounds check.&lt;/p&gt;

&lt;p&gt;I have attached a patch that checks the bounds.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Avro-C 1.7.2&lt;br/&gt;
Ubuntu 12.04 x86_64&lt;/p&gt;</environment>
        <key id="12630299">AVRO-1237</key>
            <summary>Avro-C segfaults when union discriminant out of bounds</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mic159">Michael Cooper</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Feb 2013 05:36:50 +0000</created>
                <updated>Tue, 11 Feb 2014 04:54:03 +0000</updated>
                            <resolved>Wed, 18 Dec 2013 13:32:02 +0000</resolved>
                                                    <fixVersion>1.7.6</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13573693" author="cutting" created="Thu, 7 Feb 2013 17:32:18 +0000"  >&lt;p&gt;Can someone familiar with Avro C please review this?&lt;/p&gt;

&lt;p&gt;Also, is it possible to add a test case for this?&lt;/p&gt;</comment>
                            <comment id="13576601" author="dcreager" created="Tue, 12 Feb 2013 13:11:43 +0000"  >&lt;p&gt;I will take a look at this this afternoon.&lt;/p&gt;</comment>
                            <comment id="13577587" author="dcreager" created="Wed, 13 Feb 2013 14:29:37 +0000"  >&lt;p&gt;I&apos;ve attached a test case for this.  The patch should be applied to the top of your Avro checkout, like any other.  I don&apos;t know an easy way to include binary files in the patch, so I&apos;ve attached those separately.  They should be placed into the land/c/tests directory.&lt;/p&gt;</comment>
                            <comment id="13577593" author="dcreager" created="Wed, 13 Feb 2013 14:39:05 +0000"  >&lt;p&gt;If you apply just the test case, you get a segfault (or some other undefined behavior), as Michael describes.  If you also apply Michael&apos;s fix patch, then the test case succeeds.&lt;/p&gt;

&lt;p&gt;One possible concern with the fix is that is moves responsibility for doing the bounds check.  Before, we would only check the bounds when reading from an unsafe source &#8212; i.e., inside the function that reads the binary data from the file.  Now, we check the bounds inside of the value&apos;s &lt;tt&gt;set_branch&lt;/tt&gt; method.  This has two ramifications: first, it means that we&apos;re now performing a bounds check &lt;b&gt;every&lt;/b&gt; time we set the branch of a union value, even if we&apos;re doing it from (ostensibly) safe hard-coded C code.  Normally the C idiom would be to only perform the bounds check where we know that it&apos;s needed, allowing us to save cycles when we know that it&apos;s not.  I&apos;m not completely against the safe solution, I just wanted to point out the difference.&lt;/p&gt;

&lt;p&gt;The second ramification is that every custom value implementation must now be responsible for performing this bounds check.  I don&apos;t know if there very many people writing their own custom value implementations, but this solution does add a burden to those who do.&lt;/p&gt;

&lt;p&gt;Ideally we&apos;d get around both of these issues by doing the bounds check in the file reader code, as we did before.  But, as Michael probably noticed, we don&apos;t easily have access in that function to the number of branches in the underlying schema.  I want to see how difficult it would be to provide that access; if we can, then I think that would be a cleaner solution.&lt;/p&gt;</comment>
                            <comment id="13698900" author="mic159" created="Wed, 3 Jul 2013 12:38:21 +0000"  >&lt;p&gt;Hey, have you had a chance to look at doing the bounds check in the reader yet?&lt;/p&gt;</comment>
                            <comment id="13720778" author="dcreager" created="Fri, 26 Jul 2013 13:22:07 +0000"  >&lt;p&gt;Here is a patch that performs the bounds check in the file-reading code.  Turns out it wasn&apos;t as horrible as I thought.  This patch means that we call avro_value_get_schema every time we read in a union value, but that function is really quick since it returns an existing schema instance in most cases.&lt;/p&gt;</comment>
                            <comment id="13851723" author="jira-bot" created="Wed, 18 Dec 2013 13:31:54 +0000"  >&lt;p&gt;Commit 1551941 from dcreager@apache.org in branch &apos;avro/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1551941&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1551941&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1237&quot; title=&quot;Avro-C segfaults when union discriminant out of bounds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1237&quot;&gt;&lt;del&gt;AVRO-1237&lt;/del&gt;&lt;/a&gt;. C: Verify union discriminant when reading Avro data files.&lt;/p&gt;

&lt;p&gt;Test case submitted by Michael Cooper.  Michael&apos;s original fix was to&lt;br/&gt;
perform a bounds check in avro_value_set_branch, but I&apos;ve opted for a&lt;br/&gt;
solution in avro_value_read.  This has two benefits: the check is only&lt;br/&gt;
performed when reading a discriminant value from an unsafe source, and&lt;br/&gt;
it doesn&apos;t impose an extra burden on anyone writing their own custom&lt;br/&gt;
value implementations.&lt;/p&gt;</comment>
                            <comment id="13851724" author="dcreager" created="Wed, 18 Dec 2013 13:32:02 +0000"  >&lt;p&gt;Merged into SVN&lt;/p&gt;</comment>
                            <comment id="13851945" author="hudson" created="Wed, 18 Dec 2013 17:38:12 +0000"  >&lt;p&gt;ABORTED: Integrated in AvroJava #411 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/411/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/411/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1237&quot; title=&quot;Avro-C segfaults when union discriminant out of bounds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1237&quot;&gt;&lt;del&gt;AVRO-1237&lt;/del&gt;&lt;/a&gt;. C: Verify union discriminant when reading Avro data files.&lt;/p&gt;

&lt;p&gt;Test case submitted by Michael Cooper.  Michael&apos;s original fix was to&lt;br/&gt;
perform a bounds check in avro_value_set_branch, but I&apos;ve opted for a&lt;br/&gt;
solution in avro_value_read.  This has two benefits: the check is only&lt;br/&gt;
performed when reading a discriminant value from an unsafe source, and&lt;br/&gt;
it doesn&apos;t impose an extra burden on anyone writing their own custom&lt;br/&gt;
value implementations. (dcreager: rev 1551941)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/value-read.c&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/avro-1237-bad-union-discriminant.avro&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/avro-1237-good.avro&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/test_avro_1237.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13897536" author="mic159" created="Tue, 11 Feb 2014 04:54:03 +0000"  >&lt;p&gt;This looks like it made it into 1.7.6 (CHANGELOG.txt), but the &quot;Fix version&quot; wasnt filled in.&lt;br/&gt;
So I have updated the &quot;Fix version&quot; field.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12594394" name="0001-AVRO-1237.-C-Verify-union-discriminant-when-reading-.patch" size="6813" author="dcreager" created="Fri, 26 Jul 2013 13:22:07 +0000"/>
                            <attachment id="12567528" name="0001-Check-union-discriminant-bounds-in-both-directions.patch" size="1640" author="mic159" created="Fri, 1 Feb 2013 05:38:07 +0000"/>
                            <attachment id="12569193" name="0001-Test-case-for-AVRO-1237.patch" size="4653" author="dcreager" created="Wed, 13 Feb 2013 14:29:37 +0000"/>
                            <attachment id="12569194" name="avro-1237-bad-union-discriminant.avro" size="106" author="dcreager" created="Wed, 13 Feb 2013 14:29:37 +0000"/>
                            <attachment id="12569195" name="avro-1237-good.avro" size="105" author="dcreager" created="Wed, 13 Feb 2013 14:29:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Feb 2013 17:32:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hmxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1238] Avro-C better end of file detection</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1238</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently in the C library, avro_file_reader_read_value will error out when it hits the end of a file.&lt;/p&gt;

&lt;p&gt;I propose we make it detect when it has hit the end of file, and return -1.&lt;br/&gt;
This means that we can differentiate between errors in opening the next block versus actually having finished the file.&lt;/p&gt;

&lt;p&gt;I have attached the proposed changes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630303">AVRO-1238</key>
            <summary>Avro-C better end of file detection</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mic159">Michael Cooper</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Feb 2013 05:53:18 +0000</created>
                <updated>Fri, 24 May 2013 16:10:58 +0000</updated>
                            <resolved>Fri, 24 May 2013 13:37:50 +0000</resolved>
                                                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13573695" author="cutting" created="Thu, 7 Feb 2013 17:33:54 +0000"  >&lt;p&gt;Can someone familiar with Avro C please review this?&lt;/p&gt;

&lt;p&gt;Also, is it possible to add a test case for this?&lt;/p&gt;</comment>
                            <comment id="13576599" author="dcreager" created="Tue, 12 Feb 2013 13:11:28 +0000"  >&lt;p&gt;I will take a look at this this afternoon.&lt;/p&gt;</comment>
                            <comment id="13577636" author="dcreager" created="Wed, 13 Feb 2013 15:25:25 +0000"  >&lt;p&gt;Here&apos;s a test case.  Like with &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1237&quot; title=&quot;Avro-C segfaults when union discriminant out of bounds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1237&quot;&gt;&lt;del&gt;AVRO-1237&lt;/del&gt;&lt;/a&gt;, the patch only adds/updated text files; you also need to place the two avro data files into lang/c/tests.&lt;/p&gt;</comment>
                            <comment id="13577640" author="dcreager" created="Wed, 13 Feb 2013 15:27:39 +0000"  >&lt;p&gt;I made a couple of modifications to Michael&apos;s patch.  First, I think we should use &lt;tt&gt;EOF&lt;/tt&gt; (defined in stdio.h) as the return value that indicates end-of-file.&lt;/p&gt;

&lt;p&gt;Second, there were a couple of places where the underlying file reading code was using -1 to signal a non-EOF error, which would conflict with the new EOF return value.  The updated patch has the file I/O code return &lt;tt&gt;EILSEQ&lt;/tt&gt; if it encounters truncated or malformed files.&lt;/p&gt;</comment>
                            <comment id="13646220" author="mic159" created="Wed, 1 May 2013 00:38:04 +0000"  >&lt;p&gt;Thankyou, your modifications look good.&lt;/p&gt;

&lt;p&gt;Will this make it to 1.7.5?&lt;/p&gt;</comment>
                            <comment id="13666304" author="dcreager" created="Fri, 24 May 2013 13:37:50 +0000"  >&lt;p&gt;Committed to SVN&lt;/p&gt;</comment>
                            <comment id="13666415" author="hudson" created="Fri, 24 May 2013 16:10:58 +0000"  >&lt;p&gt;Integrated in AvroJava #376 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/376/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/376/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1238&quot; title=&quot;Avro-C better end of file detection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1238&quot;&gt;&lt;del&gt;AVRO-1238&lt;/del&gt;&lt;/a&gt;. C: EOF detection in avro_file_reader_read_value&lt;/p&gt;

&lt;p&gt;This function now returns the builtin `EOF` constant when end-of-file is&lt;br/&gt;
detected.  `0` still indicates a successful read, and other results indicate&lt;br/&gt;
errors.&lt;/p&gt;

&lt;p&gt;Contributed by Michael Cooper. (Revision 1486051)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
dcreager : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/avro/io.h&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/avrocat.c&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/avromod.c&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/avropipe.c&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/datafile.c&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/src/io.c&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/avro-1238-good.avro&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/avro-1238-truncated.avro&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/c/tests/test_avro_1238.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12569202" name="0001-AVRO-1238.-C-Check-for-EOF-when-reading-from-Avro-fi.patch" size="6824" author="dcreager" created="Wed, 13 Feb 2013 15:27:39 +0000"/>
                            <attachment id="12567532" name="0001-Sane-EOF-checking.patch" size="5032" author="mic159" created="Fri, 1 Feb 2013 05:53:50 +0000"/>
                            <attachment id="12569201" name="0001-Test-case-for-AVRO-1238.patch" size="5067" author="dcreager" created="Wed, 13 Feb 2013 15:25:25 +0000"/>
                            <attachment id="12569199" name="avro-1238-good.avro" size="105" author="dcreager" created="Wed, 13 Feb 2013 15:25:25 +0000"/>
                            <attachment id="12569200" name="avro-1238-truncated.avro" size="98" author="dcreager" created="Wed, 13 Feb 2013 15:25:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Feb 2013 17:33:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hmy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1239] AvroMultipleOutput ignores schemas</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1239</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Adding namedOutputs with AvroMultipleOutputs.addNamedOutput just adds them to a static map which is of course not available on the cluster during reduce execution. &lt;/p&gt;

&lt;p&gt;The unit tests pass though since the Instance of AvroMultipleOutputs is the same in the Reducer as in the Job&apos;s main class, so the added schemas there are present. &lt;/p&gt;

&lt;p&gt;Fix would be to add the namedOutput schemas to the job configuration so they can be parsed in the reducers. Example patch for the new mapreduce api is attached, but I suspect the problem is present in the mapred api also. What is the general approach for this? Fix both?&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Johannes&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630341">AVRO-1239</key>
            <summary>AvroMultipleOutput ignores schemas</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="baunz">Johannes Schulte</reporter>
                        <labels>
                            <label>avro</label>
                            <label>mapreduce</label>
                    </labels>
                <created>Fri, 1 Feb 2013 09:43:58 +0000</created>
                <updated>Mon, 4 Feb 2013 14:22:10 +0000</updated>
                            <resolved>Mon, 4 Feb 2013 14:22:10 +0000</resolved>
                                    <version>1.7.3</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13568608" author="baunz" created="Fri, 1 Feb 2013 09:46:28 +0000"  >&lt;p&gt;keep&lt;/p&gt;</comment>
                            <comment id="13568934" author="lukekliu" created="Fri, 1 Feb 2013 18:22:32 +0000"  >
&lt;p&gt;AvroMultipleOutputs.addNamedOutput does not allow specifying an output path that is different from the default output path.  Could you provide an API to support this?&lt;/p&gt;

&lt;p&gt;The reason is that very likely the users want the new namedoutput with the different schemas stored in the different output directories. &lt;/p&gt;</comment>
                            <comment id="13570286" author="baunz" created="Mon, 4 Feb 2013 14:22:10 +0000"  >&lt;p&gt;This is discussed already in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1215&quot; title=&quot;AvroMultipleOutputs not working when specifying baseOutputPath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1215&quot;&gt;&lt;del&gt;AVRO-1215&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12622859">AVRO-1215</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12567553" name="1239.patch" size="2817" author="baunz" created="Fri, 1 Feb 2013 09:48:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Feb 2013 18:22:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hn6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1240] SpecificDataumReader.next() can return a GenericData.Record resulting in a ClassCastException</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1240</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The following reasonable code:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    DatumReader&amp;lt;Test&amp;gt; reader = new SpecificDatumReader&amp;lt;Test&amp;gt;(Test.class); 
    DataFileReader&amp;lt;Test&amp;gt; dataFileReader = new DataFileReader&amp;lt;Test&amp;gt;(file, reader); 
    Test datum = null;
    while(dataFileReader.hasNext()) { 
      datum = dataFileReader.next(datum); 
      System.out.println(datum); 
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can result in a runtime exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ java -cp avro-1.7.3.jar:$(hadoop classpath) org.apache.hadoop.util.RunJar target/avro-example-1.0-jar-with-dependencies.jar Sample target/test-file 
Exception in thread &quot;main&quot; java.lang.ClassCastException: org.apache.avro.generic.GenericData$Record cannot be cast to Test
	at Sample.main(Sample.java:27)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;when the jar containing the specific class (Test in my example) is loaded from a different classloader than the avro jar itself. This occurs when run via the hadoop jar command but could occur in web containers or other locations as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630397">AVRO-1240</key>
            <summary>SpecificDataumReader.next() can return a GenericData.Record resulting in a ClassCastException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="brocknoland">Brock Noland</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Feb 2013 16:23:45 +0000</created>
                <updated>Wed, 27 Feb 2013 00:54:02 +0000</updated>
                            <resolved>Tue, 5 Feb 2013 14:47:38 +0000</resolved>
                                    <version>1.7.3</version>
                                    <fixVersion>1.7.4</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13568851" author="brocknoland" created="Fri, 1 Feb 2013 16:24:26 +0000"  >&lt;p&gt;I have found three work arounds for this issue.&lt;/p&gt;


&lt;p&gt;Change&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    Test datum = null;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    Test datum = new Test();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Change&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    DatumReader&amp;lt;Test&amp;gt; reader = new SpecificDatumReader&amp;lt;Test&amp;gt;(Test.class); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    DatumReader&amp;lt;Test&amp;gt; reader = new SpecificDatumReader&amp;lt;Test&amp;gt;(Test.SCHEMA$, Test.SCHEMA$, new SpecificData(Test.class.getClassLoader())); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Put the jar containing the specific class in the classpath of the main JVM&lt;br/&gt;
That is change:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  $ java -cp avro-1.7.3.jar:$(hadoop classpath) org.apache.hadoop.util.RunJar target/avro-example-1.0-jar-with-dependencies.jar Sample target/test-file 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   $ java -cp avro-1.7.3.jar:$(hadoop classpath):target/avro-example-1.0-jar-with-dependencies.jar org.apache.hadoop.util.RunJar target/avro-example-1.0-jar-with-dependencies.jar Sample target/test-file 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or do the equivalent with the HADOOP_CLASSPATH variable.&lt;/p&gt;</comment>
                            <comment id="13568894" author="cutting" created="Fri, 1 Feb 2013 17:25:24 +0000"  >&lt;p&gt;Here&apos;s a patch that fixes the SpecificDatumReader(Class) constructor to use that class&apos;s ClassLoader.&lt;/p&gt;</comment>
                            <comment id="13569610" author="brocknoland" created="Sat, 2 Feb 2013 18:18:09 +0000"  >&lt;p&gt;Doug,&lt;/p&gt;

&lt;p&gt;Yes that the same approach I was considering and fixes the issue locally (below). I do have one additional item to discuss. The Specific* readers are generics and as such, the user expects that the next() method will never return anything but the Specific class in question. Furthermore, if using the Specific* it&apos;s likely a ClassCastException is going to be returned by returning anything but the Specific class in question.&lt;/p&gt;

&lt;p&gt;As such, inline with the fail fast and loudly principle, I wonder if instead of punting up to the Generic*, a runtime exception with a good error message should be thrown when the class for a schema cannot be found. I am not overly familiar with the Avro source, so it&apos;s possible this would break something badly. If the change is safe, then at least in this case, it would have made for a much better user experience.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ java -cp avro-1.7.4-SNAPSHOT.jar:$(hadoop classpath) org.apache.hadoop.util.RunJar target/avro-example-1.0-jar-with-dependencies.jar Sample target/test-file
{&quot;left&quot;: &quot;l&quot;, &quot;right&quot;: &quot;r&quot;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13570708" author="cutting" created="Mon, 4 Feb 2013 22:42:20 +0000"  >&lt;p&gt;There are cases where folks nest generic within specific &amp;amp; reflect &amp;amp; vice-versa.  One example is Pair&amp;lt;K,V&amp;gt; which can contain reflect, specific or generic instances.  There&apos;s also a test case in TestReflect called testReflectWithinGeneric.  So we can&apos;t change that without breaking compatibility.&lt;/p&gt;</comment>
                            <comment id="13570716" author="brocknoland" created="Mon, 4 Feb 2013 22:49:38 +0000"  >&lt;p&gt;OK cool. The patch is a +1 from my perspective.&lt;/p&gt;</comment>
                            <comment id="13570720" author="brocknoland" created="Mon, 4 Feb 2013 22:55:31 +0000"  >&lt;p&gt;Assigning to Doug as he wrote the patch attached to this JIRA.&lt;/p&gt;</comment>
                            <comment id="13571356" author="cutting" created="Tue, 5 Feb 2013 14:47:38 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                            <comment id="13571398" author="hudson" created="Tue, 5 Feb 2013 15:48:59 +0000"  >&lt;p&gt;Integrated in AvroJava #343 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/343/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/343/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1240&quot; title=&quot;SpecificDataumReader.next() can return a GenericData.Record resulting in a ClassCastException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1240&quot;&gt;&lt;del&gt;AVRO-1240&lt;/del&gt;&lt;/a&gt;. Java: Fix SpecificDatumReader(Class) constructor to use correct ClassLoader. (Revision 1442612)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
cutting : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/generic/GenericDatumReader.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/reflect/ReflectDatumReader.java&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/avro/src/main/java/org/apache/avro/specific/SpecificDatumReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12558254">AVRO-1103</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12567607" name="AVRO-1240.patch" size="2758" author="cutting" created="Fri, 1 Feb 2013 17:25:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Feb 2013 17:25:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hniv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1241] improve trevni performance on string deserialization</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1241</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I have been trying to implement a storage function for Apache Pig that writes data in Trevni format. I found that the storage function was very slow when reading whole records.&lt;/p&gt;

&lt;p&gt;I did some profiling (with Yourkit) and found that most of the CPU time was being spent in org.apache.trevni.InputBuffer$readString() (specifically in the String() method). I changed to java.nio.charset.CharsetDecoder.decode for deserialization and saw a big improvement. Changes are included in the patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630438">AVRO-1241</key>
            <summary>improve trevni performance on string deserialization</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jadler">Joseph Adler</assignee>
                                    <reporter username="jadler">Joseph Adler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Feb 2013 20:38:58 +0000</created>
                <updated>Wed, 27 Feb 2013 00:54:02 +0000</updated>
                            <resolved>Mon, 4 Feb 2013 21:59:37 +0000</resolved>
                                    <version>1.7.3</version>
                                    <fixVersion>1.7.4</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13569060" author="jadler" created="Fri, 1 Feb 2013 20:42:31 +0000"  >&lt;p&gt;Optimization in the attached file&lt;/p&gt;</comment>
                            <comment id="13569062" author="jadler" created="Fri, 1 Feb 2013 20:44:26 +0000"  >&lt;p&gt;I should add that I have only tested this change with Hadoop 1.0.4, and only with Java 6. I&apos;m not sure if this is a problem unique to our environment or a general issue.&lt;/p&gt;</comment>
                            <comment id="13569212" author="cutting" created="Fri, 1 Feb 2013 23:01:29 +0000"  >&lt;p&gt;This seems like a fine change.  I&apos;ll commit it soon unless there are objections.&lt;/p&gt;</comment>
                            <comment id="13570398" author="jadler" created="Mon, 4 Feb 2013 17:11:42 +0000"  >&lt;p&gt;One other note: this change speeds up data loading by 3-4x in our environment.&lt;/p&gt;</comment>
                            <comment id="13570677" author="cutting" created="Mon, 4 Feb 2013 21:59:37 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;

&lt;p&gt;(I renamed the variable &apos;utf8Decoder&apos; to be just &apos;utf8&apos; so the code still fit in 80 columns.)&lt;/p&gt;

&lt;p&gt;Thanks, Joseph!&lt;/p&gt;</comment>
                            <comment id="13570881" author="hudson" created="Tue, 5 Feb 2013 02:22:05 +0000"  >&lt;p&gt;Integrated in AvroJava #342 (See &lt;a href=&quot;https://builds.apache.org/job/AvroJava/342/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/AvroJava/342/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1241&quot; title=&quot;improve trevni performance on string deserialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1241&quot;&gt;&lt;del&gt;AVRO-1241&lt;/del&gt;&lt;/a&gt;. Java: Optimize Trevni string input.  Contributed by Joseph Adler. (Revision 1442391)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
cutting : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/avro/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/avro/trunk/lang/java/trevni/core/src/main/java/org/apache/trevni/InputBuffer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12613954">PIG-3015</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12613954">PIG-3015</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12611990">HIVE-3585</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12567634" name="AVRO-1241" size="1733" author="jadler" created="Fri, 1 Feb 2013 20:42:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Feb 2013 23:01:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310932</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hnrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Optimized string de-serialization</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
