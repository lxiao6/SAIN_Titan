<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:16:06 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-9-14+AND+created+%3C%3D+2011-9-21+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="4" total="4"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-888] Create SeekableInput based on data in byte[]</title>
                <link>https://issues.apache.org/jira/browse/AVRO-888</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently, the object container format is only support for actual files, but we&apos;re finding it useful outside of that context and would like to see a SeekableInput implementation that is based on a byte[] of data rather than a File.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12523288">AVRO-888</key>
            <summary>Create SeekableInput based on data in byte[]</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="saleemshafi">Saleem Shafi</assignee>
                                    <reporter username="saleemshafi">Saleem Shafi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Sep 2011 04:22:29 +0000</created>
                <updated>Tue, 1 Nov 2011 18:35:58 +0000</updated>
                            <resolved>Tue, 20 Sep 2011 22:33:23 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13105848" author="saleemshafi" created="Fri, 16 Sep 2011 04:29:15 +0000"  >&lt;p&gt;Need a code review per &lt;a href=&quot;https://cwiki.apache.org/AVRO/code-review-checklist.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/AVRO/code-review-checklist.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13108092" author="scott_carey" created="Mon, 19 Sep 2011 19:55:06 +0000"  >&lt;p&gt;Looks good overall, very simple.&lt;/p&gt;

&lt;p&gt;Can you add a Unit Test for this?  It should be simple.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13108974" author="saleemshafi" created="Tue, 20 Sep 2011 20:24:41 +0000"  >&lt;p&gt;cancelling patch to resubmit with unit test.&lt;/p&gt;</comment>
                            <comment id="13108976" author="saleemshafi" created="Tue, 20 Sep 2011 20:25:30 +0000"  >&lt;p&gt;SeekableByteArrayInput + unit test&lt;/p&gt;</comment>
                            <comment id="13109038" author="cutting" created="Tue, 20 Sep 2011 22:33:23 +0000"  >&lt;p&gt;I just committed this.  Thanks, Saleem!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12495266" name="AVRO-888.patch" size="5543" author="saleemshafi" created="Tue, 20 Sep 2011 20:25:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Sep 2011 19:55:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59953</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e333:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-889] The lang/java/pom.xml should name avro toplevel pom as its parent.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-889</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The parent project listed in lang/java/pom.xml is currently the Apache pom, when it should be Avro&apos;s toplevel pom.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12523398">AVRO-889</key>
            <summary>The lang/java/pom.xml should name avro toplevel pom as its parent.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Sep 2011 22:08:23 +0000</created>
                <updated>Tue, 13 Dec 2011 19:06:54 +0000</updated>
                            <resolved>Mon, 19 Sep 2011 18:44:23 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13106856" author="cutting" created="Fri, 16 Sep 2011 22:11:01 +0000"  >&lt;p&gt;Here&apos;s a patch.&lt;/p&gt;

&lt;p&gt;Among other things, this makes the Maven versions plugin work, so that one can update the version in the top-level, then use &apos;mvn -N versions:update-child-modules&apos; from there rather than updating all POM versions by hand.  &lt;/p&gt;</comment>
                            <comment id="13108048" author="cutting" created="Mon, 19 Sep 2011 18:44:23 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                            <comment id="13108068" author="scott_carey" created="Mon, 19 Sep 2011 19:11:12 +0000"  >&lt;p&gt;Did this break anything else?  I avoided this before because I was worried about inheriting too much from that base pom, but since its been a year, I forget the details.  &lt;/p&gt;

&lt;p&gt;I don&apos;t have the time to test this thoroughly for at least a couple weeks.&lt;/p&gt;

&lt;p&gt;We will also have to publish the top level pom if we inherit from it.&lt;/p&gt;</comment>
                            <comment id="13108100" author="cutting" created="Mon, 19 Sep 2011 20:06:58 +0000"  >&lt;p&gt;&amp;gt; Did this break anything else?&lt;/p&gt;

&lt;p&gt;Not that I&apos;ve seen.&lt;/p&gt;

&lt;p&gt;&amp;gt; We will also have to publish the top level pom if we inherit from it.&lt;/p&gt;

&lt;p&gt;It will be published if we run the &apos;deploy&apos; from the top-level directory.  Is there a reason not to publish the top-level POM?  If not, I&apos;ll update &lt;a href=&quot;https://cwiki.apache.org/AVRO/how-to-release.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/AVRO/how-to-release.html&lt;/a&gt; accordingly.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12494874" name="AVRO-889.patch" size="557" author="cutting" created="Fri, 16 Sep 2011 22:11:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Sep 2011 19:11:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e33b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80263</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-890] Maven archetype for creating Avro service projects </title>
                <link>https://issues.apache.org/jira/browse/AVRO-890</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I&apos;ve put together the beginnings of an maven archetypes subproject in the java module to help folks kickstart avro projects. The first archetype creates a simple avro based ordering service using the netty transport and includes an integration test for the service. The service is very naive, though its really only the plumbing that is important and the example is illustrative enough to get people going.&lt;/p&gt;

&lt;p&gt;Once built, it can be added to the local archetypes catalog via&lt;br/&gt;
mvn archetype:crawl&lt;/p&gt;

&lt;p&gt;and then will be available via the generate plugin&lt;br/&gt;
mvn archetype:generate&lt;/p&gt;

&lt;p&gt;or it can be invoked directly as follows&lt;br/&gt;
mvn archetype:generate -DarchetypeArtifactId=avro-service-archetype -DarchetypeGroupId=org.apache.avro -DgroupId=org.simple -DartifactId=simple-service -Dversion=1.0-SNAPSHOT   &lt;/p&gt;

&lt;p&gt;The parent pom contains common config for generating a pom for the archetype that references the current avro build version. This takes some slight of hand with maven resources to insert the version and will be reusable for other archetypes in the future.&lt;/p&gt;

&lt;p&gt;I intend putting together a map-reduce archetype soon and am open to suggestions for other archetypes that might be useful. Perhaps one that included the code from &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-883&quot; title=&quot;Avro should come with a simple Java example&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-883&quot;&gt;AVRO-883&lt;/a&gt; to kick start a basic serialization project?  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12523468">AVRO-890</key>
            <summary>Maven archetype for creating Avro service projects </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sgargan">Stephen Gargan</assignee>
                                    <reporter username="sgargan">Stephen Gargan</reporter>
                        <labels>
                            <label>archetype</label>
                            <label>maven</label>
                    </labels>
                <created>Sun, 18 Sep 2011 02:09:48 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:01 +0000</updated>
                            <resolved>Mon, 26 Sep 2011 21:15:42 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13108067" author="cutting" created="Mon, 19 Sep 2011 19:10:11 +0000"  >&lt;p&gt;Looks neat!&lt;/p&gt;

&lt;p&gt;I&apos;m no Maven expert, but noticed a few things that might be improved.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The Maven module names should probably be named &quot;Apache Avro ...&quot;, not just &quot;Avro ...&quot;, to be consistent with the other Avro modules.&lt;/li&gt;
	&lt;li&gt;Would it be possible to have the &apos;mvn test&apos; for the archetypes module generate a project and build it?  That&apos;d be a good way to make sure that it stays up-to-date.&lt;/li&gt;
	&lt;li&gt;I generated a project.  It includes a test (great!) but when I ran &apos;mvn test&apos; in the project it didn&apos;t run the test.  If I ran &apos;mvn test -Dtest=SimpleOrderServiceIntegrationTest&apos; then it did run the test, and it passed.  Shouldn&apos;t it run the test by default?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13108240" author="sgargan" created="Mon, 19 Sep 2011 23:41:01 +0000"  >&lt;p&gt;Doug,&lt;/p&gt;

&lt;p&gt;It turns out there is a pretty nifty integration-test goal in the archetypes plugin that will generate and build a sample project. I&apos;ve updated the build to use this.&lt;/p&gt;

&lt;p&gt;The reason the test doesn&apos;t run in the test phase is that its an integration test. Its run with the failsafe plugin and executes in the integration-test phase of the build. The idea is that you&apos;d test the service classes as normal (in isolation, with unit tests and mocks) in the test phase and then test the entire service end to end in the integration-test phase. If you run hte build with mvn integration-test, you should see the test run.&lt;/p&gt;

&lt;p&gt;The way the failsafe plugin splits up the testing is very flexible; it makes it easy to start a server once in the the pre-itegration test phase and then run a large test suite against the single server instance. This can save a lot of time if the service is complex and expensive to setup. I didn&apos;t want to muddy the sample with this kind of detail but its simple enough to modify the build to do it.&lt;/p&gt;

&lt;p&gt;I&apos;ve changed the names in the poms and uploaded a patch (twice it seems! both are the same) with the changes.  &lt;/p&gt;</comment>
                            <comment id="13109004" author="cutting" created="Tue, 20 Sep 2011 21:24:16 +0000"  >&lt;p&gt;When I run &apos;mvn integration-test&apos; it fails with:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Plugin org.apache.avro:avro-maven-plugin:1.6.0-SNAPSHOT or one of its dependencies could not be resolved: Could not find artifact org.apache.avro:avro-maven-plugin:jar:1.6.0-SNAPSHOT -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;But if I instead run &apos;mvn install&apos; then it runs integration tests.  I generally don&apos;t run &apos;install&apos; since I don&apos;t want to confuse myself by having working versions in my local maven repo.&lt;/p&gt;

&lt;p&gt;What can I do to get the archetype tests run without installing?  I generally run &apos;mvn clean test&apos; before each commit, and that&apos;s what the Jenkins build server runs after each commit, so my preference would be for the archetype code to be tested then too.  Is there an alternative that I should use that does not install artifacts in my local repo?  I tried &apos;verify&apos;, but it also fails with the above message.  Could we somehow fix things so that &apos;verify&apos; works?&lt;/p&gt;</comment>
                            <comment id="13109021" author="scott_carey" created="Tue, 20 Sep 2011 22:02:27 +0000"  >&lt;p&gt;All targets before &apos;install&apos; should work without having any SNAPSHOT artifacts in your local repo.  This ensures that all build actions occur from code in the Maven reactor, and not cached outputs in the local repo.  If it requires &quot;install&quot; then the build may not be reproducible without running &apos;install&apos;.&lt;/p&gt;

&lt;p&gt;I am not sure if it is configuration on our end, or a bug in the failsafe plugin.  Usually these sorts of errors are plugin bugs &amp;#8211; plugins looking for artifacts in the local repo instead of the maven reactor.  If it is a configuration issue, it may have something to do with &amp;lt;pluginManagement&amp;gt; or the scoping of the avro-maven-plugin dependency.&lt;/p&gt;</comment>
                            <comment id="13109094" author="sgargan" created="Tue, 20 Sep 2011 23:44:08 +0000"  >&lt;p&gt;The issue is with the sample project generating source from the protocol&lt;br/&gt;
files via the maven-plugin, the failsafe plugin would not run till later.&lt;br/&gt;
The archetype plugin forks a separate build and the reactor artifacts are&lt;br/&gt;
not available to it, this is why it tries to resolve it from the local repo.&lt;br/&gt;
There does not seem to be a way currently to give the new build access to&lt;br/&gt;
the current reactor artifacts.&lt;/p&gt;

</comment>
                            <comment id="13109861" author="scott_carey" created="Wed, 21 Sep 2011 20:43:56 +0000"  >&lt;p&gt;For a released artifact, this is not a problem.  The archetype will work fine because it won&apos;t point to a SNAPSHOT.&lt;/p&gt;

&lt;p&gt;In the case of testing the archetype then, it either needs to point to a released version, or we must install avro-maven-plugin before the archetype plugin forks the build.  &lt;/p&gt;

&lt;p&gt;Or we could release it and version the archetype separately from the main project, but that has many other serious drawbacks.&lt;/p&gt;</comment>
                            <comment id="13112180" author="cutting" created="Wed, 21 Sep 2011 22:39:41 +0000"  >&lt;p&gt;Here are some options I see:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Leave things as they are in the current patch, so that &apos;mvn verify&apos; from the top-level fails but &apos;mvn install&apos; works.&lt;/li&gt;
	&lt;li&gt;Disable the integration tests so that &apos;mvn verify&apos; works.&lt;/li&gt;
	&lt;li&gt;Change the the archetype module to depend on a released version of Avro.  If we then make an incompatible change that breaks the archetype it would not be identified by &apos;mvn verify&apos;, but at least some testing would be done to the archetype.  Maybe we could have it use the released version or later, so that, if you run &apos;mvn install&apos; then it will test using the current snapshot?&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;What other options do folks see?  Of these I currently prefer (3).&lt;/p&gt;</comment>
                            <comment id="13113855" author="sgargan" created="Sat, 24 Sep 2011 01:04:57 +0000"  >&lt;p&gt;Based on Scott&apos;s comments on the dev list, I&apos;ve made a patch where the archetype integration is attached to the install phase.  It does install the archetype before the integration test run so there is a small chance of polluting the local repo with a broken build runs but if this is kept in mind this should be fine. The &apos;clean test&apos; and &apos;clean verify&apos; builds now run without executing the tests and resolving the maven-plugin.&lt;/p&gt;</comment>
                            <comment id="13114936" author="cutting" created="Mon, 26 Sep 2011 21:15:42 +0000"  >&lt;p&gt;I tested this.  It works great.  I committed it.&lt;/p&gt;

&lt;p&gt;Thanks, Stephen!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496346" name="archetypes.patch" size="29817" author="sgargan" created="Sat, 24 Sep 2011 01:04:57 +0000"/>
                            <attachment id="12495164" name="archetypes.patch" size="28672" author="sgargan" created="Mon, 19 Sep 2011 23:16:15 +0000"/>
                            <attachment id="12495163" name="archetypes.patch" size="28672" author="sgargan" created="Mon, 19 Sep 2011 23:15:47 +0000"/>
                            <attachment id="12494953" name="archetypes.patch" size="27694" author="sgargan" created="Sun, 18 Sep 2011 02:16:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Sep 2011 19:10:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2256</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e33j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-891] Change SpecificDatumReader to default reader schema from loaded class</title>
                <link>https://issues.apache.org/jira/browse/AVRO-891</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;An AvroRuntimeException exception is thrown when attempting to read an Avro file serialized with an older version of a schema containing a field which has been subsequently removed in the newer schema.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.avro.AvroRuntimeException: Bad index
	at Record.put(Unknown Source)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericData.setField(GenericData.java:463)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.readRecord(GenericDatumReader.java:166)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:138)
	at org.apache.avro.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericDatumReader.read(GenericDatumReader.java:129)
	at org.apache.avro.file.DataFileStream.next(DataFileStream.java:233)
	at org.apache.avro.file.DataFileStream.next(DataFileStream.java:220)
	at Read.readFromAvro(Unknown Source)
	at Read.main(Unknown Source)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Steps to reproduce&lt;/b&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Generate code for schema v1 and v2&lt;/li&gt;
	&lt;li&gt;Write an Avro file with the v1 code-generated Record class using the DataFileWriter and SpecificDatumWriter&lt;/li&gt;
	&lt;li&gt;(informational only) Read the Avro file using the v1 code-generated Record class using DataFileStream and SpecificDatumReader (output follows)
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Record@2ec791b9[name=r1,id=1]
Record@bd86fd3[name=r2,id=2]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Read the Avro file using the v2 code-generated Record class using DataFileStream and SpecificDatumReader&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;b&gt;Schema details&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;v1 schema:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Record&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;},
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;}
  ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;v2 schema:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Record&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;}
  ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Write code&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Record createRecord(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; id) {
    Record record = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Record();
    record.name = name;
    record.id = id;
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; record;
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void writeToAvro(OutputStream outputStream)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    DataFileWriter&amp;lt;Record&amp;gt; writer =
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataFileWriter&amp;lt;Record&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpecificDatumWriter&amp;lt;Record&amp;gt;());
    writer.create(Record.SCHEMA$, outputStream);

    writer.append(createRecord(&lt;span class=&quot;code-quote&quot;&gt;&quot;r1&quot;&lt;/span&gt;, 1));
    writer.append(createRecord(&lt;span class=&quot;code-quote&quot;&gt;&quot;r2&quot;&lt;/span&gt;, 2));

    writer.close();
    outputStream.close();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Read code&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void readFromAvro(InputStream is) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    DataFileStream&amp;lt;Record&amp;gt; reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataFileStream&amp;lt;Record&amp;gt;(
            is, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpecificDatumReader&amp;lt;Record&amp;gt;());
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Record a : reader) {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(ToStringBuilder.reflectionToString(a));
    }
    IOUtils.cleanup(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, is);
    IOUtils.cleanup(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, reader);
  }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;OSX 10.7&lt;/p&gt;</environment>
        <key id="12523690">AVRO-891</key>
            <summary>Change SpecificDatumReader to default reader schema from loaded class</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="alex.holmes">Alex Holmes</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Sep 2011 10:42:47 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:04 +0000</updated>
                            <resolved>Thu, 22 Sep 2011 19:09:05 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13108920" author="cutting" created="Tue, 20 Sep 2011 18:40:55 +0000"  >&lt;p&gt;When you read you should use &apos;new SpecificDatumReader&amp;lt;Record&amp;gt;(Record.class)&apos; to pass the new schema to the reader.  Otherwise it assumes the same schema that&apos;s used to write should be used to read.  Does that help?&lt;/p&gt;</comment>
                            <comment id="13108925" author="scott_carey" created="Tue, 20 Sep 2011 18:46:48 +0000"  >&lt;p&gt;I should have caught that before.&lt;/p&gt;

&lt;p&gt;We may need better Javadoc and some example uses in the doc, but this definitely works for me and has worked for a long time &amp;#8212; but I use the constructor that passes in the class.&lt;/p&gt;</comment>
                            <comment id="13108960" author="cutting" created="Tue, 20 Sep 2011 19:44:39 +0000"  >&lt;p&gt;Here are two ways we might avoid this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Make the default constructor for SpecificDatumReader protected instead of public.  That would force folks to always provide a schema and would be incompatible.&lt;/li&gt;
	&lt;li&gt;Change SpecificDatumReader#setSchema() to, when the expected schema is null, set it to getSpecificData().getClass(actual).getSchema().  That would get the schema with the same name as the one in the file from the currently loaded class.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I prefer the second option. &lt;/p&gt;</comment>
                            <comment id="13108973" author="cutting" created="Tue, 20 Sep 2011 20:24:06 +0000"  >&lt;p&gt;Here&apos;s a patch that implements (2) above.  This should make things like the code in the description of this issue just work.&lt;/p&gt;</comment>
                            <comment id="13112162" author="cutting" created="Wed, 21 Sep 2011 22:10:52 +0000"  >&lt;p&gt;Here&apos;s an improved patch that includes a test.&lt;/p&gt;</comment>
                            <comment id="13112163" author="cutting" created="Wed, 21 Sep 2011 22:11:05 +0000"  >&lt;p&gt;I&apos;ll commit this tomorrow if no one objects.&lt;/p&gt;</comment>
                            <comment id="13112833" author="cutting" created="Thu, 22 Sep 2011 19:09:05 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496036" name="AVRO-891.patch" size="5344" author="cutting" created="Wed, 21 Sep 2011 22:10:52 +0000"/>
                            <attachment id="12495265" name="AVRO-891.patch" size="2129" author="cutting" created="Tue, 20 Sep 2011 20:24:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Sep 2011 18:40:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e33r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80265</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
