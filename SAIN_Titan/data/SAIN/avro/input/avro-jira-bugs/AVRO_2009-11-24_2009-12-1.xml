<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:13:03 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2009-11-24+AND+created+%3C%3D+2009-12-1+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="8" total="8"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-236] add support for protocols to avroj induce tool</title>
                <link>https://issues.apache.org/jira/browse/AVRO-236</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The avroj &apos;induce&apos; command should support protocols as well as schemas.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441600">AVRO-236</key>
            <summary>add support for protocols to avroj induce tool</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2009 19:40:19 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:11 +0000</updated>
                            <resolved>Tue, 24 Nov 2009 21:41:27 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12782123" author="cutting" created="Tue, 24 Nov 2009 19:46:46 +0000"  >&lt;p&gt;The attached patch changes the induce tool to generate a protocol when passed an interface.  It also changes the induce tool to pretty-print induced schemas and protocols.  And it fixes two checkstyle problems in Tool.java (unused import and no newline at EOF).&lt;/p&gt;</comment>
                            <comment id="12782156" author="philip" created="Tue, 24 Nov 2009 20:44:40 +0000"  >&lt;p&gt;Took a look at the patch.  +1.&lt;/p&gt;</comment>
                            <comment id="12782189" author="cutting" created="Tue, 24 Nov 2009 21:41:27 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426004" name="AVRO-236.patch" size="4602" author="cutting" created="Tue, 24 Nov 2009 19:46:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Nov 2009 20:44:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-237] improvements to reflection</title>
                <link>https://issues.apache.org/jira/browse/AVRO-237</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;A few improvements to reflection to better match actual Java usage:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;instead of just List implementations, any Collection that&apos;s not a Map should be mapped to an Avro array&lt;/li&gt;
	&lt;li&gt;inherited fields should be included in schemas induced from a class&lt;/li&gt;
	&lt;li&gt;inherited methods should be included in protocols induced from an interface&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12441616">AVRO-237</key>
            <summary>improvements to reflection</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2009 22:25:10 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:11 +0000</updated>
                            <resolved>Wed, 25 Nov 2009 20:22:36 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12782238" author="cutting" created="Tue, 24 Nov 2009 23:32:24 +0000"  >&lt;p&gt;Here&apos;s a patch that addresses these issues.&lt;/p&gt;</comment>
                            <comment id="12782331" author="philip" created="Wed, 25 Nov 2009 07:33:08 +0000"  >&lt;p&gt;Makes sense.  Standard nit-picking below, but the patch itself was clear.&lt;/p&gt;

&lt;p&gt;ReflectData.java:&lt;/p&gt;

&lt;p&gt;&amp;gt; Both Java arrays and non-&lt;/p&gt;
{@link Map}

&lt;p&gt;Map isn&apos;t actually a Collection in Java.  I think you don&apos;t need to special-case it out.  (It&apos;s confusing, because Map.entrySet() is, and Map is certainly talked about as part of the Collections API.)&lt;/p&gt;

&lt;p&gt;You modified findField to look up at super classes,&lt;br/&gt;
but the javadoc says &quot;only fields of the direct class, not it&apos;s&lt;br/&gt;
super classes&quot; are used.  Is that still true?  I think&lt;br/&gt;
you may have modified the javadoc in one sentence, but not&lt;br/&gt;
the other.&lt;/p&gt;

&lt;p&gt;getFields() is complicated enough that it deserves &lt;br/&gt;
one line of javadoc explaining what it&apos;s doing.&lt;/p&gt;

&lt;p&gt;As I read this, one thing that might be nice is to&lt;br/&gt;
comment which of these methods are called frequently&lt;br/&gt;
at runtime, and which only at schema management time.&lt;br/&gt;
So, for example, you do nothing to cache previous&lt;br/&gt;
results in getFields(), whereas you do a lot &lt;br/&gt;
for the similarly named getField().  I think the &lt;br/&gt;
distinction is that the latter is intended to &lt;br/&gt;
be called more often; it may be helpful to future&lt;br/&gt;
users that this distinction is called out explicitly.&lt;/p&gt;

&lt;p&gt;BTW, how do you handle?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  class A &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    int foo;  }&lt;/span&gt; &lt;/div&gt;

&lt;p&gt;  class B extends A &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    double foo;  }&lt;/span&gt; &lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;It&apos;s poor programming on the part of A and B, but it would be nice to at least error&lt;br/&gt;
out in that edge case.&lt;/p&gt;

&lt;p&gt;As far as testing, I don&apos;t think you&apos;ve added a test case&lt;br/&gt;
where a non-list Collection (or instance thereof) is used.&lt;br/&gt;
I think you could meaningfully test getField() and getFields()&lt;br/&gt;
on their own, though the implicit check is probably good enough.&lt;br/&gt;
I noticed you added Short.class to SpecificData; is there &lt;br/&gt;
a test case that that should be part of?&lt;/p&gt;</comment>
                            <comment id="12782569" author="cutting" created="Wed, 25 Nov 2009 19:24:52 +0000"  >&lt;p&gt;&amp;gt; Map isn&apos;t actually a Collection in Java. I think you don&apos;t need to special-case it out. &lt;/p&gt;

&lt;p&gt;Good catch.  Fixed.&lt;/p&gt;

&lt;p&gt;&amp;gt; but the javadoc says &quot;only fields of the direct class..&lt;/p&gt;

&lt;p&gt;Javadoc fixed.&lt;/p&gt;

&lt;p&gt;&amp;gt; getFields() is complicated enough that it deserves one line of javadoc&lt;/p&gt;

&lt;p&gt;I added javadoc for this and comments explaining why a cache is used in one case and not the other.&lt;/p&gt;

&lt;p&gt;&amp;gt; it would be nice to at least error out in that edge case.&lt;/p&gt;

&lt;p&gt;Good point.  This now throws an exception.&lt;/p&gt;

&lt;p&gt;&amp;gt; I don&apos;t think you&apos;ve added a test case where a non-list Collection (or instance thereof) is used.&lt;/p&gt;

&lt;p&gt;Good point.  I&apos;ve now added one.&lt;/p&gt;

&lt;p&gt;&amp;gt; I noticed you added Short.class to SpecificData; is there a test case that that should be part of?&lt;/p&gt;

&lt;p&gt;I added a test case for this.&lt;/p&gt;</comment>
                            <comment id="12782592" author="philip" created="Wed, 25 Nov 2009 20:04:49 +0000"  >&lt;p&gt;Looks good!  +1&lt;/p&gt;</comment>
                            <comment id="12782600" author="cutting" created="Wed, 25 Nov 2009 20:22:36 +0000"  >&lt;p&gt;I just committed this.  Thanks for the reviews, Philip!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426135" name="AVRO-237.patch" size="18927" author="cutting" created="Wed, 25 Nov 2009 19:24:52 +0000"/>
                            <attachment id="12426031" name="AVRO-237.patch" size="16249" author="cutting" created="Tue, 24 Nov 2009 23:32:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Nov 2009 07:33:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94564</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79616</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-238] Avro&apos;s pom is inconsistent with Common&apos;s about SLF4J implementations</title>
                <link>https://issues.apache.org/jira/browse/AVRO-238</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro&apos;s published pom files require a specific slf4j implementation (slf4j-simple), which conflicts with Hadoop Common.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.slf4j.org/faq.html#maven2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.slf4j.org/faq.html#maven2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please change the scope to testing.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Owen&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441618">AVRO-238</key>
            <summary>Avro&apos;s pom is inconsistent with Common&apos;s about SLF4J implementations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="owen.omalley">Owen O&apos;Malley</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2009 22:52:18 +0000</created>
                <updated>Tue, 13 Dec 2011 19:06:47 +0000</updated>
                            <resolved>Tue, 1 Dec 2009 23:51:21 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12782229" author="cutting" created="Tue, 24 Nov 2009 23:16:43 +0000"  >&lt;p&gt;Here&apos;s a patch that fixes this.  You can generate the pom by running &apos;ant package&apos;.&lt;/p&gt;</comment>
                            <comment id="12784540" author="cutting" created="Tue, 1 Dec 2009 23:51:21 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12441630">HADOOP-6390</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12445832">AVRO-348</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12426030" name="AVRO-238.patch" size="641" author="cutting" created="Tue, 24 Nov 2009 23:16:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Nov 2009 23:16:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-239] Implement __len__ for Avro Schemas</title>
                <link>https://issues.apache.org/jira/browse/AVRO-239</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;BSON has a nice implementation of _&lt;em&gt;len&lt;/em&gt;_:&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; from pymongo.bson import BSON&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; len(BSON.from_dict(&lt;/p&gt;
{&quot;hello&quot;: &quot;world&quot;}
&lt;p&gt;))&lt;br/&gt;
22&lt;/p&gt;

&lt;p&gt;We should too!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441644">AVRO-239</key>
            <summary>Implement __len__ for Avro Schemas</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2009 06:20:15 +0000</created>
                <updated>Wed, 25 Nov 2009 06:20:15 +0000</updated>
                                                                            <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-240] For Python 2.6 and above, use &quot;json&quot; module from stdlib instead of simplejson</title>
                <link>https://issues.apache.org/jira/browse/AVRO-240</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;As described at &lt;a href=&quot;http://bob.pythonmac.org/archives/2008/10/02/python-26-released-now-with-json/:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bob.pythonmac.org/archives/2008/10/02/python-26-released-now-with-json/:&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Use simplejson or Python 2.6 json, prefer simplejson.&lt;br/&gt;
try:&lt;br/&gt;
    import simplejson as json&lt;br/&gt;
except ImportError:&lt;br/&gt;
    import json&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12441646">AVRO-240</key>
            <summary>For Python 2.6 and above, use &quot;json&quot; module from stdlib instead of simplejson</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hammer">Jeff Hammerbacher</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2009 06:50:03 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:11 +0000</updated>
                            <resolved>Tue, 1 Dec 2009 21:42:07 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12782328" author="hammer" created="Wed, 25 Nov 2009 06:56:25 +0000"  >&lt;p&gt;Attached patch also cleans up the import style at the top of procol.py to match PEP 8 style guidelines.&lt;/p&gt;</comment>
                            <comment id="12782502" author="phunt" created="Wed, 25 Nov 2009 16:55:18 +0000"  >&lt;p&gt;fyi, noticed this recently, it&apos;s a python json lib performance evaluation on python 2.6. You might want to&lt;br/&gt;
add some detail in the avro py docs talking about how to get better/best performance, esp as it&lt;br/&gt;
relates to the json library used (json stdlib performance is an order of magnitude behind the others tested)&lt;/p&gt;

&lt;p&gt;&quot;I honestly didn&apos;t expect the stdlib json to be this far behind.&lt;/p&gt;

&lt;p&gt;Among the other C based libraries there isn&apos;t a clear winner. cjson is the best decoder but the slowest encoder, simplejson compiled with C speedups is the fastest encoder but the slowest decoder while jsonlib2 is somewhere in the middle for both cases.&quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mikealrogers.com/archives/695&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.mikealrogers.com/archives/695&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12782518" author="hammer" created="Wed, 25 Nov 2009 17:21:15 +0000"  >&lt;p&gt;While we can have an accelerated implementation (cf. Thrift&apos;s binary protocol) and do significant benchmarking at &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-217&quot; title=&quot;Benchmark Python implementation of Avro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-217&quot;&gt;AVRO-217&lt;/a&gt;, I think the best practice right now is to use the standard library.&lt;/p&gt;</comment>
                            <comment id="12782578" author="cutting" created="Wed, 25 Nov 2009 19:42:21 +0000"  >&lt;p&gt;+1 This looks reasonable to me.  It lets things still work when simplejson is not available, right?  Unless there are objections, I will commit this.&lt;/p&gt;</comment>
                            <comment id="12782579" author="hammer" created="Wed, 25 Nov 2009 19:45:46 +0000"  >&lt;p&gt;Doug: this will not work when simplejson is not available for Python 2.5 and below, but there is no json parsing library in the standard library before Python 2.6. It will work when simplejson is not available for Python 2.6 and above.&lt;/p&gt;</comment>
                            <comment id="12782679" author="hammer" created="Wed, 25 Nov 2009 23:38:33 +0000"  >&lt;p&gt;Still ready to commit, though.&lt;/p&gt;</comment>
                            <comment id="12784450" author="cutting" created="Tue, 1 Dec 2009 21:42:07 +0000"  >&lt;p&gt;I just committed this.  Thanks, Jeff.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426079" name="AVRO-240.patch" size="1633" author="hammer" created="Wed, 25 Nov 2009 06:56:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Nov 2009 16:55:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94567</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-241] add union annotation to reflect API</title>
                <link>https://issues.apache.org/jira/browse/AVRO-241</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;In existing Hadoop RPC interfaces one can use an abstract base class or interface in a method declaration, and then pass different instantiable subclasses, since Hadoop RPC tags parameters and return types with their runtime java class name.  To permit such interfaces to be supported by Avro reflection we can add a Union annotation that can be added to the base class, declaring its instantiable subclasses for Avro.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441714">AVRO-241</key>
            <summary>add union annotation to reflect API</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2009 22:06:35 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:11 +0000</updated>
                            <resolved>Fri, 4 Dec 2009 23:13:32 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12782650" author="cutting" created="Wed, 25 Nov 2009 22:09:09 +0000"  >&lt;p&gt;Here&apos;s a patch that implements this, with tests.&lt;/p&gt;</comment>
                            <comment id="12782657" author="cutting" created="Wed, 25 Nov 2009 22:36:58 +0000"  >&lt;p&gt;A new version that handles arrays of the union type.&lt;/p&gt;</comment>
                            <comment id="12785573" author="cutting" created="Thu, 3 Dec 2009 22:17:44 +0000"  >&lt;p&gt;Here&apos;s a new version that uses schema properties to note array element types.  This changes collection implementation classes to use schema properties too.&lt;/p&gt;</comment>
                            <comment id="12786071" author="philip" created="Fri, 4 Dec 2009 18:54:27 +0000"  >&lt;p&gt;Looks good.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;static final String CLASS_PROP = &quot;java-class&quot;;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the properties that the reflect API uses become de facto part of the API for using Java reflection.  So they&apos;re probably public, and probably should be referenced in JavaDoc somewhere.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;  // if array element type is a class with a union annotation, note it&lt;br/&gt;
  // this is required because we cannot set a property on the union itself &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;typo: extra &quot;it&quot; at end of first line&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;private void setElement(Schema schema, Type element) &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Consider renaming this method a little bit.  Perhaps &quot;annotateElementIfUnion()&quot;?  Or &quot;setElementProperties&quot;?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if (collectionClass.isAssignableFrom(ArrayList.class))&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The valid things that can be put in the annotation probably deserves some documentation.  It seems like List, and all concrete classes with empty constructors, work.  Set, however, would trigger an exception.&lt;/p&gt;

&lt;p&gt;You&apos;ve annotated a bunch of the R? inner classes in the tests, which is great.  R9 could be annotated to note that it&apos;s checking arrays of unions...&lt;/p&gt;</comment>
                            <comment id="12786191" author="cutting" created="Fri, 4 Dec 2009 21:59:45 +0000"  >&lt;p&gt;&amp;gt; the properties that the reflect API [ ... ]  should be referenced in JavaDoc&lt;/p&gt;

&lt;p&gt;Done.  I substantially updated the javadoc.&lt;/p&gt;

&lt;p&gt;&amp;gt; // if array element type is a class with a union annotation, note it&lt;br/&gt;
&amp;gt; typo: extra &quot;it&quot; at end of first line&lt;/p&gt;

&lt;p&gt;That&apos;s intended.&lt;/p&gt;

&lt;p&gt;&amp;gt; R9 could be annotated to note that it&apos;s checking arrays of unions.&lt;/p&gt;

&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="12786228" author="cutting" created="Fri, 4 Dec 2009 23:13:32 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426973" name="AVRO-241.patch" size="21428" author="cutting" created="Fri, 4 Dec 2009 21:59:45 +0000"/>
                            <attachment id="12426823" name="AVRO-241.patch" size="16865" author="cutting" created="Thu, 3 Dec 2009 22:17:44 +0000"/>
                            <attachment id="12426152" name="AVRO-241.patch" size="9037" author="cutting" created="Wed, 25 Nov 2009 22:36:58 +0000"/>
                            <attachment id="12426150" name="AVRO-241.patch" size="5577" author="cutting" created="Wed, 25 Nov 2009 22:09:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Dec 2009 18:54:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-242] add support for per-schema metadata</title>
                <link>https://issues.apache.org/jira/browse/AVRO-242</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The Avro specification permits schema json to contain other property names to be used besides those listed in the specification.  I propose adding support to Java for getting and setting these.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441720">AVRO-242</key>
            <summary>add support for per-schema metadata</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2009 22:51:25 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:12 +0000</updated>
                            <resolved>Thu, 3 Dec 2009 21:33:05 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12782664" author="cutting" created="Wed, 25 Nov 2009 22:53:43 +0000"  >&lt;p&gt;The API might be something like:&lt;/p&gt;

&lt;p&gt;public String getProperty(String name);&lt;br/&gt;
public Schema addProperty(String name, String value);&lt;/p&gt;

&lt;p&gt;Adding a value creates and returns new schema with the new value.  The original schema remains unmodified.&lt;/p&gt;</comment>
                            <comment id="12782690" author="philip" created="Thu, 26 Nov 2009 00:04:40 +0000"  >&lt;p&gt;The avro specification doesn&apos;t indicate that the values must be Strings, so they could be arbitrary JSON.  Not sure what the best approach is, though, from a Java API.&lt;/p&gt;</comment>
                            <comment id="12784386" author="cutting" created="Tue, 1 Dec 2009 20:08:04 +0000"  >&lt;p&gt;My thinking is that the Java API would initially only get/set string-based values.  It should probably throw an exception when you attempt to read a string that has a non-string, non-empty value.&lt;/p&gt;</comment>
                            <comment id="12785068" author="cutting" created="Wed, 2 Dec 2009 23:49:07 +0000"  >&lt;p&gt;Here&apos;s a patch that implements this.&lt;/p&gt;</comment>
                            <comment id="12785142" author="philip" created="Thu, 3 Dec 2009 02:10:50 +0000"  >&lt;p&gt;Overall looks good.&lt;/p&gt;

&lt;p&gt;I think the code would be simpler (fewer null checks, equalProps &amp;amp; propsHash wouldn&apos;t be necessary) if you didn&apos;t mind creating an extra HashMap per Schema.  That is, just start with an empty map.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Iterator&amp;lt;String&amp;gt; i = schema.getFieldNames();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do you dislike the Java 1.5 for syntax?  You can put the two lines you save towards your braces account.  (&amp;lt;ducks&amp;gt;)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;setProp()/getProp&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For a public API, I have a mild preference for setProperty() and getProperty().  I think that&apos;s the API you suggested before.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;schema.get(prop).getTextValue()&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There&apos;s sometimes not going to be a text value.  Is there a test for that?  You should, presumably, just skip those properties.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;static final Map&amp;lt;String,Type&amp;gt; PRIMITIVES = new HashMap&amp;lt;String,Type&amp;gt;();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unrelated to the current issue, but since you&apos;re changing these lines... You could write this as:&lt;/p&gt;

&lt;p&gt;for (Type t : Type.somethingOrOther()) {&lt;br/&gt;
  if (t.isPrimitive()) &lt;/p&gt;
{
    PRIMITIVES.add(type.name, type);
  }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;You&apos;d need to update the Type enum to have a boolean for whether things are primitive or not, which seems useful anyway.&lt;/p&gt;

&lt;p&gt;It seems visually useful to put the PRIMITIVES list and the Type enum closer together in the java file.&lt;/p&gt;</comment>
                            <comment id="12785453" author="cutting" created="Thu, 3 Dec 2009 19:03:53 +0000"  >&lt;p&gt;&amp;gt; I think the code would be simpler (fewer null checks, equalProps &amp;amp; propsHash&lt;br/&gt;
&amp;gt; wouldn&apos;t be necessary) if you didn&apos;t mind creating an extra HashMap per Schema.&lt;/p&gt;

&lt;p&gt;Yeah, I guess so.  I was not worried about the size of schema instances, but rather about the speed of parsing and constructing schemas.  This patch already affects that a lot, since primitive schemas are no longer constants, and I&apos;d hoped not make it worse yet by constructing a HashMap for each primitive in a schema.  But, as you argued elsewhere, in cases where this is a cost (e.g., per file block) we can usually probably arrange to cache schema instances.&lt;/p&gt;

&lt;p&gt;I&apos;ve changed this in the attached patch.&lt;/p&gt;

&lt;p&gt;&amp;gt; Do you dislike the Java 1.5 for syntax?&lt;/p&gt;

&lt;p&gt;It&apos;s not applicable here.  The iterator() method enumerates values, but we want keys.  JsonNode has no keySet() or entrySet() method.&lt;/p&gt;

&lt;p&gt;&amp;gt; There&apos;s sometimes not going to be a text value. Is there a test for that?&lt;/p&gt;

&lt;p&gt;I added one.&lt;/p&gt;</comment>
                            <comment id="12785539" author="cutting" created="Thu, 3 Dec 2009 21:33:05 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12442130">AVRO-247</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12426795" name="AVRO-242.patch" size="16577" author="cutting" created="Thu, 3 Dec 2009 19:03:53 +0000"/>
                            <attachment id="12426718" name="AVRO-242.patch" size="16351" author="cutting" created="Wed, 2 Dec 2009 23:49:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Nov 2009 00:04:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94569</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79621</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-243] use automake generated makefile.in</title>
                <link>https://issues.apache.org/jira/browse/AVRO-243</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Previously the c++ build used a custom Makefile.in.  in order to conform to the gnu standards for makefiles, I used automake to create a new version of Makefile.in (in addition, the new makefile uses libtool to build the libraries).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12441918">AVRO-243</key>
            <summary>use automake generated makefile.in</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sbanacho">Scott Banachowski</assignee>
                                    <reporter username="sbanacho">Scott Banachowski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2009 04:54:06 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:12 +0000</updated>
                            <resolved>Fri, 15 Jan 2010 00:20:24 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12783534" author="sbanacho" created="Mon, 30 Nov 2009 04:55:30 +0000"  >&lt;p&gt;This is the patch, and a shell script that can apply the patch (the shell will handle the added and renamed files).&lt;/p&gt;</comment>
                            <comment id="12784655" author="sbanacho" created="Wed, 2 Dec 2009 06:32:37 +0000"  >&lt;p&gt;Anyone care to try the patch?  I&apos;d like some confirmation the build works on systems other than mine before committing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12784932" author="massie" created="Wed, 2 Dec 2009 17:54:28 +0000"  >&lt;p&gt;I&apos;m setting up my environment with boost now to give this patch a run now.&lt;/p&gt;</comment>
                            <comment id="12784957" author="massie" created="Wed, 2 Dec 2009 18:49:37 +0000"  >&lt;p&gt;Scott-&lt;/p&gt;

&lt;p&gt;I&apos;ve attached the output from a failed &quot;make check&quot; of trunk &lt;b&gt;before&lt;/b&gt; applying the patch.&lt;/p&gt;

&lt;p&gt;I&apos;m running Snow Leopard.  To test this patch, I want to build pre and post.&lt;/p&gt;

&lt;p&gt;-Matt&lt;/p&gt;</comment>
                            <comment id="12784976" author="sbanacho" created="Wed, 2 Dec 2009 19:55:05 +0000"  >&lt;p&gt;I&apos;ve not seen that on either my mac or my linux box.&lt;/p&gt;

&lt;p&gt;If you run unittest directly, you should get the same problem.&lt;br/&gt;
I don&apos;t want to trouble you too much, but if you can capture a gdb backtrace or a valgrind output it might help me see what happened in this case.&lt;/p&gt;
</comment>
                            <comment id="12792241" author="sbanacho" created="Thu, 17 Dec 2009 23:56:20 +0000"  >&lt;p&gt;I&apos;ve held up this patch because I wanted to first understand the issue Matt was having.  As it turns out, others on boost-users have reported that on Snow Leopard (as is the case with Matt), unit tests crash with an error like the one he reported.  I don&apos;t have SL, so cannot reproduce it myself.  Perhaps boost will have a fix soon, but unfortunately, this might be an issue for the other 8 versions of boost that are floating around.  If there&apos;s not a work-around, I will consider trying something different (cppunit, perhaps).&lt;/p&gt;

&lt;p&gt;Meanwhile, is there anybody not using SL who can test this patch?  I&apos;ve tried it on Mac(Tiger) and Linux.  &lt;/p&gt;

</comment>
                            <comment id="12796472" author="sbanacho" created="Tue, 5 Jan 2010 01:25:36 +0000"  >&lt;p&gt;updated patch to work in cygwin&lt;/p&gt;</comment>
                            <comment id="12800077" author="hammer" created="Thu, 14 Jan 2010 01:42:02 +0000"  >&lt;p&gt;Hey Scott, what&apos;s the status of this patch in the post-163 world? Would be great to include for 1.3.&lt;/p&gt;</comment>
                            <comment id="12800080" author="sbanacho" created="Thu, 14 Jan 2010 01:49:26 +0000"  >&lt;p&gt;I&apos;ll need to fix it up for the new directory layout.  Assuming that goes smoothly, I can probably have the patch ready and committed by this week, maybe even tomorrow.&lt;/p&gt;</comment>
                            <comment id="12800447" author="sbanacho" created="Fri, 15 Jan 2010 00:12:20 +0000"  >&lt;p&gt;Newer patch that works in new source directory (dist/c++)&lt;/p&gt;
</comment>
                            <comment id="12800448" author="sbanacho" created="Fri, 15 Jan 2010 00:13:28 +0000"  >&lt;p&gt;new script for applying patch using new source directory.&lt;/p&gt;</comment>
                            <comment id="12800457" author="sbanacho" created="Fri, 15 Jan 2010 00:20:24 +0000"  >&lt;p&gt;Committed revision 899495.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430318" name="AVRO-243.patch" size="1310141" author="sbanacho" created="Fri, 15 Jan 2010 00:12:20 +0000"/>
                            <attachment id="12429406" name="AVRO-243.patch" size="1310060" author="sbanacho" created="Tue, 5 Jan 2010 01:25:36 +0000"/>
                            <attachment id="12426380" name="AVRO-243.patch" size="1310928" author="sbanacho" created="Mon, 30 Nov 2009 04:55:30 +0000"/>
                            <attachment id="12430319" name="apply-AVRO-243.sh" size="814" author="sbanacho" created="Fri, 15 Jan 2010 00:13:28 +0000"/>
                            <attachment id="12428374" name="apply-AVRO-243.sh" size="785" author="sbanacho" created="Fri, 18 Dec 2009 00:31:18 +0000"/>
                            <attachment id="12426695" name="make_check.log" size="9663" author="massie" created="Wed, 2 Dec 2009 18:49:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Dec 2009 17:54:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94570</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dz4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
