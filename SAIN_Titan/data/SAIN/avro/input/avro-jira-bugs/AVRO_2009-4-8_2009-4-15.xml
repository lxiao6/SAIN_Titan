<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:12:00 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2009-4-8+AND+created+%3C%3D+2009-4-15+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="14" total="14"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1] record fields should not be defined with a JSON object</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro uses JSON objects to define the fields of a record.  Avro record fields are ordered, but JSON objects are not.  While most JSON implementations preserve ordering of objects, Avro should not rely on this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422525">AVRO-1</key>
            <summary>record fields should not be defined with a JSON object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2009 22:09:08 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:07 +0000</updated>
                            <resolved>Mon, 27 Apr 2009 20:14:06 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12697674" author="cutting" created="Thu, 9 Apr 2009 22:15:41 +0000"  >&lt;p&gt;I propose we change the syntax for records from:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{&quot;name&quot;: &quot;Foo&quot;, &quot;fields&quot; {
  &quot;a&quot;: &quot;int&quot;, 
  &quot;b&quot;: &quot;string&quot;
 }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to something like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{&quot;name&quot;: &quot;Foo&quot;, &quot;fields&quot; [
  {&quot;name&quot;: &quot;a&quot;,  &quot;type&quot; : &quot;int&quot;},
  {&quot;name&quot;: &quot;b&quot;, &quot;type&quot; : &quot;string&quot;}
 ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a bit more verbose, but, in addition to being ordered, permits easily addition of default values per field.&lt;/p&gt;</comment>
                            <comment id="12702034" author="cutting" created="Thu, 23 Apr 2009 17:56:20 +0000"  >&lt;p&gt;Here&apos;s a patch that implements this for Java &amp;amp; updates the spec document.&lt;/p&gt;

&lt;p&gt;Sharad, can you update the Python code, or should I attempt that?&lt;/p&gt;

&lt;p&gt;Note that I also removed  a number of unused test schema files.&lt;/p&gt;</comment>
                            <comment id="12703065" author="sharadag" created="Mon, 27 Apr 2009 11:10:26 +0000"  >&lt;p&gt;Attaching the patch for python changes.&lt;br/&gt;
I have removed odict.py from lib/py and jsonparser.py as we no longer need the ordered dictionary after this JIRA.&lt;br/&gt;
All tests are passing after applying both the patches (&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1&quot; title=&quot;record fields should not be defined with a JSON object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1&quot;&gt;&lt;del&gt;AVRO-1&lt;/del&gt;&lt;/a&gt;.patch and &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1&quot; title=&quot;record fields should not be defined with a JSON object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1&quot;&gt;&lt;del&gt;AVRO-1&lt;/del&gt;&lt;/a&gt;-py.patch)&lt;/p&gt;</comment>
                            <comment id="12703336" author="cutting" created="Mon, 27 Apr 2009 20:14:06 +0000"  >&lt;p&gt;I just committed this.  Thanks, Sharad!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12422717">AVRO-8</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12406504" name="AVRO-1-py.patch" size="59376" author="sharadag" created="Mon, 27 Apr 2009 11:10:26 +0000"/>
                            <attachment id="12406256" name="AVRO-1.patch" size="18994" author="cutting" created="Thu, 23 Apr 2009 17:56:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Apr 2009 11:10:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96268</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2] optimize RPC handshake</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;In the current RPC handshake, each client sends its full protocol at the start of each session, and the server must return its full protocol.  This could be expensive, and should be avoided when possible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422529">AVRO-2</key>
            <summary>optimize RPC handshake</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2009 22:34:55 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Tue, 2 Jun 2009 19:04:10 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12697681" author="cutting" created="Thu, 9 Apr 2009 22:54:09 +0000"  >&lt;p&gt;Here&apos;s a proposed new handshake mechanism:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;In a new session, the client sends &amp;lt;mode=HASH&amp;gt;&amp;lt;clientProtocolHash&amp;gt;&amp;lt;serverProtocolHash&amp;gt;&amp;lt;request&amp;gt;, where the hashes are 128-bit MD5 or SHA hashes of the protocol text.  If a client has never connected to a given server, it uses its has as a guess of the server&apos;s hash, otherwise it uses the hash that it previously obtained from the server.&lt;/li&gt;
	&lt;li&gt;The server can respond with, one of:
	&lt;ol&gt;
		&lt;li&gt;&amp;lt;match=BOTH&amp;gt;&amp;lt;response&amp;gt; if the client sent the valid hash of the server&apos;s protocol and the server knows what protocol corresponds to the client&apos;s hash.  In this case, the request is complete and the session is established.&lt;/li&gt;
		&lt;li&gt;&amp;lt;match=CLIENT&amp;gt;&amp;lt;serverProtocolHash&amp;gt;&amp;lt;serverProtocolText&amp;gt;&amp;lt;response&amp;gt; if the server has previously seen the client&apos;s protocol, but the client sent an incorrect hash of the server&apos;s protocol.  The client would then re-send the request with the correct server hash.&lt;/li&gt;
		&lt;li&gt;&amp;lt;match=NONE&amp;gt;&amp;lt;serverProtocolHash&amp;gt;&amp;lt;serverProtocolText&amp;gt; if the server has not previously seen the client&apos;s protocol.  The client can then restart by sending &amp;lt;mode=TEXT&amp;gt;&amp;lt;clientProtocolHash&amp;gt;&amp;lt;clientProtocolText&amp;gt;&amp;lt;request&amp;gt; and the server will respond with &amp;lt;match=CLIENT&amp;gt;&amp;lt;serverProtocolHash&amp;gt;&amp;lt;serverProtocolText&amp;gt;&amp;lt;response&amp;gt;, as in case (b).&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Clients and servers should cache protocol versions in a cache that is longer-lived than a session.&lt;/p&gt;

&lt;p&gt;The handshake thus only requires an extra round-trip the first time a client of an unknown version connects.  In the case where the client and server are using the same version of the protocol, no protocol text need be sent.  The first time a particular client connects to a particular server whose protocol differs, it will recieve that protocol, but, if it caches it, it need never recieve it again until that server is upgraded.&lt;/p&gt;</comment>
                            <comment id="12713302" author="cutting" created="Tue, 26 May 2009 22:36:46 +0000"  >&lt;p&gt;Matt&apos;s suggested the handshake should be represented using Avro schemas.  Here&apos;s an attempt.  Note that, since these are appended to the front of request and response payloads by the runtime, I do not attempt to express this as an Avro protocol.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;HandshakeRequest&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;clientProtocolHash&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;MD5&quot;&lt;/span&gt;},
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;clientProtocol&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;]},
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;serverProtocolHash&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;MD5&quot;&lt;/span&gt;}
 ]
}
{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;HandshakeResponse&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;match&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;HandshakeMatch&quot;&lt;/span&gt;,
   &lt;span class=&quot;code-quote&quot;&gt;&quot;symbols&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;BOTH&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;CLIENT&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;NONE&quot;&lt;/span&gt;]},
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;serverProtocol&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ProtocolHash&quot;&lt;/span&gt;}}
 ]
}
{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;ProtocolHash&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;},
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;hash&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;MD5&quot;&lt;/span&gt;},
 ]
}
{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;fixed&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;MD5&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;size&quot;&lt;/span&gt;: 16}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s some draft text for the spec:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Until a connection is established, request payloads must be preceded by HandshakeRequest and response payloads are preceded by HandshakeResponse.  A connection is not established until a HandshakeResponse with match=BOTH or match=CLIENT is returned.  In these cases the response payload follows the HandShakeResponse.  When match=NONE no response payload is sent and the request payload is ignored.&lt;/p&gt;

&lt;p&gt;A client should initially try establishing a session by sending a HandshakeRequest that does not include its protocol text.  If it does not yet know the server&apos;s protocol hash, it should send its own as a guess.  If it receives a match=CLIENT then it should store the returned server protocol&apos;s hash and cache it for use in establishing future connections with this server.  It should only send its protocol text after it has recieved a match=NONE response.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How does that sound?&lt;/p&gt;</comment>
                            <comment id="12713797" author="cutting" created="Wed, 27 May 2009 23:22:21 +0000"  >&lt;p&gt;I&apos;d like to future-proof the handshake, so that we can potentially modify it in the future without totally breaking everything.  One approach would be to transmit the handshake schemas themselves with the handshake, so that the other side can always be sure to parse the handshake, but that makes the handshakes a few hundred bytes bigger.&lt;/p&gt;

&lt;p&gt;Another approach might be to add a metadata field to the handshake, like:&lt;/p&gt;

 {&quot;name&quot;: &quot;meta&quot;, &quot;type&quot;: &quot;map&quot;, &quot;values&quot;: &quot;bytes&quot;}

&lt;p&gt;That might be used for lots of things, like authentication, authorization, etc.&lt;/p&gt;</comment>
                            <comment id="12714619" author="cutting" created="Fri, 29 May 2009 21:52:41 +0000"  >&lt;p&gt;This patch has ballooned a bit.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The RPC handshake schemas are pre-processed by the m4 macro processor.   They&apos;re then compiled by Avro&apos;s schema compiler and the resulting Java classes are used in the RPC code.  This involved a lot of changes to build.xml.&lt;/li&gt;
	&lt;li&gt;To make this easier I renamed schema files to be .avsc and protocol files to .avpr, so that we can automatically use the right compiler.&lt;/li&gt;
	&lt;li&gt;To some degree the m4 stuff also fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-19&quot; title=&quot;add file include support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-19&quot;&gt;&lt;del&gt;AVRO-19&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;I fixed some bugs in the test code, where @BeforeMethod was used when @BeforeClass should have been used, so that RPC tests now reuse connections, as intended.&lt;/li&gt;
	&lt;li&gt;I fixed some bugs in the RPC server code where connections were not properly closed.&lt;/li&gt;
	&lt;li&gt;I fixed a bug in the specific compiler where code for a type could be generated multiply.&lt;/li&gt;
	&lt;li&gt;I added an RPC handshake test where the client uses a different server than the server, with an added method parameter.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12715291" author="cutting" created="Mon, 1 Jun 2009 22:47:47 +0000"  >&lt;p&gt;If there are no objections, I will commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="12715630" author="cutting" created="Tue, 2 Jun 2009 19:04:10 +0000"  >&lt;p&gt;I just committed this.  Note that java/py RPC interop tests are now broken, since the new protocol is not yet implemented in python.  Sharad, can you have a look at this?  Thanks!&lt;/p&gt;</comment>
                            <comment id="12715823" author="sharadag" created="Wed, 3 Jun 2009 05:58:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Note that java/py RPC interop tests are now broken, since the new protocol is not yet implemented in python&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-46&quot; title=&quot;Python RPC implementation is not as per spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-46&quot;&gt;&lt;del&gt;AVRO-46&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409426" name="AVRO-2.patch" size="36746" author="cutting" created="Fri, 29 May 2009 21:52:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jun 2009 05:58:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94331</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79376</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-3] ValueReader does not detect EOF, infinite loop results</title>
                <link>https://issues.apache.org/jira/browse/AVRO-3</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;readLong() will hang (100%cpu infinite loop) when the end of the stream is reached. in.read() returns -1 but that&apos;s not checked for. I suspect you want to throw EOFException similar to DataInput? Seems like all the read* methods in ValueReader have this issue. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 8.10, single core&lt;/p&gt;</environment>
        <key id="12422601">AVRO-3</key>
            <summary>ValueReader does not detect EOF, infinite loop results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Apr 2009 20:14:54 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Fri, 10 Apr 2009 23:31:56 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12697987" author="cutting" created="Fri, 10 Apr 2009 21:38:12 +0000"  >&lt;p&gt;Here&apos;s a patch that fixes this by throwing EOFException.  This has a performance impact, but hopefully not a significant one.  It also fixes some other bugs in ByteBufferInputStream.  Does this work for you?&lt;/p&gt;</comment>
                            <comment id="12697994" author="phunt" created="Fri, 10 Apr 2009 21:52:33 +0000"  >&lt;p&gt;This patch checks for EOF condition in the input stream.&lt;/p&gt;</comment>
                            <comment id="12698008" author="phunt" created="Fri, 10 Apr 2009 23:15:16 +0000"  >&lt;p&gt;Latest patch merges in the individual patches from Doug and I into a single patch.&lt;/p&gt;</comment>
                            <comment id="12698011" author="cutting" created="Fri, 10 Apr 2009 23:31:56 +0000"  >&lt;p&gt;I just committed this.  Thanks, Pat!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405206" name="AVRO-3.patch" size="12461" author="phunt" created="Fri, 10 Apr 2009 23:15:16 +0000"/>
                            <attachment id="12405201" name="AVRO-3.patch" size="9654" author="phunt" created="Fri, 10 Apr 2009 21:52:33 +0000"/>
                            <attachment id="12405200" name="AVRO-3.patch" size="5028" author="cutting" created="Fri, 10 Apr 2009 21:38:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Apr 2009 21:38:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94332</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-4] difficult to develop Avro in Eclipse</title>
                <link>https://issues.apache.org/jira/browse/AVRO-4</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;A fresh checkout of Avro cannot be compiled in eclipse due to tests relying on generated code.&lt;/p&gt;

&lt;p&gt;You can generate the needed code using ant, however eclipse still has issues due to the fact that the generated&lt;br/&gt;
code is not placed in a directory hierarchy that mimics the package structure of the generated class(es).&lt;/p&gt;

&lt;p&gt;I was able to resolve by copying the generated Test.java/Interop.java into a dir struct that mimics the &lt;br/&gt;
package struct, but otw I couldn&apos;t get Eclipse to compile the code fully.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422614">AVRO-4</key>
            <summary>difficult to develop Avro in Eclipse</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Apr 2009 23:20:38 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Tue, 14 Apr 2009 22:12:34 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698935" author="phunt" created="Tue, 14 Apr 2009 21:12:04 +0000"  >&lt;p&gt;This patch fixes the compiler output to be in the correct subdirectory based on namespace.&lt;/p&gt;

&lt;p&gt;Tests all pass, also eclipse is now able to use the generated code w/in the IDE (allows the tests to be compiled under eclipse).&lt;/p&gt;</comment>
                            <comment id="12698962" author="cutting" created="Tue, 14 Apr 2009 22:12:34 +0000"  >&lt;p&gt;I just committed this.  Thanks, Pat!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405463" name="AVRO-4.patch" size="5456" author="phunt" created="Tue, 14 Apr 2009 21:12:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Apr 2009 22:12:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79379</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-5] Add java versus python RPC interoperability tests</title>
                <link>https://issues.apache.org/jira/browse/AVRO-5</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Add java versus python RPC interoperability tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422631">AVRO-5</key>
            <summary>Add java versus python RPC interoperability tests</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sharadag">Sharad Agarwal</assignee>
                                    <reporter username="sharadag">Sharad Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Apr 2009 10:54:25 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Wed, 15 Apr 2009 05:27:21 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>java</component>
                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698070" author="sharadag" created="Sat, 11 Apr 2009 11:07:55 +0000"  >&lt;p&gt;Also, it would be good to separate the interoperability tests from the other tests. I think separating it would make it easier to test a particular language implementation. &lt;br/&gt;
Currently ant target &quot;test-java&quot; depends on python to generate data as it also tests for data file interoperability. It would be better to separate interoperability tests into different target as:&lt;br/&gt;
&quot;test-interop&quot; depends=&quot;test-interop-data&quot;, test-interop-rpc&quot;&lt;/p&gt;</comment>
                            <comment id="12698424" author="cutting" created="Mon, 13 Apr 2009 16:13:50 +0000"  >&lt;p&gt;&amp;gt; it would be good to separate the interoperability tests from the other tests.&lt;/p&gt;

&lt;p&gt;This is a good idea.  We should have both a self-contained test target for each implementation and an interop target for each.  The interop targets require that all other implementations are capable of correctly writing data and of making and receiving RPCs, which is difficult to ensure as we develop a new feature in each implementation.&lt;/p&gt;</comment>
                            <comment id="12698756" author="sharadag" created="Tue, 14 Apr 2009 12:33:32 +0000"  >&lt;p&gt;This patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds interoperability tests for java and python&lt;/li&gt;
	&lt;li&gt;fixes some ipc issues in python&lt;/li&gt;
	&lt;li&gt;add separate targets for interop tests. The targets hierarchy is:&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;test
	&lt;ul&gt;
		&lt;li&gt;test-java&lt;/li&gt;
		&lt;li&gt;test-py&lt;/li&gt;
		&lt;li&gt;test-interop
		&lt;ul&gt;
			&lt;li&gt;test-interop-java
			&lt;ul&gt;
				&lt;li&gt;test-interop-data-java&lt;/li&gt;
				&lt;li&gt;test-interop-rpc-java&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;test-interop-py
			&lt;ul&gt;
				&lt;li&gt;test-interop-data-py&lt;/li&gt;
				&lt;li&gt;test-interop-rpc-py&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12698832" author="cutting" created="Tue, 14 Apr 2009 17:04:18 +0000"  >&lt;p&gt;+1 This looks great to me.  Thanks!&lt;/p&gt;</comment>
                            <comment id="12699053" author="sharadag" created="Wed, 15 Apr 2009 05:06:53 +0000"  >&lt;p&gt;Updated to trunk.&lt;/p&gt;</comment>
                            <comment id="12699063" author="sharadag" created="Wed, 15 Apr 2009 05:27:21 +0000"  >&lt;p&gt;I just committed this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405411" name="AVRO-5_v1.patch" size="17624" author="sharadag" created="Tue, 14 Apr 2009 12:33:31 +0000"/>
                            <attachment id="12405493" name="AVRO-5_v2.patch" size="17648" author="sharadag" created="Wed, 15 Apr 2009 05:06:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Apr 2009 16:13:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79380</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-6] Better support for using customized in memory types with Avro GenericDatumReader and GenericDatumWriter</title>
                <link>https://issues.apache.org/jira/browse/AVRO-6</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently Avro&apos;s GenericDatumReader/Writer requires Record, Array, and Map be subclasses of GenericRecord, GenericArray, and Map. Additionally, STRING and BYTES are mapped to Utf8 and ByteBuffer. Finally, Record fields are accessed through field names, this may be less efficient if a user-defined record class supports field access by positions (such as PIG Tuples).&lt;/p&gt;

&lt;p&gt;I suggest we improve the interface to (1) have more flexibility to use user-types with Avro; (2) support access to RECORDs by either field names or field positions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422636">AVRO-6</key>
            <summary>Better support for using customized in memory types with Avro GenericDatumReader and GenericDatumWriter</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hong.tang">Hong Tang</assignee>
                                    <reporter username="hong.tang">Hong Tang</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Apr 2009 17:32:37 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Tue, 14 Apr 2009 21:43:08 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698118" author="jkreps" created="Sat, 11 Apr 2009 18:14:17 +0000"  >&lt;p&gt;With respect to (2), one approach would be the following:&lt;/p&gt;

&lt;p&gt;Avro schemas implicitly assign a slot number to each field. The Schema.getFields currently returns field names. It should instead return Map&amp;lt;String, Field&amp;gt; (or something like that) where Field is a class that has (a) the field name, (b) the calculated slot number, and (c) the schema.&lt;/p&gt;

&lt;p&gt;The record can then support get(Field) as well as get(String).&lt;/p&gt;

&lt;p&gt;Internally the implementation of GenericRecord can stop using HashMap, and just use Object[] where the index in the array is the slot calculated by the field. A get(&quot;my_key&quot;) translates to get(schema.getField(&quot;my_key&quot;)).&lt;/p&gt;

&lt;p&gt;This should be a tiny bit faster since for hadoop you will be able to calculate the field once per mapper/reducer and use it many times to avoid re-hashing. It should be denser because your array is just of Object[] not Map.Entry[] so you avoid creating lots of entry objects and maintaining the 25% sparseness.&lt;/p&gt;</comment>
                            <comment id="12698179" author="hong.tang" created="Sun, 12 Apr 2009 07:36:24 +0000"  >&lt;p&gt;The patch includes the following changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Changed Schema.getFields() to return a map of &amp;lt;String, Field&amp;gt; where Field contains a position and the field Schema.&lt;/li&gt;
	&lt;li&gt;Changed the &quot;protected&quot; interface of GenericDatumReader and GenericDatumWriter so that both classes can be easily sub-classed to support generic types that are not derived from GenericRecord or GenericArray. Specifically,
	&lt;ul&gt;
		&lt;li&gt;Added a set of isXXX() methods to test whether an object is of a specific type. All but the following types can be customized: Integer, Long, Float, Double, Boolean.&lt;/li&gt;
		&lt;li&gt;Added a getType() method that by default calls the isXXX() methods, it is provided in case a sub-class may reimplement it more efficiently.&lt;/li&gt;
		&lt;li&gt;InstanceOf() is implemented on top of getType().&lt;/li&gt;
		&lt;li&gt;Added access methods for RECORD type (newRecord(), getField(), addField(), removeField()), ARRAY type (newArray(), addToArray(), peekArray(), getArrayElements(), getArraySize()), and MAP type (newMap(), addToMap(), getMapEntrySet(), getMapSize()).&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Other minor changes:
	&lt;ul&gt;
		&lt;li&gt;Make the object reuse code more consistent. E.g. newRecord(), newArray(), newMap() all take the old object as the first parameter.&lt;/li&gt;
		&lt;li&gt;parameterized GenericDatumReader and GenericDatumWriter, in cases where a sub-class always take a specific type as the root type of all objects (and thus it would behave as DatumReader&amp;lt;T&amp;gt; instead of DatumReader&amp;lt;Object&amp;gt;).&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This patch simply refactored the interfaces of RecordSchema, GenericDatumReader and GenericDatumWriter, and does not fix any bugs or add new features. No additional unit tests are included.&lt;/p&gt;</comment>
                            <comment id="12698180" author="hong.tang" created="Sun, 12 Apr 2009 07:37:40 +0000"  >&lt;p&gt;The patch includes the following changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Changed Schema.getFields() to return a map of &amp;lt;String, Field&amp;gt; where Field contains a position and the field Schema.&lt;/li&gt;
	&lt;li&gt;Changed the &quot;protected&quot; interface of GenericDatumReader and GenericDatumWriter so that both classes can be easily sub-classed to support generic types that are not derived from GenericRecord or GenericArray. Specifically,
	&lt;ul&gt;
		&lt;li&gt;Added a set of isXXX() methods to test whether an object is of a specific type. All but the following types can be customized: Integer, Long, Float, Double, Boolean.&lt;/li&gt;
		&lt;li&gt;Added a getType() method that by default calls the isXXX() methods, it is provided in case a sub-class may reimplement it more efficiently.&lt;/li&gt;
		&lt;li&gt;InstanceOf() is implemented on top of getType().&lt;/li&gt;
		&lt;li&gt;Added access methods for RECORD type (newRecord(), getField(), addField(), removeField()), ARRAY type (newArray(), addToArray(), peekArray(), getArrayElements(), getArraySize()), and MAP type (newMap(), addToMap(), getMapEntrySet(), getMapSize()).&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Other minor changes:
	&lt;ul&gt;
		&lt;li&gt;Make the object reuse code more consistent. E.g. newRecord(), newArray(), newMap() all take the old object as the first parameter.&lt;/li&gt;
		&lt;li&gt;parameterized GenericDatumReader and GenericDatumWriter, in cases where a sub-class always take a specific type as the root type of all objects (and thus it would behave as DatumReader&amp;lt;T&amp;gt; instead of DatumReader&amp;lt;Object&amp;gt;).&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This patch simply refactored the interfaces of RecordSchema, GenericDatumReader and GenericDatumWriter, and does not fix any bugs or add new features. No additional unit tests are included.&lt;/p&gt;</comment>
                            <comment id="12698181" author="hong.tang" created="Sun, 12 Apr 2009 07:42:57 +0000"  >&lt;p&gt;With the patch, here is how I may override a few methods to provide a DatumReader/Writer for PIG Tuple:&lt;/p&gt;

&lt;p&gt;Tuple DatumWriter:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getField(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; record, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; position) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((Tuple) record).get(position);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecException e) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error getting datum in tuple &quot;&lt;/span&gt;, e);
    }
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; getArraySize(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; array) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((DataBag) array).size();
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Iterator&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getArrayElements(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; array) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((DataBag) array).iterator();
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isString(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; datum &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isBytes(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; datum &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; DataByteArray;
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isRecord(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; datum &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Tuple;
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isArray(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; datum &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; DataBag;
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void writeString(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum, ValueWriter out) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    out.writeUtf8(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Utf8((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) datum));
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void writeBytes(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; datum, ValueWriter out) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    out.writeBuffer(ByteBuffer.wrap(((DataByteArray) datum).get()));
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tuple DatumReader:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void addField(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; record, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; position, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      ((Tuple) record).set(position, o);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecException e) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error setting datum in tuple &quot;&lt;/span&gt;, e);
    }
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getField(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; record, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; position) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((Tuple) record).get(position);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecException e) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error getting datum in tuple &quot;&lt;/span&gt;, e);
    }
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void removeField(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; record, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; position) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      ((Tuple) record).set(position, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecException e) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error setting datum in tuple &quot;&lt;/span&gt;, e);
    }
  }
  
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; peekArray(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; array) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void addToArray(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; array, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; e) {
    ((DataBag) array).add((Tuple) e);
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; newRecord(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; old, Schema schema) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((old != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &amp;amp;&amp;amp; ((Tuple) old).size() == schema.getFields().size()) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; old;
    }

    Tuple retv = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultTuple(); &lt;span class=&quot;code-comment&quot;&gt;// TODO: change to use tuple factory
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; schema.getFields().size(); ++i) {
      retv.append(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; retv;
  }
  
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; newArray(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; old, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; size) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (old != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      ((DataBag) old).clear();
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; old;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultDataBag(); &lt;span class=&quot;code-comment&quot;&gt;// TODO: change to use bag factory
&lt;/span&gt;  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; readString(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; old, ValueReader in) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; in.readUtf8(old);
  }

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; DataByteArray readBytes(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; old, ValueReader in)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    ByteBuffer bb =
        in.readBuffer((old == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) ? &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : ByteBuffer
            .wrap(((DataByteArray) old).get()));
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataByteArray(bb.array(), 0, bb.limit());
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12698185" author="hong.tang" created="Sun, 12 Apr 2009 07:51:00 +0000"  >&lt;p&gt;@Jay:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;With respect to (2), one approach would be the following: ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed. I am looking into using Avro with Pig, and hence the need for me to connect Avro format to a position-based generic type.&lt;/p&gt;

&lt;p&gt;I am also fine with changing Field to be a three-tuple: &amp;lt;string, position, schema&amp;gt;. The reason I did not include the string name is because it is already available as the key of the map entry.&lt;/p&gt;</comment>
                            <comment id="12698449" author="cutting" created="Mon, 13 Apr 2009 17:28:25 +0000"  >&lt;p&gt;Overall I like this patch, but I have some comments and questions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In FieldSchema, fields and fieldSchemas are redundant, and checkFields is in many primary code paths.  I wonder if we should rather construct record schemas without fields, then set the fields subsequently, since that&apos;s what folks must do anyway to support circular schemas.  Then we can number them when they&apos;re set, avoiding checkFields() etc.&lt;/li&gt;
	&lt;li&gt;The code might be a lot smaller if we add a method Schema.getFieldSchemas() that returns an Iterable&amp;lt;String,Schema&amp;gt;.  The majority of loops do not use the field&apos;s position.  Do you think that would be worthwhile?&lt;/li&gt;
	&lt;li&gt;in GenericDatumReader, a TODO comment should not be in public javadoc, but rather in a source-code-only comment&lt;/li&gt;
	&lt;li&gt;in GenericDatumReader, shouldn&apos;t we still avoid the call to getField when old == null?&lt;/li&gt;
	&lt;li&gt;in GenericDatumWriter, getType looks substantially slower than the old instanceOf implementation it replaces.  If some implementations require this kind of logic, shouldn&apos;t they override instanceOf rather than forcing it on everyone?&lt;/li&gt;
	&lt;li&gt;SpecificDatumReader can use field numbers instead of building a map, I think.  So it could, instead of overriding readRecord, override getField, addField and removeField, no?&lt;/li&gt;
	&lt;li&gt;is it really worth making GenericDatumReader generic?  does Pig have a root type?  If all uses end up specifying GenericDatumReader&amp;lt;Object&amp;gt; then this is not helping much.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12698476" author="hong.tang" created="Mon, 13 Apr 2009 18:17:02 +0000"  >&lt;p&gt;@doug, +1 on most of your points. Other comments below:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In FieldSchema, fields and fieldSchemas are redundant, and checkFields is in many primary code paths. I wonder if we should rather construct record schemas without fields, then set the fields subsequently, since that&apos;s what folks must do anyway to support circular schemas. Then we can number them when they&apos;re set, avoiding checkFields() etc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you clarify a little bit more? Do you mean that we should have an extra method called setFields() that should be called after a user has finished adding fields to the Map&amp;lt;String, Schema&amp;gt; (and maybe call it finalize())? My original thoughts were that schema operation will not be frequent so the additional check is not a big issue in terms of performance yet it reduces the burden on the caller. But I am fine either way, particularly because you may want to explicitly finalize a schema object to support immutability of schema objects.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;in GenericDatumWriter, getType looks substantially slower than the old instanceOf implementation it replaces. If some implementations require this kind of logic, shouldn&apos;t they override instanceOf rather than forcing it on everyone?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, I think it is better to implement both instanceOf() and getType() on top of the bunch of isXXX() calls. Note that getType()  is used in the big switch-case statement in the write() method. A more efficient implementation of getType() is possible if some generic type keeps its type-id with every datum and thus getType() can be implemented through a translation table (instead of a sequence of isXXX() calls).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;SpecificDatumReader can use field numbers instead of building a map, I think. So it could, instead of overriding readRecord, override getField, addField and removeField, no?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Possible. I only did the minimum to get it working. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Can we defer that to a different jira issue since it looks to me like an optimization based on this new interface? (&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;is it really worth making GenericDatumReader generic? does Pig have a root type? If all uses end up specifying GenericDatumReader&amp;lt;Object&amp;gt; then this is not helping much.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, it is very much the case in Pig where everything starts with a Tuple.&lt;/p&gt;
</comment>
                            <comment id="12698489" author="cutting" created="Mon, 13 Apr 2009 18:45:45 +0000"  >&lt;p&gt;&amp;gt; Do you mean that we should have an extra method called setFields() that should be called after a user has finished adding fields to the Map&amp;lt;String, Schema&amp;gt; (and maybe call it finalize())?&lt;/p&gt;

&lt;p&gt;Yes, although I think setFields() is a fine name for now.  We should address immutability as a separate issue.&lt;/p&gt;

&lt;p&gt;&amp;gt; schema operation will not be frequent &lt;/p&gt;

&lt;p&gt;We call getFields() for every record written or read, so adding a call to checkFields() there should probably be avoided if possible.&lt;/p&gt;

&lt;p&gt;&amp;gt; Yes, I think it is better to implement both instanceOf() and getType() on top of the bunch of isXXX() calls.&lt;/p&gt;

&lt;p&gt;I think instanceOf() should have its former switch structure, and directly dispatch there to isArray, isMap, etc.  I like adding the new predicate methods, but do not see the point of getType().&lt;/p&gt;

&lt;p&gt;&amp;gt; Can we defer that to a different jira issue since it looks to me like an optimization based on this new interface?&lt;/p&gt;

&lt;p&gt;Can you please file it then, and make it dependent on this, so that we don&apos;t forget to fix that?  It should provide a substantial code size reduction with (hopefully) little performance impact.  Thanks.&lt;/p&gt;


</comment>
                            <comment id="12698593" author="hong.tang" created="Mon, 13 Apr 2009 23:43:36 +0000"  >&lt;p&gt;New patch incorporated the comments from Doug.&lt;/p&gt;</comment>
                            <comment id="12698644" author="hong.tang" created="Tue, 14 Apr 2009 04:18:19 +0000"  >&lt;p&gt;New patch incorporated the comments from Doug. Also restored some unnecessary changes caused by eclipse.&lt;/p&gt;</comment>
                            <comment id="12698645" author="hong.tang" created="Tue, 14 Apr 2009 04:19:14 +0000"  >&lt;p&gt;New patch incorporated the comments from Doug. &lt;/p&gt;</comment>
                            <comment id="12698856" author="cutting" created="Tue, 14 Apr 2009 17:57:48 +0000"  >&lt;p&gt;I guess I wasn&apos;t clear about how I thought setFields() should work.  I&apos;ve updated the patch to the style I intended, where a record schema is initially created with null fields, and they&apos;re only permitted to be set once.&lt;/p&gt;

&lt;p&gt;I also reverted a number of whitespace-only changes that made the patch harder for me to read.&lt;/p&gt;

&lt;p&gt;Hong, does this look reasonable to you?&lt;/p&gt;</comment>
                            <comment id="12698864" author="hong.tang" created="Tue, 14 Apr 2009 18:17:18 +0000"  >&lt;p&gt;Yes, it does make more sense to me now why you want to call it &quot;setFields&quot;.&lt;/p&gt;

&lt;p&gt;Curiously, any reason you want to return fieldSchemas as a Set of Map.Entry&amp;lt;String, Schema&amp;gt; instead of Map&amp;lt;String, Schema&amp;gt;?&lt;/p&gt;</comment>
                            <comment id="12698876" author="cutting" created="Tue, 14 Apr 2009 18:59:10 +0000"  >&lt;p&gt;&amp;gt; any reason you want to return fieldSchemas as a Set of Map.Entry&amp;lt;String, Schema&amp;gt; instead of Map&amp;lt;String, Schema&amp;gt;?&lt;/p&gt;

&lt;p&gt;all of the calls to this method are code like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,Schema&amp;gt; field : schema.getFieldSchemas()) {...}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and adding .entrySet() causes this to overflow 80 columns.  getFieldSchemas() is a utility for all of these cases that don&apos;t need the Field&apos;s position, and it saves a couple of lines in each, since it also avoids the call to field.getSchema().&lt;/p&gt;

&lt;p&gt;Perhaps a better signature would be Iterable&amp;lt;Map.Pair&amp;lt;String,Schema&amp;gt;&amp;gt;.   I&apos;ve updated the patch to use that instead, for clarity.&lt;/p&gt;</comment>
                            <comment id="12698911" author="hong.tang" created="Tue, 14 Apr 2009 20:22:19 +0000"  >&lt;p&gt;+1 Looks good to me.&lt;/p&gt;</comment>
                            <comment id="12698950" author="cutting" created="Tue, 14 Apr 2009 21:43:08 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;

&lt;p&gt;You had neglected to add javadoc comments for all of the new protected methods, so I added that.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12422751">AVRO-11</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12405446" name="AVRO-6.patch" size="52763" author="cutting" created="Tue, 14 Apr 2009 18:59:10 +0000"/>
                            <attachment id="12405441" name="AVRO-6.patch" size="53028" author="cutting" created="Tue, 14 Apr 2009 17:57:48 +0000"/>
                            <attachment id="12405386" name="avro-6.patch" size="55460" author="hong.tang" created="Tue, 14 Apr 2009 04:18:19 +0000"/>
                            <attachment id="12405262" name="avro-6.patch" size="55832" author="hong.tang" created="Sun, 12 Apr 2009 07:36:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 11 Apr 2009 18:14:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79381</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-7] ant test fails due to missing classes</title>
                <link>https://issues.apache.org/jira/browse/AVRO-7</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;&quot;ant test&quot; fails due to missing classes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;compile-java-test:
    [javac] Compiling 5 source files to /home/htang/workspace/avro.svn/trunk/build/test/classes
    [javac] /home/htang/workspace/avro.svn/trunk/src/test/java/org/apache/avro/TestProtocolSpecific.java:61: cannot find symbol
    [javac] symbol  : variable message
    [javac] location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.avro.Test.TestError
    [javac]       error.message = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Utf8(&lt;span class=&quot;code-quote&quot;&gt;&quot;an error&quot;&lt;/span&gt;);
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; (more output omitted)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422637">AVRO-7</key>
            <summary>ant test fails due to missing classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hong.tang">Hong Tang</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Apr 2009 17:50:31 +0000</created>
                <updated>Tue, 14 Jul 2009 23:04:47 +0000</updated>
                            <resolved>Mon, 13 Apr 2009 09:15:34 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698171" author="hong.tang" created="Sun, 12 Apr 2009 06:19:48 +0000"  >&lt;p&gt;Sorry, it seems to be caused by a change I made to the source code. Please invalidate the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94336</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79382</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-8] permit default values for record fields</title>
                <link>https://issues.apache.org/jira/browse/AVRO-8</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Record fields should permit the specification of default values in the schema.  When a record is read, and the written version contains no value for a field, the default value from the schema is used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422717">AVRO-8</key>
            <summary>permit default values for record fields</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Apr 2009 19:04:33 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Mon, 11 May 2009 18:20:24 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698540" author="cutting" created="Mon, 13 Apr 2009 20:30:55 +0000"  >&lt;p&gt;Here&apos;s a proposed syntax for default values.  Note that &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-9&quot; title=&quot;restrict map keys to strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-9&quot;&gt;&lt;del&gt;AVRO-9&lt;/del&gt;&lt;/a&gt; is assumed, that map keys are only strings.&lt;/p&gt;

&lt;p&gt;Unions can make default values ambiguous.  An ambiguous union is here defined as one that has:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;one or more numeric types;&lt;/li&gt;
	&lt;li&gt;one or more records; or&lt;/li&gt;
	&lt;li&gt;a map and a record&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When the type of a field is not an ambiguous union, its default value can be of the following JSON form:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;array  &lt;span class=&quot;error&quot;&gt;&amp;#91;1, 2, 3&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;string &quot;foo&quot;&lt;/li&gt;
	&lt;li&gt;bytes &quot;a1b2&quot; (hex-encoded)&lt;/li&gt;
	&lt;li&gt;int  1&lt;/li&gt;
	&lt;li&gt;long 1&lt;/li&gt;
	&lt;li&gt;float 1.0&lt;/li&gt;
	&lt;li&gt;double 1.0&lt;/li&gt;
	&lt;li&gt;boolean true&lt;/li&gt;
	&lt;li&gt;null as null&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Default values for ambiguous unions must be qualfied as follows:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;record 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; { &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &amp;lt;name&amp;gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;: { &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;:  1, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;: 2 } } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;array 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; { &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;array&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;: [1, 2, 3] } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;map  
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{ &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;map&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:  { &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;:  1, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;: 2 } } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;string  
{ &quot;type&quot;: &quot;string&quot;, &quot;value&quot;: &quot;foo&quot; }&lt;/li&gt;
	&lt;li&gt;bytes as  
{ &quot;type&quot;: &quot;bytes&quot;, &quot;value&quot;:  &quot;a1b2&quot; }&lt;/li&gt;
	&lt;li&gt;int as  
{ &quot;type&quot;: &quot;int&quot;, &quot;value&quot;:  1 }&lt;/li&gt;
	&lt;li&gt;long as  
{ &quot;type&quot;: &quot;long&quot;, &quot;value&quot;:  1 }&lt;/li&gt;
	&lt;li&gt;float as  
{ &quot;type&quot;: &quot;float&quot;, &quot;value&quot;:  1.0 }&lt;/li&gt;
	&lt;li&gt;double as  
{ &quot;type&quot;: &quot;double&quot;, &quot;value&quot;:  1.0 }&lt;/li&gt;
	&lt;li&gt;boolean as 
{ &quot;type&quot;: &quot;boolean&quot;, &quot;value&quot; true }&lt;/li&gt;
	&lt;li&gt;null as  
{&quot;type&quot;: &quot;null&quot; }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The qualified format may always be used.  Note that arrays and maps must always be qualified so that they may be distinguished.&lt;/p&gt;

&lt;p&gt;Comments?&lt;/p&gt;</comment>
                            <comment id="12698541" author="cutting" created="Mon, 13 Apr 2009 20:34:30 +0000"  >&lt;p&gt;This should be implemented after &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1&quot; title=&quot;record fields should not be defined with a JSON object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1&quot;&gt;&lt;del&gt;AVRO-1&lt;/del&gt;&lt;/a&gt;, since that will alter field syntax to better permit specification of default values.&lt;/p&gt;</comment>
                            <comment id="12698592" author="cutting" created="Mon, 13 Apr 2009 23:43:35 +0000"  >&lt;p&gt;My above proposal can be considerably simplified with the addition of a convention:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;when a union is ambiguous, e.g., &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;long&amp;quot;, &amp;quot;double&amp;quot;&amp;#93;&lt;/span&gt;, its leftmost branch is always assumed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With this assumption, default values may be unambiguously specified as:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;type&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;example default value&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; record &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;{&quot;a&quot;: 1, &quot;b&quot;: 2} &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; array &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1, 2, 3&amp;#93;&lt;/span&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; map &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; {&quot;a&quot;: 1, &quot;b&quot;: 2} &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; union &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;em&gt;none: use type of leftmost branch&lt;/em&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; string &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &quot;foo&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; bytes &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &quot;a1b2&quot; (hex)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; int &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; long&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; float&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; double&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; boolean&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;null&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;null&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;So, for example, given the following two record definitions:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:record&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;fields&lt;span class=&quot;code-quote&quot;&gt;&quot;: [{&quot;&lt;/span&gt;name&lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt;a&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;type&quot;: string}]}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:record&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;fields&lt;span class=&quot;code-quote&quot;&gt;&quot;: [{&quot;&lt;/span&gt;name&lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt;a&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;type&quot;: string}]}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and given the following union-valued field definition:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;], &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;:1}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;its default value would be an instance of &quot;foo&quot;, not &quot;bar&quot;, since foo is leftmost in the union.  If a different default is desired, then the union can be re-ordered.&lt;/p&gt;

&lt;p&gt;This does limit expressiveness in some cases, but I think these are not common and the simplification is warranted.  For example, if one has a record with a union field, and that record is used in multiple other records, one could not easily specify different branches of that union in default values in these other records.&lt;/p&gt;

&lt;p&gt;Note that records may already have default values for their fields.  These are combined with the defaults in a field whose value is an instance of that record, with the containing field taking precedence over the record&apos;s definition.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;
</comment>
                            <comment id="12701790" author="philip" created="Thu, 23 Apr 2009 03:09:48 +0000"  >&lt;p&gt;Introducing defaults will complicate (RPC) schema resolution somewhat.  If you have a client sending a message to a server, and the default value for some parameter is different across the two instances, whose default value will you use?&lt;/p&gt;</comment>
                            <comment id="12701806" author="cutting" created="Thu, 23 Apr 2009 04:55:57 +0000"  >&lt;p&gt;&amp;gt; If you have a client sending a message to a server, and the default value for some parameter is different across the two instances, whose default value will you use?&lt;/p&gt;

&lt;p&gt;The server&apos;s default value is only used when the client&apos;s schema does not include that field.  If the client&apos;s schema has a field, it must send some value for that field.  The client&apos;s default value could perhaps also be used by a client&apos;s runtime when a client application doesn&apos;t explicitly specify a value for a field, but that&apos;s not the primary purpose for default values.&lt;/p&gt;</comment>
                            <comment id="12702103" author="philip" created="Thu, 23 Apr 2009 20:55:29 +0000"  >&lt;p&gt;Yep, I was asking specifically about the latter case, but I&apos;d forgotten that in Avro you typically materialize all the fields (as opposed to the notion of &quot;optional fields&quot; in protocol buffers), so I was worried about a client sending a message to a server where a field was in the schema but missing.  Thanks for clarifying.&lt;/p&gt;</comment>
                            <comment id="12707071" author="cutting" created="Thu, 7 May 2009 20:02:43 +0000"  >&lt;p&gt;This implements default fields for Java.  All tests pass.&lt;/p&gt;</comment>
                            <comment id="12707083" author="cutting" created="Thu, 7 May 2009 20:24:46 +0000"  >&lt;p&gt;An improved patch, adding methods to create strings and bytes, to fully support alternate representations.&lt;/p&gt;

&lt;p&gt;Note that this changes the record schema creation API.  Instead of providing a Map&amp;lt;String,Schema&amp;gt; one must now provide a LinkedHashMap&amp;lt;String,Field&amp;gt;.  LinkedHashMap is used since it is ordered (we should have done this long ago), and Schema is replaced with Field so that one can specify default values.&lt;/p&gt;

&lt;p&gt;I&apos;m tempted to commit this as-is, and file a separate issue for python.  Thoughts?&lt;/p&gt;</comment>
                            <comment id="12707473" author="cutting" created="Fri, 8 May 2009 19:06:38 +0000"  >&lt;p&gt;Any objections to committing this now?  I&apos;d like to start on &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-18&quot; title=&quot;add enum type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-18&quot;&gt;&lt;del&gt;AVRO-18&lt;/del&gt;&lt;/a&gt;, and want to avoid conflicts.&lt;/p&gt;</comment>
                            <comment id="12707928" author="sharadag" created="Mon, 11 May 2009 07:54:57 +0000"  >&lt;p&gt;Patch looks good. +1 for committing. I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-28&quot; title=&quot;python: permit default values for record fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-28&quot;&gt;&lt;del&gt;AVRO-28&lt;/del&gt;&lt;/a&gt; for python.&lt;/p&gt;</comment>
                            <comment id="12708141" author="cutting" created="Mon, 11 May 2009 18:20:24 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12422525">AVRO-1</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12422722">AVRO-9</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12407574" name="AVRO-8.patch" size="20815" author="cutting" created="Thu, 7 May 2009 20:24:46 +0000"/>
                            <attachment id="12407569" name="AVRO-8.patch" size="19850" author="cutting" created="Thu, 7 May 2009 20:02:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Apr 2009 03:09:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-9] restrict map keys to strings</title>
                <link>https://issues.apache.org/jira/browse/AVRO-9</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;In many scripting languages, the standard map datastructure does not support arbitrary keys, but rather only strings and possibly numeric values.  To simplify integration with such languages, Avro should restrict map keys to be strings.  Thus, effectively, maps would become dynamic records, records whose field names vary from instance to instance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422722">AVRO-9</key>
            <summary>restrict map keys to strings</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sharadag">Sharad Agarwal</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Apr 2009 19:50:30 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Mon, 27 Apr 2009 20:18:47 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12702494" author="cutting" created="Fri, 24 Apr 2009 19:30:34 +0000"  >&lt;p&gt;Here&apos;s a patch that updates the spec doc and implements this for Java.&lt;/p&gt;</comment>
                            <comment id="12703079" author="sharadag" created="Mon, 27 Apr 2009 11:39:03 +0000"  >&lt;p&gt;patch with the python support.&lt;/p&gt;</comment>
                            <comment id="12703340" author="cutting" created="Mon, 27 Apr 2009 20:18:47 +0000"  >&lt;p&gt;I just committed this.  Thanks, Sharad!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12422717">AVRO-8</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12406512" name="AVRO-9-py.patch" size="6506" author="sharadag" created="Mon, 27 Apr 2009 11:39:03 +0000"/>
                            <attachment id="12406386" name="AVRO-9.patch" size="17864" author="cutting" created="Fri, 24 Apr 2009 19:30:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Apr 2009 11:39:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94338</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-10] add fixed-size type</title>
                <link>https://issues.apache.org/jira/browse/AVRO-10</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro should support an opaque binary type whose size in bytes is specified in the schema.  This would permit, e.g., single-byte values, short values, and efficient representations for checksums pseudo-random values such as MD5 and SHA, dates, etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422727">AVRO-10</key>
            <summary>add fixed-size type</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Apr 2009 20:42:18 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Fri, 22 May 2009 17:48:49 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698546" author="cutting" created="Mon, 13 Apr 2009 20:43:44 +0000"  >&lt;p&gt;This might be specfied as, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;fixed&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;size&quot;&lt;/span&gt;: 16}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12711855" author="cutting" created="Thu, 21 May 2009 23:20:25 +0000"  >&lt;p&gt;This is a complete implementation for Java, and updates the spec document.&lt;/p&gt;

&lt;p&gt;Note that a new, unreleased version of qdox is required to fix a paranamer-related bug.&lt;/p&gt;</comment>
                            <comment id="12712030" author="sharadag" created="Fri, 22 May 2009 11:25:33 +0000"  >&lt;p&gt;I am fine in committing this. Python support, I will do in a day or two.&lt;/p&gt;</comment>
                            <comment id="12712182" author="cutting" created="Fri, 22 May 2009 17:48:49 +0000"  >&lt;p&gt;I just committed the Java implementation of this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408754" name="AVRO-10.patch" size="29198" author="cutting" created="Thu, 21 May 2009 23:20:25 +0000"/>
                            <attachment id="12408753" name="qdox-1.10-20090420.183942-5.jar" size="167064" author="cutting" created="Thu, 21 May 2009 23:20:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 May 2009 11:25:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94339</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79385</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-11] Improve SpecificDatumReader code by using field positions.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-11</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;With Avro-6, it would be more efficient to reimplement SpecificDatumReader to use field positions from schema.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422751">AVRO-11</key>
            <summary>Improve SpecificDatumReader code by using field positions.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hong.tang">Hong Tang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Apr 2009 04:21:11 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Tue, 14 Apr 2009 22:29:06 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698959" author="cutting" created="Tue, 14 Apr 2009 22:04:17 +0000"  >&lt;p&gt;Patch to switch specific and reflect implementations to use new API.&lt;/p&gt;</comment>
                            <comment id="12698970" author="cutting" created="Tue, 14 Apr 2009 22:29:05 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12422636">AVRO-6</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12405470" name="AVRO-11.patch" size="7404" author="cutting" created="Tue, 14 Apr 2009 22:04:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Apr 2009 22:04:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94340</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79386</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-12] Bug in comparison of recurisive schemas</title>
                <link>https://issues.apache.org/jira/browse/AVRO-12</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Comparison of recursive schema will lead to infinite recursion (eventually leading to java.lang.StackOverflowError.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422752">AVRO-12</key>
            <summary>Bug in comparison of recurisive schemas</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hong.tang">Hong Tang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Apr 2009 04:34:44 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Fri, 22 May 2009 20:45:12 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698648" author="hong.tang" created="Tue, 14 Apr 2009 04:35:38 +0000"  >&lt;p&gt;Here is the unit test that can reproduce the error (add the code in TestSchema.java):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testRecursive2() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; jsonSchema =
        &lt;span class=&quot;code-quote&quot;&gt;&quot;{\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;record\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;name\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;Node\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;fields\&lt;span class=&quot;code-quote&quot;&gt;&quot;: {&quot;&lt;/span&gt;
            + &lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;label\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;string\&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;
            + &lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;children\&lt;span class=&quot;code-quote&quot;&gt;&quot;: {\&quot;&lt;/span&gt;type\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;array\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;items\&lt;span class=&quot;code-quote&quot;&gt;&quot;: \&quot;&lt;/span&gt;Node\&lt;span class=&quot;code-quote&quot;&gt;&quot; }}}&quot;&lt;/span&gt;;
    Schema s1 = Schema.parse(jsonSchema);
    Schema s2 = Schema.parse(jsonSchema);
    assertEquals(s1, s2);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12698657" author="sharadag" created="Tue, 14 Apr 2009 05:17:00 +0000"  >&lt;p&gt;Seems like the same schema &apos;type&apos; (in the above example, Node) share the same reference, leading equals() method in to infinite recursion.&lt;/p&gt;</comment>
                            <comment id="12698899" author="cutting" created="Tue, 14 Apr 2009 19:55:49 +0000"  >&lt;p&gt;This will also happen if you call hashCode() on such a schema.&lt;/p&gt;

&lt;p&gt;A simple, yet slow, solution would be to implement both equals and hashCode in terms of toString(), since that already does loop detection.  We could alternately add loop detection to equals and hashCode().  An efficient way might be to keep fast and slow pointers as we walk, to detect loops (&lt;a href=&quot;http://franz.com/support/documentation/6.2/ansicl/dictentr/list-len.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://franz.com/support/documentation/6.2/ansicl/dictentr/list-len.htm&lt;/a&gt;) but that would require re-implementing equals and hashcode for collection classes.  So an expedient way might be to use a ThreadLocal&amp;lt;Set&amp;gt; to keep track of what&apos;s been seen.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch that does this.  I use an IdentityHashMap for hashCode, and no memory is allocated once this table is initialized.  For equals we track the pair of values being compared, so must use a set and allocate a short-lived object per call.&lt;/p&gt;

&lt;p&gt;Does this look reasonable?&lt;/p&gt;</comment>
                            <comment id="12698988" author="hong.tang" created="Tue, 14 Apr 2009 23:56:26 +0000"  >&lt;p&gt;Looks good. There may be some room of improvement by eliminating the thread local variables (e.g. by having an internal interface Schema.equalsInternal(Schema other, Set&amp;lt;SeenPair&amp;gt; seen) and implement it for all composite schemas (Map, Record, Array)). But I doubt that full schema comparison will be a frequent operation, so the added code complexity is hardly worth it.&lt;/p&gt;

&lt;p&gt;Also, just for fun, theoretically, the worst case time complexity could be O(n^4), and space complexity O(n^2) - but in normal situations, they should run in O( n ) time and space complexity.&lt;/p&gt;</comment>
                            <comment id="12699167" author="sharadag" created="Wed, 15 Apr 2009 12:20:13 +0000"  >&lt;p&gt;I would prefer the pattern suggested by Hong. It is less complex than thread local. In python, I use the similar pattern. see &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12405520/AVRO-15_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12405520/AVRO-15_v1.patch&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12701232" author="cutting" created="Tue, 21 Apr 2009 18:45:04 +0000"  >&lt;p&gt;I would not oppose a patch that keeps the seen table on the stack rather than in a ThreadLocal.  On one hand, it&apos;s a little cleaner, but on the other, it takes more code, since we effectively need to replicate List#equals, List#hashCode, Map#equals and Map#hashCode, which the ThreadLocal approach avoids, albeit in an ugly way.&lt;/p&gt;</comment>
                            <comment id="12701237" author="hong.tang" created="Tue, 21 Apr 2009 19:13:28 +0000"  >&lt;p&gt;I agree with Doug and think the patch looks fine as-is.&lt;/p&gt;</comment>
                            <comment id="12712247" author="cutting" created="Fri, 22 May 2009 20:45:12 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405452" name="AVRO-12.patch" size="3199" author="cutting" created="Tue, 14 Apr 2009 19:55:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Apr 2009 05:17:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94341</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-13] Use dictionary instead of if-else in validate</title>
                <link>https://issues.apache.org/jira/browse/AVRO-13</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Currently validate in generic.py and reflect.py uses if-else. It would be efficient to use dictionary with keys as schema types.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422759">AVRO-13</key>
            <summary>Use dictionary instead of if-else in validate</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sharadag">Sharad Agarwal</assignee>
                                    <reporter username="sharadag">Sharad Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Apr 2009 07:28:09 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Wed, 15 Apr 2009 05:19:24 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698685" author="sharadag" created="Tue, 14 Apr 2009 07:31:54 +0000"  >&lt;p&gt;straightforward patch.&lt;/p&gt;</comment>
                            <comment id="12698860" author="cutting" created="Tue, 14 Apr 2009 18:06:09 +0000"  >&lt;p&gt;This looks fine to me.&lt;/p&gt;</comment>
                            <comment id="12699059" author="sharadag" created="Wed, 15 Apr 2009 05:19:24 +0000"  >&lt;p&gt;I just committed this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405397" name="AVRO-13_v1.patch" size="8547" author="sharadag" created="Tue, 14 Apr 2009 07:31:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Apr 2009 18:06:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79388</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-14] RPC throws EOFException if 0 size ByteBuffer is sent</title>
                <link>https://issues.apache.org/jira/browse/AVRO-14</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;ByteBufferInputStream#readBuffer(int length) throws EOFException if length param is 0&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422778">AVRO-14</key>
            <summary>RPC throws EOFException if 0 size ByteBuffer is sent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sharadag">Sharad Agarwal</assignee>
                                    <reporter username="sharadag">Sharad Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Apr 2009 11:41:21 +0000</created>
                <updated>Tue, 14 Jul 2009 22:50:08 +0000</updated>
                            <resolved>Tue, 14 Apr 2009 22:15:43 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12698742" author="sharadag" created="Tue, 14 Apr 2009 11:44:20 +0000"  >&lt;p&gt;straightforward patch. Does the 0 length check.&lt;/p&gt;</comment>
                            <comment id="12698866" author="cutting" created="Tue, 14 Apr 2009 18:19:42 +0000"  >&lt;p&gt;Here&apos;s an updated patch that also similarly fixes read(byte[],int,int).&lt;/p&gt;</comment>
                            <comment id="12698965" author="cutting" created="Tue, 14 Apr 2009 22:15:43 +0000"  >&lt;p&gt;I just committed this.  Thanks, Sharad!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405444" name="AVRO-14.patch" size="1688" author="cutting" created="Tue, 14 Apr 2009 18:19:42 +0000"/>
                            <attachment id="12405408" name="AVRO-14_v1.patch" size="1346" author="sharadag" created="Tue, 14 Apr 2009 11:44:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Apr 2009 18:19:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dxp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
