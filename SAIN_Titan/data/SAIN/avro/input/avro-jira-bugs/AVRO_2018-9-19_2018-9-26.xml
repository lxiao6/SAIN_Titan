<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:27:15 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2018-9-19+AND+created+%3C%3D+2018-9-26+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="3" total="3"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-2227] CLONE - Python snappy error: &quot;integer out of range for &apos;I&apos; format code&quot;</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2227</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The Python library for avro fails to write some blocks when used with snappy compression.&lt;/p&gt;

&lt;p&gt;The error is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;tools/json_to_avro.py&quot;&lt;/span&gt;, line 74, in &amp;lt;module&amp;gt;
    writer.append(line)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/michaelc/.python/2.7/avro-1.5.4-py2.7.egg/avro/datafile.py&quot;&lt;/span&gt;, line 185, in append
    self._write_block()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/michaelc/.python/2.7/avro-1.5.4-py2.7.egg/avro/datafile.py&quot;&lt;/span&gt;, line 169, in _write_block
    self.encoder.write_crc32(uncompressed_data)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/michaelc/.python/2.7/avro-1.5.4-py2.7.egg/avro/io.py&quot;&lt;/span&gt;, line 364, in write_crc32
    self.write(STRUCT_CRC32.pack(crc32(bytes)));
struct.error: integer out of range &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt; format code
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From my investigation, str(crc32(bytes)) is showing negative integers, so the issue seems to be fixed by masking the output.&lt;/p&gt;

&lt;p&gt;This fix appears to work from my limited testing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--- io.old.py	2011-09-21 14:32:38.992544680 +1000
+++ io.py	2011-09-21 14:33:11.492544686 +1000
@@ -360,7 +360,7 @@
     &quot;&quot;&quot;
     A 4-&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;, big-endian CRC32 checksum
     &quot;&quot;&quot;
-    self.write(STRUCT_CRC32.pack(crc32(bytes)));
+    self.write(STRUCT_CRC32.pack(crc32(bytes) &amp;amp; 0xffffffff));
 
 #
 # DatumReader/Writer
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Linux michaelc 2.6.38-11-generic #48-Ubuntu SMP Fri Jul 29 19:02:55 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux&lt;br/&gt;
Ubuntu 11.04&lt;br/&gt;
Python 2.7.1+ (ubuntu stock version)&lt;/p&gt;

&lt;p&gt;avro-1.5.4-py2.7.egg&lt;br/&gt;
snappy-1.0.4 (c library)&lt;br/&gt;
python-snappy-0.3.2&lt;/p&gt;</environment>
        <key id="13186017">AVRO-2227</key>
            <summary>CLONE - Python snappy error: &quot;integer out of range for &apos;I&apos; format code&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="mic159">Michael Cooper</assignee>
                                    <reporter username="Jennyb1985">Jennifer b</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Sep 2018 10:06:47 +0000</created>
                <updated>Wed, 19 Sep 2018 10:06:47 +0000</updated>
                                            <version>1.5.4</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12523815">AVRO-892</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y8yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>python, snappy</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-2228] Bump Apache Velocity to 2.0</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2228</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Apache Velocity 1.7 contains CVE&apos;s: CVE-2015-6420, CVE-2017-15708&lt;/p&gt;</description>
                <environment></environment>
        <key id="13187082">AVRO-2228</key>
            <summary>Bump Apache Velocity to 2.0</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Fokko">Fokko Driesprong</assignee>
                                    <reporter username="Fokko">Fokko Driesprong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Sep 2018 16:41:27 +0000</created>
                <updated>Wed, 5 Dec 2018 16:19:39 +0000</updated>
                            <resolved>Mon, 12 Nov 2018 19:33:54 +0000</resolved>
                                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16626130" author="githubbot" created="Mon, 24 Sep 2018 17:09:51 +0000"  >&lt;p&gt;Fokko opened a new pull request #332: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2228&quot; title=&quot;Bump Apache Velocity to 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2228&quot;&gt;&lt;del&gt;AVRO-2228&lt;/del&gt;&lt;/a&gt; Bump Apache Velocity to 2.0&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/332&lt;/a&gt;&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Remove `Slf4jLogChute` since 2.0 uses SLF4J itself: &lt;a href=&quot;https://github.com/apache/velocity-engine#upgrading-from-velocity-17x-to-velocity-20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/velocity-engine#upgrading-from-velocity-17x-to-velocity-20&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Update $velocityHasNext to $foreach.hasNext because of deprecation, Update $velocityCount to $foreach.count because of deprecation: &lt;a href=&quot;https://github.com/apache/velocity-engine#upgrading-from-velocity-16x-to-velocity-17x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/velocity-engine#upgrading-from-velocity-16x-to-velocity-17x&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Velocity 2.0 does not depend on apache-common collections anymore which used to be an old version with known security issues:  CVE-2015-6420, CVE-2017-15708&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16626140" author="fokko" created="Mon, 24 Sep 2018 17:15:26 +0000"  >&lt;p&gt;PR has been made: &lt;a href=&quot;https://github.com/apache/avro/pull/332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/332&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16667644" author="githubbot" created="Mon, 29 Oct 2018 19:34:49 +0000"  >&lt;p&gt;nandorKollar commented on a change in pull request #332: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2228&quot; title=&quot;Bump Apache Velocity to 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2228&quot;&gt;&lt;del&gt;AVRO-2228&lt;/del&gt;&lt;/a&gt; Bump Apache Velocity to 2.0&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/332#discussion_r229068783&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/332#discussion_r229068783&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -929,75 +919,6 @@ public static void main(String[] args) throws Exception &lt;/p&gt;
{
     compileProtocol(new File(args[0]), new File(args[1]));
   }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final class Slf4jLogChute implements LogChute {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Removing this class would break the API. Despite it is unlikely that any Avro client used this class (and very unfortunate that it is public, it seems that it isn&apos;t used anywhere else apart from this class), would it be possible to keep this, and mark as deprecated?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16679939" author="githubbot" created="Thu, 8 Nov 2018 16:01:56 +0000"  >&lt;p&gt;dkulp closed pull request #332: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2228&quot; title=&quot;Bump Apache Velocity to 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2228&quot;&gt;&lt;del&gt;AVRO-2228&lt;/del&gt;&lt;/a&gt; Bump Apache Velocity to 2.0&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/332&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lang/java/compiler/pom.xml b/lang/java/compiler/pom.xml&lt;br/&gt;
index d236df0da..7bee6e3c9 100644&lt;br/&gt;
&amp;#8212; a/lang/java/compiler/pom.xml&lt;br/&gt;
+++ b/lang/java/compiler/pom.xml&lt;br/&gt;
@@ -163,7 +163,7 @@&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;br/&gt;
     &amp;lt;dependency&amp;gt;&lt;br/&gt;
       &amp;lt;groupId&amp;gt;org.apache.velocity&amp;lt;/groupId&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;artifactId&amp;gt;velocity&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;velocity-engine-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;br/&gt;
     &amp;lt;dependency&amp;gt;&lt;br/&gt;
       &amp;lt;groupId&amp;gt;com.fasterxml.jackson.core&amp;lt;/groupId&amp;gt;&lt;br/&gt;
diff --git a/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java b/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java&lt;br/&gt;
index aa7c5c3f2..5ee2bdc26 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java&lt;br/&gt;
+++ b/lang/java/compiler/src/main/java/org/apache/avro/compiler/specific/SpecificCompiler.java&lt;br/&gt;
@@ -52,8 +52,6 @@&lt;br/&gt;
 import org.apache.velocity.Template;&lt;br/&gt;
 import org.apache.velocity.VelocityContext;&lt;br/&gt;
 import org.apache.velocity.app.VelocityEngine;&lt;br/&gt;
-import org.apache.velocity.runtime.RuntimeServices;&lt;br/&gt;
-import org.apache.velocity.runtime.log.LogChute;&lt;br/&gt;
 import org.slf4j.Logger;&lt;br/&gt;
 import org.slf4j.LoggerFactory;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -271,8 +269,6 @@ public DateTimeLogicalTypeImplementation getDateTimeLogicalTypeImplementation()&lt;br/&gt;
     return dateTimeLogicalTypeImplementation;&lt;br/&gt;
   }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static String logChuteName = null;&lt;br/&gt;
-&lt;br/&gt;
   private void initializeVelocity() {&lt;br/&gt;
     this.velocityEngine = new VelocityEngine();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -286,17 +282,9 @@ private void initializeVelocity() {&lt;br/&gt;
     velocityEngine.addProperty(&quot;file.resource.loader.path&quot;, &quot;/, .&quot;);&lt;br/&gt;
     velocityEngine.setProperty(&quot;runtime.references.strict&quot;, true);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// try to use Slf4jLogChute, but if we can&apos;t use the null one.&lt;/li&gt;
	&lt;li&gt;if (null == logChuteName) {&lt;/li&gt;
	&lt;li&gt;// multiple threads can get here concurrently, but that&apos;s ok.&lt;/li&gt;
	&lt;li&gt;try 
{
-        new Slf4jLogChute();
-        logChuteName = Slf4jLogChute.class.getName();
-      }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
-        logChuteName = &quot;org.apache.velocity.runtime.log.NullLogChute&quot;;
-      }&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;velocityEngine.setProperty(&quot;runtime.log.logsystem.class&quot;, logChuteName);&lt;br/&gt;
+    // Set whitespace gobbling to Backward Compatible (BC)&lt;br/&gt;
+    // &lt;a href=&quot;http://velocity.apache.org/engine/2.0/developer-guide.html#space-gobbling&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://velocity.apache.org/engine/2.0/developer-guide.html#space-gobbling&lt;/a&gt;&lt;br/&gt;
+    velocityEngine.setProperty(&quot;space.gobbling&quot;, &quot;bc&quot;);&lt;br/&gt;
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   private void initializeSpecificData() {&lt;br/&gt;
@@ -490,13 +478,15 @@ protected void validateRecordForCompilation(Schema record) {&lt;br/&gt;
     this.createAllArgsConstructor =&lt;br/&gt;
         calcAllArgConstructorParameterUnits(record) &amp;lt;= MAX_FIELD_PARAMETER_UNIT_COUNT;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (!this.createAllArgsConstructor)&lt;/li&gt;
	&lt;li&gt;new Slf4jLogChute().log(LogChute.WARN_ID, &quot;Record &apos;&quot; + record.getFullName() +&lt;/li&gt;
	&lt;li&gt;&quot;&apos; contains more than &quot; + MAX_FIELD_PARAMETER_UNIT_COUNT +&lt;/li&gt;
	&lt;li&gt;&quot; parameters which exceeds the JVM &quot; +&lt;/li&gt;
	&lt;li&gt;&quot;spec for the number of permitted constructor arguments. Clients must &quot; +&lt;/li&gt;
	&lt;li&gt;&quot;rely on the builder pattern to create objects instead. For more info &quot; +&lt;/li&gt;
	&lt;li&gt;&quot;see JIRA ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1642&quot; title=&quot;JVM Spec Violation 255 Parameter Limit Exceeded &quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1642&quot;&gt;&lt;del&gt;AVRO-1642&lt;/del&gt;&lt;/a&gt;.&quot;);&lt;br/&gt;
+    if (!this.createAllArgsConstructor) 
{
+      Logger logger = LoggerFactory.getLogger(SpecificCompiler.class);
+      logger.warn(&quot;Record &apos;&quot; + record.getFullName() +
+        &quot;&apos; contains more than &quot; + MAX_FIELD_PARAMETER_UNIT_COUNT +
+        &quot; parameters which exceeds the JVM &quot; +
+        &quot;spec for the number of permitted constructor arguments. Clients must &quot; +
+        &quot;rely on the builder pattern to create objects instead. For more info &quot; +
+        &quot;see JIRA ticket AVRO-1642.&quot;);
+    }
&lt;p&gt;   }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   OutputFile compile(Schema schema) {&lt;br/&gt;
@@ -1055,75 +1045,6 @@ public static void main(String[] args) throws Exception &lt;/p&gt;
{
     compileProtocol(new File(args[0]), new File(args[1]));
   }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final class Slf4jLogChute implements LogChute {&lt;/li&gt;
	&lt;li&gt;private Logger logger = LoggerFactory.getLogger(&quot;AvroVelocityLogChute&quot;);&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public void init(RuntimeServices rs) throws Exception 
{
-      // nothing to do
-    }
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public void log(int level, String message) {&lt;/li&gt;
	&lt;li&gt;switch (level) 
{
-      case LogChute.DEBUG_ID:
-        logger.debug(message);
-        break;
-      case LogChute.TRACE_ID:
-        logger.trace(message);
-        break;
-      case LogChute.WARN_ID:
-        logger.warn(message);
-        break;
-      case LogChute.ERROR_ID:
-        logger.error(message);
-        break;
-      default:
-      case LogChute.INFO_ID:
-        logger.info(message);
-        break;
-      }&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public void log(int level, String message, Throwable t) {&lt;/li&gt;
	&lt;li&gt;switch (level) 
{
-      case LogChute.DEBUG_ID:
-        logger.debug(message, t);
-        break;
-      case LogChute.TRACE_ID:
-        logger.trace(message, t);
-        break;
-      case LogChute.WARN_ID:
-        logger.warn(message, t);
-        break;
-      case LogChute.ERROR_ID:
-        logger.error(message, t);
-        break;
-      default:
-      case LogChute.INFO_ID:
-        logger.info(message, t);
-        break;
-      }&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public boolean isLevelEnabled(int level) {&lt;/li&gt;
	&lt;li&gt;switch (level) 
{
-      case LogChute.DEBUG_ID:
-        return logger.isDebugEnabled();
-      case LogChute.TRACE_ID:
-        return logger.isTraceEnabled();
-      case LogChute.WARN_ID:
-        return logger.isWarnEnabled();
-      case LogChute.ERROR_ID:
-        return logger.isErrorEnabled();
-      default:
-      case LogChute.INFO_ID:
-        return logger.isInfoEnabled();
-      }&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
-&lt;br/&gt;
   /** Sets character encoding for generated java file&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@param outputCharacterEncoding Character encoding for output files (defaults to system encoding)&lt;br/&gt;
   */&lt;br/&gt;
@@ -1131,4 +1052,3 @@ public void setOutputCharacterEncoding(String outputCharacterEncoding) 
{
     this.outputCharacterEncoding = outputCharacterEncoding;
   }
&lt;p&gt; }&lt;br/&gt;
-&lt;br/&gt;
diff --git a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/enum.vm b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/enum.vm&lt;br/&gt;
index 92d0c05c6..07e6746ed 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/enum.vm&lt;br/&gt;
+++ b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/enum.vm&lt;br/&gt;
@@ -26,7 +26,7 @@ package $schema.getNamespace();&lt;br/&gt;
 #end&lt;br/&gt;
 @org.apache.avro.specific.AvroGenerated&lt;br/&gt;
 public enum ${this.mangle($schema.getName())} {&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;#foreach ($symbol in ${schema.getEnumSymbols()})${this.mangle($symbol)}#if ($velocityHasNext), #end#end&lt;br/&gt;
+  #foreach ($symbol in ${schema.getEnumSymbols()})${this.mangle($symbol)}#if ($foreach.hasNext), #end#end&lt;br/&gt;
   ;&lt;br/&gt;
   public static final org.apache.avro.Schema SCHEMA$ = new org.apache.avro.Schema.Parser().parse(&quot;${this.javaEscape($schema.toString())}&quot;);&lt;br/&gt;
   public static org.apache.avro.Schema getClassSchema() 
{ return SCHEMA$; }
&lt;p&gt;diff --git a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/protocol.vm b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/protocol.vm&lt;br/&gt;
index 068bd7514..ca5492de9 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/protocol.vm&lt;br/&gt;
+++ b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/protocol.vm&lt;br/&gt;
@@ -47,7 +47,7 @@ public interface $this.mangle($protocol.getName()) {&lt;br/&gt;
   #if ($message.isOneWay())void#else${this.javaUnbox($response)}#end&lt;br/&gt;
  ${this.mangle($name)}(##&lt;br/&gt;
 #foreach ($p in $message.getRequest().getFields())##&lt;/li&gt;
		&lt;/ul&gt;
		&lt;ul&gt;
			&lt;li&gt;*#${this.javaUnbox($p.schema())} ${this.mangle($p.name())}#if ($velocityHasNext), #end&lt;br/&gt;
+#*      *#${this.javaUnbox($p.schema())} ${this.mangle($p.name())}#if ($foreach.hasNext), #end&lt;br/&gt;
 #end&lt;br/&gt;
 )#if (! $message.isOneWay())&lt;br/&gt;
  throws org.apache.avro.AvroRemoteException##&lt;br/&gt;
@@ -84,7 +84,7 @@ public interface $this.mangle($protocol.getName()) {&lt;br/&gt;
      */&lt;br/&gt;
     void ${this.mangle($name)}(##&lt;br/&gt;
 #foreach ($p in $message.getRequest().getFields())##&lt;/li&gt;
			&lt;li&gt;*#${this.javaUnbox($p.schema())} ${this.mangle($p.name())}#if ($velocityHasNext), #end&lt;br/&gt;
+#*      *#${this.javaUnbox($p.schema())} ${this.mangle($p.name())}#if ($foreach.hasNext), #end&lt;br/&gt;
 #end&lt;br/&gt;
 #if ($message.getRequest().getFields().size() &amp;gt; 0), #end&lt;br/&gt;
 org.apache.avro.ipc.Callback&amp;lt;${this.javaType($response)}&amp;gt; callback) throws java.io.IOException;&lt;br/&gt;
diff --git a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm&lt;br/&gt;
index 5a59a6ee9..bc0c1d421 100644&lt;/li&gt;
		&lt;/ul&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm&lt;br/&gt;
+++ b/lang/java/compiler/src/main/velocity/org/apache/avro/compiler/specific/templates/java/classic/record.vm&lt;br/&gt;
@@ -133,7 +133,7 @@ public class ${this.mangle($schema.getName())}#if ($schema.isError()) extends or&lt;br/&gt;
 #end&lt;br/&gt;
 #end&lt;br/&gt;
    */&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;public ${this.mangle($schema.getName())}(#foreach($field in $schema.getFields())${this.javaType($field.schema())} ${this.mangle($field.name())}#if($velocityCount &amp;lt; $schema.getFields().size()), #end#end) {&lt;br/&gt;
+  public ${this.mangle($schema.getName())}(#foreach($field in $schema.getFields())${this.javaType($field.schema())} ${this.mangle($field.name())}#if($foreach.count &amp;lt; $schema.getFields().size()), #end#end) {&lt;br/&gt;
 #foreach ($field in $schema.getFields())&lt;br/&gt;
     this.${this.mangle($field.name())} = ${this.mangle($field.name())};&lt;br/&gt;
 #end&lt;br/&gt;
diff --git a/lang/java/ipc/pom.xml b/lang/java/ipc/pom.xml&lt;br/&gt;
index 4358cbaa7..d0767a8cd 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/ipc/pom.xml&lt;br/&gt;
+++ b/lang/java/ipc/pom.xml&lt;br/&gt;
@@ -136,10 +136,9 @@&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;br/&gt;
     &amp;lt;dependency&amp;gt;&lt;br/&gt;
       &amp;lt;groupId&amp;gt;org.apache.velocity&amp;lt;/groupId&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&amp;lt;artifactId&amp;gt;velocity&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;velocity-engine-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;/dependencies&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;/project&amp;gt;&lt;br/&gt;
-&lt;br/&gt;
diff --git a/lang/java/pom.xml b/lang/java/pom.xml&lt;br/&gt;
index eae6899de..3b5f67f6d 100644&lt;br/&gt;
&amp;#8212; a/lang/java/pom.xml&lt;br/&gt;
+++ b/lang/java/pom.xml&lt;br/&gt;
@@ -49,7 +49,7 @@&lt;br/&gt;
     &amp;lt;thrift.version&amp;gt;0.9.3&amp;lt;/thrift.version&amp;gt;&lt;br/&gt;
     &amp;lt;slf4j.version&amp;gt;1.7.25&amp;lt;/slf4j.version&amp;gt;&lt;br/&gt;
     &amp;lt;snappy.version&amp;gt;1.1.7.2&amp;lt;/snappy.version&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;velocity.version&amp;gt;1.7&amp;lt;/velocity.version&amp;gt;&lt;br/&gt;
+    &amp;lt;velocity.version&amp;gt;2.0&amp;lt;/velocity.version&amp;gt;&lt;br/&gt;
     &amp;lt;maven.version&amp;gt;2.0.11&amp;lt;/maven.version&amp;gt;&lt;br/&gt;
     &amp;lt;ant.version&amp;gt;1.10.0&amp;lt;/ant.version&amp;gt;&lt;br/&gt;
     &amp;lt;commons-cli.version&amp;gt;1.3.1&amp;lt;/commons-cli.version&amp;gt;&lt;br/&gt;
@@ -423,7 +423,7 @@&lt;br/&gt;
       &amp;lt;/dependency&amp;gt;&lt;br/&gt;
       &amp;lt;dependency&amp;gt;&lt;br/&gt;
         &amp;lt;groupId&amp;gt;org.apache.velocity&amp;lt;/groupId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;artifactId&amp;gt;velocity&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;velocity-engine-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
         &amp;lt;version&amp;gt;${velocity.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
       &amp;lt;/dependency&amp;gt;&lt;br/&gt;
       &amp;lt;dependency&amp;gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16679940" author="jira-bot" created="Thu, 8 Nov 2018 16:02:00 +0000"  >&lt;p&gt;Commit c4386ad21f16b4fdd761eeb5ac4332f6221aac3f in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fokko&quot; class=&quot;user-hover&quot; rel=&quot;Fokko&quot;&gt;Fokko Driesprong&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=c4386ad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=c4386ad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2228&quot; title=&quot;Bump Apache Velocity to 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2228&quot;&gt;&lt;del&gt;AVRO-2228&lt;/del&gt;&lt;/a&gt; Bump Apache Velocity to 2.0&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Remove Slf4jLogChute since 2.0 uses SLF4J itself&lt;/li&gt;
	&lt;li&gt;Update $velocityHasNext to $foreach.hasNext because of deprecation&lt;/li&gt;
	&lt;li&gt;Update $velocityCount to $foreach.count because of deprecation&lt;/li&gt;
	&lt;li&gt;2.0 does not depend on apache-common collections anymore which&lt;br/&gt;
  used to be an old version with security issues&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13167594">AVRO-2193</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Sep 2018 17:09:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yfin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-2229] Ability to test using a Docker image</title>
                <link>https://issues.apache.org/jira/browse/AVRO-2229</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="13187198">AVRO-2229</key>
            <summary>Ability to test using a Docker image</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Fokko">Fokko Driesprong</assignee>
                                    <reporter username="Fokko">Fokko Driesprong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Sep 2018 07:01:01 +0000</created>
                <updated>Tue, 13 Nov 2018 13:16:05 +0000</updated>
                            <resolved>Fri, 5 Oct 2018 15:52:54 +0000</resolved>
                                    <version>1.8.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="16627680" author="cutting" created="Tue, 25 Sep 2018 17:27:10 +0000"  >&lt;p&gt;Note that the code for this already exists in share/docker/Dockerfile, driven&#160;from the top-level build.sh script using&#160;its &apos;docker&apos; command.&#160; However the list of dependencies in&#160;the Dockerfile may be out date, and some of the builds may be broken.&lt;/p&gt;

&lt;p&gt;Related, we should probably&#160;alter the top-level BUILD to, instead of listing dependencies, refer to the dependencies in the Dockerfile, so that we maintain these in a single place.&lt;/p&gt;</comment>
                            <comment id="16632068" author="githubbot" created="Fri, 28 Sep 2018 16:04:42 +0000"  >&lt;p&gt;Fokko opened a new pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   First version of the Docker image with all the dependencies and the ability to run the full test suite using Docker. I would like to add a Travis CI after this PR: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2233&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-2233&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   The distribution part is still pending, but before fixing this, I&apos;d like to:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fix the C++ testsuite and enable it back in the testsuite, fixed in #335 :&lt;br/&gt;
   ```&lt;br/&gt;
   Run C++ tests
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Boost version: 1.55.0&lt;/li&gt;
		&lt;li&gt;Found the following Boost libraries:&lt;/li&gt;
		&lt;li&gt;filesystem&lt;/li&gt;
		&lt;li&gt;system&lt;/li&gt;
		&lt;li&gt;program_options&lt;/li&gt;
		&lt;li&gt;iostreams&lt;br/&gt;
   Enabled snappy codec&lt;/li&gt;
		&lt;li&gt;Configuring done&lt;/li&gt;
		&lt;li&gt;Generating done&lt;/li&gt;
		&lt;li&gt;Build files have been written to: /avro/lang/c++/build&lt;/li&gt;
		&lt;li&gt;Boost version: 1.55.0&lt;/li&gt;
		&lt;li&gt;Found the following Boost libraries:&lt;/li&gt;
		&lt;li&gt;filesystem&lt;/li&gt;
		&lt;li&gt;system&lt;/li&gt;
		&lt;li&gt;program_options&lt;/li&gt;
		&lt;li&gt;iostreams&lt;br/&gt;
   Enabled snappy codec&lt;/li&gt;
		&lt;li&gt;Configuring done&lt;/li&gt;
		&lt;li&gt;Generating done&lt;/li&gt;
		&lt;li&gt;Build files have been written to: /avro/lang/c++/build&lt;br/&gt;
   [  1%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/Compiler.cc.o&lt;br/&gt;
   /avro/lang/c++/impl/Compiler.cc:174:15: warning: &#8216;std::string avro::nameof(const NodePtr&amp;amp;)&#8217; defined but not used &lt;span class=&quot;error&quot;&gt;&amp;#91;-Wunused-function&amp;#93;&lt;/span&gt;&lt;br/&gt;
    static string nameof(const NodePtr&amp;amp; n)&lt;br/&gt;
                  ^&lt;br/&gt;
   [  2%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/Node.cc.o&lt;br/&gt;
   [  4%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/NodeImpl.cc.o&lt;br/&gt;
   [  5%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/ResolverSchema.cc.o&lt;br/&gt;
   [  6%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/Schema.cc.o&lt;br/&gt;
   [  8%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/Types.cc.o&lt;br/&gt;
   [  9%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/ValidSchema.cc.o&lt;br/&gt;
   [ 10%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/Zigzag.cc.o&lt;br/&gt;
   [ 12%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/BinaryEncoder.cc.o&lt;br/&gt;
   [ 13%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/BinaryDecoder.cc.o&lt;br/&gt;
   [ 14%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/Stream.cc.o&lt;br/&gt;
   [ 16%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/FileStream.cc.o&lt;br/&gt;
   [ 17%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/Generic.cc.o&lt;br/&gt;
   [ 18%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/GenericDatum.cc.o&lt;br/&gt;
   [ 20%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/DataFile.cc.o&lt;br/&gt;
   In file included from /avro/lang/c++/api/Specific.hh:30:0,&lt;br/&gt;
                    from /avro/lang/c++/api/DataFile.hh:26,&lt;br/&gt;
                    from /avro/lang/c++/impl/DataFile.cc:19:&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh: In static member function &#8216;static char (&amp;amp; avro::is_defined&amp;lt;T&amp;gt;::test(char &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;sizeof (U)&amp;#93;&lt;/span&gt;))&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#8217;:&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh:61:63: warning: no return statement in function returning non-void &lt;span class=&quot;error&quot;&gt;&amp;#91;-Wreturn-type&amp;#93;&lt;/span&gt;&lt;br/&gt;
        template &amp;lt;class U&amp;gt; static yes&amp;amp; test(char&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;sizeof(U)&amp;#93;&lt;/span&gt;) { };&lt;br/&gt;
                                                                  ^&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh: In static member function &#8216;static char (&amp;amp; avro::is_defined&amp;lt;T&amp;gt;::test(...))&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&#8217;:&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh:63:47: warning: no return statement in function returning non-void &lt;span class=&quot;error&quot;&gt;&amp;#91;-Wreturn-type&amp;#93;&lt;/span&gt;&lt;br/&gt;
        template &amp;lt;class U&amp;gt; static no&amp;amp; test(...) { };&lt;br/&gt;
                                                  ^&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh: In static member function &#8216;static char (&amp;amp; avro::is_not_defined&amp;lt;T&amp;gt;::test(char &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;sizeof (U)&amp;#93;&lt;/span&gt;))&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#8217;:&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh:81:63: warning: no return statement in function returning non-void &lt;span class=&quot;error&quot;&gt;&amp;#91;-Wreturn-type&amp;#93;&lt;/span&gt;&lt;br/&gt;
        template &amp;lt;class U&amp;gt; static yes&amp;amp; test(char&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;sizeof(U)&amp;#93;&lt;/span&gt;) { };&lt;br/&gt;
                                                                  ^&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh: In static member function &#8216;static char (&amp;amp; avro::is_not_defined&amp;lt;T&amp;gt;::test(...))&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&#8217;:&lt;br/&gt;
   /avro/lang/c++/api/AvroTraits.hh:83:47: warning: no return statement in function returning non-void &lt;span class=&quot;error&quot;&gt;&amp;#91;-Wreturn-type&amp;#93;&lt;/span&gt;&lt;br/&gt;
        template &amp;lt;class U&amp;gt; static no&amp;amp; test(...) { };&lt;br/&gt;
                                                  ^&lt;br/&gt;
   [ 21%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/parsing/Symbol.cc.o&lt;br/&gt;
   [ 22%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/parsing/ValidatingCodec.cc.o&lt;br/&gt;
   [ 24%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/parsing/JsonCodec.cc.o&lt;br/&gt;
   [ 25%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/parsing/ResolvingDecoder.cc.o&lt;br/&gt;
   [ 27%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/json/JsonIO.cc.o&lt;br/&gt;
   [ 28%] Building CXX object CMakeFiles/avrocpp_s.dir/impl/json/JsonDom.cc.o&lt;br/&gt;
   In file included from /avro/lang/c++/impl/json/JsonDom.cc:19:0:&lt;br/&gt;
   /avro/lang/c++/impl/json/JsonDom.hh: In instantiation of &#8216;void std::_&lt;em&gt;cxx1998::vector&amp;lt;_Tp, _Alloc&amp;gt;::_M_insert_aux(std::&lt;/em&gt;_cxx1998::vector&amp;lt;_Tp, _Alloc&amp;gt;::iterator, const _Tp&amp;amp;) &lt;span class=&quot;error&quot;&gt;&amp;#91;with _Tp = avro::json::Entity; _Alloc = std::allocator&amp;lt;avro::json::Entity&amp;gt;; std::__cxx1998::vector&amp;lt;_Tp, _Alloc&amp;gt;::iterator = __gnu_cxx::__normal_iterator&amp;lt;avro::json::Entity*, std::__cxx1998::vector&amp;lt;avro::json::Entity, std::allocator&amp;lt;avro::json::Entity&amp;gt; &amp;gt; &amp;gt;; typename std::__cxx1998::_Vector_base&amp;lt;_Tp, _Alloc&amp;gt;::pointer = avro::json::Entity*&amp;#93;&lt;/span&gt;&#8217;:&lt;br/&gt;
   /usr/include/c++/4.9/bits/stl_vector.h:925:28:   required from &#8216;void std::__cxx1998::vector&amp;lt;_Tp, _Alloc&amp;gt;::push_back(const value_type&amp;amp;) &lt;span class=&quot;error&quot;&gt;&amp;#91;with _Tp = avro::json::Entity; _Alloc = std::allocator&amp;lt;avro::json::Entity&amp;gt;; std::__cxx1998::vector&amp;lt;_Tp, _Alloc&amp;gt;::value_type = avro::json::Entity&amp;#93;&lt;/span&gt;&#8217;&lt;br/&gt;
   /usr/include/c++/4.9/debug/vector:407:22:   required from &#8216;void std::__debug::vector&amp;lt;_Tp, _Allocator&amp;gt;::push_back(const _Tp&amp;amp;) &lt;span class=&quot;error&quot;&gt;&amp;#91;with _Tp = avro::json::Entity; _Allocator = std::allocator&amp;lt;avro::json::Entity&amp;gt;&amp;#93;&lt;/span&gt;&#8217;&lt;br/&gt;
   /avro/lang/c++/impl/json/JsonDom.cc:72:43:   required from here&lt;br/&gt;
   /avro/lang/c++/impl/json/JsonDom.hh:64:17: error: non-static const member &#8216;const size_t avro::json::Entity::line_&#8217;, can&#8217;t use default assignment operator&lt;br/&gt;
    class AVRO_DECL Entity {&lt;br/&gt;
                    ^&lt;br/&gt;
   In file included from /usr/include/c++/4.9/vector:69:0,&lt;br/&gt;
                    from /avro/lang/c++/impl/json/JsonDom.hh:26,&lt;br/&gt;
                    from /avro/lang/c++/impl/json/JsonDom.cc:19:&lt;br/&gt;
   /usr/include/c++/4.9/bits/vector.tcc:343:16: note: synthesized method &#8216;avro::json::Entity&amp;amp; avro::json::Entity::operator=(const avro::json::Entity&amp;amp;)&#8217; first required here &lt;br/&gt;
       *__position = __x_copy;&lt;br/&gt;
                   ^&lt;br/&gt;
   make&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;CMakeFiles/avrocpp_s.dir/impl/json/JsonDom.cc.o&amp;#93;&lt;/span&gt; Error 1&lt;br/&gt;
   CMakeFiles/avrocpp_s.dir/build.make:514: recipe for target &apos;CMakeFiles/avrocpp_s.dir/impl/json/JsonDom.cc.o&apos; failed&lt;br/&gt;
   make&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;CMakeFiles/avrocpp_s.dir/all&amp;#93;&lt;/span&gt; Error 2&lt;br/&gt;
   CMakeFiles/Makefile2:425: recipe for target &apos;CMakeFiles/avrocpp_s.dir/all&apos; failed&lt;br/&gt;
   Makefile:147: recipe for target &apos;all&apos; failed&lt;br/&gt;
   make: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;all&amp;#93;&lt;/span&gt; Error 2&lt;br/&gt;
   ``` &lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Also I&apos;d like to bump Node from 4.x to 8.x since 4.x has been deprecated, this ties in with #333:&lt;br/&gt;
   ```&lt;br/&gt;
   ================================================================================&lt;br/&gt;
   ================================================================================&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;                                 DEPRECATION WARNING                            &lt;/p&gt;

&lt;p&gt;     Node.js 4.x LTS Argon is no longer actively supported!&lt;/p&gt;

&lt;p&gt;     You will not receive security or critical stability updates for this version.&lt;/p&gt;

&lt;p&gt;     You should migrate to a supported version of Node.js as soon as possible.&lt;br/&gt;
     Use the installation script that corresponds to the version of Node.js you&lt;br/&gt;
     wish to install. e.g.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://deb.nodesource.com/setup_8.x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://deb.nodesource.com/setup_8.x&lt;/a&gt; &#8212; Node.js 8 LTS &quot;Carbon&quot; (recommended)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://deb.nodesource.com/setup_10.x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://deb.nodesource.com/setup_10.x&lt;/a&gt; &#8212; Node.js 10 Current&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     Please see &lt;a href=&quot;https://github.com/nodejs/Release&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nodejs/Release&lt;/a&gt; for details about which&lt;br/&gt;
     version may be appropriate for you.&lt;/p&gt;

&lt;p&gt;     The NodeSource Node.js distributions repository contains&lt;br/&gt;
     information both about supported versions of Node.js and supported Linux&lt;br/&gt;
     distributions. To learn more about usage, see the repository:&lt;br/&gt;
       &lt;a href=&quot;https://github.com/nodesource/distributions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nodesource/distributions&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   ================================================================================&lt;br/&gt;
   ================================================================================&lt;br/&gt;
   ```&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fix the Javadoc since this does not allow us to do on Java8, please refer to #334&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632168" author="githubbot" created="Fri, 28 Sep 2018 17:43:30 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221330306&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221330306&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Java tests&quot;&lt;br/&gt;
+cd /avro/lang/java&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python2 tests&quot;&lt;br/&gt;
+cd /avro/lang/py&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python3 tests&quot;&lt;br/&gt;
+cd /avro/lang/py3&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run C tests&quot;&lt;br/&gt;
+cd /avro/lang/c&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
&lt;ins&gt;headline &quot;Run C&lt;/ins&gt;+ tests&quot;&lt;br/&gt;
&lt;ins&gt;cd /avro/lang/c&lt;/ins&gt;+&lt;br/&gt;
+# The current cpp tests are failing:&lt;br/&gt;
+# &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   It&apos;s possible that upgrading to C++11 will also fix this issue. That may be preferable to my fix in #335 &lt;br/&gt;
   Up to you if you want to give it a shot in this PR. &lt;a href=&quot;https://stackoverflow.com/a/25639772/418413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://stackoverflow.com/a/25639772/418413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632169" author="githubbot" created="Fri, 28 Sep 2018 17:44:45 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221330628&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221330628&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Java tests&quot;&lt;br/&gt;
+cd /avro/lang/java&lt;br/&gt;
+./build.sh test&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   What would you say to using a for loop here for all the langs?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632171" author="githubbot" created="Fri, 28 Sep 2018 17:45:14 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221330735&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221330735&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline(){&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   It&apos;s slightly more portable to omit the `function` keyword.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632182" author="githubbot" created="Fri, 28 Sep 2018 17:53:58 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221333274&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221333274&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/Dockerfile&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -21,52 +21,88 @@ FROM java:8-jdk&lt;/p&gt;

&lt;p&gt; WORKDIR /root&lt;/p&gt;

&lt;p&gt;+SHELL &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;/bin/bash&amp;quot;, &amp;quot;-o&amp;quot;, &amp;quot;pipefail&amp;quot;, &amp;quot;-c&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
+&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Add the repository for node.js 4.x&lt;br/&gt;
 RUN curl -sL &lt;a href=&quot;https://deb.nodesource.com/setup_4.x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://deb.nodesource.com/setup_4.x&lt;/a&gt; | bash -&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Install dependencies from packages&lt;br/&gt;
-RUN apt-get update &amp;amp;&amp;amp; apt-get install --no-install-recommends -y \&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;git subversion curl ant make maven \&lt;/li&gt;
	&lt;li&gt;gcc cmake libjansson-dev asciidoc source-highlight \&lt;/li&gt;
	&lt;li&gt;g++ flex bison libboost-all-dev doxygen \&lt;/li&gt;
	&lt;li&gt;mono-devel mono-gmcs nunit \&lt;/li&gt;
	&lt;li&gt;nodejs \&lt;/li&gt;
	&lt;li&gt;perl \&lt;/li&gt;
	&lt;li&gt;php5 phpunit php5-gmp bzip2 \&lt;/li&gt;
	&lt;li&gt;python python-setuptools python3-setuptools \&lt;/li&gt;
	&lt;li&gt;ruby ruby-dev rake \&lt;/li&gt;
	&lt;li&gt;libsnappy1 libsnappy-dev&lt;br/&gt;
+RUN apt-get update &amp;amp;&amp;amp; \&lt;br/&gt;
+  apt-get install --no-install-recommends -y \&lt;br/&gt;
+    ant \&lt;br/&gt;
+    asciidoc \&lt;br/&gt;
+    bison \&lt;br/&gt;
+    bzip2 \&lt;br/&gt;
+    cmake \&lt;br/&gt;
+    curl \&lt;br/&gt;
+    doxygen \&lt;br/&gt;
+    flex \&lt;br/&gt;
+    g++ \&lt;br/&gt;
+    gcc \&lt;br/&gt;
+    git \&lt;br/&gt;
+    libboost-all-dev \&lt;br/&gt;
+    libfontconfig1-dev \&lt;br/&gt;
+    libfreetype6-dev \&lt;br/&gt;
+    libglib2.0-dev \&lt;br/&gt;
+    libjansson-dev \&lt;br/&gt;
+    libsnappy-dev \&lt;br/&gt;
+    libsnappy1 \&lt;br/&gt;
+    make \&lt;br/&gt;
+    maven \&lt;br/&gt;
+    mono-devel \&lt;br/&gt;
+    nodejs \&lt;br/&gt;
+    nunit \&lt;br/&gt;
+    perl \&lt;br/&gt;
+    php5 \&lt;br/&gt;
+    php5-gmp \&lt;br/&gt;
+    phpunit \&lt;br/&gt;
+    python \&lt;br/&gt;
+    python-setuptools \&lt;br/&gt;
+    python3-setuptools \&lt;br/&gt;
+    rake \&lt;br/&gt;
+    ruby \&lt;br/&gt;
+    ruby-dev \&lt;br/&gt;
+    source-highlight \&lt;br/&gt;
+    subversion &amp;amp;&amp;amp; \&lt;br/&gt;
+  apt-get clean &amp;amp;&amp;amp; \&lt;br/&gt;
+  rm -rf /var/lib/apt/lists/*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;Install Forrest in /usr/local/apache-forrest
	&lt;ol&gt;
		&lt;li&gt;Download&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; wget &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-sources.tar.gz&quot;      -O &quot;apache-forrest-0.9-sources.tar.gz&quot;&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; wget &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-dependencies.tar.gz&quot; -O &quot;apache-forrest-0.9-dependencies.tar.gz&quot;&lt;br/&gt;
-&lt;/li&gt;
		&lt;li&gt;Unpack Apache Forrest&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;tar xzf apache-forrest-0.9-sources.tar.gz &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;li&gt;tar xzf apache-forrest-0.9-dependencies.tar.gz &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;li&gt;mv apache-forrest-0.9 apache-forrest&lt;br/&gt;
-RUN cd /usr/local/apache-forrest/main &amp;amp;&amp;amp; ./build.sh&lt;br/&gt;
+RUN curl -L -s &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-sources.tar.gz&quot; | tar -xzf - -C /usr/local/ &amp;amp;&amp;amp; \&lt;br/&gt;
+    curl -L -s &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-dependencies.tar.gz&quot; | tar -xzf - -C /usr/local/ &amp;amp;&amp;amp; \&lt;br/&gt;
+    mv /usr/local/apache-forrest-0.9 /usr/local/apache-forrest &amp;amp;&amp;amp; \&lt;br/&gt;
+    cd /usr/local/apache-forrest/main &amp;amp;&amp;amp; \&lt;br/&gt;
+    ./build.sh&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;The solution for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3906&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-3906&lt;/a&gt;&lt;br/&gt;
-RUN mkdir -p /usr/local/apache-forrest/plugins       &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/plugins&lt;br/&gt;
-RUN mkdir -p /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/build/plugins&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;Configure where forrest can be found&lt;br/&gt;
-RUN echo &apos;forrest.home=/usr/local/apache-forrest&apos; &amp;gt; build.properties&lt;br/&gt;
+RUN mkdir -p /usr/local/apache-forrest/plugins       &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/plugins &amp;amp;&amp;amp; \&lt;br/&gt;
+    mkdir -p /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; \&lt;br/&gt;
+    echo &apos;forrest.home=/usr/local/apache-forrest&apos; &amp;gt; build.properties&lt;br/&gt;
+&lt;br/&gt;
 ENV FORREST_HOME /usr/local/apache-forrest&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Install Perl modules&lt;br/&gt;
-RUN curl -L &lt;a href=&quot;http://cpanmin.us&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cpanmin.us&lt;/a&gt; | perl - --self-upgrade # non-interactive cpan&lt;br/&gt;
-RUN cpanm install Module::Install Module::Install::ReadmeFromPod \&lt;br/&gt;
+RUN curl -L &lt;a href=&quot;http://cpanmin.us&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cpanmin.us&lt;/a&gt; | perl - --self-upgrade &amp;amp;&amp;amp; \&lt;br/&gt;
+  cpanm install Module::Install Module::Install::ReadmeFromPod \&lt;br/&gt;
   Module::Install::Repository \&lt;br/&gt;
   Math::BigInt JSON::XS Try::Tiny Regexp::Common Encode \&lt;br/&gt;
   IO::String Object::Tiny Compress::Zlib Test::More \&lt;br/&gt;
   Test::Exception Test::Pod&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+# Install mono modules&lt;br/&gt;
+RUN mkdir -p /tmp/nunit/ &amp;amp;&amp;amp; \&lt;br/&gt;
+  cd /tmp/nunit/ &amp;amp;&amp;amp; \&lt;br/&gt;
+  curl -L -s -o nunit.zip &lt;a href=&quot;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&lt;/a&gt; &amp;amp;&amp;amp; \&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   One pattern I&apos;ve found useful in Dockerfile lately is using &lt;span class=&quot;error&quot;&gt;&amp;#91;multistage builds&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://docs.docker.com/develop/develop-images/multistage-build&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.docker.com/develop/develop-images/multistage-build&lt;/a&gt;) to encapsulate all download/unpack/cleanup in a image before the main build. This means if you make a cache-invalidating change early in the main build, it doesn&apos;t have to re-fetch the download. Something like this:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   FROM java:8-jdk as fetchcache # Use any base here with curl, zip, tar, etc.&lt;br/&gt;
   WORKDIR /fetch/&lt;br/&gt;
   RUN mkdir -p nunit &amp;amp;&amp;amp; cd nunit &amp;amp;&amp;amp; curl -L -s -o nunit.zip &lt;a href=&quot;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&lt;/a&gt; &amp;amp;&amp;amp; unzip nunit.zip &amp;amp;&amp;amp; rm nunit.zip&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;... Ditto for Forrest and other artifacts ...&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   FROM java:8-jdk as main&lt;br/&gt;
   ...&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Install mono modules&lt;br/&gt;
   COPY --from=fetchcache /fetch/nunit /tmp/nunit&lt;br/&gt;
   ... etc&lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632186" author="githubbot" created="Fri, 28 Sep 2018 17:57:10 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221334189&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221334189&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Java tests&quot;&lt;br/&gt;
+cd /avro/lang/java&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python2 tests&quot;&lt;br/&gt;
+cd /avro/lang/py&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python3 tests&quot;&lt;br/&gt;
+cd /avro/lang/py3&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run C tests&quot;&lt;br/&gt;
+cd /avro/lang/c&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
&lt;ins&gt;headline &quot;Run C&lt;/ins&gt;+ tests&quot;&lt;br/&gt;
&lt;ins&gt;cd /avro/lang/c&lt;/ins&gt;+&lt;br/&gt;
+# The current cpp tests are failing:&lt;br/&gt;
+# &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;br/&gt;
+./build.sh test || true&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run C# tests&quot;&lt;br/&gt;
+cd /avro/lang/csharp&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run Ruby tests&quot;&lt;br/&gt;
+cd /avro/lang/ruby&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run PHP tests&quot;&lt;br/&gt;
+cd /avro/lang/php&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run JS tests&quot;&lt;br/&gt;
+cd /avro/lang/js&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run Perl tests&quot;&lt;br/&gt;
+cd /avro/lang/perl&lt;br/&gt;
+./build.sh test&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Please consider running &lt;span class=&quot;error&quot;&gt;&amp;#91;shellcheck&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/koalaman/shellcheck&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/koalaman/shellcheck&lt;/a&gt;) on the shell scripts here. (Granted, it&apos;ll find bugs that have been around forever and weren&apos;t introduced in this PR, but it&apos;s still worth fixing anything relevant here.)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632187" author="githubbot" created="Fri, 28 Sep 2018 17:57:35 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-425517284&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-425517284&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thank you &lt;em&gt;so much&lt;/em&gt; for doing this work.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632767" author="githubbot" created="Sat, 29 Sep 2018 03:48:59 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221414723&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221414723&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Java tests&quot;&lt;br/&gt;
+cd /avro/lang/java&lt;br/&gt;
+./build.sh test&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I&apos;ve considered it a loop, so let me change it if you prefer a loop �� &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632768" author="githubbot" created="Sat, 29 Sep 2018 03:49:09 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221414727&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221414727&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline(){&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Good one, thanks&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632770" author="githubbot" created="Sat, 29 Sep 2018 03:53:28 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221414827&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221414827&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/Dockerfile&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -21,52 +21,88 @@ FROM java:8-jdk&lt;/p&gt;

&lt;p&gt; WORKDIR /root&lt;/p&gt;

&lt;p&gt;+SHELL &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;/bin/bash&amp;quot;, &amp;quot;-o&amp;quot;, &amp;quot;pipefail&amp;quot;, &amp;quot;-c&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
+&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Add the repository for node.js 4.x&lt;br/&gt;
 RUN curl -sL &lt;a href=&quot;https://deb.nodesource.com/setup_4.x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://deb.nodesource.com/setup_4.x&lt;/a&gt; | bash -&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Install dependencies from packages&lt;br/&gt;
-RUN apt-get update &amp;amp;&amp;amp; apt-get install --no-install-recommends -y \&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;git subversion curl ant make maven \&lt;/li&gt;
	&lt;li&gt;gcc cmake libjansson-dev asciidoc source-highlight \&lt;/li&gt;
	&lt;li&gt;g++ flex bison libboost-all-dev doxygen \&lt;/li&gt;
	&lt;li&gt;mono-devel mono-gmcs nunit \&lt;/li&gt;
	&lt;li&gt;nodejs \&lt;/li&gt;
	&lt;li&gt;perl \&lt;/li&gt;
	&lt;li&gt;php5 phpunit php5-gmp bzip2 \&lt;/li&gt;
	&lt;li&gt;python python-setuptools python3-setuptools \&lt;/li&gt;
	&lt;li&gt;ruby ruby-dev rake \&lt;/li&gt;
	&lt;li&gt;libsnappy1 libsnappy-dev&lt;br/&gt;
+RUN apt-get update &amp;amp;&amp;amp; \&lt;br/&gt;
+  apt-get install --no-install-recommends -y \&lt;br/&gt;
+    ant \&lt;br/&gt;
+    asciidoc \&lt;br/&gt;
+    bison \&lt;br/&gt;
+    bzip2 \&lt;br/&gt;
+    cmake \&lt;br/&gt;
+    curl \&lt;br/&gt;
+    doxygen \&lt;br/&gt;
+    flex \&lt;br/&gt;
+    g++ \&lt;br/&gt;
+    gcc \&lt;br/&gt;
+    git \&lt;br/&gt;
+    libboost-all-dev \&lt;br/&gt;
+    libfontconfig1-dev \&lt;br/&gt;
+    libfreetype6-dev \&lt;br/&gt;
+    libglib2.0-dev \&lt;br/&gt;
+    libjansson-dev \&lt;br/&gt;
+    libsnappy-dev \&lt;br/&gt;
+    libsnappy1 \&lt;br/&gt;
+    make \&lt;br/&gt;
+    maven \&lt;br/&gt;
+    mono-devel \&lt;br/&gt;
+    nodejs \&lt;br/&gt;
+    nunit \&lt;br/&gt;
+    perl \&lt;br/&gt;
+    php5 \&lt;br/&gt;
+    php5-gmp \&lt;br/&gt;
+    phpunit \&lt;br/&gt;
+    python \&lt;br/&gt;
+    python-setuptools \&lt;br/&gt;
+    python3-setuptools \&lt;br/&gt;
+    rake \&lt;br/&gt;
+    ruby \&lt;br/&gt;
+    ruby-dev \&lt;br/&gt;
+    source-highlight \&lt;br/&gt;
+    subversion &amp;amp;&amp;amp; \&lt;br/&gt;
+  apt-get clean &amp;amp;&amp;amp; \&lt;br/&gt;
+  rm -rf /var/lib/apt/lists/*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;Install Forrest in /usr/local/apache-forrest
	&lt;ol&gt;
		&lt;li&gt;Download&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; wget &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-sources.tar.gz&quot;      -O &quot;apache-forrest-0.9-sources.tar.gz&quot;&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; wget &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-dependencies.tar.gz&quot; -O &quot;apache-forrest-0.9-dependencies.tar.gz&quot;&lt;br/&gt;
-&lt;/li&gt;
		&lt;li&gt;Unpack Apache Forrest&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;tar xzf apache-forrest-0.9-sources.tar.gz &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;li&gt;tar xzf apache-forrest-0.9-dependencies.tar.gz &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;li&gt;mv apache-forrest-0.9 apache-forrest&lt;br/&gt;
-RUN cd /usr/local/apache-forrest/main &amp;amp;&amp;amp; ./build.sh&lt;br/&gt;
+RUN curl -L -s &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-sources.tar.gz&quot; | tar -xzf - -C /usr/local/ &amp;amp;&amp;amp; \&lt;br/&gt;
+    curl -L -s &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-dependencies.tar.gz&quot; | tar -xzf - -C /usr/local/ &amp;amp;&amp;amp; \&lt;br/&gt;
+    mv /usr/local/apache-forrest-0.9 /usr/local/apache-forrest &amp;amp;&amp;amp; \&lt;br/&gt;
+    cd /usr/local/apache-forrest/main &amp;amp;&amp;amp; \&lt;br/&gt;
+    ./build.sh&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;The solution for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3906&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-3906&lt;/a&gt;&lt;br/&gt;
-RUN mkdir -p /usr/local/apache-forrest/plugins       &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/plugins&lt;br/&gt;
-RUN mkdir -p /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/build/plugins&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;Configure where forrest can be found&lt;br/&gt;
-RUN echo &apos;forrest.home=/usr/local/apache-forrest&apos; &amp;gt; build.properties&lt;br/&gt;
+RUN mkdir -p /usr/local/apache-forrest/plugins       &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/plugins &amp;amp;&amp;amp; \&lt;br/&gt;
+    mkdir -p /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; \&lt;br/&gt;
+    echo &apos;forrest.home=/usr/local/apache-forrest&apos; &amp;gt; build.properties&lt;br/&gt;
+&lt;br/&gt;
 ENV FORREST_HOME /usr/local/apache-forrest&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Install Perl modules&lt;br/&gt;
-RUN curl -L &lt;a href=&quot;http://cpanmin.us&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cpanmin.us&lt;/a&gt; | perl - --self-upgrade # non-interactive cpan&lt;br/&gt;
-RUN cpanm install Module::Install Module::Install::ReadmeFromPod \&lt;br/&gt;
+RUN curl -L &lt;a href=&quot;http://cpanmin.us&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cpanmin.us&lt;/a&gt; | perl - --self-upgrade &amp;amp;&amp;amp; \&lt;br/&gt;
+  cpanm install Module::Install Module::Install::ReadmeFromPod \&lt;br/&gt;
   Module::Install::Repository \&lt;br/&gt;
   Math::BigInt JSON::XS Try::Tiny Regexp::Common Encode \&lt;br/&gt;
   IO::String Object::Tiny Compress::Zlib Test::More \&lt;br/&gt;
   Test::Exception Test::Pod&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+# Install mono modules&lt;br/&gt;
+RUN mkdir -p /tmp/nunit/ &amp;amp;&amp;amp; \&lt;br/&gt;
+  cd /tmp/nunit/ &amp;amp;&amp;amp; \&lt;br/&gt;
+  curl -L -s -o nunit.zip &lt;a href=&quot;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&lt;/a&gt; &amp;amp;&amp;amp; \&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I&apos;m aware of multistage builds, but I don&apos;t think it will add a lot of value in this case. I also had some issues with it on the Dockerhub builder when using multistage. Then the imported file from the earlier stage would be 0bytes.&lt;/p&gt;

&lt;p&gt;   The reason I don&apos;t think it is useful, for the CI we won&apos;t cache the image at all. The `build.sh docker-test` will run on the CI, and for now it doesn&apos;t store the image somewhere. For local development, it makes more sense to use `build.sh docker`. Also, if the Dockerfile isn&apos;t changed, the layers are cached and it will just reuse the existing image. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632783" author="githubbot" created="Sat, 29 Sep 2018 04:51:40 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221416089&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221416089&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Java tests&quot;&lt;br/&gt;
+cd /avro/lang/java&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python2 tests&quot;&lt;br/&gt;
+cd /avro/lang/py&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python3 tests&quot;&lt;br/&gt;
+cd /avro/lang/py3&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run C tests&quot;&lt;br/&gt;
+cd /avro/lang/c&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
&lt;ins&gt;headline &quot;Run C&lt;/ins&gt;+ tests&quot;&lt;br/&gt;
&lt;ins&gt;cd /avro/lang/c&lt;/ins&gt;+&lt;br/&gt;
+# The current cpp tests are failing:&lt;br/&gt;
+# &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;br/&gt;
+./build.sh test || true&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run C# tests&quot;&lt;br/&gt;
+cd /avro/lang/csharp&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run Ruby tests&quot;&lt;br/&gt;
+cd /avro/lang/ruby&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run PHP tests&quot;&lt;br/&gt;
+cd /avro/lang/php&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run JS tests&quot;&lt;br/&gt;
+cd /avro/lang/js&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+echo &quot;Run Perl tests&quot;&lt;br/&gt;
+cd /avro/lang/perl&lt;br/&gt;
+./build.sh test&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks for the tip, I didn&apos;t know spellcheck, but it really helps. I&apos;ve added some double quotes, as suggested by spellcheck.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632784" author="githubbot" created="Sat, 29 Sep 2018 04:52:08 +0000"  >&lt;p&gt;Fokko commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-425615871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-425615871&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @kojiromike My pleasure, I&apos;ve updated the PR based on your comments. Let me know what you think.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16632785" author="githubbot" created="Sat, 29 Sep 2018 04:52:38 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221416112&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221416112&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,66 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+function headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Java tests&quot;&lt;br/&gt;
+cd /avro/lang/java&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python2 tests&quot;&lt;br/&gt;
+cd /avro/lang/py&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run Python3 tests&quot;&lt;br/&gt;
+cd /avro/lang/py3&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
+headline &quot;Run C tests&quot;&lt;br/&gt;
+cd /avro/lang/c&lt;br/&gt;
+./build.sh test&lt;br/&gt;
+&lt;br/&gt;
&lt;ins&gt;headline &quot;Run C&lt;/ins&gt;+ tests&quot;&lt;br/&gt;
&lt;ins&gt;cd /avro/lang/c&lt;/ins&gt;+&lt;br/&gt;
+# The current cpp tests are failing:&lt;br/&gt;
+# &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   My C++ skills are not so great. After university I haven&apos;t done much, so I&apos;m not familiar with the different versions. My preference would be to update #335 after this one gets merged and then enable the test again �� &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633010" author="githubbot" created="Sat, 29 Sep 2018 13:21:49 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221427987&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221427987&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,38 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+for lang in $(ls /avro/lang/)&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Please write this using a glob expression&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   for lang in /avro/lang/*/&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633020" author="kojiromike" created="Sat, 29 Sep 2018 13:56:30 +0000"  >&lt;p&gt;Did you not run into a java test failure due to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2196&quot; title=&quot;Build fails on a clean machine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2196&quot;&gt;&lt;del&gt;AVRO-2196&lt;/del&gt;&lt;/a&gt;? I found that that failed for me until I included Niels Basjes fix for that.&lt;/p&gt;</comment>
                            <comment id="16633260" author="githubbot" created="Sun, 30 Sep 2018 06:21:26 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#discussion_r221448847&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#discussion_r221448847&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: share/docker/run-tests.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,38 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+headline()&lt;/p&gt;
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+for lang in $(ls /avro/lang/)&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks, just did �� &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633407" author="githubbot" created="Sun, 30 Sep 2018 15:35:47 +0000"  >&lt;p&gt;Fokko commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-425729391&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-425729391&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @busbey @nandorKollar @cutting PTAL. Any further suggestions, or it this good to go? &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16633420" author="githubbot" created="Sun, 30 Sep 2018 16:25:22 +0000"  >&lt;p&gt;busbey commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-425732775&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-425732775&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   If I&apos;m going to provide a review you&apos;ll have to be extremely patient. I have very limited volunteer time these days and right now it mostly gets used up in email related to the project.&lt;/p&gt;

&lt;p&gt;   Given the importance of this changeset, I&apos;d expect my turn around time to be 1-2 weeks. That&apos;s not to say anyone should block on me; I&apos;m just setting expectations.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634293" author="githubbot" created="Mon, 1 Oct 2018 16:37:18 +0000"  >&lt;p&gt;cutting commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-425975622&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-425975622&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   The changes look good to me, but I&apos;m not currently able to test this.  Can someone (besides Fokko) verify that, with this patch, tests in all languages now pass under Docker?  If so, I&apos;m happy to commit.  Thanks!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634384" author="githubbot" created="Mon, 1 Oct 2018 17:45:46 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-425998771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-425998771&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cutting well, to be strictly correct, we know that C++ tests do not pass, irrespective of this PR. That is &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2230&quot; title=&quot;./build.sh test fails in c++ due to assignment to const&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2230&quot;&gt;&lt;del&gt;AVRO-2230&lt;/del&gt;&lt;/a&gt; and fixed in #335 as previously mentioned in @Fokko &apos;s comments. This PR runs the C++ tests, but then continues even when they fail.&lt;/p&gt;

&lt;p&gt;   Otherwise, I will run the rest of the tests a couple different ways and get back to you.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634647" author="githubbot" created="Mon, 1 Oct 2018 21:21:23 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-426067253&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-426067253&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Fokko Could you please rebase or merge master into this PR so we can have the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2196&quot; title=&quot;Build fails on a clean machine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2196&quot;&gt;&lt;del&gt;AVRO-2196&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634653" author="githubbot" created="Mon, 1 Oct 2018 21:28:10 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-426069227&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-426069227&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Locally, I rebased master into this branch. Then I ran `./build.sh docker-test`. That passed.&lt;/p&gt;

&lt;p&gt;   Then, I ran `./build.sh docker` followed by `./build.sh test` inside the container. That failed, due to rat, which complains that BUILD.md does not have a valid license header.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635788" author="githubbot" created="Tue, 2 Oct 2018 16:28:15 +0000"  >&lt;p&gt;Fokko commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-426340029&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-426340029&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @kojiromike This is actually a valid point of the rat checker. The licenses need to be set correctly I think I&apos;ll integrate the `run-tests.sh` in the root `build.sh`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16637337" author="githubbot" created="Wed, 3 Oct 2018 18:20:32 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-426742942&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-426742942&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Bypassing the rat test and all the known-passing tests, I ran the rest of the `./build.sh test` in docker as described above. The very last step failed:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   + /bin/bash share/test/interop/bin/test_rpc_interop.sh&lt;br/&gt;
   TEST: share/test/interop/rpc/add/onePlusOne&lt;br/&gt;
   18/10/03 18:16:25 INFO util.log: Logging initialized @337ms to org.eclipse.jetty.util.log.Slf4jLog&lt;br/&gt;
   18/10/03 18:16:25 INFO server.Server: jetty-9.4.z-SNAPSHOT&lt;br/&gt;
   18/10/03 18:16:25 INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@441772e&lt;/p&gt;
{/,null,AVAILABLE}&lt;br/&gt;
   18/10/03 18:16:25 INFO server.AbstractConnector: Started ServerConnector@79924b{HTTP/1.1,[http/1.1]}{0.0.0.0:46719}&lt;br/&gt;
   18/10/03 18:16:25 INFO server.Server: Started @813ms&lt;br/&gt;
   2&lt;br/&gt;
   Closing server.&lt;br/&gt;
   18/10/03 18:16:27 INFO server.AbstractConnector: Stopped ServerConnector@79924b{HTTP/1.1,[http/1.1]}{0.0.0.0:0}&lt;br/&gt;
   18/10/03 18:16:27 INFO handler.ContextHandler: Stopped o.e.j.s.ServletContextHandler@441772e{/,null,UNAVAILABLE}&lt;br/&gt;
   18/10/03 18:16:27 INFO util.log: Logging initialized @324ms to org.eclipse.jetty.util.log.Slf4jLog&lt;br/&gt;
   18/10/03 18:16:27 INFO server.Server: jetty-9.4.z-SNAPSHOT&lt;br/&gt;
   18/10/03 18:16:28 INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@441772e{/,null,AVAILABLE}
&lt;p&gt;   18/10/03 18:16:28 INFO server.AbstractConnector: Started ServerConnector@79924b&lt;/p&gt;
{HTTP/1.1,[http/1.1]}{0.0.0.0:33359}&lt;br/&gt;
   18/10/03 18:16:28 INFO server.Server: Started @420ms&lt;br/&gt;
   2&lt;br/&gt;
   Closing server.&lt;br/&gt;
   18/10/03 18:16:29 INFO server.AbstractConnector: Stopped ServerConnector@79924b{HTTP/1.1,[http/1.1]}
{0.0.0.0:0}
&lt;p&gt;   18/10/03 18:16:29 INFO handler.ContextHandler: Stopped o.e.j.s.ServletContextHandler@441772e&lt;/p&gt;
{/,null,UNAVAILABLE}
&lt;p&gt;   18/10/03 18:16:30 INFO util.log: Logging initialized @323ms to org.eclipse.jetty.util.log.Slf4jLog&lt;br/&gt;
   18/10/03 18:16:30 INFO server.Server: jetty-9.4.z-SNAPSHOT&lt;br/&gt;
   18/10/03 18:16:30 INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@441772e&lt;/p&gt;
{/,null,AVAILABLE}
&lt;p&gt;   18/10/03 18:16:30 INFO server.AbstractConnector: Started ServerConnector@79924b&lt;/p&gt;
{HTTP/1.1,[http/1.1]}
{0.0.0.0:34025}
&lt;p&gt;   18/10/03 18:16:30 INFO server.Server: Started @419ms&lt;br/&gt;
   /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:127:in `validate_map&apos;: undefined method `keys&apos; for nil:NilClass (NoMethodError)&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:103:in `validate_recursive&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:156:in `block in validate_possible_types&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:154:in `map&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:154:in `validate_possible_types&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:141:in `validate_union&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:105:in `validate_recursive&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:110:in `block in validate_recursive&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:108:in `each&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:108:in `validate_recursive&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema_validator.rb:67:in `validate!&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/schema.rb:97:in `validate&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/io.rb:503:in `write_data&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/io.rb:499:in `write&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/ipc.rb:136:in `write_handshake_request&apos;&lt;br/&gt;
           from /home/michaels/avro/lang/ruby/lib/avro/ipc.rb:105:in `request&apos;&lt;br/&gt;
           from lang/ruby/test/tool.rb:69:in `send_message&apos;&lt;br/&gt;
           from lang/ruby/test/tool.rb:137:in `main&apos;&lt;br/&gt;
           from lang/ruby/test/tool.rb:143:in `&amp;lt;main&amp;gt;&apos;&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   I don&apos;t know if this is reflected in any other ticket.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639124" author="githubbot" created="Fri, 5 Oct 2018 01:16:37 +0000"  >&lt;p&gt;Fokko commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-427217379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-427217379&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @kojiromike I&apos;m working on integrating the Docker testing with the existing `build.sh`&apos;s. But this requires some more love. At the current state of the PR, with the docker tests we&apos;d only execute the unit tests. I think it is important to also add the interop tests, but this needs some more attention. I hope to finish this the upcoming days.&lt;/p&gt;

&lt;p&gt;   Recently there was a mail about the Python versions. I&apos;ve checked and the current CI uses Python 2.7 and Python 3.4. We should decide on Python versions, and add them to the `BUILD.md` and the `setup.py` of the specific project to communicate which versions of Python we support.&lt;/p&gt;

&lt;p&gt;   I&apos;ve created a Jira to move from the deprecated `java` docker image to `openjdk`: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2238&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-2238&lt;/a&gt;&lt;br/&gt;
   Updating is not trivial since the `java` is based on Debian Jessie, and `openjdk` is based on Debian Stretch. This will update a lot of different packages, for example, it comes with a newer version of Perl and PHP.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639143" author="githubbot" created="Fri, 5 Oct 2018 01:41:09 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-427220777&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-427220777&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I don&apos;t think the `test_rpc_interop.sh` test breakage has anything to do with this PR. I think it&apos;s a bug in the ruby implementation. I think this PR is fine and (besides the rat thing) moves the project forward. My vote fwiw is that this changeset get merged in so we can move forward with other incremental fixups.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639145" author="githubbot" created="Fri, 5 Oct 2018 01:42:09 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-427220920&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-427220920&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Apologies, I hit enter too soon &amp;#8211; I want to add that I confirmed that the `test_rpc_interop.sh` fails with the exact same error in master. It has nothing to do with this PR.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639146" author="githubbot" created="Fri, 5 Oct 2018 01:43:58 +0000"  >&lt;p&gt;Fokko commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-427221202&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-427221202&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @kojiromike I fully agree. But instead instead of introducing a new file for Docker testing (&lt;a href=&quot;https://github.com/apache/avro/pull/336/files#diff-be31a75fe0e789d10685a4ab885644ad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336/files#diff-be31a75fe0e789d10685a4ab885644ad&lt;/a&gt;), I would prefer to use the current tests: &lt;a href=&quot;https://github.com/apache/avro/blob/master/build.sh#L40-L75&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/blob/master/build.sh#L40-L75&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639156" author="githubbot" created="Fri, 5 Oct 2018 01:51:21 +0000"  >&lt;p&gt;kojiromike commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-427222300&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-427222300&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   (For your notes in the description, #335 is closed, duplicates work done in #326, which is now merged.)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639967" author="githubbot" created="Fri, 5 Oct 2018 15:42:57 +0000"  >&lt;p&gt;Fokko commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-427409728&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-427409728&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I&apos;ve created a ticket for fixing the interop tests: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-2239&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639978" author="githubbot" created="Fri, 5 Oct 2018 15:49:59 +0000"  >&lt;p&gt;cutting closed pull request #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/BUILD.txt b/BUILD.md&lt;br/&gt;
similarity index 67%&lt;br/&gt;
rename from BUILD.txt&lt;br/&gt;
rename to BUILD.md&lt;br/&gt;
index 223bc4d04..882338aee 100644&lt;br/&gt;
&amp;#8212; a/BUILD.txt&lt;br/&gt;
+++ b/BUILD.md&lt;br/&gt;
@@ -1,6 +1,6 @@&lt;br/&gt;
-Apache Avro Build Instructions&lt;br/&gt;
+# Apache Avro Build Instructions&lt;/p&gt;

&lt;p&gt;-REQUIREMENTS&lt;br/&gt;
+## Requirements&lt;/p&gt;

&lt;p&gt; The following packages must be installed before Avro can be built:&lt;/p&gt;

&lt;p&gt;@@ -18,13 +18,18 @@ The following packages must be installed before Avro can be built:&lt;br/&gt;
    IO::String, Object::Tiny, Compress::ZLib, Test::More,&lt;br/&gt;
    Test::Exception, Test::Pod&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Apache Ant 1.7&lt;/li&gt;
	&lt;li&gt;- Apache Forrest 0.8 (for documentation)&lt;br/&gt;
+ - Apache Forrest 0.9 (for documentation)&lt;/li&gt;
	&lt;li&gt;md5sum, sha1sum, used by top-level dist target&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; To simplify this, you can run a Docker container with all the above&lt;br/&gt;
-dependencies installed by installing docker.io and typing:&lt;br/&gt;
+dependencies installed by installing Docker and run:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;./build.sh docker&lt;br/&gt;
+```bash&lt;br/&gt;
+./build.sh docker&lt;br/&gt;
+docker@539f6535c9db:~/avro$ cd lang/java/&lt;br/&gt;
+docker@539f6535c9db:~/avro/lang/java$ ./build.sh test&lt;br/&gt;
+&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Scanning for projects...&lt;br/&gt;
+```&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; When this completes you will be in a shell running in the&lt;br/&gt;
 container. Building the image the first time may take a while (20&lt;br/&gt;
@@ -36,11 +41,22 @@ The working directory in the container is mounted from your host. This&lt;br/&gt;
 allows you to access the files in your Avro development tree from the&lt;br/&gt;
 Docker container.&lt;/p&gt;

&lt;p&gt;-BUILDING&lt;br/&gt;
+## Building&lt;/p&gt;

&lt;p&gt; Once the requirements are installed (or from the Docker container),&lt;br/&gt;
 build.sh can be used as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&apos;./build.sh test&apos; runs tests for all languages&lt;/li&gt;
	&lt;li&gt;&apos;./build.sh dist&apos; creates all release distribution files in dist/&lt;/li&gt;
	&lt;li&gt;&apos;./build.sh clean&apos; removes all generated artifacts&lt;br/&gt;
+```&lt;br/&gt;
+./build.sh test # runs tests for all languages&lt;br/&gt;
+./build.sh dist # creates all release distribution files in dist/&lt;br/&gt;
+./build.sh clean # removes all generated artifacts&lt;br/&gt;
+```&lt;br/&gt;
+&lt;br/&gt;
+## Testing&lt;br/&gt;
+&lt;br/&gt;
+Testing is done with the same Docker container as mentioned in the building&lt;br/&gt;
+step. The difference is that it will do clean run of the full test suite:&lt;br/&gt;
+&lt;br/&gt;
+```bash&lt;br/&gt;
+./build.sh docker-test&lt;br/&gt;
+```&lt;br/&gt;
diff --git a/build.sh b/build.sh&lt;br/&gt;
index 255e46af7..8810d6bfa 100755
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/build.sh&lt;br/&gt;
+++ b/build.sh&lt;br/&gt;
@@ -22,7 +22,7 @@ cd `dirname &quot;$0&quot;`     # connect to root&lt;br/&gt;
 VERSION=`cat share/VERSION.txt`&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; function usage {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Usage: $0 
{test|dist|sign|clean|docker|rat|githooks}
&lt;p&gt;&quot;&lt;br/&gt;
+  echo &quot;Usage: $0 &lt;/p&gt;
{test|dist|sign|clean|docker|rat|githooks|docker-test}
&lt;p&gt;&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
 }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -197,7 +197,7 @@ do&lt;br/&gt;
       ;;&lt;/p&gt;

&lt;p&gt;     docker)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;docker build -t avro-build share/docker&lt;br/&gt;
+      docker build -t avro-build -f share/docker/Dockerfile .&lt;br/&gt;
       if [ &quot;$(uname -s)&quot; == &quot;Linux&quot; ]; then&lt;br/&gt;
         USER_NAME=${SUDO_USER:=$USER}&lt;br/&gt;
         USER_ID=$(id -u $USER_NAME)&lt;br/&gt;
@@ -217,13 +217,13 @@ UserSpecificDocker&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;within the container and use the result on your normal&lt;/li&gt;
	&lt;li&gt;system.  And this also is a significant speedup in subsequent&lt;/li&gt;
	&lt;li&gt;builds because the dependencies are downloaded only once.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;docker run --rm=true -t -i \&lt;br/&gt;
+      docker run --rm -t -i \&lt;br/&gt;
         -v ${PWD}:/home/${USER_NAME}/avro \&lt;br/&gt;
         -w /home/${USER_NAME}/avro \&lt;br/&gt;
         -v ${HOME}/.m2:/home/${USER_NAME}/.m2 \&lt;br/&gt;
         -v ${HOME}/.gnupg:/home/${USER_NAME}/.gnupg \&lt;br/&gt;
         -u ${USER_NAME} \&lt;/li&gt;
	&lt;li&gt;avro-build-${USER_NAME}&lt;br/&gt;
+        avro-build-${USER_NAME} bash&lt;br/&gt;
       ;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     rat)&lt;br/&gt;
@@ -236,6 +236,11 @@ UserSpecificDocker&lt;br/&gt;
       find .git/hooks/ -type f | fgrep -v sample | xargs chmod 755&lt;br/&gt;
       ;;&lt;/p&gt;

&lt;p&gt;+    docker-test)&lt;br/&gt;
+      docker build -t avro-test -f share/docker/Dockerfile .&lt;br/&gt;
+      docker run --rm -v ${PWD}:/avro/ avro-test&lt;br/&gt;
+      ;;&lt;br/&gt;
+&lt;br/&gt;
     *)&lt;br/&gt;
       usage&lt;br/&gt;
       ;;&lt;br/&gt;
diff --git a/lang/csharp/src/apache/codegen/app.config b/lang/csharp/src/apache/codegen/app.config&lt;br/&gt;
index ae2479060..e8a42543c 100755&lt;br/&gt;
&amp;#8212; a/lang/csharp/src/apache/codegen/app.config&lt;br/&gt;
+++ b/lang/csharp/src/apache/codegen/app.config&lt;br/&gt;
@@ -15,5 +15,8 @@&lt;br/&gt;
    See the License for the specific language governing permissions and&lt;br/&gt;
    limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;configuration&amp;gt;&lt;br/&gt;
-&amp;lt;startup&amp;gt;&amp;lt;supportedRuntime version=&quot;v2.0.50727&quot;/&amp;gt;&amp;lt;/startup&amp;gt;&amp;lt;/configuration&amp;gt;&lt;br/&gt;
+&amp;lt;configuration useLegacyV2RuntimeActivationPolicy=&quot;true&quot;&amp;gt;&lt;br/&gt;
+  &amp;lt;startup&amp;gt;&lt;br/&gt;
+    &amp;lt;supportedRuntime version=&quot;v4.0.30319&quot; /&amp;gt;&lt;br/&gt;
+  &amp;lt;/startup&amp;gt;&lt;br/&gt;
+&amp;lt;/configuration&amp;gt;&lt;br/&gt;
diff --git a/lang/csharp/src/apache/perf/app.config b/lang/csharp/src/apache/perf/app.config&lt;br/&gt;
index ae2479060..e8a42543c 100755&lt;br/&gt;
&amp;#8212; a/lang/csharp/src/apache/perf/app.config&lt;br/&gt;
+++ b/lang/csharp/src/apache/perf/app.config&lt;br/&gt;
@@ -15,5 +15,8 @@&lt;br/&gt;
    See the License for the specific language governing permissions and&lt;br/&gt;
    limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;configuration&amp;gt;&lt;br/&gt;
-&amp;lt;startup&amp;gt;&amp;lt;supportedRuntime version=&quot;v2.0.50727&quot;/&amp;gt;&amp;lt;/startup&amp;gt;&amp;lt;/configuration&amp;gt;&lt;br/&gt;
+&amp;lt;configuration useLegacyV2RuntimeActivationPolicy=&quot;true&quot;&amp;gt;&lt;br/&gt;
+  &amp;lt;startup&amp;gt;&lt;br/&gt;
+    &amp;lt;supportedRuntime version=&quot;v4.0.30319&quot; /&amp;gt;&lt;br/&gt;
+  &amp;lt;/startup&amp;gt;&lt;br/&gt;
+&amp;lt;/configuration&amp;gt;&lt;br/&gt;
diff --git a/lang/java/build.sh b/lang/java/build.sh&lt;br/&gt;
index bf1a4fb9d..76f7f579d 100755&lt;br/&gt;
&amp;#8212; a/lang/java/build.sh&lt;br/&gt;
+++ b/lang/java/build.sh&lt;br/&gt;
@@ -43,7 +43,7 @@ function do_dist() {&lt;/p&gt;

&lt;p&gt; case &quot;$target&quot; in&lt;br/&gt;
   test)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mvn test&lt;br/&gt;
+    mvn -B test&lt;br/&gt;
     ;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   dist)&lt;br/&gt;
diff --git a/lang/py3/setup.py b/lang/py3/setup.py&lt;br/&gt;
old mode 100644&lt;br/&gt;
new mode 100755&lt;br/&gt;
diff --git a/share/docker/Dockerfile b/share/docker/Dockerfile&lt;br/&gt;
index 535ae318f..de09220a1 100644&lt;br/&gt;
&amp;#8212; a/share/docker/Dockerfile&lt;br/&gt;
+++ b/share/docker/Dockerfile&lt;br/&gt;
@@ -21,52 +21,88 @@ FROM java:8-jdk&lt;/p&gt;

&lt;p&gt; WORKDIR /root&lt;/p&gt;

&lt;p&gt;+SHELL &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;/bin/bash&amp;quot;, &amp;quot;-o&amp;quot;, &amp;quot;pipefail&amp;quot;, &amp;quot;-c&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
+&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Add the repository for node.js 4.x&lt;br/&gt;
 RUN curl -sL &lt;a href=&quot;https://deb.nodesource.com/setup_4.x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://deb.nodesource.com/setup_4.x&lt;/a&gt; | bash -&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Install dependencies from packages&lt;br/&gt;
-RUN apt-get update &amp;amp;&amp;amp; apt-get install --no-install-recommends -y \&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;git subversion curl ant make maven \&lt;/li&gt;
	&lt;li&gt;gcc cmake libjansson-dev asciidoc source-highlight \&lt;/li&gt;
	&lt;li&gt;g++ flex bison libboost-all-dev doxygen \&lt;/li&gt;
	&lt;li&gt;mono-devel mono-gmcs nunit \&lt;/li&gt;
	&lt;li&gt;nodejs \&lt;/li&gt;
	&lt;li&gt;perl \&lt;/li&gt;
	&lt;li&gt;php5 phpunit php5-gmp bzip2 \&lt;/li&gt;
	&lt;li&gt;python python-setuptools python3-setuptools \&lt;/li&gt;
	&lt;li&gt;ruby ruby-dev rake \&lt;/li&gt;
	&lt;li&gt;libsnappy1 libsnappy-dev&lt;br/&gt;
+RUN apt-get update &amp;amp;&amp;amp; \&lt;br/&gt;
+  apt-get install --no-install-recommends -y \&lt;br/&gt;
+    ant \&lt;br/&gt;
+    asciidoc \&lt;br/&gt;
+    bison \&lt;br/&gt;
+    bzip2 \&lt;br/&gt;
+    cmake \&lt;br/&gt;
+    curl \&lt;br/&gt;
+    doxygen \&lt;br/&gt;
+    flex \&lt;br/&gt;
+    g++ \&lt;br/&gt;
+    gcc \&lt;br/&gt;
+    git \&lt;br/&gt;
+    libboost-all-dev \&lt;br/&gt;
+    libfontconfig1-dev \&lt;br/&gt;
+    libfreetype6-dev \&lt;br/&gt;
+    libglib2.0-dev \&lt;br/&gt;
+    libjansson-dev \&lt;br/&gt;
+    libsnappy-dev \&lt;br/&gt;
+    libsnappy1 \&lt;br/&gt;
+    make \&lt;br/&gt;
+    maven \&lt;br/&gt;
+    mono-devel \&lt;br/&gt;
+    nodejs \&lt;br/&gt;
+    nunit \&lt;br/&gt;
+    perl \&lt;br/&gt;
+    php5 \&lt;br/&gt;
+    php5-gmp \&lt;br/&gt;
+    phpunit \&lt;br/&gt;
+    python \&lt;br/&gt;
+    python-setuptools \&lt;br/&gt;
+    python3-setuptools \&lt;br/&gt;
+    rake \&lt;br/&gt;
+    ruby \&lt;br/&gt;
+    ruby-dev \&lt;br/&gt;
+    source-highlight \&lt;br/&gt;
+    subversion &amp;amp;&amp;amp; \&lt;br/&gt;
+  apt-get clean &amp;amp;&amp;amp; \&lt;br/&gt;
+  rm -rf /var/lib/apt/lists/*&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;Install Forrest in /usr/local/apache-forrest
	&lt;ol&gt;
		&lt;li&gt;Download&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; wget &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-sources.tar.gz&quot;      -O &quot;apache-forrest-0.9-sources.tar.gz&quot;&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; wget &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-dependencies.tar.gz&quot; -O &quot;apache-forrest-0.9-dependencies.tar.gz&quot;&lt;br/&gt;
-&lt;/li&gt;
		&lt;li&gt;Unpack Apache Forrest&lt;br/&gt;
-RUN cd /usr/local/ &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;tar xzf apache-forrest-0.9-sources.tar.gz &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;li&gt;tar xzf apache-forrest-0.9-dependencies.tar.gz &amp;amp;&amp;amp; \&lt;/li&gt;
	&lt;li&gt;mv apache-forrest-0.9 apache-forrest&lt;br/&gt;
-RUN cd /usr/local/apache-forrest/main &amp;amp;&amp;amp; ./build.sh&lt;br/&gt;
+RUN curl -L -s &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-sources.tar.gz&quot; | tar -xzf - -C /usr/local/ &amp;amp;&amp;amp; \&lt;br/&gt;
+    curl -L -s &quot;http://www.apache.org/dyn/closer.lua?action=download&amp;amp;filename=/forrest/apache-forrest-0.9-dependencies.tar.gz&quot; | tar -xzf - -C /usr/local/ &amp;amp;&amp;amp; \&lt;br/&gt;
+    mv /usr/local/apache-forrest-0.9 /usr/local/apache-forrest &amp;amp;&amp;amp; \&lt;br/&gt;
+    cd /usr/local/apache-forrest/main &amp;amp;&amp;amp; \&lt;br/&gt;
+    ./build.sh&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;The solution for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3906&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-3906&lt;/a&gt;&lt;br/&gt;
-RUN mkdir -p /usr/local/apache-forrest/plugins       &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/plugins&lt;br/&gt;
-RUN mkdir -p /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/build/plugins&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;Configure where forrest can be found&lt;br/&gt;
-RUN echo &apos;forrest.home=/usr/local/apache-forrest&apos; &amp;gt; build.properties&lt;br/&gt;
+RUN mkdir -p /usr/local/apache-forrest/plugins       &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/plugins &amp;amp;&amp;amp; \&lt;br/&gt;
+    mkdir -p /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; chmod a+rwX -R /usr/local/apache-forrest/build/plugins &amp;amp;&amp;amp; \&lt;br/&gt;
+    echo &apos;forrest.home=/usr/local/apache-forrest&apos; &amp;gt; build.properties&lt;br/&gt;
+&lt;br/&gt;
 ENV FORREST_HOME /usr/local/apache-forrest&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Install Perl modules&lt;br/&gt;
-RUN curl -L &lt;a href=&quot;http://cpanmin.us&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cpanmin.us&lt;/a&gt; | perl - --self-upgrade # non-interactive cpan&lt;br/&gt;
-RUN cpanm install Module::Install Module::Install::ReadmeFromPod \&lt;br/&gt;
+RUN curl -L &lt;a href=&quot;http://cpanmin.us&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cpanmin.us&lt;/a&gt; | perl - --self-upgrade &amp;amp;&amp;amp; \&lt;br/&gt;
+  cpanm install Module::Install Module::Install::ReadmeFromPod \&lt;br/&gt;
   Module::Install::Repository \&lt;br/&gt;
   Math::BigInt JSON::XS Try::Tiny Regexp::Common Encode \&lt;br/&gt;
   IO::String Object::Tiny Compress::Zlib Test::More \&lt;br/&gt;
   Test::Exception Test::Pod&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;+# Install mono modules&lt;br/&gt;
+RUN mkdir -p /tmp/nunit/ &amp;amp;&amp;amp; \&lt;br/&gt;
+  cd /tmp/nunit/ &amp;amp;&amp;amp; \&lt;br/&gt;
+  curl -L -s -o nunit.zip &lt;a href=&quot;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nunit-legacy/nunitv2/releases/download/2.7.0/NUnit-2.7.0.zip&lt;/a&gt; &amp;amp;&amp;amp; \&lt;br/&gt;
+  unzip nunit.zip &amp;amp;&amp;amp; \&lt;br/&gt;
+  rm nunit.zip&lt;br/&gt;
+&lt;br/&gt;
+ENV MONO_PATH /tmp/nunit/bin/lib&lt;br/&gt;
+&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Install Ruby modules&lt;br/&gt;
 RUN gem install echoe yajl-ruby multi_json snappy&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Install global Node modules&lt;br/&gt;
 RUN npm install -g grunt-cli&lt;br/&gt;
+&lt;br/&gt;
+CMD &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;/avro/share/docker/run-tests.sh&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
diff --git a/share/docker/run-tests.sh b/share/docker/run-tests.sh&lt;br/&gt;
new file mode 100755&lt;br/&gt;
index 000000000..e9919a7f6
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/share/docker/run-tests.sh&lt;br/&gt;
@@ -0,0 +1,38 @@&lt;br/&gt;
+#!/bin/bash&lt;br/&gt;
+&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+# contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+# this work for additional information regarding copyright ownership.&lt;br/&gt;
+# The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+# (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+# the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+# See the License for the specific language governing permissions and&lt;br/&gt;
+# limitations under the License.&lt;br/&gt;
+&lt;br/&gt;
+headline()
{
+  echo -e &quot;\e[1;34m#################################################################&quot;
+  echo -e &quot;##### $1 \e[1;37m&quot;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;
+}
&lt;p&gt;+&lt;br/&gt;
+set -e&lt;br/&gt;
+&lt;br/&gt;
+for lang in /avro/lang/*/&lt;br/&gt;
+do&lt;br/&gt;
+  headline &quot;Run tests: $lang&quot;&lt;br/&gt;
+  cd &quot;$lang&quot;&lt;br/&gt;
+&lt;br/&gt;
+  if [[ &quot;$lang&quot; = &lt;b&gt;&quot;c++&quot;&lt;/b&gt; ]]; then&lt;br/&gt;
+    # The current cpp tests are failing:&lt;br/&gt;
+    # &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;br/&gt;
+    ./build.sh test || true&lt;br/&gt;
+  else&lt;br/&gt;
+    ./build.sh test&lt;br/&gt;
+  fi&lt;br/&gt;
+done&lt;/p&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16639979" author="jira-bot" created="Fri, 5 Oct 2018 15:50:07 +0000"  >&lt;p&gt;Commit a11bd49e86d50f5a840ab2cdfe4f6927bedb4f93 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fokko&quot; class=&quot;user-hover&quot; rel=&quot;Fokko&quot;&gt;Fokko Driesprong&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=a11bd49&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=a11bd49&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image (#336)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Fix the docker-based build/test.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16639980" author="jira-bot" created="Fri, 5 Oct 2018 15:50:09 +0000"  >&lt;p&gt;Commit a11bd49e86d50f5a840ab2cdfe4f6927bedb4f93 in avro&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fokko&quot; class=&quot;user-hover&quot; rel=&quot;Fokko&quot;&gt;Fokko Driesprong&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=avro.git;h=a11bd49&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gitbox.apache.org/repos/asf?p=avro.git;h=a11bd49&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image (#336)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Fix the docker-based build/test.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16639983" author="cutting" created="Fri, 5 Oct 2018 15:52:54 +0000"  >&lt;p&gt;I committed this.&#160; Thanks, Fokko!&lt;/p&gt;</comment>
                            <comment id="16640025" author="githubbot" created="Fri, 5 Oct 2018 16:15:35 +0000"  >&lt;p&gt;Fokko opened a new pull request #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Follow up PR of &lt;a href=&quot;https://github.com/apache/avro/pull/336&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Integrate the testing with the Docker image with the existing build.sh. &lt;/p&gt;

&lt;p&gt;   @cutting @kojiromike&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640028" author="githubbot" created="Fri, 5 Oct 2018 16:16:12 +0000"  >&lt;p&gt;Fokko commented on issue #336: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/336#issuecomment-427420247&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/336#issuecomment-427420247&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for merging @cutting. I was still working on the PR, should have put a `&lt;span class=&quot;error&quot;&gt;&amp;#91;WIP&amp;#93;&lt;/span&gt;` in the title. I have a follow up PR here: &lt;a href=&quot;https://github.com/apache/avro/pull/343&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640225" author="githubbot" created="Fri, 5 Oct 2018 19:03:26 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#discussion_r223110882&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#discussion_r223110882&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: build.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -26,6 +26,12 @@ function usage &lt;/p&gt;
{
   exit 1
 }

&lt;p&gt;+headline(){&lt;br/&gt;
+  echo -e &quot;\e[1;34m#################################################################&quot;&lt;br/&gt;
+  echo -e &quot;##### $1 \e[1;37m&quot;&lt;br/&gt;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Can&apos;t remember if I commented on this in the previous PR, but can the ansi escapes here be handled using e.g. tput, or otherwise avoid breaking dumb terminals?&lt;/p&gt;

&lt;p&gt;   ```bash&lt;br/&gt;
   termblack=$(tput setaf 0)&lt;br/&gt;
   termred=$(tput setaf 1)&lt;br/&gt;
   termgreen=$(tput setaf 2)&lt;br/&gt;
   termyellow=$(tput setaf 3)&lt;br/&gt;
   termblue=$(tput setaf 4)&lt;br/&gt;
   termpurple=$(tput setaf 5)&lt;br/&gt;
   termaqua=$(tput setaf 6)&lt;br/&gt;
   termreset=$(tput sgr0)&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640296" author="githubbot" created="Fri, 5 Oct 2018 20:08:40 +0000"  >&lt;p&gt;kojiromike commented on a change in pull request #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#discussion_r223125939&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#discussion_r223125939&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: lang/java/avro/build.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -15,24 +15,30 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;limitations under the License.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-headline(){&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo -e &quot;\e[1;34m#################################################################&quot;&lt;/li&gt;
	&lt;li&gt;echo -e &quot;##### $1 \e[1;37m&quot;&lt;/li&gt;
	&lt;li&gt;echo -e &quot;\e[1;34m#################################################################\e[0m&quot;&lt;br/&gt;
+set -e # exit on error&lt;br/&gt;
+&lt;br/&gt;
+function usage 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+  echo &amp;quot;Usage}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-set -e&lt;br/&gt;
+case &quot;$target&quot; in&lt;br/&gt;
+  test)&lt;br/&gt;
+    mvn -B test&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  clean)&lt;br/&gt;
+    mvn clean&lt;br/&gt;
+    ;;&lt;/p&gt;

&lt;p&gt;-for lang in /avro/lang/*/&lt;br/&gt;
-do&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;headline &quot;Run tests: $lang&quot;&lt;/li&gt;
	&lt;li&gt;cd &quot;$lang&quot;&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    mvn clean&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  *)&lt;br/&gt;
+    usage&lt;br/&gt;
+esac&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ &quot;$lang&quot; = &lt;b&gt;&quot;c++&quot;&lt;/b&gt; ]]; then&lt;/li&gt;
	&lt;li&gt;# The current cpp tests are failing:&lt;/li&gt;
	&lt;li&gt;# &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;./build.sh test || true&lt;/li&gt;
	&lt;li&gt;else&lt;/li&gt;
	&lt;li&gt;./build.sh test&lt;/li&gt;
	&lt;li&gt;fi&lt;br/&gt;
 done&lt;br/&gt;
+&lt;br/&gt;
+exit 0&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   This exit statement isn&apos;t necessary.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640343" author="githubbot" created="Fri, 5 Oct 2018 21:05:52 +0000"  >&lt;p&gt;cutting commented on issue #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#issuecomment-427498739&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#issuecomment-427498739&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   We can merge this in under &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt;, but it might also be a separate issue.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640574" author="githubbot" created="Sat, 6 Oct 2018 06:04:42 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#discussion_r223173046&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#discussion_r223173046&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: build.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -26,6 +26,12 @@ function usage &lt;/p&gt;
{
   exit 1
 }

&lt;p&gt;+headline(){&lt;br/&gt;
+  echo -e &quot;\e[1;34m#################################################################&quot;&lt;br/&gt;
+  echo -e &quot;##### $1 \e[1;37m&quot;&lt;br/&gt;
+  echo -e &quot;\e[1;34m#################################################################\e[0m&quot;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Good point, I&apos;ve ran into issues when running the scripts with Docker. It does not have any tty: `tput: No value for $TERM and no -T specified`. For now I&apos;ve removed the colors since it doesn&apos;t really add much value.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640576" author="githubbot" created="Sat, 6 Oct 2018 06:07:44 +0000"  >&lt;p&gt;Fokko commented on a change in pull request #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#discussion_r223173111&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#discussion_r223173111&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: lang/java/avro/build.sh&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -15,24 +15,30 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;limitations under the License.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-headline(){&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo -e &quot;\e[1;34m#################################################################&quot;&lt;/li&gt;
	&lt;li&gt;echo -e &quot;##### $1 \e[1;37m&quot;&lt;/li&gt;
	&lt;li&gt;echo -e &quot;\e[1;34m#################################################################\e[0m&quot;&lt;br/&gt;
+set -e # exit on error&lt;br/&gt;
+&lt;br/&gt;
+function usage 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+  echo &amp;quot;Usage}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-set -e&lt;br/&gt;
+case &quot;$target&quot; in&lt;br/&gt;
+  test)&lt;br/&gt;
+    mvn -B test&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  clean)&lt;br/&gt;
+    mvn clean&lt;br/&gt;
+    ;;&lt;/p&gt;

&lt;p&gt;-for lang in /avro/lang/*/&lt;br/&gt;
-do&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;headline &quot;Run tests: $lang&quot;&lt;/li&gt;
	&lt;li&gt;cd &quot;$lang&quot;&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    mvn clean&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  *)&lt;br/&gt;
+    usage&lt;br/&gt;
+esac&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ &quot;$lang&quot; = &lt;b&gt;&quot;c++&quot;&lt;/b&gt; ]]; then&lt;/li&gt;
	&lt;li&gt;# The current cpp tests are failing:&lt;/li&gt;
	&lt;li&gt;# &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;./build.sh test || true&lt;/li&gt;
	&lt;li&gt;else&lt;/li&gt;
	&lt;li&gt;./build.sh test&lt;/li&gt;
	&lt;li&gt;fi&lt;br/&gt;
 done&lt;br/&gt;
+&lt;br/&gt;
+exit 0&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Thanks, this was a copy-paste from other `build.sh` files&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16646696" author="githubbot" created="Thu, 11 Oct 2018 16:10:18 +0000"  >&lt;p&gt;Fokko commented on issue #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;WIP&amp;#93;&lt;/span&gt; Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#issuecomment-429016706&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#issuecomment-429016706&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Lets wait with this one until we get #344 in&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16680697" author="githubbot" created="Fri, 9 Nov 2018 01:13:12 +0000"  >&lt;p&gt;kojiromike commented on issue #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt;. Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#issuecomment-437214743&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#issuecomment-437214743&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Do you still want to merge this? I can&apos;t tell what this provides that wasn&apos;t in the other PR.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685174" author="githubbot" created="Tue, 13 Nov 2018 13:16:05 +0000"  >&lt;p&gt;Fokko commented on issue #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt;. Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343#issuecomment-438261770&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343#issuecomment-438261770&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Lets leave this for now.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16685175" author="githubbot" created="Tue, 13 Nov 2018 13:16:05 +0000"  >&lt;p&gt;Fokko closed pull request #343: &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2229&quot; title=&quot;Ability to test using a Docker image&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-2229&quot;&gt;&lt;del&gt;AVRO-2229&lt;/del&gt;&lt;/a&gt;. Test using a Docker image&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/avro/pull/343&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/avro/pull/343&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/.dockerignore b/.dockerignore&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 000000000..1d085cacc&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/.dockerignore&lt;br/&gt;
@@ -0,0 +1 @@&lt;br/&gt;
+**&lt;br/&gt;
diff --git a/build.sh b/build.sh&lt;br/&gt;
index 8810d6bfa..dc1277208 100755&lt;br/&gt;
&amp;#8212; a/build.sh&lt;br/&gt;
+++ b/build.sh&lt;br/&gt;
@@ -38,41 +38,35 @@ do&lt;br/&gt;
   case &quot;$target&quot; in&lt;/p&gt;

&lt;p&gt;     test)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;# run lang-specific tests&lt;/li&gt;
	&lt;li&gt;(cd lang/java; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;# install java artifacts required by other builds and interop tests&lt;/li&gt;
	&lt;li&gt;mvn install -DskipTests&lt;/li&gt;
	&lt;li&gt;(cd lang/py; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/py3; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/c; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/c++; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/csharp; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/js; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/ruby; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/php; ./build.sh test)&lt;/li&gt;
	&lt;li&gt;(cd lang/perl; ./build.sh test)&lt;br/&gt;
-&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;create interop test data&lt;br/&gt;
       mkdir -p build/interop/data&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;(cd lang/java/avro; mvn -P interop-data-generate generate-resources)&lt;/li&gt;
	&lt;li&gt;(cd lang/py; ant interop-data-generate)&lt;/li&gt;
	&lt;li&gt;(cd lang/c; ./build.sh interop-data-generate)&lt;/li&gt;
	&lt;li&gt;#(cd lang/c++; make interop-data-generate)&lt;/li&gt;
	&lt;li&gt;(cd lang/ruby; rake generate_interop)&lt;/li&gt;
	&lt;li&gt;(cd lang/php; ./build.sh interop-data-generate)&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;# run interop data tests&lt;/li&gt;
	&lt;li&gt;(cd lang/java; mvn test -P interop-data-test)&lt;/li&gt;
	&lt;li&gt;(cd lang/py; ant interop-data-test)&lt;/li&gt;
	&lt;li&gt;(cd lang/c; ./build.sh interop-data-test)&lt;/li&gt;
	&lt;li&gt;#(cd lang/c++; make interop-data-test)&lt;/li&gt;
	&lt;li&gt;(cd lang/ruby; rake interop)&lt;/li&gt;
	&lt;li&gt;(cd lang/php; ./build.sh test-interop)&lt;br/&gt;
+&lt;br/&gt;
+      # install java artifacts required by other builds and interop tests&lt;br/&gt;
+      mvn -B install -DskipTests&lt;br/&gt;
+&lt;br/&gt;
+      for buildstep in test interop-data-generate interop-data-test&lt;br/&gt;
+      do&lt;br/&gt;
+        for lang in `pwd`/lang/*/&lt;br/&gt;
+        do&lt;br/&gt;
+          headline &quot;##### Run ${buildstep} for $lang&quot;&lt;br/&gt;
+&lt;br/&gt;
+          if [[ &quot;$lang&quot; = &lt;b&gt;&quot;c++&quot;&lt;/b&gt; ]]; then&lt;br/&gt;
+            # The current cpp tests are failing:&lt;br/&gt;
+            # &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;br/&gt;
+            (cd &quot;$lang&quot;; ./build.sh ${buildstep} || true)&lt;br/&gt;
+          else&lt;br/&gt;
+            (cd &quot;$lang&quot;; ./build.sh ${buildstep})&lt;br/&gt;
+          fi&lt;br/&gt;
+        done&lt;br/&gt;
+      done&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;java needs to package the jars for the interop rpc tests&lt;br/&gt;
       (cd lang/java; mvn package -DskipTests)&lt;br/&gt;
+&lt;/li&gt;
	&lt;li&gt;run interop rpc test&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/bin/bash share/test/interop/bin/test_rpc_interop.sh&lt;br/&gt;
+      # Currently failing, need to be fixed:&lt;br/&gt;
+      # &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-2239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-2239&lt;/a&gt;&lt;br/&gt;
+      # /bin/bash share/test/interop/bin/test_rpc_interop.sh&lt;br/&gt;
     ;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     dist)&lt;br/&gt;
@@ -238,7 +232,10 @@ UserSpecificDocker&lt;/p&gt;

&lt;p&gt;     docker-test)&lt;br/&gt;
       docker build -t avro-test -f share/docker/Dockerfile .&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;docker run --rm -v ${PWD}:/avro/ avro-test&lt;br/&gt;
+      docker run --rm \&lt;br/&gt;
+          -v ${PWD}:/avro/ \&lt;br/&gt;
+          -v ${HOME}/.m2:/root/.m2 \&lt;br/&gt;
+          avro-test&lt;br/&gt;
       ;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     *)&lt;br/&gt;
@@ -247,5 +244,3 @@ UserSpecificDocker&lt;br/&gt;
   esac&lt;/p&gt;

&lt;p&gt; done&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/c+&lt;ins&gt;/build.sh b/lang/c&lt;/ins&gt;+/build.sh&lt;br/&gt;
index 17fff4089..2a018d602 100755&lt;br/&gt;
&amp;#8212; a/lang/c++/build.sh&lt;br/&gt;
+++ b/lang/c++/build.sh&lt;br/&gt;
@@ -18,7 +18,7 @@&lt;br/&gt;
 set -e # exit on error&lt;/p&gt;

&lt;p&gt; function usage {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Usage: $0 
{test|dist|clean|install|doc}
&lt;p&gt;&quot;&lt;br/&gt;
+  echo &quot;Usage: $0 &lt;/p&gt;
{test|dist|clean|install|doc|interop-data-test|interop-data-generate}
&lt;p&gt;&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
 }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -103,6 +103,14 @@ case &quot;$target&quot; in&lt;br/&gt;
     rm -rf doc test.avro test6.df&lt;br/&gt;
     ;;&lt;/p&gt;

&lt;p&gt;+  interop-data-generate)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
   install)&lt;br/&gt;
     (cd build &amp;amp;&amp;amp; cmake -G &quot;Unix Makefiles&quot; -D CMAKE_BUILD_TYPE=Release .. &amp;amp;&amp;amp; make install)&lt;br/&gt;
     ;;&lt;br/&gt;
@@ -112,5 +120,3 @@ case &quot;$target&quot; in&lt;br/&gt;
 esac&lt;/p&gt;

&lt;p&gt; done&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/c/build.sh b/lang/c/build.sh&lt;br/&gt;
index f76f03550..fcd0fe732 100755&lt;br/&gt;
&amp;#8212; a/lang/c/build.sh&lt;br/&gt;
+++ b/lang/c/build.sh&lt;br/&gt;
@@ -92,5 +92,3 @@ case &quot;$1&quot; in&lt;br/&gt;
     echo &quot;Usage: $0 &lt;/p&gt;
{interop-data-generate|interop-data-test|test|dist|clean}
&lt;p&gt;&quot;&lt;br/&gt;
     exit 1&lt;br/&gt;
 esac&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/csharp/build.sh b/lang/csharp/build.sh&lt;br/&gt;
index cb9f7fc89..b6f585c91 100755&lt;br/&gt;
&amp;#8212; a/lang/csharp/build.sh&lt;br/&gt;
+++ b/lang/csharp/build.sh&lt;br/&gt;
@@ -58,9 +58,15 @@ case &quot;$1&quot; in&lt;br/&gt;
     rm -f  TestResult.xml&lt;br/&gt;
     ;;&lt;/p&gt;

&lt;p&gt;+  interop-data-generate)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
   *)&lt;br/&gt;
     echo &quot;Usage: $0 &lt;/p&gt;
{test|clean|dist|perf}
&lt;p&gt;&quot;&lt;br/&gt;
     exit 1&lt;br/&gt;
 esac&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/share/docker/run-tests.sh b/lang/java/avro/build.sh&lt;br/&gt;
old mode 100755&lt;br/&gt;
new mode 100644&lt;br/&gt;
similarity index 61%&lt;br/&gt;
rename from share/docker/run-tests.sh&lt;br/&gt;
rename to lang/java/avro/build.sh&lt;br/&gt;
index e9919a7f6..9f051a276&lt;br/&gt;
&amp;#8212; a/share/docker/run-tests.sh&lt;br/&gt;
+++ b/lang/java/avro/build.sh&lt;br/&gt;
@@ -15,24 +15,28 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;limitations under the License.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-headline(){&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo -e &quot;\e[1;34m#################################################################&quot;&lt;/li&gt;
	&lt;li&gt;echo -e &quot;##### $1 \e[1;37m&quot;&lt;/li&gt;
	&lt;li&gt;echo -e &quot;\e[1;34m#################################################################\e[0m&quot;&lt;br/&gt;
+set -e # exit on error&lt;br/&gt;
+&lt;br/&gt;
+function usage 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+  echo &amp;quot;Usage}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-set -e&lt;br/&gt;
+case &quot;$target&quot; in&lt;br/&gt;
+  test)&lt;br/&gt;
+    mvn -B test&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  clean)&lt;br/&gt;
+    mvn clean&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    mvn clean&lt;br/&gt;
+    ;;&lt;/p&gt;

&lt;p&gt;-for lang in /avro/lang/*/&lt;br/&gt;
-do&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;headline &quot;Run tests: $lang&quot;&lt;/li&gt;
	&lt;li&gt;cd &quot;$lang&quot;&lt;br/&gt;
+  *)&lt;br/&gt;
+    usage&lt;br/&gt;
+esac&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if [[ &quot;$lang&quot; = &lt;b&gt;&quot;c++&quot;&lt;/b&gt; ]]; then&lt;/li&gt;
	&lt;li&gt;# The current cpp tests are failing:&lt;/li&gt;
	&lt;li&gt;# &lt;a href=&quot;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/AVRO/issues/AVRO-2230&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;./build.sh test || true&lt;/li&gt;
	&lt;li&gt;else&lt;/li&gt;
	&lt;li&gt;./build.sh test&lt;/li&gt;
	&lt;li&gt;fi&lt;br/&gt;
 done&lt;br/&gt;
diff --git a/lang/java/build.sh b/lang/java/build.sh&lt;br/&gt;
index 76f7f579d..e9a7d0226 100755
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/lang/java/build.sh&lt;br/&gt;
+++ b/lang/java/build.sh&lt;br/&gt;
@@ -18,7 +18,7 @@&lt;br/&gt;
 set -e # exit on error&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; function usage {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Usage: $0 
{test|dist|clean}&quot;&lt;br/&gt;
+  echo &quot;Usage: $0 {test|dist|clean|interop-data-generate|interop-data-test}&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
 }&lt;br/&gt;
 &lt;br/&gt;
@@ -54,10 +54,17 @@ case &quot;$target&quot; in&lt;br/&gt;
     mvn clean&lt;br/&gt;
     ;;&lt;br/&gt;
 &lt;br/&gt;
+&lt;br/&gt;
+  interop-data-generate)&lt;br/&gt;
+    (cd avro/; mvn -B -P interop-data-generate generate-resources)&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    mvn -B -P interop-data-test&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
   *)&lt;br/&gt;
     usage&lt;br/&gt;
 esac&lt;br/&gt;
 &lt;br/&gt;
 done&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/java/pom.xml b/lang/java/pom.xml&lt;br/&gt;
index 471c34044..e40ccd3e8 100644&lt;br/&gt;
&amp;#8212; a/lang/java/pom.xml&lt;br/&gt;
+++ b/lang/java/pom.xml&lt;br/&gt;
@@ -71,7 +71,7 @@&lt;br/&gt;
     &amp;lt;bundle-plugin-version&amp;gt;3.2.0&amp;lt;/bundle-plugin-version&amp;gt;&lt;br/&gt;
     &amp;lt;compiler-plugin.version&amp;gt;3.6.0&amp;lt;/compiler-plugin.version&amp;gt;&lt;br/&gt;
     &amp;lt;exec-plugin.version&amp;gt;1.5.0&amp;lt;/exec-plugin.version&amp;gt;&lt;br/&gt;
-    &amp;lt;jar-plugin.version&amp;gt;2.6&amp;lt;/jar-plugin.version&amp;gt;&lt;br/&gt;
+    &amp;lt;jar-plugin.version&amp;gt;3.1.0&amp;lt;/jar-plugin.version&amp;gt;&lt;br/&gt;
     &amp;lt;javacc-plugin.version&amp;gt;2.6&amp;lt;/javacc-plugin.version&amp;gt;&lt;br/&gt;
     &amp;lt;javadoc-plugin.version&amp;gt;2.10.4&amp;lt;/javadoc-plugin.version&amp;gt;&lt;br/&gt;
     &amp;lt;plugin-tools-javadoc.version&amp;gt;3.5&amp;lt;/plugin-tools-javadoc.version&amp;gt;&lt;br/&gt;
@@ -157,40 +157,6 @@&lt;br/&gt;
             &amp;lt;/lifecycleMappingMetadata&amp;gt;&lt;br/&gt;
           &amp;lt;/configuration&amp;gt;&lt;br/&gt;
         &amp;lt;/plugin&amp;gt;&lt;br/&gt;
-        &amp;lt;plugin&amp;gt;&lt;br/&gt;
-          &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
-          &amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
-          &amp;lt;version&amp;gt;${compiler-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
-          &amp;lt;configuration&amp;gt;&lt;br/&gt;
-            &amp;lt;source&amp;gt;1.8&amp;lt;/source&amp;gt;&lt;br/&gt;
-            &amp;lt;target&amp;gt;1.8&amp;lt;/target&amp;gt;&lt;br/&gt;
-          &amp;lt;/configuration&amp;gt;&lt;br/&gt;
-        &amp;lt;/plugin&amp;gt;&lt;br/&gt;
-        &amp;lt;plugin&amp;gt;&lt;br/&gt;
-          &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
-          &amp;lt;artifactId&amp;gt;maven-jar-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
-          &amp;lt;version&amp;gt;${jar-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
-&lt;br/&gt;
-          &amp;lt;!--We want to be able to resuse the test-jars for mapred&lt;br/&gt;
-              to test avro-tool&lt;br/&gt;
-              see &lt;a href=&quot;http://maven.apache.org/guides/mini/guide-attached-tests.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/guides/mini/guide-attached-tests.html&lt;/a&gt;&lt;br/&gt;
-          --&amp;gt;&lt;br/&gt;
-          &amp;lt;executions&amp;gt;&lt;br/&gt;
-            &amp;lt;execution&amp;gt;&lt;br/&gt;
-              &amp;lt;goals&amp;gt;&lt;br/&gt;
-                &amp;lt;goal&amp;gt;test-jar&amp;lt;/goal&amp;gt;&lt;br/&gt;
-              &amp;lt;/goals&amp;gt;&lt;br/&gt;
-            &amp;lt;/execution&amp;gt;&lt;br/&gt;
-          &amp;lt;/executions&amp;gt;&lt;br/&gt;
-          &amp;lt;configuration&amp;gt;&lt;br/&gt;
-            &amp;lt;archive&amp;gt;&lt;br/&gt;
-              &amp;lt;manifest&amp;gt;&lt;br/&gt;
-                &amp;lt;addDefaultSpecificationEntries&amp;gt;true&amp;lt;/addDefaultSpecificationEntries&amp;gt;&lt;br/&gt;
-                &amp;lt;addDefaultImplementationEntries&amp;gt;true&amp;lt;/addDefaultImplementationEntries&amp;gt;&lt;br/&gt;
-              &amp;lt;/manifest&amp;gt;&lt;br/&gt;
-            &amp;lt;/archive&amp;gt;&lt;br/&gt;
-          &amp;lt;/configuration&amp;gt;&lt;br/&gt;
-        &amp;lt;/plugin&amp;gt;&lt;br/&gt;
         &amp;lt;plugin&amp;gt;&lt;br/&gt;
           &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
           &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
@@ -278,6 +244,40 @@&lt;br/&gt;
       &amp;lt;/plugins&amp;gt;&lt;br/&gt;
     &amp;lt;/pluginManagement&amp;gt;&lt;br/&gt;
     &amp;lt;plugins&amp;gt;&lt;br/&gt;
+      &amp;lt;plugin&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;${compiler-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+        &amp;lt;configuration&amp;gt;&lt;br/&gt;
+          &amp;lt;source&amp;gt;1.8&amp;lt;/source&amp;gt;&lt;br/&gt;
+          &amp;lt;target&amp;gt;1.8&amp;lt;/target&amp;gt;&lt;br/&gt;
+        &amp;lt;/configuration&amp;gt;&lt;br/&gt;
+      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
+      &amp;lt;plugin&amp;gt;&lt;br/&gt;
+        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+        &amp;lt;artifactId&amp;gt;maven-jar-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;${jar-plugin.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+        &amp;lt;!--We want to be able to resuse the test-jars for mapred&lt;br/&gt;
+            to test avro-tool&lt;br/&gt;
+            see &lt;a href=&quot;http://maven.apache.org/guides/mini/guide-attached-tests.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/guides/mini/guide-attached-tests.html&lt;/a&gt;&lt;br/&gt;
+        --&amp;gt;&lt;br/&gt;
+        &amp;lt;executions&amp;gt;&lt;br/&gt;
+          &amp;lt;execution&amp;gt;&lt;br/&gt;
+            &amp;lt;goals&amp;gt;&lt;br/&gt;
+              &amp;lt;goal&amp;gt;test-jar&amp;lt;/goal&amp;gt;&lt;br/&gt;
+            &amp;lt;/goals&amp;gt;&lt;br/&gt;
+          &amp;lt;/execution&amp;gt;&lt;br/&gt;
+        &amp;lt;/executions&amp;gt;&lt;br/&gt;
+        &amp;lt;configuration&amp;gt;&lt;br/&gt;
+          &amp;lt;archive&amp;gt;&lt;br/&gt;
+            &amp;lt;manifest&amp;gt;&lt;br/&gt;
+              &amp;lt;addDefaultSpecificationEntries&amp;gt;true&amp;lt;/addDefaultSpecificationEntries&amp;gt;&lt;br/&gt;
+              &amp;lt;addDefaultImplementationEntries&amp;gt;true&amp;lt;/addDefaultImplementationEntries&amp;gt;&lt;br/&gt;
+            &amp;lt;/manifest&amp;gt;&lt;br/&gt;
+          &amp;lt;/archive&amp;gt;&lt;br/&gt;
+        &amp;lt;/configuration&amp;gt;&lt;br/&gt;
+      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
       &amp;lt;plugin&amp;gt;&lt;br/&gt;
         &amp;lt;groupId&amp;gt;org.apache.felix&amp;lt;/groupId&amp;gt;&lt;br/&gt;
         &amp;lt;artifactId&amp;gt;maven-bundle-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
diff --git a/lang/js/build.sh b/lang/js/build.sh&lt;br/&gt;
index 45a31f5a4..4af009edb 100755&lt;br/&gt;
&amp;#8212; a/lang/js/build.sh&lt;br/&gt;
+++ b/lang/js/build.sh&lt;br/&gt;
@@ -24,17 +24,26 @@ case &quot;$1&quot; in&lt;br/&gt;
     npm install&lt;br/&gt;
     npm run cover&lt;br/&gt;
     ;;&lt;br/&gt;
+&lt;br/&gt;
   dist)&lt;br/&gt;
     npm pack&lt;br/&gt;
     mkdir -p ../../dist/js&lt;br/&gt;
     mv avro-js-*.tgz ../../dist/js&lt;br/&gt;
     ;;&lt;br/&gt;
+&lt;br/&gt;
   clean)&lt;br/&gt;
     rm -rf coverage&lt;br/&gt;
     ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-generate)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
   *)&lt;br/&gt;
-    echo &quot;Usage: $0 {test|dist|clean}
&lt;p&gt;&quot; &amp;gt;&amp;amp;2&lt;br/&gt;
+    echo &quot;Usage: $0 &lt;/p&gt;
{test|dist|clean|interop-data-generate|interop-data-test}&quot; &amp;gt;&amp;amp;2&lt;br/&gt;
     exit 1&lt;br/&gt;
 esac&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/perl/build.sh b/lang/perl/build.sh&lt;br/&gt;
index d2028ec9a..47d154b00 100755&lt;br/&gt;
&amp;#8212; a/lang/perl/build.sh&lt;br/&gt;
+++ b/lang/perl/build.sh&lt;br/&gt;
@@ -56,10 +56,16 @@ case &quot;$target&quot; in&lt;br/&gt;
     do_clean&lt;br/&gt;
     ;;&lt;br/&gt;
 &lt;br/&gt;
+  interop-data-generate)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
   *)&lt;br/&gt;
     usage&lt;br/&gt;
 esac&lt;br/&gt;
 &lt;br/&gt;
 done&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/php/build.sh b/lang/php/build.sh&lt;br/&gt;
index 6ea7bbf87..63a8cf4b6 100755&lt;br/&gt;
&amp;#8212; a/lang/php/build.sh&lt;br/&gt;
+++ b/lang/php/build.sh&lt;br/&gt;
@@ -68,6 +68,3 @@ case &quot;$1&quot; in&lt;br/&gt;
      *)&lt;br/&gt;
        echo &quot;Usage: $0 {interop-data-generate|test-interop|test|dist|clean}&quot;&lt;br/&gt;
 esac&lt;br/&gt;
-&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/py/build.sh b/lang/py/build.sh&lt;br/&gt;
index 0169b0bd8..6b29c67ce 100755&lt;br/&gt;
&amp;#8212; a/lang/py/build.sh&lt;br/&gt;
+++ b/lang/py/build.sh&lt;br/&gt;
@@ -18,7 +18,7 @@&lt;br/&gt;
 set -e # exit on error&lt;br/&gt;
 &lt;br/&gt;
 function usage {&lt;br/&gt;
-  echo &quot;Usage: $0 {test|dist|clean}&quot;&lt;br/&gt;
+  echo &quot;Usage: $0 {test|dist|clean|interop-data-generate|interop-data-test}
&lt;p&gt;&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
 }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -51,10 +51,16 @@ case &quot;$target&quot; in&lt;br/&gt;
     rm -rf userlogs/&lt;br/&gt;
     ;;&lt;/p&gt;

&lt;p&gt;+  interop-data-generate)&lt;br/&gt;
+    ant interop-data-generate&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    ant interop-data-test&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
   *)&lt;br/&gt;
     usage&lt;br/&gt;
 esac&lt;/p&gt;

&lt;p&gt; done&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/py3/build.sh b/lang/py3/build.sh&lt;br/&gt;
index fdb457aaa..c8c5312ca 100755&lt;br/&gt;
&amp;#8212; a/lang/py3/build.sh&lt;br/&gt;
+++ b/lang/py3/build.sh&lt;br/&gt;
@@ -18,7 +18,7 @@&lt;br/&gt;
 set -e # exit on error&lt;/p&gt;

&lt;p&gt; function usage {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo &quot;Usage: $0 
{test|dist|clean}&quot;&lt;br/&gt;
+  echo &quot;Usage: $0 {test|dist|clean|interop-data-generate|interop-data-test}&quot;&lt;br/&gt;
   exit 1&lt;br/&gt;
 }&lt;br/&gt;
 &lt;br/&gt;
@@ -56,10 +56,16 @@ case &quot;$target&quot; in&lt;br/&gt;
     do_clean&lt;br/&gt;
     ;;&lt;br/&gt;
 &lt;br/&gt;
+  interop-data-generate)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
+  interop-data-test)&lt;br/&gt;
+    echo &quot;Not (yet) implemented&quot;&lt;br/&gt;
+    ;;&lt;br/&gt;
+&lt;br/&gt;
   *)&lt;br/&gt;
     usage&lt;br/&gt;
 esac&lt;br/&gt;
 &lt;br/&gt;
 done&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/lang/ruby/build.sh b/lang/ruby/build.sh&lt;br/&gt;
index ed8a61e4b..aa0ee4b3c 100755&lt;br/&gt;
&amp;#8212; a/lang/ruby/build.sh&lt;br/&gt;
+++ b/lang/ruby/build.sh&lt;br/&gt;
@@ -42,10 +42,16 @@ case &quot;$1&quot; in&lt;br/&gt;
         rm -rf tmp avro.gemspec data.avr&lt;br/&gt;
        ;;&lt;br/&gt;
 &lt;br/&gt;
+     interop-data-generate)&lt;br/&gt;
+        rake generate_interop&lt;br/&gt;
+       ;;&lt;br/&gt;
+&lt;br/&gt;
+     interop-data-test)&lt;br/&gt;
+        rake interop&lt;br/&gt;
+       ;;&lt;br/&gt;
+&lt;br/&gt;
      *)&lt;br/&gt;
-       echo &quot;Usage: $0 {test|dist|clean}
&lt;p&gt;&quot;&lt;br/&gt;
+       echo &quot;Usage: $0 &lt;/p&gt;
{test|dist|clean|interop-data-generate|interop-data-test}
&lt;p&gt;&quot;&lt;br/&gt;
        exit 1&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; esac&lt;br/&gt;
-&lt;br/&gt;
-exit 0&lt;br/&gt;
diff --git a/pom.xml b/pom.xml&lt;br/&gt;
index e3f48442c..12ce9eafb 100644&lt;br/&gt;
&amp;#8212; a/pom.xml&lt;br/&gt;
+++ b/pom.xml&lt;br/&gt;
@@ -299,6 +299,7 @@&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;lang/csharp/TestResult.xml&amp;lt;/exclude&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;lang/csharp/src/apache/&lt;b&gt;/obj/&lt;/b&gt;&lt;b&gt;/&lt;/b&gt;.csproj.FilesWrittenAbsolute.txt&amp;lt;/exclude&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;lang/js/coverage/**&amp;lt;/exclude&amp;gt;&lt;br/&gt;
+                &amp;lt;exclude&amp;gt;.dockerignore&amp;lt;/exclude&amp;gt;&lt;br/&gt;
                 &amp;lt;!-- text documentation files --&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;CHANGES.txt&amp;lt;/exclude&amp;gt;&lt;br/&gt;
                 &amp;lt;exclude&amp;gt;DIST_README.txt&amp;lt;/exclude&amp;gt;&lt;br/&gt;
diff --git a/share/docker/Dockerfile b/share/docker/Dockerfile&lt;br/&gt;
index de09220a1..12263436e 100644&lt;br/&gt;
&amp;#8212; a/share/docker/Dockerfile&lt;br/&gt;
+++ b/share/docker/Dockerfile&lt;br/&gt;
@@ -19,7 +19,7 @@&lt;/p&gt;

&lt;p&gt; FROM java:8-jdk&lt;/p&gt;

&lt;p&gt;-WORKDIR /root&lt;br/&gt;
+WORKDIR /avro/&lt;/p&gt;

&lt;p&gt; SHELL &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;/bin/bash&amp;quot;, &amp;quot;-o&amp;quot;, &amp;quot;pipefail&amp;quot;, &amp;quot;-c&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;@@ -105,4 +105,4 @@ RUN gem install echoe yajl-ruby multi_json snappy&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Install global Node modules&lt;br/&gt;
 RUN npm install -g grunt-cli&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-CMD &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;/avro/share/docker/run-tests.sh&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
+CMD &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;./build.sh&amp;quot;, &amp;quot;test&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Sep 2018 17:27:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yg7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
