<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:16:11 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2011-10-5+AND+created+%3C%3D+2011-10-12+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="16" total="16"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-908] Add an option to build avrocpp as a static library</title>
                <link>https://issues.apache.org/jira/browse/AVRO-908</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Use BUILD_SHARED_LIBS variable to control whether Avro-c++ library is built as a shared library or as a static library. That way, people who want static library can use &apos;cmake -DBUILD_SHARED_LIBS=OFF&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525965">AVRO-908</key>
            <summary>Add an option to build avrocpp as a static library</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nsabovic">Nebojsa Sabovic</assignee>
                                    <reporter username="nsabovic">Nebojsa Sabovic</reporter>
                        <labels>
                            <label>cmake</label>
                    </labels>
                <created>Wed, 5 Oct 2011 20:50:44 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:01 +0000</updated>
                            <resolved>Sun, 9 Oct 2011 08:22:39 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13122600" author="thiru_mg" created="Fri, 7 Oct 2011 07:55:28 +0000"  >&lt;p&gt;Thanks Nebojsa for addressing this issue. &lt;/p&gt;

&lt;p&gt;The patch looks good. But instead of building either static or shared libraries, I think, it is better to build both. The user can choose to use either of them based on his needs. The new patch builds both the libraries. But unit tests are run against only the shared version.&lt;/p&gt;

&lt;p&gt;I&apos;ll check in after receiving your feedback.&lt;/p&gt;</comment>
                            <comment id="13123647" author="thiru_mg" created="Sun, 9 Oct 2011 08:22:39 +0000"  >&lt;p&gt;Committed revision 1180563.&lt;/p&gt;

&lt;p&gt;Thank you Nebojsa.&lt;/p&gt;

&lt;p&gt;It now builds both static and shared libraries. For linking with static library the user needs to give &lt;tt&gt;- lavrocpp_s&lt;/tt&gt; instead of &lt;tt&gt;- lavrocpp&lt;/tt&gt;. In addition the user may have to give one or more of &lt;tt&gt;- lboost_regex&lt;/tt&gt;, &lt;tt&gt;- lboost_filesystem&lt;/tt&gt; and &lt;tt&gt;- lboost_system&lt;/tt&gt; depending on which parts of Avro library is used.&lt;/p&gt;</comment>
                            <comment id="13124301" author="nsabovic" created="Mon, 10 Oct 2011 17:08:27 +0000"  >&lt;p&gt;Hi Thiruvalluvan,&lt;/p&gt;

&lt;p&gt;Your should additionally add  STATIC in the avrocpp_s target, otherwise projects with BUILD_SHARED_LIBS=OFF (inherited, for example) will end up with two shared libraries.&lt;/p&gt;</comment>
                            <comment id="13124348" author="thiru_mg" created="Mon, 10 Oct 2011 18:07:13 +0000"  >&lt;p&gt;Good point.&lt;/p&gt;

&lt;p&gt;Fixed and committed revision 1181107. Thanks Nebojsa once again.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498122" name="AVRO-908-rev-2.patch" size="849" author="thiru_mg" created="Fri, 7 Oct 2011 07:55:27 +0000"/>
                            <attachment id="12497892" name="AVRO-908.patch" size="809" author="nsabovic" created="Wed, 5 Oct 2011 20:52:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Oct 2011 07:55:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46593</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e37j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80282</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-909] change generated getter methods for string fields to return java.lang.String instead of Utf8</title>
                <link>https://issues.apache.org/jira/browse/AVRO-909</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;A field X of type string might generate:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; CharSequence x;                &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; back compatibility
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setX(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (x &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Utf8)
    x.set(s);
  &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
    x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Utf8(s);
}
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getX() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; x.toString(); }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The accessor methods have not yet been released, so this would be a compatible change in 1.6.  Applications that wished to use Utf8 directly for performance could still use the field directly.  Utf8 could be improved to lazily convert between byte[] and String representations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525967">AVRO-909</key>
            <summary>change generated getter methods for string fields to return java.lang.String instead of Utf8</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12504206">AVRO-803</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Oct 2011 20:52:29 +0000</created>
                <updated>Fri, 7 Oct 2011 20:23:20 +0000</updated>
                            <resolved>Fri, 7 Oct 2011 19:28:49 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13123100" author="cutting" created="Fri, 7 Oct 2011 19:28:49 +0000"  >&lt;p&gt;This is addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-803&quot; title=&quot;Java generated Avro classes make using Avro painful and surprising&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-803&quot;&gt;&lt;del&gt;AVRO-803&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e37r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-910] remove build dependency on protoc</title>
                <link>https://issues.apache.org/jira/browse/AVRO-910</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The protobuf code currently requires that the protobuf compiler (protoc) is installed for tests to run.  Instead we should just commit the compiler output test code.  This also insulates tests from differences in the version of protoc installed and the version of the runtime library specified in Maven.  This latter issue is currently breaking Jenkins.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525971">AVRO-910</key>
            <summary>remove build dependency on protoc</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Oct 2011 21:12:59 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:04 +0000</updated>
                            <resolved>Wed, 5 Oct 2011 21:41:24 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13121484" author="cutting" created="Wed, 5 Oct 2011 21:14:25 +0000"  >&lt;p&gt;Here&apos;s a patch.&lt;/p&gt;</comment>
                            <comment id="13121485" author="cutting" created="Wed, 5 Oct 2011 21:14:54 +0000"  >&lt;p&gt;I will commit this soon to (hopefully) fix the Jenkins build.&lt;/p&gt;</comment>
                            <comment id="13121509" author="cutting" created="Wed, 5 Oct 2011 21:41:24 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12497896" name="AVRO-910.patch" size="60566" author="cutting" created="Wed, 5 Oct 2011 21:14:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e37z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80284</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-911] remove object reuse from Java APIs</title>
                <link>https://issues.apache.org/jira/browse/AVRO-911</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Avro&apos;s Java APIs were designed to permit object reuse when reading with the assumption that would provide performance advantages.  In particular, the old parameter in DatumReader&amp;lt;T&amp;gt;.read(T old, Decoder), the Utf8 class, and the GenericArray.peek() method were all designed for this purpose.  But I am unable to see significant performance improvements when objects are reused.  I tried modifying Perf.java&apos;s GenericTest to reuse records, and its StringTest to not reuse Utf8 instances and, in both cases, performance is not substantially altered.&lt;/p&gt;

&lt;p&gt;If we were to remove these then issues such as &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-803&quot; title=&quot;Java generated Avro classes make using Avro painful and surprising&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-803&quot;&gt;&lt;del&gt;AVRO-803&lt;/del&gt;&lt;/a&gt; would disappear.  Always using java.lang.String instead of Utf8 would remove a lot of user confusion. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12525984">AVRO-911</key>
            <summary>remove object reuse from Java APIs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Oct 2011 23:14:34 +0000</created>
                <updated>Fri, 7 Oct 2011 20:27:19 +0000</updated>
                            <resolved>Fri, 7 Oct 2011 19:31:32 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13121580" author="tlipcon" created="Wed, 5 Oct 2011 23:20:20 +0000"  >&lt;p&gt;Which JVM are you using? Is it one that enables escape analysis by default? Do the perf tests run long enough to trigger several rounds of young generation GC? Performance should be equal except that object reuse will have fewer young gen GCs (and thus have better throughput in the long run)&lt;/p&gt;</comment>
                            <comment id="13121582" author="cutting" created="Wed, 5 Oct 2011 23:22:19 +0000"  >&lt;p&gt;Does anyone have benchmarks where Avro&apos;s object reuse of Utf8&apos;s demonstrates a significant performance advantage?&lt;/p&gt;</comment>
                            <comment id="13121585" author="cutting" created="Wed, 5 Oct 2011 23:23:00 +0000"  >&lt;p&gt;Todd: I&apos;ll try some longer runs with verbose GC.&lt;/p&gt;</comment>
                            <comment id="13121601" author="cutting" created="Wed, 5 Oct 2011 23:40:28 +0000"  >&lt;p&gt;Enabling verbose GC output shows that there are &amp;gt;~20 GCs during a benchmark, so I think its running long enough.  Dunno about the escape analysis.  I&apos;m using JDK 6 and Scott&apos;s Perf.java with -G and -s, with and without the attached patch.&lt;/p&gt;</comment>
                            <comment id="13121604" author="tlipcon" created="Wed, 5 Oct 2011 23:50:58 +0000"  >&lt;p&gt;Which JDK6? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13121618" author="cutting" created="Thu, 6 Oct 2011 00:02:27 +0000"  >&lt;p&gt;java version &quot;1.6.0_22&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_22-b04)&lt;br/&gt;
Java HotSpot(TM) Server VM (build 17.1-b03, mixed mode)&lt;/p&gt;</comment>
                            <comment id="13121625" author="tlipcon" created="Thu, 6 Oct 2011 00:10:42 +0000"  >&lt;p&gt;hm, ok, EscapeAnalysis is on by default starting with u23 afaik. So I&apos;m surprised you don&apos;t see any real difference.&lt;/p&gt;</comment>
                            <comment id="13121630" author="milindb" created="Thu, 6 Oct 2011 00:30:51 +0000"  >&lt;p&gt;I always believed that object reuse (as was done in mapreduce a few years ago), was premature optimization. Indeed, in mapreduce too, even now people get surprised when iter.getNext() returns the same object reference everytime, and causes a lot of headache. So, I think removing object reuse in Avro is a great step forward.&lt;/p&gt;</comment>
                            <comment id="13121635" author="tlipcon" created="Thu, 6 Oct 2011 00:42:28 +0000"  >&lt;p&gt;At least as of about a year ago, reusing objects was still worth doing. See &quot;Tip 6&quot; on this blog post I did: &lt;a href=&quot;http://www.cloudera.com/blog/2009/12/7-tips-for-improving-mapreduce-performance/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.cloudera.com/blog/2009/12/7-tips-for-improving-mapreduce-performance/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13121643" author="milindb" created="Thu, 6 Oct 2011 01:01:06 +0000"  >&lt;p&gt;Todd, indeed GC kicking in for a lot of objects will slow tasks somewhat. Where I came from, the basic data type that was being fed as a value was not a simple int or text. It was a complex structure that had a map, a list of maps, and a map of maps. The Value object reuse in reducer meant that only the top level object was reused. Everything underneath had to be reallocated anyway.&lt;/p&gt;

&lt;p&gt;Plus number of people cloning their objects were doing it incorrectly.&lt;/p&gt;

&lt;p&gt;Considering the complexity, and as you correctly point out in your blog, making sure that GC does not trigger during the lifetime of the task by allocating bigger heap, meant that reusing the objects were not a worthwhile optimization.&lt;/p&gt;</comment>
                            <comment id="13121674" author="scott_carey" created="Thu, 6 Oct 2011 02:06:25 +0000"  >&lt;p&gt;Object reuse is also hard in some of the work that I am doing (or... have not had time to do in months) in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-859&quot; title=&quot;Java: Data Flow Overhaul -- Composition and Symmetry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-859&quot;&gt;AVRO-859&lt;/a&gt;.  Trying to apply object re-use to complicated object graphs is not very beneficial.  Additionally making such object graphs as immutable as possible has performance gains of its own and simplifies code.&lt;/p&gt;

&lt;p&gt;In simple cases, re-use can have big gains.  These mostly boil down to avoiding boxing of small primitives.  Here, you go from allocating something to allocating nothing.&lt;br/&gt;
For Utf8, we have to copy out a byte[] from the stream, so the Utf8 object allocation is only a small portion of the total allocated, unless it is an empty string and we were to re-use an empty byte[].&lt;/p&gt;

&lt;p&gt;Delaying or avoiding Utf8 &amp;lt;-&amp;gt; String conversion is very beneficial however.  I use Utf8 in many places now for this purpose.  &lt;br/&gt;
I support Avro removing object re-use for the general case.  Specializations for mutable boxed primitives or even simply returning / accepting primitives are something we can add later.&lt;br/&gt;
The low level read and write should have options for dealing with String as well as Utf8.  Higher level APIs can choose either (for example, one might have two different SpecificCompiler templates, or switch the type based on an annotation in AvroIDL).&lt;/p&gt;


&lt;p&gt;As far as EscapeAnalysis introducing object allocation elision, this won&apos;t affect most use cases here.  It would if you create a new object, call a method on it, then throw it away within the scope of a method or loop, and in a few slightly larger scopes.&lt;/p&gt;</comment>
                            <comment id="13121695" author="dkaminsky" created="Thu, 6 Oct 2011 03:15:45 +0000"  >&lt;p&gt;Object reuse is not about a direct throughput/latency improvement, it&apos;s about a consistent processing velocity. Unpredictable GC causes disruptions in processing speed, which is unacceptable for real time systems (at least, from the perspective of my current project), where we are measuring latency in sub-millisecond scale.&lt;/p&gt;

&lt;p&gt;I would support refactoring the reuse behavior into a subclass of the existing reader, but not eliminating it.&lt;/p&gt;</comment>
                            <comment id="13122209" author="scott_carey" created="Thu, 6 Oct 2011 20:07:08 +0000"  >&lt;p&gt;For a record that is filled with primitives, re-use is also valuable.  There are a few cases where it does not work so well:&lt;br/&gt;
Unions&lt;br/&gt;
string/bytes&lt;br/&gt;
Maps&lt;/p&gt;

&lt;p&gt;In the above cases either it is difficult or unlikely for reuse to be effective (Unions, Maps) or re-use has small benefit and causes unexpected behavior (String, Bytes)&lt;/p&gt;

&lt;p&gt;What about the following simplification:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Utf8 is not re-used.  (we may be able to re-use the empty string with itself, or make Utf8 immutable and re-use equivalent copies, but that is not in scope here)&lt;/li&gt;
	&lt;li&gt;byte arrays are not re-used&lt;/li&gt;
	&lt;li&gt;maps are not re-used&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Arrays and Records, where the biggest gain of re-use is possible, remains.&lt;/p&gt;
</comment>
                            <comment id="13123104" author="cutting" created="Fri, 7 Oct 2011 19:31:32 +0000"  >&lt;p&gt;We have another way to resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-813&quot; title=&quot;EOFException is thrown during normal operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-813&quot;&gt;AVRO-813&lt;/a&gt; without removing reuse.  Several folks seem to want to keep reuse in Avro&apos;s Java API&apos;s, so I will resolve this as &quot;Won&apos;t Fix&quot;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12504206">AVRO-803</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12497923" name="perf-reuse.patch" size="1095" author="cutting" created="Wed, 5 Oct 2011 23:40:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Oct 2011 23:20:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49310</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e387:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-912] Mapreduce tether test fails on Windows</title>
                <link>https://issues.apache.org/jira/browse/AVRO-912</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The problems are:&lt;br/&gt;
1. The executable filename is passed around as a URL. Windows filenames are valid URLs.&lt;br/&gt;
2. Typical windows user&apos;s home directory is &lt;tt&gt;c:\Documents and Settings\username&lt;/tt&gt;. Maven puts the downloaded jar files under &lt;tt&gt;$HOME/.m2&lt;/tt&gt;. So the classpath has several directories with space in their names. Splitting command line arguments using space generates invalid classpath.&lt;br/&gt;
3. Hadoop&apos;s &lt;tt&gt;TaskLog.captureOutAndError()&lt;/tt&gt; generates command line for unix systems using bash. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12526019">AVRO-912</key>
            <summary>Mapreduce tether test fails on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Oct 2011 09:49:52 +0000</created>
                <updated>Tue, 13 Dec 2011 19:06:49 +0000</updated>
                            <resolved>Fri, 7 Oct 2011 07:21:57 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13121823" author="thiru_mg" created="Thu, 6 Oct 2011 10:24:05 +0000"  >&lt;p&gt;The attached patch addresses problems 1 and 2 by:&lt;br/&gt;
1. Using &lt;tt&gt;File&lt;/tt&gt; instead of URL for passing executable filename.&lt;br/&gt;
2. Uses a &lt;tt&gt;List&amp;lt;String&amp;gt;&lt;/tt&gt; instead of &lt;tt&gt;String&lt;/tt&gt; to pass command arguments. While serializing the commands arguments into &lt;tt&gt;JobConf&lt;/tt&gt;, it uses &lt;tt&gt;\n&lt;/tt&gt; as delimiter.&lt;/p&gt;

&lt;p&gt;The patch does not address the problem 3. Java 6&apos;s &lt;tt&gt;ProcessBuilder&lt;/tt&gt; does not have a mechanism to redirect output or error. (&lt;tt&gt;ProcessBuilder&lt;/tt&gt; in Java 7 has a platform independent solution, though). But the current thing using bash works if the windows machine has &lt;tt&gt;cygwin&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13122121" author="cutting" created="Thu, 6 Oct 2011 18:08:33 +0000"  >&lt;p&gt;+1 Changes look good to me and tests pass on Linux.&lt;/p&gt;</comment>
                            <comment id="13122584" author="thiru_mg" created="Fri, 7 Oct 2011 07:21:57 +0000"  >&lt;p&gt;Committed revision 1179946.&lt;/p&gt;

&lt;p&gt;Thank you Doug for reviewing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12497970" name="AVRO-912.patch" size="5959" author="thiru_mg" created="Thu, 6 Oct 2011 10:24:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Oct 2011 18:08:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e38f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-913] CMake/C++ build should work for out-of-tree builds</title>
                <link>https://issues.apache.org/jira/browse/AVRO-913</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;C++ CMake file sets the build directory to the source root and then forces build output into build/ directory under root. This breaks out-of-tree builds.&lt;/p&gt;

&lt;p&gt;CMake already has a facility for choosing build directory. We should use it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526118">AVRO-913</key>
            <summary>CMake/C++ build should work for out-of-tree builds</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nsabovic">Nebojsa Sabovic</assignee>
                                    <reporter username="nsabovic">Nebojsa Sabovic</reporter>
                        <labels>
                            <label>cmake</label>
                    </labels>
                <created>Thu, 6 Oct 2011 21:10:41 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:07 +0000</updated>
                            <resolved>Wed, 12 Oct 2011 17:12:11 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13122300" author="nsabovic" created="Thu, 6 Oct 2011 21:12:33 +0000"  >&lt;p&gt;Use cmake_bin_dir/cmake_source_dir for supporting out-of-tree builds&lt;/p&gt;</comment>
                            <comment id="13124031" author="thiru_mg" created="Mon, 10 Oct 2011 12:20:31 +0000"  >&lt;p&gt;If there are no objections, I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="13125977" author="thiru_mg" created="Wed, 12 Oct 2011 17:12:11 +0000"  >&lt;p&gt;Committed revision 1182482.&lt;/p&gt;</comment>
                            <comment id="13125988" author="thiru_mg" created="Wed, 12 Oct 2011 17:35:11 +0000"  >&lt;p&gt;Thank you Nebojsa.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498069" name="AVRO-913.patch" size="6267" author="nsabovic" created="Thu, 6 Oct 2011 21:12:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Oct 2011 12:20:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49783</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e38n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-914] SpecificResponder casts Throwable to Exception; fails for OutOfMemoryError</title>
                <link>https://issues.apache.org/jira/browse/AVRO-914</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I have the following stack frame in an application i&apos;m working with:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;java.lang.ClassCastException: java.lang.OutOfMemoryError cannot be cast to java.lang.Exception &lt;br/&gt;
at org.apache.avro.ipc.specific.SpecificResponder.respond(SpecificResponder.java:90) &lt;br/&gt;
at org.apache.avro.ipc.Responder.respond(Responder.java:149) &lt;br/&gt;
at org.apache.avro.ipc.SocketServer$Connection.run(SocketServer.java:116) &lt;br/&gt;
at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nothing too surprising, here&apos;s the code:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  @Override
  public Object respond(Message message, Object request) throws Exception {
...
    } catch (InvocationTargetException e) {
      throw (Exception)e.getTargetException();
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s probably a bug that this ends up with a ClassCastException.  Any suggestions?  I don&apos;t think we can change the signature to Exception.  We could check instanceof and wrap the Throwable if it&apos;s not an Exception?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526156">AVRO-914</key>
            <summary>SpecificResponder casts Throwable to Exception; fails for OutOfMemoryError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="philip">Philip Zeyliger</assignee>
                                    <reporter username="philip">Philip Zeyliger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Oct 2011 07:19:57 +0000</created>
                <updated>Tue, 11 Sep 2012 21:01:08 +0000</updated>
                            <resolved>Fri, 7 Oct 2011 20:42:31 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13122582" author="philip" created="Fri, 7 Oct 2011 07:20:51 +0000"  >&lt;p&gt;Attached patch does instanceof before cast.  Wraps if it can&apos;t cast.&lt;/p&gt;

&lt;p&gt;It passes &quot;mvn test&quot;.&lt;/p&gt;</comment>
                            <comment id="13123158" author="cutting" created="Fri, 7 Oct 2011 20:42:31 +0000"  >&lt;p&gt;Looks good to me.  I committed it.  Thanks, Philip!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12607122">AVRO-1156</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12498119" name="AVRO-914.patch.txt" size="930" author="philip" created="Fri, 7 Oct 2011 07:20:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Oct 2011 20:42:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e38v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-915] Large number of warnings in C++ buildsc</title>
                <link>https://issues.apache.org/jira/browse/AVRO-915</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;By default, -Wall is disabled for g++. If enabled, it gives a large number of warnings. This ticket is to fix those warnings.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526313">AVRO-915</key>
            <summary>Large number of warnings in C++ buildsc</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2011 11:40:51 +0000</created>
                <updated>Tue, 1 Nov 2011 18:35:55 +0000</updated>
                            <resolved>Wed, 12 Oct 2011 15:58:41 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13123460" author="thiru_mg" created="Sat, 8 Oct 2011 12:27:52 +0000"  >&lt;p&gt;One patch demonstrates the problem and the other fixes the problem.&lt;/p&gt;

&lt;p&gt;The warnings due to &lt;tt&gt;offsetof&lt;/tt&gt; macro cannot be suppressed because &lt;tt&gt;offsetof&lt;/tt&gt; is the part of the design for serializing objects in the previous C++ API. We&apos;ll deprecate the API some day.&lt;/p&gt;</comment>
                            <comment id="13124030" author="thiru_mg" created="Mon, 10 Oct 2011 12:20:16 +0000"  >&lt;p&gt;If there are no objections, I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="13125944" author="thiru_mg" created="Wed, 12 Oct 2011 15:58:42 +0000"  >&lt;p&gt;Committed revision 1182454.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498299" name="AVRO-915-prob.patch" size="680" author="thiru_mg" created="Sat, 8 Oct 2011 12:27:52 +0000"/>
                            <attachment id="12498300" name="AVRO-915-soln.patch" size="9264" author="thiru_mg" created="Sat, 8 Oct 2011 12:27:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e393:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-916] 0xff in binary stream is interpreted as end-of-stream</title>
                <link>https://issues.apache.org/jira/browse/AVRO-916</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When read byte by byte, &lt;tt&gt;BufferStreambuf.hh&lt;/tt&gt; return int -1 when it encounters 0xff in the stream. This is being interpreted as end-of-stream elsewhere causing problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526320">AVRO-916</key>
            <summary>0xff in binary stream is interpreted as end-of-stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2011 12:44:18 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:02 +0000</updated>
                            <resolved>Wed, 12 Oct 2011 13:05:30 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13124029" author="thiru_mg" created="Mon, 10 Oct 2011 12:19:52 +0000"  >&lt;p&gt;If there are no objections, I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="13125808" author="thiru_mg" created="Wed, 12 Oct 2011 13:05:30 +0000"  >&lt;p&gt;Committed revision 1182347.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498309" name="AVRO-916.patch" size="551" author="thiru_mg" created="Sat, 8 Oct 2011 12:46:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e39b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-917] Avrogencpp does not insert avro prefix for avro headers in the generated files.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-917</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The generated files have include directives like &lt;tt&gt;#include &quot;Specific.hh&quot;&lt;/tt&gt;. This forces the users to add things like &lt;tt&gt;-I/usr/local/avro&lt;/tt&gt; to their build scripts.If, instead, the generated code had &lt;tt&gt;#include &quot;avro/Specific.hh&quot;&lt;/tt&gt; the users can use something like &lt;tt&gt;-I/usr/local&lt;/tt&gt; (or omit it altogether because many systems may already have &lt;tt&gt;/usr/local&lt;/tt&gt; in their include paths).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526322">AVRO-917</key>
            <summary>Avrogencpp does not insert avro prefix for avro headers in the generated files.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2011 13:15:39 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:02 +0000</updated>
                            <resolved>Wed, 12 Oct 2011 12:59:30 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13123535" author="thiru_mg" created="Sat, 8 Oct 2011 17:15:22 +0000"  >&lt;p&gt;&lt;tt&gt;avrogencpp&lt;/tt&gt; now takes an additional argument &lt;tt&gt;- p&lt;/tt&gt; or &lt;tt&gt;-&lt;del&gt;include-prefix&lt;/tt&gt; which is the prefix for header files. If omitted, &lt;tt&gt;avro/&lt;/tt&gt; becomes the prefix. If set to {&lt;/del&gt;} no prefix is added.&lt;/p&gt;</comment>
                            <comment id="13123536" author="thiru_mg" created="Sat, 8 Oct 2011 17:17:26 +0000"  >&lt;p&gt;Jira&apos;s formatting took away a -. It should read if set to -, no prefix is added.&lt;/p&gt;</comment>
                            <comment id="13124028" author="thiru_mg" created="Mon, 10 Oct 2011 12:19:17 +0000"  >&lt;p&gt;If there are no objections, I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="13125807" author="thiru_mg" created="Wed, 12 Oct 2011 12:59:30 +0000"  >&lt;p&gt;Committed revision 1182341.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498321" name="AVRO-917.patch" size="3392" author="thiru_mg" created="Sat, 8 Oct 2011 17:15:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50589</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e39j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80291</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-918] Avro C++ documentation is very old</title>
                <link>https://issues.apache.org/jira/browse/AVRO-918</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;None of the improvements to C++ from 1.5 onwards are in the C++ documentation. Also there are a large number of doxygen warnings while generating documents.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526323">AVRO-918</key>
            <summary>Avro C++ documentation is very old</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2011 13:27:46 +0000</created>
                <updated>Tue, 1 Nov 2011 18:35:58 +0000</updated>
                            <resolved>Mon, 17 Oct 2011 07:14:51 +0000</resolved>
                                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c++</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13124034" author="thiru_mg" created="Mon, 10 Oct 2011 12:23:07 +0000"  >&lt;p&gt;Though this does not involve functional changes, it requires editing several source file. I&apos;ll take it up after committing the bunch of pending C++ changes.&lt;/p&gt;</comment>
                            <comment id="13128480" author="thiru_mg" created="Sun, 16 Oct 2011 18:45:19 +0000"  >&lt;p&gt;This is a documentation only patch with no change in functionality&lt;/p&gt;</comment>
                            <comment id="13128707" author="thiru_mg" created="Mon, 17 Oct 2011 07:14:51 +0000"  >&lt;p&gt;Committed revision 1185027.&lt;/p&gt;</comment>
                            <comment id="13128833" author="thiru_mg" created="Mon, 17 Oct 2011 12:46:39 +0000"  >&lt;p&gt;Added a minor improvement with a description of how to setup for Ubuntu.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499216" name="AVRO-918.patch" size="184580" author="thiru_mg" created="Sun, 16 Oct 2011 18:45:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e39r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-919] Produce JSON encoding of Avro values</title>
                <link>https://issues.apache.org/jira/browse/AVRO-919</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We need a function that can produce the JSON encoding of an Avro value that&apos;s represented using the new &lt;tt&gt;avro_value_t&lt;/tt&gt; class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526442">AVRO-919</key>
            <summary>Produce JSON encoding of Avro values</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcreager">Douglas Creager</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Oct 2011 13:42:29 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:01 +0000</updated>
                            <resolved>Sat, 15 Oct 2011 13:30:29 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13124101" author="dcreager" created="Mon, 10 Oct 2011 13:44:18 +0000"  >&lt;p&gt;Here is a patch that implements a new &lt;tt&gt;avro_value_to_json&lt;/tt&gt; function.  It&apos;s implemented in terms of the public &lt;tt&gt;avro_value_t&lt;/tt&gt; interface, so it should work with any value implementation.&lt;/p&gt;</comment>
                            <comment id="13128176" author="dcreager" created="Sat, 15 Oct 2011 13:30:29 +0000"  >&lt;p&gt;Checked into SVN trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498420" name="0001-Produce-JSON-encoding-for-Avro-values.patch" size="24470" author="dcreager" created="Mon, 10 Oct 2011 13:44:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56759</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e39z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80293</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-920] Reusable memory I/O objects</title>
                <link>https://issues.apache.org/jira/browse/AVRO-920</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The &lt;tt&gt;avro_reader_t&lt;/tt&gt; and &lt;tt&gt;avro_writer_t&lt;/tt&gt; types handle the serialization of an Avro value to/from a binary buffer.  Right now, you have to construct a new instance of these types for every buffer you want to parse.  It would eliminate some memory allocation overhead if the reader/writer instances could be reused across parses.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526443">AVRO-920</key>
            <summary>Reusable memory I/O objects</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcreager">Douglas Creager</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Oct 2011 13:45:40 +0000</created>
                <updated>Tue, 1 Nov 2011 18:35:59 +0000</updated>
                            <resolved>Sat, 15 Oct 2011 13:34:42 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13124106" author="dcreager" created="Mon, 10 Oct 2011 13:46:58 +0000"  >&lt;p&gt;Here&apos;s a patch that adds the following functions:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;avro_reader_reset&lt;/tt&gt; is the analog to the existing &lt;tt&gt;avro_writer_reset&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;avro_reader_memory_set_source&lt;/tt&gt; causes a memory reader object to point at a new source buffer&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;avro_writer_memory_set_dest&lt;/tt&gt; does the same for a memory writer object&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13128178" author="dcreager" created="Sat, 15 Oct 2011 13:34:42 +0000"  >&lt;p&gt;Checked into SVN trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498421" name="0001-Reusable-memory-I-O-objects.patch" size="6810" author="dcreager" created="Mon, 10 Oct 2011 13:46:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3a7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-921] Zero-copy implementation of wrapped buffer interface</title>
                <link>https://issues.apache.org/jira/browse/AVRO-921</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The &lt;tt&gt;avro_wrapped_buffer_t&lt;/tt&gt; is used by the bytes and string types to store the content of the Avro value.  The wrapped buffer interface is capable of being zero-copy, where the underlying content buffer is shared across multiple Avro values.  But our default implementation would create a new physical copy of the data every time the &lt;tt&gt;copy&lt;/tt&gt; method is called.  It would be good to have a default zero-copy implementation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526445">AVRO-921</key>
            <summary>Zero-copy implementation of wrapped buffer interface</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcreager">Douglas Creager</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Oct 2011 13:50:54 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:03 +0000</updated>
                            <resolved>Sat, 15 Oct 2011 13:36:55 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13124108" author="dcreager" created="Mon, 10 Oct 2011 13:54:06 +0000"  >&lt;p&gt;This patch adds a zero-copy wrapped buffer.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;avro_wrapped_buffer_new_copy&lt;/tt&gt; function creates a copy of an external buffer, but that new copy is reference-counted.  Any additional copies will just increment the reference count, and will share the underlying content buffer.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;avro_wrapped_buffer_new&lt;/tt&gt; function wraps an existing buffer, but since we don&apos;t have any real control over that buffer, we have to make a real copy of it if its &lt;tt&gt;copy&lt;/tt&gt; method is called.  This first copy, however, becomes properly reference-counted, just like a wrapped buffer created via &lt;tt&gt;avro_wrapped_buffer_new_copy&lt;/tt&gt;.  Therefore, any additional copies (after the first) will be reference-counted and shared.&lt;/p&gt;</comment>
                            <comment id="13128179" author="dcreager" created="Sat, 15 Oct 2011 13:36:55 +0000"  >&lt;p&gt;Checked into SVN trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498423" name="0001-Default-wrapped-buffer-implementation-is-zero-copy.patch" size="4054" author="dcreager" created="Mon, 10 Oct 2011 13:54:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56762</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-922] Comparison of avro_value_t instances</title>
                <link>https://issues.apache.org/jira/browse/AVRO-922</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We need a function that implements the standard Avro comparison rules for the new &lt;tt&gt;avro_value_t&lt;/tt&gt; class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526447">AVRO-922</key>
            <summary>Comparison of avro_value_t instances</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcreager">Douglas Creager</assignee>
                                    <reporter username="dcreager">Douglas Creager</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Oct 2011 13:56:39 +0000</created>
                <updated>Tue, 1 Nov 2011 18:36:02 +0000</updated>
                            <resolved>Sat, 15 Oct 2011 13:39:07 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13124112" author="dcreager" created="Mon, 10 Oct 2011 13:57:45 +0000"  >&lt;p&gt;Here&apos;s a patch that implements &lt;tt&gt;avro_value_cmp&lt;/tt&gt; and &lt;tt&gt;avro_value_cmp_fast&lt;/tt&gt;.  The difference between the two is that the &lt;tt&gt;_fast&lt;/tt&gt; function assumes that the two values have identical schemas, while the other function verifies that they do.&lt;/p&gt;</comment>
                            <comment id="13128180" author="dcreager" created="Sat, 15 Oct 2011 13:39:07 +0000"  >&lt;p&gt;Checked into SVN trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498425" name="0001-Value-comparison-function.patch" size="9981" author="dcreager" created="Mon, 10 Oct 2011 13:57:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56764</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80296</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-923] Avro-MapRed: Provide a fallback using avro beans instead of schema in job configuration</title>
                <link>https://issues.apache.org/jira/browse/AVRO-923</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The current implementation of Avro MapRed is designed to use JobConf. While it is possible to use job.xml file, it is pretty painful since you have to copy/paste the all schemes for input and output. This is error prone and time consuming. Also any update in a bean requires to recopy/repaste the schema (if using JobConf a simple recompile would be enough).&lt;/p&gt;

&lt;p&gt;A proposition to improve this and to stay backward compatible would be to introduce new keys in AvroJob and reference the actual avro bean used. This can be implemented as a fallback.&lt;/p&gt;

&lt;p&gt;New keys would be created:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;avro.input.schema &amp;gt; avro.input.class&lt;/li&gt;
	&lt;li&gt;avro.map.output.schema &amp;gt; avro.map.output.class&lt;/li&gt;
	&lt;li&gt;avro.output.schema &amp;gt; avro.output.class&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Only 3 methods would be impacted in AvroJob:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;getInputSchema(Configuration job) 
{
	// Implement a fallback like
	String s = job.get(INPUT_SCHEMA);
	if(s==null) s = (String)Class.forName(job.get(INPUT_CLASS)).getDeclaredField(&quot;SCHEMA$&quot;).get(null);
	    return Schema.parse(s);
	}
&lt;p&gt;  }&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;getMapOutputSchema()&lt;/li&gt;
	&lt;li&gt;getOutputSchema()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, it would be more consistent to add new setters. This is not mandatory since in that use case, the new keys are filled up directly in the job, not using AvroJob. &lt;/p&gt;</description>
                <environment>&lt;p&gt;any&lt;/p&gt;</environment>
        <key id="12526634">AVRO-923</key>
            <summary>Avro-MapRed: Provide a fallback using avro beans instead of schema in job configuration</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="julien.muller">Julien Muller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Oct 2011 10:01:29 +0000</created>
                <updated>Wed, 23 May 2012 21:51:45 +0000</updated>
                                            <version>1.5.4</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="13125213" author="cutting" created="Tue, 11 Oct 2011 17:33:58 +0000"  >&lt;p&gt;It&apos;s slightly riskier to get the schema from the runtime than from the job, in particular the map output schema.  If different versions of code are somehow run on different nodes, then different map output schemas could be used, which would create havoc, since the schema does not travel with the map output data.  When the schema is in the job.xml, there&apos;s very little chance of a lack of coordination, since the framework distributes the same job.xml to every task.  If the schema comes from the runtime, there&apos;s some chance that different versions of classes could be installed on different nodes.&lt;/p&gt;

&lt;p&gt;Another concern is that not all schemas have a class that defines them.  For example, one might have jobs whose inputs or outputs are &quot;bytes&quot; or &quot;string&quot; or Pair&amp;lt;&quot;string&quot;,&quot;bytes&quot;&amp;gt;, etc.&lt;/p&gt;

&lt;p&gt;These are the reasons that schema-in-job.xml is the required and preferred means of specification.  However there may be cases where it&apos;s preferable to additionally support specification of schemas via a specific class, as suggested in this issue.&lt;/p&gt;

&lt;p&gt;A JobConf can be programmatically constructed.  Why is it so painful to insert the schema there as a part of your job creation/submission pipeline?  I&apos;d like to better understand why that&apos;s so difficult before we add a new mechanism, since any added mechanism has the potential to create bugs and user confusion.&lt;/p&gt;</comment>
                            <comment id="13125714" author="julien.muller" created="Wed, 12 Oct 2011 11:08:26 +0000"  >&lt;p&gt;Answers to the previous comment:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It&apos;s slightly riskier to get the schema from the runtime than from the job&lt;br/&gt;
&amp;gt; This is correct, but it seems to me this risk is already taken for other parameters such as &quot;avro.mapper&quot;. For the case of schemas though there is a second check that occurs when the input file schema does not match the compiled schema.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;not all schemas have a class that defines them&lt;br/&gt;
&amp;gt; If the schema is a primitive type (e.g. long or string), I don&apos;t see any value in using the proposed mechanism. It seems to me this feature would only apply to complex schemas that may be updated regularly. If the schema is a Pair based on simple or complex type, we would still be able to generate the associated Avro bean. Not sure about the usual usage.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Why is it so painful to insert the schema there as a part of your job&lt;br/&gt;
&amp;gt; Let&apos;s say you have a schema used in 100 different jobs in 20 workflows, changing a field to nullable implies a modification of all these workflows and test runs with a risk of copy / paste error. As the schema is not human readable (compared to a class name), it is hard to identify all the places where your schema is used (and what version). We encountered this about 3 times over a 6 month period. If we were using programmatically constructed JobConf, this would be a simple recompilation of the jobs.&lt;br/&gt;
A side effect is that we have to maintain specifications of our workflows, where the flows would be self explainable.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;A JobConf can be programmatically constructed&lt;br/&gt;
This is totally correct. It can also be described with xml files, and the all point is to improve the support of this second case. When using Avro part of a global solution, together with hadoop and Oozie, we can have separate responsibilities, developers implement Business Objects (Avro) and MapReduce, and architects design the workflows pipelines in xml files.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;any added mechanism has the potential to create bugs and user confusion&lt;br/&gt;
I try to address user confusion by allowing the usage of &quot;avro.input.schema&quot;, and falling back to use &quot;avro.input.class&quot;. A way to improve this would be to put this mechanism behind the scene, and add an additional signature to setInputSchema(JobConf job, Class c).&lt;br/&gt;
This still would need to be improved to something like:&lt;br/&gt;
setInputSchema(JobConf job, Class&amp;lt;? extends SpecificRecord&amp;gt; c), but getSchema() is an instance method and there is no simple way to ensure the SCHEMA$ field would be present. &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Another approach would be to drop entirely having to set the schema in the xml configuration: the AvroMapper knows the input schema as it is compiled with it, the RecordReader knows the schema of the underlying data. If there should be a match, it should be matching these two, instead of matching with an external schema string. Not sure if there is a technical limitation to this approach.&lt;/p&gt;</comment>
                            <comment id="13125964" author="cutting" created="Wed, 12 Oct 2011 16:43:33 +0000"  >&lt;p&gt;&amp;gt; it seems to me this risk is already taken for other parameters such as &quot;avro.mapper&quot;. For the case of schemas though there is a second check that occurs when the input file schema does not match the compiled schema.&lt;/p&gt;

&lt;p&gt;The input schema is not what I was most concerned about, rather the map output schema.  If different tasks somehow got a different map output schema it would result in strange hard-to-debug i/o exceptions.  We require that the map output schema is constant across all tasks in a job for things to work correctly.  Of course it&apos;s not always possible to prohibit folks from creating erroneous situations, we should try to discourage that but don&apos;t want to overly limit functionality in the process.&lt;/p&gt;

&lt;p&gt;&amp;gt; It can also be described with xml files&lt;/p&gt;

&lt;p&gt;What I meant was that the xml files can be programmatically constructed.  They should ideally not be constructed with cut and paste, but should use the same source for schemas as the Java code that&apos;s getting re-generated to build the new version of the jar file.  Perhaps you can refer to the schemas with an external entity definition in the XML that fetches the appropriate version? &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;!DOCTYPE job [
&amp;lt;!ENTITY schemaX SYSTEM &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//svn.foo.com/project/trunk/schemas/x.avsc&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;]&amp;gt;
&amp;lt;job&amp;gt;
 ... &amp;amp;schemaX; ...
&amp;lt;/job&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Oct 2011 17:33:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58998</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80297</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
