<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:22:21 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2015-9-2+AND+created+%3C%3D+2015-9-9+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="1" total="1"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1726] Add support for appending a variable number of blocks to DataFileWriter</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1726</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;It would be helpful to have the ability to append a variable number of raw blocks from a DataFileReader to a DataFileWriter, similar to appendAllFrom() but specifying how many blocks to append.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861869">AVRO-1726</key>
            <summary>Add support for appending a variable number of blocks to DataFileWriter</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bende">Bryan Bende</reporter>
                        <labels>
                            <label>starter</label>
                    </labels>
                <created>Fri, 4 Sep 2015 15:49:11 +0000</created>
                <updated>Sun, 30 Dec 2018 05:44:10 +0000</updated>
                                            <version>1.7.7</version>
                                    <fixVersion>1.9.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14730979" author="bende" created="Fri, 4 Sep 2015 15:50:39 +0000"  >&lt;p&gt;Attempt at adding the desired functionality with a corresponding unit test.&lt;/p&gt;</comment>
                            <comment id="14730989" author="busbey" created="Fri, 4 Sep 2015 16:02:50 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  /**
+   * Appends blocks from another file.  otherFile must have the same schema.
    * Data blocks will be copied without de-serializing data.  If the codecs
    * of the two files are compatible, data blocks are copied directly without
    * decompression.  If the codecs are not compatible, blocks from otherFile
@@ -354,11 +365,13 @@
    * deflate at compression level 7.  If &amp;lt;i&amp;gt;recompress&amp;lt;/i&amp;gt; is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, blocks
    * will be copied without changing the compression level.  If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, they will
    * be converted to the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; compression level.
-   * @param otherFile
-   * @param recompress
+   * @param otherFile the file to append from
+   * @param recompress whether or not to recompress blocks as they are appended
+   * @param numBlocks the number of blocks to append
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; otherFile has more blocks available, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; otherwise
    * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    */
-  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void appendAllFrom(DataFileStream&amp;lt;D&amp;gt; otherFile, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; recompress) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; appendBlocksFrom(DataFileStream&amp;lt;D&amp;gt; otherFile, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; recompress, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; numBlocks) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is it worth adding a block-number-offset so that the method can be used to handle arbitrary &quot;pull a contiguous sub-set of blocks&quot;?&lt;/p&gt;</comment>
                            <comment id="14731180" author="bende" created="Fri, 4 Sep 2015 18:11:57 +0000"  >&lt;p&gt;That would be a cool feature to support, were you thinking of something more sophisticated than starting to read blocks and only appending after numBlocks &amp;gt;= offset ?&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if there is another option because it would require DataFileStream being able to position itself at a specific block boundary, which I don&apos;t see from glancing at public methods, but I am new here so not sure.&lt;/p&gt;</comment>
                            <comment id="14731186" author="rdblue" created="Fri, 4 Sep 2015 18:19:28 +0000"  >&lt;p&gt;I don&apos;t think there is much use for this method if you don&apos;t add a way to start at a certain block or position offset. Otherwise you end up with a method that adds the first few blocks to another file. It is also much easier to do this based on position rather than number of blocks. Position allows you to seek, find the next sync, and then start processing blocks. You can also return the current position pretty easily for repeated calls to split a file.&lt;/p&gt;

&lt;p&gt;This would then give you a reliable output size rather than some number of blocks, which can vary in size depending on the original writer&apos;s block size, compression, and recompression.&lt;/p&gt;</comment>
                            <comment id="14731258" author="bende" created="Fri, 4 Sep 2015 19:01:18 +0000"  >&lt;p&gt;This patch has the blockOffset idea mentioned by Sean, with some new unit tests to test starting at beginning, middle, and past the end.&lt;/p&gt;

&lt;p&gt;I&apos;m open to looking at a position based approach, but figured I would put this up for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12754248" name="AVRO-1726-2.patch" size="8945" author="bende" created="Fri, 4 Sep 2015 19:01:18 +0000"/>
                            <attachment id="12754213" name="AVRO-1726.patch" size="7534" author="bende" created="Fri, 4 Sep 2015 15:50:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Sep 2015 16:02:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jspj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
