<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:16:51 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2012-2-28+AND+created+%3C%3D+2012-3-6+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="4" total="4"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1038] Avro-C: Header file calls out GCC atomic intrinsics, which are missing in some GCC versions older than 4.5.0</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1038</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This issue was described as Item 2 in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1033&quot; title=&quot;Avro-C reference count fails on x86 and x86-64 for GCC 4.1.0 and earlier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1033&quot;&gt;&lt;del&gt;AVRO-1033&lt;/del&gt;&lt;/a&gt;. Splitting it out into a &lt;br/&gt;
separate JIRA ticket per Doug&apos;s request.&lt;/p&gt;

&lt;p&gt;While compiling Avro across several flavors of&lt;br/&gt;
Linux, we noticed that the GCC atomic intrinsics&lt;br/&gt;
__sync_add_and_fetch() and __sync_sub_and_fetch() were not implemented&lt;br/&gt;
for all versions of GCC greater than 4.1.0, causing compile errors.&lt;/p&gt;

&lt;p&gt;Specifically, the following two versions of GCC don&apos;t appear to&lt;br/&gt;
support the GCC atomic intrinsics:&lt;br/&gt;
1. GCC 4.1.2 20080704 (Red Hat 4.1.2-48)&lt;br/&gt;
2. GCC 4.4.3 on Mandriva for an i586 target&lt;/p&gt;

&lt;p&gt;In our local code we have updated the GCC version test in refcount.h&lt;br/&gt;
to require versions of GCC greater than 4.5.0, before including the&lt;br/&gt;
GCC intrinsics. We might want to do the same in the global Avro&lt;br/&gt;
repository.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Vivek Nadkarni&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux on an x86 or x86-64 platform with GCC versions between 4.1.0 and 4.5.0. &lt;br/&gt;
Two platforms we tested were:&lt;br/&gt;
1. GCC 4.1.2 20080704 (Red Hat 4.1.2-48)&lt;br/&gt;
2. GCC 4.4.3 on Mandriva for an i586 target&lt;/p&gt;</environment>
        <key id="12544572">AVRO-1038</key>
            <summary>Avro-C: Header file calls out GCC atomic intrinsics, which are missing in some GCC versions older than 4.5.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vnadkarni">Vivek Nadkarni</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Feb 2012 08:11:33 +0000</created>
                <updated>Mon, 19 Mar 2012 16:34:09 +0000</updated>
                            <resolved>Thu, 1 Mar 2012 03:53:28 +0000</resolved>
                                    <version>1.6.2</version>
                                    <fixVersion>1.6.3</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13219001" author="vnadkarni" created="Wed, 29 Feb 2012 08:48:39 +0000"  >&lt;p&gt;Attaching the (trivial) patch increasing the required version number&lt;br/&gt;
before using GCC atomic intrinsics to be &amp;gt; 4.5.0 instead of &amp;gt; 4.1.0&lt;/p&gt;

&lt;p&gt;Doug mentioned an alternate option of detecting the presence or&lt;br/&gt;
absence of GCC atomic intrinsics via the cmake build scripts, in a&lt;br/&gt;
comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-1033&quot; title=&quot;Avro-C reference count fails on x86 and x86-64 for GCC 4.1.0 and earlier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-1033&quot;&gt;&lt;del&gt;AVRO-1033&lt;/del&gt;&lt;/a&gt;. This would certainly make the build more robust&lt;br/&gt;
than just a version number check. However, I also like the fact that a&lt;br/&gt;
simple version number check is independent of the build scripts, and&lt;br/&gt;
makes the code easier to port to non-cmake build environments.&lt;/p&gt;

&lt;p&gt;I suggest applying this simple patch for Avro Version 1.6.3, since&lt;br/&gt;
1.6.3 is about to be released, and deciding later whether to add the&lt;br/&gt;
more sophisticated checks in the cmake build scripts.&lt;/p&gt;
</comment>
                            <comment id="13219777" author="dcreager" created="Thu, 1 Mar 2012 03:53:29 +0000"  >&lt;p&gt;I agree on both counts.  I&apos;ve checked in the simple fix for 1.6.3, since we can fall back on the assembly implementation.  And I agree that I&apos;d prefer a preprocessor-based solution, if we can find one for this combination of versions and platforms.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12516537" name="AVRO-1038.patch" size="476" author="vnadkarni" created="Wed, 29 Feb 2012 08:48:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Mar 2012 03:53:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80408</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1039] Avro-C: Test 1 (quickstop) requires deflate codec, and fails when it is missing</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1039</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Summary:&lt;/p&gt;

&lt;p&gt;The test/example quickstop requires the deflate codec. However, the deflate codec is an optional codec, and not a requirement for Avro-C. So the tests should pass even when the deflate codec is unavailable.&lt;/p&gt;

&lt;p&gt;Not sure of the best way to test features dependent on optional libraries, and (a) pass the tests when the optional libraries are not available, but (b) fail the tests when the libraries are available, but the code doesn&apos;t work properly.&lt;/p&gt;

&lt;p&gt;Details:&lt;/p&gt;

&lt;p&gt;When I make Avro-C using the following commands from the avro-trunk/lang/c directory:&lt;/p&gt;

&lt;p&gt;mkdir -p build&lt;br/&gt;
cd build&lt;br/&gt;
cmake .. -DCMAKE_INSTALL_PREFIX=avrolib -DCMAKE_BUILD_TYPE=Debug&lt;br/&gt;
make&lt;br/&gt;
make test&lt;br/&gt;
make install&lt;/p&gt;

&lt;p&gt;I get the following messages (as expected, since I don&apos;t have the libs):&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&amp;#8211; Could NOT find ZLIB (missing:  ZLIB_LIBRARY ZLIB_INCLUDE_DIR) &lt;br/&gt;
Disabled deflate codec. zlib not found.&lt;br/&gt;
&amp;#8211; checking for module &apos;liblzma&apos;&lt;br/&gt;
&amp;#8211;   package &apos;liblzma&apos; not found&lt;br/&gt;
Disabled lzma codec. liblzma not found.&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;/p&gt;

&lt;p&gt;But then, during the tests, I get the error:&lt;br/&gt;
 1/10 Test  #1: quickstop ........................***Failed    0.00 sec&lt;/p&gt;

&lt;p&gt;And, when I run quickstop manually:&lt;br/&gt;
~/avro-trunk/lang/c/build/examples$ ./quickstop &lt;br/&gt;
There was an error creating quickstop.db&lt;br/&gt;
 error message: Unknown codec deflate&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Vivek&lt;/p&gt;</description>
                <environment>&lt;p&gt;GNU/Linux Ubuntu 11.10 64-bit&lt;/p&gt;</environment>
        <key id="12544580">AVRO-1039</key>
            <summary>Avro-C: Test 1 (quickstop) requires deflate codec, and fails when it is missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vnadkarni">Vivek Nadkarni</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Feb 2012 09:19:57 +0000</created>
                <updated>Mon, 19 Mar 2012 16:34:08 +0000</updated>
                            <resolved>Thu, 1 Mar 2012 03:55:02 +0000</resolved>
                                    <version>1.6.2</version>
                                    <fixVersion>1.6.3</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="13219776" author="dcreager" created="Thu, 1 Mar 2012 03:48:15 +0000"  >&lt;p&gt;The null codec is always present, so we can fall back on that if we didn&apos;t build the deflate codec.  And we&apos;ve already got preprocessor macros that we can check to see whether each particular codec is present.&lt;/p&gt;</comment>
                            <comment id="13219778" author="dcreager" created="Thu, 1 Mar 2012 03:55:03 +0000"  >&lt;p&gt;Committed to SVN&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12516641" name="0001-AVRO-1039.-C-Don-t-try-to-use-nonexistent-codecs-in-.patch" size="1388" author="dcreager" created="Thu, 1 Mar 2012 03:48:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Mar 2012 03:48:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229766</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1040] Allow NettyServer bootstrap options to be passed in.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1040</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This would enable options like the following to be passed in:&lt;/p&gt;

&lt;p&gt;      bootstrap.setOption(&quot;child.tcpNoDelay&quot;, true);&lt;br/&gt;
      bootstrap.setOption(&quot;child.keepAlive&quot;, true);&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/avro-user/201203.mbox/%3cCAHf2d4N1rFO8x8W6GCczpWXiOZAwkzR0p=P5BAA9vPi9P-8j5g@mail.gmail.com%3e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/avro-user/201203.mbox/%3cCAHf2d4N1rFO8x8W6GCczpWXiOZAwkzR0p=P5BAA9vPi9P-8j5g@mail.gmail.com%3e&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544839">AVRO-1040</key>
            <summary>Allow NettyServer bootstrap options to be passed in.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="frankgrimes97">Frank Grimes</reporter>
                        <labels>
                            <label>netty</label>
                    </labels>
                <created>Thu, 1 Mar 2012 20:34:01 +0000</created>
                <updated>Fri, 23 Jan 2015 00:42:38 +0000</updated>
                                            <version>1.6.2</version>
                    <version>1.6.3</version>
                    <version>1.7.0</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14288504" author="matanshukry" created="Fri, 23 Jan 2015 00:41:13 +0000"  >&lt;p&gt;please review the code; Simply added a few constructors so one can pass a ServerBootstrap and hence control the options, as suggested.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12694048" name="AVRO-1040.patch" size="2541" author="matanshukry" created="Fri, 23 Jan 2015 00:42:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Jan 2015 00:41:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e3zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-1041] Utf8 allocates new byte array unnessisarily</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1041</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When a &lt;tt&gt;Utf8&lt;/tt&gt; instance is about to receive new data (i.e. in &lt;tt&gt;BinaryDecoder&lt;/tt&gt;), &lt;tt&gt;Utf8::setByteLength&lt;/tt&gt; is invoked to essentially ensure capacity of the backing byte array.&lt;br/&gt;
However, the logical length of the current instance is compared against the required size rather than the existing byte array size.&lt;br/&gt;
This causes needless allocations of a new backing byte array: If you read a 10 byte string followed by an 8 byte string followed by a 9 byte string, the 3rd read will cause a new backing array allocation even though the instance already has a 10 byte array at its disposal.&lt;br/&gt;
At a minimum we should replace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Utf8 setByteLength(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; newLength) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.length &amp;lt; newLength) {
      &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] newBytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[newLength];
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.arraycopy(bytes, 0, newBytes, 0, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.length);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bytes = newBytes;
    }
    ...
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Utf8 setByteLength(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; newLength) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bytes.length &amp;lt; newLength) {
      &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] newBytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[newLength];
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.arraycopy(bytes, 0, newBytes, 0, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.length);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bytes = newBytes;
    }
    ...
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We may also wish to consider setting a maximum size limit to the utf8 instance: If we allocate over this, we drop the backing array the next time we get a resize for a data length smaller than this (so we aren&apos;t forced to keep memory for the largest utf8 encountered in memory).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544845">AVRO-1041</key>
            <summary>Utf8 allocates new byte array unnessisarily</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="irvingd">dave irving</assignee>
                                    <reporter username="irvingd">dave irving</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Mar 2012 21:32:55 +0000</created>
                <updated>Mon, 19 Mar 2012 16:34:09 +0000</updated>
                            <resolved>Fri, 2 Mar 2012 21:50:42 +0000</resolved>
                                    <version>1.6.2</version>
                                    <fixVersion>1.6.3</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13220796" author="irvingd" created="Fri, 2 Mar 2012 09:28:12 +0000"  >&lt;p&gt;Patch just addresses resize bug.&lt;/p&gt;</comment>
                            <comment id="13221289" author="cutting" created="Fri, 2 Mar 2012 21:50:42 +0000"  >&lt;p&gt;I committed this.  Thanks, Dave!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12516809" name="AVRO-1041.patch" size="1809" author="irvingd" created="Fri, 2 Mar 2012 09:28:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Mar 2012 21:50:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230031</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0e407:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>80411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
