<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:17:51 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2012-10-24+AND+created+%3C%3D+2012-10-28+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="2" total="2"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-1183] Avro Pair fails to initialize when either they key or value is a list.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-1183</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;It seems that a change somewhere between 1.5.7 and 1.7.2 (maybe &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-966&quot; title=&quot;Bug in GenericData#resolveUnion when resolving union of null and array&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-966&quot;&gt;&lt;del&gt;AVRO-966&lt;/del&gt;&lt;/a&gt; ?) has broken the Avro Pair object, so that you can no longer instantiate a pair when either the key or the value is a list.&lt;/p&gt;

&lt;p&gt;To replicate this bug, try the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; key = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(0);
List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; list = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; pair = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt;(key, list);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It will produce something like the following exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.avro.AvroRuntimeException: Can&apos;t find element type of Collection
	at org.apache.avro.reflect.ReflectData.createSchema(ReflectData.java:281)
	at org.apache.avro.specific.SpecificData.getSchema(SpecificData.java:151)
	at org.apache.avro.mapred.Pair.&amp;lt;init&amp;gt;(Pair.java:312)

        .....SNIP.....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve used Integer here for illustration but it also affects SpecificRecord objects.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12613235">AVRO-1183</key>
            <summary>Avro Pair fails to initialize when either they key or value is a list.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="jeffreyt">Jeffrey Theobald</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Oct 2012 05:55:58 +0000</created>
                <updated>Mon, 10 Dec 2012 17:57:37 +0000</updated>
                            <resolved>Wed, 14 Nov 2012 21:00:21 +0000</resolved>
                                    <version>1.7.2</version>
                                    <fixVersion>1.7.3</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13486264" author="cutting" created="Mon, 29 Oct 2012 19:18:50 +0000"  >&lt;p&gt;This used to yield a schema like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Pair&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.avro.mapred&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt; : [ {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;,
  }, {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;ArrayList&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;java.util&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt; : [ ]
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;order&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;ignore&quot;&lt;/span&gt;
  } ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Such a schema will not correctly write values, since the ArrayList record has no fields.  This is a limitation of Java reflection: one cannot find the element type of an ArrayList at runtime.  So to create a schema for a Pair you&apos;d need to do something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Schema keySchema = Schema.create(Type.INT);
Schema valueSchema = Schema.createArray(Schema.create(Type.INT));
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair(key, keySchema, value, valueSchema);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13490452" author="jeffreyt" created="Mon, 5 Nov 2012 04:53:31 +0000"  >&lt;p&gt;Ahh, of course.  We&apos;ve been using that pair constructor to get around the exception but now that you&apos;ve pointed it out why it won&apos;t work, it makes sense.  Thank you for clearing that up.&lt;/p&gt;

&lt;p&gt;Is it possible that the error message could be a little more descriptive? I&apos;m not sure what the convention is for these kinds of exceptions within the Avro project but I&apos;m sure I&apos;m not the only one who&apos;s bumped into this issue. The current exception message is technically correct but it&apos;s very minimal which is slightly confusing.&lt;/p&gt;</comment>
                            <comment id="13490794" author="cutting" created="Mon, 5 Nov 2012 18:27:19 +0000"  >&lt;p&gt;Improving the error message is a good idea.  Would something like, &quot;Cannot infer schema for Collection&quot; be much better?&lt;/p&gt;</comment>
                            <comment id="13495080" author="jeffreyt" created="Mon, 12 Nov 2012 04:21:02 +0000"  >&lt;p&gt;Yeah, that seems more helpful.  Would it be too verbose to go even further and suggest the remedy in the exception message? i.e.,_ &quot;Cannot infer schema for Collection. Specify the schema for Pairs containing Collections to avoid this error&quot;_.  Again, I&apos;m not sure of the Avro convention is, but either way works for me.&lt;/p&gt;</comment>
                            <comment id="13496691" author="cutting" created="Wed, 14 Nov 2012 00:06:42 +0000"  >&lt;p&gt;Here&apos;s a patch that changes the message to:&lt;/p&gt;

&lt;p&gt;Cannot infer Schema for: class Collection.  Must create Pair with explicit key and value schemas.&lt;/p&gt;</comment>
                            <comment id="13496692" author="cutting" created="Wed, 14 Nov 2012 00:07:05 +0000"  >&lt;p&gt;I&apos;ll commit this soon unless someone objects.&lt;/p&gt;</comment>
                            <comment id="13496723" author="jeffreyt" created="Wed, 14 Nov 2012 01:06:01 +0000"  >&lt;p&gt;Sounds good to me!&lt;/p&gt;</comment>
                            <comment id="13497435" author="cutting" created="Wed, 14 Nov 2012 21:00:21 +0000"  >&lt;p&gt;I added a test and committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12553410" name="AVRO-1183.patch" size="6189" author="cutting" created="Wed, 14 Nov 2012 00:06:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Oct 2012 19:18:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b06f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-1184] GenericDatumReader throws an error when it tries to cache a resolver </title>
                <link>https://issues.apache.org/jira/browse/AVRO-1184</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;When the GenericDatumReader tries to create a resolver with the reader schema which contains a union where the default value is incompatible with the first field. It throws an error. As the resolvers are cached, when the resolver is not created, it is not pushed in the cache which results in an attempt to create a resolver whenever it tries to read a message. A possible fix is to not have a lazy initialization of the resolver but to have it at time of the creation of GenericDatumReader and handle the error at start. This ensures that the datumReader fails fast and will not try to create the resolver everytime it tries to read a message.  An example of the reader schema  &lt;/p&gt;

&lt;p&gt; String readerSchemaDescription = &quot; {    \n&quot;&lt;br/&gt;
        + &quot; \&quot;name\&quot;: \&quot;User\&quot;, \n&quot;&lt;br/&gt;
        + &quot; \&quot;type\&quot;: \&quot;record\&quot;,\n&quot; + &quot; \&quot;fields\&quot;: [\n&quot;&lt;br/&gt;
        + &quot;   &lt;/p&gt;
{\&quot;name\&quot;: \&quot;id\&quot;, \&quot;type\&quot;: \&quot;int\&quot;}
&lt;p&gt;,\n&quot; &lt;br/&gt;
        + &quot; &lt;/p&gt;
{\&quot;name\&quot;: \&quot;temp\&quot;, \&quot;type\&quot;: [\&quot;null\&quot;,\&quot;string\&quot;], \&quot;default\&quot;:\&quot;foo\&quot;}
&lt;p&gt;,\n&quot;&lt;br/&gt;
        + &quot;   &lt;/p&gt;
{\&quot;name\&quot;: \&quot;name\&quot;, \&quot;type\&quot;: \&quot;string\&quot;, \&quot;default\&quot;:\&quot;avro\&quot;}
&lt;p&gt; ]\n&quot; + &quot;}&quot;;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12613725">AVRO-1184</key>
            <summary>GenericDatumReader throws an error when it tries to cache a resolver </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rnair">Ruma Nair</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Oct 2012 22:21:55 +0000</created>
                <updated>Fri, 26 Oct 2012 22:21:55 +0000</updated>
                                            <version>1.6.3</version>
                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>252473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ct7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>
