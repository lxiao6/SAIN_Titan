<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Mon Jan 21 19:13:18 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+AVRO+AND+created+%3E%3D+2010-1-12+AND+created+%3C%3D+2010-1-19+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="42" total="42"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[AVRO-308] Allow arbitrary named types in the &quot;types&quot; field of an Avro protocol</title>
                <link>https://issues.apache.org/jira/browse/AVRO-308</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;In the current version of the spec, we say that a protocol declaration has a field called &quot;types, a list of record, enum and error definitions.&quot;. It would be useful to allow arbitrary named types, so that we can have, for example, fixed types like MD5 declared in the protocol and used in the message definitions of that protocol.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445247">AVRO-308</key>
            <summary>Allow arbitrary named types in the &quot;types&quot; field of an Avro protocol</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2010 01:16:34 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Thu, 14 Jan 2010 19:55:54 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12800325" author="cutting" created="Thu, 14 Jan 2010 19:55:54 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 19:55:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79687</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-309] Make build.sh commands &quot;test&quot;, &quot;dist&quot;, and &quot;clean&quot; work for Python in the post-163 world.</title>
                <link>https://issues.apache.org/jira/browse/AVRO-309</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445249">AVRO-309</key>
            <summary>Make build.sh commands &quot;test&quot;, &quot;dist&quot;, and &quot;clean&quot; work for Python in the post-163 world.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2010 01:29:42 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Tue, 12 Jan 2010 22:38:41 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12799066" author="hammer" created="Tue, 12 Jan 2010 04:24:19 +0000"  >&lt;p&gt;Doug: are you cool with me introducing nose as a test runner here?&lt;/p&gt;</comment>
                            <comment id="12799290" author="cutting" created="Tue, 12 Jan 2010 17:49:29 +0000"  >&lt;p&gt;&amp;gt;  are you cool with me introducing nose as a test runner here?&lt;/p&gt;

&lt;p&gt;I trust your judgment.  This can be retrieved dynamically by the build, I assume?&lt;/p&gt;</comment>
                            <comment id="12799374" author="cutting" created="Tue, 12 Jan 2010 20:43:51 +0000"  >&lt;p&gt;Here&apos;s a patch for this.  The dist target only pushes documentation into the doc distribution and does not yet create a python distribution artifact.  The test and clean targets are fully implemented.&lt;/p&gt;

&lt;p&gt;Note that one must also &apos;cd lang/py; svn mv ../../lang/java/lib/pyAntTasks* lib&apos; to use this patch.&lt;/p&gt;</comment>
                            <comment id="12799436" author="hammer" created="Tue, 12 Jan 2010 22:33:29 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12799437" author="cutting" created="Tue, 12 Jan 2010 22:38:41 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12445358">AVRO-311</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12445359">AVRO-312</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12437350">AVRO-136</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12438635">AVRO-163</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12430041" name="AVRO-309.patch" size="32954" author="cutting" created="Tue, 12 Jan 2010 20:43:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Jan 2010 17:49:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79688</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-310] improve top-level build script</title>
                <link>https://issues.apache.org/jira/browse/AVRO-310</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The top-level build script should:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo commands it runs&lt;/li&gt;
	&lt;li&gt;support multiple targets&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12445346">AVRO-310</key>
            <summary>improve top-level build script</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2010 19:58:00 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Tue, 12 Jan 2010 23:07:26 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12799356" author="cutting" created="Tue, 12 Jan 2010 19:58:54 +0000"  >&lt;p&gt;Here&apos;s a patch for this.&lt;/p&gt;</comment>
                            <comment id="12799450" author="massie" created="Tue, 12 Jan 2010 23:00:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Personally, I like to have&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;set -e
set -x
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;on separate lines instead of the shabang since it makes it a little more obvious they are set.  &lt;/p&gt;
</comment>
                            <comment id="12799456" author="cutting" created="Tue, 12 Jan 2010 23:07:26 +0000"  >&lt;p&gt;I changed these to be separate &apos;set&apos; lines, per your suggestion, and committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430038" name="AVRO-310.patch" size="490" author="cutting" created="Tue, 12 Jan 2010 19:58:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Jan 2010 23:00:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79689</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-311] Run Python tests with nose</title>
                <link>https://issues.apache.org/jira/browse/AVRO-311</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445358">AVRO-311</key>
            <summary>Run Python tests with nose</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2010 22:33:55 +0000</created>
                <updated>Mon, 4 Oct 2010 20:26:23 +0000</updated>
                                                                            <component>build</component>
                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12914823" author="dln" created="Sat, 25 Sep 2010 15:01:49 +0000"  >&lt;p&gt;Patch implements using nosetests to collect and run test from setup.py (and ant).&lt;/p&gt;</comment>
                            <comment id="12917474" author="philip" created="Mon, 4 Oct 2010 05:24:56 +0000"  >&lt;p&gt;Hi Daniel,&lt;/p&gt;

&lt;p&gt;My only hesitation with this patch is that adds another dependency to folks building AVRO, namely that of having nosetests installed.  I think nosetests is LGPL, so we shouldn&apos;t be redistributing it, though it&apos;s a fine build dependency.&lt;/p&gt;

&lt;p&gt;If no one objects, I&apos;ll go ahead and commit this, since I much prefer nose to python&apos;s built-in unittest myself.&lt;/p&gt;</comment>
                            <comment id="12917689" author="cutting" created="Mon, 4 Oct 2010 18:21:14 +0000"  >&lt;p&gt;I&apos;m fine with switching to nose if folks prefer it.  However when I apply this patch, after installing nose (on ubuntu, with &apos;sudo apt-get install python-nose&apos;) test fail with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test:
     [exec] /usr/lib/python2.6/distutils/dist.py:266: UserWarning: Unknown distribution option: &lt;span class=&quot;code-quote&quot;&gt;&apos;install_requires&apos;&lt;/span&gt;
     [exec]   warnings.warn(msg)
     [exec] /usr/lib/python2.6/distutils/dist.py:266: UserWarning: Unknown distribution option: &lt;span class=&quot;code-quote&quot;&gt;&apos;test_suite&apos;&lt;/span&gt;
     [exec]   warnings.warn(msg)
     [exec] usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
     [exec]    or: setup.py --help [cmd1 cmd2 ...]
     [exec]    or: setup.py --help-commands
     [exec]    or: setup.py cmd --help
     [exec] 
     [exec] error: invalid command &lt;span class=&quot;code-quote&quot;&gt;&apos;nosetests&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &apos;nosetests&apos; executable is on my path, and running it directly also fails, but with different messages.&lt;/p&gt;</comment>
                            <comment id="12917707" author="dln" created="Mon, 4 Oct 2010 18:53:36 +0000"  >&lt;p&gt;nosetests seemingly only works as a test collector in setup.py when using setuptools.&lt;/p&gt;

&lt;p&gt;See also: &lt;a href=&quot;http://somethingaboutorange.com/mrl/projects/nose/0.11.2/setuptools_integration.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://somethingaboutorange.com/mrl/projects/nose/0.11.2/setuptools_integration.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12917710" author="dln" created="Mon, 4 Oct 2010 19:00:38 +0000"  >&lt;p&gt;Reworked patch to run `nosetests` directly, rather than from setup.py. This means testing will still work if setuptools is missing.&lt;/p&gt;</comment>
                            <comment id="12917748" author="cutting" created="Mon, 4 Oct 2010 20:26:23 +0000"  >&lt;p&gt;I had to change build.xml to: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;set PYTHONPATH when running tests&lt;/li&gt;
	&lt;li&gt;build the interop data (or exclude that test, which requires it)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I also changed the top-level BUILD.txt to mention the dependency on nose.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12445249">AVRO-309</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12456307" name="AVRO-311-2.patch" size="10153" author="dln" created="Mon, 4 Oct 2010 19:00:38 +0000"/>
                            <attachment id="12456315" name="AVRO-311.patch" size="9996" author="cutting" created="Mon, 4 Oct 2010 20:26:23 +0000"/>
                            <attachment id="12455562" name="AVRO-311.patch" size="10427" author="dln" created="Sat, 25 Sep 2010 15:01:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Sep 2010 15:01:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94638</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-312] Generate documentation for Python with Sphinx</title>
                <link>https://issues.apache.org/jira/browse/AVRO-312</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445359">AVRO-312</key>
            <summary>Generate documentation for Python with Sphinx</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2010 22:34:39 +0000</created>
                <updated>Tue, 12 Jan 2010 22:34:50 +0000</updated>
                                                                            <component>build</component>
                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12445249">AVRO-309</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79691</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-313] Default values for fields or records and array (or map) don&apos;t work with ResolvingDecoder</title>
                <link>https://issues.apache.org/jira/browse/AVRO-313</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;If the writer&apos;s and reader&apos;s schema are different and reader&apos;s schema defines a field with a default while the writer&apos;s does not have that field, the ResolovingDecoder returns the default value for the field to the reader. This is accomplished by replacing the actual InputStream with the one that has the default value. Remember the actual input stream didn&apos;t have a value for the field. Now the original input stream is restored by an implicit action called DEFAULT_END_ACTION. If the record is the last in a slice of an array(or a map), the code used to see (after consuming the record) if there are any more entries in the array(map). This check should happen on the original input stream. Since the input stream has not been restored, the check happens on the default-value input stream causing error.&lt;/p&gt;

&lt;p&gt;The following patch solves this by consuming all &quot;trailing&quot; implicit actions before looking for further entries in the array(map). There was already a method Parser.processImplicitActions() which consumed &lt;em&gt;all&lt;/em&gt; implicit actions. It turns out one needs to consume only the trailing implicit action. So I renamed the method to processTrailingImplicitActions and changed the code to meet the new specification.&lt;/p&gt;

&lt;p&gt;I also added a couple of tests that catch the problem.&lt;/p&gt;

&lt;p&gt;First apply the patch for the tests, you&apos;d see the problem. Then apply the fix and see that the problem go away.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445370">AVRO-313</key>
            <summary>Default values for fields or records and array (or map) don&apos;t work with ResolvingDecoder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 02:38:41 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Fri, 15 Jan 2010 03:30:45 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12799834" author="cutting" created="Wed, 13 Jan 2010 17:32:22 +0000"  >&lt;p&gt;+1 This looks good to me.&lt;/p&gt;</comment>
                            <comment id="12800187" author="thiru_mg" created="Thu, 14 Jan 2010 12:54:00 +0000"  >&lt;p&gt;Committed revision 899185.&lt;/p&gt;</comment>
                            <comment id="12800418" author="cutting" created="Thu, 14 Jan 2010 23:28:06 +0000"  >&lt;p&gt;This change causes a unit tests to fail:&lt;/p&gt;

&lt;p&gt;Testcase: testUnion took 0.062 sec&lt;br/&gt;
	Caused an ERROR&lt;br/&gt;
Encoded data does not match. expected:&amp;lt;{&quot;Foo&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;:{}}&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;{&quot;Foo&quot;[]&amp;gt;&lt;br/&gt;
	at org.apache.avro.TestSchema.checkJson(TestSchema.java:389)&lt;br/&gt;
	at org.apache.avro.TestSchema.testUnion(TestSchema.java:226)&lt;/p&gt;

&lt;p&gt;Please run &apos;ant clean test-java&apos; before committing.&lt;/p&gt;</comment>
                            <comment id="12800522" author="thiru_mg" created="Fri, 15 Jan 2010 03:30:45 +0000"  >&lt;p&gt;Committed revision 899520. Restored Parser.processImplicitActions() as it is still required. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430086" name="AVRO-313-test.patch" size="3241" author="thiru_mg" created="Wed, 13 Jan 2010 02:42:21 +0000"/>
                            <attachment id="12430087" name="AVRO-313.patch" size="5947" author="thiru_mg" created="Wed, 13 Jan 2010 02:43:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jan 2010 17:32:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79692</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-314] Allow Avro to publish to a local m2 repository</title>
                <link>https://issues.apache.org/jira/browse/AVRO-314</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;To test Hadoop or other systems with a locally-built avro jar, it is considerably easier if you can use a local maven repository to resolve dependencies.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445372">AVRO-314</key>
            <summary>Allow Avro to publish to a local m2 repository</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kimballa">Aaron Kimball</assignee>
                                    <reporter username="kimballa">Aaron Kimball</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 03:13:42 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Wed, 13 Jan 2010 23:27:14 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12799551" author="kimballa" created="Wed, 13 Jan 2010 03:15:09 +0000"  >&lt;p&gt;Here&apos;s a patch that handles this, using code very similar to that in Hadoop (core, hdfs).&lt;/p&gt;

&lt;p&gt;To use this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ cd $AVRO_HOME/lang/java
$ ant mvn-install
$ cd $MAPREDUCE_HOME # or another project
$ ant veryclean jar -Dresolvers=internal
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12799833" author="cutting" created="Wed, 13 Jan 2010 17:28:41 +0000"  >&lt;p&gt;It seems circuitous to me to use Maven to publish things locally so that Ivy can read them.  Ivy should be able to publish locally to Ivy, no?  I got this to work by manually copying jars to my local ivy repo (~/.ivy2/local/org.apache.hadoop/avro/1.2.0/jars/avro.jar) then modifying Hadoop&apos;s &quot;internal&quot; resolvers in its ivysettings.xml files to include &quot;local&quot;, as in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6486&quot; title=&quot;fix common classes to work with Avro 1.3 reflection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6486&quot;&gt;&lt;del&gt;HADOOP-6486&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-892&quot; title=&quot;optionally use Avro for namenode RPC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-892&quot;&gt;&lt;del&gt;HDFS-892&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Have you tried using ivy&apos;s publish task to write Avro&apos;s jar to ivy&apos;s local resolver and configuring Hadoop to use Ivy&apos;s local resolver to read it?&lt;/p&gt;

&lt;p&gt;Other comments on the patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you intermix two .gitignore styles: one at top-level or per-directory.  pick one.  i prefer per-directory.&lt;/li&gt;
	&lt;li&gt;downloaded jars should go in the lib/ directory, not in the ivy/ directory, no?&lt;/li&gt;
	&lt;li&gt;we use Ivy to generate Avro&apos;s pom file.  if we must use Maven to publish, can you please generate the pom this way? we should not maintain our dependencies two places, ivy.xml and avro.pom.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12799919" author="kimballa" created="Wed, 13 Jan 2010 20:41:02 +0000"  >&lt;p&gt;Doug,&lt;/p&gt;

&lt;p&gt;This mirrors the framework already in use via &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5107&quot; title=&quot;split the core, hdfs, and mapred jars from each other and publish them independently to the Maven repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-5107&quot;&gt;&lt;del&gt;HADOOP-5107&lt;/del&gt;&lt;/a&gt;. Hadoop already has an established resolver set which will read from local a mvn repository; no further modifications to those three projects are required if we integrate with their toolchain on this end. This is, for example, the accepted way to test how changes made to hadoop-core affect the mapreduce project.  In any case, I think this is superior to manually copying build artifacts to specific directories.&lt;/p&gt;

&lt;p&gt;As for your other comments &amp;#8211; all good suggestions. I had missed the auto-generated pom. I&apos;ve removed the static pom file, and cleaned up the other things you mentioned.&lt;/p&gt;</comment>
                            <comment id="12799920" author="kimballa" created="Wed, 13 Jan 2010 20:41:32 +0000"  >&lt;p&gt;Re-uploading patch with &lt;tt&gt;--no-prefix&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="12799942" author="cutting" created="Wed, 13 Jan 2010 21:31:08 +0000"  >&lt;p&gt;We don&apos;t have to rigidly emulate Hadoop&apos;s Ivy/Maven toolchain.  Hadoop already uses Ivy to retrieve its dependencies, so using the local Ivy repo imposes little on Hadoop.   Is there another reason why you prefer to publish to Maven&apos;s local repo rather than Ivy&apos;s?&lt;/p&gt;

&lt;p&gt;&amp;gt; In any case, I think this is superior to manually copying build artifacts to specific directories.&lt;/p&gt;

&lt;p&gt;I agree.  That&apos;s why I suggested we try Ivy&apos;s publish task before we resort to using Maven.&lt;/p&gt;

&lt;p&gt;If you&apos;re stuck on not changing Hadoop and conforming to that build, can we at least retrieve maven-ant-tasks using Ivy as a part of our build configuration?  This should be a one-line change to Avro&apos;s ivy.xml, no?&lt;/p&gt;</comment>
                            <comment id="12799960" author="kimballa" created="Wed, 13 Jan 2010 22:01:24 +0000"  >&lt;p&gt;In general, I&apos;m a fan of writing one patch rather than three if at all possible. This now uses ivy to grab mvn-ant-tasks.&lt;/p&gt;</comment>
                            <comment id="12799988" author="cutting" created="Wed, 13 Jan 2010 22:56:52 +0000"  >&lt;p&gt;This is really close:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the ant tasks don&apos;t need to explicitly depend on tasks that their dependencies already depend on&lt;/li&gt;
	&lt;li&gt;we shouldn&apos;t have the maven-ant-tasks version number both in ivy.xml and build.xml &amp;#8211; that&apos;s two places to update when we upgrade.&lt;/li&gt;
	&lt;li&gt;we shouldn&apos;t cut-and-paste the pom-creation around, but rather make it a task.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12799989" author="cutting" created="Wed, 13 Jan 2010 22:57:46 +0000"  >&lt;p&gt;Here&apos;s a version that addresses these issues.&lt;/p&gt;</comment>
                            <comment id="12799993" author="kimballa" created="Wed, 13 Jan 2010 23:00:55 +0000"  >&lt;p&gt;+1 to that patch&lt;/p&gt;</comment>
                            <comment id="12800011" author="cutting" created="Wed, 13 Jan 2010 23:27:14 +0000"  >&lt;p&gt;I just committed this.  Thanks, Aaron.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430170" name="AVRO-314.2.patch" size="4479" author="kimballa" created="Wed, 13 Jan 2010 20:41:32 +0000"/>
                            <attachment id="12430178" name="AVRO-314.3.patch" size="4330" author="kimballa" created="Wed, 13 Jan 2010 22:01:24 +0000"/>
                            <attachment id="12430185" name="AVRO-314.patch" size="4455" author="cutting" created="Wed, 13 Jan 2010 22:57:46 +0000"/>
                            <attachment id="12430090" name="AVRO-314.patch" size="7863" author="kimballa" created="Wed, 13 Jan 2010 03:15:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jan 2010 17:28:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94641</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-315] Performance improvements to BinaryDecoder</title>
                <link>https://issues.apache.org/jira/browse/AVRO-315</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The forthcoming patch improves the performance of BinaryDecoder.readLong(), readFloat() and readDouble().&lt;/p&gt;

&lt;p&gt;The test-patch has a command-line program Perf in org.apache.avro.io in the (test part of the source directory) which tests the performance of readInt() (which calls readLong())  readFloat() and readDouble(). On my machine, the patch improves the performance by 10% for readInt() and about 50% for readFloat() and readDouble().&lt;/p&gt;

&lt;p&gt;The idea is to unroll the loops in readLong(), readFloat() and readDouble(). There is a small change in doReadBytes() which checks for most common condition before less common ones.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445383">AVRO-315</key>
            <summary>Performance improvements to BinaryDecoder</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 07:04:48 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Thu, 14 Jan 2010 12:48:38 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12799847" author="kevinoliver" created="Wed, 13 Jan 2010 17:56:13 +0000"  >&lt;p&gt;This should be nice. We&apos;ve seen readLong() take up quite a bit of time in the profiler. &lt;/p&gt;</comment>
                            <comment id="12799850" author="cutting" created="Wed, 13 Jan 2010 18:02:48 +0000"  >&lt;p&gt;I saw no improvement to readInt() on Ubuntu 9.10 using Java 1.6.0_15.&lt;/p&gt;

&lt;p&gt;I was able to further improve readFloat() and readDouble() by ~12% by pre-allocating the buffer.&lt;/p&gt;

&lt;p&gt;I attached a new version of the patch with that change.&lt;/p&gt;</comment>
                            <comment id="12800068" author="scott_carey" created="Thu, 14 Jan 2010 01:21:16 +0000"  >&lt;p&gt;I could not reproduce the performance improvement from unrolling the loop.  I was able to modify the loop to remove a conditional which had a small impact and it is ugly:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n = 0;
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; b;
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; shift = 0;
    &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; {
      b = in.read();
      n |= (b &amp;amp; 0x7f) &amp;lt;&amp;lt; shift;
      shift += 7;
    } &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (((b ^ 0xFFFFFF00) &amp;amp; 0xFFFFFF80) == 0xFFFFFF80);
    
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (-1 == b) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EOFException();
    } 
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; n;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have modified the test to pick a broader set of integers to serialize, increased its duration, and increased its warmup time.  It is nearly stable now, the JVM is usually done compiling before the test starts.  I run the Integer and Long test twice to help guage the stability.&lt;/p&gt;

&lt;p&gt;OS X Snow Leopard, 1.6.0_15, -server -XX:+UseCompressedOops.&lt;/p&gt;

&lt;p&gt;Reviewing the code, the primary problem looks to be the ubiquitous use of this slow function:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;InputStream.read();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, this old stream API is slow.  It is optimized for bulk transfer and very poor for reading small chunks at once.  Ideally one should always use the bulk copy operators on InputStream and its relations if possible.&lt;/p&gt;

&lt;p&gt;I made a quick and dirty stab at removing that problem by adding a byte[] buffer in this class and buffering access to the input stream, allowing array access to retrieve bytes.&lt;/p&gt;

&lt;p&gt;The result is about 2x to 3x as fast!&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a patch that has a test class (modified from Thiru&apos;s) and a prototype &quot;FastBinaryDecoder.java&quot;.  There is room for improvement on top of this.   This is a prototype to share &amp;#8211; needs some work to clean it up and merge it into BinaryDecoder.  Plus, it is easier to test one versus the other when they are in different classes.  The new test class has only one line to change to switch implementations.&lt;/p&gt;

&lt;p&gt;The idea is to use array accessors as often as possible, and reduce the number of times that bounds have to be checked.  There are ways we could reduce this even further.&lt;br/&gt;
The nio ByteBuffer API is smarter about this sort of thing than InputStream, but raw byte[] access tends to be the fastest, even if it means making an extra copy.  An extra 2k copy is almost free (fits in L1 cache) &amp;#8211; two or three orders of magnitude faster than a large in-process memcopy or copy from out of process. &lt;/p&gt;

&lt;p&gt;Sample test output below:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;BinaryDecoder (moodified, including Thiru&apos;s changes but without the loop unrolling):
-----
ReadInt({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;int&quot;}): 945 ms, 31.731626594910882 million numbers decoded /sec
ReadLong({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;long&quot;}): 1434 ms, 20.92050209205021 million numbers decoded /sec
ReadInt({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;int&quot;}): 831 ms, 36.08644869649733 million numbers decoded /sec
ReadLong({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;long&quot;}): 1430 ms, 20.972303975370128 million numbers decoded /sec
ReadFloat({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;float&quot;}): 636 ms, 47.09687041296106 million numbers decoded /sec
ReadDouble({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;double&quot;}): 772 ms, 38.81877068716988 million numbers decoded /sec

FastBinaryDecoder:
--------
ReadInt({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;int&quot;}): 298 ms, 100.49746243907342 million numbers decoded /sec
ReadLong({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;long&quot;}): 793 ms, 37.79032416540069 million numbers decoded /sec
ReadInt({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;int&quot;}): 291 ms, 102.76084126875385 million numbers decoded /sec
ReadLong({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;long&quot;}): 806 ms, 37.2056106060794 million numbers decoded /sec
ReadFloat({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;float&quot;}): 324 ms, 92.45904064499426 million numbers decoded /sec
ReadDouble({&quot;type&quot;:&quot;array&quot;,&quot;items&quot;:&quot;double&quot;}): 345 ms, 86.7109663359125 million numbers decoded /sec&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12800071" author="scott_carey" created="Thu, 14 Jan 2010 01:24:27 +0000"  >&lt;p&gt;Patch includes test class and prototype FastBinaryDecoder class.&lt;/p&gt;</comment>
                            <comment id="12800112" author="cutting" created="Thu, 14 Jan 2010 04:46:26 +0000"  >&lt;p&gt;Scott: This is great stuff!&lt;/p&gt;

&lt;p&gt;I note that doReadBytes(), once the buffer is exhausted, never calls in.read(bytes, start, length).  Shouldn&apos;t we bypass the buffer in this case?&lt;/p&gt;

&lt;p&gt;This changes semantics a bit, since currently BinaryDecoder does not buffer.  For example, in DataFileReader seeks the underlying stream.  So, in that case, we&apos;ll need to be able to reset the Decoder&apos;s buffer after a seek.  There could also be places where an application reads alternately from the Decoder and its underlying InputStream, although, at a glance, I can&apos;t find any such in the code currently.&lt;/p&gt;</comment>
                            <comment id="12800170" author="thiru_mg" created="Thu, 14 Jan 2010 11:17:11 +0000"  >&lt;p&gt;As pointed out by Doug, this introduces a change in semantics.&lt;/p&gt;

&lt;p&gt;I think it&apos;s desirable to keep the property that the decoder does not take more bytes off the input stream than necessary. That property will allow the input stream not rewindable.&lt;/p&gt;

&lt;p&gt;In any case, since the optimization for readLong() did not show much improvement in performance and the we may need more time to settle on the new proposal, I&apos;m going ahead and committing the other optimization for readFloat() and readDouble(). I&apos;ve created a new JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-327&quot; title=&quot;Performance improvements to BinaryDecoder.readLong()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-327&quot;&gt;&lt;del&gt;AVRO-327&lt;/del&gt;&lt;/a&gt; to take improvement to readLong() forward.&lt;/p&gt;</comment>
                            <comment id="12800185" author="thiru_mg" created="Thu, 14 Jan 2010 12:48:38 +0000"  >&lt;p&gt;Committed revision 899182. I&apos;ve retained the improved tests by Scott. Thanks Scott.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12445497">AVRO-327</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12430210" name="AVRO-315-prototype.patch" size="16252" author="scott_carey" created="Thu, 14 Jan 2010 01:24:27 +0000"/>
                            <attachment id="12430132" name="AVRO-315-test.patch" size="7526" author="thiru_mg" created="Wed, 13 Jan 2010 12:48:48 +0000"/>
                            <attachment id="12430154" name="AVRO-315.patch" size="2050" author="cutting" created="Wed, 13 Jan 2010 18:02:48 +0000"/>
                            <attachment id="12430105" name="AVRO-315.patch" size="4623" author="thiru_mg" created="Wed, 13 Jan 2010 07:06:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jan 2010 17:56:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94642</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-316] Optiminzing inner loop functions of Avro io</title>
                <link>https://issues.apache.org/jira/browse/AVRO-316</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The methods advance() and pushProduction() of org.apache.avro.io.parsing.Parser class are invoked at least once per read/write call on ValidatingDecoder, ResolvingDecoder and ValidatingEncoder. Any optimization in these functions will improve overall performance when using these classes.&lt;/p&gt;

&lt;p&gt;Try org.apacge.avro.io.Perf -V to see the effect of this patch on the performance. On my machine it gives about 5 to 8% improvement.&lt;/p&gt;

&lt;p&gt;The optimizations are:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Reorder the code within advance() so that the most frequent paths involve minimal comparisons.&lt;/li&gt;
	&lt;li&gt;Repleace Symbol.CONTINUE with null to indicate that next symbol on the stack needs to be looked at.&lt;/li&gt;
	&lt;li&gt;Get rid of a parameter to pushProduction. This parameter was used only in one call site of that function; others pass null. Refactored the code so that these invocations do not pay for that piece of logic that they don&apos;t use.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12445399">AVRO-316</key>
            <summary>Optiminzing inner loop functions of Avro io</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 12:41:29 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Fri, 15 Jan 2010 17:20:30 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12799852" author="cutting" created="Wed, 13 Jan 2010 18:06:51 +0000"  >&lt;p&gt;+1 These changes look good to me.&lt;/p&gt;</comment>
                            <comment id="12800197" author="thiru_mg" created="Thu, 14 Jan 2010 13:41:03 +0000"  >&lt;p&gt;Committed revision 899195.&lt;/p&gt;</comment>
                            <comment id="12800422" author="cutting" created="Thu, 14 Jan 2010 23:30:36 +0000"  >&lt;p&gt;This commit creates a javadoc warning:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;javadoc&amp;#93;&lt;/span&gt; src/java/org/apache/avro/io/parsing/Parser.java:129: warning - @param argument &quot;input&quot; is not a parameter name.&lt;/p&gt;

&lt;p&gt;This causes &apos;ant clean test-java&apos; to fail.&lt;/p&gt;

&lt;p&gt;Reverting, since this also depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-313&quot; title=&quot;Default values for fields or records and array (or map) don&amp;#39;t work with ResolvingDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-313&quot;&gt;&lt;del&gt;AVRO-313&lt;/del&gt;&lt;/a&gt;, which breaks tests in a more substantial way.&lt;/p&gt;</comment>
                            <comment id="12800764" author="thiru_mg" created="Fri, 15 Jan 2010 17:20:30 +0000"  >&lt;p&gt;Committed revision 899720. Fixed the documentation comment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430131" name="AVRO-316-test.patch" size="7526" author="thiru_mg" created="Wed, 13 Jan 2010 12:44:43 +0000"/>
                            <attachment id="12430129" name="AVRO-316.patch" size="10631" author="thiru_mg" created="Wed, 13 Jan 2010 12:42:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jan 2010 18:06:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79695</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-317] restore Java interop testing</title>
                <link>https://issues.apache.org/jira/browse/AVRO-317</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Enable interop testing for Java in the post-&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-163&quot; title=&quot;Each language Avro supports should be a separate package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-163&quot;&gt;&lt;del&gt;AVRO-163&lt;/del&gt;&lt;/a&gt; world.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445418">AVRO-317</key>
            <summary>restore Java interop testing</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 17:39:54 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Wed, 13 Jan 2010 22:05:18 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12799905" author="cutting" created="Wed, 13 Jan 2010 19:54:53 +0000"  >&lt;p&gt;Here&apos;s a patch for this.&lt;/p&gt;</comment>
                            <comment id="12799910" author="hammer" created="Wed, 13 Jan 2010 20:10:06 +0000"  >&lt;p&gt;+1 to the approach, it seems reasonable. Can we create a follow-up ticket to test RPC?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12444646">AVRO-287</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12430166" name="AVRO-317.patch" size="6361" author="cutting" created="Wed, 13 Jan 2010 19:54:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jan 2010 20:10:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94644</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-318] Build.sh cleanup: md5/sha1 on Mac OS X, don&apos;t fail hard if build/ exists, and play nice with Forrest</title>
                <link>https://issues.apache.org/jira/browse/AVRO-318</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I encountered three problems when trying to build Avro today (via &quot;./build.sh dist) to test interop:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;md5sum and sha1sum do not exist on Mac (md5 is the replacement for the former)&lt;/li&gt;
	&lt;li&gt;If &quot;build/&quot; exists, you fail hard with &quot;mkdir: build: File exists&quot;&lt;/li&gt;
	&lt;li&gt;If you don&apos;t have Java 5, Forrest fails with &quot;&apos;java5.home&apos; is not defined.  Forrest requires Java 5.&quot; and other good stuff.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12445427">AVRO-318</key>
            <summary>Build.sh cleanup: md5/sha1 on Mac OS X, don&apos;t fail hard if build/ exists, and play nice with Forrest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 19:03:44 +0000</created>
                <updated>Tue, 16 Mar 2010 05:43:57 +0000</updated>
                            <resolved>Tue, 16 Feb 2010 23:06:33 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12829530" author="hammer" created="Thu, 4 Feb 2010 08:23:09 +0000"  >&lt;p&gt;Blocker for 1.3 release. We need to play nicely with OS X.&lt;/p&gt;</comment>
                            <comment id="12832316" author="hammer" created="Thu, 11 Feb 2010 00:12:18 +0000"  >&lt;p&gt;Can someone with more bash skills than me clean up our build.sh so that folks with a Mac can build Avro out of the box without ugly errors?&lt;/p&gt;</comment>
                            <comment id="12834018" author="cutting" created="Mon, 15 Feb 2010 23:25:46 +0000"  >&lt;p&gt;The Java 5 stuff is just a requirement of Forrest.  No way around it.&lt;/p&gt;

&lt;p&gt;Fixing the md5 stuff should be easy, but I don&apos;t have a Mac to do it on.&lt;/p&gt;</comment>
                            <comment id="12834499" author="cutting" created="Tue, 16 Feb 2010 22:05:56 +0000"  >&lt;p&gt;Is this really a blocker for 1.3?&lt;/p&gt;</comment>
                            <comment id="12834507" author="hammer" created="Tue, 16 Feb 2010 22:12:50 +0000"  >&lt;p&gt;&lt;a href=&quot;http://raamdev.com/howto-install-md5sum-sha1sum-on-mac-os-x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://raamdev.com/howto-install-md5sum-sha1sum-on-mac-os-x&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&quot;/sbin/md5 -r &amp;lt;filename&amp;gt;&quot; can replace &quot;md5sum&quot; for the Mac; for sha1sum, you&apos;ll need openssl, and you can used &quot;openssl sha1 &amp;lt;filename&amp;gt;&quot;, though I&apos;m not sure about the format of the output&lt;/p&gt;</comment>
                            <comment id="12834510" author="hammer" created="Tue, 16 Feb 2010 22:16:24 +0000"  >&lt;p&gt;Carl Steinbach notes that &quot;sudo port install coreutils&quot; will get both of these utilities for Mac users.&lt;/p&gt;</comment>
                            <comment id="12834511" author="scott_carey" created="Tue, 16 Feb 2010 22:16:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;The Java 5 stuff is just a requirement of Forrest. No way around it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As in Forrest won&apos;t build without Java5 &amp;#8211; Java6 breaks it?  or as in that env.variable must be set?&lt;/p&gt;

&lt;p&gt;If the latter, just have the script check to see if the env var is set, and if not then set it locally to &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/System/Library/Frameworks/JavaVM.framework/Versions/1.5/Home/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which on all recent Macs should be a symlink to either an actual java 1.5, or 1.6 if that doesn&apos;t exist.&lt;/p&gt;

&lt;p&gt;bin/java is contained within.&lt;/p&gt;

&lt;p&gt;On Snow Leopard (OSX 10.6) there is no Java 5, only Zul... err Java 6.&lt;/p&gt;

&lt;p&gt;Snow Leopard&apos;s java version mapping directory looks like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ls -lh /System/Library/Frameworks/JavaVM.framework/Versions/
total 64
lrwxr-xr-x  1 root  wheel     5B Dec 17 09:46 1.3 -&amp;gt; 1.3.1
drwxr-xr-x  3 root  wheel   102B Jul 20  2009 1.3.1
lrwxr-xr-x  1 root  wheel    10B Dec 17 09:46 1.4 -&amp;gt; CurrentJDK
lrwxr-xr-x  1 root  wheel    10B Dec 17 09:46 1.4.2 -&amp;gt; CurrentJDK
lrwxr-xr-x  1 root  wheel    10B Dec 17 09:46 1.5 -&amp;gt; CurrentJDK
lrwxr-xr-x  1 root  wheel    10B Dec 17 09:46 1.5.0 -&amp;gt; CurrentJDK
lrwxr-xr-x  1 root  wheel     5B Dec 17 09:46 1.6 -&amp;gt; 1.6.0
drwxr-xr-x  8 root  wheel   272B Sep 29 10:06 1.6.0
lrwxr-xr-x  1 root  wheel     3B Dec 17 09:46 CurrentJDK -&amp;gt; 1.6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12834512" author="hammer" created="Tue, 16 Feb 2010 22:18:53 +0000"  >&lt;p&gt;Here&apos;s a patch that adds a comment to README.txt about the dependency of the &quot;dist&quot; target on GNU coreutils.&lt;/p&gt;</comment>
                            <comment id="12834518" author="cutting" created="Tue, 16 Feb 2010 22:26:45 +0000"  >&lt;p&gt;Here&apos;s a patch that clarifies these requirements in README.txt.&lt;/p&gt;</comment>
                            <comment id="12834524" author="cutting" created="Tue, 16 Feb 2010 22:32:54 +0000"  >&lt;p&gt;Scott, Forrest dies when run with Java 1.5.  Forrest may be a dead project.  We should probably move the documentation to some other system.  But, in the meantime, it&apos;s what we&apos;re using.&lt;/p&gt;</comment>
                            <comment id="12834527" author="cutting" created="Tue, 16 Feb 2010 22:36:52 +0000"  >&lt;p&gt;Hammer: this dependency is not Python-specific, since these are called directly from the top-level build.sh.&lt;/p&gt;</comment>
                            <comment id="12834532" author="massie" created="Tue, 16 Feb 2010 22:49:18 +0000"  >&lt;p&gt;I&apos;m +1 on Doug&apos;s patch to simply document the requirements (e.g. md5sum).&lt;/p&gt;

&lt;p&gt;AFAIK, this issue only effects people who want to build all the release artifacts themselves on MacOS.&lt;/p&gt;

&lt;p&gt;In the future, we can create simple bash functions to make generating md5/sha1 signatures more portable.&lt;/p&gt;
</comment>
                            <comment id="12834538" author="cutting" created="Tue, 16 Feb 2010 23:06:33 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                            <comment id="12845720" author="patrickangeles" created="Tue, 16 Mar 2010 05:43:57 +0000"  >&lt;p&gt;Managed to get Forrest to run on Snow Leopard via the workaround described here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.oneswarm.org/index.php/OS_X_10.6_Snow_Leopard&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.oneswarm.org/index.php/OS_X_10.6_Snow_Leopard&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;More context:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://discussions.apple.com/thread.jspa?threadID=2140099&amp;amp;tstart=0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://discussions.apple.com/thread.jspa?threadID=2140099&amp;amp;tstart=0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s fugly but it works.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436047" name="AVRO-318.patch" size="915" author="cutting" created="Tue, 16 Feb 2010 22:26:45 +0000"/>
                            <attachment id="12436046" name="AVRO-318.patch" size="495" author="hammer" created="Tue, 16 Feb 2010 22:18:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Feb 2010 23:25:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79697</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-319] Replace Forrest for documentation generation</title>
                <link>https://issues.apache.org/jira/browse/AVRO-319</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Drop options in the comments and we can decide on a better system than Forrest&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445428">AVRO-319</key>
            <summary>Replace Forrest for documentation generation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 19:05:36 +0000</created>
                <updated>Mon, 27 Jan 2014 02:02:09 +0000</updated>
                                                                            <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12799874" author="hammer" created="Wed, 13 Jan 2010 19:05:55 +0000"  >&lt;p&gt;Sphinx is popular in the Python community: &lt;a href=&quot;http://sphinx.pocoo.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sphinx.pocoo.org&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12799883" author="cutting" created="Wed, 13 Jan 2010 19:18:08 +0000"  >&lt;p&gt;There&apos;s a plugin for Forrest that generates Anakia files.  This was used by the Incubator to switch from Forrest to Anakia due to frustration with Forrest.&lt;/p&gt;

&lt;p&gt;Anakia is another Apache, Java-based, XML-in, HTML-out system, except it&apos;s faster, easier to use, etc. than Forrest.  HTTPD and APR, no-nonsense C projects, no fans of Java, use Anakia for their websites: &lt;a href=&quot;https://svn.apache.org/repos/asf/httpd/site/trunk/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/httpd/site/trunk/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12800377" author="phunt" created="Thu, 14 Jan 2010 21:52:25 +0000"  >&lt;p&gt;fwiw in zookeeper we&apos;ve seen a few major complaints on forrest; 1) use of xml for markup, 2) the project seems very &quot;cobbled up&quot;&lt;br/&gt;
in the sense that there&apos;s all kinds of third party libs are used that make things very difficult to debug/fix when problems occur, and 3)&lt;br/&gt;
the fact that the project is not making progress (still requires java5 and no releases for &amp;gt; 2 yrs)&lt;/p&gt;

&lt;p&gt;zookeeper has been considering sphinx and possibly webby  &lt;a href=&quot;http://webby.rubyforge.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://webby.rubyforge.org/&lt;/a&gt; (python/ruby respectively)&lt;/p&gt;

&lt;p&gt;both of these implementations allow simpler/focused markup forms&lt;/p&gt;

&lt;p&gt;thoughts on xml vs &quot;markup&quot;? I believe sphinx uses reST while webby allows a number of diff input formats. sphinx/webby both allow &lt;br/&gt;
html/pdf output. First I&apos;ve heard of anakia, but it doesn&apos;t seem like a good option for us (zk) as it uses xml for input.&lt;/p&gt;</comment>
                            <comment id="12875933" author="hammer" created="Sat, 5 Jun 2010 20:20:13 +0000"  >&lt;p&gt;Making a blocker for 1.4.0. No one should have to suffer the pain that I am suffering right now trying to get Java 5 installed to build a release. Forrest is a plague upon Apache projects.&lt;/p&gt;</comment>
                            <comment id="12876327" author="cutting" created="Mon, 7 Jun 2010 17:40:55 +0000"  >&lt;p&gt;I question whether this should be a blocker.  Has someone volunteered to implement this?  Would you really want to block a 1.4.0 release if this is not complete?&lt;/p&gt;</comment>
                            <comment id="12893435" author="jmccarrell" created="Thu, 29 Jul 2010 00:11:45 +0000"  >&lt;p&gt;The Anakia project: &lt;a href=&quot;http://velocity.apache.org/anakia/releases/anakia-1.0/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://velocity.apache.org/anakia/releases/anakia-1.0/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12893530" author="jmccarrell" created="Thu, 29 Jul 2010 06:32:24 +0000"  >&lt;p&gt;proposal:&lt;/p&gt;

&lt;p&gt;the goal is: to end the suffering of forrest&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;other possible documentation refactoring is not in scope&lt;br/&gt;
follow the existing model as much as possible:&lt;/li&gt;
	&lt;li&gt;only change what has to change; don&apos;t make additional work&lt;/li&gt;
	&lt;li&gt;existing language formatters do not change
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;C++ : doxygen&lt;/li&gt;
		&lt;li&gt;C : asciidoc&lt;/li&gt;
		&lt;li&gt;java : javadoc&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;language doc generation steps are separate from the top level docs generation&lt;br/&gt;
desired style will resemble httpd.apache.org&lt;/li&gt;
	&lt;li&gt;use anakia to build the top level site&lt;/li&gt;
	&lt;li&gt;but only the top level site gets generated via anakia&lt;br/&gt;
PDF support is dropped as of 1.4&lt;/li&gt;
	&lt;li&gt;because anakia doesn&apos;t support it&lt;br/&gt;
older versions of the documentation get stored as is (post rendering) in svn?&lt;br/&gt;
  or live on the site?&lt;br/&gt;
  open issue&lt;br/&gt;
to build the top level site docs requires:&lt;/li&gt;
	&lt;li&gt;a modern jvm and ant installed&lt;/li&gt;
	&lt;li&gt;svn checkout trunk&lt;/li&gt;
	&lt;li&gt;cd xdocs &amp;amp;&amp;amp; ant docs&lt;/li&gt;
	&lt;li&gt;source: xdocs; target: build/docs
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;anakia/velocity jar(s) checked into svn&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;so that means these sets of files:&lt;/p&gt;

&lt;p&gt;proteus-&amp;gt; find site/author/content/xdocs -type f | grep -v .svn&lt;br/&gt;
site/author/content/xdocs/credits.xml&lt;br/&gt;
site/author/content/xdocs/index.xml&lt;br/&gt;
site/author/content/xdocs/irc.xml&lt;br/&gt;
site/author/content/xdocs/issue_tracking.xml&lt;br/&gt;
site/author/content/xdocs/mailing_lists.xml&lt;br/&gt;
site/author/content/xdocs/releases.xml&lt;br/&gt;
site/author/content/xdocs/site.xml&lt;br/&gt;
site/author/content/xdocs/tabs.xml&lt;br/&gt;
site/author/content/xdocs/version_control.xml&lt;/p&gt;

&lt;p&gt;proteus-&amp;gt; find trunk/doc -type f | grep -v .svn&lt;br/&gt;
trunk/doc/build.xml&lt;br/&gt;
trunk/doc/src/content/xdocs/idl.xml&lt;br/&gt;
trunk/doc/src/content/xdocs/index.xml&lt;br/&gt;
trunk/doc/src/content/xdocs/site.xml&lt;br/&gt;
trunk/doc/src/content/xdocs/spec.xml&lt;br/&gt;
trunk/doc/src/content/xdocs/tabs.xml&lt;br/&gt;
trunk/doc/src/resources/images/avro-logo.png&lt;br/&gt;
trunk/doc/src/resources/images/favicon.ico&lt;br/&gt;
trunk/doc/src/resources/images/hadoop-logo.jpg&lt;br/&gt;
trunk/doc/src/skinconf.xml&lt;/p&gt;

&lt;p&gt;are changed, and pretty much nothing else is.&lt;/p&gt;</comment>
                            <comment id="12893709" author="scott_carey" created="Thu, 29 Jul 2010 17:14:52 +0000"  >&lt;p&gt;Thats a clean quick way to get off of Forrest.&lt;/p&gt;

&lt;p&gt;But yuck, Anakina makes ugly web pages.  Tomcat and httpd look like the web in 1998.  Any examples that actually look decent?&lt;/p&gt;

&lt;p&gt;We can improve the site design, look/feel/navigation any other time, for now getting rid of the Forrest mess would be a big improvement &amp;#8211; many more people would be able to do a full build + package for testing.   &lt;/p&gt;

&lt;p&gt;How important is pdf generation of docs?  It is definitely nice for the Avro spec, but if the HTML version prints decently we may be able to get by for a while without it.&lt;/p&gt;</comment>
                            <comment id="12893773" author="jmccarrell" created="Thu, 29 Jul 2010 19:03:39 +0000"  >&lt;p&gt;Yup, the site design is not terribly modern &amp;#8211; tables, etc.&lt;/p&gt;

&lt;p&gt;re: PDF of docs&lt;br/&gt;
one possibility would be to convert the docs we want in PDF, like the spec, to something else.&lt;br/&gt;
Perhaps asciidoc -&amp;gt; DocBook -&amp;gt; PDF&lt;/p&gt;</comment>
                            <comment id="12893871" author="cutting" created="Fri, 30 Jul 2010 00:15:48 +0000"  >&lt;p&gt;I would support Jeff&apos;s proposal.  It would provide a significant improvement with moderate effort.  PDF is not a priority to me.  I&apos;ve used Anakia and it is fast and relatively painless.&lt;/p&gt;

&lt;p&gt;Jeff, are you volunteering to implement this?&lt;/p&gt;

&lt;p&gt;Or is anyone else willing to volunteer to convert the above listed documents to asciidoc or some other format?&lt;/p&gt;</comment>
                            <comment id="12893876" author="jmccarrell" created="Fri, 30 Jul 2010 00:28:21 +0000"  >&lt;p&gt;Yes, I am willing to do the work  if the community decides this proposal is the way to go.&lt;/p&gt;</comment>
                            <comment id="12893879" author="cutting" created="Fri, 30 Jul 2010 00:36:43 +0000"  >&lt;p&gt;So, unless a volunteer steps forward in the next day or so to do this differently, I say go for it.&lt;/p&gt;</comment>
                            <comment id="12902056" author="cutting" created="Tue, 24 Aug 2010 20:25:24 +0000"  >&lt;p&gt;This should not block the 1.4.0 release.&lt;/p&gt;</comment>
                            <comment id="12974563" author="cwsteinbach" created="Thu, 23 Dec 2010 08:18:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-718&quot; title=&quot;Make Forrest work with JDK6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-718&quot;&gt;&lt;del&gt;AVRO-718&lt;/del&gt;&lt;/a&gt; provides a patch that makes it possible to run Forrest with JDK6.&lt;/p&gt;</comment>
                            <comment id="13692752" author="plinnell" created="Tue, 25 Jun 2013 05:11:19 +0000"  >&lt;p&gt;Update ? I&apos;d love to see that we could drop forrest for Bigtop. &lt;/p&gt;</comment>
                            <comment id="13882508" author="plinnell" created="Mon, 27 Jan 2014 02:02:09 +0000"  >&lt;p&gt;Bumping.  I&apos;d love to drop Forrest from Bigtop. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12521095">BIGTOP-65</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12493642">HADOOP-7069</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12466370">WHIRR-19</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12479447">ZOOKEEPER-925</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455465">HIVE-1135</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12493951">AVRO-718</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jan 2010 19:18:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94646</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-320] improvements to avro java tools</title>
                <link>https://issues.apache.org/jira/browse/AVRO-320</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I&apos;d like to make some improvements to Avro&apos;s java tools prior to the 1.3 release, in particular:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rename the jar from avroj.jar to avro-tools.jar.  the avroj name seemed good when this was a shell script, but, as a jar it should perhaps be named consistently with other jars.&lt;/li&gt;
	&lt;li&gt;fix the build to copy the jar file to the top-level dist directory, for inclusion in releases&lt;/li&gt;
	&lt;li&gt;make the help command print the version and a link to the apache license&lt;/li&gt;
	&lt;li&gt;include the Apache license and notice files in the jar&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12445436">AVRO-320</key>
            <summary>improvements to avro java tools</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 20:18:11 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Wed, 13 Jan 2010 23:09:43 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12799961" author="cutting" created="Wed, 13 Jan 2010 22:01:49 +0000"  >&lt;p&gt;Here&apos;s a patch that implements these changes.&lt;/p&gt;</comment>
                            <comment id="12799990" author="kimballa" created="Wed, 13 Jan 2010 22:59:09 +0000"  >&lt;p&gt;+1. Patch looks good. &lt;tt&gt;ant dist&lt;/tt&gt; works.&lt;/p&gt;

&lt;p&gt;I ran &lt;tt&gt;./avro-tools-1.2.0-dev.jar help&lt;/tt&gt; which now prints:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Version 1.2.0-dev of Apache Avro
Copyright 2009 The Apache Software Foundation

This product includes software developed at
The Apache Software Foundation (http:&lt;span class=&quot;code-comment&quot;&gt;//www.apache.org/).&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But this is not a link to the license, as your description claims; maybe LICENSE.txt should be updated (in a separate patch?) to contain the actual link to &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12799992" author="kimballa" created="Wed, 13 Jan 2010 22:59:29 +0000"  >&lt;p&gt;er, NOTICE.txt.&lt;/p&gt;</comment>
                            <comment id="12800001" author="cutting" created="Wed, 13 Jan 2010 23:09:43 +0000"  >&lt;p&gt;Thanks for the review, Aaron!&lt;/p&gt;

&lt;p&gt;I re-read the Apache license after I initially filed this, and including these in the jar is sufficient, but displaying the NOTICE.txt is also conventional: it&apos;s meant to be the spash-screen text.&lt;/p&gt;

&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430179" name="AVRO-320.patch" size="13742" author="cutting" created="Wed, 13 Jan 2010 22:01:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jan 2010 22:59:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94647</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-321] Run Java RPC interop tests again</title>
                <link>https://issues.apache.org/jira/browse/AVRO-321</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445440">AVRO-321</key>
            <summary>Run Java RPC interop tests again</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 21:31:04 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 20:14:26 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12799943" author="hammer" created="Wed, 13 Jan 2010 21:31:28 +0000"  >&lt;p&gt;Question: should interop tests use raw sockets or HTTP as a transport, or both?&lt;/p&gt;</comment>
                            <comment id="12800328" author="cutting" created="Thu, 14 Jan 2010 20:02:32 +0000"  >&lt;p&gt;Perhaps we should use command line tools for RPC interop testing?&lt;/p&gt;

&lt;p&gt;Each language could have send and recieve commands with identical parameters, e.g.:&lt;br/&gt;
  send transport host port protocol messageName requestData&lt;br/&gt;
  receive transport port protocol messageName responseData&lt;/p&gt;

&lt;p&gt;Then we could have a top-level testing script that invokes all of these against one another.&lt;/p&gt;

&lt;p&gt;This would either require that we find a way to encode binary request and response data on the command line, or that all implementations support the JSON encoding.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12800354" author="hammer" created="Thu, 14 Jan 2010 20:59:13 +0000"  >&lt;p&gt;To clarify: I used &quot;raw sockets&quot; inappropriately, as pointed out by Chad Harrington on the maling list. I just meant TCP/IP sockets?&lt;/p&gt;</comment>
                            <comment id="12800784" author="philip" created="Fri, 15 Jan 2010 17:41:13 +0000"  >&lt;p&gt;Command line tools would be an easy way to standardize, yes.&lt;/p&gt;</comment>
                            <comment id="12802504" author="cutting" created="Tue, 19 Jan 2010 22:22:16 +0000"  >&lt;p&gt;The problem with the existing Java command line RPC tools is that they presuppose a json decoder implementation.&lt;/p&gt;

&lt;p&gt;To amend this, I propose that, if request or response data is not specified on the command line, then the command line tool should generate a random datum and use that.  Similarly, if the message name is not specified, then the client tool should send a random message from the protocol and the server tool should respond to any message in the protocol.&lt;/p&gt;

&lt;p&gt;The remaining problem is how the server should communicate its port.  I propose that, if the port passed to a server is zero, indicating that a port should be allocated dynamically, then the server should write the port to standard output as its first and only line.  Then a client shell script can do something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;avro-java-tool rpcreceive &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//0.0.0.0:0/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$protocol&quot;&lt;/span&gt; &amp;gt; port &amp;amp;
&lt;/span&gt;sleep 1 # wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; server to start &amp;amp; write port
avro-py-tool rpcsend &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//0.0.0.0:`cat port`&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$protocol&quot;&lt;/span&gt;
&lt;/span&gt;wait # wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; server to exit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would generate a random call from Python to Java.  The top-level interop script would do this some number of times for each language pair.&lt;/p&gt;</comment>
                            <comment id="12802523" author="massie" created="Tue, 19 Jan 2010 22:56:41 +0000"  >&lt;p&gt;+1 on the plan&lt;/p&gt;

&lt;p&gt;We could also avoid the sleep by making the script look more like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#!/bin/sh
avro-java-tool rpcreceive &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//0.0.0.0:0/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$protocol&quot;&lt;/span&gt; | read port
&lt;/span&gt;avro-py-tool rpcsend &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//0.0.0.0:$port&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$protocol&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12802646" author="philip" created="Wed, 20 Jan 2010 03:53:31 +0000"  >&lt;p&gt;I don&apos;t really like missing arguments to rpcsend triggering arbitrary things to be sent.  I&apos;d like to use rpcsend as an interactive tool to interact with real servers, and adding non-determinism seems not nice for that.  At this point, there&apos;s enough special behavior; could we just name the tool &quot;interop&quot;, and use that?  It may share code or behavior with &quot;rpcsend&quot;, but I think it would be clearer if it the name were independent.&lt;/p&gt;

&lt;p&gt;Alternately, I think it&apos;s totally fair game to generate or check-in sample data (perhaps in AvroDataFile format) to the repo and have a command-line flag that reads the input from a file.  That avoids the JSON decoder problem, since the file has binary encoded data.&lt;/p&gt;</comment>
                            <comment id="12805273" author="cutting" created="Tue, 26 Jan 2010 23:17:50 +0000"  >&lt;p&gt;Here&apos;s a patch that contains a script to generate RPC interop data.  It writes files in share/test/interop/rpc/$message/$call/&lt;/p&gt;
{request,response}
&lt;p&gt;.avro, where $message is the message name and $call is a directory per request/response pair.  The request and response data are in avro data files that contain a single request and response.  Currently the script generates calls for the messages in simple.avpr.&lt;/p&gt;

&lt;p&gt;My idea is that we commit the output of this script, then use command line tools in each language to read these and send the request data and check that the response data matches, etc.&lt;/p&gt;

&lt;p&gt;Does this look like the right direction for rpc interop?&lt;/p&gt;</comment>
                            <comment id="12805592" author="philip" created="Wed, 27 Jan 2010 17:57:52 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;I agree that we should commit the outputs (as well as the script that generated them).&lt;/p&gt;</comment>
                            <comment id="12828295" author="cutting" created="Mon, 1 Feb 2010 22:09:09 +0000"  >&lt;p&gt;Here&apos;s a complete version of RPC interop tests.  It currently only runs java-versus-java, but is intended to handle all language pairs.&lt;/p&gt;

&lt;p&gt;It assumes that each implementation will have a send and receive script that accept the following parameters:&lt;/p&gt;

&lt;p&gt;  uri protocol message -file data&lt;/p&gt;

&lt;p&gt;&apos;uri&apos;  is an HTTP url naming the service.  The server script is started with URI of &lt;a href=&quot;http://0.0.0.0:0/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://0.0.0.0:0/&lt;/a&gt;, meaning to start a server on a newly allocated port on every interface.  The server script should print to standard output &apos;Port: $PORT&apos; to identify the port used.&lt;/p&gt;

&lt;p&gt;&apos;protocol&apos; names a file containing an Avro protocol to be used.&lt;/p&gt;

&lt;p&gt;&apos;message&apos; names a message within that protocol.&lt;/p&gt;

&lt;p&gt;&apos;data&apos; names an Avro data file with a single datum.  The datum passed to the server is a record matching the message&apos;s parameter schema.  The datum passed to the client matches the message&apos;s return type.&lt;/p&gt;

&lt;p&gt;The server script should accept one request and exit.  The client script should send one request and exit.&lt;/p&gt;</comment>
                            <comment id="12828508" author="philip" created="Tue, 2 Feb 2010 07:22:06 +0000"  >&lt;p&gt;Looks good overall.  The proof will be when we add a language or two to this suite.  Also, should there be an ant target that runs at least what we have here?  Or, rather, a build.sh target?&lt;/p&gt;

&lt;p&gt;For my edification/education, what&apos;s the difference between &apos;@&apos; and &apos;$&apos; in ant, in the segment below?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        &amp;lt;sysproperty key=&quot;test.dir&quot; value=&quot;@{test.dir}&quot;/&amp;gt;
        &amp;lt;sysproperty key=&quot;share.dir&quot; value=&quot;${share.dir}&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;RpcReceiveTool.java--sleep(1000)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why did you need to insert a sleep in here?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Usage: uri protocolFile message_name [ -data d | -file f ]&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this might be more appropriately &quot;uri protocol_file message_name (-&lt;del&gt;data d|&lt;/del&gt;-file f)&quot; to indicate that one of data or file is required.  We should file a bug for the fact that HttpServer doesn&apos;t let you specify what IP to bind to.  (Same goes for RpcSendTool.) &lt;/p&gt;

&lt;p&gt;We should in theory check the scheme of the URI too for valid values.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;datum = Util.datumFromFile(file.value(opts)); &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do we need to check that the file&apos;s schema and the protocol schema are identical?  Or, rather, read the file using the protocol schema: yes, I think we need to do the latter.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;static Object datumFromFile(String file)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m a bit of a worrywart: if this sends only one request (it&apos;s conceivable for it to replay a set of them), we should perhaps check that in.hasNext() is false.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;TestRpcReceiveAndSendTools.java&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There&apos;s no test for the &quot;-file&quot; path.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;share/test/interop/bin/test_rpc_interop.sh: sleep 1&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Might be nice to leave a comment why that sleep needs to be there.  I tried a couple of things, but couldn&apos;t get around it.&lt;/p&gt;</comment>
                            <comment id="12828760" author="cutting" created="Tue, 2 Feb 2010 20:53:50 +0000"  >&lt;p&gt;&amp;gt; Or, rather, a build.sh target? &lt;/p&gt;

&lt;p&gt;Oops.  I meant to add it to the &apos;test&apos; target there.  Done.&lt;/p&gt;

&lt;p&gt;&amp;gt; what&apos;s the difference between &apos;@&apos; and &apos;$&apos; in ant, in the segment below&lt;/p&gt;

&lt;p&gt;@ refers to a task parameter, while $ refers to a property.  They&apos;re different namespaces in Ant.&lt;/p&gt;

&lt;p&gt;&amp;gt; RpcReceiveTool.java--sleep(1000)&lt;/p&gt;

&lt;p&gt;Without that the server would sometimes exit before it had written the response back to the client.  There&apos;s probably a better way of doing this.  Ideas?&lt;/p&gt;

&lt;p&gt;&amp;gt; I think this might be more appropriately &quot;uri protocol_file message_name (-data d|-file f)&quot; to indicate that one of data or file is required.&lt;/p&gt;

&lt;p&gt;Done.&lt;/p&gt;

&lt;p&gt;&amp;gt; read the file using the protocol schema:&lt;/p&gt;

&lt;p&gt;Done.&lt;/p&gt;

&lt;p&gt;&amp;gt; we should perhaps check that in.hasNext() is false.&lt;/p&gt;

&lt;p&gt;I don&apos;t see the point.  This method is defined to read and return the first entry from a file, not the only entry.&lt;/p&gt;

&lt;p&gt;&amp;gt; There&apos;s no test for the &quot;-file&quot; path.&lt;/p&gt;

&lt;p&gt;That&apos;s now tested by the top-level build.&lt;/p&gt;

&lt;p&gt;&amp;gt; Might be nice to leave a comment why that sleep needs to be there.&lt;/p&gt;

&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="12828773" author="cutting" created="Tue, 2 Feb 2010 21:34:58 +0000"  >&lt;p&gt;This patch subsumes &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-324&quot; title=&quot;Avro tools &amp;quot;rpcsend&amp;quot; and &amp;quot;rpcreceive&amp;quot; should order message name and port the same way&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-324&quot;&gt;&lt;del&gt;AVRO-324&lt;/del&gt;&lt;/a&gt;, which should be closed if this patch is committed.&lt;/p&gt;</comment>
                            <comment id="12829405" author="philip" created="Thu, 4 Feb 2010 02:43:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;&amp;gt; RpcReceiveTool.java--sleep(1000)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Without that the server would sometimes exit before it had written the response back to the client. There&apos;s probably a better way of doing this. Ideas?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Perhaps change HttpServer to use Server.setGracefulShutdown(2000 /* 2 seconds); in stop()?  See &lt;a href=&quot;http://jetty.codehaus.org/jetty/jetty-6/apidocs/index.html?org/mortbay/jetty/Server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jetty.codehaus.org/jetty/jetty-6/apidocs/index.html?org/mortbay/jetty/Server.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If that works (and even if it doesn&apos;t), go ahead and commit!  +1.&lt;/p&gt;</comment>
                            <comment id="12829535" author="hammer" created="Thu, 4 Feb 2010 08:38:13 +0000"  >&lt;p&gt;Hey Doug: could you add a &quot;description&quot; attribute to the target named &quot;interop-data-generate&quot; so that it shows up when running &lt;tt&gt;ant -p&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="12829544" author="hammer" created="Thu, 4 Feb 2010 09:17:15 +0000"  >&lt;p&gt;I have data file interop working for Python over in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-399&quot; title=&quot;Make data file interop tests work with the Python implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-399&quot;&gt;&lt;del&gt;AVRO-399&lt;/del&gt;&lt;/a&gt;. Question: should we test different codecs in interop, and should we do more than just assert non-null? That is, should we try to validate values?&lt;/p&gt;

&lt;p&gt;Also, I did not implement interop-data-generate--I didn&apos;t see the point of having that implemented in more than one language, particularly if we check in the raw data itself.&lt;/p&gt;</comment>
                            <comment id="12829547" author="hammer" created="Thu, 4 Feb 2010 09:26:41 +0000"  >&lt;p&gt;Can you also set the svn properties on the share/test/interop/bin/test_rpc_interop.sh to be executable?&lt;/p&gt;</comment>
                            <comment id="12829551" author="hammer" created="Thu, 4 Feb 2010 09:33:36 +0000"  >&lt;p&gt;Do the same for {[lang/java/src/test/bin/gen_rpc_interop.sh}} and add an ant task for it?&lt;/p&gt;</comment>
                            <comment id="12829745" author="hammer" created="Thu, 4 Feb 2010 20:01:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;Perhaps change HttpServer to use Server.setGracefulShutdown(2000 /* 2 seconds); in stop()? See &lt;a href=&quot;http://jetty.codehaus.org/jetty/jetty-6/apidocs/index.html?org/mortbay/jetty/Server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jetty.codehaus.org/jetty/jetty-6/apidocs/index.html?org/mortbay/jetty/Server.html&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m hitting this in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-287&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AVRO-287&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12829755" author="cutting" created="Thu, 4 Feb 2010 20:14:26 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;

&lt;p&gt;&amp;gt; Perhaps change HttpServer to use Server.setGracefulShutdown(2000 /* 2 seconds); in stop()?&lt;/p&gt;

&lt;p&gt;I&apos;d rather not make stop() always delay.  We only need the delay here, I think, when we&apos;re stopping from within a response.&lt;/p&gt;

&lt;p&gt;&amp;gt; could you add a &quot;description&quot; attribute to the target named &quot;interop-data-generate&quot; so that it shows up when running ant -p?&lt;/p&gt;

&lt;p&gt;Done.&lt;/p&gt;

&lt;p&gt;&amp;gt; should we test different codecs in interop, and should we do more than just assert non-null? That is, should we try to validate values?&lt;/p&gt;

&lt;p&gt;Good stuff for later.  Let&apos;s walk before we run.  We should test codecs.  We should validate.&lt;/p&gt;

&lt;p&gt;&amp;gt; I did not implement interop-data-generate--I didn&apos;t see the point of having that implemented in more than one language, particularly if we check in the raw data itself.&lt;/p&gt;

&lt;p&gt;I don&apos;t follow.  How do we otherwise know that a Java program can read a file written by Python?&lt;/p&gt;

&lt;p&gt;&amp;gt; Can you also set the svn properties on the share/test/interop/bin/test_rpc_interop.sh to be executable?&lt;/p&gt;

&lt;p&gt;That was already done.  The problem is that the patch program ignores this.&lt;/p&gt;</comment>
                            <comment id="12829764" author="hammer" created="Thu, 4 Feb 2010 20:30:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t follow. How do we otherwise know that a Java program can read a file written by Python?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Umm, you&apos;re right. That&apos;s what I get for working on code after 4 am. Will add a Python data generator to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-399&quot; title=&quot;Make data file interop tests work with the Python implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-399&quot;&gt;&lt;del&gt;AVRO-399&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12830472" author="philip" created="Sat, 6 Feb 2010 05:40:22 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; Perhaps change HttpServer to use Server.setGracefulShutdown(2000 /* 2 seconds); in stop()?

I&apos;d rather not make stop() always delay. We only need the delay here, I think, when we&apos;re stopping from within a response.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t think setGracefulShutdown always delays.  It delays until existing sockets have been closed, or something like that.  Or at least that&apos;s my interpretation of their API.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Philip&lt;/p&gt;</comment>
                            <comment id="12831072" author="cutting" created="Mon, 8 Feb 2010 19:27:55 +0000"  >&lt;p&gt;Reading the Jetty documentation, it looks like the graceful shutdown period is the amount of time it will wait for requests in progress to complete.  I tried specifying this however, and it caused unit tests to run considerably slower, not a good thing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12444646">AVRO-287</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455286">AVRO-399</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434587" name="AVRO-321.patch" size="19310" author="cutting" created="Tue, 2 Feb 2010 20:53:50 +0000"/>
                            <attachment id="12434437" name="AVRO-321.patch" size="18530" author="cutting" created="Mon, 1 Feb 2010 22:09:09 +0000"/>
                            <attachment id="12431479" name="AVRO-321.patch" size="3339" author="cutting" created="Tue, 26 Jan 2010 23:17:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 20:02:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-322] Add a working client and server to Python implementation using HTTP as a transport</title>
                <link>https://issues.apache.org/jira/browse/AVRO-322</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445446">AVRO-322</key>
            <summary>Add a working client and server to Python implementation using HTTP as a transport</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hammer">Jeff Hammerbacher</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 22:30:13 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:18 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 08:17:15 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12800017" author="hammer" created="Wed, 13 Jan 2010 23:41:44 +0000"  >&lt;p&gt;Here&apos;s a copy of the avroj HTTP request for the mailbox protocol:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;POST / HTTP/1.1
Content-Type: avro/binary
Content-Length: 63
User-Agent: Java/1.6.0_17
Host: localhost:9090
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive

7KK??m??)??&#337;7KK??m??)??&#337;senavrjeffhey
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12803665" author="hammer" created="Fri, 22 Jan 2010 11:12:33 +0000"  >&lt;p&gt;Note that Python 2.x has support for HTTP sprinkled across several modules and none of which support parsing requests in the same fashion as parsing results. To support HTTP as a transport in Python is going to require some hand-coded HTTP parsing, yay.&lt;/p&gt;

&lt;p&gt;Remind me again why we&apos;re focused on HTTP as a transport instead of TCP sockets?&lt;/p&gt;

&lt;p&gt;Also, for the record, Python 3.x is far more sane with respect to HTTP: &lt;a href=&quot;http://diveintopython3.org/porting-code-to-python-3-with-2to3.html#http&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://diveintopython3.org/porting-code-to-python-3-with-2to3.html#http&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12803797" author="cutting" created="Fri, 22 Jan 2010 18:11:50 +0000"  >&lt;p&gt;The API in &lt;a href=&quot;http://docs.python.org/library/basehttpserver.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.python.org/library/basehttpserver.html&lt;/a&gt; looks pretty simple to me.  You extend BaseHTTPRequestHandler and implement do_POST() and/or do_GET().  The request can be read from rfile.  It looks like you need to call send_response(200) and end_headers() before writing the response to wfile.  What am I missing?&lt;/p&gt;</comment>
                            <comment id="12829526" author="hammer" created="Thu, 4 Feb 2010 08:17:15 +0000"  >&lt;p&gt;Committed revision 906394 and revision 906397.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12445666">AVRO-340</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434794" name="AVRO-322.patch" size="19620" author="hammer" created="Thu, 4 Feb 2010 08:16:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Jan 2010 18:11:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-323] Support raw sockets as a transport in avroj</title>
                <link>https://issues.apache.org/jira/browse/AVRO-323</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445453">AVRO-323</key>
            <summary>Support raw sockets as a transport in avroj</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2010 23:58:48 +0000</created>
                <updated>Mon, 1 Mar 2010 21:47:26 +0000</updated>
                            <resolved>Tue, 2 Feb 2010 21:39:03 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12800029" author="cutting" created="Thu, 14 Jan 2010 00:07:48 +0000"  >&lt;p&gt;Here&apos;s an early-version of an untested patch that permits one to specify the transport on the command line to rpcreceive.  Use &apos;socket&apos; to get the socket transport.&lt;/p&gt;</comment>
                            <comment id="12800035" author="hammer" created="Thu, 14 Jan 2010 00:24:33 +0000"  >&lt;p&gt;Patch applies from inside of lang/java: is that the new intended behavior for patches post-163? If so, we should update the &quot;How to Contribute&quot; wiki page.&lt;/p&gt;</comment>
                            <comment id="12800042" author="hammer" created="Thu, 14 Jan 2010 00:33:02 +0000"  >&lt;p&gt;Getting an error when I try this out:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -jar build/avro-tools-1.2.0-dev.jar rpcreceive &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;namespace&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;example.proto&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;protocol&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Mail&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;types&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Message&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;to&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;from&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;body&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;}]}],&lt;span class=&quot;code-quote&quot;&gt;&quot;messages&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;send&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;request&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Message&quot;&lt;/span&gt;}],&lt;span class=&quot;code-quote&quot;&gt;&quot;response&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;},&lt;span class=&quot;code-quote&quot;&gt;&quot;replay&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;request&quot;&lt;/span&gt;:[],&lt;span class=&quot;code-quote&quot;&gt;&quot;response&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;}}}&apos;&lt;/span&gt; 9090 send &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;: {&lt;span class=&quot;code-quote&quot;&gt;&quot;to&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;avro&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;from&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;jeff&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;body&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;hey&quot;&lt;/span&gt;}}&apos;&lt;/span&gt; socket
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IndexOutOfBoundsException: Index: 5,Size: 5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12800052" author="hammer" created="Thu, 14 Jan 2010 00:48:07 +0000"  >&lt;p&gt;Doug: would be nice to have rpcsend as well.&lt;/p&gt;</comment>
                            <comment id="12800117" author="cutting" created="Thu, 14 Jan 2010 05:12:15 +0000"  >&lt;p&gt;Here&apos;s a version that:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;includes tests&lt;/li&gt;
	&lt;li&gt;supports &quot;rpcsend&quot; too&lt;/li&gt;
	&lt;li&gt;actually works!&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12800300" author="hammer" created="Thu, 14 Jan 2010 18:49:02 +0000"  >&lt;p&gt;In rpcsend with the socket transport, are you opening the socket with the SO_REUSEADDR option? I&apos;m getting &quot;address already in use&quot; errors after killing the client for a few seconds afterwards. Debugging is easier with SO_REUSEADDR.&lt;/p&gt;</comment>
                            <comment id="12800302" author="hammer" created="Thu, 14 Jan 2010 18:55:44 +0000"  >&lt;p&gt;When debugging rpcsend, I can see that my Python server is receiving the initial client request, parsing the Handshake properly, and noting that it doesn&apos;t know the client hash. It&apos;s then returning a handshake response and closing the socket. The Java client doesn&apos;t know that the socket has been closed on it, so it tries to write its more verbose handshake request, but gets a broken pipe, like so: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;19 [main] INFO org.apache.avro.ipc.SocketTransceiver - open to localhost/127.0.0.1:9090
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: Broken pipe
	at sun.nio.ch.FileDispatcher.write0(Native Method)
	at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
	at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:104)
	at sun.nio.ch.IOUtil.write(IOUtil.java:75)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:334)
	at org.apache.avro.ipc.SocketTransceiver.writeBuffers(SocketTransceiver.java:78)
	at org.apache.avro.ipc.Transceiver.transceive(Transceiver.java:33)
	at org.apache.avro.ipc.Requestor.request(Requestor.java:110)
	at org.apache.avro.tool.RpcSendTool.run(RpcSendTool.java:80)
	at org.apache.avro.tool.Main.run(Main.java:73)
	at org.apache.avro.tool.Main.main(Main.java:62)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12800715" author="hammer" created="Fri, 15 Jan 2010 14:41:23 +0000"  >&lt;p&gt;Philip, Doug: Python&apos;s out-of-the-box TCPServer implementation will call close() on the socket for each message it handles. There are three lines of logic in the Python client to handle this case (get a new socket if the server has hung up). I&apos;m not sure what the right design decision is here: require all clients to handle the case of a server hanging up mid-handshake, or require all servers to leave the connection open. I think the former makes more sense than the latter, but you guys probably have better taste than me in this regard. Thoughts?&lt;/p&gt;</comment>
                            <comment id="12800772" author="philip" created="Fri, 15 Jan 2010 17:31:22 +0000"  >&lt;p&gt;+1 to the patch.  In TestRpcReceiveAndSendTools, can you move the JavaDoc, I think the javadoc should be attached to the serveAndSend(protocol) method, instead of one of the test methods.&lt;/p&gt;</comment>
                            <comment id="12828778" author="cutting" created="Tue, 2 Feb 2010 21:39:03 +0000"  >&lt;p&gt;We should not further embrace a raw socket protocol until it&apos;s fully specified.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430229" name="AVRO-323.patch" size="7084" author="cutting" created="Thu, 14 Jan 2010 05:12:15 +0000"/>
                            <attachment id="12430191" name="AVRO-323.patch" size="2447" author="cutting" created="Thu, 14 Jan 2010 00:07:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 00:07:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-324] Avro tools &quot;rpcsend&quot; and &quot;rpcreceive&quot; should order message name and port the same way</title>
                <link>https://issues.apache.org/jira/browse/AVRO-324</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;They&apos;re reversed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445461">AVRO-324</key>
            <summary>Avro tools &quot;rpcsend&quot; and &quot;rpcreceive&quot; should order message name and port the same way</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 00:33:38 +0000</created>
                <updated>Thu, 1 Apr 2010 16:50:44 +0000</updated>
                            <resolved>Tue, 2 Mar 2010 23:27:47 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12800375" author="cutting" created="Thu, 14 Jan 2010 21:49:03 +0000"  >&lt;p&gt;We might use URIs here to name endpoints, for example:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;tcp://0.0.0.0:0/ could be used to start a socket server on a dynamically allocated port&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:5555/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:5555/&lt;/a&gt; could be used to contact a local HTTP-based server on port 5555&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Command options might be ordered from general to specific, i.e.:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rpcsend transport:://host:port protocol messageName parameters&lt;/li&gt;
	&lt;li&gt;rpcreceive transport:://host:port protocol messageName response&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12800384" author="cutting" created="Thu, 14 Jan 2010 22:00:15 +0000"  >&lt;p&gt;Also, the port number from rpcreceive should be easy to get from an invoking script.  Currently it&apos;s printed to standard error, but I wonder if rather this alone should be printed to standard output, as something like: &quot;port: XXX&quot;.  Either that or we might specify a file on the command line where the port should be written, e.g.:&lt;/p&gt;

&lt;p&gt;  rpcreceive -portFile foo.port transport:://host:port protocol messageName response&lt;/p&gt;</comment>
                            <comment id="12800776" author="philip" created="Fri, 15 Jan 2010 17:36:50 +0000"  >&lt;p&gt;I think URIs would be a good way to encode transports and their options.  They&apos;re reasonably well-understood, easy to parse, and easy to use.&lt;/p&gt;</comment>
                            <comment id="12840384" author="cutting" created="Tue, 2 Mar 2010 23:27:47 +0000"  >&lt;p&gt;This was fixed as a part of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-321&quot; title=&quot;Run Java RPC interop tests again&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-321&quot;&gt;&lt;del&gt;AVRO-321&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 21:49:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-325] Make &quot;avro tools&quot; for Python</title>
                <link>https://issues.apache.org/jira/browse/AVRO-325</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445469">AVRO-325</key>
            <summary>Make &quot;avro tools&quot; for Python</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 01:30:56 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Thu, 18 Feb 2010 19:26:02 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12835349" author="hammer" created="Thu, 18 Feb 2010 19:26:02 +0000"  >&lt;p&gt;We&apos;ve got this now with tool.py&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79704</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-326] Add &quot;documentation&quot; component to Avro JIRA</title>
                <link>https://issues.apache.org/jira/browse/AVRO-326</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445470">AVRO-326</key>
            <summary>Add &quot;documentation&quot; component to Avro JIRA</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 01:34:51 +0000</created>
                <updated>Tue, 13 Dec 2011 19:10:02 +0000</updated>
                            <resolved>Thu, 14 Jan 2010 17:07:01 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12800253" author="cutting" created="Thu, 14 Jan 2010 17:07:01 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 17:07:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dznb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-327] Performance improvements to BinaryDecoder.readLong()</title>
                <link>https://issues.apache.org/jira/browse/AVRO-327</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-315&quot; title=&quot;Performance improvements to BinaryDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-315&quot;&gt;&lt;del&gt;AVRO-315&lt;/del&gt;&lt;/a&gt; proposed performance improvements to readLong(), readFloat() and readDouble(). readLong() did not improve performance well for all. Scott proposed a better method (but requires a change in semantics and API). We&apos;ll carry on the discussion on that proposal here. &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-315&quot; title=&quot;Performance improvements to BinaryDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-315&quot;&gt;&lt;del&gt;AVRO-315&lt;/del&gt;&lt;/a&gt; will be committed with changes for readFloat() and readDouble().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445497">AVRO-327</key>
            <summary>Performance improvements to BinaryDecoder.readLong()</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 11:15:33 +0000</created>
                <updated>Mon, 1 Mar 2010 21:47:26 +0000</updated>
                            <resolved>Fri, 5 Feb 2010 01:20:18 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12800254" author="cutting" created="Thu, 14 Jan 2010 17:13:34 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-315&quot; title=&quot;Performance improvements to BinaryDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-315&quot;&gt;&lt;del&gt;AVRO-315&lt;/del&gt;&lt;/a&gt;, Thiru said, &quot;it&apos;s desirable to keep the property that the decoder does not take more bytes off the input stream than necessary. That property will allow the input stream not rewindable.&quot;&lt;/p&gt;

&lt;p&gt;Are there important use cases where buffering is a problem?  I can&apos;t think of any, but if there are then we might support both: call Scott&apos;s implementation BufferedBinaryDecoder and encourage folks to use that unless buffering is a problem.  Could that work?&lt;/p&gt;</comment>
                            <comment id="12800385" author="scott_carey" created="Thu, 14 Jan 2010 22:00:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;I note that doReadBytes(), once the buffer is exhausted, never calls in.read(bytes, start, length). Shouldn&apos;t we bypass the buffer in this case?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, there are probably a few bugs / improvements in there and some other cleanup.  I&apos;d want to have some unit tests probe certain corner cases such as reading bytes or string types larger than the buffer.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;br/&gt;
This changes semantics a bit, since currently BinaryDecoder does not buffer. For example, in DataFileReader seeks the underlying stream. So, in that case, we&apos;ll need to be able to reset the Decoder&apos;s buffer after a seek. There could also be places where an application reads alternately from the Decoder and its underlying InputStream, although, at a glance, I can&apos;t find any such in the code currently.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not familiar with all the use cases to judge what the impact of these changes are.  I can say that I&apos;m certain that users will have data that mixes Avro with other data, whether that is a file or another source.  Perhaps FileChannel with ByteBuffers is the best way to support that for files.&lt;/p&gt;

&lt;p&gt;The big thing here is that InputStream (and also OutputStream) perform very poorly when writing or reading small chunks.  java.nio.Buffer is a lot better.  Raw byte[] access is the fastest.  Whatever is done in the long run will have to avoid using InputStream and OutputStream at a fine grained level.    Maybe that means using the nio api rather than the io api.  &lt;/p&gt;
</comment>
                            <comment id="12800735" author="thiru_mg" created="Fri, 15 Jan 2010 16:07:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are there important use cases where buffering is a problem?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If we have a stream with metadata and data (like our DataFile)  and if the metadata is encoded in non-avro format we&apos;ll have trouble with buffering. One reason users may want to encode the metadata in non-avro format is that the stream contains avro- and non-avro data.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... call Scott&apos;s implementation BufferedBinaryDecoder and encourage folks to use that unless buffering is a problem. Could that work?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 for this proposal. We can add a method reset() in the Decoder interface. This method would throw away the remaining contents of the buffer in BufferedBinaryDecoder and do nothing in BinaryDecoder. Other decoders like ValidatingDecoder will pass this call to their underlying Decoders. &lt;/p&gt;

&lt;p&gt;The main problem with BinaryDecoder is that it does single byte reads. One solution for that problem could be to encode the count of bytes for a number in the first byte itself. For example, a bit prefix 0 may indicate that it&apos;s a 7-it number, a prefix of 10 may indicate it&apos;s a 14-bit number (6 remaining bits of the first byte and 8 bits of the second byte) and so on. This will be as efficient as the current encoding scheme. We&apos;d need at most two reads per encoded number. The performance will not be as great as buffered decoder, but better than BinaryDecoder. The big drawback of this scheme is that it is an incompatible change. I don&apos;t think it&apos;s worthwhile to implement it.&lt;/p&gt;
</comment>
                            <comment id="12800778" author="cutting" created="Fri, 15 Jan 2010 17:38:25 +0000"  >&lt;p&gt;&amp;gt; If we have a stream with metadata and data (like our DataFile) and if the metadata is encoded in non-avro format we&apos;ll have trouble with buffering.&lt;/p&gt;

&lt;p&gt;The current DataFile implementation uses a Decoder for all input, so the only problem there would be that we&apos;d need to reset the buffer when seeking the underlying input stream, which would not be hard.&lt;/p&gt;

&lt;p&gt;More generally, since BinaryDecoder has a read(byte[]) method, it is possible to implement a Java InputStream on top of a Decoder if one needed to perform other non-Avro input from the same source.  So I cannot currently imagine an application that could not work with this.  Am I missing something?&lt;/p&gt;

&lt;p&gt;So, we have two candidate approaches:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add a new class, BufferredBinaryDecoder, and change internal uses (like DataFileReader) to use it, but retain the non-buffering BinaryDecoder for applications that need to intermix Avro and other input.&lt;/li&gt;
	&lt;li&gt;add buffering to BinaryDecoder and perhaps provide a non-buffering InputStream implementation that wraps a BinaryDecoder, for applications that intermix Avro and other data.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m currently leaning towards the latter approach.&lt;/p&gt;

&lt;p&gt;ValidatingDecoder and ResovlingDecoder each wrap a Decoder.  If they&apos;re wrapping a BinaryDecoder that buffers, and an application intermixes Avro and non-Avro data, then that application would need to use the buffered BinaryDecoder for its input, not the ValidatingDecoder or the ResolvingDecoder, since those accept only call sequences in accord with a declared schema.&lt;/p&gt;



</comment>
                            <comment id="12800799" author="thiru_mg" created="Fri, 15 Jan 2010 18:06:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;More generally, since BinaryDecoder has a read(byte[]) method, it is possible to implement a Java InputStream on top of a Decoder if one needed to perform other non-Avro input from the same source. So I cannot currently imagine an application that could not work with this. Am I missing something?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This should work most of the time except when using a validating or resolving decoders, where the usage becomes somewhat cumbersome. Since constructing the grammar is relative expensive, people cache the validating and resolving decoders. Whenever you want to read avro data out of an input stream, you call init(inputStream) on the cached ValidatingDecoder(or ResolvingDecoder) and start reading data off the decoder. Now after consuming the avro data, you can&apos;t directly use the input stream you just passed to read non-avro data, but fish out the BinaryDecoder wrapper from within the cachced ValidatingDecoder. I think it&apos;s counter-intuitive and hard to explain.&lt;/p&gt;</comment>
                            <comment id="12800819" author="cutting" created="Fri, 15 Jan 2010 18:31:20 +0000"  >&lt;p&gt;&amp;gt; This should work most of the time except when using a validating or resolving decoders, where the usage becomes somewhat cumbersome.&lt;/p&gt;

&lt;p&gt;How would it be significantly more cumbersome than it is currently?  Instead of performing non-Avro IO on the InputStream that you passed to ValidatingDecoder or ResolvingDecoder you&apos;d perform non-Avro IO on the BinaryDecoder that you passed these.  If an InputStream is required for the non-Avro input, then we can provide a non-buffered InputStream that wraps a BinaryDecoder.  I don&apos;t see applications getting much more complicated by this.&lt;/p&gt;</comment>
                            <comment id="12800832" author="thiru_mg" created="Fri, 15 Jan 2010 18:53:48 +0000"  >&lt;p&gt;The code snippet would be something like:&lt;/p&gt;

&lt;p&gt;The examples assume that readAvro(Decoder d) and readNonAvro(InputStream in) are given.&lt;/p&gt;

&lt;p&gt;Example 1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

class  XXX {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ValidatingDecoder d = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ValidatingDecoder(schema, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoder(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
    void readAvro(InputStream in) {
        d.init(in);
        readAvro(d);
        readNonAvro(in);
    }
}

v.

class  XXX {
    BinaryDecoder bd = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoder(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    InputStream wrap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoderInputStream(bd);
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ValidatingDecoder d = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ValidatingDecoder(schema, bd);
    void readAvro(InputStream in) {
        d.init(in);
        readAvro(d);
        readNonAvro(wrap);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Example 2:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void f(InputStream in) {
    AvroObject o = readAvro(in);
    NonAvroObject no = readNonAvro(in);
}

void readAvro(InputStream in) {
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; readAvro(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoder(in));
}

v.

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Pair {
    AvroObject first;
    InputStream second;
}

void f(InputStream in)  {
    Pair&amp;lt;AvroObject, InputStream&amp;gt; p = readAvro(in);
    NonAvroObject no = readNonAvro(p.second);
}

Pair readAvro(InputStream in) {
    BinaryDecoder d = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoder(in);
    AvroObject o = readAvro(d);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair(o, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoderInputStream(d));
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12800841" author="cutting" created="Fri, 15 Jan 2010 19:10:23 +0000"  >&lt;p&gt;Your first case adds a single line of code, which isn&apos;t bad for consistently providing improved performance.  The alternative (a non-buffering BinaryDecoder) would save a line of code but force such applications to perform more slowly.&lt;/p&gt;

&lt;p&gt;The second case can also be handled with the addition of single line of code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;void f(InputStream in) {
    BinaryDecoder bin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoder(in);
    AvroObject o = readAvro(bin);
    NonAvroObject no = readNonAvro(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoderInputStream(bin));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If Decoder were made an interface, then a BinaryDecoder could also be an InputStream, so no additional lines of code would be required.&lt;/p&gt;

&lt;p&gt;In any case, we don&apos;t have to argue about this forever.  If you feel strongly, then we can add this as BufferedBinaryDecoder and then update all uses within Avro to use it in place of BinaryDecoder, so that we provide better performance, and add a caution to BinaryDecoder stating that BufferedBinaryDecoder should be used for best performance.&lt;/p&gt;

&lt;p&gt;Should I prepare a patch or would you like to?  Scott?&lt;/p&gt;</comment>
                            <comment id="12800873" author="thiru_mg" created="Fri, 15 Jan 2010 19:41:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;We can add a method reset() in the Decoder interface. This method would throw away the remaining contents of the buffer in BufferedBinaryDecoder ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We don&apos;t really need a new reset() method to clear the buffer. We can do that in init(InputStream in) method itself.&lt;/p&gt;</comment>
                            <comment id="12801014" author="cutting" created="Fri, 15 Jan 2010 23:58:14 +0000"  >&lt;p&gt;Here&apos;s a version of this that still needs debugging, as it fails tests.  I&apos;ve replaced many but not all references to BinaryDecoder with BufferedBinaryDecoder.&lt;/p&gt;</comment>
                            <comment id="12801028" author="scott_carey" created="Sat, 16 Jan 2010 00:26:26 +0000"  >&lt;p&gt;Some bigger context:&lt;/p&gt;

&lt;p&gt;InputStream and OutputStream are slow and should be avoided as much as possible when copying chunks to/from them smaller than a couple hundred bytes on average.  &lt;br/&gt;
This performance difference isn&apos;t small, its a factor of 2.5 on the previous test for things that aren&apos;t fully optimized yet &amp;#8211; including the readDouble() that read 8 bytes at a time.  This has a large impact on the impact of other improvements.  An improvement that currently helps by 10%, will help by 25% after this change.  If one wants to be able to have one thread decode/encode at gigabit ethernet wire speed, avoiding inputStream.read() and OutputStream.write(byte b) is mandatory &amp;#8211; even if you use a BufferedInputStream.&lt;/p&gt;

&lt;p&gt;This is not just for decoder/encoder, but also in various other places, where the assumed &quot;pass data around&quot; method is via InputStream and OutputStream.  ByteBuffer, byte[], Channel, are good options for various use cases that perform much better when small reads/writes are done than an equivalent Input/Output stream.&lt;br/&gt;
There will be more to change than just BinaryDecoder eventually, and a holistic approach is better than a patchwork one.&lt;/p&gt;

&lt;p&gt;To address Thiru&apos;s concerns, I think that it can be made even simpler:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;void f(InputStream in) {
   BinaryDecoder bin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryDecoder(in);
   AvroObject o = readAvro(bin);
   NonAvroObject no = readNonAvro(bin.inputStream());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;BinaryDecoder can construct a specialized InputStream inner class on demand (and cache it).&lt;br/&gt;
The contract would be that once an InputStream is given to a decoder, it should not be accessed directly &amp;#8211; not any different than what happens when you wrap an input stream with a buffered input stream.  &lt;br/&gt;
Alternatively Decoder could implement BufferedInputStream itself &amp;#8211; but that would force that on all implementations.&lt;/p&gt;

&lt;p&gt;If two readers need to readahead-buffer on the same data, a different API will be needed (ByteBuffers? something else? read methods that don&apos;t advance the position?).&lt;/p&gt;


&lt;p&gt;I can produce a patch next week for review.&lt;/p&gt;
</comment>
                            <comment id="12801030" author="scott_carey" created="Sat, 16 Jan 2010 00:29:04 +0000"  >&lt;p&gt;self quote:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This performance difference isn&apos;t small, its a factor of 2.5 on the previous test for things that aren&apos;t fully optimized yet - including the readDouble() that read 8 bytes at a time. This has a large impact on the impact of other improvements.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wow, I really edited that too much.&lt;/p&gt;

&lt;p&gt;Try this:&lt;br/&gt;
 ... its a factor of 2.5 on the previous test &amp;#8211; including the readDouble() that reads 8 bytes at a time &amp;#8211; and many other things aren&apos;t optimized yet.  This will magnify the impact of later improvements.&lt;/p&gt;</comment>
                            <comment id="12801139" author="thiru_mg" created="Sat, 16 Jan 2010 09:45:00 +0000"  >&lt;p&gt;I worked on Doug&apos;s patch and fixed most of the problems. But TestCompare and TestDataFile still fail. TestCompare fails because, I think, BinaryData class assumes that the decoder will not read past the required bytes. TestDataFile fails because we are not able to sync to the next sync point since that is already been read into the BufferedBinaryDecoder&apos;s buffer.&lt;/p&gt;

&lt;p&gt;I think we&apos;ll also lose out on the ByteBufferInputStream optimization. In our eagerness to read more data than absolutely necessary, we&apos;ll end up having part data in the BufferedDecoder&apos;s buffer and the rest in ByteBufferInputStream killing latter&apos;s optimization.&lt;/p&gt;</comment>
                            <comment id="12829668" author="scott_carey" created="Thu, 4 Feb 2010 17:42:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I worked on Doug&apos;s patch and fixed most of the problems. But TestCompare and TestDataFile still fail. TestCompare fails because, I think, BinaryData class assumes that the decoder will not read past the required bytes. TestDataFile fails because we are not able to sync to the next sync point since that is already been read into the BufferedBinaryDecoder&apos;s buffer. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-392&quot; title=&quot;Binary Decoder Performance and flexibility overhaul&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-392&quot;&gt;&lt;del&gt;AVRO-392&lt;/del&gt;&lt;/a&gt; I have modified the tests and BinaryData to deal with the buffering.   The improvements in this ticket are now all included as a (large) subset of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-392&quot; title=&quot;Binary Decoder Performance and flexibility overhaul&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-392&quot;&gt;&lt;del&gt;AVRO-392&lt;/del&gt;&lt;/a&gt;.  Should I resolve this as a duplicate?&lt;/p&gt;</comment>
                            <comment id="12829858" author="cutting" created="Thu, 4 Feb 2010 23:42:29 +0000"  >&lt;p&gt;&amp;gt; Should I resolve this as a duplicate?&lt;/p&gt;

&lt;p&gt;Yes, I think so.&lt;/p&gt;</comment>
                            <comment id="12829901" author="scott_carey" created="Fri, 5 Feb 2010 01:20:18 +0000"  >&lt;p&gt;This work was subsumed by DEV-392&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12455154">AVRO-392</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12445383">AVRO-315</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12430499" name="AVRO-327-2.patch" size="21934" author="thiru_mg" created="Sat, 16 Jan 2010 09:48:23 +0000"/>
                            <attachment id="12430468" name="AVRO-327.patch" size="15816" author="cutting" created="Fri, 15 Jan 2010 23:58:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 17:13:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dznj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79706</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-328] Performance improvements Validating encoder/decoder for nested records</title>
                <link>https://issues.apache.org/jira/browse/AVRO-328</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;With nested records, Parser.pushProduction() gets called multiple times (once per record nesting). Since we do not have any events for beginning and end of records, it enhances the performance if we flatten the grammar, wherever possible.&lt;/p&gt;

&lt;p&gt;The forthcoming patch does just that.&lt;/p&gt;

&lt;p&gt;Try org.apache.avro.io.Perf -N&lt;/p&gt;

&lt;p&gt;On my machine (HP laptop with Cygwin) the improvement is about 20%.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12445523">AVRO-328</key>
            <summary>Performance improvements Validating encoder/decoder for nested records</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 14:52:49 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Sat, 16 Jan 2010 06:00:22 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12800223" author="thiru_mg" created="Thu, 14 Jan 2010 15:01:37 +0000"  >&lt;p&gt;Improved Perf to check if it reads back what was written.&lt;/p&gt;</comment>
                            <comment id="12801111" author="thiru_mg" created="Sat, 16 Jan 2010 06:00:22 +0000"  >&lt;p&gt;Committed revision 899888.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430414" name="AVRO-328-test.patch" size="2120" author="thiru_mg" created="Fri, 15 Jan 2010 17:31:53 +0000"/>
                            <attachment id="12430413" name="AVRO-328.patch" size="7816" author="thiru_mg" created="Fri, 15 Jan 2010 17:31:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dznr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-329] Fix HANDSHAKE_REQUEST_SCHEMA used by the Python implementation</title>
                <link>https://issues.apache.org/jira/browse/AVRO-329</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Simple fix. serverHash is not a union.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445534">AVRO-329</key>
            <summary>Fix HANDSHAKE_REQUEST_SCHEMA used by the Python implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hammer">Jeff Hammerbacher</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 18:13:09 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Thu, 14 Jan 2010 18:48:26 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12800299" author="cutting" created="Thu, 14 Jan 2010 18:48:26 +0000"  >&lt;p&gt;I just committed this.  Thanks, Jeff.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12445537">AVRO-331</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12430278" name="AVRO-329.patch" size="542" author="hammer" created="Thu, 14 Jan 2010 18:20:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 18:48:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dznz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79708</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-330] Handle the case of correct serverHash but unknown clientProtocol in the spec for the Handshake</title>
                <link>https://issues.apache.org/jira/browse/AVRO-330</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;It&apos;s an unusual occurrence, but we should have it in the spec. Note that we can drop the serverProtocol in the response.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445535">AVRO-330</key>
            <summary>Handle the case of correct serverHash but unknown clientProtocol in the spec for the Handshake</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 18:23:24 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Thu, 14 Jan 2010 19:56:11 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12800326" author="cutting" created="Thu, 14 Jan 2010 19:56:11 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jan 2010 19:56:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94657</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79709</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-331] Inline shared state during the Python build process (version, handshake schemas, and interop data directory)</title>
                <link>https://issues.apache.org/jira/browse/AVRO-331</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;To ensure &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-329&quot; title=&quot;Fix HANDSHAKE_REQUEST_SCHEMA used by the Python implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-329&quot;&gt;&lt;del&gt;AVRO-329&lt;/del&gt;&lt;/a&gt; shenanigans don&apos;t happen again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445537">AVRO-331</key>
            <summary>Inline shared state during the Python build process (version, handshake schemas, and interop data directory)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pwendell">Patrick Wendell</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 18:27:14 +0000</created>
                <updated>Wed, 8 Sep 2010 21:07:38 +0000</updated>
                            <resolved>Thu, 10 Jun 2010 04:34:25 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>build</component>
                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12876873" author="pwendell" created="Tue, 8 Jun 2010 23:51:37 +0000"  >&lt;p&gt;Patch to fix this. Jeff you will need to merge this with any outstanding changes you have for the build file.&lt;/p&gt;</comment>
                            <comment id="12877317" author="hammer" created="Thu, 10 Jun 2010 04:34:25 +0000"  >&lt;p&gt;Committed to trunk with revision 953214. Thanks, Patrick!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12445534">AVRO-329</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446737" name="AVRO-331-v1.patch" size="7344" author="hammer" created="Thu, 10 Jun 2010 03:43:20 +0000"/>
                            <attachment id="12446738" name="AVRO-331-v2.patch" size="7416" author="hammer" created="Thu, 10 Jun 2010 03:49:01 +0000"/>
                            <attachment id="12446741" name="AVRO-331-v3.patch" size="9613" author="hammer" created="Thu, 10 Jun 2010 04:19:49 +0000"/>
                            <attachment id="12446644" name="AVRO-331.patch.txt" size="5074" author="pwendell" created="Tue, 8 Jun 2010 23:51:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Jun 2010 23:51:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94658</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-332] Use Python logging framework and add debug mode to facilitate debugging Python implementation</title>
                <link>https://issues.apache.org/jira/browse/AVRO-332</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445538">AVRO-332</key>
            <summary>Use Python logging framework and add debug mode to facilitate debugging Python implementation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 18:28:02 +0000</created>
                <updated>Thu, 14 Jan 2010 18:28:02 +0000</updated>
                                                                            <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94659</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79711</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-333] Add tests for all possible handshake scenarios to Python implementation</title>
                <link>https://issues.apache.org/jira/browse/AVRO-333</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description></description>
                <environment></environment>
        <key id="12445542">AVRO-333</key>
            <summary>Add tests for all possible handshake scenarios to Python implementation</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 18:46:12 +0000</created>
                <updated>Mon, 24 May 2010 10:09:32 +0000</updated>
                                                                            <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12829806" author="hammer" created="Thu, 4 Feb 2010 21:51:55 +0000"  >&lt;p&gt;Note that I&apos;m seeing some failures in &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-287&quot; title=&quot;Make RPC interop tests work with new Python implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-287&quot;&gt;&lt;del&gt;AVRO-287&lt;/del&gt;&lt;/a&gt; due to insufficient test coverage (httplib does not allow you to send multiple requests over the same HTTP connection, bizarrely)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12465180">AVRO-548</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12456831">AVRO-423</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94660</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79712</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-334] If possible, do not close the socket after every request in sample_ipc_server.py</title>
                <link>https://issues.apache.org/jira/browse/AVRO-334</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;http://stackoverflow.com/questions/2066810/does-the-tcpserver-baserequesthandler-in-pythons-socketserver-close-the-socket&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/2066810/does-the-tcpserver-baserequesthandler-in-pythons-socketserver-close-the-socket&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445546">AVRO-334</key>
            <summary>If possible, do not close the socket after every request in sample_ipc_server.py</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hammer">Jeff Hammerbacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 19:13:39 +0000</created>
                <updated>Mon, 22 Mar 2010 23:22:18 +0000</updated>
                            <resolved>Fri, 19 Mar 2010 08:48:55 +0000</resolved>
                                                                    <component>python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12800878" author="cutting" created="Fri, 15 Jan 2010 19:44:48 +0000"  >&lt;p&gt;As I think about it more, I&apos;d prefer we focus on http rather than sockets.  I&apos;d like to minimise the number of transports that an Avro implementation must support.  Ideally we&apos;d have just one. It&apos;s clear that HTTP is a useful, standard transport, but Y! does not believe it&apos;s the appropriate basis for secure RPC in Hadoop.  So we&apos;ll probably support one other Avro-specific transport.  My current guess is that this will be SASL over TCP, so much like our current socket transports, but not identical.  I&apos;d rather not support a third, TCP w/o SASL, since that just multiplies the implementation effort and potential mismatches.  So for now, until the details of the SASL over TCP transport are fleshed out, HTTP is probably a better first transport for implementations.&lt;/p&gt;</comment>
                            <comment id="12800890" author="kingryan" created="Fri, 15 Jan 2010 20:19:42 +0000"  >&lt;p&gt;That&apos;s rather unfortunate. I doubt we&apos;d use anything other than raw sockets for avro-rpc and given that we need multi-lang interop it would be nice to have a spec for it. I suppose we could have a separate spec for socket-based RPC.&lt;/p&gt;</comment>
                            <comment id="12800916" author="cutting" created="Fri, 15 Jan 2010 21:20:44 +0000"  >&lt;p&gt;&amp;gt; I suppose we could have a separate spec for socket-based RPC.&lt;/p&gt;

&lt;p&gt;I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-341&quot; title=&quot;specify avro transport in spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-341&quot;&gt;AVRO-341&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;Is there a problem using HTTP?  Ruby&apos;s Mongrel should be easy to use for Ruby-based servers.  In Java I was able to make thousands of requests per second using HTTP.  It&apos;s easy to promise long-term multi-language interoperability over HTTP today.&lt;/p&gt;</comment>
                            <comment id="12800959" author="kingryan" created="Fri, 15 Jan 2010 22:32:08 +0000"  >&lt;p&gt;We won&apos;t be building servers in ruby, they&apos;ll mostly be in scala/java.&lt;/p&gt;

&lt;p&gt;In our experience, http servers are too black-box for the kinds of things we want to do (high volume, small payload RPCs). We end up needing to have more control over the low levels of the stack.&lt;/p&gt;</comment>
                            <comment id="12800966" author="cutting" created="Fri, 15 Jan 2010 22:42:20 +0000"  >&lt;p&gt;&amp;gt; In our experience, http servers are too black-box for the kinds of things we want to do [ ... ]&lt;/p&gt;

&lt;p&gt;That sounds reasonable.  I&apos;d like to avoid defining more than one Avro-specific wire protocol, and hope we can devise one that is simple, permits high-performance implementations, and also permits secure implementations.  In the meantime, I think we&apos;re better off using HTTP.&lt;/p&gt;

&lt;p&gt;If you have existing client/server stacks, it should be fairly trivial to send Avro-format requests and responses over them.  Meanwhile, the Avro reference implementations and specification will only have HTTP clients and servers until we standardize on another.  Is that draconian?&lt;/p&gt;</comment>
                            <comment id="12801038" author="chadharrington" created="Sat, 16 Jan 2010 00:47:10 +0000"  >&lt;p&gt;We also will only use TCP sockets, due to our performance needs.  However, if it is simple and well-supported to use Avro over our own transport, that is probably best, since we are equally unlikely to use the stock Avro TCP socket implementation.  We need the performance and control of our own optimized network stack.  I am guessing there are lots of people like us, so perhaps the focus should just be on good documentation and testing for running Avro RPC over arbitrary transports.&lt;/p&gt;</comment>
                            <comment id="12801067" author="kingryan" created="Sat, 16 Jan 2010 02:03:31 +0000"  >&lt;p&gt;Doug-&lt;/p&gt;

&lt;p&gt;I&apos;m fine with limiting the spec and official implementations to http-only for now, but it seems likely that we&apos;ll end up building or porting one with TCP sockets (and maybe a UDP one too).&lt;/p&gt;</comment>
                            <comment id="12801879" author="cutting" created="Mon, 18 Jan 2010 17:54:49 +0000"  >&lt;p&gt;&amp;gt; the focus should just be on good documentation and testing for running Avro RPC over arbitrary transports. &lt;/p&gt;

&lt;p&gt;Yes, I agree, that&apos;s a good short-term focus.  The spec currently defines the binary format of requests and responses.  But to test compatibility of implementations we need a wire protocol.  Rather than use a TCP socket-based protocl for this interoperability testing I think we&apos;re better off using HTTP for now, since it&apos;s well specified and has conforming implementations.  The topic of this bug illustrates this: HTTP has explicit rules about keep-alive, while our not-yet-fully-specified TCP socket protocol does not.  Our time is better spent, in the short-term, ensuring interoperability than fully-specifying a TCP socket protocol.&lt;/p&gt;

&lt;p&gt;Long-term, our goal is to have a high-performance, standard wire protocol for Avro RPC, so that clients and services in different languages and from different institutions can interact.  HTTP gives us a standard wire protocol, but there are concerns its performance, lack of multiplexing, and the appropriateness of its security.  Until we develop a protocol that addresses these, we should only describe HTTP in the spec and we should use HTTP for interoperability testing, lest we end up with a hodge-podge of incompatible legacy protocols that folks might expect us to support forever.&lt;/p&gt;</comment>
                            <comment id="12847279" author="hammer" created="Fri, 19 Mar 2010 08:48:55 +0000"  >&lt;p&gt;Moved Avro&apos;s RPC to HTTP and removed sample_ipc_server.py, rendering this ticket obsolete.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12445671">AVRO-341</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Jan 2010 19:44:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94661</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79713</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-335] top-level test target should run RAT</title>
                <link>https://issues.apache.org/jira/browse/AVRO-335</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We should run Apache&apos;s Release Audit Tool as a part of testing.  This checks that files are licensed correctly.&lt;/p&gt;

&lt;p&gt;There&apos;s code to run this in lang/java/build.xml, but it&apos;s broken after &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-163&quot; title=&quot;Each language Avro supports should be a separate package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-163&quot;&gt;&lt;del&gt;AVRO-163&lt;/del&gt;&lt;/a&gt;.  This should be updated and invoked from the top-level build.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445565">AVRO-335</key>
            <summary>top-level test target should run RAT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 22:19:45 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Fri, 15 Jan 2010 01:02:35 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79714</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-336] Equals() on SpecificRecord fails (java)</title>
                <link>https://issues.apache.org/jira/browse/AVRO-336</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;rev 899520, trunk.&lt;/p&gt;

&lt;p&gt;Calling equals() on an object generated by the SpecificAPI fails.&lt;/p&gt;

&lt;p&gt;The object is a record with several fields, one is an array.  This object can serialize and deserialize, binary and json.  But equals() fails, as well as hashCode() in some cases.&lt;/p&gt;

&lt;p&gt;It fails in Schema.java, line 217.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-comment&quot;&gt;/** If &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is an array, returns its element type. */&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Schema getElementType() {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AvroRuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Not an array: &quot;&lt;/span&gt;+&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This looks unimplemented.&lt;/p&gt;

&lt;p&gt;The stack trace is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.avro.AvroRuntimeException: Not an array: {&quot;type&quot;:&quot;record&quot;,&quot;name&quot;:&quot;Variable&quot;,&quot;namespace&quot;:&quot;com.rr.avro&quot;,&quot;fields&quot;:[{&quot;name&quot;:&quot;variableId&quot;,&quot;type&quot;:&quot;int&quot;},{&quot;name&quot;:&quot;selectedValue&quot;,&quot;type&quot;:&quot;string&quot;}]}
	at org.apache.avro.Schema.getElementType(Schema.java:217)
	at org.apache.avro.generic.GenericData.compare(GenericData.java:468)
	at org.apache.avro.specific.SpecificData.compare(SpecificData.java:250)
	at org.apache.avro.specific.SpecificData.compare(SpecificData.java:242)
	at org.apache.avro.specific.SpecificRecordBase.compareTo(SpecificRecordBase.java:45)
	at org.apache.avro.specific.SpecificRecordBase.equals(SpecificRecordBase.java:35)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That record is the element type of the array, so I think this is just due to the implementation being incomplete.&lt;br/&gt;
The specific compiler could also generate equals() methods (which would be more efficient than traversing the schema).  I wonder if eclipse&apos;s &quot;generate hashcode and equals&quot; code is usable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445608">AVRO-336</key>
            <summary>Equals() on SpecificRecord fails (java)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="scott_carey">Scott Carey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 08:15:40 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Tue, 19 Jan 2010 00:49:46 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12800762" author="cutting" created="Fri, 15 Jan 2010 17:18:02 +0000"  >&lt;p&gt;It seems you have a GenericArray instance whose schema is not an array schema but is a record schema.  When constructing a GenericArray one must pass the schema of the array itself, not its element type.&lt;/p&gt;

&lt;p&gt;I suspect the fix is, in your code, to pass the appropriate array schema to GenericArray&apos;s constructor.  Also, in Avro, we should check the type of the schema passed to such constructors to make this easier to debug in the future.  I&apos;ve attached a patch that does this.&lt;/p&gt;

&lt;p&gt;&amp;gt; The specific compiler could also generate equals() methods (which would be more efficient than traversing the schema).&lt;/p&gt;

&lt;p&gt;Yes, that could probably be done.&lt;/p&gt;</comment>
                            <comment id="12800766" author="philip" created="Fri, 15 Jan 2010 17:22:33 +0000"  >&lt;p&gt;+1 to the patch.&lt;/p&gt;</comment>
                            <comment id="12800899" author="scott_carey" created="Fri, 15 Jan 2010 20:32:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;I suspect the fix is, in your code, to pass the appropriate array schema to GenericArray&apos;s constructor.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok, I hadn&apos;t looked at the Schema class factories until now.  &lt;br/&gt;
The classes generated by the SpecificAPI contain their own schema in a $SCHEMA static member.  But no Array objects are generated, so there are no schemas of arrays available that way.&lt;br/&gt;
It seems odd for a user of the specific API to do anything but use the schemas in the generated classes.  In fact, it seems a little odd to even have to do that.  In my mind, the idea of the Specific API is to generate classes that do all the Avro details for you, with a schema or protocol file as input.&lt;/p&gt;

&lt;p&gt;So, I changed my test where I set :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    data.treatments = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericData.Array&amp;lt;Variable&amp;gt;(0, Variable.SCHEMA$);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    data.treatments = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericData.Array&amp;lt;Variable&amp;gt;(0, Schema.createArray(Variable.SCHEMA$));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And that works.   &lt;/p&gt;

&lt;p&gt;Also, the patch works, detecting the error when the array is created.&lt;/p&gt;

&lt;p&gt;The fact that it successfully serialized and deserialized before tricked me into thinking things were ok.  I suppose I wasn&apos;t strictly checking the deserialized data to make sure it was an array, and it is empty in my test anyway.  Anything that prevents invalid data from being &apos;successfully&apos; serialized by mistake is a good thing.&lt;/p&gt;


&lt;p&gt;It took me a while to figure out how to set an Array at all with the Specific API (and I was wrong).  Perhaps there should be a SpecificArray class or factory, or the generated classes could contain a setter?  &lt;br/&gt;
I thought about making an inner class of of SpecificData with this signature but was not sure how to pass the schema around correctly without something ugly with reflection:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Array&amp;lt;T &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; SpecificRecord&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericData.Array&amp;lt;T&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe, a user could just do &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpecificData.Array&amp;lt;ElementType&amp;gt;(java.util.Array&amp;lt;ElementType&amp;gt; elements);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the constructor handles the rest.  &lt;/p&gt;

&lt;p&gt;Even better, a factory and/or setter on the generated class would feel the most &apos;natural&apos; &amp;#8211; then a user deals only with generated classes, and never imports o.a.avro.generic when dealing with the specific api.&lt;br/&gt;
As a user learning the Specific API, I feel like it doesn&apos;t encapsulate its implementation enough.  Details like it being built on top of the Generic API are exposed, and schemas are exposed.&lt;/p&gt;</comment>
                            <comment id="12801920" author="cutting" created="Mon, 18 Jan 2010 19:57:58 +0000"  >&lt;p&gt;&amp;gt; As a user learning the Specific API, I feel like it doesn&apos;t encapsulate its implementation enough.&lt;/p&gt;

&lt;p&gt;Yes, the Specific API could probably be improved.  In the meantime, I&apos;ll commit the attached patch for this issue, ok?&lt;/p&gt;</comment>
                            <comment id="12802002" author="scott_carey" created="Tue, 19 Jan 2010 00:29:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yes, the Specific API could probably be improved. In the meantime, I&apos;ll commit the attached patch for this issue, ok?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds good to me.&lt;/p&gt;</comment>
                            <comment id="12802007" author="cutting" created="Tue, 19 Jan 2010 00:49:46 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430412" name="AVRO-336.patch" size="2477" author="cutting" created="Fri, 15 Jan 2010 17:18:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Jan 2010 17:18:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-337] ant test-java fails in Cygwin due to CRLF v LF problem</title>
                <link>https://issues.apache.org/jira/browse/AVRO-337</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Since the PrintWriter under Cygwin (since the Java runtime is for Windows) generates CRLF for newline instead of LF. This causes JUnit assertions to fail. The accompanying patch fixes these by stripping CR from the generated strings.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445624">AVRO-337</key>
            <summary>ant test-java fails in Cygwin due to CRLF v LF problem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 11:29:01 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Sat, 16 Jan 2010 05:12:03 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12801102" author="thiru_mg" created="Sat, 16 Jan 2010 05:12:03 +0000"  >&lt;p&gt;Committed revision 899885.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430389" name="AVRO-337.patch" size="2941" author="thiru_mg" created="Fri, 15 Jan 2010 11:33:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-338] ant test-tools does not work under Cygwin</title>
                <link>https://issues.apache.org/jira/browse/AVRO-338</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The target &quot;test-tools&quot; invokes a shell script using &quot;exec&quot; task. Since the shell scripts cannot be invoked directly by the Windows, it is required to have the &quot;exec&quot; task with executable=&quot;sh&quot; and then pass the script name as an argument.&lt;/p&gt;

&lt;p&gt;This patch does just that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445625">AVRO-338</key>
            <summary>ant test-tools does not work under Cygwin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 11:40:38 +0000</created>
                <updated>Mon, 1 Mar 2010 21:47:26 +0000</updated>
                            <resolved>Fri, 15 Jan 2010 12:16:13 +0000</resolved>
                                                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12800675" author="thiru_mg" created="Fri, 15 Jan 2010 12:16:13 +0000"  >&lt;p&gt;The interaction between Java and Cygwin tools are too broken. For example, by default Java installation sets JAVA_HOME=c:\Program Files\Java\.... The space in JAVA_HOME causes trouble in shell scripts. Another example is that Cygwin&apos;s &quot;find&quot; needs Cygwin paths, but Java requires Windows paths, so the output of find cannot be passed to Java. One way to resolve the path problems is to use relative paths.&lt;/p&gt;

&lt;p&gt;These require too many fixes.&lt;/p&gt;</comment>
                            <comment id="12800820" author="phunt" created="Fri, 15 Jan 2010 18:31:33 +0000"  >&lt;p&gt;Thiru you might want to reconsider - check out cygpath, it&apos;s used for handling this issue: &lt;a href=&quot;http://www.cygwin.com/cygwin-ug-net/using-utils.html#cygpath&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.cygwin.com/cygwin-ug-net/using-utils.html#cygpath&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You might also look at the zookeeper shell scripts (*.sh in bin directory), the current zk trunk has patches to make things work&lt;br/&gt;
with cygwin, std unix shell, and macosx.&lt;/p&gt;</comment>
                            <comment id="12800823" author="cutting" created="Fri, 15 Jan 2010 18:37:03 +0000"  >&lt;p&gt;It would be great if the build works on cygwin, but this has proven tough to maintain for Hadoop, since most developers build only on Linux and/or MacOS.&lt;/p&gt;</comment>
                            <comment id="12800839" author="thiru_mg" created="Fri, 15 Jan 2010 19:05:39 +0000"  >&lt;p&gt;It looks like )Cygwin + Shell-script + Java) is a difficult combination. We have just one shell script test_tools.sh in the Java part of Avro. Is there a specific reason why it is a shell script. What happens if we replace its functionality with ant?&lt;/p&gt;</comment>
                            <comment id="12800849" author="philip" created="Fri, 15 Jan 2010 19:21:19 +0000"  >&lt;p&gt;test_tools.sh is a shell script because I hate writing shell scripts in ant &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  (The script invokes avro-tools with various arguments, and uses diff/cmp to make sure it gets expected results.)  For what it does, I&apos;d prefer python to ant, but if I won&apos;t get in the way if you&apos;d prefer ant.&lt;/p&gt;</comment>
                            <comment id="12800866" author="phunt" created="Fri, 15 Jan 2010 19:34:41 +0000"  >&lt;p&gt;I hate writing shell scripts in general. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Maintaining the ones we have for ZooKeeper is an annoying job. If I could&lt;br/&gt;
do over again I&apos;d probably use ant whenever possible. I did something similar to this when I created the&lt;br/&gt;
avro quickstart example.&lt;/p&gt;

&lt;p&gt;Every so often I see posts like this one &lt;a href=&quot;http://perlmeister.com/shell_yapc2008.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://perlmeister.com/shell_yapc2008.html&lt;/a&gt; from ppl I respect (like Mike).&lt;/p&gt;

&lt;p&gt;ie &quot;why not use X instead of shell scripts&quot; etc... where X is often python/perl.&lt;/p&gt;

&lt;p&gt;any thoughts on this? I love python and it&apos;s available for pretty much every platform right? Why not switch to say&lt;br/&gt;
python for stuff like this?&lt;/p&gt;</comment>
                            <comment id="12801072" author="philip" created="Sat, 16 Jan 2010 02:12:34 +0000"  >&lt;p&gt;I&apos;m totally cool with switching to python.  (It&apos;s available everywhere, though sometimes which version varies, and depending on things not in the stdlib is a pain.)  I find that for short things, I don&apos;t mind shell, and I try to do as little XML as possible &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I suspect this is all preference-based.&lt;/p&gt;</comment>
                            <comment id="12801078" author="thiru_mg" created="Sat, 16 Jan 2010 02:44:50 +0000"  >&lt;p&gt;Yes, in general, Python will be a much better alternative to shell.&lt;/p&gt;

&lt;p&gt;But the specific problem here is that Java which is completely unaware of Cygwin, works with Windows paths and any Cygwin based scripting engine will understand only Cygwin paths and so they don&apos;t interact well. Another minor irritation is that under Windows Java&apos;s classpath separator is semicolon and under Unix, it is colon. There are the following options:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Use relative paths always. Then the only difference between Cygwin and Windows paths is forward- versus back-slash. Windows API is fortunately okay with forward slash.&lt;/li&gt;
	&lt;li&gt;Use cygpath Cygwin&apos;s path translation tool. This will lead to some kind &quot;if (cygwin)&quot; constructs in the scripts.&lt;/li&gt;
	&lt;li&gt;Use ant. Since ant is a Java utility, it does the right thing for Windows.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;None of these is a pretty solution. I&apos;m leaning toward ant because, we already need ant (no new dependency) and we have (at least for now) just one small script to translate.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Jan 2010 18:31:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-339] build.sh should show usage if invoked with no arguments</title>
                <link>https://issues.apache.org/jira/browse/AVRO-339</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Simple patch so invoking &quot;build.sh&quot; prints usage.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445653">AVRO-339</key>
            <summary>build.sh should show usage if invoked with no arguments</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="philip">Philip Zeyliger</assignee>
                                    <reporter username="philip">Philip Zeyliger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 18:41:06 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Mon, 18 Jan 2010 21:43:50 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12800830" author="cutting" created="Fri, 15 Jan 2010 18:49:41 +0000"  >&lt;p&gt;Any reason not to include &apos;exit 1&apos; in the &apos;usage&apos; function?  Other than that, +1.&lt;/p&gt;</comment>
                            <comment id="12800846" author="philip" created="Fri, 15 Jan 2010 19:15:27 +0000"  >&lt;p&gt;Sure, either way.&lt;/p&gt;</comment>
                            <comment id="12801969" author="cutting" created="Mon, 18 Jan 2010 21:43:50 +0000"  >&lt;p&gt;I just committed this.  Thanks, Philip.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430424" name="AVRO-339.patch" size="458" author="philip" created="Fri, 15 Jan 2010 19:15:27 +0000"/>
                            <attachment id="12430419" name="AVRO-339.patch" size="458" author="philip" created="Fri, 15 Jan 2010 18:41:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Jan 2010 18:49:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-340] specify http transport in spec</title>
                <link>https://issues.apache.org/jira/browse/AVRO-340</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The use of HTTP as an Avro RPC transport should be described in the Avro spec.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445666">AVRO-340</key>
            <summary>specify http transport in spec</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 19:59:53 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:19 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 19:02:28 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>spec</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12800895" author="cutting" created="Fri, 15 Jan 2010 20:27:51 +0000"  >&lt;p&gt;The spec should also describe how URIs may be used to name Avro transports.  Initially we&apos;ll only specify http: uris.&lt;/p&gt;

&lt;p&gt;Avro should only specify transports that we intend to support long-term.  We may add other transports subsequently, but, in the meantime, we should not encourage implementations of non-standard transports, as they will complicate compatibility: we do not want to have to support them long-term.&lt;/p&gt;

&lt;p&gt;Each Avro implementation should implement clients for all transports in the spec, so that applications can talk to any Avro-based service.  They need not implement servers for all server transports however.&lt;/p&gt;</comment>
                            <comment id="12803612" author="hammer" created="Fri, 22 Jan 2010 05:27:58 +0000"  >&lt;p&gt;How should we handle framing in the context of HTTP transports? Use an HTTP header for body length?&lt;/p&gt;</comment>
                            <comment id="12803767" author="cutting" created="Fri, 22 Jan 2010 17:32:37 +0000"  >&lt;p&gt;In HTTP, the Content-Length should, if specified, indicate the length of the entire, framed, request and response.  The content of each HTTP request is the framed handshake+messageName+parameters as described in the spec, and the content of each HTTP response is the framed handshake+errorFlag+responseOrError as described in the spec.&lt;/p&gt;</comment>
                            <comment id="12803898" author="hammer" created="Fri, 22 Jan 2010 21:59:33 +0000"  >&lt;p&gt;So we don&apos;t want to do &lt;a href=&quot;http://en.wikipedia.org/wiki/Chunked_transfer_encoding?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Chunked_transfer_encoding?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12803914" author="scott_carey" created="Fri, 22 Jan 2010 22:37:04 +0000"  >&lt;p&gt;I believe, but could be wrong, that both chunked transfer encoding and standard Content-Length transfer encoding is required (client side) to be HTTP 1.1 compliant, but a server can do whatever it wants.&lt;/p&gt;

&lt;p&gt;This is all typically handled at the HTTP library level.  &lt;br/&gt;
I have seen test HTTP server programs that can purposely send flawed transfer encoding to a client.  Its easy to crash IE or Safari this way &amp;#8211; or at least was a couple years ago.&lt;br/&gt;
It may be useful to have a &quot;evil server&quot; and &quot;evil client&quot; tool to make sure implementations are robust.  The same is true for any transport layer, and is one of the reasons why building your own TCP based transport is not as easy as it seems.  You don&apos;t want someone to telnet to a port and take down your server.&lt;/p&gt;</comment>
                            <comment id="12803916" author="cutting" created="Fri, 22 Jan 2010 22:43:25 +0000"  >&lt;p&gt;HTTP chunking should be transparent to Avro.  Avro defines the entire content of the request and response.  Chunk boundary data should only be visible to the HTTP layer.  There may be applications where aligning HTTP chunks with Avro RPC frames will prove useful, and implementations that use a chunked encoding might be wise to align these, but that&apos;s not required.&lt;/p&gt;</comment>
                            <comment id="12829333" author="cutting" created="Thu, 4 Feb 2010 00:10:27 +0000"  >&lt;p&gt;Here&apos;s a patch that fixes this and also addresses &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-342&quot; title=&quot;remove non-standard transports&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-342&quot;&gt;&lt;del&gt;AVRO-342&lt;/del&gt;&lt;/a&gt; by changing the socket and datagram transport javadoc to state that these are non-standard.  It also updates the Java client to explicitly specify POST as the HTTP method.&lt;/p&gt;</comment>
                            <comment id="12829400" author="philip" created="Thu, 4 Feb 2010 02:28:42 +0000"  >&lt;p&gt;+1 on the patch.&lt;/p&gt;

&lt;p&gt;I think that the HttpServer implementation currently in Java maps to any URL, rather than a single specific one.  I wouldn&apos;t mind the spec suggesting that the url is &lt;a href=&quot;http://example.host:port/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://example.host:port/avro&lt;/a&gt;, though other URLs are acceptable.&lt;/p&gt;

&lt;p&gt;Do we need to explicitly mention that it is acceptable to use the same socket for multiple HTTP requests (keep-alive, I believe, in HTTP terms)?&lt;/p&gt;

&lt;p&gt;&amp;#8211; Philip&lt;/p&gt;</comment>
                            <comment id="12829702" author="cutting" created="Thu, 4 Feb 2010 19:02:28 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;

&lt;p&gt;&amp;gt; I wouldn&apos;t mind the spec suggesting that the url is &lt;a href=&quot;http://example.host:port/avro&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://example.host:port/avro&lt;/a&gt;, though other URLs are acceptable.&lt;/p&gt;

&lt;p&gt;I think there might be cases where, for security or otherwise, one might wish to use different urls for different protocols.  If you feel this would be useful, can you file another issue?&lt;/p&gt;

&lt;p&gt;&amp;gt; Do we need to explicitly mention that it is acceptable to use the same socket for multiple HTTP requests (keep-alive, I believe, in HTTP terms)?&lt;/p&gt;

&lt;p&gt;I think that&apos;s covered in the HTTP spec.  We don&apos;t mention connections, proxies, redirects or any of that stuff.  If folks are confused, then we might add clarifications as needed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12445446">AVRO-322</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12445674">AVRO-342</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12445671">AVRO-341</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434736" name="AVRO-340.patch" size="5862" author="cutting" created="Thu, 4 Feb 2010 00:10:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Jan 2010 05:27:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79719</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-341] specify avro transport in spec</title>
                <link>https://issues.apache.org/jira/browse/AVRO-341</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;We should develop a high-performance, secure, transport for Avro.  This should be named with avro: uris.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445671">AVRO-341</key>
            <summary>specify avro transport in spec</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                            <label>rpc</label>
                    </labels>
                <created>Fri, 15 Jan 2010 20:29:42 +0000</created>
                <updated>Sat, 4 Dec 2010 00:59:36 +0000</updated>
                                                                            <component>spec</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>19</watches>
                                                                <comments>
                            <comment id="12800897" author="cutting" created="Fri, 15 Jan 2010 20:32:28 +0000"  >&lt;p&gt;This transport should be suitable for use by Hadoop.  In particular, implementations should be able to use it to security communicate with Hadoop clusters.&lt;/p&gt;

&lt;p&gt;Hadoop plans to use SASL for authentication.  Thus this transport should too.&lt;/p&gt;</comment>
                            <comment id="12802799" author="hammer" created="Wed, 20 Jan 2010 11:48:13 +0000"  >&lt;p&gt;Regarding the use of &quot;avro:&quot; for urls; perhaps &quot;avros&quot;, to leave room for a tcp sockets-based &quot;avro:&quot; url?&lt;/p&gt;</comment>
                            <comment id="12830376" author="cutting" created="Fri, 5 Feb 2010 23:48:55 +0000"  >&lt;p&gt;&amp;gt; Regarding the use of &quot;avro:&quot; for urls; perhaps &quot;avros&quot;, to leave room for a tcp sockets-based &quot;avro:&quot; url?&lt;/p&gt;

&lt;p&gt;I would like to minimize the number of transports, as they combinatorially explode the compatibility matrix.  Rather we should devise a single transport that is both capable of high performance and supports authentication and encryption.  The authentication and encryption should be optional, as they are in SASL.  We&apos;ll want to be able to piggyback the initial SASL handshake on the initial request response, so that services which do not use authentication or encryption pay little penalty.&lt;/p&gt;</comment>
                            <comment id="12830451" author="philip" created="Sat, 6 Feb 2010 04:11:22 +0000"  >&lt;p&gt;I&apos;m hijacking this thread for the description (as opposed to the title).  Let&apos;s start thinking about a high-performance, secure transport for Avro.&lt;/p&gt;

&lt;p&gt;Here&apos;s a dump of my current thoughts on this topic, after reading up a bit on SASL, and reading through some of the the Hadoop security patches.&lt;/p&gt;

&lt;p&gt;First off, we should probably call this a &quot;protocol&quot;.  It&apos;s a bit tricky, since we&apos;ve already got a notion of Avro protocols, but &quot;transport&quot; reminds people of &lt;a href=&quot;http://en.wikipedia.org/wiki/Transport_Layer&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Transport_Layer&lt;/a&gt;, i.e., UDP vs TCP, and that&apos;s not what we&apos;re discussing here.  (On the TCP vs UDP front, let&apos;s focus our efforts first on a TCP protocol.  There might be a lot of value of having a UDP protocol as well, but it&apos;s clear that we&apos;ll need a TCP one.)&lt;/p&gt;

&lt;p&gt;It&apos;s a bit meta, but I&apos;d like us to consider describing Avro&apos;s protocol in terms of (and here the terminology falls down) an Avro protocol, or at least in terms of Avro records.  Instead of saying &quot;and then there shall be a long, encoded like so, and then it shall by follows by that many bytes&quot;, we should just say, and &quot;then shall we receive a record with the following schema&quot;.  We already do so in part, and I think that&apos;s the right direction.  I think it will make the description of the protocol clearer, and, I think, it will let the implementation worry re-use some schema functionality.  (I think implementations should use the most type-safe APIs they have available to them, but, hey, that&apos;s by definition an implementation detail.)&lt;/p&gt;

&lt;p&gt;In terms of the &quot;primitives&quot;, here&apos;s what I can think of:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CALL; this is the work-horse of the RPC, analagous to &lt;a href=&quot;http://hadoop.apache.org/avro/docs/1.2.0/spec.html#Call+Format&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/avro/docs/1.2.0/spec.html#Call+Format&lt;/a&gt;.  If we decide to do schema resolution at the handshake level, we would do it here.  Returns the response.  May throw AuthenticationRequired.&lt;/li&gt;
	&lt;li&gt;AUTHENTICATE: this is the command for authentication.  SASL sometimes requires a back and forth (until it&apos;s &quot;done&quot;); we&apos;d put the hooks for all of that here.&lt;/li&gt;
	&lt;li&gt;DISCOVER: Asks the server for information about itself.  Specifically, servers may tell clients what protocols they support.  This may throw AuthenticationRequired or return nothing, if the server wants to be cagey.  This is in some sense similar to FB303: &lt;a href=&quot;https://svn.apache.org/repos/asf/incubator/thrift/trunk/contrib/fb303/if/fb303.thrift&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/incubator/thrift/trunk/contrib/fb303/if/fb303.thrift&lt;/a&gt; .  In a friendly environment, a server could tell you who&apos;s running it (a username), what machine it&apos;s on, arbitrary key/value statistics.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We absolutely need to support piggy-backing of commands.  One way to do that is for clients to simply be able to send multiple commands in a row, without waiting for the response.  Or having commands able to include subcommands.&lt;/p&gt;

&lt;p&gt;We need to support out-of-order responses and &quot;one way&quot; (don&apos;t wait for a response) commands.&lt;/p&gt;

&lt;p&gt;We still need to do framing.  Also, SASL requires that all bytes after the succesful SASL authentication are wrapped by SASL, so servers and clients need to have a state machine that understands that, and wraps appropriately.  (We could maybe have avoided framing if we supported framing directly in Avro&apos;s string primitive type, like we do in Avro&apos;s map type, by having a negative string length indicate a string that is continued.)&lt;/p&gt;

&lt;p&gt;Finally, we need to think hard about how to version this protocol itself.  It&apos;s appealing to be able to add commands in the future (&quot;oneway&quot; is an example) or to enrich the response of commands like &quot;DISCOVER&quot;.  It&apos;s noteworthy that text-based protocols like IMAP have had little trouble extending themselves to stuff like SASL, because they could just augment what existing commands did.  (RFC 4959  is pretty short.)   A simple approach would be to bootstrap it by sending hash(avro protocol schema), and doing much like we do with calls right now.&lt;/p&gt;

&lt;p&gt;Anyway, that&apos;s where I am right now.  Looking forward to more discussion.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Philip&lt;/p&gt;</comment>
                            <comment id="12830461" author="tlipcon" created="Sat, 6 Feb 2010 04:47:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;First off, we should probably call this a &quot;protocol&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For the sake of this issue, maybe we discuss &quot;the protocol&quot; vs the &quot;service protocol&quot; or &quot;user protocol&quot;, where the former means the stuff here and the latter means the user-specified .avpr protocol?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;DISCOVER: Asks the server for information about itself&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Does this need to be first-class in the protocol? Rather, can we reserve a namespace of CALLs that are Avro-scoped? eg org.avro.getServerMetrics(), etc? This seems like it will be less implementation work since it can share code with the rest of RPC.&lt;/p&gt;

&lt;p&gt;Similarly, AUTHENTICATE &lt;em&gt;could&lt;/em&gt; be framed as a CALL as well. Though it may be difficult to integrate SASL here, it&apos;s worth exploring.&lt;/p&gt;

&lt;p&gt;I think putting all of the request/response through the &quot;call&quot; mechanism will also simplify some security, request tracing, auditing, etc - it&apos;s worth being able to set up a service such that only authenticated subjects with an &quot;ops&quot; group could see metrics. Or, allow a &quot;nagios&quot; principal access to the server metrics/health but nothing else.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Or having commands able to include subcommands&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please explain? What&apos;s a subcommand?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We need to support out-of-order responses and &quot;one way&quot; (don&apos;t wait for a response) commands.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Strongly agree. The &quot;streaming RPCs&quot; (&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-406&quot; title=&quot;Support streaming RPC calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-406&quot;&gt;AVRO-406&lt;/a&gt;) are another requirement that should fit in here. To support streaming RPC along with out-of-order response, we should also be able to &lt;em&gt;interleave&lt;/em&gt; response chunks at chunk boundaries.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;A simple approach would be to bootstrap it by sending hash(avro protocol schema), and doing much like we do with calls right now.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So this bootstrap schema would be sent outside the scope of &quot;send things as avro records&quot;? Or it would just be a bootstrap record that we promise to never ever change except at major (incompatible) versions?&lt;/p&gt;</comment>
                            <comment id="12830464" author="philip" created="Sat, 6 Feb 2010 05:06:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does this need to be first-class in the protocol? Rather, can we reserve a namespace of CALLs that are Avro-scoped? eg org.avro.getServerMetrics(), etc? This seems like it will be less implementation work since it can share code with the rest of RPC.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We definitely need to put in a little bit more thought in how a server can be servicing many Avro &quot;user protocols&quot; simultaneously, which would allow it, then.  Then you might be able to say &quot;hey, also serve the following built-in services&quot;.&lt;/p&gt;

&lt;p&gt;But then how do you discover whether those services are being served?  I guess you could call them, and get a MethodNotFound/Supported error.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;AUTHENTICATE could be framed as a CALL as well. Though it may be difficult to integrate SASL here, it&apos;s worth exploring.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d draw the line here, though.  I think the &quot;user protocol&quot; has things to do with the service being offered, but there are commands that affect the state of the server in a way the client shouldn&apos;t be aware of.  AUTHENTICATE is one.  &quot;SET_COMPRESSION_LEVEL&quot; might be another.  These affect how the server behaves for this connection in a way that&apos;s transparent to the &quot;user protocol&quot; implementor.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bootstrapping&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, we&apos;d try never to change it?  What, you don&apos;t believe me?&lt;/p&gt;</comment>
                            <comment id="12831117" author="tlipcon" created="Mon, 8 Feb 2010 21:00:01 +0000"  >&lt;p&gt;linking the streaming RPC call JIRA - we&apos;ll need to be conscious of that requirement when designing the wire protocol so we can interleave multiple streamed RPCs.&lt;/p&gt;</comment>
                            <comment id="12831174" author="cutting" created="Mon, 8 Feb 2010 22:50:02 +0000"  >&lt;p&gt;&amp;gt; First off, we should probably call this a &quot;protocol&quot;.&lt;/p&gt;

&lt;p&gt;It&apos;s fair to use a term differently in different contexts.  Avro is not using terms in accord with the OSI model.  Avro&apos;s spec does try to define each term when its first used, and to use terms consistently within that document.  Can&apos;t we use the same terminology here?  If we&apos;d like to switch terminology, then we should also update the spec and the implementations, no?&lt;/p&gt;

&lt;p&gt;&amp;gt; I&apos;d like us to consider describing Avro&apos;s protocol in terms of (and here the terminology falls down) an Avro protocol, or at least in terms of Avro records.&lt;/p&gt;

&lt;p&gt;I think this could be deceptive if we don&apos;t support Avro versioning features here.  I think it&apos;s often simpler to bootstrap a system not using itself but using a more primitive system.  We&apos;d like the transport to be extensible.  Many protocols use a combination of named commands, key/value meta-data and a binary payload to provide extensibility.  A description at this level in Avro is possible, but would probably not be able to describe the internal structure of every command&apos;s payload.  So, in practice, folks might not in fact implement a so-specified transport using Avro, as that might require an extra copy of payload data.  So we might stick to using Avro to describe just the command+metadata part, and leave payloads outside of this.  Or we might alternately describe the command+metadata part as something as simple as &amp;lt;command&amp;gt;(&amp;lt;newline&amp;gt;&amp;lt;name&amp;gt;&amp;lt;colon&amp;gt;&amp;lt;value&amp;gt;&amp;lt;newline&amp;gt;)*&amp;lt;newline&amp;gt;&amp;lt;payload&amp;gt;.&lt;/p&gt;
</comment>
                            <comment id="12831177" author="tlipcon" created="Mon, 8 Feb 2010 22:55:17 +0000"  >&lt;p&gt;I agree that the &quot;payload&quot; should not itself be avro-encapsulated. Instead, I think the stream would look something like:&lt;/p&gt;

&lt;p&gt;client:&lt;br/&gt;
SendCommandRecord for call Foo, callid 1&lt;br/&gt;
CommandData for callid 1, length 234 bytes&lt;br/&gt;
&amp;lt;param 1&amp;gt;&lt;br/&gt;
&amp;lt;param 2&amp;gt;&lt;br/&gt;
&amp;lt;param 3&amp;gt;&lt;/p&gt;

&lt;p&gt;server:&lt;br/&gt;
SendResponseRecord for callid 1&lt;br/&gt;
ResponseData for callid 1, length 12 bytes&lt;br/&gt;
&amp;lt;frame 1 of response&amp;gt;&lt;br/&gt;
ResponseData for callid 2, length 24 bytes&lt;br/&gt;
&amp;lt;frame 2 of response&amp;gt;&lt;/p&gt;

&lt;p&gt;(this is obviously not fleshed out - just trying to describe how I think interleaving of avro &quot;control&quot; records could be done with the user-protocol &quot;payload&quot; records.)&lt;/p&gt;</comment>
                            <comment id="12831183" author="cutting" created="Mon, 8 Feb 2010 23:08:34 +0000"  >&lt;p&gt;Todd, so there&apos;s a separate command to initiate a call, and to send each chunk of its data.  Is there also a command that terminates a call, i.e., declares that its request or response has no more frames?&lt;/p&gt;

&lt;p&gt;Also, the term &quot;Record&quot; above is confusing.  And &quot;Data&quot; is overloaded and &quot;Frame&quot; might be used instead.&lt;/p&gt;</comment>
                            <comment id="12831188" author="tlipcon" created="Mon, 8 Feb 2010 23:16:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;Todd, so there&apos;s a separate command to initiate a call, and to send each chunk of its data. Is there also a command that terminates a call, i.e., declares that its request or response has no more frames? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Something like that... Philip, Matt, and I are going to try to brainstorm a bit in the next couple of days and write up some kind of proposal to start a conversation about specifics (the above is intentionally vague)&lt;/p&gt;</comment>
                            <comment id="12831204" author="massie" created="Tue, 9 Feb 2010 00:09:52 +0000"  >&lt;p&gt;I support the idea of having an Avro RPC specification that is written as much as possible (completely?) in Avro schema.  This isn&apos;t just good design, it also prevents duplicating work. I agree with Phil that we &lt;b&gt;don&apos;t&lt;/b&gt; want...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Instead of saying &quot;and then there shall be a long, encoded like so, and then it shall by follows by that many bytes&quot;,...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There are many good examples of RPC/serialization programs that describe RPC using IDLs.  For example, the Internet Communications Engine (&lt;a href=&quot;http://www.zeroc.com/doc/Ice-3.3.1/manual/Protocol.39.3.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.zeroc.com/doc/Ice-3.3.1/manual/Protocol.39.3.html&lt;/a&gt;) describes their RPC protocol using ICE (their IDL).  SunRPC uses XDR to completely describe RPC (&lt;a href=&quot;http://www.faqs.org/rfcs/rfc1050.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.faqs.org/rfcs/rfc1050.html&lt;/a&gt;).  There&apos;s even an RFC protocol script that pulls all the XDR definitions from an RFC and writes them into a single protocol (.x) file to be run using &lt;tt&gt;rpcgen&lt;/tt&gt;.  1970s tech FTW!&lt;/p&gt;

&lt;p&gt;Here is a straw man to make it a little clearer what I&apos;m proposing here.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
 &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpc_message&quot;&lt;/span&gt;,
 &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;xid&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;},
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;auth&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bytes&quot;&lt;/span&gt;},
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;body&quot;&lt;/span&gt;, [

       {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpc_call_message&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpcvers&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;},
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;service&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;},
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;version&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;},
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;method&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;},

       {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpc_response_success&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;results&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bytes&quot;&lt;/span&gt;}]},

       {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpc_version_mismatch&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;field&quot;&lt;/span&gt;: [
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;low_version&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;},
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;high_version&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;}]},

       {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpc_service_unavailable&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;field&quot;&lt;/span&gt;: [
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;reason&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bytes&quot;&lt;/span&gt;}]},

       {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpc_call_version_mismatch&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;fields&quot;&lt;/span&gt;: [
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;low_version&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;},
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;high_version&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&quot;&lt;/span&gt;}]},

       {&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;record&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;rpc_auth_error&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;field&quot;&lt;/span&gt;: [
          {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;reason&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;bytes&quot;&lt;/span&gt;}]} ]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This example is really just RFC 1050 wrapped up in Avro schema.  This schema isn&apos;t complete but it&apos;s &lt;b&gt;explicit&lt;/b&gt;.  For example, it says that an &lt;tt&gt;rpc_response_success&lt;/tt&gt; message is nothing but a bunch of bytes.  That&apos;s okay.  We can drill into the details of those opaque bytes in a separate response schema definition.  This layering will give us flexibility in the future and make it easier to break RPC into components.  For example, in this case, we could easily create a base RPC proxy for clients that passes the response bytes &quot;up&quot; to a higher level response processor.  The proxy only needs to know the base RPC schema and nothing more. &lt;/p&gt;

&lt;p&gt;This base is also very light.  You could &lt;tt&gt;CALL&lt;/tt&gt; a remote method using as little as 6 bytes sent over whatever transport you like e.g. UDP, TCP, SSL, TCP-over-DNS. Transports only deal in &lt;b&gt;bytes&lt;/b&gt; and could not care less about messages (although we may need to define record marking like section 10 of RFC 1050).  &lt;/p&gt;

&lt;p&gt;Btw, RPC is at the &lt;b&gt;session&lt;/b&gt; level with the &lt;b&gt;presentation&lt;/b&gt; to the &lt;b&gt;application&lt;/b&gt; being Avro serialization.  I agree that using the term Avro &lt;b&gt;transport&lt;/b&gt; is confusing and makes me cry elephant tears.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; OSI Layer &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Example &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Application &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Avro Proxy Object &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Presentation &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Avro Binary Serialization &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Session &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Avro RPC state machine &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Transport &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; TCP, UDP, etc &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Network &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; IP &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Data-link/Physical &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Ethernet &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;blockquote&gt;&lt;p&gt;DISCOVER: Asks the server for information about itself. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It terms of vocabulary, I feel that &lt;b&gt;discovery&lt;/b&gt; is more about finding all &lt;b&gt;machines&lt;/b&gt; running Avro services (like bonjour or Zeroconf).  The term &lt;b&gt;introspection&lt;/b&gt; seems more appropriate here.&lt;/p&gt;

&lt;p&gt;Aside from introspection, we also need a simple Avro &quot;ping&quot; service.  Using the base schema above, we could have a convention that says&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;All service numbers less than zero are reserved for Avro use (for discovery/introspection, ping, etc)&lt;/li&gt;
	&lt;li&gt;All service numbers greater than zero are for user-defined services.&lt;/li&gt;
	&lt;li&gt;Service number zero is the ping service.&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="12831209" author="tlipcon" created="Tue, 9 Feb 2010 00:17:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;It terms of vocabulary, I feel that discovery is more about finding all machines running Avro services (like bonjour or Zeroconf). The term introspection seems more appropriate here.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1. Thrift calls this idea &quot;reflection&quot; though they failed to implement it in a useful manner so I think it actually got pulled out.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;create a base RPC proxy for clients that passes the response bytes &quot;up&quot; to a higher level response processor&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This will be tricky to integrate with streaming RPC, and I think will make coding somewhat difficult, since in effect we&apos;d have to embed one avro decoder inside another. I think it&apos;ll simplify things to look at the avro session as a state machine that flip flops between &quot;control plane&quot; messages and &quot;user data plane&quot; messages. The user data planed messages are of course in themselves avro-encoded, but using the user&apos;s protocol and types, rather than one we&apos;ve defined. The control plane messages provide a sort of framing that connects the user frames to particular calls. Does that make sense?&lt;/p&gt;</comment>
                            <comment id="12831216" author="cutting" created="Tue, 9 Feb 2010 00:32:03 +0000"  >&lt;p&gt;Matt&amp;gt; look at the avro session as a state machine that flip flops between &quot;control plane&quot; messages and &quot;user data plane&quot; messages&lt;/p&gt;

&lt;p&gt;Except the Wikipedia page says that HTTP is at the application level, not at the session level.  Seriously, we just need to pick some terms, define them, and use them consistently.  Protocol and Transport both currently have clear, unambiguous definitions in Avro.  Alignment with OSI terminology is not a priority for me.  If it is for you, then please propose a patch updating the spec and all of the implementations.&lt;/p&gt;

&lt;p&gt;Todd&amp;gt; look at the avro session as a state machine that flip flops between &quot;control plane&quot; messages and &quot;user data plane&quot; messages&lt;/p&gt;

&lt;p&gt;+1 this makes good sense to me.&lt;/p&gt;</comment>
                            <comment id="12831219" author="cutting" created="Tue, 9 Feb 2010 00:43:06 +0000"  >&lt;p&gt;Oops.  Matt&apos;s quote that I responded to above was meant to be: &quot;Btw, RPC is at the session level with the presentation to the application being Avro serialization.&quot;&lt;/p&gt;</comment>
                            <comment id="12831249" author="massie" created="Tue, 9 Feb 2010 01:51:49 +0000"  >&lt;p&gt;Todd&amp;gt; look at the avro session as a state machine that flip flops between &quot;control plane&quot; messages and &quot;user data plane&quot; messages&lt;/p&gt;

&lt;p&gt;Sounds good to me.  The service number rules at the end of my message sort of speaks to that separation.  We need to tease out the details to do it better.&lt;/p&gt;

&lt;p&gt;Doug&amp;gt; OSI terminology is not a priority for me. If it is for you, then please propose a patch updating the spec and all of the implementations.&lt;/p&gt;

&lt;p&gt;If the team agrees on different terminology, I will happily do the search/replace.  Being consistent is important I agree, but it would be ideal to be consistent with the wider community outside of Avro.  &lt;/p&gt;

&lt;p&gt;Doug&amp;gt; Except the Wikipedia page says that HTTP is at the application level&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/OSI_model&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/OSI_model&lt;/a&gt; .   RPC is listed as a Layer 5 (Session) example.   HTTP is correctly at the Application level but this Jira is about RPC and not HTTP.&lt;/p&gt;
</comment>
                            <comment id="12831364" author="ryanobjc" created="Tue, 9 Feb 2010 08:52:29 +0000"  >&lt;p&gt;here are some initial thoughts on requirements for applications like hbase... one thing that sets hbase apart from systems like datanodes is there are high volume, small payload calls. Some calls have as little as 10-20 bytes in payload and we wish to make them thousands of times a second. Obviously this is easy to fit into a 1500 MTU, but also we want to make sure that deserializing these RPCs dont end up being a prohibitive cost. An optimized protocol could eschew all these features assuming a limited schema set and less features, but it would be nice not to have to do so.&lt;/p&gt;

</comment>
                            <comment id="12832612" author="philip" created="Thu, 11 Feb 2010 18:25:37 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I&apos;d like us to consider describing Avro&apos;s protocol in terms of (and here the terminology falls down) an Avro protocol, or at least in terms of Avro records.&lt;/p&gt;

&lt;p&gt;I think this could be deceptive if we don&apos;t support Avro versioning features here. I think it&apos;s often simpler to bootstrap a system not using itself but using a more primitive system. We&apos;d like the transport to be extensible. Many protocols use a combination of named commands, key/value meta-data and a binary payload to provide extensibility. A description at this level in Avro is possible, but would probably not be able to describe the internal structure of every command&apos;s payload. So, in practice, folks might not in fact implement a so-specified transport using Avro, as that might require an extra copy of payload data. So we might stick to using Avro to describe just the command+metadata part, and leave payloads outside of this. Or we might alternately describe the command+metadata part as something as simple as &amp;lt;command&amp;gt;(&amp;lt;newline&amp;gt;&amp;lt;name&amp;gt;&amp;lt;colon&amp;gt;&amp;lt;value&amp;gt;&amp;lt;newline&amp;gt;)*&amp;lt;newline&amp;gt;&amp;lt;payload&amp;gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;I think this could be deceptive if we don&apos;t support Avro versioning features here&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we have to find a way to bootstrap RPC so that we &lt;b&gt;do&lt;/b&gt; support Avro&apos;s versioning features on the Avro Rpc Protocol.  We&apos;re going to want to add things like introspection.  The good news is that the bootstrap can be dead simple: we could explicitly version the schemas that servers and clients understand.  (With the restriction that versions still have to be forwards and backwards compatible in the Avro sense, but we can force the sender to project back into the older version.)  Or we could do something more complicated and exchange the schemas like the current transport does.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;as that might require an extra copy of payload data. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If we have to copy bytes, that indicates mostly a limited API, and not a fundamental restriction.  Our users will implement things where they wish to avoid byte copying too, so this is as good a use case as any to see if we can pull it away.  For this reason, I&apos;m &quot;meh&quot; on the proposal of separating control and data planes, though it might be the simplest way around Avro bytes not being framed.&lt;/p&gt;

&lt;p&gt;I think we&apos;ve got enough information in this thread that we should probably all hash it out in front of a whiteboard.&lt;/p&gt;</comment>
                            <comment id="12847280" author="hammer" created="Fri, 19 Mar 2010 08:50:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we&apos;ve got enough information in this thread that we should probably all hash it out in front of a whiteboard.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Did the above whiteboard-fronted hashing take place?&lt;/p&gt;</comment>
                            <comment id="12866637" author="cutting" created="Wed, 12 May 2010 17:25:13 +0000"  >&lt;p&gt;Perhaps we should adopt a PEP-like process for things like this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.python.org/dev/peps/pep-0001/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.python.org/dev/peps/pep-0001/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In that vein, I&apos;ve attached the beginnings of an Avro Enhancement Proposal (AEP) for this feature.&lt;/p&gt;

&lt;p&gt;Bruce, would you like to help flesh this out?  I think we should first come to general agreement about a specification, then implement it in at least two languages, perhaps changing the design as we go, before we declare it as a stable Avro feature.&lt;/p&gt;

&lt;p&gt;Does that sound like a reasonable process?&lt;/p&gt;</comment>
                            <comment id="12867566" author="brucem" created="Fri, 14 May 2010 17:07:07 +0000"  >&lt;p&gt;I like that and would be happy to help flesh it out ... would Confluence be a good place for AEPs?&lt;/p&gt;</comment>
                            <comment id="12867590" author="cutting" created="Fri, 14 May 2010 17:42:23 +0000"  >&lt;p&gt;We don&apos;t have a Confluence wiki yet.  Someone needs to as infrastructure to create one and then move all of our content to it.  Volunteers welcome.&lt;/p&gt;

&lt;p&gt;To some degree it doesn&apos;t matter where it&apos;s hosted.  We just need a clearly defined process.  The PEP process is version-control based, which more naturally keeps it from becoming a free-for-all.  But a wiki-based process could be defined.  We don&apos;t want folks to just add features they&apos;d like to see to a spec without considering implementation costs.  A proposed enhancement should have a clear owner, a clear process for integrating changes to the proposal and a clear process for acceptance.&lt;/p&gt;

&lt;p&gt;If maintaining the proposal in Jira proves awkward, then we can commit an early version of it to subversion and then folks can submit patches to it.  Or someone can propose and instigate an alternate process.&lt;/p&gt;</comment>
                            <comment id="12903657" author="cutting" created="Fri, 27 Aug 2010 21:43:11 +0000"  >&lt;p&gt;I plan to further develop Java&apos;s non-standard socket protocol as a prototype for a future, standard, high-performance, secure RPC transport for Avro.  First I hope to implement out-of-order responses (&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-625&quot; title=&quot;RPC: permit out-of-order responses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-625&quot;&gt;AVRO-625&lt;/a&gt;) then to add SASL-based security (&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-641&quot; title=&quot;add SASL to socket transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-641&quot;&gt;&lt;del&gt;AVRO-641&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12460169">HADOOP-6659</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12455507">AVRO-406</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12472407">AVRO-625</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12472749">AVRO-641</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12407018">HADOOP-4487</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12492051">AVRO-707</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12445546">AVRO-334</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12445666">AVRO-340</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12460976">HBASE-2400</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12444321" name="aep-001.txt" size="2739" author="cutting" created="Wed, 12 May 2010 17:25:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jan 2010 11:48:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[AVRO-342] remove non-standard transports</title>
                <link>https://issues.apache.org/jira/browse/AVRO-342</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;Until &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-341&quot; title=&quot;specify avro transport in spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-341&quot;&gt;AVRO-341&lt;/a&gt; is complete, Avro implementations should only implement HTTP-based RPC lest we introduce transports that we do not intend to support long-term.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445674">AVRO-342</key>
            <summary>remove non-standard transports</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cutting">Doug Cutting</assignee>
                                    <reporter username="cutting">Doug Cutting</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 20:45:10 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:20 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 19:03:14 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12829703" author="cutting" created="Thu, 4 Feb 2010 19:03:14 +0000"  >&lt;p&gt;Fixed along with &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-340&quot; title=&quot;specify http transport in spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-340&quot;&gt;&lt;del&gt;AVRO-340&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12445666">AVRO-340</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79721</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-343] Minor fixes to Eclipse config after build re-org</title>
                <link>https://issues.apache.org/jira/browse/AVRO-343</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The Eclipse launcher stopped working, and gitignore was out of date when I was creating Eclipse project post re-org.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445694">AVRO-343</key>
            <summary>Minor fixes to Eclipse config after build re-org</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="philip">Philip Zeyliger</assignee>
                                    <reporter username="philip">Philip Zeyliger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 22:46:08 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:20 +0000</updated>
                            <resolved>Tue, 26 Jan 2010 19:00:20 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12800975" author="philip" created="Fri, 15 Jan 2010 22:47:20 +0000"  >&lt;p&gt;Attaching patch.  The XML changes are Eclipse jibberish.  gitignore changes should make sense.&lt;/p&gt;</comment>
                            <comment id="12804731" author="philip" created="Mon, 25 Jan 2010 21:32:54 +0000"  >&lt;p&gt;If there are no objections, I&apos;ll commit this in the next few days.  This merely changes some Eclipse configuration.&lt;/p&gt;</comment>
                            <comment id="12805131" author="thiru_mg" created="Tue, 26 Jan 2010 18:51:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;It works for me on Cygwin.&lt;/p&gt;

&lt;p&gt;It&apos;ll be nice if you can also make svn ignore the directory .eclipse and the files .classpath, and .project &lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="12805139" author="philip" created="Tue, 26 Jan 2010 19:00:20 +0000"  >&lt;p&gt;I&apos;ve committed this.  I added the Eclipse files to svn:ignore.  Thanks for trying it out, Thiru!&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Property changes on: lang/java
___________________________________________________________________
Modified: svn:ignore
   - build

   + build
.classpath
.eclipse
.project
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430451" name="AVRO-343.patch.txt" size="1796" author="philip" created="Fri, 15 Jan 2010 22:47:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Jan 2010 18:51:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79722</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-344] Complete rewrite of C implementation</title>
                <link>https://issues.apache.org/jira/browse/AVRO-344</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This JIRA is for tracking what I hope will be the last C rewrite.&lt;/p&gt;

&lt;p&gt;This rewrite&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;removes all dependencies on APR and APR-util.  Memory is managed now using reference counting.  Hashes implemented using public domain code from Berkeley.  List implemented using BSD license queue.h&lt;/li&gt;
	&lt;li&gt;uses the jansson JSON parser for parsing schemas.  The Jansson parser is a high-quality JSON parser in C with an Apache-friendly MIT license&lt;/li&gt;
	&lt;li&gt;there is a well-defined object framework that serves both datum and schema datatypes and provides reference counting.  Schemas and datum/values are no longer part of a single monolithic structure now.&lt;/li&gt;
	&lt;li&gt;you can now create a schema from json or by hand in code&lt;/li&gt;
	&lt;li&gt;updated to support the new &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-163&quot; title=&quot;Each language Avro supports should be a separate package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-163&quot;&gt;&lt;del&gt;AVRO-163&lt;/del&gt;&lt;/a&gt; build layout&lt;/li&gt;
	&lt;li&gt;properly checks avro identifiers&lt;/li&gt;
	&lt;li&gt;probes for the endianness of the architecture in order to optimize endianness flipping, e.g. only on big-endian machines are little-endian conversions done.&lt;/li&gt;
	&lt;li&gt;documentation is now handled by asciidoc instead of doxygen.&lt;/li&gt;
	&lt;li&gt;increased number of schema unit tests&lt;/li&gt;
	&lt;li&gt;provides much more schema processing functionality like recursively checking for equality, checking for matches with promotion, and recursive schema copy.&lt;/li&gt;
	&lt;li&gt;lots of bug fixes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This code is by no means complete.  Most of the schema processing code is finished along with the primitive encoders for the binary format but I still need to complete the read/write path for complex types.&lt;/p&gt;

&lt;p&gt;I&apos;m submitting this Jira to make the work public and to solicit feedback in prep for the 1.3 release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445699">AVRO-344</key>
            <summary>Complete rewrite of C implementation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="massie">Matt Massie</assignee>
                                    <reporter username="massie">Matt Massie</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 23:05:31 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:20 +0000</updated>
                            <resolved>Sat, 16 Jan 2010 02:00:37 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12800991" author="massie" created="Fri, 15 Jan 2010 23:10:32 +0000"  >&lt;p&gt;I&apos;m attaching the C distribution tarball to this issue as well since it is (a) smaller than the patch and (b) makes it easier to run/check the code.  It was generated by running `cd lang/c &amp;amp;&amp;amp; ./build dist`.&lt;/p&gt;
</comment>
                            <comment id="12800995" author="massie" created="Fri, 15 Jan 2010 23:20:52 +0000"  >&lt;p&gt;After applying the patch, run the following two commands in lang/c:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;% chmod u+x build.sh
% chmod u+x jansson/test/*test* jansson/test/*.py
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12801065" author="massie" created="Sat, 16 Jan 2010 02:00:37 +0000"  >&lt;p&gt;I just committed this to trunk in prep for 1.3 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430456" name="AVRO-344.patch" size="1094805" author="massie" created="Fri, 15 Jan 2010 23:06:41 +0000"/>
                            <attachment id="12430460" name="avro-c-1.2.0-dev.tar.gz" size="708682" author="massie" created="Fri, 15 Jan 2010 23:10:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-345] Optimization for ResolvingDecoder</title>
                <link>https://issues.apache.org/jira/browse/AVRO-345</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;If the writer&apos;s and reader&apos;s schema are records, we allow the order of fields to be different in them. The ResolvingDecoder returns the fields in the writer&apos;s order. This is to avoid buffering. The current implementation uses FieldAdjust action on the parser stack. The number of such action symbols is equal to the number of reader fields. This causes performance problem because the number of calls to advance() is almost double compared to the number of calls in ValidatingDecoder.&lt;/p&gt;

&lt;p&gt;This patch replaces the FieldAdjustAction symbols with FieldOrderAction symbols. We have FieldOrderActions one per record, which is expected to be much smaller than the number of fields. Though it changes the API for ResolvingDecoder slightly, there is no impact because we do not have any users yet.&lt;/p&gt;

&lt;p&gt;I see a 10-15% improvement in my computer with Perf -S.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445728">AVRO-345</key>
            <summary>Optimization for ResolvingDecoder</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thiru_mg">Thiruvalluvan M. G.</assignee>
                                    <reporter username="thiru_mg">Thiruvalluvan M. G.</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Jan 2010 12:08:38 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:20 +0000</updated>
                            <resolved>Tue, 19 Jan 2010 14:31:25 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12801891" author="cutting" created="Mon, 18 Jan 2010 18:26:38 +0000"  >&lt;p&gt;+1 This looks good to me.&lt;/p&gt;

&lt;p&gt;We talked about re-writing GenericDatumReader to use ResolvingDecoder as an optimization.  Did that end up being faster?  If so, have you yet filed an issue for that?&lt;/p&gt;</comment>
                            <comment id="12802279" author="thiru_mg" created="Tue, 19 Jan 2010 14:31:25 +0000"  >&lt;p&gt;Committed revision 900790. Thanks Doug for reviewing it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We talked about re-writing GenericDatumReader to use ResolvingDecoder as an optimization. Did that end up being faster? If so, have you yet filed an issue for that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I didn&apos;t see measurable improvement with GenericDatumReader using ResolvingDecoder. I&apos;ll profile and if I can get some result, I&apos;ll file a JIRA.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430503" name="AVRO-345-test.patch" size="3176" author="thiru_mg" created="Sat, 16 Jan 2010 12:11:27 +0000"/>
                            <attachment id="12430502" name="AVRO-345.patch" size="9742" author="thiru_mg" created="Sat, 16 Jan 2010 12:11:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Jan 2010 18:26:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-346] Add function to validate a datum against a schema</title>
                <link>https://issues.apache.org/jira/browse/AVRO-346</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This patch adds a new function &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; schema_datum_validate (avro_schema_t expected_schema, avro_datum_t datum);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which validates a datum against a schema.  Having this function will allow me to start on the datum write path.&lt;/p&gt;

&lt;p&gt;This patch also includes minor documentation updates, code cleanup, and changes all double tail queue macros to single tail queue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445796">AVRO-346</key>
            <summary>Add function to validate a datum against a schema</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="massie">Matt Massie</assignee>
                                    <reporter username="massie">Matt Massie</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2010 05:07:25 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:20 +0000</updated>
                            <resolved>Mon, 18 Jan 2010 05:35:29 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12801682" author="massie" created="Mon, 18 Jan 2010 05:35:29 +0000"  >&lt;p&gt;Committed to trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430605" name="AVRO-346.patch" size="41994" author="massie" created="Mon, 18 Jan 2010 05:08:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79725</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-347] Add the --unsafe flag to asciidoc in order to include source/header files</title>
                <link>https://issues.apache.org/jira/browse/AVRO-347</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;The C documentation includes header/source files in the generation of documentation.  Unless you pass the --unsafe flag to asciidoc is will not allow you to include files outside of the directory you are building docs in.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445798">AVRO-347</key>
            <summary>Add the --unsafe flag to asciidoc in order to include source/header files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="massie">Matt Massie</assignee>
                                    <reporter username="massie">Matt Massie</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2010 05:44:55 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:20 +0000</updated>
                            <resolved>Mon, 18 Jan 2010 05:50:57 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>c</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12801686" author="massie" created="Mon, 18 Jan 2010 05:50:57 +0000"  >&lt;p&gt;Committed to trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430607" name="AVRO-347.patch" size="496" author="massie" created="Mon, 18 Jan 2010 05:46:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79726</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-348] Avro ivy dependencies include/propagate too many JARs</title>
                <link>https://issues.apache.org/jira/browse/AVRO-348</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;I&apos;ve been tracking down why my RPM build is failing due to an unexpected ant-1.6.5 JAR file, amongst others; the root cause appears to be avro is over-declaring its dependencies.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;The dependency on slf4j-simple is causing the problem in hadoop-* projects with &amp;gt;1 SLF4J back end on the classpath.&lt;/li&gt;
	&lt;li&gt;paranamer-ant is pulling in Ant 1.6.5&lt;/li&gt;
	&lt;li&gt;paranamer depends on paranamer-generator and hence qdox, which isn&apos;t likely to be needed at run time&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12445832">AVRO-348</key>
            <summary>Avro ivy dependencies include/propagate too many JARs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stevel@apache.org">Steve Loughran</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2010 15:33:50 +0000</created>
                <updated>Sat, 12 Mar 2011 00:32:45 +0000</updated>
                            <resolved>Thu, 16 Dec 2010 01:03:01 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12801822" author="steve_l" created="Mon, 18 Jan 2010 15:35:01 +0000"  >&lt;p&gt;The current workaround is to exclude the stuff you don&apos;t want when importing avro or any hadoop-* artifact into your own ivy project&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;dependency org=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop&quot;&lt;/span&gt;
                name=&lt;span class=&quot;code-quote&quot;&gt;&quot;avro&quot;&lt;/span&gt;
                rev=&lt;span class=&quot;code-quote&quot;&gt;&quot;${avro.version}&quot;&lt;/span&gt;
                conf=&lt;span class=&quot;code-quote&quot;&gt;&quot;redist-&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
      &amp;lt;exclude org=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.thoughtworks.paranamer&quot;&lt;/span&gt; /&amp;gt;
      &amp;lt;exclude org=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.slf4j&quot;&lt;/span&gt;/&amp;gt;
      &amp;lt;exclude org=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.mortbay.jetty&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would be nice if the optional dependencies were declared as such in the ivy and POM files.&lt;/p&gt;</comment>
                            <comment id="12971916" author="scott_carey" created="Thu, 16 Dec 2010 01:03:01 +0000"  >&lt;p&gt;Fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-647&quot; title=&quot;Break avro.jar into avro.jar, avro-dev.jar and avro-hadoop.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-647&quot;&gt;&lt;del&gt;AVRO-647&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12441618">AVRO-238</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12466007">HADOOP-6800</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Jan 2010 15:35:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4216</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79727</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[AVRO-349] Make C++ builds work post AVRO-163</title>
                <link>https://issues.apache.org/jira/browse/AVRO-349</link>
                <project id="12310911" key="AVRO">Apache Avro</project>
                    <description>&lt;p&gt;This makes the c++ builds work with the top-level build by doing the the following:&lt;/p&gt;

&lt;p&gt;for build.sh test:&lt;br/&gt;
this will build the c++ code and run its unit tests (all build artifacts are written in to build/c++/ )&lt;/p&gt;

&lt;p&gt;for build.sh dist:&lt;br/&gt;
this will build the html documentation, and copies the documentation to build/doc/cpp.&lt;br/&gt;
it also builds a dist tarball that contains  the c++ code, and copies it to dist/avro-cpp-$version.tgz&lt;/p&gt;

&lt;p&gt;for build.sh clean:&lt;br/&gt;
this removes build/c++&lt;/p&gt;

&lt;p&gt;Is this in-line with what is expected after &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-163&quot; title=&quot;Each language Avro supports should be a separate package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-163&quot;&gt;&lt;del&gt;AVRO-163&lt;/del&gt;&lt;/a&gt;?  Please let me know if there are some things I overlooked.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12445876">AVRO-349</key>
            <summary>Make C++ builds work post AVRO-163</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sbanacho">Scott Banachowski</assignee>
                                    <reporter username="sbanacho">Scott Banachowski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2010 23:55:08 +0000</created>
                <updated>Mon, 1 Mar 2010 17:09:20 +0000</updated>
                            <resolved>Tue, 16 Feb 2010 21:36:42 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12802623" author="massie" created="Wed, 20 Jan 2010 02:14:33 +0000"  >&lt;p&gt;Scott-&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;this will build the html documentation, and copies the documentation to build/doc/cpp.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the proper location for documentation would be &lt;tt&gt;build/avro-doc-$VERSION/api/c++/&lt;/tt&gt;.  &lt;/p&gt;

&lt;p&gt;If you look at the top-level build.sh, you see that it does...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(cd doc; ant)
(cd build; tar czf - avro-doc-$VERSION) &amp;gt; dist/avro-doc-$VERSION.tar.gz
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...on &quot;dist&quot; to create the avro-doc tarball.&lt;/p&gt;</comment>
                            <comment id="12802625" author="massie" created="Wed, 20 Jan 2010 02:17:02 +0000"  >&lt;p&gt;Scott-&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;this will build the html documentation, and copies the documentation to build/doc/cpp.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the proper location for your docs would be &lt;tt&gt;build/avro-doc-$VERSION/api/c++&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If you look at the top-level &lt;tt&gt;build.sh&lt;/tt&gt; script, you&apos;ll see that it does...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(cd doc; ant)
(cd build; tar czf - avro-doc-$VERSION) &amp;gt; dist/avro-doc-$VERSION.tar.gz
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... when &lt;tt&gt;dist&lt;/tt&gt; is run.&lt;/p&gt;</comment>
                            <comment id="12802988" author="sbanacho" created="Wed, 20 Jan 2010 21:02:58 +0000"  >&lt;p&gt;revised patch.&lt;/p&gt;

&lt;p&gt;thanks for the comments Matt.  By the way, I&apos;m going with cpp instead of c++ for documentation path names--I&apos;ve seen the ++ get rendered as a single plus in some of the document pages before&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430925" name="AVRO-349.patch" size="9127" author="sbanacho" created="Wed, 20 Jan 2010 21:02:58 +0000"/>
                            <attachment id="12430681" name="AVRO-349.patch" size="8989" author="sbanacho" created="Mon, 18 Jan 2010 23:57:51 +0000"/>
                            <attachment id="12430682" name="apply349.sh" size="182" author="sbanacho" created="Mon, 18 Jan 2010 23:58:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jan 2010 02:14:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dzsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>79728</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
