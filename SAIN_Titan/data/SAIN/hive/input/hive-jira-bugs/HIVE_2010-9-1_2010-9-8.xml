<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:16:34 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2010-9-1+AND+created+%3C%3D+2010-9-8+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="10" total="10"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-1609] Support partition filtering in metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1609</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;h1&gt;&lt;a name=&quot;WARNING%3AThispatchwassubsequentlydisabledinHIVE1853duetostabilityconcernsrelatedtotheJDOversionupgrade.&quot;&gt;&lt;/a&gt;WARNING: This patch was subsequently disabled in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1853&quot; title=&quot;downgrade JDO version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1853&quot;&gt;&lt;del&gt;HIVE-1853&lt;/del&gt;&lt;/a&gt; due to stability concerns related to the JDO version upgrade.&lt;/h1&gt;

&lt;p&gt;The metastore needs to have support for returning a list of partitions based on user specified filter conditions. This will be useful for tools which need to do partition pruning. Howl is one such use case. The way partition pruning is done during hive query execution need not be changed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12472999">HIVE-1609</key>
            <summary>Support partition filtering in metastore</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ajaykidave">Ajay Kidave</assignee>
                                    <reporter username="ajaykidave">Ajay Kidave</reporter>
                        <labels>
                            <label>JDO</label>
                            <label>PartitionPruner</label>
                    </labels>
                <created>Wed, 1 Sep 2010 04:58:45 +0000</created>
                <updated>Thu, 2 May 2013 02:30:53 +0000</updated>
                            <resolved>Tue, 21 Sep 2010 21:13:34 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12904909" author="ajaykidave" created="Wed, 1 Sep 2010 05:09:52 +0000"  >&lt;p&gt;Attached patch with support for a new metastore API which returns list of partitions matching specified string filter. Thrift does not support recursive nested structures, so the filter is specified as a string instead of an expression object. The datanucleus jar version is upgraded to get support for the JDOQL operations needed (a clean build is required at the root level to remove the older version of the datanucleus jars from build/ivy/lib).&lt;/p&gt;</comment>
                            <comment id="12905296" author="hbasereviewboard" created="Wed, 1 Sep 2010 22:55:02 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/763/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1609&quot; title=&quot;Support partition filtering in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1609&quot;&gt;&lt;del&gt;HIVE-1609&lt;/del&gt;&lt;/a&gt;: Support partition filtering in metastore&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1609&quot; title=&quot;Support partition filtering in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1609&quot;&gt;&lt;del&gt;HIVE-1609&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1609&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1609&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/build.xml 991274 &lt;br/&gt;
  trunk/metastore/if/hive_metastore.thrift 991397 &lt;br/&gt;
  trunk/metastore/ivy.xml 991274 &lt;br/&gt;
  trunk/metastore/src/gen-cpp/ThriftHiveMetastore.h 991274 &lt;br/&gt;
  trunk/metastore/src/gen-cpp/ThriftHiveMetastore.cpp 991274 &lt;br/&gt;
  trunk/metastore/src/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp 991274 &lt;br/&gt;
  trunk/metastore/src/gen-java/org/apache/hadoop/hive/metastore/parser/FilterParser.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/gen-java/org/apache/hadoop/hive/metastore/parser/FilterParserConstants.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/gen-java/org/apache/hadoop/hive/metastore/parser/FilterParserTokenManager.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/gen-java/org/apache/hadoop/hive/metastore/parser/ParseException.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/gen-java/org/apache/hadoop/hive/metastore/parser/SimpleCharStream.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/gen-java/org/apache/hadoop/hive/metastore/parser/Token.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/gen-java/org/apache/hadoop/hive/metastore/parser/TokenMgrError.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java 991274 &lt;br/&gt;
  trunk/metastore/src/gen-php/ThriftHiveMetastore.php 991274 &lt;br/&gt;
  trunk/metastore/src/gen-py/hive_metastore/ThriftHiveMetastore-remote 991274 &lt;br/&gt;
  trunk/metastore/src/gen-py/hive_metastore/ThriftHiveMetastore.py 991274 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 991274 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 991274 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java 991274 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/RawStore.java 991274 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/parser/ExpressionTree.java PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/parser/filter_parser.jj PRE-CREATION &lt;br/&gt;
  trunk/metastore/src/model/package.jdo 991274 &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java 991274 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java 991274 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/763/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12905382" author="cwsteinbach" created="Thu, 2 Sep 2010 02:57:44 +0000"  >&lt;p&gt;RB&apos;s jiraposter seems to be lagging. In the meantime I left some comments here: &lt;a href=&quot;https://review.cloudera.org//r/763/#review1075&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://review.cloudera.org//r/763/#review1075&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12905383" author="hbasereviewboard" created="Thu, 2 Sep 2010 03:00:10 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/763/#review1075&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/#review1075&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/metastore/build.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/763/#comment3422&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/#comment3422&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Hive already uses ANTLR. Introducing a dependency on a new parser generator (especially one that the Pig devs are already unhappy with) seems unwise from a maintenance and build perspective. Can you please rewrite this to use ANTLR?&lt;/p&gt;




&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/763/#comment3424&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/#comment3424&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    get_partitions_by_filter() should throw Unknown&lt;span class=&quot;error&quot;&gt;&amp;#91;DB|Table&amp;#93;&lt;/span&gt;Exception if either the database or table do not exist.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/763/#comment3425&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/#comment3425&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    listPartitionsByFilter() should also throw UnknownDBException and UnknownTableException.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/763/#comment3426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/#comment3426&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please use StringBuilder instead.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/763/#comment3427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/#comment3427&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The query should have an ORDER clause on MPartition.partitionName in order to insure that the results are deterministic.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/763/#comment3428&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/763/#comment3428&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Minor organization issue: why does this method appear here instead of next to listMPartitionsByFilter()?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12905652" author="ajaykidave" created="Thu, 2 Sep 2010 19:43:25 +0000"  >&lt;p&gt;Thanks for the review Carl. Javacc is already used in the hive serde code, so it is not a completely new dependency for hive. Javacc has issues with generating proper errors for multi-line inputs, since we are using it for a small filter string only, this issue should not be seen. The build approach is same as taken in serde, i.e the code is regenerated only if javacc.home is defined.&lt;/p&gt;

&lt;p&gt;Regarding throwing Unknown&lt;span class=&quot;error&quot;&gt;&amp;#91;DB|Table&amp;#93;&lt;/span&gt;Exception, it would require an extra database call to first check whether the database is valid. So I have changed it to throw a NoSuchObjectException saying db.table does not exist if the getMTable operation fails.&lt;/p&gt;

&lt;p&gt;I have attached a patch which addresses the other issues.&lt;/p&gt;</comment>
                            <comment id="12905679" author="jvs" created="Thu, 2 Sep 2010 21:32:19 +0000"  >&lt;p&gt;I agree with Carl regarding the parser:  let&apos;s move it to ANTLR.  We have too much generated code checked into Hive already, and we&apos;re trying to move away from that.&lt;/p&gt;</comment>
                            <comment id="12905743" author="ajaykidave" created="Fri, 3 Sep 2010 00:15:23 +0000"  >&lt;p&gt;The parser was written in javacc since it is derived from similar functionality in Owl. It was decided to reuse the existing parser when the filter representation was discussed. If generated code is the issue, I can change the build to pull javacc through ivy and not have the generated code checked in (it is so currently because that was how it is in serde). Another possibility is we can open another JIRA to change the parser implementation to ANTLR. Do let me know what would work.&lt;/p&gt;</comment>
                            <comment id="12905768" author="namit" created="Fri, 3 Sep 2010 01:40:47 +0000"  >&lt;p&gt;I think we should stick to antlr only - let us not check in javacc&lt;/p&gt;</comment>
                            <comment id="12905769" author="cwsteinbach" created="Fri, 3 Sep 2010 01:48:03 +0000"  >&lt;p&gt;DynamicSerDe is the component that has a JavaCC dependency. I think DynamicSerDe (and TCTLSeparatedProtocol) were deprecated a long time ago. Should we try to remove this code?&lt;/p&gt;</comment>
                            <comment id="12906028" author="jvs" created="Fri, 3 Sep 2010 19:17:59 +0000"  >&lt;p&gt;@Carl:  looks like Steven Wong and Zheng have been discussing how to get rid of the last uses of DynamicSerDe (over on hive-dev), so yeah, maybe we can do that once Steven completes the work.&lt;/p&gt;</comment>
                            <comment id="12909870" author="jvs" created="Wed, 15 Sep 2010 20:17:19 +0000"  >&lt;p&gt;@Ajay:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;In package.jdo, you added default-fetch-group=&quot;false&quot; for the view attributes.  Could you explain what that does and why that is needed?  I&apos;m guessing it defers fetch of these attributes, which makes sense as long as it&apos;s transparent.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1539&quot; title=&quot;Concurrent metastore threading problem &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1539&quot;&gt;&lt;del&gt;HIVE-1539&lt;/del&gt;&lt;/a&gt; mentions the need to upgrade datanucleus to 2.2.0.m2 in order to fix some classloader threading issues; maybe we should jump straight to that version?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Per &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1626&quot; title=&quot;stop using java.util.Stack&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1626&quot;&gt;HIVE-1626&lt;/a&gt;, we should avoid using java.util.Stack.  Just FYI; we can clean this one up as part of that JIRA.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Run checkstyle on new code to bring it into conformance&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, I&apos;ve asked Paul Yang to take a look at the patch to give feedback on any other issues (separate from the usage of JavaCC).&lt;/p&gt;</comment>
                            <comment id="12909930" author="pauly" created="Wed, 15 Sep 2010 22:54:00 +0000"  >&lt;p&gt;A couple of suggestions:&lt;/p&gt;

&lt;p&gt;1. Update get_partitions_ps() to use get_partitions_by_filter(). By doing this, we should see some speedup when using the Hive CLI for tables with large number of partitions. (May require #2 for full benefits)&lt;/p&gt;

&lt;p&gt;2. could we add a listPartitionNamesByFilter() as well to RawStore/ObjectStore? This would allow partition filtering for get_partition_names_ps(). This could be done in a separate JIRA, if necessary.&lt;/p&gt;

&lt;p&gt;3. Add test cases to TestHiveMetastore for the new method(s).&lt;/p&gt;

&lt;p&gt;I&apos;ll take another look once the antlr stuff is done, but looks good.&lt;/p&gt;</comment>
                            <comment id="12910012" author="ajaykidave" created="Thu, 16 Sep 2010 04:53:37 +0000"  >&lt;p&gt;Thanks for the review comments. I was on vacation for few days, sorry for late response.  I have attached a new patch changing the parser to ANTLR. Added few more tests to check for parser issues.&lt;/p&gt;

&lt;p&gt;@John,&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;With new DataNucleus version, the default select query for a object fetch is a select distinct on all the columns. This does not work on LONGVARCHAR columns since they are not comparable (in derby). Setting default-fetch-group=&quot;false&quot; menas that the distinct would not be applied for the viewtext columns. These columns would be fetched lazily when required.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I would like to let &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1539&quot; title=&quot;Concurrent metastore threading problem &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1539&quot;&gt;&lt;del&gt;HIVE-1539&lt;/del&gt;&lt;/a&gt; make the change as required, this current feature requires only DataNucleus 2.1.1. Since 2.2 is not released yet, we can wait for the 2.2 release before moving to that or &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1539&quot; title=&quot;Concurrent metastore threading problem &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1539&quot;&gt;&lt;del&gt;HIVE-1539&lt;/del&gt;&lt;/a&gt; can do the required testing before using the unreleased version.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;When &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1626&quot; title=&quot;stop using java.util.Stack&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1626&quot;&gt;HIVE-1626&lt;/a&gt; changes to the custom Stack implementation, it would be a one line import change for this patch.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I have run checkstyle and fixed the issues. Only one new issue reported is &quot;Got an exception - java.lang.RuntimeException: Unable to get class information for MetaException.&quot; This is because checkstyle is not resolving generated classes, this issue is already present for other files referencing generated classes.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@Paul&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;get_partitions_ps can be updated to use the new filtering method. This can be done separately since I am not sure of the existing use cases of  get_partitions_ps and the howl use cases do not require this. Same applies for adding a new listPartitionNamesByFilter function. I can open a JIRA for these if required.&lt;/li&gt;
	&lt;li&gt;Test cases are present for the function added in this patch. If we add the above two, tests would be required for that along with the patch.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12910253" author="jvs" created="Thu, 16 Sep 2010 18:21:29 +0000"  >&lt;p&gt;@Ajay:  thanks for the explanations; I&apos;m fine with those choices.&lt;/p&gt;</comment>
                            <comment id="12912625" author="ajaykidave" created="Mon, 20 Sep 2010 18:28:03 +0000"  >&lt;p&gt;Could someone please review/commit  this patch. Thanks.&lt;/p&gt;</comment>
                            <comment id="12912635" author="pauly" created="Mon, 20 Sep 2010 18:41:26 +0000"  >&lt;p&gt;I&apos;m taking another look - should be ready later today&lt;/p&gt;</comment>
                            <comment id="12912812" author="pauly" created="Tue, 21 Sep 2010 02:16:40 +0000"  >&lt;p&gt;Looks good to me +1 &lt;/p&gt;

&lt;p&gt;@Ajay - can you create that JIRA and assign it to me?&lt;/p&gt;</comment>
                            <comment id="12912851" author="namit" created="Tue, 21 Sep 2010 05:59:45 +0000"  >&lt;p&gt;Once this is in, it would be useful to add a API like get_partitions_ps in HIVE - I mean, get all sub-partitions.&lt;/p&gt;

&lt;p&gt;For example, if the table is partitioned on (ds, hr): &lt;br/&gt;
something like&lt;/p&gt;

&lt;p&gt;show partitions (ds=&apos;2010-09-20&apos;, hr) should return all sub-partitions.&lt;/p&gt;</comment>
                            <comment id="12912855" author="nzhang" created="Tue, 21 Sep 2010 06:17:05 +0000"  >&lt;p&gt;@namit, the Hive metastore already has the API to get all sub-partitions given a partial specification like you provided &amp;#8211; Hive.getPartitions(Table, partialPartSpec).  &lt;/p&gt;</comment>
                            <comment id="12913001" author="namit" created="Tue, 21 Sep 2010 14:15:02 +0000"  >&lt;p&gt;I meant, exposing it via the Hive QL directly.&lt;br/&gt;
I don&apos;t think there is a way to do that currently.&lt;/p&gt;</comment>
                            <comment id="12913132" author="ajaykidave" created="Tue, 21 Sep 2010 18:04:05 +0000"  >&lt;p&gt;@Paul : I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt; for the optimizations to get_partitions_ps.&lt;/p&gt;</comment>
                            <comment id="12913137" author="jvs" created="Tue, 21 Sep 2010 18:11:20 +0000"  >&lt;p&gt;Running this one through tests now.&lt;/p&gt;</comment>
                            <comment id="12913234" author="he yongqiang" created="Tue, 21 Sep 2010 20:35:42 +0000"  >&lt;p&gt;Just want to make sure that this will aslo work in python client. I found there are some small problems when calling several partition functions from python.&lt;/p&gt;</comment>
                            <comment id="12913238" author="jvs" created="Tue, 21 Sep 2010 20:40:37 +0000"  >&lt;p&gt;@Yongqiang:  ant test just passed for me.  Let me know if I should hold off on the commit until the python issues are resolved.&lt;/p&gt;</comment>
                            <comment id="12913239" author="pauly" created="Tue, 21 Sep 2010 20:46:51 +0000"  >&lt;p&gt;@Yongqiang - The new thrift function seems benign - what problems are you running into?&lt;/p&gt;</comment>
                            <comment id="12913240" author="he yongqiang" created="Tue, 21 Sep 2010 20:46:55 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;by several partition functions in my previous comment, i mean the existing partition functions.&amp;#93;&lt;/span&gt; So just want to make sure the ones added in this jira will work finely for python client. &lt;/p&gt;

&lt;p&gt;@john, pls go ahead commit this. This is a really good one to have. We can fix problems later if there are any.&lt;/p&gt;</comment>
                            <comment id="12913255" author="jvs" created="Tue, 21 Sep 2010 21:13:34 +0000"  >&lt;p&gt;Committed.  Thanks Ajay!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12471563">HIVE-1539</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12548063">HCATALOG-347</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12493399">HIVE-1853</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12493928">HIVE-1862</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12501190">HIVE-2048</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12474879">HIVE-1664</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12453570" name="hive_1609.patch" size="191754" author="ajaykidave" created="Wed, 1 Sep 2010 05:09:52 +0000"/>
                            <attachment id="12453720" name="hive_1609_2.patch" size="197084" author="ajaykidave" created="Thu, 2 Sep 2010 19:43:24 +0000"/>
                            <attachment id="12454739" name="hive_1609_3.patch" size="135117" author="ajaykidave" created="Thu, 16 Sep 2010 04:53:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Sep 2010 22:55:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63979</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lfz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Added support for a new listPartitionsByFilter API in HiveMetaStoreClient. This returns the list of partitions matching a specified partition filter. The filter supports &amp;quot;=&amp;quot;, &amp;quot;!=&amp;quot;, &amp;quot;&amp;gt;&amp;quot;, &amp;quot;&amp;lt;&amp;quot;, &amp;quot;&amp;gt;=&amp;quot;, &amp;quot;&amp;lt;=&amp;quot; and &amp;quot;LIKE&amp;quot; operations on partition keys of type string. &amp;quot;AND&amp;quot; and &amp;quot;OR&amp;quot; logical operations are supported in the filter. So for example, for a table having partition keys country and state, the filter can be &amp;#39;country = &amp;quot;USA&amp;quot; AND (state = &amp;quot;CA&amp;quot;  OR state = &amp;quot;AZ&amp;quot;)&amp;#39;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1610] Using CombinedHiveInputFormat causes partToPartitionInfo IOException  </title>
                <link>https://issues.apache.org/jira/browse/HIVE-1610</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I have a relatively complicated hive query using CombinedHiveInputFormat:&lt;br/&gt;
set hive.exec.dynamic.partition.mode=nonstrict;&lt;br/&gt;
set hive.exec.dynamic.partition=true; &lt;br/&gt;
set hive.exec.max.dynamic.partitions=1000;&lt;br/&gt;
set hive.exec.max.dynamic.partitions.pernode=300;&lt;br/&gt;
set hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;&lt;br/&gt;
INSERT OVERWRITE TABLE keyword_serp_results_no_dups PARTITION(week) select distinct keywords.keyword, keywords.domain, keywords.url, keywords.rank, keywords.universal_rank, keywords.serp_type, keywords.date_indexed, keywords.search_engine_type, keywords.week from keyword_serp_results keywords JOIN (select domain, keyword, search_engine_type, week, max_date_indexed, min(rank) as best_rank from (select keywords1.domain, keywords1.keyword, keywords1.search_engine_type,  keywords1.week, keywords1.rank, dupkeywords1.max_date_indexed from keyword_serp_results keywords1 JOIN (select domain, keyword, search_engine_type, week, max(date_indexed) as max_date_indexed from keyword_serp_results group by domain,keyword,search_engine_type,week) dupkeywords1 on keywords1.keyword = dupkeywords1.keyword AND  keywords1.domain = dupkeywords1.domain AND keywords1.search_engine_type = dupkeywords1.search_engine_type AND keywords1.week = dupkeywords1.week AND keywords1.date_indexed = dupkeywords1.max_date_indexed) dupkeywords2 group by domain,keyword,search_engine_type,week,max_date_indexed ) dupkeywords3 on keywords.keyword = dupkeywords3.keyword AND  keywords.domain = dupkeywords3.domain AND keywords.search_engine_type = dupkeywords3.search_engine_type AND keywords.week = dupkeywords3.week AND keywords.date_indexed = dupkeywords3.max_date_indexed AND keywords.rank = dupkeywords3.best_rank;&lt;/p&gt;

&lt;p&gt;This query use to work fine until I updated to r991183 on trunk and started getting this error:&lt;/p&gt;

&lt;p&gt;java.io.IOException: cannot find dir = hdfs://ec2-75-101-174-245.compute-1.amazonaws.com/tmp/hive-root/hive_2010-09-01_10-57-41_396_1409145025949924904/-mr-10002/000000_0 in &lt;br/&gt;
partToPartitionInfo: [hdfs://ec2-75-101-174-245.compute-1.amazonaws.com:8020/tmp/hive-root/hive_2010-09-01_10-57-41_396_1409145025949924904/-mr-10002,&lt;br/&gt;
hdfs://ec2-75-101-174-245.compute-1.amazonaws.com/user/root/domain_keywords/account=417/week=201035/day=20100829,&lt;br/&gt;
hdfs://ec2-75-101-174-245.compute-1.amazonaws.com/user/root/domain_keywords/account=418/week=201035/day=20100829,&lt;br/&gt;
hdfs://ec2-75-101-174-245.compute-1.amazonaws.com/user/root/domain_keywords/account=419/week=201035/day=20100829,&lt;br/&gt;
hdfs://ec2-75-101-174-245.compute-1.amazonaws.com/user/root/domain_keywords/account=422/week=201035/day=20100829,&lt;br/&gt;
hdfs://ec2-75-101-174-245.compute-1.amazonaws.com/user/root/domain_keywords/account=422/week=201035/day=20100831]&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getPartitionDescFromPathRecursively(HiveFileFormatUtils.java:277)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat$CombineHiveInputSplit.&amp;lt;init&amp;gt;(CombineHiveInputFormat.java:100)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getSplits(CombineHiveInputFormat.java:312)&lt;br/&gt;
at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:810)&lt;br/&gt;
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:781)&lt;br/&gt;
at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:730)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:610)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:120)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:108)&lt;/p&gt;

&lt;p&gt;This query works if I don&apos;t change the hive.input.format.&lt;br/&gt;
set hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;&lt;/p&gt;

&lt;p&gt;I&apos;ve narrowed down this issue to the commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1510&quot; title=&quot;HiveCombineInputFormat should not use prefix matching to find the partitionDesc for a given path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1510&quot;&gt;&lt;del&gt;HIVE-1510&lt;/del&gt;&lt;/a&gt;.  If I take out the changeset from r987746, everything works as before.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hadoop 0.20.2&lt;/p&gt;</environment>
        <key id="12473098">HIVE-1610</key>
            <summary>Using CombinedHiveInputFormat causes partToPartitionInfo IOException  </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sammy.yu">Sammy Yu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Sep 2010 00:38:37 +0000</created>
                <updated>Wed, 8 Sep 2010 02:01:48 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12905367" author="he yongqiang" created="Thu, 2 Sep 2010 01:27:24 +0000"  >&lt;p&gt;Yes. There is a bug in HiveFileFormatUtils.getPartitionDescFromPathRecursively&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    if (part == null
        &amp;amp;&amp;amp; (dir.toUri().getScheme() == null || dir.toUri().getScheme().trim()
            .equals(&quot;&quot;))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We need to remove &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;amp;&amp;amp; (dir.toUri().getScheme() == null || dir.toUri().getScheme().trim()
            .equals(&quot;&quot;))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sammy, can you help post a fix? You can add a testcase in TestHiveFileFormatUtils.&lt;/p&gt;</comment>
                            <comment id="12905424" author="sammy.yu" created="Thu, 2 Sep 2010 06:08:33 +0000"  >&lt;p&gt;You will have to forgive my ignorance since this is my first time looking at Hive source code.&lt;/p&gt;

&lt;p&gt;I can validate that removing the additional check on the scheme works, however the original test case in TestHiveFileFormatUtils fails now.    The third assertion in first group fails for testGetPartitionDescFromPathRecursively.&lt;/p&gt;

&lt;p&gt;I suspect that the root of the issue is that there is an additional :8020 part in the key of the pathToPartitionInfo table.  With the changes populateNewPartitionDesc would remove everything but the path so that it works.  I am wondering if the best approach is to make doGetPartitionDescFromPath aware of scheme.  I&apos;ve attached a hack for this approach with the additional test case.  Please note it doesn&apos;t know anything about default ports for a given scheme.&lt;/p&gt;</comment>
                            <comment id="12905594" author="he yongqiang" created="Thu, 2 Sep 2010 17:17:31 +0000"  >&lt;p&gt;1.&lt;br/&gt;
just remove &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;amp;&amp;amp; (dir.toUri().getScheme() == null || dir.toUri().getScheme().trim()
            .equals(&quot;&quot;))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will make things work.&lt;/p&gt;

&lt;p&gt;2. you need to use svn (not git) to generate the patch.&lt;/p&gt;</comment>
                            <comment id="12905635" author="sammy.yu" created="Thu, 2 Sep 2010 18:50:49 +0000"  >&lt;p&gt;Yongqiang, thanks for taking a look at this.&lt;/p&gt;

&lt;p&gt;If I take out the URI scheme checks, the original TestHiveFileFormatUtils.testGetPartitionDescFromPathRecursively test case fails:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hive.ql.io.TestHiveFileFormatUtils&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.TestListener: tests to run: 2&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.TestListener: startTest(testGetPartitionDescFromPathRecursively)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.TestListener: addFailure(testGetPartitionDescFromPathRecursively, hdfs:///tbl/par1/part2/part3 should return null expected:&amp;lt;true&amp;gt; but was:&amp;lt;false&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.TestListener: endTest(testGetPartitionDescFromPathRecursively)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.TestListener: startTest(testGetPartitionDescFromPathWithPort)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.TestListener: endTest(testGetPartitionDescFromPathWithPort)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 0.091 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hive.ql.io.TestHiveFileFormatUtils FAILED&lt;/p&gt;

&lt;p&gt;hdfs:///tbl/par1/part2/part3 should not match any PartitionDesc since the path in the map is &lt;a href=&quot;file:///tbl/par1/part2/part3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///tbl/par1/part2/part3&lt;/a&gt;.  I will attach the svn version of the patch shortly.&lt;/p&gt;


</comment>
                            <comment id="12905751" author="he yongqiang" created="Fri, 3 Sep 2010 00:52:27 +0000"  >&lt;p&gt;Sammy, the only change in TestHiveFileFormatUtils is to remove URI scheme checks (1 line change). &lt;br/&gt;
You actually added some lines of code which were removed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1510&quot; title=&quot;HiveCombineInputFormat should not use prefix matching to find the partitionDesc for a given path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1510&quot;&gt;&lt;del&gt;HIVE-1510&lt;/del&gt;&lt;/a&gt;, and this is the reason the testcase fails. &lt;/p&gt;</comment>
                            <comment id="12906837" author="he yongqiang" created="Tue, 7 Sep 2010 15:30:08 +0000"  >&lt;p&gt;Sammy, we can not fix this issue by just removing the schema check. &lt;br/&gt;
If the input URI&apos;s path part is the same with one partition&apos;s path, but their schema is different, we should still return NULL.&lt;/p&gt;

&lt;p&gt;For your case, the main problem is the port, which is contained in the partitionDesc but not in the input path.&lt;/p&gt;

&lt;p&gt;Is it possible if we just ignore the port? I mean is there a case that two different instances share the same address but use different port?&lt;/p&gt;</comment>
                            <comment id="12906898" author="sammy.yu" created="Tue, 7 Sep 2010 17:51:54 +0000"  >&lt;p&gt;He,  yes that&apos;s what the original 0002 patch does (it adds an additional check to ignore the port as well as test case for it).   I&apos;m not sure why there&apos;s a disparity in the port being there in the first place.  I&apos;ll regenerate 0002 patch for svn against trunk@993445.  Thanks!&lt;/p&gt;</comment>
                            <comment id="12907058" author="he yongqiang" created="Wed, 8 Sep 2010 02:01:48 +0000"  >&lt;p&gt;Sammy, there are mainly 2 problems. &lt;br/&gt;
1) going over the map is not efficient, and 2) using startWith to do prefix match is a bug fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1510&quot; title=&quot;HiveCombineInputFormat should not use prefix matching to find the partitionDesc for a given path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1510&quot;&gt;&lt;del&gt;HIVE-1510&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Sammy, can you change the logic as follows:&lt;/p&gt;

&lt;p&gt;right now, hive generates another pathToPartitionInfo map by removing the path&apos;s schema information, and put it in a cacheMap. &lt;br/&gt;
We can keep the same logic but change the new pathToPartitionInfo map&apos;s value to be an array of PartitionDesc. &lt;br/&gt;
And then we can just remove the schema check, and once we get a match, we go through the array of PartitionDesc to find the best one.&lt;/p&gt;

&lt;p&gt;this can also solve another problem. If there are 2 partitionDesc which&apos;s path part is same but the schema is different, only one is contained in the new pathToPartitionInfo map. &lt;/p&gt;

&lt;p&gt;About how to go through the array of PartitionDesc to find the best one:&lt;br/&gt;
if the array contains only 1 element, return array.get(0);&lt;br/&gt;
1) if the original input does not have any schema information:  if the array contains more then 1 element, report error.&lt;br/&gt;
2) if the original input contains schema information: 1) if the array contains an element which&apos;s the exact match (also contains schema and port, and the same with input), return the exact match. 2) ignore port part but keep the schema and address, and go through the array. &lt;/p&gt;

&lt;p&gt;what do you think?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12453658" name="0002-HIVE-1610.-Added-additional-schema-check-to-doGetPar.patch" size="3311" author="sammy.yu" created="Thu, 2 Sep 2010 06:08:51 +0000"/>
                            <attachment id="12453712" name="0003-HIVE-1610.patch" size="2653" author="sammy.yu" created="Thu, 2 Sep 2010 18:51:09 +0000"/>
                            <attachment id="12454032" name="0004-hive.patch" size="2356" author="sammy.yu" created="Tue, 7 Sep 2010 17:53:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Sep 2010 01:27:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42423</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lfzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123239</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1611] Add alternative search-provider to Hive site</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1611</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Use search-hadoop.com service to make available search in Hive sources, MLs, wiki, etc.&lt;br/&gt;
This was initially proposed on user mailing list. The search service was already added in site&apos;s skin (common for all Hadoop related projects) before so this issue is about enabling it for Hive. The ultimate goal is to use it at all Hadoop&apos;s sub-projects&apos; sites.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473142">HIVE-1611</key>
            <summary>Add alternative search-provider to Hive site</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alexb">Alex Baranau</assignee>
                                    <reporter username="alexb">Alex Baranau</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Sep 2010 14:19:11 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:31 +0000</updated>
                            <resolved>Tue, 18 Jan 2011 18:44:00 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Website</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12905518" author="alexb" created="Thu, 2 Sep 2010 14:21:38 +0000"  >&lt;p&gt;Attached patch which enables search-hadoop search service for site&lt;/p&gt;</comment>
                            <comment id="12907975" author="otis" created="Fri, 10 Sep 2010 10:49:47 +0000"  >&lt;p&gt;Look at the search box at &lt;a href=&quot;http://avro.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://avro.apache.org/&lt;/a&gt; (top-right corner) to see what this patch does.&lt;/p&gt;

&lt;p&gt;Should we assign this to a committer now, since Alex is done with the patch?&lt;/p&gt;

&lt;p&gt;Doug Cutting reviewed and committed the big change via &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-626&quot; title=&quot;Add alternative search-provider to Avro site&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-626&quot;&gt;&lt;del&gt;AVRO-626&lt;/del&gt;&lt;/a&gt; that made it possible for this patch to be literally a 1-line change:&lt;/p&gt;

&lt;p&gt;Index: author/src/documentation/skinconf.xml&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; author/src/documentation/skinconf.xml	(revision 770021)&lt;br/&gt;
+++ author/src/documentation/skinconf.xml	(revision )&lt;br/&gt;
@@ -30,7 +30,7 @@&lt;br/&gt;
     In other words google will search the @domain for the query string.&lt;/p&gt;

&lt;p&gt;   --&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;search name=&quot;Hive&quot; domain=&quot;hadoop.apache.org&quot; provider=&quot;google&quot;/&amp;gt;&lt;br/&gt;
+  &amp;lt;search provider=&quot;search-hadoop&quot; name=&quot;hive&quot;/&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;!-- Disable the print link? If enabled, invalid HTML 4.0.1 --&amp;gt;&lt;br/&gt;
   &amp;lt;disable-print-link&amp;gt;true&amp;lt;/disable-print-link&amp;gt;  &lt;/p&gt;</comment>
                            <comment id="12916880" author="alexb" created="Fri, 1 Oct 2010 12:55:02 +0000"  >&lt;p&gt;Sorry to ping, but it looks like since the issue is assigned to me it was abandoned by committees...&lt;/p&gt;</comment>
                            <comment id="12916927" author="nzhang" created="Fri, 1 Oct 2010 16:01:08 +0000"  >&lt;p&gt;Hi Alex, some questions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Hive doesn&apos;t have the file author/src/documentation/skinconf.xml, which is included in the patch. How does this work?&lt;/li&gt;
	&lt;li&gt;This patch and comments suggest this patch is for Hadoop subprojects. Hive is transiting to a TLP independent of Hadoop. Is there an issue after the transition?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12916963" author="alexb" created="Fri, 1 Oct 2010 17:33:54 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
Sorry for misleading you, the patch is applicable to &lt;a href=&quot;https://svn.apache.org/repos/asf/hadoop/hive/site/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/hadoop/hive/site/&lt;/a&gt;. The skinconf it should be applied to is:&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/hadoop/hive/site/author/src/documentation/skinconf.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/hadoop/hive/site/author/src/documentation/skinconf.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As far as I understand Hive hasn&apos;t set up a separate repo (since graduating to TLP). It still uses Hadoop&apos;s common pelt. Right?&lt;/p&gt;</comment>
                            <comment id="12917001" author="nzhang" created="Fri, 1 Oct 2010 18:54:07 +0000"  >&lt;p&gt;Thanks for the link Alex. I&apos;ve talked to Ashish and he said Hive has just been approved to TLP. There might be some work need to be done to move the wiki and all documentations (I think Edward Capriolo has volunteered to do so?). Let me ask Edward and see what he thinks. &lt;/p&gt;</comment>
                            <comment id="12917016" author="appodictic" created="Fri, 1 Oct 2010 20:04:17 +0000"  >&lt;p&gt; Now that hive is TLP we likely have to get the ball rolling and cut the cord with hadoop. I will contact infra and see what our options are. We have a few issues. &lt;br/&gt;
-we need to move the SVN from a hadoop subproject to a toplevel svn. &lt;br/&gt;
-after we do that we need to take the forest docs and move them into hive then can change the search box&lt;/p&gt;

&lt;p&gt;If we want to see the skinconf change done first, we should open/transfer this ticket to core I believe.&lt;/p&gt;</comment>
                            <comment id="12917021" author="alexb" created="Fri, 1 Oct 2010 20:18:18 +0000"  >&lt;p&gt;I see.&lt;/p&gt;

&lt;p&gt;As for reflecting project structure changes - we&apos;ll adjust configuration at our end (search-hadoop.com) to catch up with it. As we&apos;ve done for all other projects that became TLPs recently.&lt;br/&gt;
At the same time in case the site skin/look changes and adjusting of html will be needed - you always can reopen this issue and I&apos;ll submit a new patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If we want to see the skinconf change done first, we should open/transfer this ticket to core I believe.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think we can do it now (before site moves). It&apos;s really about one line change, the skin itself was changed as a part of &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-626&quot; title=&quot;Add alternative search-provider to Avro site&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-626&quot;&gt;&lt;del&gt;AVRO-626&lt;/del&gt;&lt;/a&gt;. Don&apos;t think we have to submit ticket to core as this (single-line) change is in Hive&apos;s code base.&lt;/p&gt;

&lt;p&gt;Does that sound reasonable?&lt;/p&gt;</comment>
                            <comment id="12917145" author="otis" created="Sat, 2 Oct 2010 02:29:21 +0000"  >&lt;p&gt;+1 for getting the patch in now and adjusting it to work with the new skin or whatever ends up changing as Hive infra changes while converting to TLP.&lt;/p&gt;</comment>
                            <comment id="12920526" author="otis" created="Wed, 13 Oct 2010 13:07:08 +0000"  >&lt;p&gt;For what it&apos;s worth, Pig is now TLP, too, and they&apos;ve committed &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1661&quot; title=&quot;Add alternative search-provider to Pig site&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1661&quot;&gt;&lt;del&gt;PIG-1661&lt;/del&gt;&lt;/a&gt;, which works for them even though they are TLP, as seen on &lt;a href=&quot;http://pig.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pig.apache.org/&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="12920626" author="appodictic" created="Wed, 13 Oct 2010 16:01:35 +0000"  >&lt;p&gt;@Otis&lt;br/&gt;
Since we now have hive.apache.org I am currently working on moving the entire forest from hadoop to hive. This way hive.apache.com will be generated from hive trunk. I lost a couple of days around hadoop world. Look for this to be done in the next day or two.&lt;/p&gt;

&lt;p&gt;Edwar&lt;/p&gt;</comment>
                            <comment id="12933065" author="namit" created="Wed, 17 Nov 2010 18:20:35 +0000"  >&lt;p&gt;@Edward, can we get this in ?&lt;/p&gt;</comment>
                            <comment id="12933073" author="appodictic" created="Wed, 17 Nov 2010 18:40:08 +0000"  >&lt;p&gt;I applied this patch but the search was still going to google. I am not sure if possibly we are branched from hadoop&apos;s pelt and we need more changes then just this one liner.&lt;/p&gt;</comment>
                            <comment id="12933917" author="otis" created="Fri, 19 Nov 2010 19:02:36 +0000"  >&lt;p&gt;Edward, the Last published date on &lt;a href=&quot;http://hive.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hive.apache.org/&lt;/a&gt; is from October.  Maybe you are referring to what you saw locally?&lt;br/&gt;
From what I can tell Hive&apos;s site is no different from, say, the one on &lt;a href=&quot;http://hadoop.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/&lt;/a&gt; which does use search-hadoop.com .&lt;/p&gt;</comment>
                            <comment id="12933923" author="appodictic" created="Fri, 19 Nov 2010 19:18:01 +0000"  >&lt;p&gt;What I did was I applied this patch to our trunk &lt;a href=&quot;https://svn.apache.org/repos/asf/hive/site/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/hive/site/&lt;/a&gt; and then rebuilt forest. The search box did say &quot;search with search-hadoop&quot; but the search still sent me to google. Can you confirm that you have built with forest with this change and it works as expected? To built the site you need forest and to set your java_home to a 1.5 home. It should generate the site locally for testing.&lt;/p&gt;</comment>
                            <comment id="12978881" author="otis" created="Fri, 7 Jan 2011 17:47:28 +0000"  >&lt;p&gt;Edward - I see what you are describing.&lt;br/&gt;
Short version: I can&apos;t find the file I need to modify to change the searchbox behaviour.  Please help.&lt;/p&gt;

&lt;p&gt;Explanation:&lt;br/&gt;
Because I saw that the search form is defined in a few places in author/src/documentation/skins/hadoop-pelt/xslt/html/site-to-xhtml.xsl I thought that the way to modify the search stuff would be by editing that author/src/documentation/skins/hadoop-pelt/xslt/html/site-to-xhtml.xsl and fixing whatever is wrong in it.&lt;/p&gt;

&lt;p&gt;However, it looks like the above file is not even used for building the site pages.  Is this correct?&lt;br/&gt;
I say that because after I made various changes in that file it would never &quot;take&quot;, as if the file was not being used.  I then removed the file completely and re-ran ant from the site dir and it happily generated all site pages.  If that file were used, I assume I&apos;d get an error.&lt;/p&gt;

&lt;p&gt;So which file should I edit to modify the search box behaviour?&lt;br/&gt;
I thought I&apos;d try looking for the &quot;Search the site with&quot; string to locate the file, because that&apos;s the text that&apos;s shown in the search box by default...&lt;/p&gt;

&lt;p&gt;$ ffg &quot;Search the site with&quot; | egrep -v &apos;svn|build|publish&apos;&lt;br/&gt;
./author/src/documentation/skins/common/translations/CommonMessages_en_US.xml:  &amp;lt;message key=&quot;Search the site with&quot;&amp;gt;Search site with&amp;lt;/message&amp;gt;&lt;br/&gt;
./author/src/documentation/skins/common/translations/CommonMessages_de.xml:  &amp;lt;message key=&quot;Search the site with&quot;&amp;gt;Suche auf der Seite mit&amp;lt;/message&amp;gt;&lt;br/&gt;
./author/src/documentation/skins/common/translations/CommonMessages_fr.xml:  &amp;lt;message key=&quot;Search the site with&quot;&amp;gt;Rechercher sur le site avec&amp;lt;/message&amp;gt;&lt;br/&gt;
./author/src/documentation/skins/common/translations/CommonMessages_es.xml:  &amp;lt;message key=&quot;Search the site with&quot;&amp;gt;Buscar en&amp;lt;/message&amp;gt;&lt;/p&gt;

&lt;p&gt;But the above are just i18n messages.&lt;/p&gt;

&lt;p&gt;Then I peeked at the source of hive.apache.org and noticed the &quot;start Search&quot; comment near the search box, so I looked for that:&lt;/p&gt;

&lt;p&gt;$ ffg &quot;start Search&quot; | egrep -v &apos;svn|build|publish&apos;&lt;/p&gt;

&lt;p&gt;...and found nothing.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if it matters that author/src/documentation/skins is some sort of external item.... pointing to &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/site/author/src/documentation/skins&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/site/author/src/documentation/skins&lt;/a&gt; it seems.  Since Hive is not TLP, maybe this should be changed anyway?  But that may be a separate issue.&lt;/p&gt;

&lt;p&gt;Hmmm.... help? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12980969" author="cwsteinbach" created="Wed, 12 Jan 2011 22:24:36 +0000"  >&lt;p&gt;@Otis: I&apos;d recommend that you look at the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6998&quot; title=&quot;Add alternative search-provider to site&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6998&quot;&gt;&lt;del&gt;HADOOP-6998&lt;/del&gt;&lt;/a&gt;. We inherited most of the website code from this project, so it&apos;s likely that we have to do pretty much whatever they did in order to get it to work for their site.&lt;/p&gt;</comment>
                            <comment id="12981256" author="otis" created="Thu, 13 Jan 2011 14:23:05 +0000"  >&lt;p&gt;@Carl: we did that originally - that&apos;s what the attached patch does - same thing as in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6998&quot; title=&quot;Add alternative search-provider to site&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6998&quot;&gt;&lt;del&gt;HADOOP-6998&lt;/del&gt;&lt;/a&gt;.  But when Edward applied it, the search still went to Google.&lt;/p&gt;</comment>
                            <comment id="12981279" author="appodictic" created="Thu, 13 Jan 2011 15:22:10 +0000"  >&lt;p&gt;If you can get this working locally I can try again. I might have applied it incorrectly . We inherited the forest setup.... so my ability to troubleshoot and offer advice is limited.&lt;/p&gt;</comment>
                            <comment id="12981618" author="otis" created="Fri, 14 Jan 2011 03:10:59 +0000"  >&lt;p&gt;That&apos;s the thing - I can&apos;t get it working locally either.&lt;br/&gt;
This is because my changes are not taking effect, and it looks like they are not taking effect because I&apos;m modifying file(s) that are not actually being used by forrest to build the site.&lt;br/&gt;
So I was hoping somebody familiar with how Hive site is built can point me to the exact file I should be modifying to change the search box behaviour.&lt;/p&gt;</comment>
                            <comment id="12981628" author="cwsteinbach" created="Fri, 14 Jan 2011 04:23:06 +0000"  >&lt;p&gt;This problem may be a result of the site using canonical rather than relative URLs. A quick way to diagnose this problem is to put your browser in &quot;offline&quot; mode before viewing your local copy of the site. Anything that isn&apos;t relative should show up as a broken link.&lt;/p&gt;</comment>
                            <comment id="12981733" author="alexb" created="Fri, 14 Jan 2011 12:13:39 +0000"  >&lt;p&gt;Hello guys,&lt;/p&gt;

&lt;p&gt;I&apos;ve investigated this issue and found out that hadoop-pelt isn&apos;t used anymore in site construction. Is there a particular reason for that? I know that Hive now is TLP, but still, Hadoop&apos;s site skin looks pretty much like default and it is included in hive-site sources anyways, currently. And I see that no other custom skin was select to be used (project.skin isn&apos;t set in forrest.properties).&lt;/p&gt;

&lt;p&gt;I believe that to include custom search box we need to have custom skin (may be based on default, but edited as we need). I&apos;d suggest to make it based on hadoop&apos;s skin. It looks pretty much as default, as I said. Try this and let me know if you think the generated site is good enough:&lt;/p&gt;

&lt;p&gt;1) in author/forrest.properties add:&lt;br/&gt;
project.skin=hadoop-pelt&lt;br/&gt;
2) apply patch above. Or (faster) just change single line in author/src/documentation/skinconf.xml from&lt;br/&gt;
  &amp;lt;search name=&quot;Hive&quot; domain=&quot;hive.apache.org&quot; provider=&quot;google&quot;/&amp;gt;&lt;br/&gt;
to&lt;br/&gt;
  &amp;lt;search name=&quot;Hive&quot; domain=&quot;hive.apache.org&quot; provider=&quot;search-hadoop&quot;/&amp;gt;&lt;br/&gt;
&apos;cause this is all this patch is about &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;I tested things locally and it looks like generated site is pretty much the same as the one constructed based on default skin.&lt;/p&gt;</comment>
                            <comment id="12981737" author="alexb" created="Fri, 14 Jan 2011 12:32:26 +0000"  >&lt;p&gt;Just in case, attached updated patch with changes described above&lt;/p&gt;</comment>
                            <comment id="12983294" author="otis" created="Tue, 18 Jan 2011 18:03:03 +0000"  >&lt;p&gt;@Carl &amp;amp; @Edward:&lt;br/&gt;
I applied the patch locally, built the site, and confirmed it works!  The UI with that hadoop-pelt skin enabled looks identical to what&apos;s on hive.apache.org&lt;/p&gt;

&lt;p&gt;Could you please apply and publish the site? Thanks!&lt;/p&gt;</comment>
                            <comment id="12983320" author="cwsteinbach" created="Tue, 18 Jan 2011 18:44:00 +0000"  >&lt;p&gt;I committed the patch. Please wait a day for the changes to propagate.&lt;/p&gt;</comment>
                            <comment id="12988459" author="otis" created="Sat, 29 Jan 2011 13:57:59 +0000"  >&lt;p&gt;@Carl - thanks!&lt;br/&gt;
Note that something might have gone wrong, though - the changes were either not published or not propagated, because the side didn&apos;t change - it was last published in October 2010.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12477125">HADOOP-6998</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12468364" name="HIVE-1611.patch" size="1034" author="alexb" created="Fri, 14 Jan 2011 12:32:26 +0000"/>
                            <attachment id="12453684" name="HIVE-1611.patch" size="567" author="alexb" created="Thu, 2 Sep 2010 14:21:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Sep 2010 10:49:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lfzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1612] Cannot build hive for hadoop 0.21.0</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1612</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Current trunk for 0.7.0 does not support building HIVE against the Hadoop 0.21.0 release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473238">HIVE-1612</key>
            <summary>Cannot build hive for hadoop 0.21.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ajpahl1008">AJ Pahl</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Sep 2010 13:35:50 +0000</created>
                <updated>Thu, 26 May 2011 09:50:16 +0000</updated>
                                            <version>0.7.0</version>
                                                        <due></due>
                            <votes>8</votes>
                                    <watches>18</watches>
                                                                <comments>
                            <comment id="12916869" author="bharathv" created="Fri, 1 Oct 2010 12:16:59 +0000"  >&lt;p&gt;Any one working on this issue ?&lt;/p&gt;</comment>
                            <comment id="12919544" author="ajpahl1008" created="Sat, 9 Oct 2010 22:53:55 +0000"  >&lt;p&gt;No one has reached out to me for further info or clarification.&lt;/p&gt;

&lt;p&gt;Sent via PocketJIRA - www.pocketjira.com&lt;/p&gt;</comment>
                            <comment id="12919554" author="appodictic" created="Sun, 10 Oct 2010 02:07:48 +0000"  >&lt;p&gt;Their are issues open to get hive working with hadoop security. Since security is only in the 0.21 branch, thus someone is working on this.&lt;/p&gt;</comment>
                            <comment id="12919555" author="tlipcon" created="Sun, 10 Oct 2010 02:43:11 +0000"  >&lt;p&gt;Currently the people working on security are doing so against features backported to 0.20S (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1264&quot; title=&quot;Make Hive work with Hadoop security&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1264&quot;&gt;&lt;del&gt;HIVE-1264&lt;/del&gt;&lt;/a&gt; shims for example). This is distinct from 0.21, which only has a partial implementation of security features.&lt;/p&gt;</comment>
                            <comment id="12920301" author="dfujiwara" created="Tue, 12 Oct 2010 18:50:59 +0000"  >&lt;p&gt;Hi, &lt;br/&gt;
I have managed to build Hive (trunk -r 1000628) against Hadoop 0.21.0.&lt;/p&gt;

&lt;p&gt;Following is what I had to do to make it work. &lt;br/&gt;
1. build Hive as instructed in Hive wiki (ant pacakge).&lt;br/&gt;
2. Copy hadoop-0.21.0.tar.gz to ${HIVE_DIR}/build/hadoopcore, untar it, and create/touch the &quot;hadoop-0.21.0.installed&quot; file&lt;br/&gt;
3. Apply the patch&lt;br/&gt;
4. build Hive again by issuing ant package &quot;-Dhadoop.version=0.21.0 -Doffline=true&quot;&lt;/p&gt;

&lt;p&gt;I understand that the patch and process to build is not in the pristine forms, but I would like to get some feedback and see if I can pursue this further.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12923487" author="singochina@gmail.com" created="Thu, 21 Oct 2010 15:36:16 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Can you execute the hive-ql in hive client? i got this error below:&lt;/p&gt;

&lt;p&gt;$ ./hive&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.RuntimeException: Could not load shims&lt;br/&gt;
in class null&lt;br/&gt;
        at org.apache.hadoop&lt;br/&gt;
.hive.shims.ShimLoader.loadShims(ShimLoader.java:86)&lt;br/&gt;
        at org.apache.hadoop&lt;br/&gt;
.hive.shims.ShimLoader.getHadoopShims(ShimLoader.java:62)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:234)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:192)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at java.lang.Class.forName0(Native Method)&lt;br/&gt;
        at java.lang.Class.forName(Class.java:169)&lt;br/&gt;
        at org.apache.hadoop&lt;br/&gt;
.hive.shims.ShimLoader.loadShims(ShimLoader.java:83)&lt;br/&gt;
        ... 7 more&lt;/p&gt;

&lt;p&gt;and cannot execute hive, is it HIVE dont support hadoop0.21.0 now?&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; Regards,&lt;br/&gt;
Singo&lt;/p&gt;


</comment>
                            <comment id="12926518" author="ajpahl1008" created="Sat, 30 Oct 2010 02:30:24 +0000"  >&lt;p&gt;As per Daisuke&apos;s instructions I was able to complile trunk-1000628 against Hadoop 0.21.0.&lt;br/&gt;
Unfortunately,  execution isn&apos;t exactly like Singo&apos;s but is still contains a few exceptions:&lt;/p&gt;

&lt;p&gt;-bash-3.2$ ./hive&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/hive/conf/HiveConf&lt;br/&gt;
        at java.lang.Class.forName0(Native Method)&lt;br/&gt;
        at java.lang.Class.forName(Class.java:247)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:185)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.conf.HiveConf&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)&lt;br/&gt;
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)&lt;br/&gt;
        ... 3 more&lt;/p&gt;

&lt;p&gt;Also starting hiveserver...&lt;/p&gt;

&lt;p&gt;Starting Hive Thrift Server&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/thrift/protocol/TProtocolFactory&lt;br/&gt;
        at java.lang.Class.forName0(Native Method)&lt;br/&gt;
        at java.lang.Class.forName(Class.java:247)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:185)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.thrift.protocol.TProtocolFactory&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)&lt;br/&gt;
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)&lt;br/&gt;
        ... 3 more&lt;/p&gt;

&lt;p&gt;I&apos;ve had success with compiling previous releases of 0.6.0 and 0.7.0 (prior to 0.21.0) so I&apos;m &lt;br/&gt;
pretty sure my environment is correct for testing this. (ie: Classpath etc)&lt;/p&gt;

&lt;p&gt;Daisuke, keep up the good work. I think this JIRA will be renamed DAISUKE-1612 if you can get it worked out. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12965068" author="daisuke.fujiwara" created="Tue, 30 Nov 2010 01:36:58 +0000"  >&lt;p&gt;Hi AJ, &lt;/p&gt;

&lt;p&gt;I would like to get more information about your environment because I can successfully start the hive cli session as well as hive thrift server, and they seem to work fine.&lt;/p&gt;

&lt;p&gt;Your error messages suggest to me that your class path is not set correctly for some reason. &lt;br/&gt;
However those two classes that are reported (org/apache/hadoop/hive/conf/HiveConf and org/apache/thrift/protocol/TProtocolFactory) are present in the $HIVE_HOME/lib folder, namely hive-common-0.7.0.jar and libthrift.jar. Delving further into how the classpath is set, it seems like bin/hive takes care of it.&lt;br/&gt;
So I am not sure why your instance fails to locate those classes.&lt;/p&gt;

&lt;p&gt;Please let me know if you have any suggestions. &lt;/p&gt;</comment>
                            <comment id="12970065" author="sinofool" created="Fri, 10 Dec 2010 04:46:46 +0000"  >&lt;p&gt;A modified patch for trunk version 1043843&lt;/p&gt;</comment>
                            <comment id="12970093" author="sinofool" created="Fri, 10 Dec 2010 07:12:15 +0000"  >&lt;p&gt;Overwrite previous patch which is not includes shims new files.&lt;br/&gt;
This patch is working but needs more works about comments and test cases.&lt;br/&gt;
It is not ready to commit.&lt;/p&gt;</comment>
                            <comment id="12985328" author="krystian" created="Sun, 23 Jan 2011 14:02:38 +0000"  >&lt;p&gt;More general remark connected with this issue: Do you possibly know if there are any plans to release Hive 0.6.x where x&amp;gt;0 (the same way as with 0.4.1 previously) compatible with Hadoop 0.21.0?&lt;/p&gt;

&lt;p&gt;As Hadoop 0.21.0 has been released on 23 August 2010 and Hive 0.6.0 has been released on 19 October 2010 (almost 2 months later)&lt;br/&gt;
it seems highly probable that users would tend to use (or rather &lt;b&gt;try&lt;/b&gt; to use) Hive 0.6.0 with newest stable version rather than with 0.20.2 version released on 26 February 2010.&lt;/p&gt;

&lt;p&gt;That&apos;s why there is a question if you know whether there are any plans to release - let&apos;s say - Hive 0.6.1 targeted for compatibility with Hadoop 0.21.0 before 0.7.0 is released?&lt;br/&gt;
181 of 248 issues have been resolved as of today: &lt;a href=&quot;https://issues.apache.org/jira/secure/BrowseProject.jspa?id=12310843&amp;amp;subset=-1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/BrowseProject.jspa?id=12310843&amp;amp;subset=-1&lt;/a&gt; so candidly assuming linear progress (shame on me...) should we expect rather 0.7.0 stable in the end of February / beginning of March or rather 0.6.1 might be worth creating before?&lt;/p&gt;</comment>
                            <comment id="12985526" author="namit" created="Mon, 24 Jan 2011 05:54:53 +0000"  >&lt;p&gt;Right now, there are no plans to release Hive 0.6.x. (where x &amp;gt; 0) compatible with hadoop 0.21.0&lt;/p&gt;

&lt;p&gt;Do you guys think it is a good time to start wrapping up Hive 0.7 ?&lt;br/&gt;
If we can get 0.7 out by March (with support for Hadoop 0.21), do we still need Hive 0.6.1 ?&lt;/p&gt;</comment>
                            <comment id="12985544" author="krystian" created="Mon, 24 Jan 2011 07:27:09 +0000"  >&lt;p&gt;Would that 0.7 be much different than what now Amazon is referring to as 0.7 in their EMR: &lt;a href=&quot;http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/index.html?UsingEMR_Hive.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/index.html?UsingEMR_Hive.html&lt;/a&gt; ?&lt;br/&gt;
It seems to confuse people currently as in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1878&quot; title=&quot;Set the version of Hive trunk to &amp;#39;0.7.0-SNAPSHOT&amp;#39; to avoid confusing it with a release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1878&quot;&gt;&lt;del&gt;HIVE-1878&lt;/del&gt;&lt;/a&gt;&apos;s comments: &lt;blockquote&gt;&lt;p&gt;Amazon referred to their binaries as 0.7, even though it hadn&apos;t been released yet&lt;/p&gt;&lt;/blockquote&gt;&lt;br/&gt;
(myself as well, that&apos;s why I was asking if 0.7 - which I initially thought would be the one Amazon is unofficially using - will be just officially considered as 0.7.0 final/stable/ANY_OTHER_SERIOUS_ADJECTIVE)&lt;/p&gt;</comment>
                            <comment id="13016682" author="garo" created="Thu, 7 Apr 2011 04:33:39 +0000"  >&lt;p&gt;Is this still valid now when 0.7.0 has been released?&lt;/p&gt;</comment>
                            <comment id="13016690" author="sinofool" created="Thu, 7 Apr 2011 04:51:46 +0000"  >&lt;p&gt;Juho, trunk(v1089737) still not compiled against hadoop-core-0.21.0&lt;br/&gt;
And there is no notes for 0.21 support in the RELEASE-NOTE&lt;/p&gt;</comment>
                            <comment id="13039616" author="sinofool" created="Thu, 26 May 2011 09:50:16 +0000"  >&lt;p&gt;There are lots of dependencies incompatible with hadoop-0.21.0:&lt;br/&gt;
  HadoopShims uses org.apache.hadoop.mapred but 0.21 introducess org.apache.hadoop.mapreduce&lt;br/&gt;
  HBase don&apos;t support 0.21.0 too.&lt;/p&gt;

&lt;p&gt;Because 0.21.0 offers a great new feature  which is split on bz2 files, I have to make hive run ugly.&lt;br/&gt;
After removing HBase functions and hard-coded some 0.21 namespace, simple queries worked.&lt;/p&gt;

&lt;p&gt;A patch is submited. I hope it will useful for someone.&lt;br/&gt;
And a binary can be found here: &lt;br/&gt;
&lt;a href=&quot;http://sinofool.net/blog/archives/94&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sinofool.net/blog/archives/94&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12465967" name="HIVE-1612-for-r1043843.patch" size="37793" author="sinofool" created="Fri, 10 Dec 2010 07:12:15 +0000"/>
                            <attachment id="12465964" name="HIVE-1612-for-r1043843.patch" size="6671" author="sinofool" created="Fri, 10 Dec 2010 04:46:46 +0000"/>
                            <attachment id="12480524" name="HIVE-1612-for-r1127826.patch" size="11282" author="sinofool" created="Thu, 26 May 2011 09:50:15 +0000"/>
                            <attachment id="12456994" name="HIVE-1612.patch" size="41378" author="dfujiwara" created="Tue, 12 Oct 2010 18:50:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Oct 2010 12:16:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lfzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1613] hive --service jar looks for hadoop version but was not defined</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1613</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive --service jar fails. I have to open another ticket to clean up the scripts and unify functions like version detection.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473263">HIVE-1613</key>
            <summary>hive --service jar looks for hadoop version but was not defined</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Sep 2010 17:52:51 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:37 +0000</updated>
                            <resolved>Thu, 9 Sep 2010 18:04:06 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12907060" author="appodictic" created="Wed, 8 Sep 2010 02:06:10 +0000"  >&lt;p&gt;I think we should patch this as well functionality was broken.&lt;/p&gt;</comment>
                            <comment id="12907402" author="cwsteinbach" created="Wed, 8 Sep 2010 20:14:36 +0000"  >&lt;p&gt;+1 Looks good.&lt;/p&gt;</comment>
                            <comment id="12907694" author="jvs" created="Thu, 9 Sep 2010 17:49:17 +0000"  >&lt;p&gt;+1.  Will commit.&lt;/p&gt;</comment>
                            <comment id="12907701" author="jvs" created="Thu, 9 Sep 2010 18:04:06 +0000"  >&lt;p&gt;Committed.  Thanks Edward!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12473622">HIVE-1623</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12453805" name="hive-1613.patch.txt" size="902" author="appodictic" created="Fri, 3 Sep 2010 18:50:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Sep 2010 20:14:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lfzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123242</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1614] UDTF json_tuple should return null row when input is not a valid JSON string</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1614</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the input column is not a valid JSON string, json_tuple will not return anything but this will prevent the downstream operators to access the left-hand side table. We should output a NULL row instead, similar to when the input column is a NULL value. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12473265">HIVE-1614</key>
            <summary>UDTF json_tuple should return null row when input is not a valid JSON string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Sep 2010 17:56:24 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:20 +0000</updated>
                            <resolved>Sat, 4 Sep 2010 05:26:11 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12906004" author="nzhang" created="Fri, 3 Sep 2010 18:29:29 +0000"  >&lt;p&gt;Added a catch for all throwable in the UDFT.&lt;/p&gt;</comment>
                            <comment id="12906010" author="namit" created="Fri, 3 Sep 2010 18:43:24 +0000"  >&lt;p&gt;I will take a look&lt;/p&gt;</comment>
                            <comment id="12906135" author="namit" created="Fri, 3 Sep 2010 22:15:09 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12906222" author="namit" created="Sat, 4 Sep 2010 05:26:11 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12453801" name="HIVE-1614.2.patch" size="5952" author="nzhang" created="Fri, 3 Sep 2010 18:29:29 +0000"/>
                            <attachment id="12453795" name="HIVE-1614.patch" size="5672" author="nzhang" created="Fri, 3 Sep 2010 17:58:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Sep 2010 18:43:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1615] Web Interface JSP needs Refactoring for removed meta store methods</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1615</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Some meta store methods being called from JSP have been removed. Really should prioritize compiling jsp into servlet code again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473302">HIVE-1615</key>
            <summary>Web Interface JSP needs Refactoring for removed meta store methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Sep 2010 04:46:21 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:18 +0000</updated>
                            <resolved>Fri, 17 Sep 2010 18:55:57 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12907059" author="appodictic" created="Wed, 8 Sep 2010 02:03:56 +0000"  >&lt;p&gt;Moving this up the meta store changes recently broke the web interface&lt;/p&gt;</comment>
                            <comment id="12910372" author="jvs" created="Thu, 16 Sep 2010 22:36:59 +0000"  >&lt;p&gt;+1.  WIll commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="12910375" author="cwsteinbach" created="Thu, 16 Sep 2010 22:46:42 +0000"  >&lt;p&gt;This needs to be backported to 0.6. I verified that hive-1615.patch.2.txt applies cleanly to the 0.6 branch.&lt;/p&gt;</comment>
                            <comment id="12910731" author="jvs" created="Fri, 17 Sep 2010 18:55:57 +0000"  >&lt;p&gt;Committed to branch and trunk.  Thanks Edward!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12453861" name="hive-1615.patch.2.txt" size="2829" author="appodictic" created="Sat, 4 Sep 2010 04:56:00 +0000"/>
                            <attachment id="12453860" name="hive-1615.patch.txt" size="1778" author="appodictic" created="Sat, 4 Sep 2010 04:47:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Sep 2010 22:36:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1616] Add ProtocolBuffersStructObjectInspector</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1616</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Much like there is a ThriftStructObjectInspector that ignores the isset booleans there is a need for a ProtocolBuffersStructObjectInspector that ignores has*. This can then be used together with Twitter&apos;s elephant-bird.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473425">HIVE-1616</key>
            <summary>Add ProtocolBuffersStructObjectInspector</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johanoskarsson">Johan Oskarsson</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Sep 2010 07:09:09 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:37 +0000</updated>
                            <resolved>Fri, 17 Sep 2010 06:08:35 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12907013" author="namit" created="Tue, 7 Sep 2010 22:45:57 +0000"  >&lt;p&gt;Can you add a testcase for this ? The changes look good&lt;/p&gt;</comment>
                            <comment id="12907240" author="johanoskarsson" created="Wed, 8 Sep 2010 15:04:11 +0000"  >&lt;p&gt;Updated to include unit test, based off the Thrift one. Had to generate a file using protocol buffers for the test. In order to avoid having to include the protocol buffers java library just for the test I modified the generated code. The test is still valid but if we would feel more comfortable including the pb jar that is also doable, it&apos;s under a BSD license.&lt;/p&gt;</comment>
                            <comment id="12910421" author="namit" created="Fri, 17 Sep 2010 01:48:22 +0000"  >&lt;p&gt;Will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12910473" author="namit" created="Fri, 17 Sep 2010 06:08:35 +0000"  >&lt;p&gt;Committed. Thanks Johan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454118" name="HIVE-1616.patch" size="15521" author="johanoskarsson" created="Wed, 8 Sep 2010 15:04:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Sep 2010 22:45:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1617] ScriptOperator&apos;s AutoProgressor can lead to an infinite loop</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1617</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In the default settings, the auto progressor can result in a infinite loop.&lt;/p&gt;

&lt;p&gt;There should be another configurable parameter which stops the auto progress if the script has not made an progress.&lt;br/&gt;
The default can be an hour or so - this way we will not get indefinitely stuck&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473502">HIVE-1617</key>
            <summary>ScriptOperator&apos;s AutoProgressor can lead to an infinite loop</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Sep 2010 22:14:55 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:30 +0000</updated>
                            <resolved>Wed, 13 Oct 2010 02:46:33 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12910327" author="pauly" created="Thu, 16 Sep 2010 21:32:12 +0000"  >&lt;p&gt;This patch can be tested with the following commands:&lt;/p&gt;

&lt;p&gt;set hive.auto.progress.timeout=1200;&lt;br/&gt;
set hive.exec.script.allow.partial.consumption=true;&lt;br/&gt;
set hive.exec.mode.local.auto=false;&lt;br/&gt;
set hive.script.auto.progress=true;&lt;br/&gt;
select transform&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; using &apos;sleep 3600&apos; from src;&lt;/p&gt;

&lt;p&gt;The logs should show reporter messages at regular intervals, up to the 20 minute mark. Then the task should time out.&lt;/p&gt;</comment>
                            <comment id="12910386" author="namit" created="Thu, 16 Sep 2010 23:11:54 +0000"  >&lt;p&gt;Can you add a negative testcase - which times out &lt;/p&gt;</comment>
                            <comment id="12910419" author="namit" created="Fri, 17 Sep 2010 01:39:15 +0000"  >&lt;p&gt;Otherwise it looks good&lt;/p&gt;</comment>
                            <comment id="12910839" author="pauly" created="Fri, 17 Sep 2010 22:59:47 +0000"  >&lt;p&gt;I&apos;ve tried creating a test for this but it seems like for local mode, the task timeouts don&apos;t work. Unless we change how hadoop&apos;s local mode works, we might have to go without a test case.&lt;/p&gt;</comment>
                            <comment id="12910903" author="namit" created="Sat, 18 Sep 2010 06:33:14 +0000"  >&lt;p&gt;Committed. Thanks Paul&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454804" name="HIVE-1617.1.patch" size="5681" author="pauly" created="Thu, 16 Sep 2010 21:32:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Sep 2010 21:32:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1618] Expression in sort by throws NPE</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1618</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;A query such as:&lt;br/&gt;
SELECT count(1) FROM src SORT BY count(1);&lt;/p&gt;

&lt;p&gt;Will throw a null pointer exception:&lt;/p&gt;

&lt;p&gt;2010-09-07 15:27:27,059 ERROR ql.Driver (SessionState.java:printError(277)) - FAILED: Hive Internal Error: java.lang.NullPointerException(null)&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.hive.ql.plan.ExprNodeGenericFuncDesc.newInstance(ExprNodeGenericFuncDesc.java:153)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.getXpathOrFuncExprNodeDesc(TypeCheckProcFactory.java:587)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.process(TypeCheckProcFactory.java:708)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:89)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.dispatch(DefaultGraphWalker.java:88)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.walk(DefaultGraphWalker.java:128)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.startWalking(DefaultGraphWalker.java:102)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:6418)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genReduceSinkPlan(SemanticAnalyzer.java:4029)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genBodyPlan(SemanticAnalyzer.java:5148)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:5661)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:6229)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:240)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:326)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473507">HIVE-1618</key>
            <summary>Expression in sort by throws NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pauly">Paul Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Sep 2010 22:29:33 +0000</created>
                <updated>Thu, 20 Oct 2011 08:42:54 +0000</updated>
                            <resolved>Thu, 20 Oct 2011 08:42:54 +0000</resolved>
                                    <version>0.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13131451" author="ashutoshc" created="Thu, 20 Oct 2011 08:42:54 +0000"  >&lt;p&gt;No longer a problem on trunk. Error message is:&lt;br/&gt;
FAILED: Error in semantic analysis: functions are not supported in order by&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Oct 2011 08:42:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lg13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123247</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
