<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 03:27:56 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2014-6-18+AND+created+%3C%3D+2014-6-25+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="39" total="39"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-7249] HiveTxnManager.closeTxnManger() throws if called after commitTxn()</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7249</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt; I openTxn() and acquireLocks() for a query that looks like &quot;INSERT INTO T PARTITION(p) SELECT * FROM T&quot;.&lt;br/&gt;
Then I call commitTxn().  Then I call closeTxnManger() I get an exception saying lock not found (the only lock in this txn).  So it seems TxnMgr doesn&apos;t know that commit released the locks.&lt;/p&gt;

&lt;p&gt;Here is the stack trace and some log output which maybe useful:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-06-17 15:54:40,771 DEBUG mapreduce.TransactionContext (TransactionContext.java:onCommitJob(128)) - onCommitJob(job_local557130041_0001). this=46719652
2014-06-17 15:54:40,771 DEBUG lockmgr.DbTxnManager (DbTxnManager.java:commitTxn(205)) - Committing txn 1
2014-06-17 15:54:40,771 DEBUG txn.TxnHandler (TxnHandler.java:getDbTime(872)) - Going to execute query &amp;lt;values current_timestamp&amp;gt;
2014-06-17 15:54:40,772 DEBUG txn.TxnHandler (TxnHandler.java:heartbeatTxn(1423)) - Going to execute query &amp;lt;select txn_state from TXNS where txn_id = 1 for\
 update&amp;gt;
2014-06-17 15:54:40,773 DEBUG txn.TxnHandler (TxnHandler.java:heartbeatTxn(1438)) - Going to execute update &amp;lt;update TXNS set txn_last_heartbeat = 140304568\
0772 where txn_id = 1&amp;gt;
2014-06-17 15:54:40,778 DEBUG txn.TxnHandler (TxnHandler.java:heartbeatTxn(1440)) - Going to commit
2014-06-17 15:54:40,779 DEBUG txn.TxnHandler (TxnHandler.java:commitTxn(344)) - Going to execute insert &amp;lt;insert into COMPLETED_TXN_COMPONENTS select tc_txn\
id, tc_database, tc_table, tc_partition from TXN_COMPONENTS where tc_txnid = 1&amp;gt;
2014-06-17 15:54:40,784 DEBUG txn.TxnHandler (TxnHandler.java:commitTxn(352)) - Going to execute update &amp;lt;delete from TXN_COMPONENTS where tc_txnid = 1&amp;gt;
2014-06-17 15:54:40,788 DEBUG txn.TxnHandler (TxnHandler.java:commitTxn(356)) - Going to execute update &amp;lt;delete from HIVE_LOCKS where hl_txnid = 1&amp;gt;
2014-06-17 15:54:40,791 DEBUG txn.TxnHandler (TxnHandler.java:commitTxn(359)) - Going to execute update &amp;lt;delete from TXNS where txn_id = 1&amp;gt;
2014-06-17 15:54:40,794 DEBUG txn.TxnHandler (TxnHandler.java:commitTxn(361)) - Going to commit
2014-06-17 15:54:40,795 WARN  mapreduce.TransactionContext (TransactionContext.java:cleanup(317)) - cleanupJob(JobID=job_local557130041_0001)this=46719652
2014-06-17 15:54:40,795 DEBUG lockmgr.DbLockManager (DbLockManager.java:unlock(109)) - Unlocking id:1
2014-06-17 15:54:40,796 DEBUG txn.TxnHandler (TxnHandler.java:getDbTime(872)) - Going to execute query &amp;lt;values current_timestamp&amp;gt;
2014-06-17 15:54:40,796 DEBUG txn.TxnHandler (TxnHandler.java:heartbeatLock(1402)) - Going to execute update &amp;lt;update HIVE_LOCKS set hl_last_heartbeat = 140\
3045680796 where hl_lock_ext_id = 1&amp;gt;
2014-06-17 15:54:40,800 DEBUG txn.TxnHandler (TxnHandler.java:heartbeatLock(1405)) - Going to rollback
2014-06-17 15:54:40,804 ERROR metastore.RetryingHMSHandler (RetryingHMSHandler.java:invoke(143)) - NoSuchLockException(message:No such lock: 1)
        at org.apache.hadoop.hive.metastore.txn.TxnHandler.heartbeatLock(TxnHandler.java:1407)
        at org.apache.hadoop.hive.metastore.txn.TxnHandler.unlock(TxnHandler.java:477)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.unlock(HiveMetaStore.java:4817)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:105)
        at com.sun.proxy.$Proxy14.unlock(Unknown Source)
        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.unlock(HiveMetaStoreClient.java:1598)
        at org.apache.hadoop.hive.ql.lockmgr.DbLockManager.unlock(DbLockManager.java:110)
        at org.apache.hadoop.hive.ql.lockmgr.DbLockManager.close(DbLockManager.java:162)
        at org.apache.hadoop.hive.ql.lockmgr.DbTxnManager.destruct(DbTxnManager.java:300)
        at org.apache.hadoop.hive.ql.lockmgr.HiveTxnManagerImpl.closeTxnManager(HiveTxnManagerImpl.java:39)
        at org.apache.hadoop.hive.ql.lockmgr.DbTxnManager.closeTxnManager(DbTxnManager.java:43)
        at org.apache.hive.hcatalog.mapreduce.TransactionContext.cleanup(TransactionContext.java:327)
        at org.apache.hive.hcatalog.mapreduce.TransactionContext.onCommitJob(TransactionContext.java:142)
        at org.apache.hive.hcatalog.mapreduce.OutputCommitterContainer.commitJob(OutputCommitterContainer.java:61)
        at org.apache.hive.hcatalog.mapreduce.FileOutputCommitterContainer.commitJob(FileOutputCommitterContainer.java:251)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:537)

2014-06-17 15:54:40,804 ERROR lockmgr.DbLockManager (DbLockManager.java:unlock(114)) - Metastore could find no record of lock 1
2014-06-17 15:54:40,810 INFO  mapreduce.FileOutputCommitterContainer (FileOutputCommitterContainer.java:cancelDelegationTokens(976)) - Cancelling delegation token for the job.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12721820">HIVE-7249</key>
            <summary>HiveTxnManager.closeTxnManger() throws if called after commitTxn()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alangates">Alan Gates</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jun 2014 00:09:42 +0000</created>
                <updated>Thu, 13 Nov 2014 19:39:52 +0000</updated>
                            <resolved>Wed, 30 Jul 2014 00:08:00 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Locking</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14036924" author="alangates" created="Thu, 19 Jun 2014 03:58:49 +0000"  >&lt;p&gt;Eugene, please apply this patch and see if it fixes your issue.&lt;/p&gt;</comment>
                            <comment id="14038092" author="ekoifman" created="Thu, 19 Jun 2014 23:26:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alangates&quot; class=&quot;user-hover&quot; rel=&quot;alangates&quot;&gt;Alan Gates&lt;/a&gt; org.apache.hive.hcatalog.fileformats.TestOrcDynamicPartitioned gets wedged with this patch&lt;/p&gt;</comment>
                            <comment id="14038119" author="ekoifman" created="Thu, 19 Jun 2014 23:50:33 +0000"  >&lt;p&gt;Here is the thread dump though there doesn&apos;t appear to be anything interesting in it&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Picked up JAVA_TOOL_OPTIONS:  -Djava.awt.headless=true -Dapple.awt.UIElement=true
57554 
87066 /Users/ekoifman/dev/hive/hcatalog/core/target/surefire/surefirebooter3727332902234772866.jar
87243 sun.tools.jps.Jps
87056 org.codehaus.plexus.classworlds.launcher.Launcher
ekoifman:hcatalog ekoifman$ jstack 87066
Picked up JAVA_TOOL_OPTIONS:  -Djava.awt.headless=true -Dapple.awt.UIElement=true
2014-06-19 16:38:27
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.51-b01-457 mixed mode):

&quot;Attach Listener&quot; daemon prio=9 tid=7ffded8c7800 nid=0x10c840000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

&quot;BoneCP-pool-watch-thread&quot; daemon prio=5 tid=7ffde9e89000 nid=0x10defb000 waiting on condition [10defa000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;7b8e93d10&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:322)
	at com.jolbox.bonecp.PoolWatchThread.run(PoolWatchThread.java:75)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
	at java.lang.Thread.run(Thread.java:680)

&quot;BoneCP-keep-alive-scheduler&quot; daemon prio=5 tid=7ffde9e88000 nid=0x10ddf8000 waiting on condition [10ddf7000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;7b8fde4d8&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:196)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
	at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:609)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:602)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:957)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:917)
	at java.lang.Thread.run(Thread.java:680)

&quot;com.google.common.base.internal.Finalizer&quot; daemon prio=5 tid=7ffde9e9a000 nid=0x10dcf5000 in Object.wait() [10dcf4000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;7b906a3a8&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
	- locked &amp;lt;7b906a3a8&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
	at com.google.common.base.internal.Finalizer.run(Finalizer.java:127)

&quot;BoneCP-pool-watch-thread&quot; daemon prio=5 tid=7ffde91c6800 nid=0x10d068000 waiting on condition [10d067000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;7b870b118&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:322)
	at com.jolbox.bonecp.PoolWatchThread.run(PoolWatchThread.java:75)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
	at java.lang.Thread.run(Thread.java:680)

&quot;BoneCP-keep-alive-scheduler&quot; daemon prio=5 tid=7ffdec031800 nid=0x10cf65000 waiting on condition [10cf64000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;7b86fd7c0&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:196)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
	at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:609)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:602)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:957)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:917)
	at java.lang.Thread.run(Thread.java:680)

&quot;com.google.common.base.internal.Finalizer&quot; daemon prio=5 tid=7ffde91c5800 nid=0x10ce62000 in Object.wait() [10ce61000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;7b86fd820&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
	- locked &amp;lt;7b86fd820&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
	at com.google.common.base.internal.Finalizer.run(Finalizer.java:127)

&quot;BoneCP-pool-watch-thread&quot; daemon prio=5 tid=7ffde92c4800 nid=0x10cd5f000 waiting on condition [10cd5e000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;7b86b24b8&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:322)
	at com.jolbox.bonecp.PoolWatchThread.run(PoolWatchThread.java:75)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
	at java.lang.Thread.run(Thread.java:680)

&quot;BoneCP-keep-alive-scheduler&quot; daemon prio=5 tid=7ffde6b9f000 nid=0x10cc5c000 waiting on condition [10cc5b000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;7b86185f8&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:196)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
	at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:609)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:602)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:957)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:917)
	at java.lang.Thread.run(Thread.java:680)

&quot;com.google.common.base.internal.Finalizer&quot; daemon prio=5 tid=7ffde680d800 nid=0x10c9da000 in Object.wait() [10c9d9000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;7b86d0108&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
	- locked &amp;lt;7b86d0108&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
	at com.google.common.base.internal.Finalizer.run(Finalizer.java:127)

&quot;pool-2-thread-1&quot; prio=5 tid=7ffde9ae2000 nid=0x10cb59000 waiting on condition [10cb58000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;7b8487158&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:196)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
	at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:609)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:602)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:957)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:917)
	at java.lang.Thread.run(Thread.java:680)

&quot;derby.rawStoreDaemon&quot; daemon prio=5 tid=7ffdeb96d800 nid=0x10c51a000 in Object.wait() [10c519000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;7b8059a50&amp;gt; (a org.apache.derby.impl.services.daemon.BasicDaemon)
	at org.apache.derby.impl.services.daemon.BasicDaemon.rest(Unknown Source)
	- locked &amp;lt;7b8059a50&amp;gt; (a org.apache.derby.impl.services.daemon.BasicDaemon)
	at org.apache.derby.impl.services.daemon.BasicDaemon.run(Unknown Source)
	at java.lang.Thread.run(Thread.java:680)

&quot;AWT-AppKit&quot; daemon prio=5 tid=7ffde91c9800 nid=0x7fff7d52b180 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

&quot;Timer-0&quot; daemon prio=5 tid=7ffde91fc800 nid=0x10bc48000 in Object.wait() [10bc47000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;7b8063188&amp;gt; (a java.util.TaskQueue)
	at java.lang.Object.wait(Object.java:485)
	at java.util.TimerThread.mainLoop(Timer.java:483)
	- locked &amp;lt;7b8063188&amp;gt; (a java.util.TaskQueue)
	at java.util.TimerThread.run(Timer.java:462)

&quot;Low Memory Detector&quot; daemon prio=5 tid=7ffdeb802800 nid=0x10b1dd000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

&quot;C2 CompilerThread1&quot; daemon prio=9 tid=7ffdeb801800 nid=0x10b0da000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

&quot;C2 CompilerThread0&quot; daemon prio=9 tid=7ffdeb801000 nid=0x10afd7000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

&quot;Signal Dispatcher&quot; daemon prio=9 tid=7ffdeb800000 nid=0x10aed4000 runnable [00000000]
   java.lang.Thread.State: RUNNABLE

&quot;Surrogate Locker Thread (Concurrent GC)&quot; daemon prio=5 tid=7ffde4807800 nid=0x10add1000 waiting on condition [00000000]
   java.lang.Thread.State: RUNNABLE

&quot;Finalizer&quot; daemon prio=8 tid=7ffdea0d3000 nid=0x10ab43000 in Object.wait() [10ab42000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;7b8025b00&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
	- locked &amp;lt;7b8025b00&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:171)

&quot;Reference Handler&quot; daemon prio=10 tid=7ffdea0d2000 nid=0x10aa40000 in Object.wait() [10aa3f000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;7b8024e50&amp;gt; (a java.lang.ref.Reference$Lock)
	at java.lang.Object.wait(Object.java:485)
	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
	- locked &amp;lt;7b8024e50&amp;gt; (a java.lang.ref.Reference$Lock)

&quot;main&quot; prio=5 tid=7ffde8800800 nid=0x101885000 waiting on condition [101883000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
	at java.lang.Thread.sleep(Native Method)
	at org.apache.hadoop.mapreduce.Job.monitorAndPrintJob(Job.java:1348)
	at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1306)
	at org.apache.hive.hcatalog.mapreduce.HCatMapReduceTest.runMRCreate(HCatMapReduceTest.java:318)
	at org.apache.hive.hcatalog.mapreduce.TestHCatDynamicPartitioned.runHCatDynamicPartitionedTable(TestHCatDynamicPartitioned.java:146)
	at org.apache.hive.hcatalog.mapreduce.TestHCatDynamicPartitioned.testHCatDynamicPartitionedTable(TestHCatDynamicPartitioned.java:104)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

&quot;VM Thread&quot; prio=9 tid=7ffdea0cd800 nid=0x10a93d000 runnable 

&quot;Gang worker#0 (Parallel GC Threads)&quot; prio=9 tid=7ffde4801000 nid=0x104c89000 runnable 

&quot;Gang worker#1 (Parallel GC Threads)&quot; prio=9 tid=7ffde4801800 nid=0x104d8c000 runnable 

&quot;Gang worker#2 (Parallel GC Threads)&quot; prio=9 tid=7ffde9000000 nid=0x104e8f000 runnable 

&quot;Gang worker#3 (Parallel GC Threads)&quot; prio=9 tid=7ffde4802000 nid=0x104f92000 runnable 

&quot;Gang worker#4 (Parallel GC Threads)&quot; prio=9 tid=7ffde4803000 nid=0x105095000 runnable 

&quot;Gang worker#5 (Parallel GC Threads)&quot; prio=9 tid=7ffde8802000 nid=0x105198000 runnable 

&quot;Gang worker#6 (Parallel GC Threads)&quot; prio=9 tid=7ffde9800000 nid=0x10529b000 runnable 

&quot;Gang worker#7 (Parallel GC Threads)&quot; prio=9 tid=7ffde9801000 nid=0x10539e000 runnable 

&quot;Concurrent Mark-Sweep GC Thread&quot; prio=9 tid=7ffdea001000 nid=0x10a5b5000 runnable 
&quot;Gang worker#0 (Parallel CMS Threads)&quot; prio=9 tid=7ffde90dc800 nid=0x109baf000 runnable 

&quot;Gang worker#1 (Parallel CMS Threads)&quot; prio=9 tid=7ffdea000000 nid=0x109cb2000 runnable 

&quot;VM Periodic Task Thread&quot; prio=10 tid=7ffdeb814000 nid=0x10b2e0000 waiting on condition 

&quot;Exception Catcher Thread&quot; prio=10 tid=7ffde8801800 nid=0x101ab0000 runnable 
JNI global references: 1175

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14039329" author="hiveqa" created="Fri, 20 Jun 2014 20:46:56 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651359/HIVE-7249.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651359/HIVE-7249.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer3
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/531/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/531/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/531/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/531/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-531/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-531/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651359&lt;/p&gt;</comment>
                            <comment id="14041135" author="alangates" created="Mon, 23 Jun 2014 18:58:31 +0000"  >&lt;p&gt;TestOrcDynamicPartitioned runs fine in my tests.  But I ran it as is.  Did you turn on the DbTxnManager and then run the test, or run it as is?&lt;/p&gt;</comment>
                            <comment id="14041158" author="ekoifman" created="Mon, 23 Jun 2014 19:18:44 +0000"  >&lt;p&gt;yes, i did turn on DbTxnManager, but since we are creating a HCat specific API, let me retest it once that is ready&lt;/p&gt;</comment>
                            <comment id="14048358" author="ekoifman" created="Tue, 1 Jul 2014 00:26:49 +0000"  >&lt;p&gt;BTW, I did test with this patch.  I don&apos;t see the issue any more.&lt;/p&gt;</comment>
                            <comment id="14078005" author="ashutoshc" created="Tue, 29 Jul 2014 17:16:07 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14078662" author="ashutoshc" created="Wed, 30 Jul 2014 00:08:00 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Alan!&lt;/p&gt;</comment>
                            <comment id="14210254" author="thejas" created="Thu, 13 Nov 2014 19:39:52 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12722411">HIVE-7256</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651359" name="HIVE-7249.patch" size="5448" author="alangates" created="Thu, 19 Jun 2014 03:58:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Jun 2014 03:58:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400016</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wuzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400118</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7250] Adaptive compression buffer size for wide tables in ORC</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7250</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the input table is wide (in the order of 1000s), ORC compression buffer size overhead becomes significant causing OOM issues. To overcome this issue, buffer size should be adaptively chosen based on the available memory and the number of columns.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12721824">HIVE-7250</key>
            <summary>Adaptive compression buffer size for wide tables in ORC</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasanth_j">Prasanth Jayachandran</assignee>
                                    <reporter username="prasanth_j">Prasanth Jayachandran</reporter>
                        <labels>
                            <label>orcfile</label>
                    </labels>
                <created>Wed, 18 Jun 2014 01:18:57 +0000</created>
                <updated>Thu, 13 Nov 2014 19:40:02 +0000</updated>
                            <resolved>Fri, 20 Jun 2014 02:32:17 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>File Formats</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14034908" author="prasanth_j" created="Wed, 18 Jun 2014 07:07:44 +0000"  >&lt;p&gt;Addressed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt;&apos;s comment about breaking compatibility with old readers. Fixed it in this patch.&lt;/p&gt;</comment>
                            <comment id="14034914" author="prasanth_j" created="Wed, 18 Jun 2014 07:16:49 +0000"  >&lt;p&gt;I tested the current patch with hive 0.11 and hive 0.12 versions for backward compatibility.&lt;/p&gt;</comment>
                            <comment id="14034991" author="prasanth_j" created="Wed, 18 Jun 2014 07:49:09 +0000"  >&lt;p&gt;Was able to load 15K columns of the test dataset similar to the qtest dataset in patch with default 1GB heap. 20K columns causes OOM.&lt;/p&gt;</comment>
                            <comment id="14036685" author="prasanth_j" created="Wed, 18 Jun 2014 23:59:42 +0000"  >&lt;p&gt;Addressed code review comments.&lt;/p&gt;</comment>
                            <comment id="14036726" author="gopalv" created="Thu, 19 Jun 2014 00:26:10 +0000"  >&lt;p&gt;LGTM +1 (NB)&lt;/p&gt;</comment>
                            <comment id="14036763" author="hagleitn" created="Thu, 19 Jun 2014 00:57:03 +0000"  >&lt;p&gt;+1 although i was asking for some more testing of the logic through unit tests on rb&lt;/p&gt;</comment>
                            <comment id="14036773" author="prasanth_j" created="Thu, 19 Jun 2014 01:04:29 +0000"  >&lt;p&gt;The qfile test was added just to make sure the wide table creation runs with any OOM with the default heap settings. I will add a unit test in the next patch that will check for buffer sizes.&lt;/p&gt;</comment>
                            <comment id="14036810" author="prasanth_j" created="Thu, 19 Jun 2014 01:47:54 +0000"  >&lt;p&gt;Added more unit tests.&lt;/p&gt;</comment>
                            <comment id="14037271" author="hiveqa" created="Thu, 19 Jun 2014 11:50:56 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651345/HIVE-7250.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651345/HIVE-7250.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5664 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/514/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/514/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/514/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/514/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-514/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-514/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651345&lt;/p&gt;</comment>
                            <comment id="14037665" author="prasanth_j" created="Thu, 19 Jun 2014 18:49:08 +0000"  >&lt;p&gt;Added missing apache license header in the newly added unit tests. Also made the unit tests not dependant on -Xmx&lt;/p&gt;</comment>
                            <comment id="14038284" author="prasanth_j" created="Fri, 20 Jun 2014 02:30:57 +0000"  >&lt;p&gt;The recent patch does not change the outcome of unit tests.&lt;/p&gt;</comment>
                            <comment id="14038286" author="prasanth_j" created="Fri, 20 Jun 2014 02:32:11 +0000"  >&lt;p&gt;Patch committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14038568" author="lefty@hortonworks.com" created="Fri, 20 Jun 2014 07:54:52 +0000"  >&lt;p&gt;No user doc?&lt;/p&gt;</comment>
                            <comment id="14210285" author="thejas" created="Thu, 13 Nov 2014 19:40:02 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12650943" name="HIVE-7250.1.patch" size="382689" author="prasanth_j" created="Wed, 18 Jun 2014 01:53:02 +0000"/>
                            <attachment id="12650981" name="HIVE-7250.2.patch" size="380651" author="prasanth_j" created="Wed, 18 Jun 2014 07:07:44 +0000"/>
                            <attachment id="12651318" name="HIVE-7250.3.patch" size="380944" author="prasanth_j" created="Wed, 18 Jun 2014 23:59:42 +0000"/>
                            <attachment id="12651345" name="HIVE-7250.4.patch" size="391166" author="prasanth_j" created="Thu, 19 Jun 2014 01:47:54 +0000"/>
                            <attachment id="12651468" name="HIVE-7250.5.patch" size="393648" author="prasanth_j" created="Thu, 19 Jun 2014 18:52:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Jun 2014 00:26:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wv0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7251] Fix StorageDescriptor usage in unit tests </title>
                <link>https://issues.apache.org/jira/browse/HIVE-7251</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Current Approach : &lt;br/&gt;
StorageDescriptor class is used to describe parameters like InputFormat, Outputformat, SerDeInfo, etc. for a hive table.&lt;br/&gt;
Some of the class variables like InputFormat, OutputFormat, SerDeInfo.serializationLib, etc. are required fields when&lt;br/&gt;
creating a storage descriptor object.&lt;br/&gt;
For example : createTable command in the metaStoreClient creates the table with the default values of such variables defined in HiveConf or hive-default.xml&lt;br/&gt;
But in unit tests, table is created in a slightly different way, that these values need to be set explicitly.&lt;br/&gt;
Thus, when creating tables in tests, required fieldes of StorageDescriptor object need to be set.&lt;/p&gt;

&lt;p&gt;Issue with current approach :&lt;br/&gt;
From some of  the current usages of this class in unit tests, I noticed that&lt;br/&gt;
when any one of the test cases tried to clean up the database and found a table created by any of the previously executed test cases,&lt;br/&gt;
the clean up process tries to fetch the Table object and performs the sanity checks which include checking for required fields like InputFormat, OutputFormat, SerDeInfo.serializationLib&lt;br/&gt;
of the table. The sanity checks fail which results in failure of the test case.&lt;/p&gt;

&lt;p&gt;Fix :&lt;br/&gt;
In unit-tests, StorageDescriptor object should be created with the Fields that are sanity checked when trying to fetch the table.&lt;/p&gt;

&lt;p&gt;NOTE : This fix fixes 6 test cases in itests/hive-unit/&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722277">HIVE-7251</key>
            <summary>Fix StorageDescriptor usage in unit tests </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pankit">Pankit Thapar</assignee>
                                    <reporter username="pankit">Pankit Thapar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jun 2014 17:45:20 +0000</created>
                <updated>Thu, 13 Nov 2014 19:42:40 +0000</updated>
                            <resolved>Fri, 20 Jun 2014 05:37:02 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14037754" author="hiveqa" created="Thu, 19 Jun 2014 19:45:24 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651195/HIVE-7251.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651195/HIVE-7251.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 5639 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_compact
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/517/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/517/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/517/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/517/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-517/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-517/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651195&lt;/p&gt;</comment>
                            <comment id="14037768" author="ashutoshc" created="Thu, 19 Jun 2014 19:53:35 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14038483" author="ashutoshc" created="Fri, 20 Jun 2014 05:37:02 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Pankit!&lt;/p&gt;</comment>
                            <comment id="14210800" author="thejas" created="Thu, 13 Nov 2014 19:42:40 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651195" name="HIVE-7251.patch" size="16365" author="pankit" created="Wed, 18 Jun 2014 17:48:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Jun 2014 19:45:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wxr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400567</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7252] TestTezTask.testSubmit fails in trunk</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7252</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Testcase needs minor update&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722367">HIVE-7252</key>
            <summary>TestTezTask.testSubmit fails in trunk</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jun 2014 22:54:52 +0000</created>
                <updated>Thu, 13 Nov 2014 19:41:58 +0000</updated>
                            <resolved>Wed, 18 Jun 2014 23:22:24 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14036623" author="ashutoshc" created="Wed, 18 Jun 2014 23:11:21 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14036638" author="hagleitn" created="Wed, 18 Jun 2014 23:22:24 +0000"  >&lt;p&gt;Committed to trunk (simple update to fix a failing test in build - didn&apos;t wait 24hrs for this to get fixed - will revert if this someone feels this isn&apos;t right).&lt;/p&gt;</comment>
                            <comment id="14210665" author="thejas" created="Thu, 13 Nov 2014 19:41:58 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651302" name="HIVE-7252.1.patch" size="1062" author="hagleitn" created="Wed, 18 Jun 2014 23:07:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Jun 2014 23:11:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400558</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wy9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7253] TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas fails on trunk</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7253</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12722372">HIVE-7253</key>
            <summary>TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas fails on trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jun 2014 23:28:52 +0000</created>
                <updated>Wed, 18 Jun 2014 23:34:55 +0000</updated>
                            <resolved>Wed, 18 Jun 2014 23:34:55 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14036652" author="hagleitn" created="Wed, 18 Jun 2014 23:29:30 +0000"  >&lt;p&gt;Looks like a missed golden file update.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12719020">HIVE-7194</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651312" name="HIVE-7253.1.patch" size="808" author="hagleitn" created="Wed, 18 Jun 2014 23:29:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wyb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400657</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7254] Enhance Ptest framework config to auto-pick up list of MiniXXXDriver&apos;s test</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7254</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Today, the Hive PTest infrastructure has a test-driver configuration called &quot;directory&quot;, so it will run all the qfiles under that directory for that driver.  For example, CLIDriver is configured with directory &quot;ql/src/test/queries/clientpositive&quot;&lt;/p&gt;

&lt;p&gt;However the configuration for the miniXXXDrivers (miniMRDriver, miniMRDriverNegative, miniTezDriver) run only a select number of tests under &quot;directory&quot;.  So we have to use the &quot;include&quot; configuration to hard-code a list of tests for it to run.  This is duplicating the list of each miniDriver&apos;s tests already in the /itests/qtest pom file, and can get out of date.&lt;/p&gt;

&lt;p&gt;It would be nice if both got their information the same way.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722397">HIVE-7254</key>
            <summary>Enhance Ptest framework config to auto-pick up list of MiniXXXDriver&apos;s test</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="szehon">Szehon Ho</assignee>
                                    <reporter username="szehon">Szehon Ho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 01:42:28 +0000</created>
                <updated>Thu, 21 Aug 2014 06:09:34 +0000</updated>
                            <resolved>Mon, 14 Jul 2014 05:00:00 +0000</resolved>
                                                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                            <comments>
                            <comment id="14037892" author="hagleitn" created="Thu, 19 Jun 2014 21:10:16 +0000"  >&lt;p&gt;Would moving the minimr/tez/etc properties to a separate file and using &lt;a href=&quot;http://mojo.codehaus.org/properties-maven-plugin/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mojo.codehaus.org/properties-maven-plugin/&lt;/a&gt; be an option?&lt;/p&gt;</comment>
                            <comment id="14037912" author="szehon" created="Thu, 19 Jun 2014 21:25:19 +0000"  >&lt;p&gt;I think that should work.  I was going to see how hard it is to have the PTest framework parse from the pom itself, this would probably be easier.&lt;/p&gt;</comment>
                            <comment id="14037921" author="szehon" created="Thu, 19 Jun 2014 21:31:12 +0000"  >&lt;p&gt;Created a subtask &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7258&quot; title=&quot;Move qtest-Driver properties from pom to separate file  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7258&quot;&gt;&lt;del&gt;HIVE-7258&lt;/del&gt;&lt;/a&gt; on that suggestion.  Anyone is welcome to take it.&lt;/p&gt;</comment>
                            <comment id="14038022" author="hagleitn" created="Thu, 19 Jun 2014 22:30:46 +0000"  >&lt;p&gt;I can try to factor that info into a separate file and make our build process work with it. What do you need on the ptest framework side? Would a property file work for you? Is the file that drives the test framework checked into the hive repo?&lt;/p&gt;</comment>
                            <comment id="14038028" author="hagleitn" created="Thu, 19 Jun 2014 22:33:28 +0000"  >&lt;p&gt;Alternatively if we have something like &lt;a href=&quot;http://xmltwig.org/xmltwig/tools/xml_grep/xml_grep.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://xmltwig.org/xmltwig/tools/xml_grep/xml_grep.html&lt;/a&gt; on the build nodes parsing the xml wouldn&apos;t be hard either. But that seems  more brittle than maintaining the tests in a separate file.&lt;/p&gt;</comment>
                            <comment id="14038086" author="szehon" created="Thu, 19 Jun 2014 23:18:55 +0000"  >&lt;p&gt;Thanks, property file would work fine for Ptest framework.  The refactoring of normal build process can be done as a first change.  The PTest framework today generates cmds like &quot;mvn test -Dtest=TestMiniTezCliDriver -Dqfile=$batch1&quot; using its own property file, and will continue to work.&lt;/p&gt;

&lt;p&gt;The actual Ptest framework class is checked into the hive repo at:  &lt;a href=&quot;https://github.com/apache/hive/blob/trunk/testutils/ptest2/src/main/java/org/apache/hive/ptest/execution/conf/TestParser.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TestParser.java&lt;/a&gt;.  It runs against the Ptest conf file &quot;trunk-mr2.properties&quot; (attached).  As a second step, we can replace the hard-coded test names there with references to the new property file, and have TestParser read those.&lt;/p&gt;

&lt;p&gt;I can take a look at this, but if anyone is interested, build instructions for Ptest framework are at : &lt;a href=&quot;https://github.com/apache/hive/blob/trunk/testutils/ptest2/README.md&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;README&lt;/a&gt;.  In development, I usually run TestParser locally against the file to verify the generated-batches, for example see &lt;a href=&quot;https://github.com/apache/hive/blob/trunk/testutils/ptest2/src/test/java/org/apache/hive/ptest/execution/conf/TestTestParser.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TestTestParser.java&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="14038303" author="brocknoland" created="Fri, 20 Jun 2014 02:57:50 +0000"  >&lt;p&gt;Huge +1 for this. It&apos;d be awesome to cleanup that hack (I did).&lt;/p&gt;</comment>
                            <comment id="14060331" author="szehon" created="Mon, 14 Jul 2014 05:00:00 +0000"  >&lt;p&gt;Now, the Ptest2 framework picks up list of MiniXCliDriver tests from itests/qtest/testconfiguration.properties&lt;/p&gt;</comment>
                            <comment id="14060389" author="lefty@hortonworks.com" created="Mon, 14 Jul 2014 07:04:03 +0000"  >&lt;p&gt;What documentation does this need?  (See thread &quot;MiniTezCliDriver pre-commit tests are running&quot; in dev@hive mailing list for discussion of retiring the MiniMR and PTest2 wikidoc.)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hive-dev/201407.mbox/%3cCAPs2cbGWuC-YgttZWmn3fBaVHZtm2N7VjQ7+RkHUZDHTzs08Hg@mail.gmail.com%3e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MiniTezCliDriver pre-commit tests are running &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/MiniMR+and+PTest2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MiniMR and PTest2 &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14061088" author="szehon" created="Mon, 14 Jul 2014 19:31:51 +0000"  >&lt;p&gt;Hi Lefty thanks for looking at it.  The PTest framework is not a released product per se, its just a evolving framework used by devs always in latest stage, so I think we dont need to maintain old info as not sure anyone would ever use the old framework.&lt;/p&gt;

&lt;p&gt;Thanks for finding all references to that page.  As I am looking through, I was thinking, one way to have less disruption is instead of deleting, to replace that page contents with what Gunther added (which works for both the normal build that dev&apos;s do locally, and the Ptest framework).  How to add a MiniMR test was never documented even in the past form and might be useful.  I guess either Gunther or I could take a stab at it.  &lt;/p&gt;

&lt;p&gt;If so, the page (and thus the links) would still have to be renamed though from &quot;MiniMR and PTest2&quot; to just as now its a general case, should be &quot;MiniCluster tests&quot; or something of that nature.  And one parent reference should still be removed, namely the one from the PTest framework page: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing&lt;/a&gt;.  Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="14061133" author="lefty@hortonworks.com" created="Mon, 14 Jul 2014 19:59:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;The PTest framework is not a released product per se ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, I realized that after hitting the Send button.  Email has no Undo button.  &lt;em&gt;blush&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Your plan sounds good.  I don&apos;t think there&apos;s any problem renaming a wiki page, as long as the incoming links are fixed too.  External links will break but they should, since the original page will be gone.  No, wait, let&apos;s look at the &quot;Hot Referrers&quot; list (see link below):  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; referred to it in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6293&quot; title=&quot;Not all minimr tests are executed or reported in precommit test run&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6293&quot;&gt;HIVE-6293&lt;/a&gt; when he first created the doc.  Hm.  But that jira is still open, so we could just add a comment referring to this jira.  I&apos;ll link the two jiras right now.&lt;/p&gt;

&lt;p&gt;I guess it&apos;s six-of-one, half-dozen-of-the-other whether to rename the old doc or create a new one.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=38571221&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Page information for MiniMR and PTest2 &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14074621" author="szehon" created="Fri, 25 Jul 2014 17:23:42 +0000"  >&lt;p&gt;I finally got around to doing this: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/MiniDriver+Tests&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/MiniDriver+Tests&lt;/a&gt;   Feel free to double check and see if its correct.  It seems like its ok to be renamed, as the links didnt break.&lt;/p&gt;

&lt;p&gt;Also &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; as a related change, I updated the parent wiki page with the updated links of the Jenkins jobs &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14075979" author="lefty@hortonworks.com" created="Mon, 28 Jul 2014 07:12:24 +0000"  >&lt;p&gt;The links didn&apos;t break and the text display was changed too.  Sweet.&lt;/p&gt;

&lt;p&gt;However, the Hive Developer FAQ page puts a doc link under the heading/question &quot;How do I add a new MiniMR test?&quot; &amp;#8211; perhaps that should be changed to &quot;How do I add a new MiniDriver test?&quot;  And if that isn&apos;t clear enough, the text could be expanded from &quot;See MiniDriver Tests&quot; to &quot;See MiniDriver Tests for information about adding MiniMR, MiniTez, and Beeline driver tests&quot; (or some such).&lt;/p&gt;

&lt;p&gt;Similarly, a link on the Home page to the FAQ doc says &quot;add MiniMR test&quot; which should propably say &quot;add MiniDriver test&quot; and a link on the umbrella page for Developer Docs says &quot;Adding a MiniMR test&quot; so that should be &quot;Adding a MiniDriver test&quot; &amp;#8211; right?&lt;/p&gt;

&lt;p&gt;Another one:  PreCommit Patch Testing says &quot;Read MiniDriver Tests before adding new minimr tests&quot; &amp;#8211; make that &quot;... before adding new miniMR, miniTez, or Beeline driver tests&quot;?&lt;/p&gt;

&lt;p&gt;I&apos;ll make these changes unless you suggest alternatives, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;.  Here are the links:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=27823747#HiveDeveloperFAQ-HowdoIaddanewMiniMRtest?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Hive Developer FAQ &amp;#8211; How do I add a new MiniMR test? &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Home#Home-ResourcesforContributors&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Home &amp;#8211; Resources for Contributors (see Hive Developer Docs section, FAQ bullet) &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/DeveloperDocs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Developer Docs (umbrella page) &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Hive PreCommit Patch Testing &amp;#8211; Short Version &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14076475" author="szehon" created="Mon, 28 Jul 2014 17:57:28 +0000"  >&lt;p&gt;Yes that sounds good to me, Lefty.  I think we can go with &quot;MiniDriver and Beeline tests&quot; in the links , to have less maintenance cost when we add more miniDriver tests, as we might have MiniSparkDriver later, if that is ok.  &lt;/p&gt;

&lt;p&gt;Good point about Beeline driver tests, it seems is separate enough that its not included in miniDriver tests, and we should include it to be clear.  Although now that you mention it, I&apos;m not sure if beeline driver tests are properly documented anywhere.  Right now they are not run by default during build (need to specify a flag), and ideally we should have some mention of how to run them, even though I kind of doubt developers do that exercise normally.&lt;/p&gt;</comment>
                            <comment id="14081990" author="lefty@hortonworks.com" created="Fri, 1 Aug 2014 06:41:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;, you&apos;re right about Beeline driver tests not being documented &amp;#8211; I grepped a download of the wiki and only found &quot;Beeline&quot; with &quot;test&quot; in the MiniDriver Tests doc and the Hive 0.13 release status doc.&lt;/p&gt;
</comment>
                            <comment id="14082015" author="lefty@hortonworks.com" created="Fri, 1 Aug 2014 07:21:07 +0000"  >&lt;p&gt;The cross-reference links and accompanying text have been revised in the four docs listed a few comments ago.&lt;/p&gt;

&lt;p&gt;For Beeline, &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/MiniDriver+Tests&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/MiniDriver+Tests&lt;/a&gt; only explains how to exclude tests with beeline.positive.exclude.  So when Beeline driver tests get documented elsewhere, another cross-reference should be made.&lt;/p&gt;</comment>
                            <comment id="14103411" author="hagleitn" created="Wed, 20 Aug 2014 05:37:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; I think the minitez.query.files.shared are no longer picked up by the precommit test: (e.g.: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/412/testReport/org.apache.hadoop.hive.cli/TestMiniTezCliDriver/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/412/testReport/org.apache.hadoop.hive.cli/TestMiniTezCliDriver/&lt;/a&gt;). Just wondering if that got lost with this change. I would have posted a patch, but I&apos;m not sure how this is configured..&lt;/p&gt;</comment>
                            <comment id="14103518" author="szehon" created="Wed, 20 Aug 2014 06:55:58 +0000"  >&lt;p&gt;I think Brock was working on the PTest server and made some config changes recently.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; can you take a look?&lt;/p&gt;</comment>
                            <comment id="14103541" author="szehon" created="Wed, 20 Aug 2014 07:12:56 +0000"  >&lt;p&gt;I think I see what needs to be done, its on the build machine&apos;s configuration (not checked in) and needs to add back the other set of tez tests that Brock accidentally removed.  As I&apos;m afraid of hosing the builds tonight, Brock or I can do it tomorrow morning &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Hey Brock, one idea, do you think its a good idea to add the build machine&apos;s properties to source control?  That way there is a history in case they get changed, and all devs can easily see/modify without having to login to build machine.  Just a late night thought.&lt;/p&gt;</comment>
                            <comment id="14104086" author="brocknoland" created="Wed, 20 Aug 2014 16:15:24 +0000"  >&lt;p&gt;Ok, I think there were three issues:&lt;/p&gt;

&lt;p&gt;1) I accidently removed minitez.query.files.shared from the properties file (just added that back)&lt;br/&gt;
2) &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7757&quot; title=&quot;PTest2 separates test files with spaces while QTestGen uses commas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7757&quot;&gt;&lt;del&gt;HIVE-7757&lt;/del&gt;&lt;/a&gt; &lt;br/&gt;
3) Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7757&quot; title=&quot;PTest2 separates test files with spaces while QTestGen uses commas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7757&quot;&gt;&lt;del&gt;HIVE-7757&lt;/del&gt;&lt;/a&gt; required a restart of ptest2&lt;/p&gt;

&lt;p&gt;I agree that we need those properties files in svn. They used to have sensitive information in them but now they don&apos;t. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7801&quot; title=&quot;Move PTest2 properties files into svn&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7801&quot;&gt;HIVE-7801&lt;/a&gt; to fix that. &lt;/p&gt;</comment>
                            <comment id="14105090" author="hagleitn" created="Thu, 21 Aug 2014 06:09:34 +0000"  >&lt;p&gt;Thanks, I appreciate it! Just verified - the tez shared tests are back.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12690872">HIVE-6293</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12735439">HIVE-7801</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651553" name="trunk-mr2.properties" size="7987" author="szehon" created="Thu, 19 Jun 2014 23:20:24 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12722597">HIVE-7258</subtask>
                            <subtask id="12723715">HIVE-7291</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Jun 2014 21:10:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wygn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7255] Allow partial partition spec in analyze command</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7255</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;So that stats collection can happen for multiple partitions through one statement.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722404">HIVE-7255</key>
            <summary>Allow partial partition spec in analyze command</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 02:28:40 +0000</created>
                <updated>Thu, 23 Feb 2017 18:33:42 +0000</updated>
                            <resolved>Mon, 30 Jun 2014 20:52:04 +0000</resolved>
                                    <version>0.10.0</version>
                    <version>0.11.0</version>
                    <version>0.12.0</version>
                    <version>0.13.0</version>
                    <version>0.13.1</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Statistics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14036872" author="ashutoshc" created="Thu, 19 Jun 2014 02:36:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/22770/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RB request&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14036894" author="hagleitn" created="Thu, 19 Jun 2014 03:13:18 +0000"  >&lt;p&gt;Cool stuff. Some comments on rb (only looked at tests so far).&lt;/p&gt;</comment>
                            <comment id="14037804" author="ashutoshc" created="Thu, 19 Jun 2014 20:13:11 +0000"  >&lt;p&gt;To enable further testing of this, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7051&quot; title=&quot;Display partition level column stats in DESCRIBE FORMATTED PARTITION&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7051&quot;&gt;&lt;del&gt;HIVE-7051&lt;/del&gt;&lt;/a&gt; will be of great help. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt; Can you take a look at that first?&lt;/p&gt;</comment>
                            <comment id="14037857" author="hagleitn" created="Thu, 19 Jun 2014 20:46:49 +0000"  >&lt;p&gt;Sure. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7051&quot; title=&quot;Display partition level column stats in DESCRIBE FORMATTED PARTITION&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7051&quot;&gt;&lt;del&gt;HIVE-7051&lt;/del&gt;&lt;/a&gt; looks good to me.&lt;/p&gt;</comment>
                            <comment id="14038992" author="hiveqa" created="Fri, 20 Jun 2014 16:26:23 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651350/HIVE-7255.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651350/HIVE-7255.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5653 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_columnstats_partlvl
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.metastore.TestMetaStoreEventListenerOnlyOnCommit.testEventStatus
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/529/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/529/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/529/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/529/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-529/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651350&lt;/p&gt;</comment>
                            <comment id="14047365" author="ashutoshc" created="Mon, 30 Jun 2014 04:38:30 +0000"  >&lt;p&gt;&amp;#8211; Incorporated Szehon&apos;s feedback.&lt;br/&gt;
&amp;#8211; Added new tests as per Gunther&apos;s suggestions.&lt;br/&gt;
&amp;#8211; Fixed couple of bugs.&lt;/p&gt;</comment>
                            <comment id="14047454" author="hiveqa" created="Mon, 30 Jun 2014 08:00:35 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12653096/HIVE-7255.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12653096/HIVE-7255.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 5654 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/631/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/631/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/631/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/631/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-631/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-631/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12653096&lt;/p&gt;</comment>
                            <comment id="14047945" author="szehon" created="Mon, 30 Jun 2014 18:29:19 +0000"  >&lt;p&gt;Thanks for taking care of those.  +1&lt;/p&gt;</comment>
                            <comment id="14048146" author="ashutoshc" created="Mon, 30 Jun 2014 20:52:04 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14048398" author="lefty@hortonworks.com" created="Tue, 1 Jul 2014 01:27:42 +0000"  >&lt;p&gt;This needs user doc and examples here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/StatsDev#StatsDev-ExistingTables&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Statistics in Hive &amp;#8211; Existing Tables (ANALYZE) &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/StatsDev#StatsDev-Examples&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Statistics in Hive &amp;#8211; Examples &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14207514" author="ashutoshc" created="Wed, 12 Nov 2014 01:50:46 +0000"  >&lt;p&gt;updated the cwiki&lt;/p&gt;</comment>
                            <comment id="14210574" author="thejas" created="Thu, 13 Nov 2014 19:41:31 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12713809">HIVE-7051</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12657900">HIVE-4861</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651350" name="HIVE-7255.1.patch" size="65960" author="ashutoshc" created="Thu, 19 Jun 2014 02:30:05 +0000"/>
                            <attachment id="12653096" name="HIVE-7255.2.patch" size="87301" author="ashutoshc" created="Mon, 30 Jun 2014 04:38:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Jun 2014 03:13:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wyi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400689</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7256] HiveTxnManager should be stateless</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7256</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In order to integrate HCat with Hive ACID, we should be able to create an instance of HiveTxnManager and use it to acquire locks, and release locks from a different instance of HiveTxnManager.&lt;/p&gt;

&lt;p&gt;One use case where this shows up is when a job using HCat is retried, since calls to TxnManager are made from the jobs OutputCommitter.&lt;/p&gt;

&lt;p&gt;Another, is HCatReader/Writer.  For example, TestReaderWriter, calls setupJob()  from one instance of OutputCommitterContainer and commitJob() from another instance.  The 2nd case is perhaps better solved by ensuring there is only 1 instance of OutputCommitterContainer.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12722411">HIVE-7256</key>
            <summary>HiveTxnManager should be stateless</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="alangates">Alan Gates</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 04:22:43 +0000</created>
                <updated>Thu, 29 Oct 2015 00:08:04 +0000</updated>
                            <resolved>Thu, 29 Oct 2015 00:08:04 +0000</resolved>
                                    <version>0.13.1</version>
                                                    <component>Locking</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14042679" author="alangates" created="Tue, 24 Jun 2014 21:02:32 +0000"  >&lt;p&gt;This patch creates a new transaction manager and associated lock for HCatalog that extend DbTxnManager and DbLockManager.  This patch depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7249&quot; title=&quot;HiveTxnManager.closeTxnManger() throws if called after commitTxn()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7249&quot;&gt;&lt;del&gt;HIVE-7249&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14048366" author="ekoifman" created="Tue, 1 Jul 2014 00:34:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7256&quot; title=&quot;HiveTxnManager should be stateless&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7256&quot;&gt;&lt;del&gt;HIVE-7256&lt;/del&gt;&lt;/a&gt;.addendum.patch is in addition to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7256&quot; title=&quot;HiveTxnManager should be stateless&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7256&quot;&gt;&lt;del&gt;HIVE-7256&lt;/del&gt;&lt;/a&gt;.patch.  Contains fix to TxnManagerFactory so that both types of managers can coexist.  &lt;br/&gt;
Contains a fix to HcatDbTxnManager.reconstructTxnInfo() to make it work for read-only transactions (as designed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7256&quot; title=&quot;HiveTxnManager should be stateless&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7256&quot;&gt;&lt;del&gt;HIVE-7256&lt;/del&gt;&lt;/a&gt;.patch).  Adds some more detailed logging.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12689057">HIVE-6207</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12721820">HIVE-7249</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12653274" name="HIVE-7256.addendum.patch" size="5783" author="ekoifman" created="Tue, 1 Jul 2014 00:34:05 +0000"/>
                            <attachment id="12652273" name="HIVE-7256.patch" size="33086" author="alangates" created="Tue, 24 Jun 2014 21:02:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jun 2014 21:02:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400602</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wyjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7257] UDF format_number() does not work on FLOAT types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7257</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;#1 Show the table:&lt;br/&gt;
hive&amp;gt; describe ssga3; &lt;br/&gt;
OK&lt;br/&gt;
source	string	&lt;br/&gt;
test	float	&lt;br/&gt;
dt	timestamp	&lt;br/&gt;
Time taken: 0.243 seconds&lt;/p&gt;

&lt;p&gt;#2 Run format_number on double and it works:&lt;br/&gt;
hive&amp;gt; select format_number(cast(test as double),2) from ssga3;&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks is set to 0 since there&apos;s no reduce operator&lt;br/&gt;
Starting Job = job_201403131616_0009, Tracking URL = &lt;a href=&quot;http://cdh5-1:50030/jobdetails.jsp?jobid=job_201403131616_0009&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cdh5-1:50030/jobdetails.jsp?jobid=job_201403131616_0009&lt;/a&gt;&lt;br/&gt;
Kill Command = /opt/cloudera/parcels/CDH-4.6.0-1.cdh4.6.0.p0.26/lib/hadoop/bin/hadoop job -kill job_201403131616_0009&lt;br/&gt;
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 0&lt;br/&gt;
2014-03-13 17:14:53,992 Stage-1 map = 0%, reduce = 0%&lt;br/&gt;
2014-03-13 17:14:59,032 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 1.47 sec&lt;br/&gt;
2014-03-13 17:15:00,046 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 1.47 sec&lt;br/&gt;
2014-03-13 17:15:01,056 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 1.47 sec&lt;br/&gt;
2014-03-13 17:15:02,067 Stage-1 map = 100%, reduce = 100%, Cumulative CPU 1.47 sec&lt;br/&gt;
MapReduce Total cumulative CPU time: 1 seconds 470 msec&lt;br/&gt;
Ended Job = job_201403131616_0009&lt;br/&gt;
MapReduce Jobs Launched: &lt;br/&gt;
Job 0: Map: 1 Cumulative CPU: 1.47 sec HDFS Read: 299 HDFS Write: 10 SUCCESS&lt;br/&gt;
Total MapReduce CPU Time Spent: 1 seconds 470 msec&lt;br/&gt;
OK&lt;br/&gt;
1.00&lt;br/&gt;
2.00&lt;br/&gt;
Time taken: 16.563 seconds&lt;/p&gt;

&lt;p&gt;#3 Run format_number on float and it does not work&lt;br/&gt;
hive&amp;gt; select format_number(test,2) from ssga3; &lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks is set to 0 since there&apos;s no reduce operator&lt;br/&gt;
Starting Job = job_201403131616_0010, Tracking URL = &lt;a href=&quot;http://cdh5-1:50030/jobdetails.jsp?jobid=job_201403131616_0010&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cdh5-1:50030/jobdetails.jsp?jobid=job_201403131616_0010&lt;/a&gt;&lt;br/&gt;
Kill Command = /opt/cloudera/parcels/CDH-4.6.0-1.cdh4.6.0.p0.26/lib/hadoop/bin/hadoop job -kill job_201403131616_0010&lt;br/&gt;
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 0&lt;br/&gt;
2014-03-13 17:20:21,158 Stage-1 map = 0%, reduce = 0%&lt;br/&gt;
2014-03-13 17:21:00,453 Stage-1 map = 100%, reduce = 100%&lt;br/&gt;
Ended Job = job_201403131616_0010 with errors&lt;br/&gt;
Error during job, obtaining debugging information...&lt;br/&gt;
Job Tracking URL: &lt;a href=&quot;http://cdh5-1:50030/jobdetails.jsp?jobid=job_201403131616_0010&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cdh5-1:50030/jobdetails.jsp?jobid=job_201403131616_0010&lt;/a&gt;&lt;br/&gt;
Examining task ID: task_201403131616_0010_m_000002 (and more) from job job_201403131616_0010&lt;br/&gt;
Unable to retrieve URL for Hadoop Task logs. Does not contain a valid host:port authority: logicaljt&lt;br/&gt;
Task with the most failures(4):&lt;br/&gt;
Task ID:&lt;br/&gt;
task_201403131616_0010_m_000000&lt;br/&gt;
Diagnostic Messages for this Task:&lt;br/&gt;
java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;source&quot;:null,&quot;test&quot;:1.0,&quot;dt&quot;:null}
&lt;p&gt;at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:159)&lt;br/&gt;
at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:417)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:332)&lt;br/&gt;
at org.apache.hadoop.mapred.Child$4.run(Child.java:268)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1438)&lt;br/&gt;
at org.apache.hadoop.mapred.Child.main(Child.java:262)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;source&quot;:null,&quot;test&quot;:1.0,&quot;dt&quot;:null}
&lt;p&gt;at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:675)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:141)&lt;br/&gt;
..&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;br/&gt;
MapReduce Jobs Launched: &lt;br/&gt;
Job 0: Map: 1 HDFS Read: 0 HDFS Write: 0 FAIL&lt;br/&gt;
Total MapReduce CPU Time Spent: 0 msec&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722546">HIVE-7257</key>
            <summary>UDF format_number() does not work on FLOAT types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wilbur.yang">Wilbur Yang</assignee>
                                    <reporter username="wilbur.yang">Wilbur Yang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 17:40:55 +0000</created>
                <updated>Thu, 13 Nov 2014 19:44:02 +0000</updated>
                            <resolved>Thu, 3 Jul 2014 18:11:28 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14039741" author="hiveqa" created="Sat, 21 Jun 2014 09:08:11 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651501/HIVE-7257.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651501/HIVE-7257.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5668 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_date2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/538/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/538/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/538/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/538/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-538/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-538/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651501&lt;/p&gt;</comment>
                            <comment id="14041525" author="szehon" created="Tue, 24 Jun 2014 00:35:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wilbur.yang&quot; class=&quot;user-hover&quot; rel=&quot;wilbur.yang&quot;&gt;Wilbur Yang&lt;/a&gt;.  Thanks for this patch, I do have one concern. the query&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT format_number(CAST(12332.123456 AS FLOAT), 4),&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;shows a result like :&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;12,332.1230&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It doesn&apos;t look correct, unless I&apos;m missing something?  I would expect 12332.1235, like it shows in decimal.&lt;/p&gt;</comment>
                            <comment id="14041533" author="wilbur.yang" created="Tue, 24 Jun 2014 00:46:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;, thanks for the review. That particular case seems to be a quirk with floats &amp;#8211; I &lt;a href=&quot;http://ideone.com/oP4NDJ&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;tested System.out.println((float)12332.123456);&lt;/a&gt; and it prints 12332.123. I suppose the question now is whether or not we want it to behave like this.&lt;/p&gt;</comment>
                            <comment id="14041576" author="szehon" created="Tue, 24 Jun 2014 01:34:36 +0000"  >&lt;p&gt;Ah, I guess that is most bits that fit into that float.  I&apos;m ok with the change then, +1.&lt;/p&gt;</comment>
                            <comment id="14051774" author="szehon" created="Thu, 3 Jul 2014 18:11:06 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Wilbur for the contribution!&lt;/p&gt;</comment>
                            <comment id="14052216" author="lefty@hortonworks.com" created="Fri, 4 Jul 2014 07:02:42 +0000"  >&lt;p&gt;I mentioned this bug fix in the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;UDFs &amp;#8211; String Functions &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14132304" author="apivovarov" created="Fri, 12 Sep 2014 23:32:49 +0000"  >&lt;p&gt;Does format_number work for decimal(n,m)?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT format_number(CAST(12332.123456 AS decimal(32,12)), 4),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;hive 0.13.1 (hdp-2.1.3) gives me&lt;br/&gt;
FAILED: SemanticException &lt;span class=&quot;error&quot;&gt;&amp;#91;Error 10016&amp;#93;&lt;/span&gt;: Line 4:28 Argument type mismatch &apos;amount&apos;: Argument 1 of function FORMAT_NUMBER must be &quot;tinyint&quot; or &quot;smallint&quot; or &quot;int&quot; or &quot;bigint&quot; or &quot;double&quot; or &quot;float&quot;, but &quot;decimal(32,12)&quot; was found.&lt;/p&gt;</comment>
                            <comment id="14132335" author="wilbur.yang" created="Fri, 12 Sep 2014 23:58:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apivovarov&quot; class=&quot;user-hover&quot; rel=&quot;apivovarov&quot;&gt;Alexander Pivovarov&lt;/a&gt;, please see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7279&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HIVE-7279&lt;/a&gt;. Thanks&lt;/p&gt;</comment>
                            <comment id="14211082" author="thejas" created="Thu, 13 Nov 2014 19:44:02 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651501" name="HIVE-7257.1.patch" size="4595" author="wilbur.yang" created="Thu, 19 Jun 2014 21:37:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Jun 2014 09:08:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wzdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400831</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7258] Move qtest-Driver properties from pom to separate file  </title>
                <link>https://issues.apache.org/jira/browse/HIVE-7258</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12722597">HIVE-7258</key>
            <summary>Move qtest-Driver properties from pom to separate file  </summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12722397">HIVE-7254</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="szehon">Szehon Ho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 21:29:02 +0000</created>
                <updated>Wed, 25 Jun 2014 05:50:41 +0000</updated>
                            <resolved>Wed, 25 Jun 2014 05:50:41 +0000</resolved>
                                                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14041691" author="hagleitn" created="Tue, 24 Jun 2014 04:58:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; - is that what you were looking for? Can you pull the values from that file?&lt;/p&gt;</comment>
                            <comment id="14041746" author="szehon" created="Tue, 24 Jun 2014 06:07:15 +0000"  >&lt;p&gt;Yes thanks a lot, this should work.  Let&apos;s get it in and I can give it a try.  +1&lt;/p&gt;</comment>
                            <comment id="14042014" author="hiveqa" created="Tue, 24 Jun 2014 11:57:32 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652133/HIVE-7258.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652133/HIVE-7258.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5654 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample8
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/574/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/574/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/574/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/574/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-574/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-574/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652133&lt;/p&gt;</comment>
                            <comment id="14043070" author="hagleitn" created="Wed, 25 Jun 2014 05:50:41 +0000"  >&lt;p&gt;Committed to trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12652133" name="HIVE-7258.1.patch" size="12156" author="hagleitn" created="Tue, 24 Jun 2014 04:58:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jun 2014 04:58:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wzo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7259] Transaction manager fails when Oracle used as metastore RDBMS</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7259</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The schema specification for the transaction tables creates NUMBER(10) columns for longs in the Oracle schema.  However, these should be NUMBER(19).  As it is the JDBC calls to get the value as a long fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722616">HIVE-7259</key>
            <summary>Transaction manager fails when Oracle used as metastore RDBMS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="alangates">Alan Gates</assignee>
                                    <reporter username="alangates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 22:06:28 +0000</created>
                <updated>Thu, 19 Jun 2014 22:13:56 +0000</updated>
                            <resolved>Thu, 19 Jun 2014 22:13:56 +0000</resolved>
                                    <version>0.13.0</version>
                                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12716252">HIVE-7118</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wzs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7260] between operator for vectorization should support non-constant expressions as inputs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7260</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Follow-up jira for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7166&quot; title=&quot;Vectorization with UDFs returns incorrect results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7166&quot;&gt;HIVE-7166&lt;/a&gt;. &lt;br/&gt;
Eg query where vectorization is disabled:&lt;br/&gt;
select x from T where T.y between T.a and T.d;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12722634">HIVE-7260</key>
            <summary>between operator for vectorization should support non-constant expressions as inputs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 23:12:45 +0000</created>
                <updated>Wed, 4 May 2016 08:16:18 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14088594" author="hsubramaniyan" created="Thu, 7 Aug 2014 01:10:26 +0000"  >&lt;p&gt;Support for between columns in vectorization&lt;/p&gt;</comment>
                            <comment id="14088633" author="hsubramaniyan" created="Thu, 7 Aug 2014 01:30:30 +0000"  >&lt;p&gt;rb link : &lt;a href=&quot;https://reviews.apache.org/r/24438/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/24438/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14089120" author="hiveqa" created="Thu, 7 Aug 2014 10:45:15 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12660295/HIVE-7260.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12660295/HIVE-7260.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 5889 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hadoop.hive.ql.TestDDLWithRemoteMetastoreSecondNamenode.testCreateTableWithIndexAndPartitionsNonDefaultNameNode
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/205/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/205/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/205/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/205/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-205/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-205/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12660295&lt;/p&gt;</comment>
                            <comment id="14091853" author="hsubramaniyan" created="Sat, 9 Aug 2014 18:54:58 +0000"  >&lt;p&gt;cc-ing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jnp&quot; class=&quot;user-hover&quot; rel=&quot;jnp&quot;&gt;Jitendra Nath Pandey&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehans&quot; class=&quot;user-hover&quot; rel=&quot;ehans&quot;&gt;Eric Hanson&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; for review. Given that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7166&quot; title=&quot;Vectorization with UDFs returns incorrect results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7166&quot;&gt;HIVE-7166&lt;/a&gt; is not commited, without either of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7166&quot; title=&quot;Vectorization with UDFs returns incorrect results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7166&quot;&gt;HIVE-7166&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7260&quot; title=&quot;between operator for vectorization should support non-constant expressions as inputs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7260&quot;&gt;HIVE-7260&lt;/a&gt;, between operator with vectorization in hive is broken.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14378532" author="hsubramaniyan" created="Tue, 24 Mar 2015 20:30:22 +0000"  >&lt;p&gt;cc-ing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;Matt McCline&lt;/a&gt; for this issue. Follow-up of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7166&quot; title=&quot;Vectorization with UDFs returns incorrect results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7166&quot;&gt;HIVE-7166&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="15270304" author="hsubramaniyan" created="Wed, 4 May 2016 08:16:18 +0000"  >&lt;p&gt;I am unassigning this jira from myself since there has been no response from anyone and I am no longer 100% up-to-date with vectorization code path.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12660295" name="HIVE-7260.1.patch" size="96119" author="hsubramaniyan" created="Thu, 7 Aug 2014 01:30:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Aug 2014 10:45:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400825</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wzvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7261] Calculation works wrong when hive.groupby.skewindata  is true and count(*) count(distinct) group by work simultaneously </title>
                <link>https://issues.apache.org/jira/browse/HIVE-7261</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&#12304;Phenomenon&#12305;&lt;br/&gt;
The query results are not the same as when hive.groupby.skewindata was setted to true and false.&lt;/p&gt;

&lt;p&gt;&#12304;my question&#12305;&lt;br/&gt;
I want to calculate the count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and count(distinct) simultaneously ,otherwise it will cost 2 MR job to calculate. But when i set the hive.groupby.skewindata to be true, the count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; result shoud not be same as the count(distinct) , but the real result is same, so it&apos;s wrong. And I find the difference of its query plan which the &quot;Reduce Operator Tree-&amp;gt;Group By Operator-&amp;gt;mode&quot;  is mergepartial when skew is set to false and &lt;br/&gt;
&quot;Reduce Operator Tree-&amp;gt;Group By Operator-&amp;gt;mode&quot;  is complete when skew is set to true. So i&apos;m confused the root cause of the error.&lt;/p&gt;

&lt;p&gt;&#12304;sql&#12305;&lt;br/&gt;
select ds,appid,eventname,active,&lt;font color=&quot;red&quot;&gt;count(distinct(guid)), count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/font&gt;from eventinfo_tmp where ds=&apos;20140612&apos; and length(eventname)&amp;lt;1000 and eventname like &apos;%alibaba%&apos; group by ds,appid,eventname,active;&lt;/p&gt;

&lt;p&gt;&#12304;the others hive configaration exclude hive.groupby.skewindata&#12305;&lt;br/&gt;
hive.exec.compress.output=true&lt;br/&gt;
hive.exec.compress.intermediate=true&lt;br/&gt;
io.seqfile.compression.type=BLOCK&lt;br/&gt;
mapred.output.compression.codec=org.apache.hadoop.io.compress.GzipCodec&lt;br/&gt;
hive.map.aggr=true&lt;br/&gt;
hive.stats.autogather=false&lt;br/&gt;
hive.exec.scratchdir=/user/complat/tmp&lt;br/&gt;
mapred.job.queue.name=complat&lt;br/&gt;
hive.exec.mode.local.auto=false&lt;br/&gt;
hive.exec.mode.local.auto.inputbytes.max=500&lt;br/&gt;
hive.exec.mode.local.auto.tasks.max=10&lt;br/&gt;
hive.exec.mode.local.auto.input.files.max=1000&lt;br/&gt;
hive.exec.dynamic.partition=true&lt;br/&gt;
hive.exec.dynamic.partition.mode=nonstrict&lt;br/&gt;
hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat&lt;br/&gt;
mapred.max.split.size=100000000&lt;br/&gt;
mapred.min.split.size.per.node=100000000&lt;br/&gt;
mapred.min.split.size.per.rack=100000000&lt;/p&gt;

&lt;p&gt;&#12304;result&#12305;&lt;br/&gt;
when hive.groupby.skewindata=true  the result is :&lt;br/&gt;
20140612	8	alibaba	1	&lt;font color=&quot;red&quot;&gt;87	147&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;when it=false the result is : &lt;br/&gt;
20140612	8	alibaba	1	&lt;font color=&quot;red&quot;&gt;87	87&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#12304;query plan&#12305;&lt;br/&gt;
ABSTRACT SYNTAX TREE:&lt;br/&gt;
  (TOK_QUERY (TOK_FROM (TOK_TABREF (TOK_TABNAME eventinfo_tmp))) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (TOK_TABLE_OR_COL ds)) (TOK_SELEXPR (TOK_TABLE_OR_COL appid)) (TOK_SELEXPR (TOK_TABLE_OR_COL eventname)) (TOK_SELEXPR (TOK_TABLE_OR_COL active)) (TOK_SELEXPR (TOK_FUNCTIONDI count (TOK_TABLE_OR_COL guid))) (TOK_SELEXPR (TOK_FUNCTIONSTAR count))) (TOK_WHERE (and (and (= (TOK_TABLE_OR_COL ds) &apos;20140612&apos;) (&amp;lt; (TOK_FUNCTION length (TOK_TABLE_OR_COL eventname)) 1000)) (like (TOK_TABLE_OR_COL eventname) &apos;%tvvideo_setting%&apos;))) (TOK_GROUPBY (TOK_TABLE_OR_COL ds) (TOK_TABLE_OR_COL appid) (TOK_TABLE_OR_COL eventname) (TOK_TABLE_OR_COL active))))&lt;/p&gt;

&lt;p&gt;STAGE DEPENDENCIES:&lt;br/&gt;
  Stage-1 is a root stage&lt;br/&gt;
  Stage-0 is a root stage&lt;/p&gt;

&lt;p&gt;STAGE PLANS:&lt;br/&gt;
  Stage: Stage-1&lt;br/&gt;
    Map Reduce&lt;br/&gt;
      Alias -&amp;gt; Map Operator Tree:&lt;br/&gt;
        eventinfo_tmp &lt;br/&gt;
          TableScan&lt;br/&gt;
            alias: eventinfo_tmp&lt;br/&gt;
            Filter Operator&lt;br/&gt;
              predicate:&lt;br/&gt;
                  expr: ((length(eventname) &amp;lt; 1000) and (eventname like &apos;%tvvideo_setting%&apos;))&lt;br/&gt;
                  type: boolean&lt;br/&gt;
              Select Operator&lt;br/&gt;
                expressions:&lt;br/&gt;
                      expr: ds&lt;br/&gt;
                      type: string&lt;br/&gt;
                      expr: appid&lt;br/&gt;
                      type: string&lt;br/&gt;
                      expr: eventname&lt;br/&gt;
                      type: string&lt;br/&gt;
                      expr: active&lt;br/&gt;
                      type: int&lt;br/&gt;
                      expr: guid&lt;br/&gt;
                      type: string&lt;br/&gt;
                outputColumnNames: ds, appid, eventname, active, guid&lt;br/&gt;
                Group By Operator&lt;br/&gt;
                  aggregations:&lt;br/&gt;
                        expr: count(DISTINCT guid)&lt;br/&gt;
                        expr: count()&lt;br/&gt;
                  bucketGroup: false&lt;br/&gt;
                  keys:&lt;br/&gt;
                        expr: ds&lt;br/&gt;
                        type: string&lt;br/&gt;
                        expr: appid&lt;br/&gt;
                        type: string&lt;br/&gt;
                        expr: eventname&lt;br/&gt;
                        type: string&lt;br/&gt;
                        expr: active&lt;br/&gt;
                        type: int&lt;br/&gt;
                        expr: guid&lt;br/&gt;
                        type: string&lt;br/&gt;
                  mode: hash&lt;br/&gt;
                  outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5, _col6&lt;br/&gt;
                  Reduce Output Operator&lt;br/&gt;
                    key expressions:&lt;br/&gt;
                          expr: _col0&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col1&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col2&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col3&lt;br/&gt;
                          type: int&lt;br/&gt;
                          expr: _col4&lt;br/&gt;
                          type: string&lt;br/&gt;
                    sort order: +++++&lt;br/&gt;
                    Map-reduce partition columns:&lt;br/&gt;
                          expr: _col0&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col1&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col2&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col3&lt;br/&gt;
                          type: int&lt;br/&gt;
                    tag: -1&lt;br/&gt;
                    value expressions:&lt;br/&gt;
                          expr: _col5&lt;br/&gt;
                          type: bigint&lt;br/&gt;
                          expr: _col6&lt;br/&gt;
                          type: bigint&lt;br/&gt;
      Reduce Operator Tree:&lt;br/&gt;
        Group By Operator&lt;br/&gt;
          aggregations:&lt;br/&gt;
                expr: count(DISTINCT KEY._col4:0._col0)&lt;br/&gt;
                expr: count(VALUE._col1)&lt;br/&gt;
          bucketGroup: false&lt;br/&gt;
          keys:&lt;br/&gt;
                expr: KEY._col0&lt;br/&gt;
                type: string&lt;br/&gt;
                expr: KEY._col1&lt;br/&gt;
                type: string&lt;br/&gt;
                expr: KEY._col2&lt;br/&gt;
                type: string&lt;br/&gt;
                expr: KEY._col3&lt;br/&gt;
                type: int&lt;br/&gt;
          mode: &lt;font color=&quot;red&quot;&gt;mergepartial&lt;/font&gt;&lt;br/&gt;
          outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5&lt;br/&gt;
          Select Operator&lt;br/&gt;
            expressions:&lt;br/&gt;
                  expr: _col0&lt;br/&gt;
                  type: string&lt;br/&gt;
                  expr: _col1&lt;br/&gt;
                  type: string&lt;br/&gt;
                  expr: _col2&lt;br/&gt;
                  type: string&lt;br/&gt;
                  expr: _col3&lt;br/&gt;
                  type: int&lt;br/&gt;
                  expr: _col4&lt;br/&gt;
                  type: bigint&lt;br/&gt;
                  expr: _col5&lt;br/&gt;
                  type: bigint&lt;br/&gt;
            outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5&lt;br/&gt;
            File Output Operator&lt;br/&gt;
              compressed: true&lt;br/&gt;
              GlobalTableId: 0&lt;br/&gt;
              table:&lt;br/&gt;
                  input format: org.apache.hadoop.mapred.TextInputFormat&lt;br/&gt;
                  output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&lt;/p&gt;

&lt;p&gt;  Stage: Stage-0&lt;br/&gt;
    Fetch Operator&lt;br/&gt;
      limit: -1&lt;/p&gt;


&lt;p&gt;ABSTRACT SYNTAX TREE:&lt;br/&gt;
  (TOK_QUERY (TOK_FROM (TOK_TABREF (TOK_TABNAME eventinfo_tmp))) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR (TOK_TABLE_OR_COL ds)) (TOK_SELEXPR (TOK_TABLE_OR_COL appid)) (TOK_SELEXPR (TOK_TABLE_OR_COL eventname)) (TOK_SELEXPR (TOK_TABLE_OR_COL active)) (TOK_SELEXPR (TOK_FUNCTIONDI count (TOK_TABLE_OR_COL guid))) (TOK_SELEXPR (TOK_FUNCTIONSTAR count))) (TOK_WHERE (and (and (= (TOK_TABLE_OR_COL ds) &apos;20140612&apos;) (&amp;lt; (TOK_FUNCTION length (TOK_TABLE_OR_COL eventname)) 1000)) (like (TOK_TABLE_OR_COL eventname) &apos;%tvvideo_setting%&apos;))) (TOK_GROUPBY (TOK_TABLE_OR_COL ds) (TOK_TABLE_OR_COL appid) (TOK_TABLE_OR_COL eventname) (TOK_TABLE_OR_COL active))))&lt;/p&gt;

&lt;p&gt;STAGE DEPENDENCIES:&lt;br/&gt;
  Stage-1 is a root stage&lt;br/&gt;
  Stage-0 is a root stage&lt;/p&gt;

&lt;p&gt;STAGE PLANS:&lt;br/&gt;
  Stage: Stage-1&lt;br/&gt;
    Map Reduce&lt;br/&gt;
      Alias -&amp;gt; Map Operator Tree:&lt;br/&gt;
        eventinfo_tmp &lt;br/&gt;
          TableScan&lt;br/&gt;
            alias: eventinfo_tmp&lt;br/&gt;
            Filter Operator&lt;br/&gt;
              predicate:&lt;br/&gt;
                  expr: ((length(eventname) &amp;lt; 1000) and (eventname like &apos;%tvvideo_setting%&apos;))&lt;br/&gt;
                  type: boolean&lt;br/&gt;
              Select Operator&lt;br/&gt;
                expressions:&lt;br/&gt;
                      expr: ds&lt;br/&gt;
                      type: string&lt;br/&gt;
                      expr: appid&lt;br/&gt;
                      type: string&lt;br/&gt;
                      expr: eventname&lt;br/&gt;
                      type: string&lt;br/&gt;
                      expr: active&lt;br/&gt;
                      type: int&lt;br/&gt;
                      expr: guid&lt;br/&gt;
                      type: string&lt;br/&gt;
                outputColumnNames: ds, appid, eventname, active, guid&lt;br/&gt;
                Group By Operator&lt;br/&gt;
                  aggregations:&lt;br/&gt;
                        expr: count(DISTINCT guid)&lt;br/&gt;
                        expr: count()&lt;br/&gt;
                  bucketGroup: false&lt;br/&gt;
                  keys:&lt;br/&gt;
                        expr: ds&lt;br/&gt;
                        type: string&lt;br/&gt;
                        expr: appid&lt;br/&gt;
                        type: string&lt;br/&gt;
                        expr: eventname&lt;br/&gt;
                        type: string&lt;br/&gt;
                        expr: active&lt;br/&gt;
                        type: int&lt;br/&gt;
                        expr: guid&lt;br/&gt;
                        type: string&lt;br/&gt;
                  mode: hash&lt;br/&gt;
                  outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5, _col6&lt;br/&gt;
                  Reduce Output Operator&lt;br/&gt;
                    key expressions:&lt;br/&gt;
                          expr: _col0&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col1&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col2&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col3&lt;br/&gt;
                          type: int&lt;br/&gt;
                          expr: _col4&lt;br/&gt;
                          type: string&lt;br/&gt;
                    sort order: +++++&lt;br/&gt;
                    Map-reduce partition columns:&lt;br/&gt;
                          expr: _col0&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col1&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col2&lt;br/&gt;
                          type: string&lt;br/&gt;
                          expr: _col3&lt;br/&gt;
                          type: int&lt;br/&gt;
                    tag: -1&lt;br/&gt;
                    value expressions:&lt;br/&gt;
                          expr: _col5&lt;br/&gt;
                          type: bigint&lt;br/&gt;
                          expr: _col6&lt;br/&gt;
                          type: bigint&lt;br/&gt;
      Reduce Operator Tree:&lt;br/&gt;
        Group By Operator&lt;br/&gt;
          aggregations:&lt;br/&gt;
                expr: count(DISTINCT KEY._col4:0._col0)&lt;br/&gt;
                expr: count(VALUE._col1)&lt;br/&gt;
          bucketGroup: false&lt;br/&gt;
          keys:&lt;br/&gt;
                expr: KEY._col0&lt;br/&gt;
                type: string&lt;br/&gt;
                expr: KEY._col1&lt;br/&gt;
                type: string&lt;br/&gt;
                expr: KEY._col2&lt;br/&gt;
                type: string&lt;br/&gt;
                expr: KEY._col3&lt;br/&gt;
                type: int&lt;br/&gt;
          mode: &lt;font color=&quot;red&quot;&gt;complete&lt;/font&gt;&lt;br/&gt;
          outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5&lt;br/&gt;
          Select Operator&lt;br/&gt;
            expressions:&lt;br/&gt;
                  expr: _col0&lt;br/&gt;
                  type: string&lt;br/&gt;
                  expr: _col1&lt;br/&gt;
                  type: string&lt;br/&gt;
                  expr: _col2&lt;br/&gt;
                  type: string&lt;br/&gt;
                  expr: _col3&lt;br/&gt;
                  type: int&lt;br/&gt;
                  expr: _col4&lt;br/&gt;
                  type: bigint&lt;br/&gt;
                  expr: _col5&lt;br/&gt;
                  type: bigint&lt;br/&gt;
            outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5&lt;br/&gt;
            File Output Operator&lt;br/&gt;
              compressed: true&lt;br/&gt;
              GlobalTableId: 0&lt;br/&gt;
              table:&lt;br/&gt;
                  input format: org.apache.hadoop.mapred.TextInputFormat&lt;br/&gt;
                  output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&lt;/p&gt;

&lt;p&gt;  Stage: Stage-0&lt;br/&gt;
    Fetch Operator&lt;br/&gt;
      limit: -1&lt;/p&gt;

</description>
                <environment>&lt;p&gt;hive0.12   hadoop1.0.4&lt;/p&gt;</environment>
        <key id="12722689">HIVE-7261</key>
            <summary>Calculation works wrong when hive.groupby.skewindata  is true and count(*) count(distinct) group by work simultaneously </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chris_chen">Chris Chen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 03:22:11 +0000</created>
                <updated>Wed, 17 Jun 2015 02:24:16 +0000</updated>
                            <resolved>Wed, 17 Jun 2015 02:24:16 +0000</resolved>
                                    <version>0.12.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14321878" author="chengbing.liu" created="Sun, 15 Feb 2015 08:47:21 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chris_chen&quot; class=&quot;user-hover&quot; rel=&quot;chris_chen&quot;&gt;Chris Chen&lt;/a&gt;, have you figured this problem out? We also encountered it.&lt;/p&gt;

&lt;p&gt;To simplify, this query goes wrong when hive.groupby.skewindata=true:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select c_nationkey,count(*),count(distinct c_mktsegment) from customer group by c_nationkey;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will create only one job, and the GroupByOperator in reduce has mode &quot;complete&quot;, which should be &quot;mergepartial&quot;.&lt;/p&gt;</comment>
                            <comment id="14589193" author="chengbing.liu" created="Wed, 17 Jun 2015 02:23:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10971&quot; title=&quot;count(*) with count(distinct) gives wrong results when hive.groupby.skewindata=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10971&quot;&gt;&lt;del&gt;HIVE-10971&lt;/del&gt;&lt;/a&gt; solved the same problem, mark as a duplicate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12836488">HIVE-10971</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 15 Feb 2015 08:47:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x07j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7262] Partitioned Table Function (PTF) query fails on ORC table when attempting to vectorize</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7262</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>
&lt;p&gt;In ptf.q, create the part table with STORED AS ORC and SET hive.vectorized.execution.enabled=true;&lt;/p&gt;

&lt;p&gt;Queries fail to find BLOCKOFFSET virtual column during vectorization and suffers an exception.&lt;/p&gt;

&lt;p&gt;ERROR vector.VectorizationContext (VectorizationContext.java:getInputColumnIndex(186)) - The column BLOCK_&lt;em&gt;OFFSET&lt;/em&gt;&lt;em&gt;INSIDE&lt;/em&gt;_FILE is not in the vectorization context column map.&lt;/p&gt;

&lt;p&gt;Jitendra pointed to the routine that returns the VectorizationContext in Vectorize.java needing to add virtual columns to the map, too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722691">HIVE-7262</key>
            <summary>Partitioned Table Function (PTF) query fails on ORC table when attempting to vectorize</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12724622">HIVE-7318</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mmccline">Matt McCline</assignee>
                                    <reporter username="mmccline">Matt McCline</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 03:42:17 +0000</created>
                <updated>Thu, 13 Nov 2014 19:44:23 +0000</updated>
                            <resolved>Tue, 15 Jul 2014 23:10:01 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14048142" author="mmccline" created="Mon, 30 Jun 2014 20:51:15 +0000"  >
&lt;p&gt;In talking to Harish, the issue is we should not try to vectorize &quot;pure&quot; or &quot;true&apos; table functions like NOOP.&lt;/p&gt;

&lt;p&gt;We should only vectorize PTF when it is strictly for windowing only.  Then, the automatically added virtual columns like FILENAME and BLOCKOFFSET will get pruned away very early and not be an issue.&lt;/p&gt;

&lt;p&gt;Separately, there is another issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5570&quot; title=&quot;Handle virtual columns and schema evolution in vector code path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5570&quot;&gt;&lt;del&gt;HIVE-5570&lt;/del&gt;&lt;/a&gt; Handle virtual columns and schema evolution in vector code path when someone actually want one of those virtual columns.&lt;/p&gt;</comment>
                            <comment id="14048314" author="mmccline" created="Mon, 30 Jun 2014 23:39:39 +0000"  >&lt;p&gt;&lt;br/&gt;
The change here is to detect virtual columns and not vectorize those MapWork (and soon ReduceWork) tasks.&lt;/p&gt;</comment>
                            <comment id="14048411" author="hiveqa" created="Tue, 1 Jul 2014 01:45:08 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12653264/HIVE-7262.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12653264/HIVE-7262.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5672 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_ptf
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/634/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/634/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/634/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/634/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-634/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-634/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12653264&lt;/p&gt;</comment>
                            <comment id="14049519" author="hiveqa" created="Wed, 2 Jul 2014 01:46:58 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12653480/HIVE-7262.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12653480/HIVE-7262.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5672 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_schemeAuthority
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/656/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/656/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/656/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/656/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-656/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-656/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12653480&lt;/p&gt;</comment>
                            <comment id="14057078" author="ehans" created="Thu, 10 Jul 2014 03:12:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;Matt McCline&lt;/a&gt; put a code review at: &lt;a href=&quot;https://reviews.apache.org/r/23186/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/23186/&lt;/a&gt;. Matt, if you could attach this to your JIRAs in the future, that&apos;d be great.&lt;/p&gt;</comment>
                            <comment id="14057085" author="ehans" created="Thu, 10 Jul 2014 03:19:25 +0000"  >&lt;p&gt;Matt, can you upload your patch to your ReviewBoard page? I didn&apos;t see a &quot;View Diff&quot; button. I see you did include a link above &amp;#8211; sorry I missed that.&lt;/p&gt;</comment>
                            <comment id="14061269" author="mmccline" created="Mon, 14 Jul 2014 21:20:11 +0000"  >&lt;p&gt;Discarded original review because it referenced wrong repository.&lt;/p&gt;

&lt;p&gt;New review is &lt;a href=&quot;https://reviews.apache.org/r/23459/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/23459/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14061365" author="jnp" created="Mon, 14 Jul 2014 22:34:26 +0000"  >&lt;p&gt;+1, lgtm&lt;/p&gt;</comment>
                            <comment id="14061373" author="mmccline" created="Mon, 14 Jul 2014 22:40:43 +0000"  >&lt;p&gt;Note that vectorized_ptf.q is a copy of ptf.q with the table changed to be ORC format.&lt;/p&gt;</comment>
                            <comment id="14061478" author="hiveqa" created="Tue, 15 Jul 2014 00:31:20 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12655619/HIVE-7262.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12655619/HIVE-7262.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5719 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_temp_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/782/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/782/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/782/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/782/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-782/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-782/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12655619&lt;/p&gt;</comment>
                            <comment id="14061535" author="mmccline" created="Tue, 15 Jul 2014 01:49:41 +0000"  >&lt;p&gt;These failures are unrelated to this change.&lt;/p&gt;</comment>
                            <comment id="14062829" author="ashutoshc" created="Tue, 15 Jul 2014 23:10:01 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Matt!&lt;/p&gt;</comment>
                            <comment id="14211154" author="thejas" created="Thu, 13 Nov 2014 19:44:23 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12653264" name="HIVE-7262.1.patch" size="826291" author="mmccline" created="Mon, 30 Jun 2014 23:40:06 +0000"/>
                            <attachment id="12653480" name="HIVE-7262.2.patch" size="826433" author="mmccline" created="Tue, 1 Jul 2014 22:06:24 +0000"/>
                            <attachment id="12655619" name="HIVE-7262.3.patch" size="831940" author="mmccline" created="Mon, 14 Jul 2014 21:07:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Jul 2014 01:45:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x07z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7263] Missing fixes from review of parquet-timestamp</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7263</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12722705">HIVE-7263</key>
            <summary>Missing fixes from review of parquet-timestamp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="szehon">Szehon Ho</assignee>
                                    <reporter username="szehon">Szehon Ho</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 05:34:12 +0000</created>
                <updated>Thu, 13 Nov 2014 19:43:10 +0000</updated>
                            <resolved>Sun, 22 Jun 2014 16:56:16 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14038502" author="szehon" created="Fri, 20 Jun 2014 06:03:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt;  I&apos;m sorry , when I merged with the commit, I saw I made a mistake.&lt;/p&gt;

&lt;p&gt;There had been a review comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6394&quot; title=&quot;Implement Timestmap in ParquetSerde&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6394&quot;&gt;&lt;del&gt;HIVE-6394&lt;/del&gt;&lt;/a&gt; to not use example parquet class, which is a suggestion of how to implement timestamp.  It was trivial non-functional change, just to write that in Hive code base.  I had actually addressed it an intermed patch, but the final patch did not carry that on.  Putting that back, sorry again about that.&lt;/p&gt;</comment>
                            <comment id="14039028" author="brocknoland" created="Fri, 20 Jun 2014 16:57:37 +0000"  >&lt;p&gt;No worries! +1 pending tests&lt;/p&gt;</comment>
                            <comment id="14039913" author="hiveqa" created="Sat, 21 Jun 2014 18:23:13 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651625/HIVE-7263.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651625/HIVE-7263.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 5653 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_sortmerge_mapjoin_mismatch_1
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/541/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/541/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/541/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/541/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-541/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-541/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651625&lt;/p&gt;</comment>
                            <comment id="14040174" author="brocknoland" created="Sun, 22 Jun 2014 16:56:16 +0000"  >&lt;p&gt;Thank you for your contribution! I have committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14210909" author="thejas" created="Thu, 13 Nov 2014 19:43:10 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12694054">HIVE-6394</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651625" name="HIVE-7263.patch" size="12874" author="szehon" created="Fri, 20 Jun 2014 06:03:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Jun 2014 16:57:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x0b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400981</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7264] TPCDS Query 78 throws NPE when Vectorization is turned on</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7264</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I get the same identical stack traceback found in &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-975&quot; title=&quot;Query-92  tpcds throws NPE with tez trunk version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-975&quot;&gt;&lt;del&gt;TEZ-975&lt;/del&gt;&lt;/a&gt; running TPC-DS query78 with vectorization turned while running on HDP 2.1 / Hive 0.13/Tez.&lt;br/&gt;
The HDP 2.1 release notes state that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6742&quot; title=&quot;Tez Outputs need to be started before accessing the writer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6742&quot;&gt;&lt;del&gt;HIVE-6742&lt;/del&gt;&lt;/a&gt; was fixed (and &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-975&quot; title=&quot;Query-92  tpcds throws NPE with tez trunk version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-975&quot;&gt;&lt;del&gt;TEZ-975&lt;/del&gt;&lt;/a&gt; was closed as fixed/duplicate)&lt;/p&gt;

&lt;p&gt;When I turn off vectorization and the query completes. &lt;/p&gt;</description>
                <environment>&lt;p&gt;HDP 2.1 Hive 0.13 / Tez &lt;/p&gt;</environment>
        <key id="12722771">HIVE-7264</key>
            <summary>TPCDS Query 78 throws NPE when Vectorization is turned on</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmoore247">Douglas Moore</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 13:14:52 +0000</created>
                <updated>Fri, 20 Jun 2014 15:52:02 +0000</updated>
                                            <version>0.13.0</version>
                    <version>0.13.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14038936" author="hitesh" created="Fri, 20 Jun 2014 15:51:36 +0000"  >&lt;p&gt;Moving this jira to the Hive project. &lt;/p&gt;</comment>
                            <comment id="14038937" author="hitesh" created="Fri, 20 Jun 2014 15:52:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;Vikram Dixit K&lt;/a&gt; Care to take a look?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Jun 2014 15:51:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x0ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7265] BINARY columns use BytesWritable::getBytes() without ::getLength()</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7265</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The Text conversion for BINARY columns does &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BINARY:
        t.set(((BinaryObjectInspector) inputOI).getPrimitiveWritableObject(input).getBytes());
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; t;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This omission was noticed while investigating a different String related bug, in a list of functions which call getBytes() without calling getSize/getLength().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722833">HIVE-7265</key>
            <summary>BINARY columns use BytesWritable::getBytes() without ::getLength()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="gopalv">Gopal V</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 17:38:30 +0000</created>
                <updated>Thu, 13 Nov 2014 19:40:09 +0000</updated>
                            <resolved>Mon, 23 Jun 2014 09:56:01 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14040379" author="hiveqa" created="Mon, 23 Jun 2014 03:31:15 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651905/HIVE-7265.1.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651905/HIVE-7265.1.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_decimal_10_0
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.hcatalog.streaming.TestStreaming.testEndpointConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/553/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/553/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/553/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/553/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-553/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-553/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651905&lt;/p&gt;</comment>
                            <comment id="14040560" author="ashutoshc" created="Mon, 23 Jun 2014 09:25:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14040585" author="ashutoshc" created="Mon, 23 Jun 2014 09:56:01 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="14210305" author="thejas" created="Thu, 13 Nov 2014 19:40:09 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651905" name="HIVE-7265.1.patch.txt" size="1550" author="navis" created="Mon, 23 Jun 2014 00:29:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jun 2014 03:31:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x12n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401105</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7266] Optimized HashTable with vectorized map-joins results in String columns extending</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7266</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following query returns different results when both vectorized mapjoin and the new optimized hashtable are enabled.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; set hive.vectorized.execution.enabled=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
hive&amp;gt; select s_suppkey, n_name from supplier, nation where s_nationkey = n_nationkey limit 25;
...
316869  JAPAN
1636869 RUSSIA
1096869 IRAN
7236869 RUSSIA
2276869 INDIA
8516869 ARGENTINA
2636869 MOZAMBIQUE
3836869 ROMANIA
2616869 FRANCE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But when vectorization is enabled, the results are &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;316869  JAPAN
1636869 RUSSIA
1096869 IRANIA
7236869 RUSSIA
2276869 INDIAA
8516869 ARGENTINA
2636869 MOZAMBIQUE
3836869 ROMANIAQUE
2616869 FRANCEAQUE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it works correctly with vectorization when the new optimized map-join hashtable is disabled &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; set hive.vectorized.execution.enabled=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;                                             
hive&amp;gt; set hive.mapjoin.optimized.hashtable=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;                                             
hive&amp;gt; select s_suppkey, n_name from supplier, nation where s_nationkey = n_nationkey limit 25;

316869  JAPAN
1636869 RUSSIA
1096869 IRAN
7236869 RUSSIA
2276869 INDIA
8516869 ARGENTINA
2636869 MOZAMBIQUE
3836869 ROMANIA
2616869 FRANCE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12722836">HIVE-7266</key>
            <summary>Optimized HashTable with vectorized map-joins results in String columns extending</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="gopalv">Gopal V</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 17:49:27 +0000</created>
                <updated>Wed, 30 Sep 2015 21:31:22 +0000</updated>
                            <resolved>Thu, 24 Jul 2014 22:50:49 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Tez</component>
                    <component>Vectorization</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14039509" author="ehans" created="Fri, 20 Jun 2014 23:06:37 +0000"  >&lt;p&gt;This looks like it might be related to using setRef() in BytesColumnVector whe setVal() should be used. That is something to look into.&lt;/p&gt;</comment>
                            <comment id="14042330" author="ehans" created="Tue, 24 Jun 2014 16:35:25 +0000"  >&lt;p&gt;Also, I recall in a past an error that looked similar to this, which I think was related to incorrect column re-use within batches. The code for that was in VectorizationContext.&lt;/p&gt;</comment>
                            <comment id="14072397" author="sershe" created="Wed, 23 Jul 2014 21:43:32 +0000"  >&lt;p&gt;Assigner doesn&apos;t take into account length, so when the object is reused it gets the maximum length previously set. &lt;/p&gt;</comment>
                            <comment id="14072399" author="sershe" created="Wed, 23 Jul 2014 21:44:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;Matt McCline&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jnp&quot; class=&quot;user-hover&quot; rel=&quot;jnp&quot;&gt;Jitendra Nath Pandey&lt;/a&gt; can you take a look?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt; fyi&lt;/p&gt;</comment>
                            <comment id="14072457" author="mmccline" created="Wed, 23 Jul 2014 22:15:09 +0000"  >&lt;p&gt;Fix looks good.  Thanks for finding the problem!&lt;/p&gt;

&lt;p&gt;(contributor) +1&lt;/p&gt;</comment>
                            <comment id="14072478" author="jnp" created="Wed, 23 Jul 2014 22:38:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14072879" author="hiveqa" created="Thu, 24 Jul 2014 06:21:31 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12657445/HIVE-7266.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12657445/HIVE-7266.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 5756 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/30/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/30/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/30/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/30/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-30/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-30/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12657445&lt;/p&gt;</comment>
                            <comment id="14073611" author="sershe" created="Thu, 24 Jul 2014 20:32:15 +0000"  >&lt;p&gt;I don&apos;t think test failures are related. Will commit soon.&lt;/p&gt;</comment>
                            <comment id="14073786" author="sershe" created="Thu, 24 Jul 2014 22:50:49 +0000"  >&lt;p&gt;committed to trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12657445" name="HIVE-7266.patch" size="1225" author="sershe" created="Wed, 23 Jul 2014 21:43:32 +0000"/>
                            <attachment id="12651700" name="hive-7266-small-test.tgz" size="6691" author="gopalv" created="Fri, 20 Jun 2014 18:01:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Jun 2014 23:06:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x13b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7267] can not trigger unit tests by command `mvn test -Phadoop-2&apos;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7267</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;1. download hive 0.13.1&lt;br/&gt;
2. decompress and unpack the tarball&lt;br/&gt;
3. change the directory to hive 0.13.1&lt;br/&gt;
4. run `mvn clean install -DskipTests -Phadoop-2&apos;&lt;br/&gt;
5. run `mvn test -Phadoop-2&apos;&lt;/p&gt;

&lt;p&gt;Could not find any unit tests&lt;/p&gt;

&lt;p&gt;The link of official doc: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ#HiveDeveloperFAQ-HowdoIrunalloftheunittests?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ#HiveDeveloperFAQ-HowdoIrunalloftheunittests?&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722837">HIVE-7267</key>
            <summary>can not trigger unit tests by command `mvn test -Phadoop-2&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="in-chief">Xiaoshuang LU</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 17:54:16 +0000</created>
                <updated>Thu, 7 Aug 2014 01:42:45 +0000</updated>
                                            <version>0.13.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14088641" author="tfriedr" created="Thu, 7 Aug 2014 01:42:45 +0000"  >&lt;p&gt;This is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7104&quot; title=&quot;Unit tests are disabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7104&quot;&gt;&lt;del&gt;HIVE-7104&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7104&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-7104&lt;/a&gt;. &lt;br/&gt;
The issue was introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7067&quot; title=&quot;Min() and Max() on Timestamp and Date columns for ORC returns wrong results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7067&quot;&gt;&lt;del&gt;HIVE-7067&lt;/del&gt;&lt;/a&gt; and was fixed in trunk with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7104&quot; title=&quot;Unit tests are disabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7104&quot;&gt;&lt;del&gt;HIVE-7104&lt;/del&gt;&lt;/a&gt;, but not yet committed into the Hive 0.13 branch.&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Aug 2014 01:42:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x13j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7268] On Windows Hive jobs in Webhcat always run on default MR mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7268</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;On Windows fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7065&quot; title=&quot;Hive jobs in webhcat run in default mr mode even in Hive on Tez setup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7065&quot;&gt;&lt;del&gt;HIVE-7065&lt;/del&gt;&lt;/a&gt; doesn&apos;t work as the templeton.cmd script does not include the Hive configuration directory in the classpath. So when hive.execution.engine property is set to tez in HIVE_CONF_DIR/hive-site.xml, webhcat doesn&apos;t see it and defaults it to &quot;mr&quot;. This prevents Hive jobs running from WebHCat to use the tez execution engine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722878">HIVE-7268</key>
            <summary>On Windows Hive jobs in Webhcat always run on default MR mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepesh">Deepesh Khandelwal</assignee>
                                    <reporter username="deepesh">Deepesh Khandelwal</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 21:28:05 +0000</created>
                <updated>Thu, 13 Nov 2014 19:44:31 +0000</updated>
                            <resolved>Thu, 3 Jul 2014 21:31:17 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>WebHCat</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14039427" author="deepesh" created="Fri, 20 Jun 2014 21:56:46 +0000"  >&lt;p&gt;Attaching a patch which adds HIVE_HOME/conf to the webhcat classpath on Windows.&lt;/p&gt;</comment>
                            <comment id="14039664" author="hsubramaniyan" created="Sat, 21 Jun 2014 03:06:32 +0000"  >&lt;p&gt;non-binding +1. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; Can you please look at this.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14051932" author="sushanth" created="Thu, 3 Jul 2014 21:29:10 +0000"  >&lt;p&gt;Looks good to me, +1.&lt;/p&gt;</comment>
                            <comment id="14051933" author="sushanth" created="Thu, 3 Jul 2014 21:31:17 +0000"  >&lt;p&gt;Committed to trunk. Thanks for the patch, Deepesh, and thanks for the review, Hari!&lt;/p&gt;</comment>
                            <comment id="14211182" author="thejas" created="Thu, 13 Nov 2014 19:44:31 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12714325">HIVE-7065</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651746" name="HIVE-7268.1.patch" size="982" author="deepesh" created="Fri, 20 Jun 2014 21:56:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Jun 2014 03:06:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x1c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7269] First query in ptf.q (Partition Table Function test) fails when input table is changed to ORC format</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7269</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>
&lt;p&gt;This fails:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE partorc( 
    p_partkey INT,
    p_name STRING,
    p_mfgr STRING,
    p_brand STRING,
    p_type STRING,
    p_size INT,
    p_container STRING,
    p_retailprice DOUBLE,
    p_comment STRING
) STORED AS ORC;

LOAD DATA LOCAL INPATH &apos;/Users/mmccline/hive_ptf/data/files/part_tiny.txt&apos; overwrite into table partorc;

select 
  p_mfgr, 
  p_name, 
  p_size,
  rank() 
    over (partition by p_mfgr order by p_name) as r,
  dense_rank() 
    over (partition by p_mfgr order by p_name) as dr,
  sum(p_retailprice) 
    over (partition by p_mfgr order by p_name rows between unbounded preceding and current row) as s1
from noop(on part 
  partition by p_mfgr
  order by p_name
  );

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The same thing works when STORED AS ORC clause removed.&lt;/p&gt;

&lt;p&gt;If you specify set hive.execution.engine=tez, you get these failure stack traces for the ORC table.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;14/06/20 15:05:33 [main]: ERROR tez.TezJobMonitor: Status: Failed
Vertex failed, vertexName=Map 1, vertexId=vertex_1403230487252_0002_1_02, diagnostics=[Task failed, taskId=task_1403230487252_0002_1_02_000000, diagnostics=[AttemptID:attempt_1403230487252_0002_1_02_000000_0 Info:Error: java.lang.RuntimeException: java.lang.RuntimeException: java.io.IOException: java.io.IOException: Malformed ORC file hdfs://localhost:9000/user/hive/warehouse/partorc/part_tiny.txt. Invalid postscript.
	at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:188)
	at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:307)
	at org.apache.hadoop.mapred.YarnTezDagChild$5.run(YarnTezDagChild.java:581)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:394)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1548)
	at org.apache.hadoop.mapred.YarnTezDagChild.main(YarnTezDagChild.java:570)
Caused by: java.lang.RuntimeException: java.io.IOException: java.io.IOException: Malformed ORC file hdfs://localhost:9000/user/hive/warehouse/partorc/part_tiny.txt. Invalid postscript.
	at org.apache.hadoop.mapred.split.TezGroupedSplitsInputFormat$TezGroupedSplitsRecordReader.initNextRecordReader(TezGroupedSplitsInputFormat.java:174)
	at org.apache.hadoop.mapred.split.TezGroupedSplitsInputFormat$TezGroupedSplitsRecordReader.&amp;lt;init&amp;gt;(TezGroupedSplitsInputFormat.java:113)
	at org.apache.hadoop.mapred.split.TezGroupedSplitsInputFormat.getRecordReader(TezGroupedSplitsInputFormat.java:79)
	at org.apache.tez.mapreduce.input.MRInput.setupOldRecordReader(MRInput.java:250)
	at org.apache.tez.mapreduce.input.MRInput.initFromEventInternal(MRInput.java:400)
	at org.apache.tez.mapreduce.input.MRInput.initFromEvent(MRInput.java:379)
	at org.apache.tez.mapreduce.input.MRInputLegacy.checkAndAwaitRecordReaderInitialization(MRInputLegacy.java:110)
	at org.apache.tez.mapreduce.input.MRInputLegacy.init(MRInputLegacy.java:79)
	at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:142)
	... 6 more
Caused by: java.io.IOException: java.io.IOException: Malformed ORC file hdfs://localhost:9000/user/hive/warehouse/partorc/part_tiny.txt. Invalid postscript.
	at org.apache.hadoop.hive.io.HiveIOExceptionHandlerChain.handleRecordReaderCreationException(HiveIOExceptionHandlerChain.java:97)
	at org.apache.hadoop.hive.io.HiveIOExceptionHandlerUtil.handleRecordReaderCreationException(HiveIOExceptionHandlerUtil.java:57)
	at org.apache.hadoop.hive.ql.io.HiveInputFormat.getRecordReader(HiveInputFormat.java:243)
	at org.apache.hadoop.mapred.split.TezGroupedSplitsInputFormat$TezGroupedSplitsRecordReader.initNextRecordReader(TezGroupedSplitsInputFormat.java:171)
	... 14 more
Caused by: java.io.IOException: Malformed ORC file hdfs://localhost:9000/user/hive/warehouse/partorc/part_tiny.txt. Invalid postscript.
	at org.apache.hadoop.hive.ql.io.orc.ReaderImpl.ensureOrcFooter(ReaderImpl.java:226)
	at org.apache.hadoop.hive.ql.io.orc.ReaderImpl.extractMetaInfoFromFooter(ReaderImpl.java:336)
	at org.apache.hadoop.hive.ql.io.orc.ReaderImpl.&amp;lt;init&amp;gt;(ReaderImpl.java:292)
	at org.apache.hadoop.hive.ql.io.orc.OrcFile.createReader(OrcFile.java:201)
	at org.apache.hadoop.hive.ql.io.orc.OrcInputFormat.getRecordReader(OrcInputFormat.java:1010)
	at org.apache.hadoop.hive.ql.io.HiveInputFormat.getRecordReader(HiveInputFormat.java:241)
	... 15 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12722888">HIVE-7269</key>
            <summary>First query in ptf.q (Partition Table Function test) fails when input table is changed to ORC format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="mmccline">Matt McCline</assignee>
                                    <reporter username="mmccline">Matt McCline</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jun 2014 22:08:05 +0000</created>
                <updated>Fri, 20 Jun 2014 22:24:01 +0000</updated>
                            <resolved>Fri, 20 Jun 2014 22:24:01 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14039462" author="mmccline" created="Fri, 20 Jun 2014 22:23:47 +0000"  >

&lt;p&gt;My problem (from a Google search)...&lt;/p&gt;

&lt;p&gt;LOAD DATA just copies the files to hive datafiles. Hive does not do any transformation while loading data into tables.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x1ef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7270] SerDe Properties are not considered by show create table Command</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7270</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The HIVE table DDl generated by show create table &amp;lt;target_table&amp;gt; command does not contain SerDe properties of the target table even though it contain specific SerDe properties. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12722993">HIVE-7270</key>
            <summary>SerDe Properties are not considered by show create table Command</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="renil.joseph">R J</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Jun 2014 04:12:12 +0000</created>
                <updated>Thu, 19 Feb 2015 18:22:08 +0000</updated>
                            <resolved>Tue, 16 Dec 2014 02:13:21 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14040784" author="hiveqa" created="Mon, 23 Jun 2014 14:16:57 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651932/HIVE-7270.1.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651932/HIVE-7270.1.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/564/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/564/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/564/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/564/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-564/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-564/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651932&lt;/p&gt;</comment>
                            <comment id="14044998" author="jdere" created="Thu, 26 Jun 2014 18:38:48 +0000"  >&lt;p&gt;+1. Is the failure in authorization_ctas related to the patch?&lt;/p&gt;</comment>
                            <comment id="14184970" author="navis" created="Mon, 27 Oct 2014 08:57:57 +0000"  >&lt;p&gt;I&apos;ve missed this. Sorry, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;Jason Dere&lt;/a&gt;.&lt;br/&gt;
authorization_ctas.q seemed not related to this and it&apos;s not reproduce in local env. Attaching the same patch for running ptest.&lt;/p&gt;</comment>
                            <comment id="14185055" author="hiveqa" created="Mon, 27 Oct 2014 10:42:14 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12677270/HIVE-7270.2.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12677270/HIVE-7270.2.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6578 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.minikdc.TestJdbcWithMiniKdc.testNegativeTokenAuth
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1471/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1471/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1471/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1471/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1471/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1471/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12677270 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14185980" author="jdere" created="Mon, 27 Oct 2014 23:03:22 +0000"  >&lt;p&gt;Looks like the tests have passed, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt; you can commit at your convenience.&lt;/p&gt;</comment>
                            <comment id="14243855" author="navis" created="Fri, 12 Dec 2014 08:09:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;Jason Dere&lt;/a&gt; Sorry, I&apos;ve missed your comment. Pending for test.&lt;/p&gt;</comment>
                            <comment id="14245107" author="hiveqa" created="Sat, 13 Dec 2014 02:07:57 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12686797/HIVE-7270.3.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12686797/HIVE-7270.3.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6701 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2063/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2063/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2063/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2063/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2063/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2063/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12686797 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14247615" author="navis" created="Tue, 16 Dec 2014 02:13:21 +0000"  >&lt;p&gt;Committed to trunk&lt;/p&gt;</comment>
                            <comment id="14290138" author="jdere" created="Fri, 23 Jan 2015 22:33:18 +0000"  >&lt;p&gt;Would like to add this to 0.14.1/1.0 branch&lt;/p&gt;</comment>
                            <comment id="14290142" author="vikram.dixit" created="Fri, 23 Jan 2015 22:36:28 +0000"  >&lt;p&gt;+1. Go ahead with the branch commits.&lt;/p&gt;</comment>
                            <comment id="14290245" author="jdere" created="Sat, 24 Jan 2015 00:09:06 +0000"  >&lt;p&gt;Committed to 0.14/1.0 branches&lt;/p&gt;</comment>
                            <comment id="14327529" author="thejas" created="Thu, 19 Feb 2015 14:44:50 +0000"  >&lt;p&gt;Updating release version for jiras resolved in 1.0.0 .&lt;/p&gt;</comment>
                            <comment id="14327897" author="thejas" created="Thu, 19 Feb 2015 18:22:08 +0000"  >&lt;p&gt;This issue has been fixed in Apache Hive 1.0.0. If there is any issue with the fix, please open a new jira to address it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651932" name="HIVE-7270.1.patch.txt" size="15801" author="navis" created="Mon, 23 Jun 2014 05:31:10 +0000"/>
                            <attachment id="12677270" name="HIVE-7270.2.patch.txt" size="15844" author="navis" created="Mon, 27 Oct 2014 08:55:35 +0000"/>
                            <attachment id="12686797" name="HIVE-7270.3.patch.txt" size="15844" author="navis" created="Fri, 12 Dec 2014 08:08:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jun 2014 14:16:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x20f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401259</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7271] Speed up unit tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7271</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Did some experiments to see if there&apos;s a way to speed up unit tests. TestCliDriver seemed to take a lot of time just spinning up/tearing down JVMs. I was also curious to see if running everything on a ram disk would help.&lt;/p&gt;

&lt;p&gt;Results (I ran tests up to authorization_2):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Current setup: 40 minutes&lt;/li&gt;
	&lt;li&gt;Single JVM (not using child JVM to run all queries): 8 minutes&lt;/li&gt;
	&lt;li&gt;Single JVM + ram disk: 7 minutes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So the ram disk didn&apos;t help that much. But running tests in single JVM seems worthwhile doing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722995">HIVE-7271</key>
            <summary>Speed up unit tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Jun 2014 05:22:19 +0000</created>
                <updated>Mon, 10 Aug 2015 22:37:59 +0000</updated>
                            <resolved>Wed, 25 Jun 2014 02:36:21 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14040154" author="hiveqa" created="Sun, 22 Jun 2014 15:00:34 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651843/HIVE-7271.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651843/HIVE-7271.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 43 failed/errored test(s), 5607 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_archive_excludeHadoop20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_explain
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_fetch_aggregation
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_bucket_sort_convert_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_hook
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonmr_fetch
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_analyze
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_parquet
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver_dboutput
org.apache.hadoop.hive.cli.TestContribNegativeCliDriver.testNegativeCliDriver_case_with_row_sequence
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_cachingprintstream
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_compute_stats_long
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part3
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part_max_per_node
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_entry_limit
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_index_compact_size_limit
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_local_mapred_error_cache
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_script_broken_pipe2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_script_broken_pipe3
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_script_error
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_serde_regex2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_aggregator_error_2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_publisher_error_1
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_publisher_error_2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_assert_true
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_assert_true2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_reflect_neg
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_test_error
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_test_error_reduce
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapPlan1
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapPlan2
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan1
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan2
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan3
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan4
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan5
org.apache.hadoop.hive.ql.exec.TestExecDriver.testMapRedPlan6
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/551/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-551/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-551/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 43 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651843&lt;/p&gt;</comment>
                            <comment id="14040172" author="brocknoland" created="Sun, 22 Jun 2014 16:50:40 +0000"  >&lt;p&gt;It looks like this increases the heap of the tests to 8GB. We&apos;d have to change the instance type we are using for PTest to allow for this.&lt;/p&gt;

&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14040173" author="brocknoland" created="Sun, 22 Jun 2014 16:51:47 +0000"  >&lt;p&gt;Also be curious why we are removing the assertions in StandardStructObjectInspector.&lt;/p&gt;</comment>
                            <comment id="14040246" author="hagleitn" created="Sun, 22 Jun 2014 20:55:12 +0000"  >&lt;p&gt;I removed the asserts because it turns out that they are firing all the time in our unit tests. However since we execute the queries in a separate jvm that doesn&apos;t have assertions turned on they are ignored. Finally - even when they fire they result in correct query execution. Seems they were useful some time ago, but don&apos;t have any meaning anymore.&lt;/p&gt;

&lt;p&gt;In other words: In today&apos;s hive, &quot;assert XXX&quot; will only fire if you write an actual unit test (not .q files). We should probably switch to throwing assertion error or use guava&apos;s preconditions to encode certain conditions in hive.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; it might be possible to run with less than 8GB. I added that to run hashtable gen in process with all the other stuff. What instance type are we using currently?&lt;/p&gt;</comment>
                            <comment id="14040258" author="szehon" created="Sun, 22 Jun 2014 21:34:36 +0000"  >&lt;p&gt;Today the ptest host instance is size C1.xlarge (7gb).&lt;/p&gt;

&lt;p&gt;Glad somebody is looking at it, also had minor comments.&lt;/p&gt;

&lt;p&gt;1.  We shouldn&apos;t remove the hadoopShims check of local mode, in MapRedTask right?  Shouldn&apos;t user still able to set this via the mr-specific flags?&lt;/p&gt;

&lt;p&gt;1.  Not related to this change, but can this method name be refactored as it&apos;s confusing (now its executing in process and not in child jvm)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    if (!conf.getBoolVar(HiveConf.ConfVars.SUBMITLOCALTASKVIACHILD)) {
+      // execute in process
+      return executeFromChildJVM(driverContext);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14040263" author="hagleitn" created="Sun, 22 Jun 2014 21:42:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;We shouldn&apos;t remove the hadoopShims check of local mode, in MapRedTask right? Shouldn&apos;t user still able to set this via the mr-specific flags?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this was done to &quot;fix&quot; something broken in the unit tests. The user can always choose in or out of process via the hive conf var (submit via child). This is independent of using local job runner or not (right now we always run out of process in local mode.)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Not related to this change, but can this method name be refactored as it&apos;s confusing (now its executing in process and not in child jvm)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, this is cheesy. I&apos;ll fix that.&lt;/p&gt;</comment>
                            <comment id="14040279" author="szehon" created="Sun, 22 Jun 2014 22:03:48 +0000"  >&lt;p&gt;Oh yea I hit that once, there&apos;s some statics in ExecMapper that don&apos;t get reset after the MR job, and result in some error if you run more than one query in localJobRunner, hence they forced the localJobRunner jobs to run out of process.  Not sure, but it may still be an issue that needs to be fixed, for this to work.&lt;/p&gt;</comment>
                            <comment id="14040294" author="hagleitn" created="Sun, 22 Jun 2014 23:17:19 +0000"  >&lt;p&gt;.2 fixes test failures and reigns in mem to 4g.&lt;/p&gt;</comment>
                            <comment id="14040295" author="hagleitn" created="Sun, 22 Jun 2014 23:18:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; I think this is already fixed. I remember having to clean that up for tez container reuse. I think the IOContext is properly reinitialized for each file now. Also, the unit tests should show if that was still an issue.&lt;/p&gt;</comment>
                            <comment id="14040326" author="hiveqa" created="Mon, 23 Jun 2014 01:14:02 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651897/HIVE-7271.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651897/HIVE-7271.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 5625 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_explain
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_decimal_10_0
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part3
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/552/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-552/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-552/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651897&lt;/p&gt;</comment>
                            <comment id="14040355" author="hagleitn" created="Mon, 23 Jun 2014 02:43:02 +0000"  >&lt;p&gt;missed two golden files in .2. other than that looks like no new failures.&lt;/p&gt;</comment>
                            <comment id="14040358" author="hagleitn" created="Mon, 23 Jun 2014 02:49:03 +0000"  >&lt;p&gt;Also - checked some build/test times in the precommit q. seems like the cli portion of the tests went from 25 hrs to more like 8 hrs. Although run in parallel it seems to not hit that hard - something else the critical path?&lt;/p&gt;</comment>
                            <comment id="14040395" author="brocknoland" created="Mon, 23 Jun 2014 03:58:23 +0000"  >&lt;p&gt;We specify the number of q files to include in a &quot;test batch&quot; and that number is much less than the number of q file tests. Thus we probably aren&apos;t seeing as much benefit. After this change we can probably increase the batch size.&lt;/p&gt;</comment>
                            <comment id="14040400" author="brocknoland" created="Mon, 23 Jun 2014 04:05:10 +0000"  >&lt;p&gt;I just checked and we run 3 threads per c1.xlarge (3 * 4GB max heap). I think we should change to c3* instance types. It looks like spot prices for c3.2xlarge, which has 15GB of ram, are similar to c1.xlarge.&lt;/p&gt;</comment>
                            <comment id="14040412" author="brocknoland" created="Mon, 23 Jun 2014 04:37:22 +0000"  >&lt;p&gt;To use the new instance type we need to upgrade jclouds. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7274&quot; title=&quot;Update PTest2 to JClouds 1.7.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7274&quot;&gt;&lt;del&gt;HIVE-7274&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14040433" author="hagleitn" created="Mon, 23 Jun 2014 05:27:48 +0000"  >&lt;p&gt;Maybe we don&apos;t have to switch instance type after all. I just tried to run some of the larger tests with 2gb. Looks good. I might have just run into a mem leak earlier. Before this patch we ran 2 1gb jvms per query. Now it&apos;s 1 2gb. If that works mem requirements should be the same.&lt;/p&gt;</comment>
                            <comment id="14040550" author="hiveqa" created="Mon, 23 Jun 2014 09:12:24 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651931/HIVE-7271.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651931/HIVE-7271.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample_islocalmode_hook
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dyn_part3
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/558/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-558/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651931&lt;/p&gt;</comment>
                            <comment id="14041630" author="hagleitn" created="Tue, 24 Jun 2014 02:55:49 +0000"  >&lt;p&gt;.6 fixes test failures (golden files again). Also includes the renamed methods &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; asked for.&lt;/p&gt;</comment>
                            <comment id="14041634" author="brocknoland" created="Tue, 24 Jun 2014 03:01:38 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;

&lt;p&gt;Regardless of the memory item, I updated our instance types since the c3 have a faster CPU.&lt;/p&gt;</comment>
                            <comment id="14041755" author="szehon" created="Tue, 24 Jun 2014 06:18:34 +0000"  >&lt;p&gt;+1, thanks a lot for this Gunther.  Just for my understanding, the tests for which you set submitviachild=true and local.task.via.child=true were because of OOM at 2GB?&lt;/p&gt;</comment>
                            <comment id="14041878" author="hiveqa" created="Tue, 24 Jun 2014 08:44:56 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652124/HIVE-7271.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652124/HIVE-7271.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 5654 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample8
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/572/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-572/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-572/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652124&lt;/p&gt;</comment>
                            <comment id="14042531" author="hagleitn" created="Tue, 24 Jun 2014 18:58:06 +0000"  >&lt;p&gt;Smaller size causes MTQueries to fail. In the latest patch I&apos;ve made a small change to run the multithreaded query test starting child VM (makes sense that multiple join/group by queries in process would eventually run out of memory).&lt;/p&gt;</comment>
                            <comment id="14042532" author="hagleitn" created="Tue, 24 Jun 2014 19:00:14 +0000"  >&lt;p&gt;The other failures are unrelated. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; - = I did not analyze all of them in detail, but yes, the ones I looked at ran OOM, so I switched them to out-of-process.&lt;/p&gt;</comment>
                            <comment id="14042548" author="szehon" created="Tue, 24 Jun 2014 19:13:18 +0000"  >&lt;p&gt;Sounds good, thanks.&lt;/p&gt;</comment>
                            <comment id="14042907" author="hiveqa" created="Wed, 25 Jun 2014 00:47:24 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652249/HIVE-7271.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652249/HIVE-7271.7.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_schemeAuthority2
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/582/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-582/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-582/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652249&lt;/p&gt;</comment>
                            <comment id="14042978" author="hagleitn" created="Wed, 25 Jun 2014 02:35:23 +0000"  >&lt;p&gt;Test failures are unrelated. (ran schemeAuthority locally a couple times no problems).&lt;/p&gt;</comment>
                            <comment id="14042979" author="hagleitn" created="Wed, 25 Jun 2014 02:36:21 +0000"  >&lt;p&gt;Committed to trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14043139" author="lefty@hortonworks.com" created="Wed, 25 Jun 2014 07:33:58 +0000"  >&lt;p&gt;This adds configuration parameter &lt;b&gt;hive.exec.submit.local.task.via.child&lt;/b&gt; to HiveConf.java, so it needs a description in hive-default.xml.template.&lt;/p&gt;

&lt;p&gt;Or you can put the description in a release note, and I&apos;ll make sure it gets into the new version of HiveConf.java (which will include descriptions) after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; gets committed.&lt;/p&gt;</comment>
                            <comment id="14043251" author="hagleitn" created="Wed, 25 Jun 2014 09:42:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; Just a thought: This parameter is useful to run unit tests quicker, but in general not something i would recommend anyone to set to true outside of that. It basically runs the hashtable generation for mapjoins in the CLI process - something that could give you memory issues. I&apos;ll put that in the release notes, but in general I think parameters like this needn&apos;t be exposed to users. In these cases should we just leave it out of the xml?&lt;/p&gt;</comment>
                            <comment id="14043273" author="lefty@hortonworks.com" created="Wed, 25 Jun 2014 10:08:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;, the wiki has a section for test parameters (hive.test.mode, etc.) so this can be documented with them.  I recommend that the release note &amp;amp; description explicitly advise people not to set this parameter to true except when running unit tests.  Of course the wiki will link to this Jira so they&apos;ll be able to find the information, but why make them hunt for it?&lt;/p&gt;

&lt;p&gt;When &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; gets committed, all parameter descriptions will be in HiveConf.java and then hive-default.xml.template will be generated from HiveConf.java.  You can have an empty description if you prefer, but the parameter will still appear in hive-default.xml.template at that point.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-TestProperties&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Test Properties &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14043278" author="lefty@hortonworks.com" created="Wed, 25 Jun 2014 10:11:49 +0000"  >&lt;p&gt;Perhaps this should be documented here too:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Unit+Test+Parallel+Execution&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Unit Test Parallel Execution &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14210598" author="thejas" created="Thu, 13 Nov 2014 19:41:38 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                            <comment id="14482556" author="lefty@hortonworks.com" created="Tue, 7 Apr 2015 04:21:33 +0000"  >&lt;p&gt;Doc note:  &lt;b&gt;hive.exec.submit.local.task.via.child&lt;/b&gt; is documented in two places in the wiki.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Unit+Test+Parallel+Execution#UnitTestParallelExecution-Configuration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Unit Test Parallel Execution &amp;#8211; Configuration &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.exec.submit.local.task.via.child&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Test Properties &amp;#8211; hive.exec.submit.local.task.via.child &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please review the doc.  If it&apos;s okay, the TODOC14 label can be removed from this issue.  If changes are needed, just let me know.&lt;/p&gt;</comment>
                            <comment id="14680888" author="sladymon" created="Mon, 10 Aug 2015 22:37:59 +0000"  >&lt;p&gt;The TODOC14 label has been removed from this issue, although the documentation has not been reviewed. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;, if you review the documentation in the future and notice anything that needs to be changed, please let Lefty (or myself) know.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12663479">HIVE-5077</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12738028">HIVE-7924</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651843" name="HIVE-7271.1.patch" size="10517" author="hagleitn" created="Sun, 22 Jun 2014 05:24:37 +0000"/>
                            <attachment id="12651897" name="HIVE-7271.2.patch" size="34058" author="hagleitn" created="Sun, 22 Jun 2014 23:17:19 +0000"/>
                            <attachment id="12651915" name="HIVE-7271.3.patch" size="33274" author="hagleitn" created="Mon, 23 Jun 2014 02:43:02 +0000"/>
                            <attachment id="12651929" name="HIVE-7271.4.patch" size="33274" author="hagleitn" created="Mon, 23 Jun 2014 04:38:03 +0000"/>
                            <attachment id="12651931" name="HIVE-7271.5.patch" size="33274" author="hagleitn" created="Mon, 23 Jun 2014 05:27:48 +0000"/>
                            <attachment id="12652124" name="HIVE-7271.6.patch" size="35426" author="hagleitn" created="Tue, 24 Jun 2014 02:55:49 +0000"/>
                            <attachment id="12652249" name="HIVE-7271.7.patch" size="36466" author="hagleitn" created="Tue, 24 Jun 2014 18:58:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 22 Jun 2014 15:00:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x20v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401261</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hive.exec.submit.local.task.via.child&lt;br/&gt;
&lt;br/&gt;
Determines whether local tasks (typically mapjoin hashtable generation phase) runs in separate JVM (&amp;quot;true&amp;quot;, recommended) or not. Avoids the overhead of spawning new JVM, but can lead to out-of-memory issues.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7272] Fix ptest2 pom after HIVE-7230</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7272</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7230&quot; title=&quot;Add Eclipse formatter file for Hive coding conventions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7230&quot;&gt;&lt;del&gt;HIVE-7230&lt;/del&gt;&lt;/a&gt; adds an eclipse formatter to the hive project. However, it also modified the ptest2 pom which is not connected to the root pom. We either need to revert that portion of the change or connect the pom to the root pom.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723028">HIVE-7272</key>
            <summary>Fix ptest2 pom after HIVE-7230</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="brocknoland">Brock Noland</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Jun 2014 17:02:14 +0000</created>
                <updated>Wed, 14 Jan 2015 00:33:04 +0000</updated>
                            <resolved>Sun, 22 Jun 2014 17:09:29 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12721200">HIVE-7230</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401215</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x287:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7273] Hive job fails due to unable to rename reducer output file</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7273</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We ran into this issue in our cluster.&lt;br/&gt;
The error message is like this&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.ql.metadata.HiveException: Unable to rename output from: hdfs://***:8020/tmp/hive-svcckppi/hive_2014-06-16_20-24-09_584_6615934756634587679/_task_tmp.-ext-10002/_tmp.000000_3 to: hdfs://***:8020/tmp/hive-svcckppi/hive_2014-06-16_20-24-09_584_6615934756634587679/_tmp.-ext-10002/000000_3
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator$FSPaths.commit(FileSinkOperator.java:197)
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator$FSPaths.access$300(FileSinkOperator.java:108)
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.closeOp(FileSinkOperator.java:867)
        at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:588)
        at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:597)
        at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:597)
        at org.apache.hadoop.hive.ql.exec.ExecReducer.close(ExecReducer.java:309)
        at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:470)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:407)
        at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:158)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1478)
        at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:153)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The log of NameNode shows&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-06-16 20:43:38,582 WARN org.apache.hadoop.hdfs.StateChange: DIR* FSDirectory.unprotectedRenameTo: failed to rename /tmp/hive-svcckppi/hive_2014-06-16_20-24-09_584_6615934756634587679/_task_tmp.-ext-10002/_tmp.000000_3 to /tmp/hive-svcckppi/hive_2014-06-16_20-24-09_584_6615934756634587679/_tmp.-ext-10002/000000_3 because destination&apos;s parent does not exist
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12723056">HIVE-7273</key>
            <summary>Hive job fails due to unable to rename reducer output file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="GWong">George Wong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jun 2014 03:43:55 +0000</created>
                <updated>Wed, 25 Jun 2014 02:41:54 +0000</updated>
                                            <version>0.12.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14040387" author="gwong" created="Mon, 23 Jun 2014 03:49:28 +0000"  >&lt;p&gt;I created this jira because Hive-4605 is closed by not reproducible.&lt;/p&gt;

&lt;p&gt;Looks like this issue exists in both 0.11 and 0.12.&lt;/p&gt;</comment>
                            <comment id="14040392" author="gwong" created="Mon, 23 Jun 2014 03:52:18 +0000"  >&lt;p&gt;I went through the code of FileSink operator&lt;br/&gt;
The code is like this.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((bDynParts || isSkewedStoredAsSubDirectories)
              &amp;amp;&amp;amp; !fs.exists(finalPaths[idx].getParent())) {
            fs.mkdirs(finalPaths[idx].getParent());
          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am wondering why we should check bDynParts and isSkewedStoredAsSubDirectories. In the code, the output is move to finalPath no matter what the values of bDynParts and isSkewedStoredAsSubDirectories are. Since the date move is not avoidable, why not change the code to the following to make sure the path exists before moving the file.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!fs.exists(finalPaths[idx].getParent())) {
            fs.mkdirs(finalPaths[idx].getParent());
          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14040537" author="navis" created="Mon, 23 Jun 2014 09:00:38 +0000"  >&lt;p&gt;The directory is expected to be created in ExecDriver before job submitting. Could you provide a query which can reproduce the situation? Fail of other tasks in the query also can make exceptions like above.&lt;/p&gt;</comment>
                            <comment id="14041902" author="gwong" created="Tue, 24 Jun 2014 09:14:30 +0000"  >&lt;p&gt;I can not provide a simple query to trigger this issue. &lt;br/&gt;
In our prod environment, the query is a little bit complex. We use lateral view and put multiple insert in one query shot. The data size of the input is roughly about 170GB.&lt;br/&gt;
I am trying to reproduce this issue in my local env. So far, I can not reproduce it.&lt;/p&gt;

&lt;p&gt;But I changed the code logic as my proposal. Then, the query succeeded.&lt;/p&gt;

&lt;p&gt;Could you show me the code about create the finalOutputPath in ExecDriver? I would like to go through the code of dir creation. It may be helpful to find out the reproduce step.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14042974" author="navis" created="Wed, 25 Jun 2014 02:28:45 +0000"  >&lt;p&gt;You can see the code in ExecDriver#416&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      Utilities.createTmpDirs(job, mWork);
      Utilities.createTmpDirs(job, rWork);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This finds FileSinkOperator which is not for bDynParts or isSkewedStoredAsSubDirectories and creates temporary directory for it.&lt;/p&gt;</comment>
                            <comment id="14042984" author="gwong" created="Wed, 25 Jun 2014 02:41:54 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt;. I will check it. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12649275">HIVE-4605</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jun 2014 09:00:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x2e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401321</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7274] Update PTest2 to JClouds 1.7.3</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7274</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Required to use newer instance types&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723063">HIVE-7274</key>
            <summary>Update PTest2 to JClouds 1.7.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brocknoland">Brock Noland</assignee>
                                    <reporter username="brocknoland">Brock Noland</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jun 2014 04:36:05 +0000</created>
                <updated>Thu, 13 Nov 2014 19:40:48 +0000</updated>
                            <resolved>Tue, 24 Jun 2014 03:03:32 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14040410" author="brocknoland" created="Mon, 23 Jun 2014 04:36:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; can you review this one?&lt;/p&gt;</comment>
                            <comment id="14040511" author="hiveqa" created="Mon, 23 Jun 2014 08:10:36 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651928/HIVE-7274.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651928/HIVE-7274.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 5669 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.hcatalog.streaming.TestStreaming.testEndpointConnection
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/557/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/557/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/557/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/557/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-557/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-557/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12651928&lt;/p&gt;</comment>
                            <comment id="14041075" author="szehon" created="Mon, 23 Jun 2014 18:21:16 +0000"  >&lt;p&gt;Thanks for researching that.  +1 &lt;/p&gt;</comment>
                            <comment id="14041635" author="brocknoland" created="Tue, 24 Jun 2014 03:03:32 +0000"  >&lt;p&gt;Thank you for the review Szehon! I have committed this to trunk.&lt;/p&gt;</comment>
                            <comment id="14210428" author="thejas" created="Thu, 13 Nov 2014 19:40:48 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651928" name="HIVE-7274.patch" size="1439" author="brocknoland" created="Mon, 23 Jun 2014 04:36:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jun 2014 08:10:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401250</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x2fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7275] optimize these functions for windowing function.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7275</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Please apply the window streaming optimization from issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7143&quot; title=&quot;Add Streaming support in Windowing mode for more UDAFs (min/max, lead/lag, fval/lval)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7143&quot;&gt;&lt;del&gt;HIVE-7143&lt;/del&gt;&lt;/a&gt;/7062 to these functions if they are applicable.&lt;/p&gt;

&lt;p&gt;row_number &lt;br/&gt;
count &lt;br/&gt;
rank &lt;br/&gt;
dense_rank  &lt;br/&gt;
nvl &lt;br/&gt;
rank &lt;br/&gt;
dense_rank  &lt;br/&gt;
nvl  &lt;br/&gt;
cast  &lt;br/&gt;
decode  &lt;br/&gt;
median  &lt;br/&gt;
stddev  &lt;br/&gt;
coalesce  &lt;br/&gt;
floor  &lt;br/&gt;
sign  &lt;br/&gt;
abs  &lt;br/&gt;
ltrim  &lt;br/&gt;
substring  &lt;br/&gt;
to_char &lt;/p&gt;
</description>
                <environment>&lt;p&gt;Hadoop 2.4.0, Hive 13.0&lt;/p&gt;</environment>
        <key id="12723220">HIVE-7275</key>
            <summary>optimize these functions for windowing function.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kiet.ly">Kiet Ly</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jun 2014 21:52:25 +0000</created>
                <updated>Thu, 3 Jul 2014 01:58:26 +0000</updated>
                                            <version>0.11.0</version>
                    <version>0.12.0</version>
                    <version>0.13.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14046320" author="rhbutani" created="Fri, 27 Jun 2014 19:21:04 +0000"  >&lt;p&gt;1. most of these are UDFs: &lt;br/&gt;
coalesce &lt;br/&gt;
floor &lt;br/&gt;
sign &lt;br/&gt;
abs &lt;br/&gt;
ltrim &lt;br/&gt;
substring &lt;br/&gt;
to_char&lt;br/&gt;
nvl &lt;br/&gt;
cast &lt;br/&gt;
decode &lt;/p&gt;

&lt;p&gt;nothing to be done for these.&lt;/p&gt;

&lt;p&gt;2. ranking fns already support streaming.&lt;/p&gt;

&lt;p&gt;3. We need streaming for count, row_num, mean, stddev. Also &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7062&quot; title=&quot;Support Streaming mode in Windowing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7062&quot;&gt;&lt;del&gt;HIVE-7062&lt;/del&gt;&lt;/a&gt; didn&apos;t add streaming for fVal, lVal.&lt;/p&gt;</comment>
                            <comment id="14050988" author="rhbutani" created="Thu, 3 Jul 2014 01:58:26 +0000"  >&lt;p&gt;Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7344&quot; title=&quot;Add streaming support in Windowing mode for FirstVal, LastVal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7344&quot;&gt;&lt;del&gt;HIVE-7344&lt;/del&gt;&lt;/a&gt; to handle FirstVal, LastVal streaming.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Jun 2014 19:21:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x3dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7276] BaseSemanticAnalyzer.unescapeSQLString fails to parse Windows like path</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7276</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;BaseSemanticAnalyzer.unescapeSQLString fails to parse windows-like path, e.g. C:\Users\xzhou\hworks. This will cause a large quantity of queries on windows to fail. &lt;/p&gt;

&lt;p&gt;For example, &apos;C:\Users\xzhou\hworks\workspace\hwx-hive-ws\hive\hcatalog\core\target\tmp\hive-junit-960740885870900&apos; will be parsed as &apos;C:Usersxzhouhworksworkspacehwx-hive-wshivehcatalogcore	arget	mphive-junit-960740885870900&apos;, since \ is interpreted as start char in unicode string, e.g. \002 for delimiter, and thus swallowed.&lt;/p&gt;

&lt;p&gt;\0, \b, \n, \r, \t, \Z, and so on within normal Windows like path will also be swallowed.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows Server 2008 R2&lt;/p&gt;</environment>
        <key id="12723276">HIVE-7276</key>
            <summary>BaseSemanticAnalyzer.unescapeSQLString fails to parse Windows like path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="xiaobingo">Xiaobing Zhou</assignee>
                                    <reporter username="xiaobingo">Xiaobing Zhou</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 05:09:43 +0000</created>
                <updated>Sat, 1 Nov 2014 23:40:19 +0000</updated>
                            <resolved>Sat, 1 Nov 2014 23:40:19 +0000</resolved>
                                    <version>0.13.0</version>
                                                    <component>Query Processor</component>
                    <component>Windows</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14193585" author="xiaobingo" created="Sat, 1 Nov 2014 23:40:19 +0000"  >&lt;p&gt;Resolved it since it&apos;s not reproducible any more.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x3pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7277] how to decide reduce numbers   according  to  the input size of reduce stage rather than the  input size of  map stage?</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7277</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;As we  know ,now  hive decide the  reduce numbers  just by  the &quot; Input size of   map/ hive.exec.reducers.bytes.per.reducer(default 1G ).....&lt;/p&gt;

&lt;p&gt;But ,I  think  the out put size of map stage  may have a big difference from  the original  input size , so I  think  this  strategy to decide reduce-numbers may be improper....&lt;/p&gt;

&lt;p&gt;So is   there any feature  which can decide the reduce number just  according to the out put  of the map stage.?    thanks .  &lt;/p&gt;

&lt;p&gt; As  I know , actually ,the reduce stage will begin just  after some map tasks have finished rather than until  the  whole map stage have finished , so I  think  it is improper too  decide reduce numbers   when  the  whole map stage  have finished.&lt;/p&gt;

&lt;p&gt;As  someone point ,We can just according to  the out put size of the  earliest map tasks which have finished   to  estimate the whole reduce numbers......However,   in fact ,now Hive has used filter push down(where) ,which may  resulting a big  difference from each map task .&lt;/p&gt;

&lt;p&gt;So&#65292;  this  estimation  is improper.&lt;/p&gt;

&lt;p&gt;thanks .&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723278">HIVE-7277</key>
            <summary>how to decide reduce numbers   according  to  the input size of reduce stage rather than the  input size of  map stage?</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sjtufighter">WangMeng</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 05:23:31 +0000</created>
                <updated>Fri, 30 Jun 2017 20:35:26 +0000</updated>
                                                            <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14041733" author="gopalv" created="Tue, 24 Jun 2014 05:51:31 +0000"  >&lt;p&gt;Yes, this is how &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7158&quot; title=&quot;Use Tez auto-parallelism in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7158&quot;&gt;&lt;del&gt;HIVE-7158&lt;/del&gt;&lt;/a&gt; works.&lt;/p&gt;

&lt;p&gt;The reducer counts are estimated at runtime from counters from the map-phase.&lt;/p&gt;</comment>
                            <comment id="14041741" author="sjtufighter" created="Tue, 24 Jun 2014 06:01:55 +0000"  >&lt;p&gt;As  I  know ,TEZ is a new  compute engine  different from mapreduce,   is there  any  solution based on map reduce engine  ?&lt;/p&gt;</comment>
                            <comment id="14041742" author="sjtufighter" created="Tue, 24 Jun 2014 06:03:26 +0000"  >

&lt;p&gt;As I know ,TEZ is a new compute engine different from mapreduce, is there any solution based on map reduce engine ?&lt;/p&gt;



&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;Best      Regards&lt;br/&gt;
HomePage:&lt;a href=&quot;http://wangmeng.us/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wangmeng.us/&lt;/a&gt;&lt;br/&gt;
Name:    Wang Meng---Data structures and Algorithms,Java&#65292;Jvm, Linux, Shell, Distributed system , Hadoop  Hive , Performancse Optimization and Debug ,Spark/Shark Impala&lt;br/&gt;
Major:     Software Engineering &amp;#8211;&lt;br/&gt;
Degree:  Master&lt;br/&gt;
E-mail:   sjtufighter@163.com   sjtufighter@sjtu.edu.cn&lt;br/&gt;
Tel:         13141202303(BeiJing)   18818272832(ShangHai)&lt;br/&gt;
GitHub:    &lt;a href=&quot;https://github.com/sjtufighter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sjtufighter&lt;/a&gt;&lt;/p&gt;




</comment>
                            <comment id="14041745" author="gopalv" created="Tue, 24 Jun 2014 06:06:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangmeng&quot; class=&quot;user-hover&quot; rel=&quot;wangmeng&quot;&gt;MengWang&lt;/a&gt;: The hive code changes to mark the logical plan for re-estimation validity is part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7158&quot; title=&quot;Use Tez auto-parallelism in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7158&quot;&gt;&lt;del&gt;HIVE-7158&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7121&quot; title=&quot;Use murmur hash to distribute HiveKey&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7121&quot;&gt;&lt;del&gt;HIVE-7121&lt;/del&gt;&lt;/a&gt;, but the map-reduce API has no way of changing its reducer count once a task has been submitted.&lt;/p&gt;</comment>
                            <comment id="14041761" author="sjtufighter" created="Tue, 24 Jun 2014 06:29:25 +0000"  >&lt;p&gt;well, the MR api  can not  fit up  with  this logical  plan  to  generate the physical plan .&lt;/p&gt;





&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;Best      Regards&lt;br/&gt;
HomePage:&lt;a href=&quot;http://wangmeng.us/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wangmeng.us/&lt;/a&gt;&lt;br/&gt;
Name:    Wang Meng---Data structures and Algorithms,Java&#65292;Jvm, Linux, Shell, Distributed system , Hadoop  Hive , Performancse Optimization and Debug ,Spark/Shark &lt;br/&gt;
Major:     Software Engineering&lt;br/&gt;
Degree:  Master&lt;br/&gt;
E-mail:   sjtufighter@163.com   sjtufighter@sjtu.edu.cn&lt;br/&gt;
GitHub:    &lt;a href=&quot;https://github.com/sjtufighter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sjtufighter&lt;/a&gt;&lt;/p&gt;




</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13083917">HIVE-17004</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12717716">HIVE-7158</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jun 2014 05:51:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401465</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x3qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7278] Describe pretty in beeline is not pretty</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7278</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Noticed in beeline that &apos;describe pretty&apos; gives a strange result.  The flag &apos;pretty&apos; was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3884&quot; title=&quot;Better align columns in DESCRIBE table_name output to make more human-readable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3884&quot;&gt;&lt;del&gt;HIVE-3884&lt;/del&gt;&lt;/a&gt; in Hive CLI.  &lt;/p&gt;

&lt;p&gt;When done in beeline it tries to show a table inside a table.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+---------------------------------+------------+----------+
|            col_name             | data_type  | comment  |
+---------------------------------+------------+----------+
| col_name data_type     comment  | NULL       | NULL     |
|                                 | NULL       | NULL     |
| id       int                    | NULL       | NULL     |
| name     string                 | NULL       | NULL     |
+---------------------------------+------------+----------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12723433">HIVE-7278</key>
            <summary>Describe pretty in beeline is not pretty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="szehon">Szehon Ho</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 18:48:36 +0000</created>
                <updated>Tue, 24 Jun 2014 18:48:36 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x4ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7279] UDF format_number() does not work on DECIMAL types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7279</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I believe UDF format should work on decimal types.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select format_number(decimal_1.u,1) from decimal_1;
FAILED: SemanticException [Error 10016]: Line 1:21 Argument type mismatch &apos;u&apos;: Argument 1 of function FORMAT_NUMBER must be &quot;tinyint&quot; or &quot;smallint&quot; or &quot;int&quot; or &quot;bigint&quot; or &quot;double&quot; or &quot;float&quot;, but &quot;decimal(5,0)&quot; was found.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12723438">HIVE-7279</key>
            <summary>UDF format_number() does not work on DECIMAL types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wilbur.yang">Wilbur Yang</assignee>
                                    <reporter username="szehon">Szehon Ho</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 19:01:59 +0000</created>
                <updated>Sat, 15 Nov 2014 00:57:53 +0000</updated>
                            <resolved>Sat, 12 Jul 2014 22:10:41 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14042544" author="szehon" created="Tue, 24 Jun 2014 19:08:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wilbur.yang&quot; class=&quot;user-hover&quot; rel=&quot;wilbur.yang&quot;&gt;Wilbur Yang&lt;/a&gt; any thoughts on this, or interest in taking a look?&lt;/p&gt;</comment>
                            <comment id="14042574" author="wilbur.yang" created="Tue, 24 Jun 2014 19:35:50 +0000"  >&lt;p&gt;Sure, I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="14058280" author="hiveqa" created="Fri, 11 Jul 2014 02:58:57 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12655101/HIVE-7279.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12655101/HIVE-7279.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5718 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_format_number_wrong5
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udf_format_number_wrong7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/740/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/740/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/740/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/740/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-740/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-740/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12655101&lt;/p&gt;</comment>
                            <comment id="14059001" author="wilbur.yang" created="Fri, 11 Jul 2014 17:01:57 +0000"  >&lt;p&gt;Updated negative tests.&lt;/p&gt;</comment>
                            <comment id="14059164" author="szehon" created="Fri, 11 Jul 2014 18:35:29 +0000"  >&lt;p&gt;Should be in good shape, but can you put up a review board for easier viewing?  Thanks.&lt;/p&gt;</comment>
                            <comment id="14059189" author="wilbur.yang" created="Fri, 11 Jul 2014 18:50:29 +0000"  >&lt;p&gt;Uploaded to RB. &lt;a href=&quot;https://reviews.apache.org/r/23418/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/23418/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14059305" author="hiveqa" created="Fri, 11 Jul 2014 20:31:16 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12655240/HIVE-7279.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12655240/HIVE-7279.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 5703 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/746/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/746/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/746/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/746/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-746/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-746/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12655240&lt;/p&gt;</comment>
                            <comment id="14059416" author="szehon" created="Fri, 11 Jul 2014 21:58:01 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14059936" author="szehon" created="Sat, 12 Jul 2014 22:10:41 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Wilbur for the contribution&lt;/p&gt;</comment>
                            <comment id="14206078" author="szehon" created="Tue, 11 Nov 2014 07:43:15 +0000"  >&lt;p&gt;Mentioned this JIRA in UDF format_number description in:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14206079" author="szehon" created="Tue, 11 Nov 2014 07:43:53 +0000"  >&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14210518" author="thejas" created="Thu, 13 Nov 2014 19:41:14 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                            <comment id="14213200" author="lefty@hortonworks.com" created="Sat, 15 Nov 2014 00:57:53 +0000"  >&lt;p&gt;Doc looks good, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;UDF &amp;#8211; String Functions &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12655101" name="HIVE-7279.1.patch" size="5895" author="wilbur.yang" created="Thu, 10 Jul 2014 22:27:16 +0000"/>
                            <attachment id="12655240" name="HIVE-7279.2.patch" size="7467" author="wilbur.yang" created="Fri, 11 Jul 2014 17:01:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jun 2014 19:35:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x4pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7280] CBO V1</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7280</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12723464">HIVE-7280</key>
            <summary>CBO V1</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12678031">HIVE-5775</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jpullokkaran">Laljo John Pullokkaran</assignee>
                                    <reporter username="jpullokkaran">Laljo John Pullokkaran</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 20:55:22 +0000</created>
                <updated>Wed, 3 Sep 2014 08:01:08 +0000</updated>
                            <resolved>Tue, 24 Jun 2014 21:39:49 +0000</resolved>
                                                                    <component>CBO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14042677" author="jpullokkaran" created="Tue, 24 Jun 2014 20:59:20 +0000"  >&lt;p&gt;Patch includes:&lt;br/&gt;
1. Optiq 0.8-snapshot integration &lt;br/&gt;
2. Join Reorder based on Cardinality, NDV (using Optiq)&lt;br/&gt;
3. Gen Optiq plan from Hive QL AST&lt;br/&gt;
4. Optiq Rel Node gets converted to Hive AST&lt;/p&gt;</comment>
                            <comment id="14042696" author="rhbutani" created="Tue, 24 Jun 2014 21:17:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;Laljo John Pullokkaran&lt;/a&gt; the patch doesn&apos;t build. We need to use a release version of optiq&lt;/p&gt;</comment>
                            <comment id="14042707" author="rhbutani" created="Tue, 24 Jun 2014 21:25:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14042730" author="rhbutani" created="Tue, 24 Jun 2014 21:39:49 +0000"  >&lt;p&gt;Committed to cbo branch. Thanks John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12652283" name="HIVE-7280.patch" size="440263" author="jpullokkaran" created="Tue, 24 Jun 2014 21:18:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jun 2014 21:17:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x4vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7281] DbTxnManager acquiring wrong level of lock for dynamic partitioning</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7281</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently DbTxnManager.acquireLocks() locks the DUMMY_PARTITION for dynamic partitioning.  But this is not adequate.  This will not prevent drop operations on partitions being written to.  The lock should be at the table level.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723474">HIVE-7281</key>
            <summary>DbTxnManager acquiring wrong level of lock for dynamic partitioning</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alangates">Alan Gates</assignee>
                                    <reporter username="alangates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 21:15:22 +0000</created>
                <updated>Thu, 13 Nov 2014 19:41:38 +0000</updated>
                            <resolved>Thu, 21 Aug 2014 20:32:43 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Locking</component>
                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14042698" author="alangates" created="Tue, 24 Jun 2014 21:17:58 +0000"  >&lt;p&gt;Ideally we could lock only partitions that are potentially being written to by the dynamic partitioning write.  But this would require significant changes in the TxnHandler to handle the notion of locking partitions matching a pattern.  Rather than make those changes, for now it is easier to lock the table.&lt;/p&gt;</comment>
                            <comment id="14081911" author="alangates" created="Fri, 1 Aug 2014 05:05:44 +0000"  >&lt;p&gt;Attaching a patch that locks at the table level rather than locking the dummy partition (as before).&lt;/p&gt;</comment>
                            <comment id="14082225" author="hiveqa" created="Fri, 1 Aug 2014 13:23:07 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12659090/HIVE-7281.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12659090/HIVE-7281.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 5849 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/135/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/135/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/135/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/135/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-135/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-135/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12659090&lt;/p&gt;</comment>
                            <comment id="14102621" author="ashutoshc" created="Tue, 19 Aug 2014 18:44:22 +0000"  >&lt;p&gt;Patch looks fine. &lt;br/&gt;
But, I wonder if Entity type of DummyPartition make sense at all. It seems this entity is created only in DP case to be used for locking and authorization purposes. And since in locking case (as argued in this ticket) as well as auth case (probably) it make sense to use Table entity. I dont see what useful purpose DummyPartition serves. On the contrary, it results in confusion like the topic of this jira. Shall we just delete this DummyPartition entity. cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14104187" author="alangates" created="Wed, 20 Aug 2014 17:40:42 +0000"  >&lt;p&gt;I&apos;m fine with doing that, but do we need to link that change to this?  Can we file a separate JIRA for that?&lt;/p&gt;</comment>
                            <comment id="14105624" author="ashutoshc" created="Thu, 21 Aug 2014 17:19:32 +0000"  >&lt;p&gt;Filing a separate ticket and unlinking it from this one is fine, only that it will be left to the mercy of someone who will do it : )  &lt;br/&gt;
Fixing a root cause is always better (in this case deleting error-prone DummyPartitions) but since immediate bug can be fixed by current patch. +1&lt;/p&gt;</comment>
                            <comment id="14105913" author="ashutoshc" created="Thu, 21 Aug 2014 20:32:43 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Alan!&lt;/p&gt;</comment>
                            <comment id="14210599" author="thejas" created="Thu, 13 Nov 2014 19:41:38 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12659090" name="HIVE-7281.patch" size="16657" author="alangates" created="Fri, 1 Aug 2014 05:05:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Aug 2014 13:23:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401661</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x4xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7282] HCatLoader fail to load Orc map with null key</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7282</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Here is the stack:&lt;br/&gt;
Get exception:&lt;br/&gt;
AttemptID:attempt_1403634189382_0011_m_000000_0 Info:Error: org.apache.pig.backend.executionengine.ExecException: ERROR 6018: Error converting read value to tuple&lt;br/&gt;
at org.apache.hive.hcatalog.pig.HCatBaseLoader.getNext(HCatBaseLoader.java:76)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.HCatLoader.getNext(HCatLoader.java:58)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigRecordReader.nextKeyValue(PigRecordReader.java:211)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:533)&lt;br/&gt;
at org.apache.hadoop.mapreduce.task.MapContextImpl.nextKeyValue(MapContextImpl.java:80)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.map.WrappedMapper$Context.nextKeyValue(WrappedMapper.java:91)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:340)&lt;br/&gt;
at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:167)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1557)&lt;br/&gt;
at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:162)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.transformToPigMap(PigHCatUtil.java:469)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.extractPigObject(PigHCatUtil.java:404)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.transformToTuple(PigHCatUtil.java:456)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.transformToTuple(PigHCatUtil.java:374)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.HCatBaseLoader.getNext(HCatBaseLoader.java:64)&lt;br/&gt;
... 13 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723477">HIVE-7282</key>
            <summary>HCatLoader fail to load Orc map with null key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 21:23:05 +0000</created>
                <updated>Thu, 13 Nov 2014 19:41:58 +0000</updated>
                            <resolved>Thu, 30 Oct 2014 18:30:21 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14042713" author="daijy" created="Tue, 24 Jun 2014 21:28:53 +0000"  >&lt;p&gt;Attach patch. Will add testcase later.&lt;/p&gt;</comment>
                            <comment id="14044316" author="daijy" created="Thu, 26 Jun 2014 03:39:59 +0000"  >&lt;p&gt;Add test case.&lt;/p&gt;</comment>
                            <comment id="14046250" author="ekoifman" created="Fri, 27 Jun 2014 18:43:09 +0000"  >&lt;p&gt;Would it not make more sense to add the new test to TestHCatLoaderComplexSchema, so that it&apos;s run with both ORC and RCFile?&lt;/p&gt;</comment>
                            <comment id="14046273" author="ekoifman" created="Fri, 27 Jun 2014 18:52:49 +0000"  >&lt;p&gt;Also, can &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5020&quot; title=&quot;HCat reading null-key map entries causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5020&quot;&gt;HIVE-5020&lt;/a&gt; now be closed as duplicate?&lt;/p&gt;</comment>
                            <comment id="14049228" author="sushanth" created="Tue, 1 Jul 2014 19:31:47 +0000"  >&lt;p&gt;While this protects the difference between orc and rcfile from HCat, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5020&quot; title=&quot;HCat reading null-key map entries causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5020&quot;&gt;HIVE-5020&lt;/a&gt; is about the differences in behaviour between rcfile and orc in how they handle nulls in maps, and should not be closed until hive has a consistent behaviour. I would actually prefer to solve this in a consistent manner in hive before applying this to hcat, as explained in comments in that jira. I&apos;ll try to revive the discussion there.&lt;/p&gt;</comment>
                            <comment id="14050870" author="daijy" created="Wed, 2 Jul 2014 23:35:40 +0000"  >&lt;p&gt;When I digging more, I feel disallow null map key is more proper. Reasons are:&lt;br/&gt;
1. This can solve the semantic difference between orc and rcfile&lt;br/&gt;
2. Allow null map key seems risky, it will break assumption of some other code, eg, LazyMap&lt;/p&gt;</comment>
                            <comment id="14050878" author="ekoifman" created="Wed, 2 Jul 2014 23:46:49 +0000"  >&lt;p&gt;I agree that null key in a map is a bad idea.  Since we still have to deal with data which already has been written with null key, could we add some table property that will let user say &quot;if data contains a map with null key, replace null with &apos;my_value&apos; on read&quot;.  (Perhaps the same property can be used to change a null key to &apos;my_value&apos; on write to support existing writers, but this of course won&apos;t work for all cases.)  This way null key can be disallowed.&lt;/p&gt;</comment>
                            <comment id="14175399" author="daijy" created="Fri, 17 Oct 2014 19:09:14 +0000"  >&lt;p&gt;Resync the patch with trunk. Also in the new patch, I skip the null key entries in the map, this is consistent with null key handling in other part of Hive (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8115&quot; title=&quot;Hive select query hang when fields contain map&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8115&quot;&gt;&lt;del&gt;HIVE-8115&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14175585" author="hiveqa" created="Fri, 17 Oct 2014 21:41:16 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12675550/HIVE-7282.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12675550/HIVE-7282.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6569 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_correctness
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1321/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1321/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12675550&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PreCommit-HIVE-TRUNK-Build&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14190492" author="sushanth" created="Thu, 30 Oct 2014 17:59:23 +0000"  >&lt;p&gt;+1, looks good to me.&lt;/p&gt;</comment>
                            <comment id="14190555" author="daijy" created="Thu, 30 Oct 2014 18:30:21 +0000"  >&lt;p&gt;Patch committed to both trunk and 0.14 branch.&lt;/p&gt;</comment>
                            <comment id="14210667" author="thejas" created="Thu, 13 Nov 2014 19:41:58 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12662490">HIVE-5020</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12662490">HIVE-5020</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12652290" name="HIVE-7282-1.patch" size="2100" author="daijy" created="Tue, 24 Jun 2014 21:28:53 +0000"/>
                            <attachment id="12652543" name="HIVE-7282-2.patch" size="4588" author="daijy" created="Thu, 26 Jun 2014 03:39:59 +0000"/>
                            <attachment id="12675550" name="HIVE-7282.3.patch" size="5491" author="daijy" created="Fri, 17 Oct 2014 19:09:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Jun 2014 18:43:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x4y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7283] CBO: plumb in HepPlanner and FieldTrimmer(ColumnPruner) into Optiq based planning</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7283</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;1.&lt;br/&gt;
HepPlanner initially used for:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Predicate Pushdown&lt;/li&gt;
	&lt;li&gt;Transitive Predicate inference&lt;/li&gt;
	&lt;li&gt;Partition Pruning&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2. Use Optiq&apos;s FieldTrimmer for ColumnPruner&lt;/p&gt;

&lt;p&gt;To begin with the rules are copies of Optiq base rules. Once Optiq is refactored to work on Base RelNode classes, the copied rules will be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723487">HIVE-7283</key>
            <summary>CBO: plumb in HepPlanner and FieldTrimmer(ColumnPruner) into Optiq based planning</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12678031">HIVE-5775</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhbutani">Harish Butani</assignee>
                                    <reporter username="rhbutani">Harish Butani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 21:47:01 +0000</created>
                <updated>Sat, 28 Jun 2014 07:39:32 +0000</updated>
                            <resolved>Sat, 28 Jun 2014 07:39:32 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14042876" author="jpullokkaran" created="Wed, 25 Jun 2014 00:07:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14043635" author="rhbutani" created="Wed, 25 Jun 2014 15:44:33 +0000"  >&lt;p&gt;John thanks for reviewing&lt;/p&gt;</comment>
                            <comment id="14046506" author="hagleitn" created="Fri, 27 Jun 2014 23:00:12 +0000"  >&lt;p&gt;I&apos;m seeing this in the unit tests:&lt;/p&gt;

&lt;p&gt;Exception: null&lt;br/&gt;
java.lang.AssertionError&lt;br/&gt;
  at org.eigenbase.relopt.RelOptUtil.classifyFilters(RelOptUtil.java:1871)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.optimizer.optiq.rules.HivePushFilterPastJoinRule.perform(HivePushFilterPastJoinRule.java:95)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.optimizer.optiq.rules.HivePushFilterPastJoinRule$2.onMatch(HivePushFilterPastJoinRule.java:41)&lt;br/&gt;
  at org.eigenbase.relopt.AbstractRelOptPlanner.fireRule(AbstractRelOptPlanner.java:280)&lt;br/&gt;
  at org.eigenbase.relopt.hep.HepPlanner.applyRule(HepPlanner.java:482)&lt;br/&gt;
  at org.eigenbase.relopt.hep.HepPlanner.applyRules(HepPlanner.java:359)&lt;br/&gt;
  at org.eigenbase.relopt.hep.HepPlanner.executeInstruction(HepPlanner.java:222)&lt;br/&gt;
  at org.eigenbase.relopt.hep.HepInstruction$RuleInstance.execute(HepInstruction.java:119)&lt;br/&gt;
  at org.eigenbase.relopt.hep.HepPlanner.executeProgram(HepPlanner.java:173)&lt;br/&gt;
  at org.eigenbase.relopt.hep.HepPlanner.findBestExp(HepPlanner.java:160)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer$OptiqBasedPlanner.applyPreCBOTransforms(SemanticAnalyzer.java:11818)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer$OptiqBasedPlanner.apply(SemanticAnalyzer.java:11768)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer$OptiqBasedPlanner.apply(SemanticAnalyzer.java:11715)&lt;br/&gt;
  at net.hydromatic.optiq.tools.Frameworks$1.apply(Frameworks.java:146)&lt;br/&gt;
  at net.hydromatic.optiq.prepare.OptiqPrepareImpl.perform(OptiqPrepareImpl.java:536)&lt;br/&gt;
  at net.hydromatic.optiq.tools.Frameworks.withPrepare(Frameworks.java:168)&lt;br/&gt;
  at net.hydromatic.optiq.tools.Frameworks.withPlanner(Frameworks.java:142)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer$OptiqBasedPlanner.getOptimizedAST(SemanticAnalyzer.java:11731)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer$OptiqBasedPlanner.access$200(SemanticAnalyzer.java:11715)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:9536)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:328)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:412)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:308)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:962)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1027)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.Driver.run(Driver.java:898)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.Driver.run(Driver.java:888)&lt;br/&gt;
  at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:277)&lt;br/&gt;
  at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:229)&lt;br/&gt;
  at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:439)&lt;br/&gt;
  at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:375)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.QTestUtil.executeClient(QTestUtil.java:920)&lt;br/&gt;
  at org.apache.hadoop.hive.cli.TestCliDriver.runTest(TestCliDriver.java:133)&lt;br/&gt;
  at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_correctness(TestCliDriver.java:117)&lt;br/&gt;
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
  at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
  at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
  at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
  at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
  at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
  at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
  at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
  at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
  at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
  at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)&lt;br/&gt;
  at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)&lt;br/&gt;
  at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)&lt;br/&gt;
  at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)&lt;br/&gt;
  at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)&lt;br/&gt;
  at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)&lt;br/&gt;
  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)&lt;/p&gt;</comment>
                            <comment id="14046539" author="hagleitn" created="Fri, 27 Jun 2014 23:57:36 +0000"  >&lt;p&gt;Tests pass without patch. Reverted change in cbo branch.&lt;/p&gt;</comment>
                            <comment id="14046543" author="rhbutani" created="Sat, 28 Jun 2014 00:03:21 +0000"  >&lt;p&gt;ok, sorry was running cbo_correctness.q w/o setting hive,enable.cbo=true on command line. &lt;br/&gt;
I see the issue: for semiJoins joinType is set to Inner on JoinRelBase, so the assertion that num cols in Join = left + right fails in RelOptUtil.classifyFilters&lt;br/&gt;
For now going to bail  in HivePushFilterPastJoinRule for SemiJoins. Should have a patch soon.&lt;/p&gt;</comment>
                            <comment id="14046718" author="rhbutani" created="Sat, 28 Jun 2014 03:31:47 +0000"  >&lt;p&gt;For now have added checks to prevent PredicatePushdown and ColumnPruning for SemiJoins.&lt;br/&gt;
Test passes now.&lt;/p&gt;</comment>
                            <comment id="14046792" author="hagleitn" created="Sat, 28 Jun 2014 07:39:24 +0000"  >&lt;p&gt;LGTM. Committed to cbo branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12652311" name="HIVE-7283.1.patch" size="45840" author="rhbutani" created="Tue, 24 Jun 2014 23:35:15 +0000"/>
                            <attachment id="12652993" name="HIVE-7283.2.patch" size="46598" author="rhbutani" created="Sat, 28 Jun 2014 03:30:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jun 2014 00:07:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x4zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7284] CBO: create Partition Pruning rules in Optiq</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7284</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;NO PRECOMMIT TESTS&lt;br/&gt;
Create rules in Optiq that do the job of the PartitionPruner.&lt;br/&gt;
For now we will reuse the logic that evaluates the Partition list from prunedExpr. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12723488">HIVE-7284</key>
            <summary>CBO: create Partition Pruning rules in Optiq</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12678031">HIVE-5775</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhbutani">Harish Butani</assignee>
                                    <reporter username="rhbutani">Harish Butani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 21:50:05 +0000</created>
                <updated>Fri, 18 Jul 2014 02:08:24 +0000</updated>
                            <resolved>Fri, 18 Jul 2014 02:08:24 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14054600" author="rhbutani" created="Tue, 8 Jul 2014 07:27:16 +0000"  >&lt;p&gt;Preliminary patch attached. Did some minimal testing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table t1 (key string, value string) partitioned by (ds string);
load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;../../data/files/kv1.txt&apos;&lt;/span&gt; into table t1 partition (ds = &lt;span class=&quot;code-quote&quot;&gt;&apos;2010&apos;&lt;/span&gt;);
load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;../../data/files/kv1.txt&apos;&lt;/span&gt; into table t1 partition (ds = &lt;span class=&quot;code-quote&quot;&gt;&apos;2011&apos;&lt;/span&gt;);
set hive.stats.dbclass=jdbc:derby;
analyze table t1 partition(ds) compute statistics;
analyze table t1 partition(ds) compute statistics &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; columns key,value;
set hive.cbo.enable=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
set hive.stats.fetch.column.stats=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
select * from t1 where ds=&lt;span class=&quot;code-quote&quot;&gt;&apos;2010&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The plan after applyPreCBOTransforms has:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the partitionList set correctly on the RelOptHiveTable&lt;/li&gt;
	&lt;li&gt;has the correct Stats on RelOptHiveTable&lt;/li&gt;
	&lt;li&gt;has the ds=&apos;2010&apos; removed from the FilterRelNode&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The missing piece is on the way back to AST(and the reanalysis through SemAly) need to devise a way to pass the PrunedPartitionList back to SemAly, which then uses it directly. (Note: the AST genned when going back from Optiq planning is missing the predicate on the partition.)&lt;/p&gt;

&lt;p&gt;Also need to do more testing: on datatypes, composite predicates etc. But issues uncovered by these tests could be broken into separate jiras.&lt;/p&gt;</comment>
                            <comment id="14064169" author="ashutoshc" created="Wed, 16 Jul 2014 21:50:32 +0000"  >&lt;p&gt;Rebased patch. Also, since partition list is cached within a query, we need not to worry about passing partition list on the way back.&lt;/p&gt;</comment>
                            <comment id="14065772" author="jpullokkaran" created="Thu, 17 Jul 2014 23:34:20 +0000"  >&lt;p&gt;Updated Patch to do stats fetching on demand.&lt;/p&gt;

&lt;p&gt;We need to add rules to push filter through, project, set operators, GB.&lt;br/&gt;
Need to add rules to combine filters. Also constant folding may improve partition Pruning.&lt;/p&gt;</comment>
                            <comment id="14065903" author="hagleitn" created="Fri, 18 Jul 2014 02:08:24 +0000"  >&lt;p&gt;Committed to cbo branch. Muchas gracias a &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhbutani&quot; class=&quot;user-hover&quot; rel=&quot;rhbutani&quot;&gt;Harish Butani&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; y &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;Laljo John Pullokkaran&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12656147" name="HIVE-7284.1.patch" size="36021" author="ashutoshc" created="Wed, 16 Jul 2014 21:50:32 +0000"/>
                            <attachment id="12654477" name="HIVE-7284.1.patch" size="37277" author="rhbutani" created="Tue, 8 Jul 2014 07:17:45 +0000"/>
                            <attachment id="12656414" name="HIVE-7284.2.patch" size="51058" author="jpullokkaran" created="Fri, 18 Jul 2014 01:56:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Jul 2014 21:50:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x507:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401745</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7285] make direct SQL work with identityFactory datanucleus2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7285</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Apparently, some people set identityFactory to datanucleus2 for some reason. When that is used, some column names in DN schema are different; the most prominent is INTEGER_IDX changing to IDX. That causes direct SQL to break; queries still work via ORM, but become slow with many partitions. It seems it&apos;s easier to just support both, rather than try to enforce some standard or have people convert databases. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12723492">HIVE-7285</key>
            <summary>make direct SQL work with identityFactory datanucleus2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 22:05:50 +0000</created>
                <updated>Tue, 24 Jun 2014 22:05:50 +0000</updated>
                                                                            <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x513:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-7286] Parameterize HCatMapReduceTest for testing against all Hive storage formats</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7286</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, HCatMapReduceTest, which is extended by the following test suites:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;TestHCatDynamicPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatNonPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatExternalDynamicPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatExternalNonPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatExternalPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatMutableDynamicPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatMutableNonPartitioned&lt;/li&gt;
	&lt;li&gt;TestHCatMutablePartitioned&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These tests run against RCFile. Currently, only TestHCatDynamicPartitioned is run against any other storage format (ORC).&lt;/p&gt;

&lt;p&gt;Ideally, HCatalog should be tested against all storage formats supported by Hive. The easiest way to accomplish this is to turn HCatMapReduceTest into a parameterized test fixture that enumerates all Hive storage formats. Until &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; is implemented, we would need to manually create the mapping of SerDe to InputFormat and OutputFormat. This way, we can explicitly keep track of which storage formats currently work with HCatalog or which ones are untested or have test failures. The test fixture should also use Reflection to find all classes in the classpath that implements the SerDe interface and raise a failure if any of them are not enumerated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723510">HIVE-7286</key>
            <summary>Parameterize HCatMapReduceTest for testing against all Hive storage formats</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12728461">HIVE-7455</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidzchen">David Chen</assignee>
                                    <reporter username="davidzchen">David Chen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 23:20:51 +0000</created>
                <updated>Thu, 13 Nov 2014 19:41:28 +0000</updated>
                            <resolved>Wed, 30 Jul 2014 01:23:36 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14042854" author="davidzchen" created="Tue, 24 Jun 2014 23:46:15 +0000"  >&lt;p&gt;With this patch, the above tests are running (and passing) against the following storage formats: RCFile, ORC, SequenceFile.&lt;/p&gt;

&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4329&quot; title=&quot;HCatalog should use getHiveRecordWriter rather than getRecordWriter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4329&quot;&gt;HIVE-4329&lt;/a&gt; fixed, then the tests should be able to pass when run against the Avro and Parquet SerDes as well.&lt;/p&gt;

&lt;p&gt;RB: &lt;a href=&quot;https://reviews.apache.org/r/22946/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/22946/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14042973" author="hiveqa" created="Wed, 25 Jun 2014 02:28:35 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12652312/HIVE-7286.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12652312/HIVE-7286.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5694 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_stats_counter
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/584/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/584/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/584/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/584/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-584/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-584/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12652312&lt;/p&gt;</comment>
                            <comment id="14043003" author="davidzchen" created="Wed, 25 Jun 2014 03:30:27 +0000"  >&lt;p&gt;I don&apos;t think these two test failures are related.&lt;/p&gt;</comment>
                            <comment id="14043092" author="szehon" created="Wed, 25 Jun 2014 06:34:40 +0000"  >&lt;p&gt;Hi, I have some high-level comments.  This is a good idea, but I think it will be much cleaner once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; is implemented?&lt;/p&gt;

&lt;p&gt;One more thought, I&apos;m a bit hesitant on enforcing all new HiveSerdes to must plugin to this test.  It seems hard for some Serde, the way the test is written.  As test uses metastore schema, to get Avro to plugin, you have written a lot of test-code to translate metastore-table to avro schema, and even tests to test that code, maybe its over-complicated.&lt;/p&gt;

&lt;p&gt;There is a conf SERDESUSINGMETASTOREFORSCHEMA, would it work to first enforce tests for those serdes?  Or not sure if the test can be re-factored to make it simpler for avro to be pluged-in?  What do you think?&lt;/p&gt;</comment>
                            <comment id="14043955" author="davidzchen" created="Wed, 25 Jun 2014 19:40:42 +0000"  >&lt;p&gt;Thanks for your feedback, Szehon.&lt;/p&gt;

&lt;p&gt;I also think that this patch will be much cleaner once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; is done. Do we expect that it will be committed soon?&lt;/p&gt;

&lt;p&gt;For SERDEUSINGMETASTOREFORSCHEMA, do you mean that we can use it to have the AvroSerDe use the metastore schema and not have to specify an Avro schema?&lt;/p&gt;</comment>
                            <comment id="14046268" author="szehon" created="Fri, 27 Jun 2014 18:51:14 +0000"  >&lt;p&gt;Yea it seems worthwhile to get &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; in, thanks for your help in that.&lt;/p&gt;

&lt;p&gt;Sorry for late response.  Those Serdes in SERDEUSINGMETASTOREFORSCHEMA use the native hive metadata to determine schemas, instead of ones like avro that specify it outside.  Hence those can easily plug into HCatMapReduceTest via params, as it creates table using native hive metadata.  But I&apos;m personally not that eager to force other Serde to plugin to the test, as you had to write lengthy schema-conversion code for avro to do that, that is test-only code and a burden to maintain as there&apos;s no real use-case elsewhere for that.  I think its wonderful if a test framework can automatically generate tests for new serdes, but I don&apos;t think it should enforce this unnecessary work on new-serde devs, as test-coverage can be achieved in more natural ways.  &lt;/p&gt;

&lt;p&gt;Hence, would it make sense to just automate/enforce paremeterization of the test for serde&apos;s in SERDEUSINGMETASTOREFORSCHEMA, and handle other serdes like avro as a one-off?&lt;/p&gt;</comment>
                            <comment id="14056894" author="davidzchen" created="Wed, 9 Jul 2014 23:20:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;, thanks for taking the time to review this patch and for your feedback and advice.&lt;/p&gt;

&lt;p&gt;I have made some progress finishing &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; and fixing the remaining test failures. However, as I am working on that patch, I realized that it only covers the current set of &quot;native&quot; SerDes, i.e. Sequence File, text, Parquet, ORC, and RCFile but not Avro and any of the other SerDes found throughout the Hive codebase. However, I do not think that this test should be limited to only covering those storage formats or only the ones in SERDESUSINGMETASTOREFORSCHEMA. They should cover all SerDes in the Hive codebase, especially since it is very likely that the other SerDes are actually being used; we use Avro almost exclusively here at LinkedIn.&lt;/p&gt;

&lt;p&gt;After further thought, Avro is a particular special case because it requires an Avro schema to be set in the SerDe or table properties, and as a result, the test code must provide the TypeInfo to Avro Schema converter. This is a requirement that other SerDes do not have. At the same time, the TypeInfo to Avro Schema converter has good test coverage and will become useful when we make the AvroSerDe a native Hive storage format and remove the requirement for specifying an Avro schema, which should definitely be done in the future.&lt;/p&gt;

&lt;p&gt;SerDe devs would only be required to add an entry to the table in the test with the SerDe class and nulls in the other fields. This would indicate that HCatalog is not being tested against the new storage format.&lt;/p&gt;

&lt;p&gt;I am currently blocked on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; because there seems to be some issues with the pre-commit tests; even so, I think I will need to spend some more time to finish that patch. After further thought, after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; is committed, I think we will still want to keep most of the code in this patch and just modify the test to make exceptions using the enumeration of StorageFormatDescriptor in place of the TestStorageFormat classes (which is nearly identical to StorageFormatDescriptor).&lt;/p&gt;

&lt;p&gt;Since this patch is ready and expands the coverage of the HCatMapReduceTest tests to run against RCFile, ORC, and SequenceFile and that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; will take more time to complete, I think we should go ahead and commit this patch and open a new ticket to make the necessary changes to these tests once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-05976&lt;/del&gt;&lt;/a&gt; is done. I am also working on adding a similar fixture to the HCatalog Pig Adapter tests, which also requires this patch.&lt;/p&gt;</comment>
                            <comment id="14057102" author="szehon" created="Thu, 10 Jul 2014 04:05:46 +0000"  >&lt;p&gt;OK that sounds reasonable.  So if I understand correctly, this patch will enforce test only on serde&apos;s registered via StorageFormatDescriptor, which is trivial for serde author.  Avro wont be tested until its registered that way, at which point there wont be a need to specify avro-schema and hence also trivial.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;SerDe devs would only be required to add an entry to the table in the test with the SerDe class and nulls in the other fields. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can we make a total no-op for serde author, ie the test auto-generates the parameters based on StorageFormatDescriptor list?&lt;/p&gt;</comment>
                            <comment id="14057911" author="davidzchen" created="Thu, 10 Jul 2014 20:27:34 +0000"  >&lt;p&gt;Currently, the patch will only test against the entires in the table that specify a TestStorageFormat class since there is currently no way to infer the mapping of SerDe to InputFormat/OutputFormat. Once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; is in, then the TestStorageFormat classes will be removed and the StorageFormatDescriptor classes will be used. However, this will require additional code changes to properly handle storage formats with configurable SerDes, such as RCFile. The test code for Avro is in this patch, but the tests (along with the tests for Parquet) will currently fail due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4329&quot; title=&quot;HCatalog should use getHiveRecordWriter rather than getRecordWriter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4329&quot;&gt;HIVE-4329&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To clarify, once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; is in and the corresponding changes to this fixture are made, then SerDe devs would only need to add an entry to the table if they &lt;em&gt;do not&lt;/em&gt; want their SerDe tested against HCatalog.&lt;/p&gt;</comment>
                            <comment id="14061548" author="davidzchen" created="Tue, 15 Jul 2014 02:05:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt; has been committed. I have rebased on trunk and updated the fixture to make use of StorageFormatDescriptor from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5976&quot; title=&quot;Decouple input formats from STORED as keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5976&quot;&gt;&lt;del&gt;HIVE-5976&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I have updated RB and attached a new patch.&lt;/p&gt;</comment>
                            <comment id="14061557" author="davidzchen" created="Tue, 15 Jul 2014 02:16:10 +0000"  >&lt;p&gt;Adding a new patch with updated code comments.&lt;/p&gt;</comment>
                            <comment id="14062116" author="hiveqa" created="Tue, 15 Jul 2014 14:26:56 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12655701/HIVE-7286.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12655701/HIVE-7286.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5768 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_temp_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/789/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/789/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/789/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/789/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-789/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-789/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12655701&lt;/p&gt;</comment>
                            <comment id="14062522" author="davidzchen" created="Tue, 15 Jul 2014 19:27:04 +0000"  >&lt;p&gt;Since this patch pretty much contains test changes and the above test that are failing, including the TestHCatLoader test, are in other projects, they do not seem related.&lt;/p&gt;</comment>
                            <comment id="14062562" author="szehon" created="Tue, 15 Jul 2014 20:00:43 +0000"  >&lt;p&gt;Hi David, can we get rid of StorageCustomHandler once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; is committed?  Would it make sense to commit that first, so this is cleaner?&lt;/p&gt;

&lt;p&gt;Also just my two cents, I&apos;m still not in favor of the test inspecting the classpath and failing if a certain serde hasn&apos;t been either registered by StorageFormatDescriptor or excluded by the test.  Like what if you wrote a test serde, then you need to go to this test and put it on the exclude list otherwise it will fail.  Or what if you have a dirty classpath, it still seems a bit flaky to me.  Can we get rid of that part?  Again I&apos;m ok with generating parameters for the StorageFormatDescriptor serdes and even the &apos;additional&apos; serdes&lt;/p&gt;</comment>
                            <comment id="14062613" author="davidzchen" created="Tue, 15 Jul 2014 20:39:31 +0000"  >&lt;p&gt;Hi Szehon,&lt;/p&gt;

&lt;p&gt;Thank you for your feedback.&lt;/p&gt;

&lt;p&gt;Yes, once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; is committed, we will be able to get rid of StorageCustomHandler. However, since this patch has been complete and working for quite some time now, I think it is better to push ahead and get this patch in, even if &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; has not been committed yet. Removing StorageCustomHandler is easy to do, and I can open a separate ticket and do that once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; is in. My main concern is that it is difficult to say when &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; will be done and committed, and I would rather not have this patch be blocked for too long because it is blocking other HCatalog test work that I am doing.&lt;/p&gt;

&lt;p&gt;I understand that the use of reflection in the test will make SerDe development a bit more involved, but I think that it is, in fact, better if SerDe development is made more rigorous. I think that ideally, all SerDes and Input/OutputFormats in Hive should be accounted for by the set of StorageFormatDescriptors in Hive. Otherwise, it will be increasingly difficult to enforce a consistent code quality and test coverage for all available storage formats supported by Hive.&lt;/p&gt;</comment>
                            <comment id="14065569" author="davidzchen" created="Thu, 17 Jul 2014 21:19:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt; - By the way, I have opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7440&quot; title=&quot;Remove custom code for Avro in HCatMapReduceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7440&quot;&gt;&lt;del&gt;HIVE-7440&lt;/del&gt;&lt;/a&gt; to remove StorageCustomHandler once both this patch and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; are committed.&lt;/p&gt;</comment>
                            <comment id="14065867" author="szehon" created="Fri, 18 Jul 2014 01:30:46 +0000"  >&lt;p&gt;Thanks David.  I&apos;d rather have &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; committed first if it shouldn&apos;t take too long. &lt;/p&gt;

&lt;p&gt;As for the classpath part, we are at a disagreement.  I respect your desire to make the Serde contract stricter, although I feel its a bigger topic than this JIRA.  But even if thats the decision, having an HCat test be the enforcer seems strange.  To me, its an illogical module to enforce that (should be in Hive if thats the case), and prone to error (say if you end up in an environment where the test&apos;s classpath is different).&lt;/p&gt;</comment>
                            <comment id="14071146" author="davidzchen" created="Wed, 23 Jul 2014 00:01:23 +0000"  >&lt;p&gt;Thanks for reviewing this patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;Szehon Ho&lt;/a&gt;. I have removed the reflection code. The fixture is now testing against the set of native storage formats and the ones specified in additional storage formats list in the test since the native storage formats are regarded as the &quot;official&quot; and most complete storage formats supported by Hive.&lt;/p&gt;

&lt;p&gt;I will open another ticket to add documentation about this to the Wiki.&lt;/p&gt;</comment>
                            <comment id="14071160" author="szehon" created="Wed, 23 Jul 2014 00:13:18 +0000"  >&lt;p&gt;Thanks a lot, David, appreciate it.  Can you update the review board if you haven&apos;t already? &lt;/p&gt;</comment>
                            <comment id="14071183" author="davidzchen" created="Wed, 23 Jul 2014 00:32:23 +0000"  >&lt;p&gt;Thanks, Szehon.&lt;/p&gt;

&lt;p&gt;I have uploaded a new patch with the code for enumerating storage formats into its own utility class for better reuse with other tests. I have updated RB as well.&lt;/p&gt;</comment>
                            <comment id="14071325" author="davidzchen" created="Wed, 23 Jul 2014 03:35:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cwsteinbach&quot; class=&quot;user-hover&quot; rel=&quot;cwsteinbach&quot;&gt;Carl Steinbach&lt;/a&gt; has added a comment to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; asking whether there is any more feedback on that patch. Unless there is additional feedback, it looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; might get committed in the next few days. In that case, let&apos;s wait for that patch to go in, in which case I will be able to remove the StorageCustomHandler code from this patch.&lt;/p&gt;</comment>
                            <comment id="14071326" author="davidzchen" created="Wed, 23 Jul 2014 03:36:56 +0000"  >&lt;p&gt;By the way, I have opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7485&quot; title=&quot;Add documentation on new Serde test fixtures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7485&quot;&gt;HIVE-7485&lt;/a&gt; for adding the documentation.&lt;/p&gt;</comment>
                            <comment id="14071383" author="hiveqa" created="Wed, 23 Jul 2014 05:28:05 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12657269/HIVE-7286.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12657269/HIVE-7286.8.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5802 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join_hash
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_fail_8
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.jdbc.TestJdbcDriver2.testParentReferences
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/15/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/15/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/15/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/15/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-15/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-15/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12657269&lt;/p&gt;</comment>
                            <comment id="14074956" author="davidzchen" created="Fri, 25 Jul 2014 21:27:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6806&quot; title=&quot;CREATE TABLE should support STORED AS AVRO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6806&quot;&gt;&lt;del&gt;HIVE-6806&lt;/del&gt;&lt;/a&gt; was just committed today. I have rebased my patch on trunk and removed all the code that special-cases for Avro (i.e. StorageCustomHandler, etc). I also moved the utility class for enumerating storage formats into the ql module&apos;s test sources for better code reuse.&lt;/p&gt;

&lt;p&gt;I have attached a new patch and updated RB.&lt;/p&gt;</comment>
                            <comment id="14075170" author="szehon" created="Sat, 26 Jul 2014 00:45:18 +0000"  >&lt;p&gt;Thanks David, took a look and just had a few more comments/questions on the rb.&lt;/p&gt;</comment>
                            <comment id="14075235" author="hiveqa" created="Sat, 26 Jul 2014 02:55:36 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12657906/HIVE-7286.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12657906/HIVE-7286.10.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 5831 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union31
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join_hash
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_cluster_tasklog_retrieval
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/61/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/61/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/61/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/61/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-61/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-61/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12657906&lt;/p&gt;</comment>
                            <comment id="14075276" author="davidzchen" created="Sat, 26 Jul 2014 06:04:47 +0000"  >&lt;p&gt;Thanks for reviewing, Szehon! I have uploaded a new patch that addresses your RB comments.&lt;/p&gt;</comment>
                            <comment id="14075367" author="hiveqa" created="Sat, 26 Jul 2014 12:49:19 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12657977/HIVE-7286.11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12657977/HIVE-7286.11.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5831 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_cluster_tasklog_retrieval
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/67/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/67/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/67/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/67/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-67/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-67/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12657977&lt;/p&gt;</comment>
                            <comment id="14075595" author="davidzchen" created="Sun, 27 Jul 2014 09:48:28 +0000"  >&lt;p&gt;The test failures do not appear to be related. I think this patch is ready to be committed unless there are any more feedback.&lt;/p&gt;</comment>
                            <comment id="14076548" author="szehon" created="Mon, 28 Jul 2014 18:29:46 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14078746" author="cwsteinbach" created="Wed, 30 Jul 2014 01:23:36 +0000"  >&lt;p&gt;Committed to trunk. Thanks David!&lt;/p&gt;</comment>
                            <comment id="14078750" author="davidzchen" created="Wed, 30 Jul 2014 01:25:52 +0000"  >&lt;p&gt;Thanks, Carl!&lt;/p&gt;</comment>
                            <comment id="14210564" author="thejas" created="Thu, 13 Nov 2014 19:41:28 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12729080">HIVE-7484</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12683190">HIVE-5976</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12727513">HIVE-7420</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12641836">HIVE-4329</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12728049">HIVE-7440</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12729081">HIVE-7485</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12652312" name="HIVE-7286.1.patch" size="57011" author="davidzchen" created="Tue, 24 Jun 2014 23:43:55 +0000"/>
                            <attachment id="12657906" name="HIVE-7286.10.patch" size="33786" author="davidzchen" created="Fri, 25 Jul 2014 21:25:57 +0000"/>
                            <attachment id="12657977" name="HIVE-7286.11.patch" size="31902" author="davidzchen" created="Sat, 26 Jul 2014 06:04:47 +0000"/>
                            <attachment id="12655667" name="HIVE-7286.2.patch" size="47995" author="davidzchen" created="Tue, 15 Jul 2014 02:05:58 +0000"/>
                            <attachment id="12655670" name="HIVE-7286.3.patch" size="49490" author="davidzchen" created="Tue, 15 Jul 2014 02:16:10 +0000"/>
                            <attachment id="12655701" name="HIVE-7286.4.patch" size="48876" author="davidzchen" created="Tue, 15 Jul 2014 06:18:30 +0000"/>
                            <attachment id="12657216" name="HIVE-7286.5.patch" size="48861" author="davidzchen" created="Tue, 22 Jul 2014 22:58:16 +0000"/>
                            <attachment id="12657217" name="HIVE-7286.6.patch" size="48301" author="davidzchen" created="Tue, 22 Jul 2014 23:03:57 +0000"/>
                            <attachment id="12657238" name="HIVE-7286.7.patch" size="49767" author="davidzchen" created="Wed, 23 Jul 2014 00:30:27 +0000"/>
                            <attachment id="12657269" name="HIVE-7286.8.patch" size="49886" author="davidzchen" created="Wed, 23 Jul 2014 03:43:58 +0000"/>
                            <attachment id="12657895" name="HIVE-7286.9.patch" size="33943" author="davidzchen" created="Fri, 25 Jul 2014 20:49:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jun 2014 02:28:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401695</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x54v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401766</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-7287] hive --rcfilecat command is broken on Windows</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7287</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;c:\&amp;gt; hive --rcfilecat --file-sizes --column-sizes-pretty /tmp/all100krc
Not a valid JAR: C:\org.apache.hadoop.hive.cli.RCFileCat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;NO PRECOMMIT TESTS&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="12723511">HIVE-7287</key>
            <summary>hive --rcfilecat command is broken on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepesh">Deepesh Khandelwal</assignee>
                                    <reporter username="deepesh">Deepesh Khandelwal</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 23:24:36 +0000</created>
                <updated>Thu, 13 Nov 2014 19:41:36 +0000</updated>
                            <resolved>Wed, 2 Jul 2014 20:20:42 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>CLI</component>
                    <component>Windows</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14042842" author="deepesh" created="Tue, 24 Jun 2014 23:31:37 +0000"  >&lt;p&gt;Attaching a patch with the fix. Basically JAR needs to be set before calling the execHiveCmd script. execHiveCmd script in order executes a hadoop jar %JAR% %CLASS% ... command.&lt;/p&gt;</comment>
                            <comment id="14044976" author="jdere" created="Thu, 26 Jun 2014 18:19:49 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14050660" author="jdere" created="Wed, 2 Jul 2014 20:20:42 +0000"  >&lt;p&gt;Committed to trunk. Thanks Deepesh!&lt;/p&gt;</comment>
                            <comment id="14050684" author="deepesh" created="Wed, 2 Jul 2014 20:40:21 +0000"  >&lt;p&gt;Thanks Jason for the review and commit!&lt;/p&gt;</comment>
                            <comment id="14210595" author="thejas" created="Thu, 13 Nov 2014 19:41:36 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12652308" name="HIVE-7287.1.patch" size="912" author="deepesh" created="Tue, 24 Jun 2014 23:31:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Jun 2014 18:19:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x553:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401767</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
