<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:15:52 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2010-5-19+AND+created+%3C%3D+2010-5-26+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="19" total="19"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-1351] Tool to cat rcfiles</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1351</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;br/&gt;
It will be useful for debugging&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464855">HIVE-1351</key>
            <summary>Tool to cat rcfiles</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 May 2010 01:43:13 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:18 +0000</updated>
                            <resolved>Wed, 19 May 2010 20:07:53 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12868988" author="he yongqiang" created="Wed, 19 May 2010 04:46:44 +0000"  >&lt;p&gt;hive.1351.2.patch added the script part in bin/&lt;/p&gt;</comment>
                            <comment id="12869010" author="namit" created="Wed, 19 May 2010 06:09:34 +0000"  >&lt;p&gt;The script doesnt seem to work - can you describe how to use this ?&lt;/p&gt;</comment>
                            <comment id="12869196" author="he yongqiang" created="Wed, 19 May 2010 16:35:35 +0000"  >&lt;p&gt;It&apos;s  hive --service rcfilecat &lt;span class=&quot;error&quot;&gt;&amp;#91;--start=xxx&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;--length=yyy&amp;#93;&lt;/span&gt; filename&lt;/p&gt;</comment>
                            <comment id="12869218" author="namit" created="Wed, 19 May 2010 17:35:52 +0000"  >&lt;p&gt;will test and commit if tests pass&lt;/p&gt;</comment>
                            <comment id="12869257" author="nzhang" created="Wed, 19 May 2010 18:39:58 +0000"  >&lt;p&gt;what&apos;s the reason to change cli.sh?&lt;/p&gt;</comment>
                            <comment id="12869284" author="appodictic" created="Wed, 19 May 2010 19:38:12 +0000"  >&lt;p&gt;As ning mentioned why move the cli code. If anything more of the code should be moving up into the main script rather then into smaller scripts. I see people making changes to only the cli. We have to make sure that fixes for things like cygwin get propogated to all files, or shared code gets shared.&lt;/p&gt;

&lt;p&gt;Also rcfilecat is just a debug util, but it should have a unit test right? Just cat to files to make sure it works?&lt;/p&gt;</comment>
                            <comment id="12869287" author="indigoviolet" created="Wed, 19 May 2010 19:42:21 +0000"  >&lt;p&gt;I think we&apos;ll end up using rcfilecat in a lot of stuff, not just for debugging &amp;#8211; (to dump small tables for off-Hive processing). It should be treated as production code IMO.&lt;/p&gt;</comment>
                            <comment id="12869301" author="namit" created="Wed, 19 May 2010 20:07:53 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                            <comment id="12869306" author="he yongqiang" created="Wed, 19 May 2010 20:12:37 +0000"  >&lt;p&gt;I moved almost all cli.sh code to util/execHiveCmd because these code can be shared with rcfilecat. i think these code should be independent (we may add new command in future.)  &lt;/p&gt;</comment>
                            <comment id="12869344" author="appodictic" created="Wed, 19 May 2010 21:06:53 +0000"  >&lt;p&gt;This is so notpicky, but&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    --rcfilecat)
+      SERVICE=rcfilecat
+      shift
+      ;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I do not think we should do this. We are just giving alternate invocations that end up being more confusing.&lt;/p&gt;

&lt;p&gt;Why should you be able to do this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive --rcfilecat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but not&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
hive --hwi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;?&lt;/p&gt;

&lt;p&gt;as for execHiveCmd. If you want to share this why not move it up into bin/hive? We do not need to add a file to shared when subs specified in in bin/hive are already shared.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12444874" name="hive.1351.1.patch" size="4219" author="he yongqiang" created="Wed, 19 May 2010 02:55:25 +0000"/>
                            <attachment id="12444878" name="hive.1351.2.patch" size="7987" author="he yongqiang" created="Wed, 19 May 2010 04:46:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 May 2010 04:46:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lepj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1352] rcfilecat should use &apos;\t&apos; to separate columns and print &apos;\r\n&apos; at the end of each row.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1352</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Talked to Venky, rcfilecat needs to add column and line delimiters. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12464940">HIVE-1352</key>
            <summary>rcfilecat should use &apos;\t&apos; to separate columns and print &apos;\r\n&apos; at the end of each row.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 May 2010 20:24:17 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:56 +0000</updated>
                            <resolved>Thu, 20 May 2010 13:52:01 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12869327" author="indigoviolet" created="Wed, 19 May 2010 20:47:15 +0000"  >&lt;p&gt;why &apos;\r\n&apos;?&lt;/p&gt;</comment>
                            <comment id="12869337" author="he yongqiang" created="Wed, 19 May 2010 20:56:06 +0000"  >&lt;p&gt;because of Windows?&lt;/p&gt;</comment>
                            <comment id="12869434" author="namit" created="Thu, 20 May 2010 00:53:58 +0000"  >&lt;p&gt;Dont put a TAB at the end of the last column&lt;/p&gt;</comment>
                            <comment id="12869481" author="namit" created="Thu, 20 May 2010 05:11:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12869608" author="namit" created="Thu, 20 May 2010 13:52:01 +0000"  >&lt;p&gt;committed. thanks Yongqiang&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12444976" name="hive.1352.1.patch" size="810" author="he yongqiang" created="Wed, 19 May 2010 20:31:36 +0000"/>
                            <attachment id="12445013" name="hive.1352.2.patch" size="1232" author="he yongqiang" created="Thu, 20 May 2010 01:46:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 May 2010 20:47:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72949</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lepr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123034</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1353] load_dyn_part*.q tests need ORDER BY for determinism</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1353</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Just now got a spurious failure from this while testing something else.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I la\&lt;br/&gt;
stAccessTime -I owner -I transient_lastDdlTime -I java.lang.RuntimeException -I\&lt;br/&gt;
 at org -I at sun -I at java -I at junit -I Caused by: -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more\&lt;br/&gt;
 /data/users/jsichi/open/commit-trunk/.ptest_0/build/ql/test/logs/clientpositiv\&lt;br/&gt;
e/load_dyn_part14.q.out /data/users/jsichi/open/commit-trunk/.ptest_0/ql/src/te\&lt;br/&gt;
st/results/clientpositive/load_dyn_part14.q.out                                 &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 261,262d260                                                         &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; k1        _&lt;em&gt;HIVE_DEFAULT_PARTITION&lt;/em&gt;_                              &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; k1        _&lt;em&gt;HIVE_DEFAULT_PARTITION&lt;/em&gt;_                              &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 264a263,264                                                         &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; k1        _&lt;em&gt;HIVE_DEFAULT_PARTITION&lt;/em&gt;_                              &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; k1        _&lt;em&gt;HIVE_DEFAULT_PARTITION&lt;/em&gt;_                              &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1      &lt;/p&gt;</description>
                <environment></environment>
        <key id="12464946">HIVE-1353</key>
            <summary>load_dyn_part*.q tests need ORDER BY for determinism</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 May 2010 20:54:36 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:43 +0000</updated>
                            <resolved>Thu, 20 May 2010 21:28:54 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12869774" author="nzhang" created="Thu, 20 May 2010 21:18:20 +0000"  >&lt;p&gt;+1. will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12869777" author="nzhang" created="Thu, 20 May 2010 21:28:54 +0000"  >&lt;p&gt;Committed. Thanks John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445101" name="HIVE-1353.1.patch" size="5731" author="jvs" created="Thu, 20 May 2010 21:07:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 May 2010 21:18:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lepz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123035</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1354] partition level properties honored if it exists</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1354</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;drop table partition_test_partitioned;&lt;/p&gt;

&lt;p&gt;create table partition_test_partitioned(key string, value string) partitioned by (dt string);&lt;/p&gt;

&lt;p&gt;alter table partition_test_partitioned set fileformat rcfile;&lt;br/&gt;
insert overwrite table partition_test_partitioned partition(dt=101) select * from src1;&lt;br/&gt;
show table extended like partition_test_partitioned partition(dt=101);&lt;/p&gt;

&lt;p&gt;alter table partition_test_partitioned set fileformat Sequencefile;&lt;br/&gt;
insert overwrite table partition_test_partitioned partition(dt=102) select * from src1;&lt;br/&gt;
show table extended like partition_test_partitioned partition(dt=102);&lt;/p&gt;

&lt;p&gt;insert overwrite table partition_test_partitioned partition(dt=101) select * from src1;&lt;br/&gt;
show table extended like partition_test_partitioned partition(dt=101);&lt;/p&gt;

&lt;p&gt;drop table partition_test_partitioned;&lt;/p&gt;


&lt;p&gt;Partition (dt=101) still points to RCFile, since it was created as a RCFile&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464965">HIVE-1354</key>
            <summary>partition level properties honored if it exists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 May 2010 23:02:44 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:39 +0000</updated>
                            <resolved>Fri, 21 May 2010 06:40:34 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12869898" author="he yongqiang" created="Fri, 21 May 2010 06:40:34 +0000"  >&lt;p&gt;I just committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445124" name="hive.1354.1.patch" size="17304" author="namit" created="Fri, 21 May 2010 01:04:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 May 2010 06:40:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72947</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123036</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1355] Hive should use NullOutputFormat for hadoop jobs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1355</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;see &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1802&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAPREDUCE-1802&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;hive doesn&apos;t depend on hadoop job output folder. it produces output exclusively via side effect folders. we should use an outputformat that can request hadoop skip cleanup/setup. this could be nulloutputformat (unless there are any objections in hadoop to changing nulloutputformat behavior).&lt;/p&gt;

&lt;p&gt;as a small side effect, it also avoids some totally unnecessary hdfs file creates and deletes in hdfs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464984">HIVE-1355</key>
            <summary>Hive should use NullOutputFormat for hadoop jobs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsensarma">Joydeep Sen Sarma</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 May 2010 01:05:49 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:22 +0000</updated>
                            <resolved>Wed, 2 Jun 2010 16:36:35 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12874313" author="jsensarma" created="Tue, 1 Jun 2010 23:50:06 +0000"  >&lt;p&gt;set nulloutputformat as hive output format&lt;br/&gt;
set option to omit setup/cleanup for hive submitted jobs&lt;/p&gt;</comment>
                            <comment id="12874452" author="namit" created="Wed, 2 Jun 2010 06:26:48 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12874647" author="namit" created="Wed, 2 Jun 2010 16:36:35 +0000"  >&lt;p&gt;Committed. Thanks Joydeep&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446077" name="1355.1.patch" size="11173" author="jsensarma" created="Tue, 1 Jun 2010 23:50:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Jun 2010 06:26:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123037</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1356] Allow uncommitted inserts and commit explicitly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1356</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Uncommitted inserts should not show up in show tables, show partitions etc. We would like to use an explicit commit to make partitions/tables visible after we have inserted all the data that we want. This feature becomes important when there are multi-partition or multi-table inserts. Consumers of the tables/partitions can then wait on just one of the partitions (or a top-level partition) and be certain that they will not start reading a table while it is still being written into.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464987">HIVE-1356</key>
            <summary>Allow uncommitted inserts and commit explicitly</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 May 2010 02:05:58 +0000</created>
                <updated>Thu, 20 May 2010 08:49:55 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12461472">HIVE-1293</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42533</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08n9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1357] CombineHiveInputSplit should initialize the inputFileFormat once for a single split</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1357</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If a split consists of multiple files, the FileFormat should always be the same, whether RCFile or SequenceFile. Currently the CombineHiveInputSplit tries to get the inputFileFormat for each new file in the split, which is O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; where n is the number of files in the split. This is an O(n^2) operation and degrade the performance badly for combining large number of small files. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12465082">HIVE-1357</key>
            <summary>CombineHiveInputSplit should initialize the inputFileFormat once for a single split</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 May 2010 01:04:34 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:54 +0000</updated>
                            <resolved>Fri, 21 May 2010 18:08:47 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12869888" author="namit" created="Fri, 21 May 2010 06:11:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good&lt;/p&gt;</comment>
                            <comment id="12870081" author="namit" created="Fri, 21 May 2010 18:08:46 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445126" name="HIVE-1357.patch" size="1961" author="nzhang" created="Fri, 21 May 2010 01:10:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 May 2010 06:11:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72945</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123038</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1358] provide a way for user defined routines to access Hive configuration</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1358</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The user requesting this tried Hive.get().getConf().getInt(&quot;your.property.name&quot;, 1000) but said that didn&apos;t work, which is not surprising.  If anyone knows of some way to do this which already exists, let me know.  Otherwise, we can think about how to provide something, maybe via GenericUDFUtils since this information is global.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465150">HIVE-1358</key>
            <summary>provide a way for user defined routines to access Hive configuration</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 May 2010 19:09:09 +0000</created>
                <updated>Sat, 6 Dec 2014 05:23:29 +0000</updated>
                                            <version>0.5.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08na7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48371</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-1359] Unit test should be shim-aware</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1359</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Some features in Hive only works for certain Hadoop versions through shim. However the unit test structure is not shim-aware in that there is only one set of queries and expected outputs for all Hadoop versions. This may not be sufficient when we will have different output for different Hadoop versions. One example is CombineHiveInputFormat wich is only available from Hadoop 0.20. The plan using CombineHiveInputFormat and HiveInputFormat may be different. Another example is archival partitions (HAR) which is also only available from 0.20. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12465151">HIVE-1359</key>
            <summary>Unit test should be shim-aware</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 May 2010 19:18:56 +0000</created>
                <updated>Thu, 2 May 2013 02:29:31 +0000</updated>
                            <resolved>Wed, 23 Jun 2010 18:25:13 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12870126" author="nzhang" created="Fri, 21 May 2010 19:40:25 +0000"  >&lt;p&gt;The proposal is to change the unit test directory structure to the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ql/src/test/queries/ clientpositive/common/  -- all .q files that should work on all Hadoop versions and whose outputs are the same
                                                      /shim/0.17 -- all .q files that only works on 0.17 and have different output than other Hadoop versions.
                                                                /0.18 -- ditto, could be a symlink to 0.17
                                                                /0.17 -- ditto coulbe a symlink to 0.17
                                                                / 0.20 -- .q files only works on hadoop 0.20 or output files are different from other hadoop versions.
ql/src/test/results/clientpositive/common/ -- .out files in the corresponding queries directory.
                                                    /shim/0.17 -- corresponding out file directories
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The QTestUtil should be changed to be shim-aware: in addition to test common/*.q files, it also need to test .q files in the specific hadoop version. &lt;/p&gt;

&lt;p&gt;For committers, if there are multiple distinct set of test files (say 0.17 and 0.20), they need to test both versions before committing. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  $ ant test -Dhadoop.version=0.17.2.1 ...
  $ ant test -Dhadoop.version=0.20.0 ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For developers, if a new .q test is added and it is not shim-aware (i.e., does not depends on Hadoop version), it should be put into common only. If it is shim-aware (say having different behavior in Hadoop 0.20), it should be put in ALL shim subdirectories shim/0.17--0.20, but NOT common. The reason is that&lt;br/&gt;
common is tested for all hadoop versions and if it is put there different results will be expected. &lt;/p&gt;</comment>
                            <comment id="12870239" author="namit" created="Sat, 22 May 2010 00:18:01 +0000"  >&lt;p&gt;Let us generalize it even more - was talking to John just now.&lt;br/&gt;
We have similar requirements for miniMr cluster vs. current local mode.&lt;/p&gt;</comment>
                            <comment id="12871850" author="nzhang" created="Wed, 26 May 2010 17:53:51 +0000"  >&lt;p&gt;Discussed offline with Namit, John, and Paul. We need to generalize the unit test framework to improve code coverage. Uploading a design doc unit_test.txt for review. &lt;/p&gt;


</comment>
                            <comment id="12871940" author="jvs" created="Wed, 26 May 2010 20:54:54 +0000"  >&lt;p&gt;Regarding proposed change #1, let&apos;s keep the test include/exclude specifications in a separate test-config.xml (imported from build.xml or whatever) to make maintenance easier.&lt;/p&gt;

&lt;p&gt;Regarding proposed change #2, let&apos;s try to keep conf duplication to a minimum where possible.  In an HBase core-site.xml file, I saw this syntax used to pull in additional configuration overlay; not sure if that works in Hive conf files too:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;xi:include href=&quot;core-site-custom.xml&quot; xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Regarding proposed change #3, the user should not need to do this explicitly when running ant test unless they want to override, right?  It should happen automatically based on the Hadoop version chosen.&lt;/p&gt;

&lt;p&gt;Regarding proposed change #4, what we actually want is the ability to declare a subset of tests as needing minimr and run them that way by default with ant test (no -D required by the person running the tests, although internally we will set the property as part of invoking the test).  We can take this up separately in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-117&quot; title=&quot;hive regression tests should also execute jobs in non-local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-117&quot;&gt;HIVE-117&lt;/a&gt;; just want to make the requirements clear here.&lt;/p&gt;</comment>
                            <comment id="12871982" author="nzhang" created="Wed, 26 May 2010 22:23:23 +0000"  >&lt;p&gt;#1: will do that in a separate xml file. &lt;br/&gt;
#2: hive-default.xml should be the default for all tests. hive-site.xml is an overlay on top of that and it can only contains special Hive configs related to shims/minimr. I&apos;m thinking to define a hive-site-&amp;lt;shims&amp;gt;-&amp;lt;minimr/local&amp;gt;.xml for each combination if they require special hive parameters. which file should be used should be determined by the -Dhaoop.version and -Dhadoop.mode values. &lt;br/&gt;
#3: yes.  if the user specifies the hadoop configuration using -Dhadoop.* and not -Dhive.conf we will use the default one as mentioned in #2. The -Dhive.conf gives the user an additional flexibility to test non-default hive settings easily.&lt;br/&gt;
#4 I agree we should be add minimr test as part of the default testing. Since &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-117&quot; title=&quot;hive regression tests should also execute jobs in non-local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-117&quot;&gt;HIVE-117&lt;/a&gt; already tracking that, I&apos;ll leave it out of this jira, which should be easier once this patch is checked in. &lt;/p&gt;</comment>
                            <comment id="12872990" author="athusoo" created="Fri, 28 May 2010 14:06:25 +0000"  >&lt;p&gt;+1 to all the great suggestions in this discussion...&lt;/p&gt;

&lt;p&gt;I have one more thing to add. Would it be more maintainable to associate the include/exclude information with the test as the key as opposed to the version being the key i.e.&lt;/p&gt;

&lt;p&gt;instead of&lt;/p&gt;

&lt;p&gt;0.20.0&lt;br/&gt;
  include - test1.q, test2.q ..&lt;br/&gt;
  exclude - test3.q&lt;/p&gt;

&lt;p&gt;0.17.0&lt;br/&gt;
  include - test3.q&lt;br/&gt;
  exclude - test1.q&lt;/p&gt;

&lt;p&gt;we do&lt;/p&gt;

&lt;p&gt;test1.q&lt;br/&gt;
  exclude - &amp;lt; 0.17.0&lt;/p&gt;

&lt;p&gt;test2.q&lt;br/&gt;
  include - &amp;gt;= 0.17.0&lt;/p&gt;

&lt;p&gt;or something on that line... this may make adding tests to versions fairly easy.&lt;/p&gt;</comment>
                            <comment id="12873132" author="nzhang" created="Fri, 28 May 2010 20:06:45 +0000"  >&lt;p&gt;@ashish, what you propose is a finer granular control of under which configuration this test file should be excluded (a test is included to all configurations by default). This is fine as well. Actually Paul has a txn that implement this already. So we may just take that change and let user specify that per .q file. &lt;/p&gt;

</comment>
                            <comment id="12881255" author="namit" created="Tue, 22 Jun 2010 17:21:27 +0000"  >&lt;p&gt;Requirements 2 and 3 are not addressed in the above patch - talked to Ning offline, and we can do them in a follow-up.&lt;br/&gt;
Filed a new jira for the same &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1424&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1424&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12881258" author="namit" created="Tue, 22 Jun 2010 17:30:18 +0000"  >&lt;p&gt;This is also needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1307&lt;/a&gt; in 0.6&lt;br/&gt;
We can fix &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1424&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1424&lt;/a&gt; in 0.7, it need not be merged in 0.6&lt;/p&gt;</comment>
                            <comment id="12881274" author="namit" created="Tue, 22 Jun 2010 18:09:39 +0000"  >&lt;p&gt;Looks good to me - John, can you also review ?&lt;/p&gt;</comment>
                            <comment id="12881285" author="jvs" created="Tue, 22 Jun 2010 18:27:13 +0000"  >&lt;p&gt;Since we&apos;re not actually dealing with the minimr requirement in this patch, probably better to just leave out those changes completely and we&apos;ll address them in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-117&quot; title=&quot;hive regression tests should also execute jobs in non-local mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-117&quot;&gt;HIVE-117&lt;/a&gt;.  In particular, I don&apos;t think the cluster mode should be part of the test code generation; we want it completely dynamic so that we re-run the same test in either mode without regenerating code.&lt;/p&gt;

&lt;p&gt;Minor nitpicks (these can be fixed in the followup instead of now):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hadoopVersion = new String(&quot;&quot;) is the same as hadoopVersion = &quot;&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;usage of Stack is deprecated since it is based on synchronized Vector&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12881407" author="nzhang" created="Tue, 22 Jun 2010 22:22:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1359&quot; title=&quot;Unit test should be shim-aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1359&quot;&gt;&lt;del&gt;HIVE-1359&lt;/del&gt;&lt;/a&gt;.2.patch removes the changes involves miniMR. &lt;/p&gt;</comment>
                            <comment id="12881431" author="jvs" created="Tue, 22 Jun 2010 22:52:00 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="12881808" author="jvs" created="Wed, 23 Jun 2010 18:25:13 +0000"  >&lt;p&gt;Committed.  Thanks Ning!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12467596">HIVE-1424</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12467596">HIVE-1424</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12447756" name="HIVE-1359.2.patch" size="7879" author="nzhang" created="Tue, 22 Jun 2010 22:22:11 +0000"/>
                            <attachment id="12447634" name="HIVE-1359.patch" size="12248" author="nzhang" created="Tue, 22 Jun 2010 00:17:50 +0000"/>
                            <attachment id="12445571" name="unit_tests.txt" size="1776" author="nzhang" created="Wed, 26 May 2010 17:54:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 22 May 2010 00:18:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1360] Allow UDFs to access constant parameter values at compile time</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1360</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;UDFs should be able to access constant parameter values at compile time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465154">HIVE-1360</key>
            <summary>Allow UDFs to access constant parameter values at compile time</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 May 2010 19:41:21 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:38 +0000</updated>
                            <resolved>Tue, 27 Sep 2011 23:00:49 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                    <component>UDF</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13052896" author="esteban" created="Tue, 21 Jun 2011 22:28:12 +0000"  >&lt;p&gt;Working on a patch on this since its a better alternative to solve my problem in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2124&quot; title=&quot;Specified functions in the partitioning predicates should not generate a M/R job.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2124&quot;&gt;HIVE-2124&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13062645" author="akramer" created="Sat, 9 Jul 2011 22:10:05 +0000"  >&lt;p&gt;Glad this is getting some traction! Ideally, the &quot;constancy&quot; here should be detectable in the init/initialize state, and, if it IS, the constant should be accessible on initialization.&lt;/p&gt;</comment>
                            <comment id="13081128" author="jvs" created="Mon, 8 Aug 2011 19:02:53 +0000"  >&lt;p&gt;Some of the generic base class stuff from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1016&quot; title=&quot;Ability to access DistributedCache from UDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1016&quot;&gt;&lt;del&gt;HIVE-1016&lt;/del&gt;&lt;/a&gt; may be relevant here.&lt;/p&gt;</comment>
                            <comment id="13083513" author="jonchang" created="Thu, 11 Aug 2011 20:50:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;. It has been a long-standing request for UDFs to be able to&lt;br/&gt;
Edit&lt;br/&gt;
access parameter values. This not only enables significant performance&lt;br/&gt;
improvement possibilities, it also allows for fundamentally richer&lt;br/&gt;
behavior, such as allowing the output type of a UDF to depend on its&lt;br/&gt;
inputs.&lt;/p&gt;

&lt;p&gt;The strategy in this diff is to introduce the notion of a&lt;br/&gt;
ConstantObjectInspector, like a regular ObjectInspector except that it&lt;br/&gt;
encapsulates a constant value and knows what this constant value is.&lt;br/&gt;
These COIs are created through a factory method by ExprNodeConstantDesc&lt;br/&gt;
during plan generation hence UDFs will be able to capture these constant&lt;br/&gt;
values during the initialize phase. Furthermore, because these&lt;br/&gt;
ConstantObjectInspectors are simply subinterfaces of ObjectInspector,&lt;br/&gt;
UDFs which are not &quot;constant-aware&quot; receive ObjectInspectors which&lt;br/&gt;
also implement the same interfaces they are used to, so no special&lt;br/&gt;
handling needs to be done for existing UDFs.&lt;/p&gt;

&lt;p&gt;An example UDF which uses this new functionality is also included in&lt;br/&gt;
this diff. NAMED_STRUCT is like STRUCT except that it also allows users&lt;br/&gt;
to specify the names of the fields of the struct, something previously&lt;br/&gt;
not possible because the names of the fields must be known at compile&lt;br/&gt;
time.&lt;/p&gt;

&lt;p&gt;Also see this pull request: &lt;a href=&quot;https://github.com/apache/hive/pull/2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13083530" author="cwsteinbach" created="Thu, 11 Aug 2011 21:05:05 +0000"  >&lt;p&gt;Reassigning to Jonathan.&lt;/p&gt;

&lt;p&gt;@Jonathan: Can you please upload the patch again and this time click the box that gives license rights to the Apache Foundation? Thanks!&lt;/p&gt;</comment>
                            <comment id="13083802" author="jonchang" created="Thu, 11 Aug 2011 23:23:00 +0000"  >&lt;p&gt;Like previous except license is now granted and also fixes show_functions.q.&lt;/p&gt;</comment>
                            <comment id="13084366" author="jvs" created="Fri, 12 Aug 2011 20:46:23 +0000"  >&lt;p&gt;Checked with Carl; he said he&apos;ll review this one.&lt;/p&gt;</comment>
                            <comment id="13084370" author="jonchang" created="Fri, 12 Aug 2011 20:51:19 +0000"  >&lt;p&gt;Sweet, thx!&lt;/p&gt;</comment>
                            <comment id="13084457" author="jiraposter@reviews.apache.org" created="Fri, 12 Aug 2011 23:19:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1486/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1486/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1360&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeConstantEvaluator.java af62934 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java a7b1b77 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeConstantDesc.java bf092d4 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java 6b1ba1b &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java e264709 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNamedStruct.java PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_named_struct.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out d66e844 &lt;br/&gt;
  ql/src/test/results/clientpositive/udf_named_struct.q.out PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ConstantObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 40fd4e3 &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantBooleanObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantByteObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantDoubleObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantFloatObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantIntObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantLongObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantShortObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantStringObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantVoidObjectInspector.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1486/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1486/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;
</comment>
                            <comment id="13084458" author="cwsteinbach" created="Fri, 12 Aug 2011 23:20:41 +0000"  >&lt;p&gt;Attaching &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;.2.patch.txt which is just &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;.patch modified to apply with &lt;tt&gt;patch -p0&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13084945" author="cwsteinbach" created="Mon, 15 Aug 2011 02:37:16 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13084978" author="cwsteinbach" created="Mon, 15 Aug 2011 07:19:04 +0000"  >&lt;p&gt;This patch causes a bunch of test failures. Looks like this is caused by mixing o.a.h.io.*Writable classes with o.a.h.hive.serde2.io.*Writable classes:&lt;/p&gt;


&lt;p&gt;FAILED: Hive Internal Error: java.lang.ClassCastException(org.apache.hadoop.hive.serde2.io.DoubleWritable cannot be cast to org.apache.hadoop.io.DoubleWritable)&lt;br/&gt;
java.lang.ClassCastException: org.apache.hadoop.hive.serde2.io.DoubleWritable cannot be cast to org.apache.hadoop.io.DoubleWritable&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.objectinspector.primitive.PrimitiveObjectInspectorFactory.getPrimitiveWritableConstantObjectInspector(PrimitiveObjectInspectorFactory.java:179)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.plan.ExprNodeConstantDesc.getWritableObjectInspector(ExprNodeConstantDesc.java:67)&lt;/p&gt;</comment>
                            <comment id="13085199" author="jonchang" created="Mon, 15 Aug 2011 17:47:19 +0000"  >&lt;p&gt;Import DoubleWritable from serde2 instead of serde.  This fixes a bunch of unittest failures; sorry for overlooking those!&lt;/p&gt;

&lt;p&gt;The TestParser tests still fail; the .q files seem ok but the xmls seem to differ in a way whose significance I fail to understand, e.g.,&lt;/p&gt;


&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 571c571&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt;            &amp;lt;string&amp;gt;CNTR_NAME_TS_0_FATAL_ERROR&amp;lt;/string&amp;gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt;            &amp;lt;string&amp;gt;CNTR_NAME_TS_637_FATAL_ERROR&amp;lt;/string&amp;gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 579c579&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt;          &amp;lt;string&amp;gt;TS_0&amp;lt;/string&amp;gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt;          &amp;lt;string&amp;gt;TS_637&amp;lt;/string&amp;gt;  &lt;/p&gt;


&lt;p&gt;Do you have any insight on what these mean and what causes them?&lt;/p&gt;</comment>
                            <comment id="13085276" author="cwsteinbach" created="Mon, 15 Aug 2011 19:28:59 +0000"  >&lt;p&gt;TestParse and TestParseNegative both work for me. Running full tests now.&lt;/p&gt;</comment>
                            <comment id="13085970" author="cwsteinbach" created="Tue, 16 Aug 2011 21:00:36 +0000"  >&lt;p&gt;Tests passed. Committed to trunk. Thanks Jonathan!&lt;/p&gt;</comment>
                            <comment id="13086075" author="hudson" created="Wed, 17 Aug 2011 01:28:28 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #900 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/900/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/900/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;. Allow UDFs to access constant parameter values at compile time (Jonathan Chang via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1158446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1158446&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeConstantDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantBooleanObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantIntObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantStringObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantDoubleObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantVoidObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_named_struct.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ConstantObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantLongObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNamedStruct.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantShortObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantFloatObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeConstantEvaluator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_named_struct.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantByteObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13087674" author="hudson" created="Fri, 19 Aug 2011 12:23:00 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #905 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/905/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/905/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2393&quot; title=&quot;Fix whitespace test diff accidentally introduced in HIVE-1360&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2393&quot;&gt;&lt;del&gt;HIVE-2393&lt;/del&gt;&lt;/a&gt;. Fix whitespace test diff accidentally introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;. (Carl Steinbach via amareshwari)&lt;/p&gt;

&lt;p&gt;amareshwari : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159496&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159496&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_named_struct.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13115984" author="jiraposter@reviews.apache.org" created="Tue, 27 Sep 2011 22:40:45 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2078/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2078/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Carl Steinbach, John Sichi, and Igor Kabiljo.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;ConstantObjectInspectors were introduced in a previous patch so that UDF&apos;s could have access to constant values at initialize time.  This diff adds the following improvements:&lt;/p&gt;

&lt;p&gt;1.) Extends this functionality beyond primitive types to List/Map types.&lt;br/&gt;
2.) Fixes a bug in ExprNodeGenericFuncDesc where the constant value would not propagate beyond one level of evaluation.&lt;br/&gt;
3.) Adds a helper class to make functions constant-aware.  By inheriting from this class they return constant OIs if all their arguments are constant, and they cache the result so that computation is only done during initialize().  Some functions such as ARRAY/IF/MAP have been migrated.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1360&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java 7da5d6a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/ConstantFoldableGenericUDF.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFArray.java 1cf97c8 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFArrayContains.java d60dc86 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFIf.java 9a6a7ff &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFMap.java 3b71c48 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFMapKeys.java b384717 &lt;br/&gt;
  ql/src/test/queries/clientpositive/constant_prop.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/constant_prop.q.out PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorFactory.java a4689fb &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 2c1a7e0 &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/StandardConstantListObjectInspector.java PRE-CREATION &lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/StandardConstantMapObjectInspector.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2078/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2078/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;ant test&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jonathan&lt;/p&gt;
</comment>
                            <comment id="13115985" author="jonchang" created="Tue, 27 Sep 2011 22:41:44 +0000"  >&lt;p&gt;Needs some additional work to be useful.  See latest patch.&lt;/p&gt;</comment>
                            <comment id="13115986" author="jonchang" created="Tue, 27 Sep 2011 22:42:04 +0000"  >&lt;p&gt;Additional patch for more functionality.&lt;/p&gt;</comment>
                            <comment id="13115987" author="jvs" created="Tue, 27 Sep 2011 22:44:48 +0000"  >&lt;p&gt;Jonathan, once we commit, we mark the issue resolved and then open up a new followup JIRA issue if more work is needed (linked to the original).  So this one should stay resolved since it already got committed.&lt;/p&gt;
</comment>
                            <comment id="13115991" author="jonchang" created="Tue, 27 Sep 2011 23:00:49 +0000"  >&lt;p&gt;Re-resolving per Jvs.&lt;/p&gt;</comment>
                            <comment id="13115993" author="jonchang" created="Tue, 27 Sep 2011 23:04:14 +0000"  >&lt;p&gt;Please visit &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2470&quot; title=&quot;Improve support for Constant Object Inspectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2470&quot;&gt;&lt;del&gt;HIVE-2470&lt;/del&gt;&lt;/a&gt; for followup.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12515881">HIVE-2327</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12444273">HIVE-1016</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12504946">HIVE-2124</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12524979">HIVE-2470</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490300" name="HIVE-1360.2.patch.txt" size="36604" author="cwsteinbach" created="Fri, 12 Aug 2011 23:20:41 +0000"/>
                            <attachment id="12490407" name="HIVE-1360.2.test-failures.txt" size="6402" author="cwsteinbach" created="Mon, 15 Aug 2011 07:16:35 +0000"/>
                            <attachment id="12490453" name="HIVE-1360.3.patch" size="36640" author="jonchang" created="Mon, 15 Aug 2011 17:47:19 +0000"/>
                            <attachment id="12496807" name="HIVE-1360.part2.patch" size="28368" author="jonchang" created="Tue, 27 Sep 2011 22:42:04 +0000"/>
                            <attachment id="12490189" name="HIVE-1360.patch" size="38026" author="jonchang" created="Thu, 11 Aug 2011 23:23:00 +0000"/>
                            <attachment id="12490168" name="HIVE-1360.patch" size="37674" author="jonchang" created="Thu, 11 Aug 2011 20:51:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Jun 2011 22:28:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34234</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ler3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1361] table/partition level statistics</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1361</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;At the first step, we gather table-level stats for non-partitioned table and partition-level stats for partitioned table. Future work could extend the table level stats to partitioned table as well. &lt;/p&gt;

&lt;p&gt;There are 3 major milestones in this subtask: &lt;br/&gt;
 1) extend the insert statement to gather table/partition level stats on-the-fly.&lt;br/&gt;
 2) extend metastore API to support storing and retrieving stats for a particular table/partition. &lt;br/&gt;
 3) add an ANALYZE TABLE &lt;span class=&quot;error&quot;&gt;&amp;#91;PARTITION&amp;#93;&lt;/span&gt; statement in Hive QL to gather stats for existing tables/partitions. &lt;/p&gt;

&lt;p&gt;The proposed stats are:&lt;/p&gt;

&lt;p&gt;Partition-level stats: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;number of rows&lt;/li&gt;
	&lt;li&gt;total size in bytes&lt;/li&gt;
	&lt;li&gt;number of files&lt;/li&gt;
	&lt;li&gt;max, min, average row sizes&lt;/li&gt;
	&lt;li&gt;max, min, average file sizes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Table-level stats in addition to partition level stats:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;number of partitions&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12465175">HIVE-1361</key>
            <summary>table/partition level statistics</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12407019">HIVE-33</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 May 2010 23:16:08 +0000</created>
                <updated>Thu, 2 May 2013 02:29:33 +0000</updated>
                            <resolved>Mon, 27 Sep 2010 18:03:23 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                    <component>Statistics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="12870240" author="namit" created="Sat, 22 May 2010 00:19:42 +0000"  >&lt;p&gt;Can we further break them down to the stats which will be collected automatically at insert/load time vs. the stats which will be collected when the user explicitly analyzes the table ?&lt;/p&gt;</comment>
                            <comment id="12870264" author="nzhang" created="Sat, 22 May 2010 02:58:31 +0000"  >&lt;p&gt;all these stats should be able to collected automatically at insert time. since loading doesn&apos;t scan the data, we cannot gather stats from this command. &lt;/p&gt;</comment>
                            <comment id="12881448" author="nzhang" created="Tue, 22 Jun 2010 23:22:33 +0000"  >&lt;p&gt;Some comments from internal design review:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The ANALYZE TABLE command should be integrated with the data replication hook. When an existing table/partition is analyzed, a new WriteEntity should be generated to make metadata replication work.&lt;/li&gt;
	&lt;li&gt;Investigate JDO on top of HBase integration. If JDO works on HBase, we could just use JDO to update column stats as well.&lt;/li&gt;
	&lt;li&gt;ANALYZE TABLE partition (&amp;lt;partition_spec&amp;gt;) should support &quot;dynamic-partition-style&quot; partition specification. This means the if there are 2 partition columns ds, hr, we can do analyze table partition(ds = &apos;2010-06-01&apos;, hr) to analyze all hr sub-partitions under ds=&apos;2010-06-01&apos;.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12896634" author="nzhang" created="Mon, 9 Aug 2010 17:32:50 +0000"  >&lt;p&gt;Ahmed has put up the design doc on the wiki: &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/StatsDev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/StatsDev&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Ahmed is also finalizing the patch for review. &lt;/p&gt;

&lt;p&gt;There are some minor changes from the original requirement: currently the stats gather are # of rows, total size in bytes, # files and # of partitions (for table). It does not have the min/max/avg of row/file sizes since they are different in the raw size (serialized and compressed) with the sizes we saw during stats gathering (deserialized and decompressed). And there are no strong use cases for them currently, so we&apos;ll exclude them for this patch. &lt;/p&gt;</comment>
                            <comment id="12896700" author="ahmedaly" created="Mon, 9 Aug 2010 21:32:12 +0000"  >&lt;p&gt;This is an initial patch for quick review. This is not final as there are still some minor changes to be done.&lt;/p&gt;</comment>
                            <comment id="12910347" author="nzhang" created="Thu, 16 Sep 2010 22:05:27 +0000"  >&lt;p&gt;Uploading a full version (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt;.patch) and a Java code only version (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt;.java_only.patch). &lt;/p&gt;

&lt;p&gt;This patch is based on Ahmed&apos;s previous patch and implements the following feature:&lt;br/&gt;
  1) automatically gather stats (number of rows currently) whenever an INSERT OVERWRITE TABLE is issued. Each mapper/reducer push their partial stats to either MySQL/Derby through JDBC or HBase. The INSERT OVERWRITE statement could be anything include dynamic partition insert, multi-table inserts and inserting to bucketized partitions. A StatsTask is responsible for aggregating partial stats at the end of the query and update the metastore.&lt;br/&gt;
  2) The stats of a table/partition can be exposed to the user by &apos;DESC EXTENDED&apos; to the table/partition. They are stored as the storage parameters (numRows, nuFiles, numPartitions). &lt;br/&gt;
  3) Introducing a new command &apos;ANALYZE TABLE &lt;span class=&quot;error&quot;&gt;&amp;#91;PARTITION (PARTITION SPEC)&amp;#93;&lt;/span&gt; COMPUTE STATISTICS&apos; to scan the table/partition and gather stats in a similar fashion as INSERT OVERWRITE command except that the plan has only 1 MR job consisting a TableScanOperator and a StatsTask. Partition spec could be full partition spec or partial partition spec similar to what dynamic partition insert uses. This allows the user to analyze a subset/all partitions of a table. The resulting stats are stored in the same parameter in the meatstore.&lt;/p&gt;

&lt;p&gt;Tested locally (unit tests) for JDBC:derby, hbase and on a cluster with JDBC:MySQL. &lt;/p&gt;

&lt;p&gt;Will run the full unit tests again. &lt;/p&gt;</comment>
                            <comment id="12910350" author="jvs" created="Thu, 16 Sep 2010 22:07:44 +0000"  >&lt;p&gt;Yay for Java-only patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12910380" author="hbasereviewboard" created="Thu, 16 Sep 2010 22:54:08 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/862/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1361&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1361&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 997199 &lt;br/&gt;
  trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsAggregator.java PRE-CREATION &lt;br/&gt;
  trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsPublisher.java PRE-CREATION &lt;br/&gt;
  trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsSetupConstants.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/gen-javabean/org/apache/hadoop/hive/ql/plan/api/StageType.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JobCloseFeedBack.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MoveTask.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Stat.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/StatsTask.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TaskFactory.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QB.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QBParseInfo.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FileSinkDesc.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/StatsWork.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java 997199 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsAggregator.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsAggregator.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsFactory.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsFactory.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsPublisher.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsPublisher.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsSetupConst.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsSetupConst.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsSetupConstants.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsSetupConstants.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsSetupConstants.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/862/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12910470" author="namit" created="Fri, 17 Sep 2010 06:02:40 +0000"  >&lt;p&gt;Will take a look &lt;/p&gt;</comment>
                            <comment id="12910813" author="hbasereviewboard" created="Fri, 17 Sep 2010 22:09:17 +0000"  >&lt;p&gt;Message from: &quot;John Sichi&quot; &amp;lt;jsichi@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/862/#review1262&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#review1262&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4256&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Hive conf additions should be accompanied by new entries in conf/hive-default.xml for documentation purposes.&lt;/p&gt;



&lt;p&gt;trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4257&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4257&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Using e.toString() alone here may lose some of the diagnostics.&lt;/p&gt;

&lt;p&gt;    LOG.error has an overload which takes a Throwable parameter; use that to make sure that all the diagnostics (e.g. nested throwables) are logged.&lt;/p&gt;



&lt;p&gt;trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4258&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4258&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    As a performance followup, we probably want to use delete(List&amp;lt;Delete&amp;gt;) for batching.&lt;/p&gt;




&lt;p&gt;trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4264&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4264&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    See perf comment above.  Also, this scan+delete code could be shared to avoid duplication.&lt;/p&gt;




&lt;p&gt;trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsPublisher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4266&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4266&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    See comments in HBaseStatsAggregator regarding diagnostics.&lt;/p&gt;




&lt;p&gt;trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsPublisher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4267&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4267&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Another perf note:  for batch update, we can use setAutoFlush(false) and then flushCommits in closeConnection.&lt;/p&gt;



&lt;p&gt;trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsSetupConstants.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4268&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4268&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Probably need a followup to make this configurable.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4269&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4269&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    What is this code for?&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/StatsTask.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4294&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4294&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Isn&apos;t this going to throw an NPE if aggregateStats returns null after handling an error?&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/StatsTask.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4295&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4295&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    s/retur/return/&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4274&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4274&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    typo:  MapRedTaks&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4278&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4278&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Some more overview (or just link to updated wiki doc) would be good here since the methods below reference things like temporary stats and aggregation without really explaining them.&lt;/p&gt;

&lt;p&gt;    Also:  I think having the publisher/aggregator implementations catch errors themselves is confusing.  It would be cleaner to let them propagate the exceptions, and instead catch+suppress+warn in the calling code (under control of a strictness config param).&lt;/p&gt;




&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4279&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4279&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    @param, @return?&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4277&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4277&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Use correct Javadoc @param syntax, and add @return.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4280&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4280&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Use @param, @return&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsFactory.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4282&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4282&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    For other plugin-loading code, we use JavaUtils.getClassLoader().  Should probably do the same here?&lt;/p&gt;




&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsFactory.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4281&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4281&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Don&apos;t use printStackTrace; log the exception instead.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/StatsPublisher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4283&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4283&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    See comments on StatsAggregator regarding Javadoc.  Also, s/statics/statistics/&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4284&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4284&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t think this warrants four exclamation marks.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4288&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4288&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is it worth using a prepared statement here?  &lt;/p&gt;

&lt;p&gt;    Also, depending on the transaction isolation level, concurrent update attempts could result in spurious error logging, although the final result should still be valid.&lt;/p&gt;

&lt;p&gt;    Using a positioned update can give more control over this (and allow the number of SQL statements executed to be reduced), but not all JDBC drivers support it.&lt;/p&gt;




&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4286&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4286&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is superfluous.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4292&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4292&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I think this actually means &quot;explicitly shut down the database&quot; (which is different from closing the connection).&lt;/p&gt;



&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12910851" author="hbasereviewboard" created="Fri, 17 Sep 2010 23:43:19 +0000"  >&lt;p&gt;Message from: &quot;namit jain&quot; &amp;lt;njain@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/862/#review1264&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#review1264&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4293&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4293&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This code seems useless&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4296&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4296&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    How are you accounting for speculative &lt;br/&gt;
    execution ?&lt;/p&gt;

&lt;p&gt;    Can 2 tasks insert the entry ?&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/StatsTask.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4305&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4305&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    It might be a good idea to make it easy &lt;br/&gt;
    to add new stats. Right now, you will need&lt;br/&gt;
    to fix code in multiple places.&lt;/p&gt;

&lt;p&gt;    Instead of hard-coding nRowsInTable, it&lt;br/&gt;
    would be good to keep an array of stats&lt;br/&gt;
    we are publishing in a central place&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/StatsTask.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4306&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4306&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This (addOutputs()) should be done at &lt;br/&gt;
    compile time&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4310&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4310&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Most of these parameters need not be &lt;br/&gt;
    instance variables - have a new function&lt;br/&gt;
    where these are defined&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TableScanOperator.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4307&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Can you add publishStats in Utilities and&lt;br/&gt;
    let TableScan and FileSink share it&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4309&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4309&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I am assuming these red blocks mean TABs&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4311&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    ??&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/862/#comment4314&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/862/#comment4314&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Do we need to lock the row ?&lt;br/&gt;
    use a SELECT FOR UPDATE instead of&lt;br/&gt;
    SELECT&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;namit&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12913298" author="nzhang" created="Tue, 21 Sep 2010 22:45:50 +0000"  >&lt;p&gt;Uploading a new patch (including a full version and a Java_only version including XML build files) for review. This is against the latest trunk.&lt;/p&gt;

&lt;p&gt;The major changes from the last patch include: &lt;br/&gt;
  1) Make JDBC update/insert/select using PreparedStatement(). &lt;br/&gt;
  2) In HBase, use HTable.delete(ArrayList&amp;lt;Delete&amp;gt;) to speed up delete, and flushCommit() to batch update. &lt;br/&gt;
  3) Refactor StatsTask to put stats into PartitionStatistics and TableStatistics so that it is easier to add new stats later. &lt;br/&gt;
  4) Move WriteEntity creation from StatsTask to compile-time.&lt;/p&gt;

&lt;p&gt; I&apos;m running tests again after refreshed to the latest trunk.&lt;/p&gt;</comment>
                            <comment id="12913635" author="nzhang" created="Wed, 22 Sep 2010 16:02:22 +0000"  >&lt;p&gt;Uploading &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt;.3.patch which passes all tests on hadoop 0.20 &amp;amp;0.17. The only difference from the last patch is the log change in stats2.q.out.&lt;/p&gt;</comment>
                            <comment id="12913783" author="namit" created="Wed, 22 Sep 2010 20:54:45 +0000"  >&lt;p&gt;Ning, the latest patch contains the output of svn stat&lt;/p&gt;</comment>
                            <comment id="12913797" author="nzhang" created="Wed, 22 Sep 2010 21:14:02 +0000"  >&lt;p&gt;Updated &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt;.3.patch.&lt;/p&gt;</comment>
                            <comment id="12913872" author="nzhang" created="Thu, 23 Sep 2010 01:03:58 +0000"  >&lt;p&gt;Uploading new patch that refreshed to the latest trunk. Also added a negative test case analyze.q and some trivial clean up in Java code (removing commented out contents). &lt;/p&gt;</comment>
                            <comment id="12914192" author="nzhang" created="Thu, 23 Sep 2010 19:46:46 +0000"  >&lt;p&gt;uploading a new set of patches that resolves the conflicts with the latest commits. &lt;/p&gt;</comment>
                            <comment id="12914728" author="he yongqiang" created="Sat, 25 Sep 2010 01:01:30 +0000"  >&lt;p&gt;+1 running tests.&lt;/p&gt;</comment>
                            <comment id="12915397" author="he yongqiang" created="Mon, 27 Sep 2010 18:03:23 +0000"  >&lt;p&gt;I just committed! Thanks Ning and Ahmed!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12407019">HIVE-33</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12474443">HIVE-1652</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12474444">HIVE-1653</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12628388">HIVE-3917</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12474443">HIVE-1652</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12474444">HIVE-1653</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12455203" name="HIVE-1361.2.patch" size="4074018" author="nzhang" created="Tue, 21 Sep 2010 22:45:49 +0000"/>
                            <attachment id="12455204" name="HIVE-1361.2_java_only.patch" size="210274" author="nzhang" created="Tue, 21 Sep 2010 22:45:50 +0000"/>
                            <attachment id="12455312" name="HIVE-1361.3.patch" size="4073061" author="nzhang" created="Wed, 22 Sep 2010 21:14:01 +0000"/>
                            <attachment id="12455335" name="HIVE-1361.4.java_only.patch" size="209142" author="nzhang" created="Thu, 23 Sep 2010 01:03:56 +0000"/>
                            <attachment id="12455336" name="HIVE-1361.4.patch" size="4072257" author="nzhang" created="Thu, 23 Sep 2010 01:03:56 +0000"/>
                            <attachment id="12455408" name="HIVE-1361.5.java_only.patch" size="209148" author="nzhang" created="Thu, 23 Sep 2010 19:46:45 +0000"/>
                            <attachment id="12455409" name="HIVE-1361.5.patch" size="4072263" author="nzhang" created="Thu, 23 Sep 2010 19:46:45 +0000"/>
                            <attachment id="12454809" name="HIVE-1361.java_only.patch" size="182291" author="nzhang" created="Thu, 16 Sep 2010 22:05:27 +0000"/>
                            <attachment id="12454808" name="HIVE-1361.patch" size="3843556" author="nzhang" created="Thu, 16 Sep 2010 22:05:26 +0000"/>
                            <attachment id="12451626" name="stats0.patch" size="372080" author="ahmedaly" created="Mon, 9 Aug 2010 21:32:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 22 May 2010 00:19:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42999</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00x73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3310</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1362] Optimizer statistics on columns in tables and partitions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1362</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12465176">HIVE-1362</key>
            <summary>Optimizer statistics on columns in tables and partitions</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12407019">HIVE-33</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ZenWzh">Zhenhua Wang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 May 2010 23:17:43 +0000</created>
                <updated>Sat, 10 Sep 2016 02:17:00 +0000</updated>
                            <resolved>Wed, 7 Nov 2012 04:55:36 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Statistics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>27</watches>
                                                                <comments>
                            <comment id="12870229" author="nzhang" created="Fri, 21 May 2010 23:34:33 +0000"  >&lt;p&gt;This is the 2nd subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-33&quot; title=&quot;[Hive]: Add optimizer statistics in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-33&quot;&gt;&lt;del&gt;HIVE-33&lt;/del&gt;&lt;/a&gt; (stats in Hive tables). &lt;/p&gt;

&lt;p&gt;We will gather column level stats based on users&apos; request. It also depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1361&quot; title=&quot;table/partition level statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1361&quot;&gt;&lt;del&gt;HIVE-1361&lt;/del&gt;&lt;/a&gt; in that the metastore API should suport storing and retrieving stats. &lt;/p&gt;

&lt;p&gt;The major milestone for this subtasks are:&lt;br/&gt;
 1) add a new HiveQL command to gather column level stats. Please see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-33&quot; title=&quot;[Hive]: Add optimizer statistics in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-33&quot;&gt;&lt;del&gt;HIVE-33&lt;/del&gt;&lt;/a&gt; for the syntax. &lt;br/&gt;
 2) add new UDFs/UDAFs to compute these statistics. &lt;/p&gt;

&lt;p&gt;The proposed statistics are:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;number of distinct values&lt;/li&gt;
	&lt;li&gt;number of NULL values&lt;/li&gt;
	&lt;li&gt;min/max k values where k could be given by user&lt;/li&gt;
	&lt;li&gt;histogram: frequency and height balanced&lt;/li&gt;
	&lt;li&gt;average size of the column&lt;/li&gt;
	&lt;li&gt;avg/sum of all values in the column if their type is numerical&lt;/li&gt;
	&lt;li&gt;percentiles of the value&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12989055" author="nzhang" created="Tue, 1 Feb 2011 06:00:31 +0000"  >&lt;p&gt;Good catch Carl. Yeah, it won&apos;t work for HiveServer. &lt;/p&gt;

&lt;p&gt;I&apos;m uploading a new patch taking your 2 comments. &lt;/p&gt;</comment>
                            <comment id="12989057" author="nzhang" created="Tue, 1 Feb 2011 06:03:09 +0000"  >&lt;p&gt;Sorry, please ignore my previous comment. It should goes to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1937&quot; title=&quot;DDLSemanticAnalyzer won&amp;#39;t take newly set Hive parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1937&quot;&gt;&lt;del&gt;HIVE-1937&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12989721" author="namit" created="Wed, 2 Feb 2011 17:36:16 +0000"  >&lt;p&gt;Is anyone working on this ?&lt;/p&gt;</comment>
                            <comment id="13240644" author="ashutoshc" created="Wed, 28 Mar 2012 19:10:00 +0000"  >&lt;p&gt;@Namit,&lt;br/&gt;
Bharath plans to work on this and has a gsoc proposal : &lt;a href=&quot;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/bharathv/18002&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/bharathv/18002&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13446167" author="farlue" created="Fri, 31 Aug 2012 17:44:01 +0000"  >&lt;p&gt;A patch for computing column level top k values is attached. Review is available at &lt;a href=&quot;https://reviews.facebook.net/D5073&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5073&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="13446188" author="cwsteinbach" created="Fri, 31 Aug 2012 18:07:27 +0000"  >&lt;p&gt;@Feng: Please open a new JIRA for your patch and post it there. This ticket covers the task of implementing a general framework for computing and persisting column-level statistics. It doesn&apos;t look like your patch does that. Thanks.&lt;/p&gt;</comment>
                            <comment id="13446264" author="farlue" created="Fri, 31 Aug 2012 19:07:49 +0000"  >&lt;p&gt;@Carl, created a new JIRA at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3421&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-3421&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="13446432" author="shreepadma" created="Fri, 31 Aug 2012 22:08:55 +0000"  >&lt;p&gt;This patch implements version 1 of the column statistics project in Hive. It adds support for computing and persisting statistical summary of column values in Hive Tables and Partitions. In order to support column statistics in Hive, this patch does the following,&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Adds a new compute stats UDAF to compute scalar statistics for all primitive Hive data types. In version 1 of the project, we support the following scalar statistics on primitive types - estimate of number of distinct values, number of null values, number of trues/falses for boolean typed columsn, max and avg length for string and binary typed columns, max and min value for long and double typed columns. Note that version 1 of the column stats project includes support for column statistics both at the table and partition level.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Adds Metastore schema tables to persist the newly added statistics both at table and partition level.&lt;/li&gt;
	&lt;li&gt;Adds Metastore Thrift API to persist, retrieve and delete column statistics at both table and partition level.&lt;br/&gt;
Please refer to the following wiki link for the details of the schema and the Thrift API changes - &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Column+Statistics+in+Hive&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Column+Statistics+in+Hive&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Extends the analyze table compute statistics statement to trigger statistics computation and persistence for one or more columns. Please note that statistics for multiple columns is computed through a single scan of the table data. Please refer to the following wiki link for the syntax changes - &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Column+Statistics+in+Hive&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Column+Statistics+in+Hive&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One thing missing from the patch at this point is the metastore upgrade scrips for MySQL/Derby/Postgres/Oracle. I&apos;m waiting for the review to finalize the metastore schema changes before I go ahead and add the upgrade scripts.&lt;/p&gt;

&lt;p&gt;In a follow on patch, as part of version 2 of the column statistics project, we will add support for computing, persisting and retrieving histograms on long and double typed column values.&lt;/p&gt;</comment>
                            <comment id="13446433" author="shreepadma" created="Fri, 31 Aug 2012 22:09:47 +0000"  >&lt;p&gt;Review is available at : &lt;a href=&quot;https://reviews.apache.org/r/6878/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6878/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13462239" author="cwsteinbach" created="Mon, 24 Sep 2012 23:11:20 +0000"  >&lt;p&gt;@Shreepadma: please see my comments on reviewboard.&lt;/p&gt;</comment>
                            <comment id="13468270" author="shreepadma" created="Wed, 3 Oct 2012 02:35:37 +0000"  >&lt;p&gt;I&apos;ve provide a review board link shortly. &lt;/p&gt;</comment>
                            <comment id="13468271" author="shreepadma" created="Wed, 3 Oct 2012 02:36:26 +0000"  >&lt;p&gt;Meant to say I&apos;ll provide a review board link shortly.&lt;/p&gt;</comment>
                            <comment id="13468293" author="shreepadma" created="Wed, 3 Oct 2012 03:11:54 +0000"  >&lt;p&gt;Patch is available for review at : �&lt;a href=&quot;https://reviews.apache.org/r/6878/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6878/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13468295" author="shreepadma" created="Wed, 3 Oct 2012 03:13:57 +0000"  >&lt;p&gt;Latest revision is here: &lt;a href=&quot;https://reviews.apache.org/r/6878/diff/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6878/diff/#index_header&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13468502" author="namit" created="Wed, 3 Oct 2012 11:51:40 +0000"  >&lt;p&gt;Are the stats collected while the table is being scanned, or is it part of analyze only ?&lt;/p&gt;</comment>
                            <comment id="13468505" author="namit" created="Wed, 3 Oct 2012 11:53:03 +0000"  >&lt;p&gt;Shreepadma, some comments on reviewboard&lt;/p&gt;</comment>
                            <comment id="13468668" author="shreepadma" created="Wed, 3 Oct 2012 16:59:22 +0000"  >&lt;p&gt;@Namit: The stats is collected as part of analyze. We will look into implicit stats collection i.e., when the table is scanned/loaded in next version of this project.&lt;/p&gt;</comment>
                            <comment id="13468754" author="shreepadma" created="Wed, 3 Oct 2012 19:18:10 +0000"  >&lt;p&gt;Latest revision which addresses Namit&apos;s comments is on review board.&lt;/p&gt;</comment>
                            <comment id="13469143" author="sshankar" created="Thu, 4 Oct 2012 04:46:15 +0000"  >&lt;p&gt;I had a couple of high level comments on the patch that seem to fit better here rather than on the review board. Apologies if this violates protocol&lt;br/&gt;
(1) The count_stats aggregation operator &apos;repeats&apos; many existing aggregates that Hive already supports (count of nulls, count true&apos;s, max, min etc). It might make a lot more sense to just add an aggregate to return the approximate number of distinct values for a column. Any reason why stats collection cant just generate more expressions in the SQL?&lt;br/&gt;
(2) There might even be value in adding a different UDAF which just returns a serialized numDV estimator. Storing this (instead of the count) could be useful in other places e.g. combining numDV estimates across partitions (A second UDAF would be needed to support aggregating these but that seems easy)&lt;/p&gt;</comment>
                            <comment id="13469155" author="namit" created="Thu, 4 Oct 2012 05:05:31 +0000"  >&lt;p&gt;Questions on the jira ?&lt;/p&gt;</comment>
                            <comment id="13469614" author="shreepadma" created="Thu, 4 Oct 2012 19:15:37 +0000"  >&lt;p&gt;@Shrikanth: Thank you for your comments. We can certainly add a new UDAF with the Flajolet-Martin sketch that returns a serialized numDV estimator. I&apos;ve already filed a new JIRA (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3516&quot; title=&quot;Fast incremental statistics computation on columns in Hive tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3516&quot;&gt;HIVE-3516&lt;/a&gt;) for the incremental stats computation work. I&apos;ll add the UDAF as part of that JIRA. &lt;/p&gt;

&lt;p&gt;A couple of reasons why we decided to create a new compute_stats aggregation operator instead of generating more expressions in the SQL,&lt;/p&gt;

&lt;p&gt;1. We felt its a lot cleaner to encapsulate the stats for a column within a single UDAF. The compute_stats UDAF returns a struct with the relevant stats depending on the data type of the column and as a result makes the parsing as well as the SQL we generate simple.&lt;/p&gt;

&lt;p&gt;2. Adding a new compute_stats UDAF allows the gathering of statistical summaries of the underlying data even outside of the column stats framework. One use I can think of is, it can be used to model the statistical properties of data which in turn can be used to generate data whose statistical properties mimic that of the underlying data.&lt;/p&gt;

&lt;p&gt;Even though max, min, total count exist as UDAFs today, we need these to be part of the histogram UDAF. Estimating quantiles for equi-height histogram is a lot more efficient if we know the range of values the column can take. We need to know the total_count to generate the histogram bins. Given that we need these stats for generating histograms, I think its a good idea to encapsulate all of these stats within the compute_stats UDAF. Thanks.&lt;/p&gt;</comment>
                            <comment id="13469616" author="shreepadma" created="Thu, 4 Oct 2012 19:19:37 +0000"  >&lt;p&gt;@Namit: I&apos;ve addressed your review comments in the latest revision to the patch. Its available on review board.&lt;/p&gt;</comment>
                            <comment id="13470240" author="namit" created="Fri, 5 Oct 2012 11:45:34 +0000"  >&lt;p&gt;Would be easier to comment here:&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; It does not interact with hive.stats.reliable.&lt;/p&gt;

&lt;p&gt;Can you fix that ? I mean, if you want to do it in a follow-up that&apos;s fine. But, please throw an error in that case if hive.stats.reliable&lt;br/&gt;
is set to true for now.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; Why does it make sense to add a thrift API for updating statistics ? There doesn&apos;t exist a interface for updating&lt;br/&gt;
row level statistics. How is the user supposed to compute these other than analyze, which anyway updates the stats.&lt;/p&gt;</comment>
                            <comment id="13470592" author="shreepadma" created="Fri, 5 Oct 2012 19:42:08 +0000"  >&lt;p&gt;@Namit: I don&apos;t understand hive.stats.reliable very clearly. Can you please explain how hive.stats.reliable works? What are the semantics of hive.stats.reliable? Why do we need hive.stats.reliable? Thanks.&lt;/p&gt;</comment>
                            <comment id="13470686" author="shreepadma" created="Fri, 5 Oct 2012 21:33:56 +0000"  >&lt;p&gt;I assume when you say row level statistics you are referring to table statistics. Today, table statistics is stored as part of the table_params. table_params table gets mapped to the TTable object in memory and it looks like the existing APIs sufficed. We want to have a dedicated Thrift API for column stats for the following reasons,&lt;/p&gt;

&lt;p&gt;1. Column statistics is a property of the column and not the table and hence doesn&apos;t belong with the table_params. Furthermore, we have seen customers with tables that are 100s-1000s of columns wide. Storing this information as a table_param is going to bloat, and it will also make the output of DESCRIBE EXTENDED unreadable.&lt;/p&gt;

&lt;p&gt;2. We want column statistics to be a first class metadata. In order to do so, we have to provide dedicated Thrift APIs to query and update it. We want the Thrift API to be self-documenting, i.e. if someone tells you that metastore supports column stats, you should be able to look at the Thrift IDL and figure out which method you need to use to store/retrieve column stats. Right now a lot of the API doesn&apos;t satisfy that goal since many methods are overloaded, and other features are implemented by adding new key/value properties to different catalog objects that aren&apos;t easy to document via the thrift API&lt;/p&gt;

&lt;p&gt;3. Additionally storing column statistics as a key/value pair in the table_params table is not space efficient. We need to repeat the keys for each one of the columns in the table for which statistics is gathered. Furthermore, by storing column stats in the table_params table we would de-normalize the schema completely and incur a performance penalty performing self-joins, though not necessarily in the metasote db, to retrieve the statistics associated with a column. &lt;/p&gt;</comment>
                            <comment id="13470698" author="shreepadma" created="Fri, 5 Oct 2012 21:48:09 +0000"  >&lt;p&gt;@Namit: In the first version of the project, which this patch implements, the only way to trigger stats gathering is through an explicit ANALYZE command.&lt;/p&gt;</comment>
                            <comment id="13470840" author="cwsteinbach" created="Sat, 6 Oct 2012 01:13:19 +0000"  >&lt;p&gt;@Shreepadma: More comments on RB. Thanks.&lt;/p&gt;</comment>
                            <comment id="13481202" author="shreepadma" created="Mon, 22 Oct 2012 06:31:15 +0000"  >&lt;p&gt;Updated patch available on both JIRA and review board. &lt;/p&gt;</comment>
                            <comment id="13486223" author="cwsteinbach" created="Mon, 29 Oct 2012 18:09:44 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;@Namit: Let me know if you need more time to review this. If so I&apos;ll hold off until you&apos;re ready. Thanks.&lt;/p&gt;</comment>
                            <comment id="13486586" author="shreepadma" created="Tue, 30 Oct 2012 01:25:57 +0000"  >&lt;p&gt;Attached new patch rebased off the tip of current trunk.&lt;/p&gt;</comment>
                            <comment id="13486620" author="namit" created="Tue, 30 Oct 2012 03:16:32 +0000"  >&lt;p&gt;@Carl, Can you hold off for just 1 day ? I will definitely take a look today.&lt;/p&gt;</comment>
                            <comment id="13486650" author="namit" created="Tue, 30 Oct 2012 04:57:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D6321&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6321&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Created the phabricator entry for easy review from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.6.patch&lt;/p&gt;</comment>
                            <comment id="13486653" author="namit" created="Tue, 30 Oct 2012 05:10:37 +0000"  >&lt;p&gt;Looks like this patch file is old.&lt;br/&gt;
I couldn&apos;t see any reference to StatsSemanticAnalyzer.java.&lt;br/&gt;
Can you load the latest patch file ?&lt;/p&gt;

&lt;p&gt;If you dont mind, can you create a phabricator entry ? I know, there is no official policy, but phabricator is much more usable.&lt;/p&gt;</comment>
                            <comment id="13486661" author="shreepadma" created="Tue, 30 Oct 2012 05:28:14 +0000"  >&lt;p&gt;@Namit: Thanks for creating the phabricator entry. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.6.patch is the latest patch. StatsSemanticAnalyzer is referenced in SemanticAnalyzerFactory.java. I&apos;ll try to create a phabricator entry in the future. In the past when I&apos;ve tried to use it, I&apos;ve had problems with it.&lt;/p&gt;</comment>
                            <comment id="13486935" author="namit" created="Tue, 30 Oct 2012 15:20:21 +0000"  >&lt;p&gt;There is something wrong in my patch. Can you create the final patch ?&lt;br/&gt;
There are a bunch of lint warnings, and we need to atleast resolve them.&lt;br/&gt;
Can you create a new phabricator entry ? I will definitely take a look.&lt;br/&gt;
Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="13486936" author="namit" created="Tue, 30 Oct 2012 15:20:43 +0000"  >&lt;p&gt;Anyway, you need to create it, how else will you refresh it ?&lt;/p&gt;</comment>
                            <comment id="13487117" author="shreepadma" created="Tue, 30 Oct 2012 18:45:40 +0000"  >&lt;p&gt;@Namit: I&apos;ve uploaded the final patch. I&apos;ve fixed all the lint problems from the previous revision. Please note that I was just following the convention in those files and didn&apos;t realize that it would result in lint problems. &lt;/p&gt;

&lt;p&gt;I tried to create a phabricator review but ran into errors. Can you please use review board this time? I&apos;ll try to use Phabricator for future reviews. Thanks.&lt;/p&gt;</comment>
                            <comment id="13487342" author="phabricator@reviews.facebook.net" created="Tue, 30 Oct 2012 23:02:11 +0000"  >&lt;p&gt;cwsteinbach requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; column level statistics&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12551403/HIVE-1362.7.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12551403/HIVE-1362.7.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D6339&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  data/files/UserVisits.dat&lt;br/&gt;
  data/files/binary.txt&lt;br/&gt;
  data/files/bool.txt&lt;br/&gt;
  data/files/double.txt&lt;br/&gt;
  data/files/employee.dat&lt;br/&gt;
  data/files/employee2.dat&lt;br/&gt;
  data/files/int.txt&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/RawStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MPartitionColumnStatistics.java&lt;br/&gt;
  metastore/src/model/org/apache/hadoop/hive/metastore/model/MTableColumnStatistics.java&lt;br/&gt;
  metastore/src/model/package.jdo&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/DummyRawStoreForJdoConnection.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/if/queryplan.thrift&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnStatsTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/TaskFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteParseContextGenerator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/QB.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/QBParseInfo.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/StatsSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/DoubleNumDistinctValueEstimator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFComputeStats.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/LongNumDistinctValueEstimator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/NumDistinctValueEstimator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/StringNumDistinctValueEstimator.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/columnstats_partlvl.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/columnstats_partlvl.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/columnstats_tbllvl.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/compute_stats_binary.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/compute_stats_boolean.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/compute_stats_double.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/compute_stats_long.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/compute_stats_string.q&lt;br/&gt;
  ql/src/test/results/clientnegative/columnstats_partlvl.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/columnstats_partlvl.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/columnstats_tbllvl.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/compute_stats_binary.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/compute_stats_boolean.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/compute_stats_double.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/compute_stats_long.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/compute_stats_string.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/15051/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/15051/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, cwsteinbach&lt;/p&gt;</comment>
                            <comment id="13487345" author="cwsteinbach" created="Tue, 30 Oct 2012 23:03:12 +0000"  >&lt;p&gt;@Namit: I created a review request on phabricator: &lt;a href=&quot;https://reviews.facebook.net/D6339&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;@Shreepadma: I had to correct one lint error in order to get phabricator to accept this patch (non ASCII character in the GenericUDAF). Phabricator also flagged a bunch of lines that exceed the length limit, and several files that don&apos;t end with a newline. Please fix these issues and upload a new patch to JIRA. Thanks.&lt;/p&gt;</comment>
                            <comment id="13487388" author="shreepadma" created="Wed, 31 Oct 2012 00:01:57 +0000"  >&lt;p&gt;I&apos;ve uploaded a new patch to JIRA. It a) fixes the lint problems I saw on phabricator, b) Adds a new line to the files this patch adds.&lt;/p&gt;</comment>
                            <comment id="13487470" author="shreepadma" created="Wed, 31 Oct 2012 02:50:43 +0000"  >&lt;p&gt;Forgot to add I removed the invalid ASCII character as well. However, I still have problems with phabricator. &lt;/p&gt;</comment>
                            <comment id="13487967" author="namit" created="Wed, 31 Oct 2012 17:08:56 +0000"  >&lt;p&gt;Thanks a lot for creating a phabricator entry. I will take a look tomorrow.&lt;/p&gt;</comment>
                            <comment id="13488507" author="phabricator@reviews.facebook.net" created="Thu, 1 Nov 2012 06:47:11 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; column level statistics&quot;.&lt;/p&gt;

&lt;p&gt;  I wont go over cosmetic changes &amp;#8211;  newline at the end of the file etc.&lt;br/&gt;
  Please fix those.&lt;/p&gt;

&lt;p&gt;  One higher level question: (SA == SemanticAnalyzer)&lt;/p&gt;

&lt;p&gt;  1. StatsSemanticAnalyzer - looks like a wrong name - can you rename it to AnalyzeColumnStatsSema.. given that we already have a StatsTask etc. for something totally different.&lt;br/&gt;
  2. The code looks more complicated - I mean, calling SemanticAnalyzer from StatsSemanticAnalyzer, specially for non-rewritten queries. Won&apos;t it be simpler to:&lt;br/&gt;
  a. Either StatsSA should extend SA&lt;br/&gt;
  b. Move the logic for analyze (old) in StatsSA&lt;/p&gt;


&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientnegative/columnstats_partlvl.q:13 Looks fishy - wont the test error out at the first error.&lt;br/&gt;
  Subsequent errors would just be ignored&lt;/p&gt;


&lt;p&gt;  Can you add more negative tests - wrong column name.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D6339&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, cwsteinbach&lt;/p&gt;</comment>
                            <comment id="13488543" author="phabricator@reviews.facebook.net" created="Thu, 1 Nov 2012 08:25:11 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; column level statistics&quot;.&lt;/p&gt;

&lt;p&gt;  you have a columnstatsdesc/columnstatswork etc.&lt;br/&gt;
  Rename the file as columnstatssemanticanalyzer&lt;/p&gt;

&lt;p&gt;  I did not look into too much detail in the UDAF - I am assuming Carl has already reviewed that part&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/StatsSemanticAnalyzer.java:216 create a entry in ErrorMsg - similarly to all other exceptions&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D6339&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, cwsteinbach&lt;/p&gt;</comment>
                            <comment id="13488546" author="phabricator@reviews.facebook.net" created="Thu, 1 Nov 2012 08:29:11 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; column level statistics&quot;.&lt;/p&gt;

&lt;p&gt;  if u haven&apos;t done already - file a jira for upgrade scripts for other dbs.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/columnstats_partlvl.q:10 add some tests with explain extended.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsWork.java:33 More stuff should be dumped in explain(extended)&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsDesc.java:27 explain should output this&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D6339&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, cwsteinbach&lt;/p&gt;</comment>
                            <comment id="13488547" author="namit" created="Thu, 1 Nov 2012 08:29:16 +0000"  >&lt;p&gt;minor comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13489275" author="phabricator@reviews.facebook.net" created="Fri, 2 Nov 2012 06:00:11 +0000"  >&lt;p&gt;shreepadma has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; column level statistics&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsWork.java:33 Can you please let me know what you would like to see dumped in the explain extended?&lt;br/&gt;
  ql/src/test/queries/clientnegative/columnstats_partlvl.q:13 Will add  negative test for wrong column name and move each one of the query to a separate q file.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsDesc.java:27 Can you please let me know what you would like to include in the explain output?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/StatsSemanticAnalyzer.java:216 Can you please explain the purpose of creating an error message entry in addition to raising an exception? Throwing an exception should present all the error information that is needed.&lt;br/&gt;
  ql/src/test/queries/clientpositive/columnstats_partlvl.q:10 Will add tests wil explain extended. However, I&apos;m not sure what needs to be printed as part of explain extended output for columnstatswork. Please refer to my earlier comment on it.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D6339&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, cwsteinbach&lt;br/&gt;
Cc: shreepadma&lt;/p&gt;</comment>
                            <comment id="13489276" author="shreepadma" created="Fri, 2 Nov 2012 06:01:08 +0000"  >&lt;p&gt;@Namit: Thanks for your comments! I responded to most of your comments on phabricator. Thanks!&lt;/p&gt;</comment>
                            <comment id="13490421" author="shreepadma" created="Mon, 5 Nov 2012 02:58:57 +0000"  >&lt;p&gt;@Namit: New patch that addresses your comments is available on both JIRA and phabricator. Phabricator link: &lt;a href=&quot;https://reviews.facebook.net/D6459&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6459&lt;/a&gt;. I had to create a new review request since Carl owns the old one and I can&apos;t update it. Thanks!&lt;/p&gt;</comment>
                            <comment id="13490442" author="namit" created="Mon, 5 Nov 2012 04:03:20 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13490492" author="shreepadma" created="Mon, 5 Nov 2012 07:52:08 +0000"  >&lt;p&gt;@Namit: Updated patch is available on phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13490814" author="shreepadma" created="Mon, 5 Nov 2012 18:45:16 +0000"  >&lt;p&gt;@Namit: I responded to your comment about Exceptions on phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13491194" author="namit" created="Tue, 6 Nov 2012 04:00:12 +0000"  >&lt;p&gt;I think you should wrap the error even if is being thrown by a function being called.&lt;/p&gt;</comment>
                            <comment id="13491200" author="namit" created="Tue, 6 Nov 2012 04:17:40 +0000"  >&lt;p&gt;comments&lt;/p&gt;</comment>
                            <comment id="13491274" author="shreepadma" created="Tue, 6 Nov 2012 07:36:33 +0000"  >&lt;p&gt;@Namit: The latest patch addressed your comments. Its available both on JIRA and phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13491339" author="namit" created="Tue, 6 Nov 2012 09:29:11 +0000"  >&lt;p&gt;Fine with me.&lt;/p&gt;

&lt;p&gt;@Carl, do you have any additional comments ?&lt;br/&gt;
If not, can you take care of committing it ?&lt;/p&gt;</comment>
                            <comment id="13491758" author="cwsteinbach" created="Tue, 6 Nov 2012 19:46:11 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13491764" author="shreepadma" created="Tue, 6 Nov 2012 19:54:26 +0000"  >&lt;p&gt;@Carl: Please take the latest patch from JIRA. If you have trouble applying it, let me know. Thanks.&lt;/p&gt;</comment>
                            <comment id="13491792" author="shreepadma" created="Tue, 6 Nov 2012 20:38:29 +0000"  >&lt;p&gt;@Carl: You will see 6 failures in testParse (groupby1.q .. groupby6.q) when you run the tests. It is in the proces of being fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3674&quot; title=&quot;test case TestParse broken after recent checkin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3674&quot;&gt;&lt;del&gt;HIVE-3674&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13492126" author="cwsteinbach" created="Wed, 7 Nov 2012 04:55:36 +0000"  >&lt;p&gt;Committed to trunk. Thanks Shreepadma!&lt;/p&gt;</comment>
                            <comment id="13492156" author="namit" created="Wed, 7 Nov 2012 06:32:40 +0000"  >&lt;p&gt;I am getting some compile errors. Can you take a look ?&lt;/p&gt;</comment>
                            <comment id="13492229" author="hudson" created="Wed, 7 Nov 2012 09:48:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1778 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1778/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1778/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;. Column level scalar valued statistics on Tables and Partitions (Shreepadma Venugopalan via cws) (Revision 1406465)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406465&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406465&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/UserVisits.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/binary.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/bool.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/double.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/employee.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/employee2.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/employee_part.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/int.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/BinaryColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/BooleanColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatistics.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatisticsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatisticsDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatisticsObj.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/DoubleColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/EnvironmentContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/InvalidInputException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/LongColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StringColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/RawStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MPartitionColumnStatistics.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MTableColumnStatistics.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/package.jdo&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/DummyRawStoreForJdoConnection.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/if/queryplan.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/StageType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-php/queryplan/queryplan_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-py/queryplan/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-rb/queryplan_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnStatsTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TaskFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteParseContextGenerator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ColumnStatsSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ExportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FunctionSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QB.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QBParseInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/DoubleNumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFComputeStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/LongNumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/NumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/StringNumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_dp.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_incorrect_num_keys.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_invalid_values.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_multiple_part_clause.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_tbllvl.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_tbllvl_complex_type.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_tbllvl_incorrect_column.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/columnstats_partlvl.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/columnstats_tbllvl.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_binary.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_boolean.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_double.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_long.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_string.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_dp.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_incorrect_num_keys.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_invalid_values.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_multiple_part_clause.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_tbllvl.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_tbllvl_complex_type.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_tbllvl_incorrect_column.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/columnstats_partlvl.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/columnstats_tbllvl.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_binary.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_boolean.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_double.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_long.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_string.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13492495" author="shreepadma" created="Wed, 7 Nov 2012 16:54:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3524&quot; title=&quot;Storing certain Exception objects thrown in HiveMetaStore.java in MetaStoreEndFunctionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3524&quot;&gt;&lt;del&gt;HIVE-3524&lt;/del&gt;&lt;/a&gt; changed the signature of endFunction in HiveMetaStore.java. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3524&quot; title=&quot;Storing certain Exception objects thrown in HiveMetaStore.java in MetaStoreEndFunctionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3524&quot;&gt;&lt;del&gt;HIVE-3524&lt;/del&gt;&lt;/a&gt; was committed hours before this patch. The compile errors are due to the signature change. I&apos;m working on a fix. Thanks.&lt;/p&gt;</comment>
                            <comment id="13492498" author="shreepadma" created="Wed, 7 Nov 2012 16:55:34 +0000"  >&lt;p&gt;@Namit: Not sure what the protocol is but I&apos;ve attach the new patch to this JIRA. Thanks.&lt;/p&gt;</comment>
                            <comment id="13492505" author="shreepadma" created="Wed, 7 Nov 2012 17:04:09 +0000"  >&lt;p&gt;Please look at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.11.patch.txt to fix the compile errors introduced earlier.&lt;/p&gt;</comment>
                            <comment id="13492524" author="shreepadma" created="Wed, 7 Nov 2012 17:24:42 +0000"  >&lt;p&gt;Filed a new JIRA - &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3686&quot; title=&quot;Fix compile errors introduced by the interaction of HIVE-1362 and HIVE-3524&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3686&quot;&gt;&lt;del&gt;HIVE-3686&lt;/del&gt;&lt;/a&gt; to fix the compile errors.&lt;/p&gt;</comment>
                            <comment id="13492869" author="shreepadma" created="Thu, 8 Nov 2012 01:10:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3524&quot; title=&quot;Storing certain Exception objects thrown in HiveMetaStore.java in MetaStoreEndFunctionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3524&quot;&gt;&lt;del&gt;HIVE-3524&lt;/del&gt;&lt;/a&gt; introduced a signature change to endFunction in HiveMetaStore.java. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3524&quot; title=&quot;Storing certain Exception objects thrown in HiveMetaStore.java in MetaStoreEndFunctionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3524&quot;&gt;&lt;del&gt;HIVE-3524&lt;/del&gt;&lt;/a&gt; was committed a few hours before &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; adds new functions to HiveMetaStore.java that call endFunction with the old signature. &lt;/p&gt;</comment>
                            <comment id="13492930" author="hudson" created="Thu, 8 Nov 2012 03:58:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1780 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1780/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1780/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3686&quot; title=&quot;Fix compile errors introduced by the interaction of HIVE-1362 and HIVE-3524&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3686&quot;&gt;&lt;del&gt;HIVE-3686&lt;/del&gt;&lt;/a&gt;. Fix compile errors introduced by the interaction of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3524&quot; title=&quot;Storing certain Exception objects thrown in HiveMetaStore.java in MetaStoreEndFunctionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3524&quot;&gt;&lt;del&gt;HIVE-3524&lt;/del&gt;&lt;/a&gt;. (Shreepadma Venugopalan via kevinwilfong) (Revision 1406783)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406783&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406783&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547985" author="hudson" created="Wed, 9 Jan 2013 10:23:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3686&quot; title=&quot;Fix compile errors introduced by the interaction of HIVE-1362 and HIVE-3524&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3686&quot;&gt;&lt;del&gt;HIVE-3686&lt;/del&gt;&lt;/a&gt;. Fix compile errors introduced by the interaction of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3524&quot; title=&quot;Storing certain Exception objects thrown in HiveMetaStore.java in MetaStoreEndFunctionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3524&quot;&gt;&lt;del&gt;HIVE-3524&lt;/del&gt;&lt;/a&gt;. (Shreepadma Venugopalan via kevinwilfong) (Revision 1406783)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;. Column level scalar valued statistics on Tables and Partitions (Shreepadma Venugopalan via cws) (Revision 1406465)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406783&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406783&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406465&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1406465&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/UserVisits.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/binary.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/bool.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/double.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/employee.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/employee2.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/employee_part.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/int.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/if/hive_metastore.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/BinaryColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/BooleanColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatistics.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatisticsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatisticsDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ColumnStatisticsObj.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/DoubleColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/EnvironmentContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/InvalidInputException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/LongColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StringColumnStatsData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/RawStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MPartitionColumnStatistics.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/org/apache/hadoop/hive/metastore/model/MTableColumnStatistics.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/model/package.jdo&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/DummyRawStoreForJdoConnection.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/if/queryplan.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/StageType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-php/queryplan/queryplan_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-py/queryplan/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-rb/queryplan_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnStatsTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TaskFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteParseContextGenerator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ColumnStatsSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ExportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FunctionSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QB.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/QBParseInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzerFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ColumnStatsWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/DoubleNumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFComputeStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/LongNumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/NumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/StringNumDistinctValueEstimator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_dp.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_incorrect_num_keys.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_invalid_values.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_partlvl_multiple_part_clause.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_tbllvl.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_tbllvl_complex_type.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/columnstats_tbllvl_incorrect_column.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/columnstats_partlvl.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/columnstats_tbllvl.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_binary.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_boolean.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_double.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_long.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/compute_stats_string.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_dp.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_incorrect_num_keys.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_invalid_values.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_partlvl_multiple_part_clause.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_tbllvl.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_tbllvl_complex_type.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/columnstats_tbllvl_incorrect_column.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/columnstats_partlvl.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/columnstats_tbllvl.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_binary.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_boolean.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_double.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_long.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/compute_stats_string.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550262" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:00 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="13943576" author="sershe" created="Fri, 21 Mar 2014 21:21:31 +0000"  >&lt;p&gt;This jira adds but doesn&apos;t use decimal fields in the schema... I am going to &quot;reuse&quot; them for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6701&quot; title=&quot;Analyze table compute statistics for decimal columns.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6701&quot;&gt;&lt;del&gt;HIVE-6701&lt;/del&gt;&lt;/a&gt;. We probably cannot use decimal due to derby limitations (31 precision max, Hive is 38), so between string and binary there might not be a difference that matters&lt;/p&gt;</comment>
                            <comment id="13944246" author="lefty@hortonworks.com" created="Sat, 22 Mar 2014 21:41:20 +0000"  >&lt;p&gt;For the record:  patch 10 adds the &lt;b&gt;hive.stats.ndv.error&lt;/b&gt; configuration parameter to HiveConf.java and hive-default.xml.template.&lt;/p&gt;</comment>
                            <comment id="14168044" author="lefty@hortonworks.com" created="Sat, 11 Oct 2014 07:30:37 +0000"  >&lt;p&gt;&lt;b&gt;hive.stats.ndv.error&lt;/b&gt; is documented in the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.stats.ndv.error&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; hive.stats.ndv.error&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ANALYZE TABLE table_name COMPUTE STATISTICS FOR COLUMNS is documented in the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/StatsDev#StatsDev-ExistingTables&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Statistics in Hive &amp;#8211; Existing Tables &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-DisplayColumnStatistics&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DDL &amp;#8211; Display Column Statistics &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12497287">HIVE-1938</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12497405">HIVE-1940</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12615197">HIVE-3686</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12407019">HIVE-33</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12609666">HIVE-3516</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12610150">HIVE-3526</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12647688">HIVE-4561</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12610130">HIVE-3524</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12615045">HIVE-3678</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12612841">HIVE-3602</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12543350" name="HIVE-1362-gen_thrift.1.patch.txt" size="1685636" author="shreepadma" created="Fri, 31 Aug 2012 22:08:13 +0000"/>
                            <attachment id="12547483" name="HIVE-1362-gen_thrift.2.patch.txt" size="2458862" author="shreepadma" created="Wed, 3 Oct 2012 02:35:13 +0000"/>
                            <attachment id="12547582" name="HIVE-1362-gen_thrift.3.patch.txt" size="2455952" author="shreepadma" created="Wed, 3 Oct 2012 19:20:12 +0000"/>
                            <attachment id="12547684" name="HIVE-1362-gen_thrift.4.patch.txt" size="2455678" author="shreepadma" created="Thu, 4 Oct 2012 05:46:57 +0000"/>
                            <attachment id="12550249" name="HIVE-1362-gen_thrift.5.patch.txt" size="2463914" author="shreepadma" created="Mon, 22 Oct 2012 06:30:12 +0000"/>
                            <attachment id="12551297" name="HIVE-1362-gen_thrift.6.patch.txt" size="2475366" author="shreepadma" created="Tue, 30 Oct 2012 01:25:12 +0000"/>
                            <attachment id="12543349" name="HIVE-1362.1.patch.txt" size="249342" author="shreepadma" created="Fri, 31 Aug 2012 22:05:21 +0000"/>
                            <attachment id="12552229" name="HIVE-1362.10.patch.txt" size="328073" author="shreepadma" created="Tue, 6 Nov 2012 07:35:04 +0000"/>
                            <attachment id="12552493" name="HIVE-1362.11.patch.txt" size="2753" author="shreepadma" created="Wed, 7 Nov 2012 17:03:32 +0000"/>
                            <attachment id="12547488" name="HIVE-1362.2.patch.txt" size="270261" author="shreepadma" created="Wed, 3 Oct 2012 03:11:15 +0000"/>
                            <attachment id="12547580" name="HIVE-1362.3.patch.txt" size="267150" author="shreepadma" created="Wed, 3 Oct 2012 19:17:39 +0000"/>
                            <attachment id="12547683" name="HIVE-1362.4.patch.txt" size="267204" author="shreepadma" created="Thu, 4 Oct 2012 05:46:36 +0000"/>
                            <attachment id="12550248" name="HIVE-1362.5.patch.txt" size="272827" author="shreepadma" created="Mon, 22 Oct 2012 06:29:42 +0000"/>
                            <attachment id="12551296" name="HIVE-1362.6.patch.txt" size="286891" author="shreepadma" created="Tue, 30 Oct 2012 01:24:47 +0000"/>
                            <attachment id="12551403" name="HIVE-1362.7.patch.txt" size="281963" author="shreepadma" created="Tue, 30 Oct 2012 18:42:28 +0000"/>
                            <attachment id="12551465" name="HIVE-1362.8.patch.txt" size="286614" author="shreepadma" created="Wed, 31 Oct 2012 00:02:41 +0000"/>
                            <attachment id="12552057" name="HIVE-1362.9.patch.txt" size="325073" author="shreepadma" created="Mon, 5 Nov 2012 02:57:01 +0000"/>
                            <attachment id="12551446" name="HIVE-1362.D6339.1.patch" size="275374" author="phabricator@reviews.facebook.net" created="Tue, 30 Oct 2012 23:02:11 +0000"/>
                            <attachment id="12552228" name="HIVE-1362_gen-thrift.10.patch.txt" size="2497925" author="shreepadma" created="Tue, 6 Nov 2012 07:34:39 +0000"/>
                            <attachment id="12551405" name="HIVE-1362_gen-thrift.7.patch.txt" size="2470438" author="shreepadma" created="Tue, 30 Oct 2012 18:42:47 +0000"/>
                            <attachment id="12551464" name="HIVE-1362_gen-thrift.8.patch.txt" size="2475349" author="shreepadma" created="Wed, 31 Oct 2012 00:02:23 +0000"/>
                            <attachment id="12552056" name="HIVE-1362_gen-thrift.9.patch.txt" size="2513809" author="shreepadma" created="Mon, 5 Nov 2012 02:56:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Feb 2011 17:36:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00x6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3309</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1363] &apos;SHOW TABLE EXTENDED LIKE&apos; command does not strip single/double quotes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1363</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; SHOW TABLE EXTENDED LIKE pokes;
OK
tableName:pokes
owner:carl
location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost/user/hive/warehouse/pokes
&lt;/span&gt;inputformat:org.apache.hadoop.mapred.TextInputFormat
outputformat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
columns:struct columns { i32 num}
partitioned:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
partitionColumns:
totalNumberFiles:0
totalFileSize:0
maxFileSize:0
minFileSize:0
lastAccessTime:0
lastUpdateTime:1274517075221

hive&amp;gt; SHOW TABLE EXTENDED LIKE &lt;span class=&quot;code-quote&quot;&gt;&quot;p*&quot;&lt;/span&gt;;
FAILED: Error in metadata: MetaException(message:Got exception: javax.jdo.JDOUserException &lt;span class=&quot;code-quote&quot;&gt;&apos;)&apos;&lt;/span&gt; expected at character 54 in &lt;span class=&quot;code-quote&quot;&gt;&quot;database.name == dbName &amp;amp;&amp;amp; ( tableName.matches(&quot;&lt;/span&gt;(?i)&lt;span class=&quot;code-quote&quot;&gt;&quot;p.*&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;))&quot;&lt;/span&gt;)
FAILED: Execution Error, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code 1 from org.apache.hadoop.hive.ql.exec.DDLTask

hive&amp;gt; SHOW TABLE EXTENDED LIKE &lt;span class=&quot;code-quote&quot;&gt;&apos;p*&apos;&lt;/span&gt;;
OK

hive&amp;gt; SHOW TABLE EXTENDED LIKE `p*`;
OK
tableName:pokes
owner:carl
location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost/user/hive/warehouse/pokes
&lt;/span&gt;inputformat:org.apache.hadoop.mapred.TextInputFormat
outputformat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
columns:struct columns { i32 num}
partitioned:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
partitionColumns:
totalNumberFiles:0
totalFileSize:0
maxFileSize:0
minFileSize:0
lastAccessTime:0
lastUpdateTime:1274517075221

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12465204">HIVE-1363</key>
            <summary>&apos;SHOW TABLE EXTENDED LIKE&apos; command does not strip single/double quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctang.ma">Chaoyu Tang</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 May 2010 03:10:17 +0000</created>
                <updated>Thu, 13 Nov 2014 19:43:16 +0000</updated>
                            <resolved>Mon, 8 Sep 2014 03:42:10 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12870352" author="he yongqiang" created="Sun, 23 May 2010 04:13:49 +0000"  >&lt;p&gt;A minor comment: why to support three kinds of usages? That may make users confusing.&lt;/p&gt;</comment>
                            <comment id="12870365" author="cwsteinbach" created="Sun, 23 May 2010 07:50:35 +0000"  >&lt;p&gt;My understanding is that backticks are reserved for enclosing&lt;br/&gt;
identifiers that conflict with other tokens in the HQL grammar, e.g. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; CREATE TABLE function(stuff INT);
FAILED: Parse Error: line 1:13 mismatched input &lt;span class=&quot;code-quote&quot;&gt;&apos;function&apos;&lt;/span&gt; expecting Identifier in create table statement

hive&amp;gt; CREATE TABLE `function`(stuff INT);
OK

hive&amp;gt; show tables;
OK
function
pokes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Based on this I would argue that the SHOW TABLES command currently exhibits the expected&lt;br/&gt;
behavior whereas SHOW TABLE EXTENDED does not:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; SHOW TABLES &lt;span class=&quot;code-quote&quot;&gt;&quot;pokes*&quot;&lt;/span&gt;;
OK
pokes

hive&amp;gt; SHOW TABLE EXTENDED LIKE &lt;span class=&quot;code-quote&quot;&gt;&quot;pokes*&quot;&lt;/span&gt;;
FAILED: Error in metadata: MetaException(message:Got exception: javax.jdo.JDOUserException &lt;span class=&quot;code-quote&quot;&gt;&apos;)&apos;&lt;/span&gt; expected at character 54 in &lt;span class=&quot;code-quote&quot;&gt;&quot;database.name == dbName &amp;amp;&amp;amp; ( tableName.matches(&quot;&lt;/span&gt;(?i)&lt;span class=&quot;code-quote&quot;&gt;&quot;pokes.*&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;))&quot;&lt;/span&gt;)
FAILED: Execution Error, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code 1 from org.apache.hadoop.hive.ql.exec.DDLTask

hive&amp;gt; SHOW TABLES &lt;span class=&quot;code-quote&quot;&gt;&apos;pokes*&apos;&lt;/span&gt;;
OK
pokes

hive&amp;gt; SHOW TABLE EXTENDED LIKE &lt;span class=&quot;code-quote&quot;&gt;&apos;pokes*&apos;&lt;/span&gt;;
OK

hive&amp;gt; SHOW TABLES `pokes*`;
OK

hive&amp;gt; SHOW TABLE EXTENDED LIKE `pokes*`;
OK
tableName:pokes
owner:carl
location:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost/user/hive/warehouse/pokes
&lt;/span&gt;inputformat:org.apache.hadoop.mapred.TextInputFormat
outputformat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
columns:struct columns { i32 num}
partitioned:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
partitionColumns:
totalNumberFiles:0
totalFileSize:0
maxFileSize:0
minFileSize:0
lastAccessTime:0
lastUpdateTime:1274517075221

Time taken: 0.579 seconds
hive&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14124347" author="ctang.ma" created="Sat, 6 Sep 2014 06:04:01 +0000"  >&lt;p&gt;I am running into this issue and pick up this JIRA to work on.&lt;/p&gt;</comment>
                            <comment id="14124349" author="ctang.ma" created="Sat, 6 Sep 2014 06:06:47 +0000"  >&lt;p&gt;The patch is requesting for the review: &lt;a href=&quot;https://reviews.apache.org/r/25412/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/25412/&lt;/a&gt;&lt;br/&gt;
Thanks in advanced.&lt;/p&gt;</comment>
                            <comment id="14124508" author="xuefuz" created="Sat, 6 Sep 2014 14:32:51 +0000"  >&lt;p&gt;Thanks for working on this, &lt;span class=&quot;error&quot;&gt;&amp;#91;~ctang.cloudera&amp;#93;&lt;/span&gt;. Patch looks good to me. Minor comment on RB.&lt;/p&gt;</comment>
                            <comment id="14124562" author="ctang.ma" created="Sat, 6 Sep 2014 17:19:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; for the review. I made the change based on the comments and uploaded a new patch here.&lt;/p&gt;</comment>
                            <comment id="14124687" author="hiveqa" created="Sat, 6 Sep 2014 22:31:57 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667028/HIVE-1363.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667028/HIVE-1363.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6184 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_describe_table_json
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/672/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/672/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/672/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/672/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-672/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-672/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667028&lt;/p&gt;</comment>
                            <comment id="14124727" author="ctang.ma" created="Sun, 7 Sep 2014 00:55:01 +0000"  >&lt;p&gt;The describe_table_json.q test failure is related to the change from this patch. Actually the original test output seemed not right. For the query SHOW TABLE EXTENDED LIKE &apos;json*&apos;, it returned empty results and its output in json was &lt;/p&gt;
{&quot;tables&quot;:[]}
&lt;p&gt;. But the expected result should have one entry for table jsontable, and the output should look like following, which is to be masked in its q.out file.&lt;br/&gt;
==&lt;br/&gt;
{&quot;tables&quot;:[{&quot;minFileSize&quot;:0,&quot;totalNumberFiles&quot;:0,&quot;location&quot;:&quot;file:/user/hive/warehouse/apache/jsontable&quot;,&quot;outputFormat&quot;:&quot;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&quot;,&quot;lastAccessTime&quot;:0,&quot;lastUpdateTime&quot;:1410049821000,&quot;columns&quot;:[&lt;/p&gt;
{&quot;name&quot;:&quot;key&quot;,&quot;type&quot;:&quot;int&quot;}
&lt;p&gt;,&lt;/p&gt;
{&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;string&quot;}
&lt;p&gt;],&quot;maxFileSize&quot;:0,&quot;partitioned&quot;:false,&quot;tableName&quot;:&quot;jsontable&quot;,&quot;owner&quot;:&quot;ctang&quot;,&quot;inputFormat&quot;:&quot;org.apache.hadoop.mapred.TextInputFormat&quot;,&quot;totalFileSize&quot;:0}]}&lt;br/&gt;
==&lt;/p&gt;

&lt;p&gt;Change describe_table_json.q.out to reflect the expected query output and uploaded a new patch.&lt;/p&gt;</comment>
                            <comment id="14124760" author="xuefuz" created="Sun, 7 Sep 2014 04:18:36 +0000"  >&lt;p&gt;+1, pending on the new test result.&lt;/p&gt;</comment>
                            <comment id="14124819" author="hiveqa" created="Sun, 7 Sep 2014 07:46:19 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667057/HIVE-1363.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667057/HIVE-1363.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6184 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/678/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/678/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/678/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/678/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-678/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-678/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667057&lt;/p&gt;</comment>
                            <comment id="14125187" author="xuefuz" created="Mon, 8 Sep 2014 03:42:10 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks to Chaoyu for the contribution.&lt;/p&gt;</comment>
                            <comment id="14125229" author="lefty@hortonworks.com" created="Mon, 8 Sep 2014 05:30:51 +0000"  >&lt;p&gt;&lt;em&gt;If&lt;/em&gt; this needs to be documented in the wiki, here&apos;s where it goes (but maybe it&apos;s just a bug fix that doesn&apos;t need user documentation):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-ShowTable/PartitionExtended&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Language Manual &amp;#8211; DDL &amp;#8211; Show Table/Partition Extended &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14125692" author="xuefuz" created="Mon, 8 Sep 2014 15:56:14 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;. It seems to me that is a just a bug fix.&lt;/p&gt;</comment>
                            <comment id="14210929" author="thejas" created="Thu, 13 Nov 2014 19:43:16 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12475523">HIVE-1676</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12739813">SENTRY-423</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12667028" name="HIVE-1363.1.patch" size="7878" author="ctang.ma" created="Sat, 6 Sep 2014 17:19:16 +0000"/>
                            <attachment id="12667057" name="HIVE-1363.2.patch" size="8633" author="ctang.ma" created="Sun, 7 Sep 2014 00:55:01 +0000"/>
                            <attachment id="12666991" name="HIVE-1363.patch" size="7373" author="ctang.ma" created="Sat, 6 Sep 2014 06:06:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 23 May 2010 04:13:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42530</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lerb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123041</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1364] Increase the maximum length of various metastore fields, and remove TYPE_NAME from COLUMNS primary key</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1364</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The value component of a SERDEPROPERTIES key/value pair is currently limited&lt;br/&gt;
to a maximum length of 767 characters. I believe that the motivation for limiting the length to &lt;br/&gt;
767 characters is that this value is the maximum allowed length of an index in&lt;br/&gt;
a MySQL database running on the InnoDB engine: &lt;a href=&quot;http://bugs.mysql.com/bug.php?id=13315&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.mysql.com/bug.php?id=13315&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The Metastore OR mapping currently limits many fields (including SERDEPROPERTIES.PARAM_VALUE) to a maximum length of 767 characters despite the fact that these fields are not indexed.&lt;/li&gt;
	&lt;li&gt;The maximum length of a VARCHAR value in MySQL 5.0.3 and later is 65,535.&lt;/li&gt;
	&lt;li&gt;We can expect many users to hit the 767 character limit on SERDEPROPERTIES.PARAM_VALUE when using the hbase.columns.mapping serdeproperty to map a table that has many columns.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I propose increasing the maximum allowed length of SERDEPROPERTIES.PARAM_VALUE to 8192.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12465284">HIVE-1364</key>
            <summary>Increase the maximum length of various metastore fields, and remove TYPE_NAME from COLUMNS primary key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 May 2010 16:32:53 +0000</created>
                <updated>Tue, 27 Oct 2015 16:27:42 +0000</updated>
                            <resolved>Wed, 6 Oct 2010 20:43:50 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12870752" author="cwsteinbach" created="Mon, 24 May 2010 18:12:57 +0000"  >&lt;p&gt;The max length of a VARCHAR in Oracle (9i/10g/11g) is 4000 bytes, so&lt;br/&gt;
I suppose it makes sense to use 4000 as the default size for string properties&lt;br/&gt;
that we don&apos;t need to index.&lt;/p&gt;</comment>
                            <comment id="12879092" author="prasadc" created="Tue, 15 Jun 2010 19:45:45 +0000"  >&lt;p&gt;it used to be much higher in the beginning but quite a few users reported problems on some mysql dbs. 767 seemed to work most dbs. before committing this can someone test this on some different dbs (with and without UTF encoding)?&lt;/p&gt;</comment>
                            <comment id="12879093" author="jvs" created="Tue, 15 Jun 2010 19:54:02 +0000"  >&lt;p&gt;Couldn&apos;t we just use a LOB?  So far so good with views (except for the Oracle mapping which we still need to address to get it to use CLOB instead of LONG VARCHAR).&lt;/p&gt;</comment>
                            <comment id="12879635" author="jvs" created="Thu, 17 Jun 2010 02:32:55 +0000"  >&lt;p&gt;Also, PART_NAME in table PARTITIONS needs to remain as is, since it is covered by an index.&lt;/p&gt;</comment>
                            <comment id="12879639" author="cwsteinbach" created="Thu, 17 Jun 2010 02:44:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1364&quot; title=&quot;Increase the maximum length of various metastore fields, and remove TYPE_NAME from COLUMNS primary key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1364&quot;&gt;&lt;del&gt;HIVE-1364&lt;/del&gt;&lt;/a&gt;.2.patch.txt:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Change PARTITIONS.PART_NAME max length back to 767&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12879643" author="cwsteinbach" created="Thu, 17 Jun 2010 02:55:37 +0000"  >&lt;p&gt;@Prasad: It&apos;s possible that people who ran into problems were before were using a version of MySQL older than 5.0.3. These versions supported a 255 byte max length for VARCHARs. It&apos;s also possible that older versions of the package.jdo mapping contained more indexes, in which case the 767 byte limit holds. Also, UTF encoding should not make a difference since these are byte lengths, not character lengths.&lt;/p&gt;

&lt;p&gt;@John: I think using LOBs is the right approach, but perhaps we should handle that problem in a different ticket? I don&apos;t think we can just change the mapping to use LOB instead of VARCHAR, and will instead have to add a new LOB column, deprecate the old VARCHAR column, and create an accessor that is capable of using either column.&lt;/p&gt;</comment>
                            <comment id="12879648" author="jvs" created="Thu, 17 Jun 2010 03:27:52 +0000"  >&lt;p&gt;I&apos;m not sure we need to use the deprecation approach.  In Java land, it&apos;s all just String regardless of the underlying character precision in the DB.&lt;/p&gt;

&lt;p&gt;For existing metastores, people are already going to need to run upgrade SQL commands against their metastore DB&apos;s when upgrading to 0.6 because of the new support for views.  We can just add on to those scripts.&lt;/p&gt;</comment>
                            <comment id="12881324" author="athusoo" created="Tue, 22 Jun 2010 19:47:46 +0000"  >&lt;p&gt;Also why do we make everything 4000 bytes - I presume things like ftype will never hit that limit.&lt;/p&gt;

&lt;p&gt;Also changes to upgrade SQL should also be a part of the patch, no? Where are the scripts for the view change located?&lt;/p&gt;
</comment>
                            <comment id="12881361" author="jvs" created="Tue, 22 Jun 2010 21:08:46 +0000"  >&lt;p&gt;Currently the view scripts are only in the wiki:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/ViewDev#Metastore_Upgrades&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/ViewDev#Metastore_Upgrades&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Per discussion with Ashish, we should open a separate JIRA issue for (at a minimum) packaging up example MySQL migration scripts (cumulative across all schema changes from 0.5 to 0.6) and explaining what to do with them in the release notes.  Carl, do you want to take that on as part of release mgmt?&lt;/p&gt;
</comment>
                            <comment id="12881416" author="cwsteinbach" created="Tue, 22 Jun 2010 22:29:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also why do we make everything 4000 bytes - I presume things like ftype will never hit that limit.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Currently the ORM is the de facto enforcement mechanism for string length limitations. I think this is a bad approach since 1) users can work around it by manually altering the underlying tables, and 2) the limits are stated in terms of bytes so the actual length restriction in terms of number of characters will depend on the character set of the underlying DB. In light of this I bumped every size limit to 4000 bytes, and also because I did not want to try to predict which property length limit someone would next bump into. I&apos;m willing to revert these limits to their original values. Are there any properties besides ftype which you want me to revert? Should I revert everything except SERDEPROPERTIES.PARAM_VALUE?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also changes to upgrade SQL should also be a part of the patch, no? Where are the scripts for the view change located?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll update the patch with the necessary scripts. Should these go in bin/ or somewhere under metastore/ ?&lt;/p&gt;

&lt;p&gt;@John: Yes, I think this falls under the responsibility of the release manager. I will take care of it.&lt;/p&gt;




&lt;p&gt;I think the current approach of using the ORM as the de facto enforcement mechanism for checking &lt;/p&gt;</comment>
                            <comment id="12891447" author="cwsteinbach" created="Fri, 23 Jul 2010 01:52:27 +0000"  >&lt;p&gt;MetaStore upgrade scripts are covered in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1427&quot; title=&quot;Provide metastore schema migration scripts (0.5 -&amp;gt; 0.6)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1427&quot;&gt;&lt;del&gt;HIVE-1427&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;@ John &amp;amp; Ashish: Please tell me how you want me to change this patch. I&apos;m willing to revert these limits to their original values. Are there any properties besides ftype which you want me to revert? Should I revert everything except SERDEPROPERTIES.PARAM_VALUE?&lt;/p&gt;</comment>
                            <comment id="12891753" author="jvs" created="Fri, 23 Jul 2010 19:30:09 +0000"  >&lt;p&gt;I think we should go ahead with changing everything.  Even ftype could get large for complex nested types, right Ashish?&lt;/p&gt;

&lt;p&gt;But I really think if we&apos;re going to do this, we should go to LOB unless I&apos;m wrong about it being possible to do in-place.&lt;/p&gt;

&lt;p&gt;Side note:  I recently found out that in InnoDB (at least the version in use at Facebook), the first 512 bytes of each LOB is stored inline in the row, and there&apos;s an overall inline row limit of 8K, or something like that.  So a table with a lot of LOB columns can still hit a limit, which is annoying.&lt;/p&gt;</comment>
                            <comment id="12908592" author="jvs" created="Mon, 13 Sep 2010 02:44:45 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1632&quot; title=&quot;Column length not sufficient for large STRUCT definitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1632&quot;&gt;&lt;del&gt;HIVE-1632&lt;/del&gt;&lt;/a&gt; for an ftype use case.&lt;/p&gt;</comment>
                            <comment id="12909395" author="jvs" created="Tue, 14 Sep 2010 19:18:51 +0000"  >&lt;p&gt;Just hit a case where TYPE_NAME in the COLUMNS table (limit 128 characters) was waaay too short.  Is there a good reason the type name is part of the primary key for the COLUMNS table?&lt;/p&gt;</comment>
                            <comment id="12910361" author="jvs" created="Thu, 16 Sep 2010 22:28:16 +0000"  >&lt;p&gt;(Actually TYPE_NAME is what was needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1632&quot; title=&quot;Column length not sufficient for large STRUCT definitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1632&quot;&gt;&lt;del&gt;HIVE-1632&lt;/del&gt;&lt;/a&gt;, not FTYPE, but I think we should address both.)&lt;/p&gt;</comment>
                            <comment id="12910368" author="jvs" created="Thu, 16 Sep 2010 22:34:09 +0000"  >&lt;p&gt;Canceling patch since I think we should widen TYPE_NAME and also drop it from the PRIMARY KEY on the COLUMNS table.&lt;/p&gt;</comment>
                            <comment id="12914162" author="hbasereviewboard" created="Thu, 23 Sep 2010 18:54:44 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/895/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/895/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The patch increases the length of various properties in the Metastore OR mapping. Properties which are currently indexed, or which we may want to index in the future were increased to a length of 767 bytes. Properties which are not indexed and which we are unlikely to ever want to index were increased to a max length of 4000 bytes. I also removed the PK constraint on the COLUMNS.TYPE_NAME field.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1364&quot; title=&quot;Increase the maximum length of various metastore fields, and remove TYPE_NAME from COLUMNS primary key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1364&quot;&gt;&lt;del&gt;HIVE-1364&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1364&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  metastore/src/model/package.jdo 527f4b2 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/895/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/895/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12914196" author="jvs" created="Thu, 23 Sep 2010 19:51:11 +0000"  >&lt;p&gt;Per discussion in IRC, we should not change the precision for identifiers.  Here&apos;s the revert list (plus one change for MStorageDescriptor&apos;s TYPE_NAME).&lt;/p&gt;

&lt;p&gt;MFieldSchema&lt;br/&gt;
FNAME&lt;/p&gt;

&lt;p&gt;MType&lt;br/&gt;
TYPE_NAME&lt;br/&gt;
FIELD_NAME&lt;/p&gt;

&lt;p&gt;MTable&lt;br/&gt;
TBL_NAME&lt;br/&gt;
PKEY_NAME&lt;br/&gt;
PARAM_KEY&lt;br/&gt;
TBL_TYPE&lt;/p&gt;

&lt;p&gt;MSerDeInfo&lt;br/&gt;
NAME&lt;br/&gt;
PARAM_KEY&lt;/p&gt;

&lt;p&gt;MOrder&lt;br/&gt;
COL_NAME&lt;/p&gt;

&lt;p&gt;MStorageDescriptor&lt;br/&gt;
COLUMN_NAME (all instances)&lt;br/&gt;
PARAM_KEY&lt;br/&gt;
TYPE_NAME should actually be 4000 since it&apos;s really a type signature, not a type name, and we&apos;re getting rid of the indexing for it&lt;/p&gt;

&lt;p&gt;MPartition&lt;br/&gt;
PARAM_KEY&lt;/p&gt;

&lt;p&gt;MIndex&lt;br/&gt;
INDEX_NAME&lt;br/&gt;
PARAM_KEY&lt;/p&gt;</comment>
                            <comment id="12914241" author="cwsteinbach" created="Thu, 23 Sep 2010 21:45:26 +0000"  >&lt;p&gt;Updated version of the patch with changes requested by John.&lt;/p&gt;</comment>
                            <comment id="12914251" author="hbasereviewboard" created="Thu, 23 Sep 2010 21:58:33 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/895/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/895/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-09-23 14:45:46.673298)&lt;/p&gt;


&lt;p&gt;Review request for Hive Developers and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The patch increases the length of various properties in the Metastore OR mapping. Properties which are currently indexed, or which we may want to index in the future were increased to a length of 767 bytes. Properties which are not indexed and which we are unlikely to ever want to index were increased to a max length of 4000 bytes. I also removed the PK constraint on the COLUMNS.TYPE_NAME field.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1364&quot; title=&quot;Increase the maximum length of various metastore fields, and remove TYPE_NAME from COLUMNS primary key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1364&quot;&gt;&lt;del&gt;HIVE-1364&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1364&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  metastore/src/model/package.jdo 527f4b2 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/895/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/895/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12914311" author="jvs" created="Fri, 24 Sep 2010 01:32:19 +0000"  >&lt;p&gt;+1 from me pending metastore testing by Paul.&lt;/p&gt;</comment>
                            <comment id="12918356" author="namit" created="Wed, 6 Oct 2010 00:44:13 +0000"  >&lt;p&gt;We tested this on our production metastore db.&lt;br/&gt;
The downtime should be acceptable - I will start the tests&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12918673" author="namit" created="Wed, 6 Oct 2010 20:43:50 +0000"  >&lt;p&gt;Committed to both 0.6 and trunk. Thanks Carl&lt;/p&gt;</comment>
                            <comment id="14123532" author="dumpster" created="Fri, 5 Sep 2014 20:37:52 +0000"  >&lt;p&gt;I think this should be re-opened.&lt;/p&gt;

&lt;p&gt;The current limit is at 4000. This is proving to be insufficient for our own big-data work, while using nested/hierarchical JSON files (some nodes have 16K of structs within them).&lt;/p&gt;

&lt;p&gt;If possible, a more generous limit should be set--our minimum would be 6500 as of today. We modified it to be 32000 (via MySQL) and it appears works well so far.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                            <comment id="14976608" author="teabot" created="Tue, 27 Oct 2015 15:57:49 +0000"  >&lt;p&gt;Echoing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dumpster&quot; class=&quot;user-hover&quot; rel=&quot;dumpster&quot;&gt;David Beveridge&lt;/a&gt;&apos;s comment, we too are hitting this limit (also with nested JSON) and are having to alter these tables by hand. Given that the purpose of these columns is to hold very loosely defined configuration values it seems rather limiting to impose such a relatively low length bound. Can we not use CLOB-like types as for example as used by &lt;tt&gt;TBLS.VIEW_EXPANDED_TEXT&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;I&apos;d suggest that the candidates for type change are:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;COLUMNS_V2.TYPE_NAME&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;TABLE_PARAMS.PARAM_VALUE&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;SERDE_PARAMS.PARAM_VALUE&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;SD_PARAMS.PARAM_VALUE&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Finally, will this limitation persist in the work resulting from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9452&quot; title=&quot;Use HBase to store Hive metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9452&quot;&gt;HIVE-9452&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14976661" author="teabot" created="Tue, 27 Oct 2015 16:27:42 +0000"  >&lt;p&gt;I created a new issue relating to my previous comment: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12274&quot; title=&quot;Increase width of columns used for general configuration in the metastore.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12274&quot;&gt;&lt;del&gt;HIVE-12274&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12467637">HIVE-1427</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12467636">HIVE-1426</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12467637">HIVE-1427</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12473944">HIVE-1632</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12447307" name="HIVE-1364.2.patch.txt" size="4382" author="cwsteinbach" created="Thu, 17 Jun 2010 02:44:10 +0000"/>
                            <attachment id="12455399" name="HIVE-1364.3.backport-060.patch.txt" size="9121" author="cwsteinbach" created="Thu, 23 Sep 2010 18:30:51 +0000"/>
                            <attachment id="12455398" name="HIVE-1364.3.patch.txt" size="10304" author="cwsteinbach" created="Thu, 23 Sep 2010 18:30:51 +0000"/>
                            <attachment id="12455429" name="HIVE-1364.4.backport-060.patch.txt" size="6384" author="cwsteinbach" created="Thu, 23 Sep 2010 21:45:26 +0000"/>
                            <attachment id="12455428" name="HIVE-1364.4.patch.txt" size="6766" author="cwsteinbach" created="Thu, 23 Sep 2010 21:45:26 +0000"/>
                            <attachment id="12447166" name="HIVE-1364.patch" size="4719" author="cwsteinbach" created="Tue, 15 Jun 2010 19:33:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Jun 2010 19:45:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lerj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mysql serdeproperties jpox length</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1365] Bug in SMBJoinOperator which may causes a final part  of the results in some cases.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1365</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12465314">HIVE-1365</key>
            <summary>Bug in SMBJoinOperator which may causes a final part  of the results in some cases.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 May 2010 22:05:43 +0000</created>
                <updated>Sat, 17 Dec 2011 00:04:04 +0000</updated>
                            <resolved>Tue, 25 May 2010 19:11:34 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12870871" author="he yongqiang" created="Mon, 24 May 2010 22:07:56 +0000"  >&lt;p&gt;added the testcase provided by Siying Dong.&lt;/p&gt;</comment>
                            <comment id="12870890" author="he yongqiang" created="Mon, 24 May 2010 22:46:04 +0000"  >&lt;p&gt;talked with Siying, i need to add another testcase.&lt;/p&gt;</comment>
                            <comment id="12870977" author="he yongqiang" created="Tue, 25 May 2010 03:57:39 +0000"  >&lt;p&gt;added more testcases from Siying.&lt;/p&gt;</comment>
                            <comment id="12871297" author="namit" created="Tue, 25 May 2010 19:11:34 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445396" name="hive-1365.1.patch" size="22472" author="he yongqiang" created="Mon, 24 May 2010 22:07:56 +0000"/>
                            <attachment id="12445414" name="hive-1365.2.patch" size="163182" author="he yongqiang" created="Tue, 25 May 2010 03:57:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 May 2010 19:11:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72942</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lerr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1366] inputFileFormat error if the merge job takes a different input file format than the default output file format</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1366</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the input file format is say SequenceFileFormat and the default fileformat is RCFile. the merge job after the MR job assumes the input format is SequenceFile format rather than RCFile. This is probably introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1357&quot; title=&quot;CombineHiveInputSplit should initialize the inputFileFormat once for a single split&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1357&quot;&gt;&lt;del&gt;HIVE-1357&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12465325">HIVE-1366</key>
            <summary>inputFileFormat error if the merge job takes a different input file format than the default output file format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 May 2010 01:35:29 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:26 +0000</updated>
                            <resolved>Tue, 25 May 2010 04:24:45 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12870945" author="nzhang" created="Tue, 25 May 2010 01:49:25 +0000"  >&lt;p&gt;+1. will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12870982" author="nzhang" created="Tue, 25 May 2010 04:24:45 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445409" name="hive.1366.1.patch" size="1667" author="namit" created="Tue, 25 May 2010 01:39:33 +0000"/>
                            <attachment id="12445410" name="hive.1366.2.patch" size="2562" author="namit" created="Tue, 25 May 2010 01:48:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lerz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1367] cluster by multiple columns does not work if parenthesis is present</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1367</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following query:&lt;/p&gt;

&lt;p&gt;select ...  from src cluster by (key, value)&lt;/p&gt;

&lt;p&gt;throws a compile error:&lt;/p&gt;

&lt;p&gt;whereas the query&lt;/p&gt;


&lt;p&gt;select ...  from src cluster by key, value&lt;/p&gt;



&lt;p&gt;works fine&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465337">HIVE-1367</key>
            <summary>cluster by multiple columns does not work if parenthesis is present</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 May 2010 06:27:21 +0000</created>
                <updated>Thu, 29 Aug 2013 09:22:45 +0000</updated>
                            <resolved>Sun, 30 Sep 2012 18:08:26 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12871037" author="cwsteinbach" created="Tue, 25 May 2010 07:30:41 +0000"  >&lt;p&gt;Should this also apply to the DISTRIBUTE BY, ORDER BY, or SORT BY clauses?&lt;/p&gt;</comment>
                            <comment id="12871303" author="namit" created="Tue, 25 May 2010 19:21:48 +0000"  >&lt;p&gt;Thats right&lt;/p&gt;</comment>
                            <comment id="13466414" author="zhenxiao" created="Sun, 30 Sep 2012 05:23:09 +0000"  >&lt;p&gt;Review Request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5757&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D5757&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13466415" author="namit" created="Sun, 30 Sep 2012 05:30:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13466416" author="namit" created="Sun, 30 Sep 2012 05:32:38 +0000"  >&lt;p&gt;running tests&lt;/p&gt;</comment>
                            <comment id="13466535" author="namit" created="Sun, 30 Sep 2012 18:08:26 +0000"  >&lt;p&gt;Committed. Thanks Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13466639" author="hudson" created="Mon, 1 Oct 2012 04:56:12 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1711 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1711/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1711/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1367&quot; title=&quot;cluster by multiple columns does not work if parenthesis is present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1367&quot;&gt;&lt;del&gt;HIVE-1367&lt;/del&gt;&lt;/a&gt; cluster by multiple columns does not work if parenthesis is present&lt;br/&gt;
(Zhenxiao Luo via namit) (Revision 1392091)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1392091&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1392091&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/parenthesis_star_by.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/parenthesis_star_by.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547984" author="hudson" created="Wed, 9 Jan 2013 10:23:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1367&quot; title=&quot;cluster by multiple columns does not work if parenthesis is present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1367&quot;&gt;&lt;del&gt;HIVE-1367&lt;/del&gt;&lt;/a&gt; cluster by multiple columns does not work if parenthesis is present&lt;br/&gt;
(Zhenxiao Luo via namit) (Revision 1392091)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1392091&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1392091&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/parenthesis_star_by.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/parenthesis_star_by.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550016" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:03 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="13753451" author="efan" created="Thu, 29 Aug 2013 09:22:45 +0000"  >&lt;p&gt;I found that the result of &quot;DISTRIBUTE BY&quot; is not certain?&lt;br/&gt;
It cause the failure of unit test.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12547150" name="HIVE-1367.1.patch.txt" size="55426" author="zhenxiao" created="Sun, 30 Sep 2012 05:23:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 May 2010 07:30:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aejb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1368] Hive JDBC Integration with SQuirrel SQL Client support Enhanced</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1368</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive JDBC Integration with SQuirrel SQL Client support Enhanced:-&lt;/p&gt;

&lt;p&gt;Hive JDBC Client enhanced to browse hive default schema tables through Squirrel SQL Client.&lt;br/&gt;
This enhancement help to browse the hive table&apos;s structure i.e. table&apos;s column and their data type in the Squirrel SQL client interface and SQL query can be also performed on the tables through Squirrel SQL client.&lt;br/&gt;
To enable this following Hive JDBC Java files are modified and added:-&lt;br/&gt;
1.	Methods of org.apache.hadoop.hive.jdbc.HiveDatabaseMetaData.java are updated.&lt;br/&gt;
2.	Hive org.apache.hadoop.hive.jdbc.ResultSet.java updated and extended (org.apache.hadoop.hive.jdbc.ExtendedHiveResultSet.java) to support additional JDBC metadata &lt;br/&gt;
3.	Methods of org.apache.hadoop.hive.jdbc. HiveResultSetMetaData are updated.&lt;br/&gt;
4.	Methods of  org.apache.hadoop.hive.jdbc. HiveConnection are updated.&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu8.04, jdk-6,hive-0.5.0, hadoop-0.20.1 &lt;/p&gt;</environment>
        <key id="12465366">HIVE-1368</key>
            <summary>Hive JDBC Integration with SQuirrel SQL Client support Enhanced</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="suniluiit">Sunil Kumar</assignee>
                                    <reporter username="suniluiit">Sunil Kumar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 May 2010 11:18:20 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:41 +0000</updated>
                            <resolved>Wed, 9 Jun 2010 00:09:44 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12871097" author="suniluiit" created="Tue, 25 May 2010 11:21:03 +0000"  >&lt;p&gt;Examination and Screen shots of SQuirrel SQL Client After this change&lt;/p&gt;</comment>
                            <comment id="12871099" author="suniluiit" created="Tue, 25 May 2010 11:22:05 +0000"  >&lt;p&gt;Hive JDBC Integration with SQuirrel SQL Client support Enhanced&lt;/p&gt;</comment>
                            <comment id="12871100" author="suniluiit" created="Tue, 25 May 2010 11:22:58 +0000"  >&lt;p&gt;Hive JDBC Integration with SQuirrel SQL Client support Enhanced&lt;/p&gt;</comment>
                            <comment id="12871313" author="jvs" created="Tue, 25 May 2010 19:32:28 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12872959" author="suniluiit" created="Fri, 28 May 2010 13:05:23 +0000"  >&lt;p&gt;Seem like this work is already completed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt;. However this patch is for release version 0.5.0. and we are already using it. Please suggest whether this jira is still needed.&lt;/p&gt;</comment>
                            <comment id="12872964" author="athusoo" created="Fri, 28 May 2010 13:17:43 +0000"  >&lt;p&gt;Sunil, I have added you as a contributor so you can assign JIRAs to yourself.&lt;/p&gt;</comment>
                            <comment id="12872965" author="athusoo" created="Fri, 28 May 2010 13:19:08 +0000"  >&lt;p&gt;In my opinion best would be to load this patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt; and name it for 0.5.0 in case others want to use it for 0.5.0 and mark this JIRA as a duplicate of that one.&lt;/p&gt;</comment>
                            <comment id="12872974" author="suniluiit" created="Fri, 28 May 2010 13:37:14 +0000"  >&lt;p&gt;Please use this patch(&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1368&quot; title=&quot;Hive JDBC Integration with SQuirrel SQL Client support Enhanced&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1368&quot;&gt;&lt;del&gt;HIVE-1368&lt;/del&gt;&lt;/a&gt;.patch) this created from Hive _Trunk 0.5.0&lt;/p&gt;</comment>
                            <comment id="12872987" author="suniluiit" created="Fri, 28 May 2010 13:53:34 +0000"  >&lt;p&gt;Already covered in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; title=&quot;Missing some Jdbc functionality like getTables getColumns and HiveResultSet.get* methods based on column name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1126&quot;&gt;&lt;del&gt;HIVE-1126&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="12876893" author="namit" created="Wed, 9 Jun 2010 00:09:44 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1126&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1126&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12455156">HIVE-1126</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12455156">HIVE-1126</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12445778" name="HIVE-1368.patch" size="78178" author="suniluiit" created="Fri, 28 May 2010 13:37:14 +0000"/>
                            <attachment id="12445443" name="Hive JDBC Integration with SQuirrel SQL Client support Enhanced.doc" size="84480" author="suniluiit" created="Tue, 25 May 2010 11:21:03 +0000"/>
                            <attachment id="12445444" name="SQLClient_support.patch" size="77765" author="suniluiit" created="Tue, 25 May 2010 11:22:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 May 2010 19:32:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0les7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123045</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Hive JDBC Integration with SQuirrel SQL Client support Enhanced</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-1369] LazySimpleSerDe should be able to read classes that support some form of toString()</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1369</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently LazySimpleSerDe is able to deserialize only BytesWritable or Text objects.  It should be pretty easy to extend the class to read any object that implements toString() method.&lt;/p&gt;

&lt;p&gt;Ideas or concerns?&lt;/p&gt;

&lt;p&gt;Alex K&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465403">HIVE-1369</key>
            <summary>LazySimpleSerDe should be able to read classes that support some form of toString()</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="alexvk">Alex Kozlov</assignee>
                                    <reporter username="alexvk">Alex Kozlov</reporter>
                        <labels>
                            <label>SerDe</label>
                    </labels>
                <created>Tue, 25 May 2010 19:27:23 +0000</created>
                <updated>Mon, 14 Feb 2011 21:02:08 +0000</updated>
                                            <version>0.5.0</version>
                                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="12872997" author="athusoo" created="Fri, 28 May 2010 14:22:40 +0000"  >&lt;p&gt;I I do not see any drawbacks here. I think another requirement from this was that the serialization be such that it is order preserving whereever there is a notion of order, as this serde could also be used to serialize between map/reduce boundaries. So if the implementation takes care of that and does not introduce oerhead I think this would be good.&lt;/p&gt;

&lt;p&gt;Others, what do you think about this?&lt;/p&gt;

&lt;p&gt;Ashish&lt;/p&gt;</comment>
                            <comment id="12875504" author="alexvk" created="Fri, 4 Jun 2010 06:27:07 +0000"  >&lt;p&gt;A patch that allows to deserialize an arbitrary object implementing toString(byte[] separators) method.&lt;/p&gt;</comment>
                            <comment id="12875909" author="appodictic" created="Sat, 5 Jun 2010 14:58:04 +0000"  >&lt;p&gt;This seems interesting. In some cases toString() output can change between java versions for some objects. Do we need to compensate for that.&lt;/p&gt;</comment>
                            <comment id="12876509" author="alexvk" created="Tue, 8 Jun 2010 01:14:42 +0000"  >&lt;p&gt;Here is a more complete description how to use the new functionality.&lt;/p&gt;

&lt;p&gt;Let&apos;s say you have a Writable object in a Sequence file.  Let&apos;s say it is an implementation of Session class which contains an array of events and each Event object associated with type, timestamp, and a Map&amp;lt;String,String&amp;gt;.&lt;/p&gt;

&lt;p&gt;You can define the following table in Hive:&lt;/p&gt;

&lt;p&gt;CREATE EXTERNAL TABLE session (&lt;br/&gt;
  uid STRING,&lt;br/&gt;
  events ARRAY &amp;lt; STRUCT &amp;lt; type : INT, ts : BIGINT, map : MAP &amp;lt; STRING, STRING &amp;gt; &amp;gt; &amp;gt;&lt;br/&gt;
)&lt;br/&gt;
 ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.LazySimpleSerDe&apos;&lt;br/&gt;
 STORED AS SEQUENCEFILE&lt;br/&gt;
LOCATION &apos;location_of_your_sequence_file_with_your_writable_as_value&apos;&lt;br/&gt;
;&lt;/p&gt;

&lt;p&gt;Instead of implementing a fully functional SerDe for this class (even though it&apos;s probably a good exercise in the long run), with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1369&quot; title=&quot;LazySimpleSerDe should be able to read classes that support some form of toString()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1369&quot;&gt;HIVE-1369&lt;/a&gt; one can just write toString(byte[]) method for the above Writable:&lt;/p&gt;

&lt;p&gt;public String toString(byte[] sep) {&lt;br/&gt;
  StringBuffer sb = new StringBuffer();&lt;br/&gt;
  sb.append(getUId());&lt;br/&gt;
  sb.append((char)sep&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
  boolean firstEvent = true;&lt;br/&gt;
  for (Event event : getEvents()) {&lt;br/&gt;
    if (firstEvent) &lt;/p&gt;
{
      firstEvent = false;
    }
&lt;p&gt; else &lt;/p&gt;
{
      sb.append((char)sep[1]);
    }
&lt;p&gt;    sb.append(getType());&lt;br/&gt;
    sb.append((char) sep&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;);&lt;br/&gt;
    sb.append(getTimestamp());&lt;br/&gt;
    sb.append((char) sep&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;);&lt;br/&gt;
    Map&amp;lt;String,String&amp;gt; map = event.getMap();&lt;br/&gt;
    boolean firstKey = true;&lt;br/&gt;
    if (map != null &amp;amp;&amp;amp; !map.isEmpty()) {&lt;br/&gt;
       for(Key k : map.getKeys()) {&lt;br/&gt;
         if (firstKey) &lt;/p&gt;
{
            firstKey = false;
         }
&lt;p&gt; else &lt;/p&gt;
{
            sb.append((char) sep[3]);
         }
&lt;p&gt;         sb.append(key);&lt;br/&gt;
         sb.append((char) sep&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;);&lt;br/&gt;
         sb.append(map.get(key));&lt;br/&gt;
      }&lt;br/&gt;
    } else &lt;/p&gt;
{
      sb.append(&quot;\\N&quot;);
    }
&lt;p&gt;  }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;This will obviously be less efficient than implementing a full SerDe, but much more flexible and faster.&lt;/p&gt;

&lt;p&gt;The default Java implementation is toString() with no parameters, so there is no conflict here.  I was thinking about adding some other parameters like null string or escape char, but decided to keep it simple.  There is an option to use JSON serialization as well (probably slower).&lt;/p&gt;

&lt;p&gt;Alex K&lt;/p&gt;</comment>
                            <comment id="12879972" author="cwsteinbach" created="Thu, 17 Jun 2010 22:18:14 +0000"  >&lt;p&gt;Looks like the original patch was generated with &quot;git diff&quot; without the --no-prefix switch. This causes patch to barf. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1369&quot; title=&quot;LazySimpleSerDe should be able to read classes that support some form of toString()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1369&quot;&gt;HIVE-1369&lt;/a&gt;.svn.patch is an updated copy that applies cleanly with patch.&lt;/p&gt;</comment>
                            <comment id="12879978" author="hbasereviewboard" created="Thu, 17 Jun 2010 22:25:24 +0000"  >&lt;p&gt;Message from: &quot;Carl Steinbach&quot; &amp;lt;carl@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/202/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/202/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review for &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12447394/HIVE-1369.svn.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12447394/HIVE-1369.svn.patch&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1369&quot; title=&quot;LazySimpleSerDe should be able to read classes that support some form of toString()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1369&quot;&gt;HIVE-1369&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-1369&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-1369&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazySimpleSerDe.java 211c733 &lt;br/&gt;
  serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 6db9bc8 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/202/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/202/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;

</comment>
                            <comment id="12902585" author="namit" created="Wed, 25 Aug 2010 19:09:43 +0000"  >&lt;p&gt;@Carl, can you regenerate the patch ?&lt;/p&gt;</comment>
                            <comment id="12902589" author="cwsteinbach" created="Wed, 25 Aug 2010 19:16:39 +0000"  >&lt;p&gt;@Namit: Will do.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446328" name="HIVE-1369.patch" size="9868" author="alexvk" created="Fri, 4 Jun 2010 06:27:06 +0000"/>
                            <attachment id="12447394" name="HIVE-1369.svn.patch" size="9849" author="cwsteinbach" created="Thu, 17 Jun 2010 22:18:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 May 2010 14:22:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ouv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48626</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
