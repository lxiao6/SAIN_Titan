<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:14:01 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-8-5+AND+created+%3C%3D+2009-8-12+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="25" total="25"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-723] output columns should be redundant if an insert immediately follows</title>
                <link>https://issues.apache.org/jira/browse/HIVE-723</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the reducer transformation function is inserting into a hive table immediately, hive should be automatically able to infer the number of columns instead of asking the user to do so.&lt;br/&gt;
It becomes a problem if the source table schema is changing - the query needs to be unnecessarily modified&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432231">HIVE-723</key>
            <summary>output columns should be redundant if an insert immediately follows</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 01:29:59 +0000</created>
                <updated>Thu, 6 Aug 2009 06:34:54 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12739915" author="zshao" created="Thu, 6 Aug 2009 06:34:53 +0000"  >&lt;p&gt;A second thought on this: If this feature is in, and the source table schema is changing, then we might have inserted wrong data into the table.&lt;br/&gt;
If the source table schema changed, then most probably users will need to modify the transform script any way, so it seems to me the overhead of modifying the query is not that big.&lt;/p&gt;

&lt;p&gt;Also it might be a bit hard to do because we still require &quot;AS columns&quot; if it&apos;s an &quot;INSERT OVERWRITE DIRECTORY&quot;, so we need to treat these differently.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Aug 2009 06:34:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-724] Hive Server needs a getHiveSchema() thrift function</title>
                <link>https://issues.apache.org/jira/browse/HIVE-724</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, the Hive Server only has a getSchema() thrift function that will return a schema with fields listed as thrift DDL types. We should also have another function, getHiveSchema() (or some other function name), that will instead return a schema with fields listed as native Hive types. This will make the returned type names consistent with the  HiveMetaStoreUtils get_fields() thrift function.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432235">HIVE-724</key>
            <summary>Hive Server needs a getHiveSchema() thrift function</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehwang">Eric Hwang</assignee>
                                    <reporter username="ehwang">Eric Hwang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 02:03:19 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:27 +0000</updated>
                            <resolved>Wed, 5 Aug 2009 07:16:49 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12739335" author="ehwang" created="Wed, 5 Aug 2009 04:52:46 +0000"  >&lt;p&gt;This patch changes the current Hive Server&apos;s getSchema() method into getThriftSchema(), and implements a new getSchema() that returns fields represented with Hive data types.&lt;/p&gt;

&lt;p&gt;All tests pass. Can someone review this quickly and commit it? It is blocking JIRA-187 Hive ODBC Driver.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Eric&lt;/p&gt;</comment>
                            <comment id="12739337" author="ehwang" created="Wed, 5 Aug 2009 04:53:58 +0000"  >&lt;p&gt;Patch submitted. Can someone review this? Thanks.&lt;/p&gt;</comment>
                            <comment id="12739345" author="rsm" created="Wed, 5 Aug 2009 05:33:29 +0000"  >&lt;p&gt;The patch looks good. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12739357" author="rsm" created="Wed, 5 Aug 2009 07:16:49 +0000"  >&lt;p&gt;Committed. Thanks Eric!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415575" name="HIVE-724.1.patch" size="34859" author="ehwang" created="Wed, 5 Aug 2009 04:52:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Aug 2009 05:33:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73341</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lben:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Change HiveServer.getSchema() to return Hive types rather than Thrift types. Changed existing getSchema() to getThriftSchema()</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Hive Server</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-725] Fix eclipse classpath after HIVE-487 (hadoop 0.20 support) is in</title>
                <link>https://issues.apache.org/jira/browse/HIVE-725</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We are missing one classpath: shims/src/common/java.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432251">HIVE-725</key>
            <summary>Fix eclipse classpath after HIVE-487 (hadoop 0.20 support) is in</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 07:45:49 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:12 +0000</updated>
                            <resolved>Wed, 5 Aug 2009 09:48:19 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12739362" author="zshao" created="Wed, 5 Aug 2009 07:46:22 +0000"  >&lt;p&gt;This patch adds the missed class path.&lt;/p&gt;</comment>
                            <comment id="12739395" author="rsm" created="Wed, 5 Aug 2009 09:44:44 +0000"  >&lt;p&gt;looks good. will commit it.&lt;/p&gt;</comment>
                            <comment id="12739396" author="rsm" created="Wed, 5 Aug 2009 09:48:19 +0000"  >&lt;p&gt;Committed. Thanks Zheng.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415581" name="HIVE-725.1.patch" size="625" author="zshao" created="Wed, 5 Aug 2009 07:46:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Aug 2009 09:44:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73340</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Add missing classpath: shims/src/common/java. Bug appeared after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-487&quot; title=&quot;Hive does not compile with Hadoop 0.20.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-487&quot;&gt;&lt;strike&gt;HIVE-487&lt;/strike&gt;&lt;/a&gt; was committed. (Zheng Shao via rmurthy)&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-726] Make &quot;ant package -Dhadoop.version=0.17.0&quot; work</title>
                <link>https://issues.apache.org/jira/browse/HIVE-726</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-487&quot; title=&quot;Hive does not compile with Hadoop 0.20.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-487&quot;&gt;&lt;del&gt;HIVE-487&lt;/del&gt;&lt;/a&gt;, users will have to specify the versions as in &quot;shims/ivy.xml&quot; to make &quot;ant package -Dhadoop.version=&amp;lt;version&amp;gt;&quot;.work.&lt;br/&gt;
Currently it is only running fine with the following versions (from shims/ivy.xml): 0.17.2.1, 0.18.3, 0.19.0, 0.20.0.&lt;/p&gt;

&lt;p&gt;We used to do &quot;ant package -Dhadoop.version=0.17.0&quot; but it&apos;s not working any more, although we can specify &quot;ant package -Dhadoop.version=0.17.2.1&quot; and the package will probably still work with 0.17.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432308">HIVE-726</key>
            <summary>Make &quot;ant package -Dhadoop.version=0.17.0&quot; work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 18:23:08 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:15 +0000</updated>
                            <resolved>Tue, 8 Sep 2009 18:24:23 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                    <fixVersion>0.5.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12739662" author="zshao" created="Wed, 5 Aug 2009 18:30:51 +0000"  >&lt;p&gt;Talked with Ashish offline on this. Assuming that API does not change within major versions, we can always download major-version.0 no matter which hadoop minor version the user specified.&lt;br/&gt;
The compiled hive package should still work with any hadoop minor versions within the same major version. This should be better for our users because users can still specify any hadoop versions on the command line - we just strip it off to get the major version and append &quot;.0&quot;.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12739730" author="zshao" created="Wed, 5 Aug 2009 20:34:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-726&quot; title=&quot;Make &amp;quot;ant package -Dhadoop.version=0.17.0&amp;quot; work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-726&quot;&gt;&lt;del&gt;HIVE-726&lt;/del&gt;&lt;/a&gt;.1.patch: This patch allows us to build 0.17.0, 0.18.0, 0.19.0, 0.20.0.&lt;/p&gt;

&lt;p&gt;However it does not work for other versions because I could not find a way to compute hadoop.version.0 beforehand, and then use it for expansion in build.properties.&lt;br/&gt;
The &quot;getversionpref&quot; is only available after &quot;deploy-ant-tasks&quot; in build-common.xml is done.&lt;/p&gt;

&lt;p&gt;If anybody is interested in going this route, feel free to take &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-726&quot; title=&quot;Make &amp;quot;ant package -Dhadoop.version=0.17.0&amp;quot; work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-726&quot;&gt;&lt;del&gt;HIVE-726&lt;/del&gt;&lt;/a&gt;.1.patch and continue in this direction.&lt;/p&gt;

&lt;p&gt;I will try a different approach by enforcing our users to use only major versions, and we already blindly append &quot;.0&quot; to it.&lt;/p&gt;</comment>
                            <comment id="12739746" author="zshao" created="Wed, 5 Aug 2009 20:58:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-726&quot; title=&quot;Make &amp;quot;ant package -Dhadoop.version=0.17.0&amp;quot; work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-726&quot;&gt;&lt;del&gt;HIVE-726&lt;/del&gt;&lt;/a&gt;.2.patch:&lt;/p&gt;

&lt;p&gt;Please ignore all comments above. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-726&quot; title=&quot;Make &amp;quot;ant package -Dhadoop.version=0.17.0&amp;quot; work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-726&quot;&gt;&lt;del&gt;HIVE-726&lt;/del&gt;&lt;/a&gt;.2.patch simply replaced the hadoop version with that specified by the user in shims/build.xml and shims/ivy.xml.&lt;/p&gt;

&lt;p&gt;All these commands are successful now:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; -Dhadoop.version=0.17.0
ant &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; -Dhadoop.version=0.17.2.1
ant &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; -Dhadoop.version=0.20.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12739765" author="tlipcon" created="Wed, 5 Aug 2009 21:27:39 +0000"  >&lt;p&gt;I think there is some confusion about how the shims work.&lt;/p&gt;

&lt;p&gt;The point of the new shims package as done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-487&quot; title=&quot;Hive does not compile with Hadoop 0.20.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-487&quot;&gt;&lt;del&gt;HIVE-487&lt;/del&gt;&lt;/a&gt; is that, on every build, the shims are build for all major versions of Hadoop. The versions in the ivy.xml there were picked as the most recent versions, but as Ashish said, we could use the .0 releases instead - it&apos;s somewhat arbitrary. After the shims have been built with each of the hadoop versions, it makes a hive_shims.jar which includes &lt;b&gt;all&lt;/b&gt; of the implementations.&lt;/p&gt;

&lt;p&gt;At this point, when Hadoop is built, it can be built against any version of Hadoop using the -Dhadoop.version flag. In actuality this should not matter - it may be that there is still some work yet to be done, but in my testing I build with the default hadoop.version (0.19.0) and then ran the build products against 18 and 20 with no recompile. The ShimLoader class determines the current hadoop version at runtime and loads the correct implementation class out of hive_shims.jar.&lt;/p&gt;

&lt;p&gt;So, -1 on the patch, since it would result in a hive_shims.jar that only includes one version of the shims, and thus the build product would only work on that version of Hadoop.&lt;/p&gt;</comment>
                            <comment id="12739825" author="zshao" created="Wed, 5 Aug 2009 23:37:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-726&quot; title=&quot;Make &amp;quot;ant package -Dhadoop.version=0.17.0&amp;quot; work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-726&quot;&gt;&lt;del&gt;HIVE-726&lt;/del&gt;&lt;/a&gt;.3.patch: This patch is even simpler. just add the hadoop.version that user specified for ivy to download.&lt;br/&gt;
shims will be compiled as it was, but other parts of hive will be compiled against the version that the user specifies.&lt;br/&gt;
I&apos;ve verified all the following command runs fine:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant -Dhadoop.version=0.17.0 clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
ant -Dhadoop.version=0.17.2.1 clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
ant -Dhadoop.version=0.19.0 clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
ant -Dhadoop.version=0.20.0 clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12739850" author="tlipcon" created="Thu, 6 Aug 2009 00:57:34 +0000"  >&lt;p&gt;I think there was still an issue which you&apos;ve uncovered. ant&apos;s semantics for the &amp;lt;param&amp;gt; element inside &amp;lt;antcall&amp;gt; are somewhat screwy - you can&apos;t override something that has been passed on the command line. Since you guys were passing hadoop.version on the command line, it was actually compiling the shims for 17 four times rather than compiling each version, as best I can tell.&lt;/p&gt;

&lt;p&gt;Attaching a patch which gets around this by introducing a new ant property called &quot;hadoop.version.ant-internal&quot;. This property is set in build.properties to default to hadoop.version, and hadoop.version is left as is. Everywhere in the build files that used to reference hadoop.version now references hadoop.version.ant-internal. Since we&apos;re not specifying this on the command line, the &amp;lt;antcall&amp;gt;s inside shims/build.xml can properly override it.&lt;/p&gt;

&lt;p&gt;One question: I think the condition in build.xml&apos;s eclipsefiles targets that defaults to 0.19 is now dead code, since the property itself is defaulted to 0.19.0.&lt;/p&gt;

&lt;p&gt;Also, can we change ${final.name} to simply ${name}-${version} since one build can work with any hadoop?&lt;/p&gt;</comment>
                            <comment id="12750110" author="namit" created="Tue, 1 Sep 2009 21:30:01 +0000"  >&lt;p&gt;I think we need this for 0.4 release&lt;/p&gt;</comment>
                            <comment id="12750830" author="zshao" created="Thu, 3 Sep 2009 05:49:02 +0000"  >&lt;p&gt;Todd, when I opened this issue I didn&apos;t know the way shims work (as you commented above).&lt;/p&gt;

&lt;p&gt;When I first saw that, it didn&apos;t work for me - see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-812&quot; title=&quot;Hive compiled with &amp;quot;ant package&amp;quot; should work with hadoop 0.17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-812&quot;&gt;&lt;del&gt;HIVE-812&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
But with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-812&quot; title=&quot;Hive compiled with &amp;quot;ant package&amp;quot; should work with hadoop 0.17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-812&quot;&gt;&lt;del&gt;HIVE-812&lt;/del&gt;&lt;/a&gt; I think it should work as you planned.&lt;/p&gt;

&lt;p&gt;I think this JIRA still has value in that it allows user to choose which hadoop version to compile against - however, if shims work as expected, the value of doing this would be minimal.&lt;/p&gt;

&lt;p&gt;I would treat this as a nice-to-have (non-blocker) for branch-0.4, as long as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-812&quot; title=&quot;Hive compiled with &amp;quot;ant package&amp;quot; should work with hadoop 0.17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-812&quot;&gt;&lt;del&gt;HIVE-812&lt;/del&gt;&lt;/a&gt; is in, and we inform users to remove the &quot;-Dhadoop.version=xxx&quot; from all commands lines and wikis.&lt;br/&gt;
This is a good simplification for our users I think.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12751170" author="tlipcon" created="Thu, 3 Sep 2009 21:21:23 +0000"  >&lt;p&gt;Yea, I think this is a nice-to-have but not complete blocker. Its value is that you can ensure that you are still compatible with future releases. Since we didn&apos;t shim the entirety of Hadoop, it&apos;s possible to compile against the default fine, but still break at runtime if you&apos;re relying on an API that doesn&apos;t exist in other versions. Occasionally compiling against all of the &quot;supported&quot; versions is a good sanity check - if possible we should probably set up Hudson tests that check against all of the supported Hadoop versions on a nightly basis.&lt;/p&gt;</comment>
                            <comment id="12751555" author="zshao" created="Fri, 4 Sep 2009 18:17:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also, can we change ${final.name} to simply ${name}-${version} since one build can work with any hadoop?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agree.&lt;/p&gt;

&lt;p&gt;Todd, can you make that change? Otherwise I think it&apos;s good to commit.&lt;/p&gt;</comment>
                            <comment id="12751557" author="tlipcon" created="Fri, 4 Sep 2009 18:21:15 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-799&quot; title=&quot;final.name should not include hadoop version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-799&quot;&gt;&lt;del&gt;HIVE-799&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12752661" author="zshao" created="Tue, 8 Sep 2009 18:24:23 +0000"  >&lt;p&gt;Committed. Thanks Todd!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12425378">HIVE-487</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12434699">HIVE-812</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415655" name="HIVE-726.1.patch" size="4474" author="zshao" created="Wed, 5 Aug 2009 20:34:39 +0000"/>
                            <attachment id="12415662" name="HIVE-726.2.patch" size="1967" author="zshao" created="Wed, 5 Aug 2009 20:58:05 +0000"/>
                            <attachment id="12415680" name="HIVE-726.3.patch" size="555" author="zshao" created="Wed, 5 Aug 2009 23:37:45 +0000"/>
                            <attachment id="12415683" name="hive-726.txt" size="9536" author="tlipcon" created="Thu, 6 Aug 2009 00:57:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Aug 2009 21:27:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73339</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-726&quot; title=&quot;Make &amp;quot;ant package -Dhadoop.version=0.17.0&amp;quot; work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-726&quot;&gt;&lt;strike&gt;HIVE-726&lt;/strike&gt;&lt;/a&gt;. Make &amp;quot;ant package -Dhadoop.version=0.17.0&amp;quot; work. (Todd Lipcon via zshao)&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-727] Hive Server getSchema() returns wrong schema for &quot;Explain&quot; queries</title>
                <link>https://issues.apache.org/jira/browse/HIVE-727</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The Hive Server&apos;s getSchema() function will return a schema with zero fields when executing an &quot;Explain...&quot; query. A quick fix might be to set the default schema to be exactly one column of type string.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432339">HIVE-727</key>
            <summary>Hive Server getSchema() returns wrong schema for &quot;Explain&quot; queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadm">Prasad Mujumdar</assignee>
                                    <reporter username="ehwang">Eric Hwang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 00:43:34 +0000</created>
                <updated>Mon, 30 Apr 2012 21:11:12 +0000</updated>
                            <resolved>Thu, 15 Dec 2011 07:03:23 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13132165" author="prasadm" created="Thu, 20 Oct 2011 22:58:21 +0000"  >&lt;p&gt;Added a method to get result schema from a Task. The ExplainSemanticAnalyzer invokes this to get the schema for explain statement which is a single string column. &lt;/p&gt;</comment>
                            <comment id="13132172" author="jiraposter@reviews.apache.org" created="Thu, 20 Oct 2011 23:04:10 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2517/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2517/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added a method to get result schema from a Task. The ExplainSemanticAnalyzer invokes this to get the schema for explain statement which is a single string column.&lt;/p&gt;


&lt;p&gt;This addresses bug Hive-727.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/Hive-727&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/Hive-727&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java 4972754 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExplainTask.java fe95cb1 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java 41d2a81 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ExplainSemanticAnalyzer.java fc22535 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2517/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2517/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added  a new test case in TestJdbcDriver to run  explain statement and verify resultset metadata &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Prasad&lt;/p&gt;
</comment>
                            <comment id="13150840" author="cwsteinbach" created="Tue, 15 Nov 2011 22:23:24 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13152628" author="cwsteinbach" created="Fri, 18 Nov 2011 04:01:53 +0000"  >&lt;p&gt;@Prasad: TestJdbcDriver.testExplainStmt fails for me. It&apos;s possible that the patch just needs to be refreshed. Please take a look. Thanks!&lt;/p&gt;</comment>
                            <comment id="13169796" author="jiraposter@reviews.apache.org" created="Wed, 14 Dec 2011 23:23:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2517/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2517/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-14 23:21:30.477384)&lt;/p&gt;


&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Rebased the patch and reran the TestJdbcDriver test.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added a method to get result schema from a Task. The ExplainSemanticAnalyzer invokes this to get the schema for explain statement which is a single string column.&lt;/p&gt;


&lt;p&gt;This addresses bug Hive-727.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/Hive-727&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/Hive-727&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java 4972754 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExplainTask.java 7e5f645 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java a4e59ca &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ExplainSemanticAnalyzer.java 9dc6f87 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2517/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2517/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added  a new test case in TestJdbcDriver to run  explain statement and verify resultset metadata &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Prasad&lt;/p&gt;
</comment>
                            <comment id="13169903" author="prasadm" created="Thu, 15 Dec 2011 01:18:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-727&quot; title=&quot;Hive Server getSchema() returns wrong schema for &amp;quot;Explain&amp;quot; queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-727&quot;&gt;&lt;del&gt;HIVE-727&lt;/del&gt;&lt;/a&gt;.patch attached&lt;/p&gt;</comment>
                            <comment id="13169914" author="cwsteinbach" created="Thu, 15 Dec 2011 01:50:06 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13169996" author="cwsteinbach" created="Thu, 15 Dec 2011 07:03:23 +0000"  >&lt;p&gt;Committed to trunk. Thanks Prasad!&lt;/p&gt;</comment>
                            <comment id="13170036" author="hudson" created="Thu, 15 Dec 2011 08:44:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.23.0 #26 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.23.0/26/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.23.0/26/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-727&quot; title=&quot;Hive Server getSchema() returns wrong schema for &amp;quot;Explain&amp;quot; queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-727&quot;&gt;&lt;del&gt;HIVE-727&lt;/del&gt;&lt;/a&gt;. Hive Server getSchema() returns wrong schema for &apos;Explain&apos; queries (Prasad Mujumdar via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214636&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214636&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExplainTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ExplainSemanticAnalyzer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13170228" author="hudson" created="Thu, 15 Dec 2011 14:11:34 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1148 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1148/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1148/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-727&quot; title=&quot;Hive Server getSchema() returns wrong schema for &amp;quot;Explain&amp;quot; queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-727&quot;&gt;&lt;del&gt;HIVE-727&lt;/del&gt;&lt;/a&gt;. Hive Server getSchema() returns wrong schema for &apos;Explain&apos; queries (Prasad Mujumdar via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214636&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1214636&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExplainTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ExplainSemanticAnalyzer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265223" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:12 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12410953">HIVE-187</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12507464" name="HIVE-727.patch" size="7427" author="prasadm" created="Thu, 15 Dec 2011 01:17:25 +0000"/>
                            <attachment id="12507465" name="HIVE-727.patch.1" size="7395" author="prasadm" created="Thu, 15 Dec 2011 01:24:30 +0000"/>
                            <attachment id="12499972" name="Hive-727.patch" size="7004" author="prasadm" created="Thu, 20 Oct 2011 22:55:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Oct 2011 22:58:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42746</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122501</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Hive Server, schema, explain</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-728] Hive Server Exception Messages</title>
                <link>https://issues.apache.org/jira/browse/HIVE-728</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive Server should extract error messages from caught exceptions and repackage them into HiveServerExceptions, rather than just throwing a HiveServerException with a generic error message. This will allow Hive Clients to display more informative error messages when dealing with the server.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432346">HIVE-728</key>
            <summary>Hive Server Exception Messages</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="ehwang">Eric Hwang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 03:23:59 +0000</created>
                <updated>Mon, 10 Aug 2009 08:37:23 +0000</updated>
                            <resolved>Mon, 10 Aug 2009 08:37:23 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12740780" author="rsm" created="Fri, 7 Aug 2009 23:15:38 +0000"  >&lt;p&gt;Can you provide examples of generic error messages? We catch any exceptions thrown and provide the message provided by those exceptions in the HiveServerException.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HiveServerException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to get cluster status: &quot;&lt;/span&gt; + e.toString());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Isnt that enough?&lt;/p&gt;</comment>
                            <comment id="12740788" author="ehwang" created="Fri, 7 Aug 2009 23:37:16 +0000"  >&lt;p&gt;Yes, you&apos;re right. I assumed they were generic error messages, but I guess I filed the JIRA a little too quickly. I was mostly referring to the error codes returned by the execute command which are not very informative to an end user. Is there some kind of table where these error codes may be converted to their real meanings?&lt;/p&gt;
</comment>
                            <comment id="12741231" author="rsm" created="Mon, 10 Aug 2009 08:37:23 +0000"  >&lt;p&gt;Well, that is a bigger problem of error propagation and reporting in hive and there are already several jiras open about that. Also, there is no table of error codes either since we dont have consistent error reporting.&lt;/p&gt;

&lt;p&gt;I am not sure if we need to make any changes to HiveServer itself though. So, I am going to mark this Jira as wont fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12410953">HIVE-187</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Aug 2009 23:15:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73338</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122502</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Hive Server, exceptions</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-729] select expression with optional &quot;as&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-729</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&quot;as&quot; should be optional in select expression. Query like the following should work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT a, b FROM (
  SELECT key a, value b
  FROM src
) src1
ORDER BY a LIMIT 1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12432349">HIVE-729</key>
            <summary>select expression with optional &quot;as&quot;</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 04:20:38 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:41 +0000</updated>
                            <resolved>Thu, 6 Aug 2009 22:58:07 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12740212" author="rsm" created="Thu, 6 Aug 2009 19:24:55 +0000"  >&lt;p&gt;looks good. will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12740235" author="rsm" created="Thu, 6 Aug 2009 20:19:31 +0000"  >&lt;p&gt;there was one test failure:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff /mnt/vol/devrs005.snc1/rmurthy/hive-committer/build/ql/test/logs/negative/invalid_select.q.out /mnt/vol/devrs005.snc1/rmurthy/hive-committer/ql/src/test/results/compiler/errors/i&lt;br/&gt;
nvalid_select.q.out&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 1c1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; Parse Error: line 3:6 mismatched input &apos;(&apos; expecting FROM in from clause&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; Parse Error: line 3:2 mismatched input &apos;trim&apos; expecting FROM in from clause&lt;/p&gt;</comment>
                            <comment id="12740242" author="athusoo" created="Thu, 6 Aug 2009 20:42:33 +0000"  >&lt;p&gt;I think it is safe to change this test. Since the column alias is optional the statement treats the second expression as a column alias due to the lack of , and since this expression is not an identifier it barfs. What do you think? I can generate a new patch that has Zheng&apos;s fixes and the test output update.&lt;/p&gt;</comment>
                            <comment id="12740267" author="namit" created="Thu, 6 Aug 2009 21:53:38 +0000"  >&lt;p&gt;I agree - the test output can be changed&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="12740268" author="athusoo" created="Thu, 6 Aug 2009 21:55:14 +0000"  >&lt;p&gt;Uploaded patch with the fixed test case.&lt;/p&gt;</comment>
                            <comment id="12740298" author="namit" created="Thu, 6 Aug 2009 22:58:07 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12410953">HIVE-187</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415694" name="HIVE-729.1.patch" size="3608" author="zshao" created="Thu, 6 Aug 2009 04:21:08 +0000"/>
                            <attachment id="12415783" name="HIVE-729.2.patch" size="4058" author="athusoo" created="Thu, 6 Aug 2009 21:55:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Aug 2009 19:24:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122503</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-730] Allow Hive UDF/UDAF to use scala</title>
                <link>https://issues.apache.org/jira/browse/HIVE-730</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Scala is a programing language that is concise and can run on top of jvm. &lt;a href=&quot;http://www.scala-lang.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.scala-lang.org/&lt;/a&gt;&lt;br/&gt;
We should have some examples of Hive UDF/UDAF in Scala, and make it easy for people to write Hive UDF/UDAF in Scala.&lt;/p&gt;

&lt;p&gt;Thanks Venky for information and idea on scala and hive integration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432350">HIVE-730</key>
            <summary>Allow Hive UDF/UDAF to use scala</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 04:50:25 +0000</created>
                <updated>Mon, 12 Sep 2011 22:03:45 +0000</updated>
                                                                                <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13103112" author="jvs" created="Mon, 12 Sep 2011 22:03:45 +0000"  >&lt;p&gt;Apparently we just need to document it better:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hive-user/201109.mbox/%3CCAKi8Xk3XQHJu1y++BM=oOS6M=AStG3mbaojs+9zszuGJJf1o3A@mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/hive-user/201109.mbox/%3CCAKi8Xk3XQHJu1y++BM=oOS6M=AStG3mbaojs+9zszuGJJf1o3A@mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Sep 2011 22:03:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42745</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-731] Hive Server getSchema() returns null schema properties</title>
                <link>https://issues.apache.org/jira/browse/HIVE-731</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The schema objects returned by Hive Server&apos;s getSchema() method currently have the &apos;properties&apos; field always as null. This method should be properly implemented in the Hive Server such that the &apos;properties&apos; field in the returned schema objects should contain a map of key-value pairs describing the a result row&apos;s format. For example, it should at least have a mapping describing the row&apos;s null format, and another describing the field delimiter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432352">HIVE-731</key>
            <summary>Hive Server getSchema() returns null schema properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ehwang">Eric Hwang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 06:08:54 +0000</created>
                <updated>Thu, 6 Aug 2009 06:09:12 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12410953">HIVE-187</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Hive Server, schema, properties</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-732] Store intermediate data in binary using LazyBinarySerDe</title>
                <link>https://issues.apache.org/jira/browse/HIVE-732</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Follow-up on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-640&quot; title=&quot;Add LazyBinarySerDe to Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-640&quot;&gt;&lt;del&gt;HIVE-640&lt;/del&gt;&lt;/a&gt;. We should use LazyBinarySerDe in several places in the code to improve the efficiency: value between map-reduce boundary, temporary tables.&lt;br/&gt;
We should also allow users to create tables stored as binary format.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE xxx (...)
ROW FORMAT BINARY
STORED AS SEQUENCEFILE;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12432357">HIVE-732</key>
            <summary>Store intermediate data in binary using LazyBinarySerDe</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 07:11:59 +0000</created>
                <updated>Thu, 2 May 2013 02:29:21 +0000</updated>
                            <resolved>Thu, 20 Aug 2009 01:44:21 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12739926" author="zshao" created="Thu, 6 Aug 2009 07:13:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-732&quot; title=&quot;Store intermediate data in binary using LazyBinarySerDe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-732&quot;&gt;&lt;del&gt;HIVE-732&lt;/del&gt;&lt;/a&gt;.1.patch does the job. Please note that this for code review purpose - test result changes are not included yet.&lt;/p&gt;</comment>
                            <comment id="12740287" author="namit" created="Thu, 6 Aug 2009 22:33:21 +0000"  >&lt;p&gt;Instead of  supporting:&lt;/p&gt;

&lt;p&gt;CREATE TABLE xxx (...)&lt;br/&gt;
ROW FORMAT BINARY&lt;br/&gt;
STORED AS SEQUENCEFILE;&lt;/p&gt;


&lt;p&gt;shouldn&apos;t we let the user specify the serde &lt;/p&gt;

&lt;p&gt;CREATE TABLE xxx (...)&lt;br/&gt;
ROW FORMAT SERDE &apos;....&apos;;&lt;/p&gt;

&lt;p&gt;I mean the existing syntax.&lt;/p&gt;

&lt;p&gt;If we have more binary representations in future, how will we address that ?&lt;/p&gt;
</comment>
                            <comment id="12740389" author="zshao" created="Fri, 7 Aug 2009 04:01:46 +0000"  >&lt;p&gt;&quot;ROW FORMAT BINARY&quot; is just a shortcut to &quot;ROW FORMAT SERDE ...&quot;.&lt;br/&gt;
This shortcut will help the adoption of this serde for tables created by users, and users will enjoy the performance benefit of this over the default LazySimpleSerDe.&lt;/p&gt;

&lt;p&gt;We can have more binary representations in future, but they will need a different shortcut (if a shortcut is needed).&lt;/p&gt;</comment>
                            <comment id="12740644" author="namit" created="Fri, 7 Aug 2009 17:35:02 +0000"  >&lt;p&gt;Thats fine - You need to create the patch again, there were a lot of conflicts with 691.&lt;/p&gt;
</comment>
                            <comment id="12743506" author="zshao" created="Sat, 15 Aug 2009 00:45:26 +0000"  >&lt;p&gt;This patch is a simple switch to use LazyBinarySerDe to improve the performance.&lt;br/&gt;
We can do &quot;row format binary&quot; later in a separate transaction if needed.&lt;/p&gt;</comment>
                            <comment id="12744270" author="zshao" created="Mon, 17 Aug 2009 23:10:36 +0000"  >&lt;p&gt;Included test changes.&lt;/p&gt;</comment>
                            <comment id="12745273" author="namit" created="Thu, 20 Aug 2009 01:44:21 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12430534">HIVE-640</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12432612">HIVE-743</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415708" name="HIVE-732.1.patch" size="15236" author="zshao" created="Thu, 6 Aug 2009 07:13:45 +0000"/>
                            <attachment id="12416634" name="HIVE-732.3.patch" size="3534" author="zshao" created="Sat, 15 Aug 2009 00:45:26 +0000"/>
                            <attachment id="12416815" name="HIVE-732.4.patch" size="249912" author="zshao" created="Mon, 17 Aug 2009 23:10:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Aug 2009 22:33:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73336</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-733] allow specifying maximum number of serde exceptions to ignore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-733</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Sometimes user data contains some corrupted records. We should ignore the records till we hit some limit set in configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432359">HIVE-733</key>
            <summary>allow specifying maximum number of serde exceptions to ignore</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 07:33:17 +0000</created>
                <updated>Wed, 18 May 2011 21:23:29 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12739929" author="zshao" created="Thu, 6 Aug 2009 07:36:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-733&quot; title=&quot;allow specifying maximum number of serde exceptions to ignore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-733&quot;&gt;HIVE-733&lt;/a&gt;.1.patch: This patch shows the idea. There is no test yet. Please comment.&lt;/p&gt;</comment>
                            <comment id="12739931" author="andraz" created="Thu, 6 Aug 2009 07:50:57 +0000"  >&lt;p&gt;+1 &lt;/p&gt;

&lt;p&gt;this makes sense, I&apos;d set the  default to larger than 0.&lt;/p&gt;</comment>
                            <comment id="12740284" author="namit" created="Thu, 6 Aug 2009 22:25:02 +0000"  >&lt;p&gt;The parameter makes complete sense - in fact, traditional loader and querying tools (sql*loader etc.) support it&lt;br/&gt;
However, the parameter should be system wide and not specific to a mapper - you need to aggregate the counters&lt;br/&gt;
instead of looking at a single mapper.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12431303">HIVE-680</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415712" name="HIVE-733.1.patch" size="3518" author="zshao" created="Thu, 6 Aug 2009 07:36:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Aug 2009 07:50:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42743</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-734] problem in dealing with null</title>
                <link>https://issues.apache.org/jira/browse/HIVE-734</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This command fails with the following error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive/bin/hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT OVERWRITE LOCAL DIRECTORY &lt;span class=&quot;code-quote&quot;&gt;&apos;abc&apos;&lt;/span&gt; select &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; from zshao_tt&quot;&lt;/span&gt;
FAILED: Error in semantic analysis:
java.lang.RuntimeException: Internal error: Cannot find ObjectInspector &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; VOID
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When &apos;null&apos; is replaced by &apos;&apos; it works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432443">HIVE-734</key>
            <summary>problem in dealing with null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2009 21:00:56 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:23 +0000</updated>
                            <resolved>Tue, 11 Aug 2009 23:48:44 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12740257" author="athusoo" created="Thu, 6 Aug 2009 21:36:18 +0000"  >&lt;p&gt;select null from null from zshao_tt ?? or is it select null from zshao_tt.&lt;/p&gt;
</comment>
                            <comment id="12740258" author="zshao" created="Thu, 6 Aug 2009 21:38:34 +0000"  >&lt;p&gt;corrected. it&apos;s &quot;select null from zshao_tt&quot;&lt;/p&gt;</comment>
                            <comment id="12740277" author="nzhang" created="Thu, 6 Aug 2009 22:10:10 +0000"  >&lt;p&gt;Thanks guys! I figured that out too. Debugging now.&lt;/p&gt;</comment>
                            <comment id="12740353" author="nzhang" created="Fri, 7 Aug 2009 01:35:35 +0000"  >&lt;p&gt;The error is threw during semantic analysis where the parser try to instantiate an ObjectInspector for type &quot;void&quot; (corresponding to null). &lt;/p&gt;

&lt;p&gt;The following similar query succeeded:&lt;/p&gt;

&lt;p&gt;select 2 from zshao_tt;&lt;/p&gt;

&lt;p&gt;since the semantic analyzer is able to deduct type (int) from the constant 2. &lt;/p&gt;

&lt;p&gt;Since null can also be treated as a constant, I think we need to write an ObjectInspector for its type (void) too. And the object inspector will always return null for each row. &lt;/p&gt;</comment>
                            <comment id="12740358" author="zshao" created="Fri, 7 Aug 2009 01:41:42 +0000"  >&lt;p&gt;+1 on the idea. We have WritableVoidObjectInspector, JavaVoidObjectInspector etc but none are actually implemented or used.&lt;br/&gt;
Can we use JavaVoidObjectInspector for null constant? We probably need to modify ObjectInspectorConverters to allow conversion from void type to any type as well.&lt;/p&gt;</comment>
                            <comment id="12740388" author="nzhang" created="Fri, 7 Aug 2009 03:54:39 +0000"  >&lt;p&gt;Thanks for the pointer Zheng. We certainly can use JavaVoidObjecInspector for NULL. However it turns out NULL is more complicated than what it sounds like (see &lt;a href=&quot;http://en.wikipedia.org/wiki/Null_(SQL&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Null_(SQL&lt;/a&gt;) ). NULL has to be handled not only in this simple select cause, but also in much more complex cases in the where-clause and joins. Let&apos;s have a talk.&lt;/p&gt;
</comment>
                            <comment id="12740392" author="zshao" created="Fri, 7 Aug 2009 04:11:51 +0000"  >&lt;p&gt;We do handle NULL in the WHERE clause and &quot;AND&quot;, &quot;OR&quot; functions using the 3-value booleans.  I am not sure whether we ignore NULL in join/group-by but that seems easy enough to do.&lt;br/&gt;
Do you have a specific example that the current Hive code breaks?&lt;/p&gt;</comment>
                            <comment id="12740406" author="nzhang" created="Fri, 7 Aug 2009 05:16:55 +0000"  >&lt;p&gt;I wasn&apos;t able to get an example in HIVE. I tried to insert NULL to a table by modifying the test query input4_cb_delim.q (actually by only modifying the input data to be &lt;/p&gt;

&lt;p&gt;&amp;lt;value1&amp;gt;\002\012&lt;br/&gt;
\002&amp;lt;value2&amp;gt;\012&lt;/p&gt;

&lt;p&gt;and run the query&lt;/p&gt;

&lt;p&gt;select * from input4_cb where key is not null;&lt;/p&gt;

&lt;p&gt;and both rows are returned. So either the NULL values are not inserted correctly, or the evaluation is not correct about NULL.&lt;/p&gt;</comment>
                            <comment id="12740446" author="zshao" created="Fri, 7 Aug 2009 08:14:34 +0000"  >&lt;p&gt;With LazySimpleSerDe (the default), we represent NULL by two bytes: &quot;\&quot; and &quot;N&quot;. This is in sync with MySQL export format.&lt;br/&gt;
Can you try again with that?&lt;/p&gt;</comment>
                            <comment id="12740544" author="nzhang" created="Fri, 7 Aug 2009 13:29:40 +0000"  >&lt;p&gt;That&apos;s great! It works (and my test queries on NULL also works too). In this case I guess it is much simpler since what we need here is just the VOID type ObjectInspector. I&apos;ll working on it.&lt;/p&gt;</comment>
                            <comment id="12740650" author="nzhang" created="Fri, 7 Aug 2009 17:46:37 +0000"  >&lt;p&gt;BTW, I tried joins and it doesn&apos;t handle NULL semantics correctly. Here&apos;s the data and results:&lt;/p&gt;

&lt;p&gt;Table:&lt;/p&gt;

&lt;p&gt;Key       Value&lt;br/&gt;
-------     -------&lt;br/&gt;
NULL    325&lt;br/&gt;
18         NULL&lt;/p&gt;

&lt;p&gt;Query:&lt;/p&gt;

&lt;p&gt;select * from input4_cb a join input4_cb b on a.key = b.value;&lt;/p&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;p&gt;NULL  325   18   NULL&lt;/p&gt;

&lt;p&gt;The correct result should be empty set.&lt;/p&gt;

&lt;p&gt;I guess the NULL vs. NULL comparison is incorrectly evaluated. &lt;/p&gt;</comment>
                            <comment id="12740773" author="nzhang" created="Fri, 7 Aug 2009 22:53:20 +0000"  >&lt;p&gt;added the JavaVoidObjectInspector support for LazySimpleSerDe. Will add the same support to other serdes. &lt;/p&gt;</comment>
                            <comment id="12740782" author="zshao" created="Fri, 7 Aug 2009 23:22:24 +0000"  >&lt;p&gt;Good finding! Let&apos;s fix the join bug on a separate JIRA. Can you open a jira on that?&lt;br/&gt;
I am not sure about why we need to add JavaVoidObjectInspector support to LazySimpleSerDe - data from SerDe already have types (from columns).  We only need to handle NULL that user specified in the query. Thoughts?&lt;/p&gt;</comment>
                            <comment id="12740834" author="nzhang" created="Sat, 8 Aug 2009 03:58:08 +0000"  >&lt;p&gt;In the failing query, there is no column corresponding to null (select null from tt), so the semantic analyzer doesn&apos;t know the type of the NULL, therefore it is VOID type. That&apos;s why JavaVoidObjectInspector needs to be created. It is the similar that in (select 2 from tt), An JavaIntegerObjectInspector is needed for the constant 2. &lt;/p&gt;</comment>
                            <comment id="12741582" author="zshao" created="Mon, 10 Aug 2009 21:59:58 +0000"  >&lt;p&gt;Discussed with Ning offline. SemanticAnalyzer.genFileSinkPlan() will be the place for the change - in case the target is a local/remote directory (instead of a table), when we create table column names and types, we should use string type if the input is a void type.  Later in the same function, we are using genConversionSelectOperator() to convert the column types.&lt;/p&gt;

&lt;p&gt;So ODBC/JDBC will see this column as string type. Raghu confirmed that MySQL is creating a table with a column typed &quot;BINARY(0)&quot; when running &quot;CREATE TABLE AS SELECT NULL, ...&quot; &lt;/p&gt;</comment>
                            <comment id="12741667" author="namit" created="Tue, 11 Aug 2009 02:16:40 +0000"  >&lt;p&gt;hive&amp;gt; select * from (select NULL from zshao_tt union all select 1 from zshao_tt)x;&lt;br/&gt;
select * from (select NULL from zshao_tt union all select 1 from zshao_tt)x;&lt;br/&gt;
FAILED: Error in semantic analysis: Schema of both sides of union should match: Column _c0 is of type void on first table and type int on second table&lt;/p&gt;



&lt;p&gt;Do you want to handle this also in this patch, or file a new jira for above ?&lt;/p&gt;</comment>
                            <comment id="12741956" author="nzhang" created="Tue, 11 Aug 2009 16:49:42 +0000"  >&lt;p&gt;Namit, thanks for the comments! I have started a new JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-747&quot; title=&quot;void type (null column) cannot be UNIONed with other type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-747&quot;&gt;HIVE-747&lt;/a&gt; for that. I&apos;ll look at this one soon. &lt;/p&gt;</comment>
                            <comment id="12742114" author="nzhang" created="Tue, 11 Aug 2009 22:59:23 +0000"  >&lt;p&gt;fix attached.&lt;/p&gt;</comment>
                            <comment id="12742115" author="namit" created="Tue, 11 Aug 2009 23:11:07 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12742122" author="namit" created="Tue, 11 Aug 2009 23:48:44 +0000"  >&lt;p&gt;Committed. Thanks Ning&lt;/p&gt;</comment>
                            <comment id="12742129" author="nzhang" created="Wed, 12 Aug 2009 00:09:17 +0000"  >&lt;p&gt;Cool!&lt;/p&gt;

&lt;p&gt;Thank you very much!&lt;/p&gt;

&lt;p&gt;Ning&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12432589">HIVE-741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12416262" name="734.patch" size="4382" author="nzhang" created="Tue, 11 Aug 2009 22:59:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Aug 2009 21:36:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-735] Queries should be optimized with pre-ordered column</title>
                <link>https://issues.apache.org/jira/browse/HIVE-735</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If a table has one or some pre-ordered columns and a query has filters(range/point) on these columns. Hive should take advantage of the order information, and only read the needed blocks instead of touching the whole file.  And this will also be useful for sorted summary table index.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432491">HIVE-735</key>
            <summary>Queries should be optimized with pre-ordered column</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2009 04:02:46 +0000</created>
                <updated>Fri, 7 Aug 2009 14:38:01 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12740572" author="namit" created="Fri, 7 Aug 2009 14:38:01 +0000"  >&lt;p&gt;+1 on this idea - this should bring down the scan volume substantially&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Aug 2009 14:38:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42742</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ok7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48578</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-736] MetaStoreUtils get_fields() does not return partition column</title>
                <link>https://issues.apache.org/jira/browse/HIVE-736</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;MetaStoreUtil&apos;s get_fields(), which is offered through the Hive Server interface, does not include the partition field in its returned list of fields. This may be related to JIRA-671. At the moment, there is no way for a Hive client to discover a partition column in a table, creating a big issue for anyone who wishes to query a partitioned table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432494">HIVE-736</key>
            <summary>MetaStoreUtils get_fields() does not return partition column</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehwang">Eric Hwang</assignee>
                                    <reporter username="ehwang">Eric Hwang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2009 04:47:35 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:45 +0000</updated>
                            <resolved>Sat, 8 Aug 2009 22:04:29 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12740404" author="rsm" created="Fri, 7 Aug 2009 05:08:48 +0000"  >&lt;p&gt;As a work around, can you execute &quot;describe &amp;lt;tablename&amp;gt;&quot; to get the schema?&lt;/p&gt;</comment>
                            <comment id="12740407" author="ehwang" created="Fri, 7 Aug 2009 05:18:38 +0000"  >&lt;p&gt;That would work, but I was hoping to solve both this and JIRA-671 in one fell swoop. Don&apos;t we just need to determine whether the table has a partition, and then append the partition key onto the field schemas returned by the deserializer?&lt;/p&gt;</comment>
                            <comment id="12740414" author="ehwang" created="Fri, 7 Aug 2009 05:33:43 +0000"  >&lt;p&gt;Actually I just talked to Zheng offline and I guess the get_fields function should NOT return the partition column under its proper usage. I can work around this by calling get_tables and then join the partitionkey field descriptors with the result of get_fields. I&apos;ll do this for now, however, this seems rather roundabout and I think there should still be a function which just returns all field descriptors altogether.&lt;/p&gt;</comment>
                            <comment id="12740425" author="rsm" created="Fri, 7 Aug 2009 06:36:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think there should still be a function which just returns all field descriptors altogether.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That makes sense. Instead of writing a work around, why not just add a function to the metastore thrift api that returns all columns (including partition columns)?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;list&amp;lt;FieldSchema&amp;gt; get_schema(1:string db_name, 2:string tbl_name) 
         &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; (1: MetaException o1, 2: UnknownTableException o2, 3: UnknownDBException o3),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12740765" author="ehwang" created="Fri, 7 Aug 2009 22:17:48 +0000"  >&lt;p&gt;Sounds like a good idea. I&apos;ll do that instead. Does anyone know if thrift permits the overloading of function names? The Hive server already has a function called get_schema with different arguments.&lt;/p&gt;</comment>
                            <comment id="12740844" author="ehwang" created="Sat, 8 Aug 2009 06:13:13 +0000"  >&lt;p&gt;Patch Added:&lt;br/&gt;
Implements get_schema() in HiveMetaStore.java&lt;br/&gt;
Added get_schema() test cases to TestHiveMetaStore&lt;br/&gt;
Also added test cases for get_fields() in TestHiveMetaStore (related function)&lt;br/&gt;
All tests pass.&lt;/p&gt;</comment>
                            <comment id="12740970" author="rsm" created="Sat, 8 Aug 2009 21:15:29 +0000"  >&lt;p&gt;The changes look good. Will commit it if tests pass.&lt;/p&gt;</comment>
                            <comment id="12740982" author="rsm" created="Sat, 8 Aug 2009 22:04:29 +0000"  >&lt;p&gt;Committed. Thanks Eric!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12410953">HIVE-187</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415924" name="HIVE-736.1.patch" size="84355" author="ehwang" created="Sat, 8 Aug 2009 06:13:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Aug 2009 05:08:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Provide a function in Metastore to return the schema of a table.&lt;br/&gt;
(Eric Hwang via rmurthy)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-737] bin/hive doesn&apos;t start the shell when using a src build of hadoop</title>
                <link>https://issues.apache.org/jira/browse/HIVE-737</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-487&quot; title=&quot;Hive does not compile with Hadoop 0.20.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-487&quot;&gt;&lt;del&gt;HIVE-487&lt;/del&gt;&lt;/a&gt; &quot;bin/hive&quot; doesn&apos;t start the shell on our setup. This is because we use a source version of hadoop, where the jar files are in HADOOP_HOME/build/*.jar instead of in lib or in the root HADOOP_HOME.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432510">HIVE-737</key>
            <summary>bin/hive doesn&apos;t start the shell when using a src build of hadoop</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johanoskarsson">Johan Oskarsson</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2009 10:14:57 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:23 +0000</updated>
                            <resolved>Sat, 15 Aug 2009 16:33:07 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12740489" author="johanoskarsson" created="Fri, 7 Aug 2009 10:16:35 +0000"  >&lt;p&gt;This adds the build to places to look for hadoop version.&lt;/p&gt;</comment>
                            <comment id="12740651" author="athusoo" created="Fri, 7 Aug 2009 17:46:46 +0000"  >&lt;p&gt;Is the continue block needed? If the file does not exist then it will not be picked up by the globs in the the for loop.&lt;/p&gt;

&lt;p&gt;Instead I think it may be better to either break out of the loop after the execs to ensure that only one exec is called even if there are multiple matches or more cleanly perhaps just pick the first file out of the matches and issue exec on it.&lt;/p&gt;</comment>
                            <comment id="12742331" author="johanoskarsson" created="Wed, 12 Aug 2009 13:04:00 +0000"  >&lt;p&gt;It seems if the file doesn&apos;t exist the $f variable in the loop is set to the filename including the glob: /test/hadoopdir/hadoop*core.jar, so the continue is needed. &lt;br/&gt;
As you suggest the script should break out after the exec, added that to this patch.&lt;/p&gt;</comment>
                            <comment id="12743043" author="athusoo" created="Fri, 14 Aug 2009 01:00:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Looks good to me. Will check into both 0.4.0 and trunk once tests pass.&lt;/p&gt;</comment>
                            <comment id="12743046" author="athusoo" created="Fri, 14 Aug 2009 01:07:05 +0000"  >&lt;p&gt;Can you regenerate the diff from the root of the tree instead of bin?&lt;/p&gt;</comment>
                            <comment id="12743496" author="athusoo" created="Sat, 15 Aug 2009 00:16:41 +0000"  >&lt;p&gt;uploaded patch from root of the tree instead of root/bin&lt;/p&gt;</comment>
                            <comment id="12743497" author="athusoo" created="Sat, 15 Aug 2009 00:17:04 +0000"  >&lt;p&gt;running tests. Will check in once they are done.&lt;/p&gt;</comment>
                            <comment id="12743733" author="athusoo" created="Sat, 15 Aug 2009 16:33:07 +0000"  >&lt;p&gt;committed. Thanks Johan!!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12416629" name="HIVE-737-3.patch" size="887" author="athusoo" created="Sat, 15 Aug 2009 00:16:41 +0000"/>
                            <attachment id="12416312" name="HIVE-737.patch" size="875" author="johanoskarsson" created="Wed, 12 Aug 2009 13:04:00 +0000"/>
                            <attachment id="12415836" name="HIVE-737.patch" size="464" author="johanoskarsson" created="Fri, 7 Aug 2009 10:16:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Aug 2009 17:46:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-738] FunctionRegistry should be automatically populated</title>
                <link>https://issues.apache.org/jira/browse/HIVE-738</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;br/&gt;
No need to manually populate the functionRegistry - it should be populated from the annotations - this will make sure that a new function which gets added does not miss documentation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432539">HIVE-738</key>
            <summary>FunctionRegistry should be automatically populated</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2009 16:20:10 +0000</created>
                <updated>Fri, 7 Aug 2009 16:20:10 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42741</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08okf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-739] udf tests should include a describe and describe extended</title>
                <link>https://issues.apache.org/jira/browse/HIVE-739</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>
&lt;p&gt;There are a lot of udf tests - &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;njain@dev029 clientpositive&amp;#93;&lt;/span&gt;$ ls -lrt &lt;b&gt;udf&lt;/b&gt; &lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  975 May 27 17:58 udf_when.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  382 May 27 17:58 udf_unix_timestamp.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1919 May 27 17:58 udf_round.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  144 May 27 17:58 udf_lower.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1814 May 27 17:58 udf_json.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  555 May 27 17:58 udf_hash.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  937 May 27 17:58 udf_case_thrift.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  943 May 27 17:58 udf_case.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  331 May 27 17:58 udf_case_column_pruning.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1239 May 27 17:58 udf9.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  293 May 27 17:58 udf8.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  946 May 27 17:58 udf7.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  592 May 27 17:58 udf5.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  550 May 27 17:58 udf4.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  448 May 27 17:58 udf3.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  312 May 27 17:58 udf2.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1400 May 27 17:58 udf1.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  332 May 27 17:58 udf_10_trims.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  607 May 27 17:58 ppd_udf_case.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1463 Jun 11 15:08 udf_coalesce.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1726 Jun 18 16:20 udf_parse_url.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  482 Jun 19 15:09 udf_size.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  577 Jun 19 15:09 udf_like.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  724 Jun 19 15:09 udf_isnull_isnotnull.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  944 Jun 19 15:09 udf6.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  994 Jul  7 09:53 udf_if.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  470 Jul 14 11:27 udf_length.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  558 Jul 15 14:34 udf_reverse.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1257 Jul 15 22:23 udf_locate.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  921 Jul 15 22:23 udf_instr.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  444 Jul 17 16:03 udf_hex.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1606 Jul 17 16:03 udf_conv.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  163 Jul 17 16:03 udf_bin.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  925 Jul 23 11:54 udf_elt.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users   93 Jul 23 13:39 udf_sin.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users   93 Jul 23 13:39 udf_cos.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  153 Jul 23 13:39 udf_asin.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  153 Jul 23 13:39 udf_acos.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users 1930 Jul 23 13:50 udf_substr.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  257 Jul 23 13:50 udf_split.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  318 Jul 23 13:50 udf_space.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  225 Jul 23 13:50 udf_repeat.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  387 Jul 23 13:50 udf_lpad_rpad.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  153 Jul 23 13:50 udf_ascii.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  397 Jul 23 13:50 udf_abs.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  732 Jul 28 18:04 create_genericudf.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  199 Jul 28 18:04 drop_udf.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  353 Jul 28 18:05 udf_testlength2.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  347 Jul 28 18:05 udf_testlength.q&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 njain users  179 Jul 29 08:26 udf_pmod.q&lt;/p&gt;


&lt;p&gt;They should be enhanced to include a describe/describe extended of the udf under consideration&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432541">HIVE-739</key>
            <summary>udf tests should include a describe and describe extended</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2009 16:22:18 +0000</created>
                <updated>Thu, 20 Aug 2009 17:31:29 +0000</updated>
                                                                            <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12745515" author="namit" created="Thu, 20 Aug 2009 17:31:29 +0000"  >&lt;p&gt;Since we dont support a describe functions *, it will be good to change show_functions.q and add a describe &lt;br/&gt;
and describe extended for all the functions there.&lt;/p&gt;

&lt;p&gt;Add a comment there which says that whenever the output of show functions change, add a describe also - it might be easier to remember that way&lt;br/&gt;
for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>613</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122511</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-740] HiveMetaStore get_fields() method should use different logic for tables with native serdes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-740</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The HiveMetaStore&apos;s get_fields() always gets the field schemas from the table&apos;s deserializer. However, we should extract the field schemas from the table&apos;s storage descriptor if the table is using a native serialization library. This will allow the field schema comments field to be preserved in the returned list of field schemas.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432582">HIVE-740</key>
            <summary>HiveMetaStore get_fields() method should use different logic for tables with native serdes</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehwang">Eric Hwang</assignee>
                                    <reporter username="ehwang">Eric Hwang</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Aug 2009 01:19:08 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:17 +0000</updated>
                            <resolved>Sat, 8 Aug 2009 06:07:52 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12740832" author="zshao" created="Sat, 8 Aug 2009 03:44:40 +0000"  >&lt;p&gt;+1. Will commit if test passes.&lt;/p&gt;</comment>
                            <comment id="12740855" author="zshao" created="Sat, 8 Aug 2009 08:39:07 +0000"  >&lt;p&gt;Committed. Thanks Eric!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415919" name="HIVE-740.1.patch" size="1642" author="ehwang" created="Sat, 8 Aug 2009 02:17:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 8 Aug 2009 03:44:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73332</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122512</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-740&quot; title=&quot;HiveMetaStore get_fields() method should use different logic for tables with native serdes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-740&quot;&gt;&lt;strike&gt;HIVE-740&lt;/strike&gt;&lt;/a&gt;. Fix HiveMetaStore get_fields. (Eric Hwang via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-741] NULL is not handled correctly in join</title>
                <link>https://issues.apache.org/jira/browse/HIVE-741</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With the following data in table input4_cb:&lt;/p&gt;

&lt;p&gt;Key        Value&lt;br/&gt;
------       --------&lt;br/&gt;
NULL     325&lt;br/&gt;
18          NULL&lt;/p&gt;

&lt;p&gt;The following query:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from input4_cb a join input4_cb b on a.key = b.value;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;returns the following result:&lt;/p&gt;

&lt;p&gt;NULL    325    18   NULL&lt;/p&gt;

&lt;p&gt;The correct result should be empty set.&lt;/p&gt;

&lt;p&gt;When &apos;null&apos; is replaced by &apos;&apos; it works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432589">HIVE-741</key>
            <summary>NULL is not handled correctly in join</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amareshwari">Amareshwari Sriramadasu</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Aug 2009 03:58:45 +0000</created>
                <updated>Thu, 16 Feb 2012 23:42:41 +0000</updated>
                            <resolved>Tue, 24 Aug 2010 22:21:00 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12896789" author="amareshwari" created="Tue, 10 Aug 2010 07:21:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;When &apos;null&apos; is replaced by &apos;&apos; it works.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I see the same result even if &apos;null&apos; is replaced with &apos;&apos;.&lt;/p&gt;

&lt;p&gt;To reproduce the above, I created a table input1 with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; create table input1 (key &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, value &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Loaded the following input using Load data command&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;in.txt
^A35
12^A
10^A1000
10^A100
100^A100
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I see the following output for join queries executed.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
hive&amp;gt; select * from input1 a join input1 b on a.key=b.value;

Output:
NULL    35      12      NULL
100     100     10      100
100     100     100     100

Expected Output:
100     100     10      100
100     100     100     100

hive&amp;gt; select * from input1 a left outer join input1 b on a.key=b.value;

OUTPUT:
NULL    35      12      NULL
10      1000    NULL    NULL
10      100     NULL    NULL
12      NULL    NULL    NULL
100     100     10      100
100     100     100     100

Expected Output:
NULL    35      NULL    NULL
10      1000    NULL    NULL
10      100     NULL    NULL
12      NULL    NULL    NULL
100     100     10      100
100     100     100     100

hive&amp;gt; select * from input1 a right outer join input1 b on a.key=b.value;

OUTPUT:
NULL    35      12      NULL
NULL    NULL    NULL    35
100     100     10      100
100     100     100     100
NULL    NULL    10      1000

ExpectedOutput:
NULL    NULL    NULL    35
NULL    NULL    12      NULL
100     100     10      100
100     100     100     100
NULL    NULL    10      1000

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Expected output is obtained from mysql db for a similar query.&lt;/p&gt;

&lt;p&gt;Ning, if you are not working on the fix for this, I would like to contribute. Would need your help understanding join code also, as I&apos;m a new to hive. &lt;/p&gt;</comment>
                            <comment id="12896792" author="amareshwari" created="Tue, 10 Aug 2010 07:36:24 +0000"  >&lt;p&gt;By adding logs to ExecReducer, I see that the input to reduce is the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{&quot;key&quot;:{&quot;joinkey0&quot;:null},&quot;value&quot;:{&quot;_col0&quot;:null,&quot;_col1&quot;:35},&quot;alias&quot;:0}
{&quot;key&quot;:{&quot;joinkey0&quot;:null},&quot;value&quot;:{&quot;_col0&quot;:12,&quot;_col1&quot;:null},&quot;alias&quot;:1}
{&quot;key&quot;:{&quot;joinkey0&quot;:10},&quot;value&quot;:{&quot;_col0&quot;:10,&quot;_col1&quot;:1000},&quot;alias&quot;:0}
{&quot;key&quot;:{&quot;joinkey0&quot;:10},&quot;value&quot;:{&quot;_col0&quot;:10,&quot;_col1&quot;:100},&quot;alias&quot;:0}
{&quot;key&quot;:{&quot;joinkey0&quot;:12},&quot;value&quot;:{&quot;_col0&quot;:12,&quot;_col1&quot;:null},&quot;alias&quot;:0}
{&quot;key&quot;:{&quot;joinkey0&quot;:35},&quot;value&quot;:{&quot;_col0&quot;:null,&quot;_col1&quot;:35},&quot;alias&quot;:1}
{&quot;key&quot;:{&quot;joinkey0&quot;:100},&quot;value&quot;:{&quot;_col0&quot;:100,&quot;_col1&quot;:100},&quot;alias&quot;:0}
{&quot;key&quot;:{&quot;joinkey0&quot;:100},&quot;value&quot;:{&quot;_col0&quot;:10,&quot;_col1&quot;:100},&quot;alias&quot;:1}
{&quot;key&quot;:{&quot;joinkey0&quot;:100},&quot;value&quot;:{&quot;_col0&quot;:100,&quot;_col1&quot;:100},&quot;alias&quot;:1}
{&quot;key&quot;:{&quot;joinkey0&quot;:1000},&quot;value&quot;:{&quot;_col0&quot;:10,&quot;_col1&quot;:1000},&quot;alias&quot;:1}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And joinkey with null values are processed under same group, I think they should be processed in different groups, because comparison between nulls is not defined. &lt;/p&gt;</comment>
                            <comment id="12896793" author="nzhang" created="Tue, 10 Aug 2010 07:40:12 +0000"  >&lt;p&gt;I&apos;m not actively working on it. Please feel free to take it.&lt;/p&gt;</comment>
                            <comment id="12896974" author="nzhang" created="Tue, 10 Aug 2010 17:37:40 +0000"  >&lt;p&gt;The joins are implemented in the JoinOperator and CommonJoinOperators for regular reduce-side joins. The map-side joins are implemented in the MapJoinOperator. &lt;/p&gt;

&lt;p&gt;In the reduce side joins, the join keys are treated as distribution keys from the mappers to the reducers so that each group (marked by beginGroup() and endGroup()) will consists of rows with the same join keys. The reduce-side joins will cache all rows within a group except the last one (aka streaming table), which is scanned and cartesian producted with the cached rows of the other tables. I think the fix would be to check the NULL value of the join keys and do proper output based on the semantics of different types of joins. &lt;/p&gt;

&lt;p&gt;For the map-side join, it&apos;s basically a hash join where the small table is read in entirety in a hash table and probed while scanning the streaming table. &lt;/p&gt;

&lt;p&gt;There are other types of joins (bucketed map-side join, sort merge join etc.), but they all rely on the 3 classes mentioned above. &lt;/p&gt;

&lt;p&gt;Let me know if you have further questions for you to get started. &lt;/p&gt;</comment>
                            <comment id="12898132" author="tedxu" created="Fri, 13 Aug 2010 08:29:48 +0000"  >&lt;p&gt;Thanks for Ning and Amareshwari, we are looking forward to see the bug fixed. I think it&apos;s Okay to solve it by modifying the *JoinOperators, but it will be great if we can filter the NULL values in mappers, say, in ReduceSinkOperator, provided if we can know which part of the reduce sink key is from join (other than from group by, distinct, etc,.).  &lt;/p&gt;</comment>
                            <comment id="12898136" author="amareshwari" created="Fri, 13 Aug 2010 08:57:52 +0000"  >&lt;p&gt;Thanks Ning for the details.&lt;/p&gt;

&lt;p&gt;To summarize the implementation of join: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In reduce-side join, rows with same join keys are grouped together; and  in MapSide join, rows with same join keys are added the same entry in the hash table.&lt;/li&gt;
	&lt;li&gt;CommonJoinOperator.checkAndGenObject: The rows with same join key are cartesian producted with each other(i.e. with rows of different aliases). If there are no rows in one table alias, the rows of other table alias are ignored (for inner join) or cartesian producted with nulls (outer joins).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The above implementation works fine except for null join keys ; Since these rows are grouped together/hashed to same entry, the current issue exists.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think the fix would be to check the NULL value of the join keys and do proper output based on the semantics of different types of joins.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This would need special handling for each type of join (inner, left outer, right outer, full outer  an etc.). So, I&apos;m thinking the better solution is not group rows with null join keys together. Then the above join algorithm works correctly for all types of joins.&lt;/p&gt;

&lt;p&gt;Currently they are grouped together because HiveKey.compare compares the bytes of the key (in case of reduce-side join) and MapJoinObjectKey.equals returns true if both keys are null (in case of map-side join). I&apos;m trying to see if can come up with a solution which does not group rows with null join keys together. Please correct me if am wrong.&lt;/p&gt;</comment>
                            <comment id="12898141" author="amareshwari" created="Fri, 13 Aug 2010 09:14:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;but it will be great if we can filter the NULL values in mappers.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ted, we should not filter out the NULL values in mappers. Because for outer joins, these rows should be cartesian producted with nulls as shown in expected output in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-741?focusedCommentId=12896789&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12896789&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12898194" author="tedxu" created="Fri, 13 Aug 2010 11:36:09 +0000"  >&lt;p&gt;Sorry I&apos;m mistakenly expressed my idea, I mean values with NULL join keys shall be filtered out in mappers. &lt;/p&gt;

&lt;p&gt;I think values with NULL join keys shall be filtered out because NULL equals nothing, and Hive only support equal join.&lt;/p&gt;

&lt;p&gt;Please correct me if I&apos;m wrong. &lt;/p&gt;</comment>
                            <comment id="12898374" author="jvs" created="Fri, 13 Aug 2010 19:14:38 +0000"  >&lt;p&gt;@Ted:  as Amareshwari mentioned, a left outer join preserves rows on the left side regardless of whether the ON clause evaluates true.  So in that case (and similar cases for right/full outer join), we can&apos;t filter out the rows with null join keys.&lt;/p&gt;</comment>
                            <comment id="12898756" author="nzhang" created="Sun, 15 Aug 2010 21:37:37 +0000"  >&lt;p&gt;@Amareshwar, currently we already distinguish different join types with different functions (take a look at CommonJoinOperator.joinObjects()). I look forward to seeing your proposal to avoid grouping null-keyed rows.&lt;/p&gt;

&lt;p&gt;@Ted, I agree with Amareshwar and John that we cannot avoid rows (or the value part of the key-value pairs) with null as a key. However you have a point in that if we know the join operator does not involve outer join at all (we already have a flag noOuterJoin in JoinDesc), then we could avoid sending rows will null keys from the mappers to the reducers. This will save bandwidth as well as processing time. Could you open another JIRA and be able to submit a patch?&lt;/p&gt;</comment>
                            <comment id="12898772" author="tedxu" created="Mon, 16 Aug 2010 01:01:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;a left outer join preserves rows on the left side regardless of whether the ON clause evaluates true&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s right, thanks.&lt;/p&gt;</comment>
                            <comment id="12898858" author="amareshwari" created="Mon, 16 Aug 2010 11:44:40 +0000"  >&lt;p&gt;Attaching a simple patch which fixes JoinOperator (for reduce-side joins) and MapJoinOperator (for map-side joins) to not group the null join keys together. &lt;br/&gt;
Any comments on the approach/code are welcome.&lt;br/&gt;
Verified that SMBMapJoinOperator already filters nulls properly.&lt;/p&gt;</comment>
                            <comment id="12898996" author="he yongqiang" created="Mon, 16 Aug 2010 17:23:59 +0000"  >&lt;p&gt;the change looks good to me. Can you also add one or few tests for sort merge join?&lt;/p&gt;</comment>
                            <comment id="12899044" author="nzhang" created="Mon, 16 Aug 2010 19:27:59 +0000"  >&lt;p&gt;@Amareshwari, aside from adding new test cases for sort merge join, this patch also has some bugs. &lt;/p&gt;

&lt;p&gt;For example in your test data:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; select * from myinput1
NULL    356
484 NULL
10  10

-- incorrect result below
hive&amp;gt; select * FROM myinput1 a left &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; JOIN myinput1 b ON a.value = b.value; 
484 NULL    484 NULL
10  10  10  10
NULL    356 NULL    NULL

hive&amp;gt; select * FROM myinput1 a right &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; JOIN myinput1 b ON a.value = b.value;
484 NULL    484 NULL
10  10  10  10
NULL    NULL    NULL    356

hive&amp;gt; select * FROM myinput1 a left &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; JOIN myinput1 b right &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; join myinput1 c ON a.value = b.value and b.value = c.value;
NULL    NULL    NULL    NULL    484 NULL
NULL    NULL    NULL    NULL    10  10
NULL    NULL    NULL    NULL    NULL    356
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you take a look? I&apos;m not sure whether ending a group and starting a new group for each null-keyed row works for all cases particularly in joins involving more than 2 tables and mixture of left and right outer joins.  &lt;/p&gt;</comment>
                            <comment id="12899177" author="namit" created="Mon, 16 Aug 2010 23:12:49 +0000"  >&lt;p&gt;For inner, left and right outer joins, a simpler fix would be to add a filter on top.&lt;/p&gt;

&lt;p&gt;For example, for &lt;/p&gt;

&lt;p&gt;A join B on A.c1 = B.c2&lt;/p&gt;


&lt;p&gt;add a filter before A (A.c1 is not null) and B (B.c2 is not null)&lt;/p&gt;

&lt;p&gt;For &lt;/p&gt;

&lt;p&gt;A left outer join B on A.c1 = B.c2, the filter before A is not needed and &lt;br/&gt;
similarly, for &lt;br/&gt;
A right outer join B on A.c1 = B.c2, the filter before B is not needed&lt;/p&gt;



&lt;p&gt;Some special handling might still be needed for full outer joins and sort-merge joins&lt;/p&gt;</comment>
                            <comment id="12899365" author="amareshwari" created="Tue, 17 Aug 2010 10:14:40 +0000"  >&lt;p&gt;Thanks Ning for your comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;select * FROM myinput1 a left outer JOIN myinput1 b ON a.value = b.value;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;select * FROM myinput1 a right outer JOIN myinput1 b ON a.value = b.value;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is happening because I&apos;m assuming nr.get(0) in JoinOperator is the join-key. It seems it not always true that key is the first element in the ArrayList. When I modified a the code to the following, above queries are giving correct results.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      StructObjectInspector soi = (StructObjectInspector) inputObjInspectors[tag];
      StructField sf = soi.getStructFieldRef(Utilities.ReduceField.KEY
          .toString());
      &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; keyObject = soi.getStructFieldData(row, sf);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (SerDeUtils.isNullObject(keyObject, soi)) {
        endGroup();
        startGroup();
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Added method SerDeUtils.isNullObject(keyObject, soi) to know if the object passed is representing a NULL object.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;select * FROM myinput1 a left outer JOIN myinput1 b right outer join myinput1 c ON a.value = b.value and b.value = c.value;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Looking at Stage-1 of &quot;explain&quot; for the above query:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        a
          TableScan
            alias: a
            Reduce Output Operator
              sort order:
              tag: 0
              value expressions:
                    expr: key
                    type: int
                    expr: value
                    type: int
        b
          TableScan
            alias: b
            Reduce Output Operator
              sort order:
              tag: 1
              value expressions:
                    expr: key
                    type: int
                    expr: value
                    type: int
      Reduce Operator Tree:
        Join Operator
          condition map:
               Left Outer Join0 to 1
          condition expressions:
            0 {VALUE._col0} {VALUE._col1}
            1 {VALUE._col0} {VALUE._col1}
          handleSkewJoin: false
          outputColumnNames: _col0, _col1, _col4, _col5
          Filter Operator
            predicate:
                expr: (_col1 = _col5)
                type: boolean
            File Output Operator
              compressed: false
              GlobalTableId: 0
              table:
                  input format: org.apache.hadoop.mapred.SequenceFileInputFormat
                  output format: org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Join happens without join key?  Here, join output is the Cartesian product of a and b on which FilterOperator is applied, Am I right? I see the semantics of inner/outer join on two tables without join condition is to produce Cartesian product. As a side note: &quot;MySql does not allow outer joins without join condition&quot;. &lt;br/&gt;
If Join is allowed without join condition to produce Cartesian product of the two tables, then my patch should be changed to consider if join-key is defined for the join or not.  I could reproduce it by simple query &quot;select * FROM myinput1 a JOIN myinput1 b&quot;. I think the same applies to MapJoin as well. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Verified that SMBMapJoinOperator already filters nulls properly. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Can you also add one or few tests for sort merge join? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It seems my verification was wrong here, I thought if the table is sorted and hive.optimize.bucketmapjoin, hive.optimize.bucketmapjoin.sortedmerge are set to true, MapJoin uses SMBMapJoinOperator. But it was using MapJoinOperator it self. When I created a table with &quot;sorted by&quot; column, I see it using SMBMapJoinOperator. Currently if there are any nulls in the input table, SMBJoin fails with NullPointerException:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.NullPointerException
	at org.apache.hadoop.io.IntWritable.compareTo(IntWritable.java:60)
	at org.apache.hadoop.io.WritableComparator.compare(WritableComparator.java:115)
	at org.apache.hadoop.hive.ql.exec.SMBMapJoinOperator.compareKeys(SMBMapJoinOperator.java:389)
	at org.apache.hadoop.hive.ql.exec.SMBMapJoinOperator.processKey(SMBMapJoinOperator.java:438)
	at org.apache.hadoop.hive.ql.exec.SMBMapJoinOperator.processOp(SMBMapJoinOperator.java:205)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:458)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:698)
	at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:45)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:458)
	at org.apache.hadoop.hive.ql.exec.SMBMapJoinOperator.fetchOneRow(SMBMapJoinOperator.java:479)
	... 17 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will look into this. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;For inner, left and right outer joins, a simpler fix would be to add a filter on top. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Now, I agree it would be simpler &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Will consider this also and see if i can do some special handling for full outer joins.&lt;/p&gt;</comment>
                            <comment id="12899753" author="nzhang" created="Wed, 18 Aug 2010 06:24:48 +0000"  >&lt;p&gt;@Amareshwari, sorry the syntax was wrong for the 3 table joins. Below is the correct syntax and plan.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;explain select * from src a left &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; join src b on (a.value=b.value) right &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; join src c on (b.value=c.value);
OK
ABSTRACT SYNTAX TREE:
  (TOK_QUERY (TOK_FROM (TOK_RIGHTOUTERJOIN (TOK_LEFTOUTERJOIN (TOK_TABREF src a) (TOK_TABREF src b) (= (. (TOK_TABLE_OR_COL a) value) (. (TOK_TABLE_OR_COL b) value))) (TOK_TABREF src c) (= (. (TOK_TABLE_OR_COL b) value) (. (TOK_TABLE_OR_COL c) value)))) (TOK_INSERT (TOK_DESTINATION (TOK_DIR TOK_TMP_FILE)) (TOK_SELECT (TOK_SELEXPR TOK_ALLCOLREF))))

STAGE DEPENDENCIES:
  Stage-1 is a root stage
  Stage-0 is a root stage

STAGE PLANS:
  Stage: Stage-1
    Map Reduce
      Alias -&amp;gt; Map Operator Tree:
        a 
          TableScan
            alias: a
            Reduce Output Operator
              key expressions:
                    expr: value
                    type: string
              sort order: +
              Map-reduce partition columns:
                    expr: value
                    type: string
              tag: 0
              value expressions:
                    expr: key
                    type: string
                    expr: value
                    type: string
        b 
          TableScan
            alias: b
            Reduce Output Operator
              key expressions:
                    expr: value
                    type: string
              sort order: +
              Map-reduce partition columns:
                    expr: value
                    type: string
              tag: 1
              value expressions:
                    expr: key
                    type: string
                    expr: value
                    type: string
        c 
          TableScan
            alias: c
            Reduce Output Operator
              key expressions:
                    expr: value
                    type: string
              sort order: +
              Map-reduce partition columns:
                    expr: value
                    type: string
              tag: 2
              value expressions:
                    expr: key
                    type: string
                    expr: value
                    type: string
      Reduce Operator Tree:
        Join Operator
          condition map:
               Left Outer Join0 to 1
               Right Outer Join1 to 2
          condition expressions:
            0 {VALUE._col0} {VALUE._col1}
            1 {VALUE._col0} {VALUE._col1}
            2 {VALUE._col0} {VALUE._col1}
          handleSkewJoin: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
          outputColumnNames: _col0, _col1, _col4, _col5, _col8, _col9
          Select Operator
            expressions:
                  expr: _col0
                  type: string
                  expr: _col1
                  type: string
                  expr: _col4
                  type: string
                  expr: _col5
                  type: string
                  expr: _col8
                  type: string
                  expr: _col9
                  type: string
            outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5
            File Output Operator
              compressed: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
              GlobalTableId: 0
              table:
                  input format: org.apache.hadoop.mapred.TextInputFormat
                  output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat

  Stage: Stage-0
    Fetch Operator
      limit: -1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12899794" author="amareshwari" created="Wed, 18 Aug 2010 09:11:28 +0000"  >&lt;p&gt;Attaching patch that fixes the bugs in earlier patch, that Ning has found. Also adds more testcases.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can you also add one or few tests for sort merge join? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Attached file smbjoin_nulls.q.txt has tests for sort merge join. But it fails with NPE as mentioned as earlier. I tried to fix the NPE, but could not come up with a fix. Shall I do it on followup jira?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;For inner, left and right outer joins, a simpler fix would be to add a filter on top.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think this can be done as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1544&quot; title=&quot;Filtering out NULL-keyed rows in ReduceSinkOperator when no outer join involved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1544&quot;&gt;HIVE-1544&lt;/a&gt; as an improvement.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;@Amareshwari, sorry the syntax was wrong for the 3 table joins. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ning, Hive was not complaining about the syntax. So, included this also in the testcase. The results are fine with the latest patch.&lt;/p&gt;</comment>
                            <comment id="12899795" author="amareshwari" created="Wed, 18 Aug 2010 09:16:10 +0000"  >&lt;p&gt;Submitting patch for the review of patch-741-1.txt &lt;/p&gt;</comment>
                            <comment id="12900174" author="amareshwari" created="Thu, 19 Aug 2010 05:12:28 +0000"  >&lt;p&gt;Patch fixes SMBMapJoinOperator also. I modified compareKeys(ArrayList&amp;lt;Object&amp;gt; k1, ArrayList&amp;lt;Object&amp;gt; k2) to do the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hasNullElements(k1) &amp;amp;&amp;amp; hasNullElements(k2)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; -1; &lt;span class=&quot;code-comment&quot;&gt;// just &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; k1 is smaller than k2
&lt;/span&gt;    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hasNullElements(k1)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (0 - k2.size());
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hasNullElements(k2)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; k1.size();
    }
   ... &lt;span class=&quot;code-comment&quot;&gt;//the existing code.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does the above make sense?&lt;/p&gt;

&lt;p&gt;Updated the testcase with smb join queries. &lt;/p&gt;

&lt;p&gt;When I&apos;m running smb join on my local machine (pseudo distributed mode), I&apos;m getting different results. I think that is mostly because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1561&quot; title=&quot;smb_mapjoin_8.q returns different results in miniMr mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1561&quot;&gt;&lt;del&gt;HIVE-1561&lt;/del&gt;&lt;/a&gt;. Will update the issue with my findings.&lt;/p&gt;</comment>
                            <comment id="12900198" author="amareshwari" created="Thu, 19 Aug 2010 07:19:12 +0000"  >&lt;p&gt;All the tests passed with latest patch : patch-741-2.txt&lt;/p&gt;</comment>
                            <comment id="12900570" author="nzhang" created="Fri, 20 Aug 2010 04:19:19 +0000"  >&lt;p&gt;Looks good in general. Some minor comments:&lt;br/&gt;
 1) add more test cases for SMB joins. Currently the only test case has only 1 bucket which does not cover the most common use case. Can you add more test cases for more buckets? You can take a look at bucketed join queries included in the client positive tests.&lt;br/&gt;
 2) SMBMapJoinOperator.compareKey() is called for each row so it is critical for performance. In your code the hasNullElement() could be called 4 times in the worse case. If you cache the result it can be called only twice. &lt;/p&gt;

&lt;p&gt;Yongqiang, any further comments?&lt;/p&gt;</comment>
                            <comment id="12900602" author="amareshwari" created="Fri, 20 Aug 2010 07:24:31 +0000"  >&lt;p&gt;Thanks Ning for the comments.&lt;/p&gt;

&lt;p&gt;Patch incorporates the review comments. Looked at smb_mapjoin* query files and updated smb join queries. &lt;/p&gt;</comment>
                            <comment id="12900941" author="nzhang" created="Sat, 21 Aug 2010 00:20:33 +0000"  >&lt;p&gt;The SMB test case still has a minor issue: the tables was created as 2 buckets but there is only 1 file in the tables. This is conflicting to the table schema. If a table is defined as bucketd 2, there should be 2 files in the partition or table. They SMB join takes the 1st file in T1 join the 1st file in T2, and 2nd file in T1 join 2nd file in T2. So the test case should cover this use case. &lt;/p&gt;</comment>
                            <comment id="12901258" author="amareshwari" created="Mon, 23 Aug 2010 04:37:29 +0000"  >&lt;p&gt;Updated smb input with two files. &lt;/p&gt;</comment>
                            <comment id="12901275" author="nzhang" created="Mon, 23 Aug 2010 06:06:59 +0000"  >&lt;p&gt;Looks good except one mintor thing: SerDeUtils.java:369 should return true? Amareshwari, can you upload a new patch and I&apos;ll run unit tests. &lt;/p&gt;

&lt;p&gt;Yongqiang, can you test this patch on the production SMB join queries?&lt;/p&gt;
</comment>
                            <comment id="12901280" author="amareshwari" created="Mon, 23 Aug 2010 06:36:13 +0000"  >&lt;p&gt;Updated the patch. Thanks Ning for your help.&lt;/p&gt;</comment>
                            <comment id="12901503" author="he yongqiang" created="Mon, 23 Aug 2010 17:44:33 +0000"  >&lt;p&gt;+1. The patch looks good to me. &lt;br/&gt;
(Only have one minor comment on the name of &quot;hasNullElements&quot;, should we rename it since this function is used to determine all keys are null?)&lt;/p&gt;
</comment>
                            <comment id="12901508" author="he yongqiang" created="Mon, 23 Aug 2010 17:52:38 +0000"  >&lt;p&gt;also about Ning&apos;s comments:&lt;br/&gt;
&amp;gt;&amp;gt;2) SMBMapJoinOperator.compareKey() is called for each row so it is critical for performance. In your code the hasNullElement() could be called 4 times in the worse case. If you cache the result it can be called only twice.&lt;br/&gt;
Agree. Not sure how much overhead is there, will try to estimate the overhead over production running. That will be great if you can try to cache the null check results, so that it can only happen one time for each key. &lt;/p&gt;</comment>
                            <comment id="12901515" author="nzhang" created="Mon, 23 Aug 2010 18:05:51 +0000"  >&lt;p&gt;Amareshwari, aside from Yongqiang comment, join_null.q&apos;s result is not deterministic &amp;#8211; the SMB joins result in different orders. Can you make it deterministic by adding a &apos;order by&apos; clause at the end of the queries? I&apos;ll attach my test run results&lt;/p&gt;</comment>
                            <comment id="12901517" author="nzhang" created="Mon, 23 Aug 2010 18:07:29 +0000"  >&lt;p&gt;uploading test results join_null.q.out which has conflicts with the patch-741-5.txt.&lt;/p&gt;</comment>
                            <comment id="12901747" author="amareshwari" created="Tue, 24 Aug 2010 06:37:01 +0000"  >&lt;p&gt;Patch with following changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Renamed the method hasNullElements to hasAllNulls&lt;/li&gt;
	&lt;li&gt;Added keyToHasNullsMap to SMBMapJoinOperator to cache whether key has nulls or not, which is populated when the key elements are computed.&lt;/li&gt;
	&lt;li&gt;Added appropriate &quot;order by&quot; clauses to smb join queries in the testcase&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12902004" author="nzhang" created="Tue, 24 Aug 2010 18:28:10 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12902109" author="nzhang" created="Tue, 24 Aug 2010 22:21:00 +0000"  >&lt;p&gt;Committed. Thanks Amareshwari!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12432443">HIVE-734</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12469118">HIVE-1460</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12471879">HIVE-1552</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12471879">HIVE-1552</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12542970">HIVE-2810</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12471750">HIVE-1544</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12452838" name="join_nulls.q.out" size="27508" author="nzhang" created="Mon, 23 Aug 2010 18:07:29 +0000"/>
                            <attachment id="12452383" name="patch-741-1.txt" size="28025" author="amareshwari" created="Wed, 18 Aug 2010 09:11:28 +0000"/>
                            <attachment id="12452484" name="patch-741-2.txt" size="33149" author="amareshwari" created="Thu, 19 Aug 2010 05:12:28 +0000"/>
                            <attachment id="12452613" name="patch-741-3.txt" size="40093" author="amareshwari" created="Fri, 20 Aug 2010 07:24:31 +0000"/>
                            <attachment id="12452772" name="patch-741-4.txt" size="41414" author="amareshwari" created="Mon, 23 Aug 2010 04:37:29 +0000"/>
                            <attachment id="12452782" name="patch-741-5.txt" size="41413" author="amareshwari" created="Mon, 23 Aug 2010 06:36:13 +0000"/>
                            <attachment id="12452898" name="patch-741-6.txt" size="42905" author="amareshwari" created="Tue, 24 Aug 2010 06:37:01 +0000"/>
                            <attachment id="12452165" name="patch-741.txt" size="7438" author="amareshwari" created="Mon, 16 Aug 2010 11:44:40 +0000"/>
                            <attachment id="12452384" name="smbjoin_nulls.q.txt" size="650" author="amareshwari" created="Wed, 18 Aug 2010 09:11:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Aug 2010 07:21:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73331</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-742] joins dont handle null correctly </title>
                <link>https://issues.apache.org/jira/browse/HIVE-742</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Ning Zhang added a comment - 07/Aug/09 10:46 AM&lt;br/&gt;
BTW, I tried joins and it doesn&apos;t handle NULL semantics correctly. Here&apos;s the data and results:&lt;/p&gt;

&lt;p&gt;Table:&lt;/p&gt;

&lt;p&gt;Key Value&lt;br/&gt;
------- -------&lt;br/&gt;
NULL 325&lt;br/&gt;
18 NULL&lt;/p&gt;

&lt;p&gt;Query:&lt;/p&gt;

&lt;p&gt;select * from input4_cb a join input4_cb b on a.key = b.value;&lt;/p&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;p&gt;NULL 325 18 NULL&lt;/p&gt;

&lt;p&gt;The correct result should be empty set.&lt;/p&gt;

&lt;p&gt;I guess the NULL vs. NULL comparison is incorrectly evaluated.&lt;br/&gt;
[ Show &#187; ]&lt;br/&gt;
Ning Zhang added a comment - 07/Aug/09 10:46 AM BTW, I tried joins and it doesn&apos;t handle NULL semantics correctly. Here&apos;s the data and results: Table: Key Value ------- ------- NULL 325 18 NULL Query: select * from input4_cb a join input4_cb b on a.key = b.value; Result: NULL 325 18 NULL The correct result should be empty set. I guess the NULL vs. NULL comparison is incorrectly evaluated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432591">HIVE-742</key>
            <summary>joins dont handle null correctly </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Aug 2009 05:13:19 +0000</created>
                <updated>Sat, 8 Aug 2009 05:21:48 +0000</updated>
                            <resolved>Sat, 8 Aug 2009 05:21:48 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12740838" author="namit" created="Sat, 8 Aug 2009 05:20:17 +0000"  >&lt;p&gt;Pasted from &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-734&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-734&lt;/a&gt; as Ning corrrectly found out.&lt;/p&gt;

&lt;p&gt;The issue is not null vs. null comparison - the join happens at the reducer where the keys are not even taken into consideration.&lt;br/&gt;
NULL hashes to the same value, which explains this behavior.&lt;/p&gt;

&lt;p&gt;The correct fix would be to filter the rows with NULL keys at the mapper itself.&lt;/p&gt;

&lt;p&gt;However, we need to figure out the following:&lt;/p&gt;

&lt;p&gt;1. Expected semantics when join key consists of a null and a non-null column. If that is also same (4, NULL) does not join with (4, NULL), then we can safely&lt;br/&gt;
    filter all rows even if one key is NULL.&lt;br/&gt;
2. Expected behavior of outer joins.&lt;/p&gt;
</comment>
                            <comment id="12740839" author="namit" created="Sat, 8 Aug 2009 05:21:48 +0000"  >&lt;p&gt;duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-741&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-741&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73330</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122514</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-743] let user specify serde for custom scripts</title>
                <link>https://issues.apache.org/jira/browse/HIVE-743</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Splitting up &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-708&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-708&lt;/a&gt; into this.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12432612">HIVE-743</key>
            <summary>let user specify serde for custom scripts</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Aug 2009 22:42:01 +0000</created>
                <updated>Thu, 2 May 2013 02:29:21 +0000</updated>
                            <resolved>Wed, 12 Aug 2009 06:22:01 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12740993" author="namit" created="Sat, 8 Aug 2009 22:46:41 +0000"  >&lt;p&gt;@Zheng, I know this will conflict with &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-732&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-732&lt;/a&gt;, but I think this should go in first - this is a bigger change.&lt;/p&gt;

&lt;p&gt;I promise I will sit with you to resolve the conflicts&lt;/p&gt;</comment>
                            <comment id="12742111" author="namit" created="Tue, 11 Aug 2009 22:55:39 +0000"  >&lt;p&gt;resolved conflicts&lt;/p&gt;</comment>
                            <comment id="12742119" author="zshao" created="Tue, 11 Aug 2009 23:36:43 +0000"  >&lt;p&gt;@hive.743.2.patch:&lt;br/&gt;
Hive.g: Can we use &quot;rowFormat&quot;, &quot;rowFormatDelimited&quot;, &quot;rowFormatSerDe&quot; instead of &quot;serde&quot;, &quot;serdePropertiesFormat&quot;, and &quot;serdeFormat&quot;? I think that will be much more intuitive. We can also replace &quot;tableRowFormat&quot; with &quot;rowFormat&quot;.&lt;/p&gt;

&lt;p&gt;SemanticAnalyzer.genScriptPlan looks a bit ugly - can we add one level of nesting for inSerDe and outSerDe in Hive.g, and use a single loop over the children in genScriptPlan to get all corresponding children?&lt;br/&gt;
We can also add a &quot;null&quot; placeholder in case inSerDe / outSerDe is missing, so we don&apos;t need to calculate the child positions.&lt;/p&gt;

&lt;p&gt;Otherwise it looks good.&lt;/p&gt;</comment>
                            <comment id="12742233" author="rsm" created="Wed, 12 Aug 2009 06:22:01 +0000"  >&lt;p&gt;@zheng, I committed the changes to trunk (and branch-0.4) before seeing your comments. Sorry about that. &lt;/p&gt;

&lt;p&gt;@namit, can you file a new jira to address Zheng&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="12742374" author="namit" created="Wed, 12 Aug 2009 14:12:18 +0000"  >&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-751&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-751&lt;/a&gt; for the followup.&lt;/p&gt;

&lt;p&gt;@Raghu, can you mark this issue resolved&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12431074">HIVE-669</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12432879">HIVE-751</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12432357">HIVE-732</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415970" name="hive.743.1.patch" size="63362" author="namit" created="Sat, 8 Aug 2009 22:45:15 +0000"/>
                            <attachment id="12416261" name="hive.743.2.patch" size="68041" author="namit" created="Tue, 11 Aug 2009 22:55:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Aug 2009 23:36:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122515</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-744] Create HiveShell to unify conf management of all hive tools</title>
                <link>https://issues.apache.org/jira/browse/HIVE-744</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This would be similar to hadoop&apos;s JobShell. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-617&quot; title=&quot;Script to start classes with hadoop and hive environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-617&quot;&gt;&lt;del&gt;HIVE-617&lt;/del&gt;&lt;/a&gt; for more discussions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432617">HIVE-744</key>
            <summary>Create HiveShell to unify conf management of all hive tools</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Aug 2009 06:20:09 +0000</created>
                <updated>Sun, 9 Aug 2009 06:21:52 +0000</updated>
                                                                            <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08okn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48580</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-745] Remove unnecessary deserialization/serialization needed for custom scripts </title>
                <link>https://issues.apache.org/jira/browse/HIVE-745</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the input serializer to the script operator and the serde for the script is the same, there is no need to deserialize / serialize the data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432720">HIVE-745</key>
            <summary>Remove unnecessary deserialization/serialization needed for custom scripts </summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Aug 2009 21:24:42 +0000</created>
                <updated>Mon, 10 Aug 2009 21:24:42 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42739</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-746] constant folding</title>
                <link>https://issues.apache.org/jira/browse/HIVE-746</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The constants are not folded at compile time:&lt;/p&gt;

&lt;p&gt;for eg:&lt;/p&gt;

&lt;p&gt;select 1+2 from src&lt;/p&gt;

&lt;p&gt;will evaluate 1+2 for every row.&lt;/p&gt;

&lt;p&gt;This becomes more interesting for scenarios like:&lt;/p&gt;

&lt;p&gt;select unix_timestamp() from src;&lt;/p&gt;

&lt;p&gt;The UDF should be evaluated only once, and the same value should be returned. However, currently, we mark it as non-deterministic and evaluate it for every row.&lt;br/&gt;
This can have bad side-effects on partition pruning etc.&lt;/p&gt;

&lt;p&gt;In MySQL, the same value is generated independent of the time taken for the query.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432732">HIVE-746</key>
            <summary>constant folding</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2009 02:10:34 +0000</created>
                <updated>Tue, 21 Jun 2011 23:36:03 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12743517" author="zshao" created="Sat, 15 Aug 2009 01:39:30 +0000"  >&lt;p&gt;We can do this in the optimization phase (before column pruning).&lt;br/&gt;
This will be done together with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-757&quot; title=&quot;Don&amp;#39;t send constants from mapper to reducer for Group By queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-757&quot;&gt;HIVE-757&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We do a visit from the root operators. We visit one operator only if all its parents are visited.&lt;/p&gt;

&lt;p&gt;For each expression tree in an operator, we will try to see if we can pre-compute part or all of the expression tree, by doing a bottom-up calculation.&lt;br/&gt;
A leaf node is a constant, if it&apos;s a constant node, or it&apos;s referencing a column from its parent that is constant. We directly fill in the constant value if it&apos;s the latter case.&lt;br/&gt;
A non-leaf node is a constant, if all of its children are constant (ok if no children at all), and the node is deterministic (all except non-deterministic udf/genericudf).&lt;br/&gt;
We fold all non-leaf node into a single constant node.&lt;/p&gt;

&lt;p&gt;After constant folding is done, column pruning should be able to prune out those constant columns in the intermediate operators.&lt;/p&gt;</comment>
                            <comment id="13046837" author="slider" created="Thu, 9 Jun 2011 21:46:09 +0000"  >&lt;p&gt;For a query like:&lt;/p&gt;

&lt;p&gt;select * from src where partcol = unix_timestamp();&lt;/p&gt;

&lt;p&gt;Don&apos;t we want the expression unix_timestamp() to be evaluated once and to be used in pruning the partitions, &lt;b&gt;whether the UDF unix_timestamp is marked non-deterministic or not&lt;/b&gt;?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12433140">HIVE-757</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12498497">HIVE-1986</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 15 Aug 2009 01:39:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-747] void type (null column) cannot be UNIONed with other type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-747</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive&amp;gt; select * from (select NULL from zshao_tt union all select 1 from zshao_tt)x;&lt;br/&gt;
select * from (select NULL from zshao_tt union all select 1 from zshao_tt)x;&lt;br/&gt;
FAILED: Error in semantic analysis: Schema of both sides of union should match: Column _c0 is of type void on first table and type int on second table&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432799">HIVE-747</key>
            <summary>void type (null column) cannot be UNIONed with other type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2009 16:48:19 +0000</created>
                <updated>Tue, 14 May 2013 08:07:34 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12743091" author="zshao" created="Fri, 14 Aug 2009 06:14:40 +0000"  >&lt;p&gt;Good catch.&lt;br/&gt;
Does SQL allow union of int with double, or int with string? If it does, we can use FunctionRegistry.getCommonClass() to derive the common type. We should be able to solve this problem with the same shot.&lt;/p&gt;</comment>
                            <comment id="13237217" author="kevinwilfong" created="Fri, 23 Mar 2012 22:27:50 +0000"  >&lt;p&gt;This is now producing wrong results.&lt;/p&gt;

&lt;p&gt;select x from (select &apos;a&apos; as x from src union all select NULL as x from src)a;&lt;/p&gt;

&lt;p&gt;returns NULL for every row.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12547934">HIVE-2901</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Aug 2009 06:14:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122518</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
