<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:18:47 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-8-10+AND+created+%3C%3D+2011-8-17+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="18" total="18"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2364] Make performance logging configurable.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2364</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, the way we measure the length of time spent by a piece of code is using the methods PerfLogBegin and PerfLogEnd in the Utilities class.  If we made the class responsible for logging this data configurable, it would allow for more flexibility, in particular, we would not be restricted to logging to an Apache Commons Log.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518387">HIVE-2364</key>
            <summary>Make performance logging configurable.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 00:02:19 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:05 +0000</updated>
                            <resolved>Sun, 14 Aug 2011 13:49:01 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13082012" author="kevinwilfong" created="Wed, 10 Aug 2011 00:14:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1443/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1443/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13082014" author="jiraposter@reviews.apache.org" created="Wed, 10 Aug 2011 00:15:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1443/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1443/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I created a new class PerfLogger, which wraps the old functionality of Utilities&apos; PerfLogBegin and PerfLogBegin methods.  I also added a config variable hive.exec.perf.logger.  The value of this variable can be changed to point to a subclass of PerfLogger which can customize the code in PerfLogBegin and PerfLogEnd.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2364&quot; title=&quot;Make performance logging configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2364&quot;&gt;&lt;del&gt;HIVE-2364&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2364&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1155439 &lt;br/&gt;
  trunk/conf/hive-default.xml 1155439 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java 1155439 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java 1155439 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java 1155439 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1443/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1443/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I ran the code as it is and made sure it continued to log the performance messages as before.&lt;/p&gt;

&lt;p&gt;I also created a subclass of PerfLogger and used its class name as the value of hive.exec.perf.logger, and verified the subclass&apos;s code was run.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13082017" author="jiraposter@reviews.apache.org" created="Wed, 10 Aug 2011 00:19:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1443/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1443/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-10 00:18:50.035513)&lt;/p&gt;


&lt;p&gt;Review request for hive and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Forgot to add the licensing info to the top of PerfLogger.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I created a new class PerfLogger, which wraps the old functionality of Utilities&apos; PerfLogBegin and PerfLogBegin methods.  I also added a config variable hive.exec.perf.logger.  The value of this variable can be changed to point to a subclass of PerfLogger which can customize the code in PerfLogBegin and PerfLogEnd.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2364&quot; title=&quot;Make performance logging configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2364&quot;&gt;&lt;del&gt;HIVE-2364&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2364&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1155439 &lt;br/&gt;
  trunk/conf/hive-default.xml 1155439 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java 1155439 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java 1155439 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java 1155439 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1443/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1443/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I ran the code as it is and made sure it continued to log the performance messages as before.&lt;/p&gt;

&lt;p&gt;I also created a subclass of PerfLogger and used its class name as the value of hive.exec.perf.logger, and verified the subclass&apos;s code was run.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13084536" author="nzhang" created="Sat, 13 Aug 2011 05:12:07 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="13084541" author="nzhang" created="Sat, 13 Aug 2011 05:20:21 +0000"  >&lt;p&gt;Kevin, this patch is out of date. Could you update it and repost it? Please ping me after you update it and I&apos;ll start testing right away.&lt;/p&gt;</comment>
                            <comment id="13084754" author="jiraposter@reviews.apache.org" created="Sun, 14 Aug 2011 00:55:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1443/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1443/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-14 00:54:16.595577)&lt;/p&gt;


&lt;p&gt;Review request for hive and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated patch.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I created a new class PerfLogger, which wraps the old functionality of Utilities&apos; PerfLogBegin and PerfLogBegin methods.  I also added a config variable hive.exec.perf.logger.  The value of this variable can be changed to point to a subclass of PerfLogger which can customize the code in PerfLogBegin and PerfLogEnd.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2364&quot; title=&quot;Make performance logging configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2364&quot;&gt;&lt;del&gt;HIVE-2364&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2364&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1157444 &lt;br/&gt;
  trunk/conf/hive-default.xml 1157444 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java 1157444 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java 1157444 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java 1157444 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1443/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1443/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I ran the code as it is and made sure it continued to log the performance messages as before.&lt;/p&gt;

&lt;p&gt;I also created a subclass of PerfLogger and used its class name as the value of hive.exec.perf.logger, and verified the subclass&apos;s code was run.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13084837" author="nzhang" created="Sun, 14 Aug 2011 13:49:01 +0000"  >&lt;p&gt;Committed. Thanks Kevin!&lt;/p&gt;</comment>
                            <comment id="13084875" author="hudson" created="Sun, 14 Aug 2011 18:03:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #894 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/894/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/894/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2364&quot; title=&quot;Make performance logging configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2364&quot;&gt;&lt;del&gt;HIVE-2364&lt;/del&gt;&lt;/a&gt;. Make performance logging configurable. (Kevin Wilfong via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1157532&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1157532&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489916" name="HIVE-2364.1.patch.txt" size="16173" author="kevinwilfong" created="Wed, 10 Aug 2011 00:14:58 +0000"/>
                            <attachment id="12489918" name="HIVE-2364.2.patch.txt" size="16999" author="kevinwilfong" created="Wed, 10 Aug 2011 00:19:00 +0000"/>
                            <attachment id="12490365" name="HIVE-2364.3.patch.txt" size="17833" author="kevinwilfong" created="Sun, 14 Aug 2011 00:48:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Aug 2011 00:15:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2365] SQL support for bulk load into HBase</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2365</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Support the &quot;as simple as this&quot; SQL for bulk load from Hive into HBase.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518515">HIVE-2365</key>
            <summary>SQL support for bulk load into HBase</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ndimiduk">Nick Dimiduk</assignee>
                                    <reporter username="jvs">John Sichi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 21:26:56 +0000</created>
                <updated>Wed, 12 Nov 2014 20:40:27 +0000</updated>
                                                                            <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13085420" author="posix4e" created="Mon, 15 Aug 2011 23:10:50 +0000"  >&lt;p&gt;So I would love to take this up but, I have a couple of questions. &lt;/p&gt;

&lt;p&gt;Is the issue that the create statement is to complicated? You do have to specify a lot of things.&lt;br/&gt;
Do you want all of the steps in one SQL command? &lt;br/&gt;
What&apos;s the right balance of configurability vs automagically?&lt;/p&gt;</comment>
                            <comment id="13085477" author="jvs" created="Tue, 16 Aug 2011 01:44:03 +0000"  >&lt;p&gt;(Just realized I forgot to link the original doc where &quot;as simple as this&quot; is mentioned.)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HBaseBulkLoad&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HBaseBulkLoad&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This issue pertains to INSERT of large amounts of data into HBase from Hive (not CREATE; I&apos;ll follow up separately in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2373&quot; title=&quot;Importing hive tables into hbase+hive requires a lot of work which often can be implied&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2373&quot;&gt;HIVE-2373&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The major challenges here are:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;automating the sampling needed for coming up with the range partitioning for the global sort&lt;/li&gt;
	&lt;li&gt;extending Hive&apos;s INSERT to express the whole thing&lt;/li&gt;
	&lt;li&gt;chaining together the sampling job with the actual load job and tying together the relevant bits such as temporary file locations (we&apos;ve had success doing something similar via reentrant SQL for index load/query statements)&lt;/li&gt;
	&lt;li&gt;making the load use the HBase bulk load API which was added subsequent to the original Hive work&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13884540" author="ndimiduk" created="Tue, 28 Jan 2014 20:10:27 +0000"  >&lt;p&gt;Let me take a crack at this one.&lt;/p&gt;</comment>
                            <comment id="13884774" author="ndimiduk" created="Tue, 28 Jan 2014 22:14:10 +0000"  >&lt;p&gt;So I&apos;ve been talking to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;Sushanth Sowmyan&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;Vikram Dixit K&lt;/a&gt; about this. My thinking is to start with a prototype that extends the planner to detect the HBase table and a &quot;use bulkload&quot; flag. It&apos;ll then make the appropriate modifications by way of a new HBaseSinkOperation or similar. That&apos;ll highlight any other underlying issues (I&apos;m suspect of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4627&quot; title=&quot;Total ordering of Hive output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4627&quot;&gt;&lt;del&gt;HIVE-4627&lt;/del&gt;&lt;/a&gt;). That&apos;ll give me a change to learn the Hive code a bit and let you guys work out how exactly the hbase handler &lt;b&gt;should&lt;/b&gt; hook into the planer.&lt;/p&gt;

&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=viraj&quot; class=&quot;user-hover&quot; rel=&quot;viraj&quot;&gt;Viraj Bhat&lt;/a&gt; as you folk may also be interested.&lt;/p&gt;</comment>
                            <comment id="13885115" author="navis" created="Wed, 29 Jan 2014 07:43:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; You might be interested in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4765&quot; title=&quot;Improve HBase bulk loading facility&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4765&quot;&gt;HIVE-4765&lt;/a&gt;, also.&lt;/p&gt;</comment>
                            <comment id="13885453" author="ndimiduk" created="Wed, 29 Jan 2014 15:55:47 +0000"  >&lt;p&gt;Ah, interesting, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt;. I hadn&apos;t gotten to the sampling problem yet. Does &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4765&quot; title=&quot;Improve HBase bulk loading facility&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4765&quot;&gt;HIVE-4765&lt;/a&gt; resolve the problems I saw in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4627&quot; title=&quot;Total ordering of Hive output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4627&quot;&gt;&lt;del&gt;HIVE-4627&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13889196" author="navis" created="Mon, 3 Feb 2014 03:56:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; I think so. But I&apos;ve forgot whole context of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4765&quot; title=&quot;Improve HBase bulk loading facility&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4765&quot;&gt;HIVE-4765&lt;/a&gt; (which is 6 months old). So I cannot sure of that.&lt;/p&gt;</comment>
                            <comment id="13890259" author="ndimiduk" created="Tue, 4 Feb 2014 01:34:31 +0000"  >&lt;p&gt;After much fighting with input data and ordering, I have my first little improvement. I&apos;ve started a &lt;a href=&quot;https://github.com/ndimiduk/hive/tree/2365-sql-support-hbase-bulkloads&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;WIP branch&lt;/a&gt; over on Github. I will regularly rewrite it&apos;s history, but if you&apos;d like to follow along, I&apos;ll take comments as they come. Once things take shape, I&apos;ll squash into a patch and attach here.&lt;/p&gt;

&lt;p&gt;The patch posted supports generating HFiles from a table defined using the HBaseStorageHandler. The next improvement here is to actually rewrite the plan to introduce a step that invokes LoadIncrementalHFiles. After that, we can get rid of the need for specifying hfile.family.path, just detect it from the column family from the mapping attribute and write the HFiles to a temporary location before loading.&lt;/p&gt;</comment>
                            <comment id="13895315" author="ndimiduk" created="Sat, 8 Feb 2014 00:35:58 +0000"  >&lt;p&gt;Here&apos;s a proof of concept patch. It allows tables defined using the HBaseStorageHandler to switch into &quot;bulk mode&quot; when hive.hbase.bulkload=true. It adds functionality to MoveTask, allowing it to complete the bulkload as a post-job task. This task is always appended when &quot;bulk mode&quot; is detected.&lt;/p&gt;

&lt;p&gt;I&apos;ve tried to keep the modifications in hive-exec to a minimum. However, I was forced to introduce HBase as a dependency of that module. Please advise how I might add necessary hooks to move these code paths back into the hbase-handler module.&lt;/p&gt;</comment>
                            <comment id="13897329" author="ndimiduk" created="Tue, 11 Feb 2014 00:24:51 +0000"  >&lt;p&gt;Rebased onto trunk and includes a basic positive test with explain plan.&lt;/p&gt;</comment>
                            <comment id="13897332" author="ndimiduk" created="Tue, 11 Feb 2014 00:26:05 +0000"  >&lt;p&gt;regenerate correct the patch.&lt;/p&gt;</comment>
                            <comment id="13906146" author="ndimiduk" created="Wed, 19 Feb 2014 21:50:49 +0000"  >&lt;p&gt;This patch separates HFile generation from the new completebulkload task. Also adds a couple more test cases.&lt;/p&gt;</comment>
                            <comment id="13907336" author="ndimiduk" created="Thu, 20 Feb 2014 19:08:51 +0000"  >&lt;p&gt;I&apos;ve separated the HBaseStorageHandler changes into their own issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6473&quot; title=&quot;Allow writing HFiles via HBaseStorageHandler table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6473&quot;&gt;&lt;del&gt;HIVE-6473&lt;/del&gt;&lt;/a&gt;. When that ticket gets some attention, I&apos;ll rebase this patch onto that one. I hope that will make the needed SA hooks more apparent.&lt;/p&gt;</comment>
                            <comment id="13907499" author="hiveqa" created="Thu, 20 Feb 2014 21:06:03 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12629897/HIVE-2365.2.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12629897/HIVE-2365.2.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1429/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1429/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1429/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1429/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n &apos;&apos; ]]
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-1429/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;ql/src/test/results/clientnegative/authorization_set_role_neg2.q.out&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/SQLStdHiveAccessController.java&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ awk &apos;{print $2}&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/storage-handlers/hbase/target hcatalog/server-extensions/target hcatalog/core/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen contrib/target service/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target ql/src/test/results/clientnegative/authorization_role_grant.q.out ql/src/test/results/clientpositive/authorization_role_grant2.q.out ql/src/test/queries/clientnegative/authorization_role_grant.q ql/src/test/queries/clientpositive/authorization_role_grant2.q
+ svn update
D    ql/src/test/queries/clientpositive/authorization_view.q
U    ql/src/test/queries/clientpositive/authorization_view_sqlstd.q
D    ql/src/test/results/clientpositive/authorization_view.q.out
U    ql/src/test/results/clientpositive/authorization_view_sqlstd.q.out
U    ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
Updated external to revision 1570354.

Updated to revision 1570354.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12629897&lt;/p&gt;</comment>
                            <comment id="14006048" author="ndimiduk" created="Thu, 22 May 2014 15:50:43 +0000"  >&lt;p&gt;Rebased onto the latest patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6473&quot; title=&quot;Allow writing HFiles via HBaseStorageHandler table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6473&quot;&gt;&lt;del&gt;HIVE-6473&lt;/del&gt;&lt;/a&gt;. This way it&apos;s easier to see what&apos;s changed and how in order to use the MoveTask to handle LoadIncrementalHFiles. All three modified tests pass locally for me.&lt;/p&gt;</comment>
                            <comment id="14006059" author="ndimiduk" created="Thu, 22 May 2014 15:58:33 +0000"  >&lt;p&gt;Added an RB: &lt;a href=&quot;https://reviews.apache.org/r/21816/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/21816/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14007019" author="hiveqa" created="Fri, 23 May 2014 10:13:23 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12646319/HIVE-2365.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12646319/HIVE-2365.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/269/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/269/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/269/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/269/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-269/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-269/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-269/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;hbase-handler/src/test/queries/positive/hbase_bulk.m&apos;
Reverted &apos;hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&apos;
Reverted &apos;hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&apos;
++ awk &apos;{print $2}&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target hbase-handler/src/test/results/negative/generatehfiles_require_family_path.q.out hbase-handler/src/test/results/positive/hbase_handler_bulk.q.out hbase-handler/src/test/results/positive/hbase_bulk.q.out hbase-handler/src/test/queries/negative/generatehfiles_require_family_path.q hbase-handler/src/test/queries/positive/hbase_handler_bulk.q hbase-handler/src/test/queries/positive/hbase_bulk.q testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-minikdc/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/core/target hcatalog/streaming/target hcatalog/server-extensions/target hcatalog/hcatalog-pig-adapter/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target
+ svn update
U    ql/src/java/org/apache/hadoop/hive/ql/udf/ptf/MatchPath.java

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
Updated external to revision 1597052.

Updated to revision 1597052.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12646319&lt;/p&gt;</comment>
                            <comment id="14017257" author="ndimiduk" created="Tue, 3 Jun 2014 23:31:00 +0000"  >&lt;p&gt;Canceling patch until dependency &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6473&quot; title=&quot;Allow writing HFiles via HBaseStorageHandler table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6473&quot;&gt;&lt;del&gt;HIVE-6473&lt;/del&gt;&lt;/a&gt; is committed.&lt;/p&gt;</comment>
                            <comment id="14020637" author="ndimiduk" created="Sat, 7 Jun 2014 01:43:12 +0000"  >&lt;p&gt;Rebased onto &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6473&quot; title=&quot;Allow writing HFiles via HBaseStorageHandler table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6473&quot;&gt;&lt;del&gt;HIVE-6473&lt;/del&gt;&lt;/a&gt; patch v6.&lt;/p&gt;</comment>
                            <comment id="14025397" author="ashutoshc" created="Mon, 9 Jun 2014 17:28:22 +0000"  >&lt;p&gt;Move moveTask logic to OutputCommitter of HiveHFileOutputFormat. In HadoopShims::prepareJobOutput() method detect that its doing bulk load in HBase and set OC to HiveHFileOutputCommitter instead of NullOutputCommitter.&lt;/p&gt;</comment>
                            <comment id="14026097" author="hiveqa" created="Tue, 10 Jun 2014 03:50:22 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12648785/HIVE-2365.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12648785/HIVE-2365.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 5536 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_ppd_char
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.hcatalog.templeton.tool.TestTempletonUtils.testPropertiesParsing
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/419/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/419/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/419/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/419/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-419/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-419/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12648785&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12461587">HIVE-1295</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12696322">HIVE-6473</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12629897" name="HIVE-2365.2.patch.txt" size="48586" author="ndimiduk" created="Wed, 19 Feb 2014 21:50:49 +0000"/>
                            <attachment id="12648785" name="HIVE-2365.3.patch" size="44097" author="ndimiduk" created="Sat, 7 Jun 2014 01:43:12 +0000"/>
                            <attachment id="12646319" name="HIVE-2365.3.patch" size="43207" author="ndimiduk" created="Thu, 22 May 2014 15:50:43 +0000"/>
                            <attachment id="12627755" name="HIVE-2365.WIP.00.patch" size="38879" author="ndimiduk" created="Sat, 8 Feb 2014 00:35:58 +0000"/>
                            <attachment id="12628120" name="HIVE-2365.WIP.01.patch" size="43387" author="ndimiduk" created="Tue, 11 Feb 2014 00:26:05 +0000"/>
                            <attachment id="12628119" name="HIVE-2365.WIP.01.patch" size="445238" author="ndimiduk" created="Tue, 11 Feb 2014 00:24:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Aug 2011 23:10:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i014wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2366] Metastore upgrade scripts for HIVE-2246 do not migrate indexes nor rename the old COLUMNS table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2366</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The upgrade scripts for the hive metastore in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt; do not upgrade the indexes.  They also need to rename the old COLUMNS table after migration so that old clients will not accidentally access the COLUMNS table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518517">HIVE-2366</key>
            <summary>Metastore upgrade scripts for HIVE-2246 do not migrate indexes nor rename the old COLUMNS table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sohanjain">Sohan Jain</assignee>
                                    <reporter username="sohanjain">Sohan Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 21:42:23 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:12 +0000</updated>
                            <resolved>Fri, 4 Nov 2011 16:40:02 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13082743" author="jiraposter@reviews.apache.org" created="Wed, 10 Aug 2011 23:05:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1460/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1460/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Ning Zhang and Paul Yang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The upgrade scripts for the hive metastore in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt; do not upgrade the indexes. They also need to rename the old COLUMNS table after migration so that old clients will not accidentally access the COLUMNS table.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2366&quot; title=&quot;Metastore upgrade scripts for HIVE-2246 do not migrate indexes nor rename the old COLUMNS table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2366&quot;&gt;&lt;del&gt;HIVE-2366&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2366&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2366&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/scripts/upgrade/derby/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.derby.sql 1156396 &lt;br/&gt;
  trunk/metastore/scripts/upgrade/derby/008-REVERT-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.derby.sql 1156396 &lt;br/&gt;
  trunk/metastore/scripts/upgrade/mysql/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.mysql.sql 1156396 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1460/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1460/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested db migration by hand&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13141885" author="nzhang" created="Wed, 2 Nov 2011 03:37:19 +0000"  >&lt;p&gt;LGTM. Paul, can you double check?&lt;/p&gt;</comment>
                            <comment id="13143630" author="pauly" created="Fri, 4 Nov 2011 00:02:37 +0000"  >&lt;p&gt;I regenerated the patch based on trunk. Looks good to me as well.&lt;/p&gt;</comment>
                            <comment id="13144131" author="nzhang" created="Fri, 4 Nov 2011 16:31:22 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="13144138" author="nzhang" created="Fri, 4 Nov 2011 16:40:02 +0000"  >&lt;p&gt;Committed. Thanks Sohan!&lt;/p&gt;</comment>
                            <comment id="13144143" author="nzhang" created="Fri, 4 Nov 2011 16:44:03 +0000"  >&lt;p&gt;Backported to branch 0.8 as well. &lt;/p&gt;</comment>
                            <comment id="13144448" author="hudson" created="Fri, 4 Nov 2011 23:18:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1059 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1059/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1059/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2366&quot; title=&quot;Metastore upgrade scripts for HIVE-2246 do not migrate indexes nor rename the old COLUMNS table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2366&quot;&gt;&lt;del&gt;HIVE-2366&lt;/del&gt;&lt;/a&gt;. Metastore upgrade scripts for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt; do not migrate indexes nor rename the old COLUMNS table (Sohan Jain via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1197644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1197644&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/derby/008-REVERT-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/mysql/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13144489" author="hudson" created="Sat, 5 Nov 2011 00:41:25 +0000"  >&lt;p&gt;Integrated in Hive-0.8.0-SNAPSHOT-h0.21 #82 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/82/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/82/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2366&quot; title=&quot;Metastore upgrade scripts for HIVE-2246 do not migrate indexes nor rename the old COLUMNS table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2366&quot;&gt;&lt;del&gt;HIVE-2366&lt;/del&gt;&lt;/a&gt;. Metastore upgrade scripts for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt; do not migrate indexes nor rename the old COLUMNS table (Sohan Jain via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1197646&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1197646&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.8/metastore/scripts/upgrade/derby/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/metastore/scripts/upgrade/derby/008-REVERT-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.derby.sql&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.8/metastore/scripts/upgrade/mysql/008-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt;.mysql.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12518531">HIVE-2367</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12512385">HIVE-2246</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490048" name="HIVE-2366.1.patch" size="7147" author="sohanjain" created="Wed, 10 Aug 2011 23:03:04 +0000"/>
                            <attachment id="12502239" name="HIVE-2366.2.patch" size="7153" author="pauly" created="Fri, 4 Nov 2011 00:02:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Aug 2011 23:05:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2367] Indexes&apos; storage descriptors&apos; columns are not deduped, and altering an index leaves behind an unused storage descriptor</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2367</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The metastore migration by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2246&quot; title=&quot;Dedupe tables&amp;#39; column schemas from partitions in the metastore db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2246&quot;&gt;&lt;del&gt;HIVE-2246&lt;/del&gt;&lt;/a&gt; does not dedupe the COLUMNS information for Indexes.  That is, the IDXS table has a Storage Descriptor that always points to a new Column Descriptor, which is unlikely shared by any other storage descriptor.&lt;/p&gt;

&lt;p&gt;Therefore, when altering an index, a new storage Descriptor and column descriptor are created.  No other objects will reference the old storage descriptor and column descriptor, but they will persist in the metastore db.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518531">HIVE-2367</key>
            <summary>Indexes&apos; storage descriptors&apos; columns are not deduped, and altering an index leaves behind an unused storage descriptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sohanjain">Sohan Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 23:10:33 +0000</created>
                <updated>Mon, 19 Sep 2011 14:58:52 +0000</updated>
                                                                            <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13107879" author="chinnalalam" created="Mon, 19 Sep 2011 14:58:52 +0000"  >&lt;p&gt;@Sohan:&lt;br/&gt;
I am trying to fix this issue but i am not able to reproduce this issue. I ran the below queries&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;create table grade (userid string,name string,maths int,physics int,chemistry int) ROW FORMAT DELIMITED FIELDS TERMINATED BY &apos;\t&apos;;&lt;/p&gt;

&lt;p&gt;load data local inpath &apos;/home/chinna/data/grade1.txt&apos; into table grade;&lt;/p&gt;

&lt;p&gt;CREATE INDEX grade_index ON TABLE grade(name)as &apos;compact&apos; WITH DEFERRED REBUILD;&lt;/p&gt;

&lt;p&gt;ALTER INDEX grade_index ON grade REBUILD;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After the executioon of above queries 3 storage descriptors are created.&lt;br/&gt;
After the execution of above queries, if ALTER INDEX query is executed the storage descriptors number is not increased.&lt;/p&gt;

&lt;p&gt;Pls check this and post ur queries.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12518517">HIVE-2366</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12512385">HIVE-2246</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Sep 2011 14:58:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>metastore, schema, IDXS, index, column descriptor</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2368] Slow dropping of partitions caused by full listing of storage descriptors</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2368</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;To determine if a column descriptor is unused, we call listStorageDescriptorsWithCD(), which may return a big list of SDs.  This can severely slow down dropping partitions.&lt;/p&gt;

&lt;p&gt;We can add a maximum number of SDs to return, and just ask for 1 SD, since we are just doing an existential check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518535">HIVE-2368</key>
            <summary>Slow dropping of partitions caused by full listing of storage descriptors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sohanjain">Sohan Jain</assignee>
                                    <reporter username="sohanjain">Sohan Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 23:28:40 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:07 +0000</updated>
                            <resolved>Tue, 25 Oct 2011 20:15:23 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13082765" author="jiraposter@reviews.apache.org" created="Wed, 10 Aug 2011 23:32:28 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1462/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1462/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;To determine if a column descriptor is unused, we call listStorageDescriptorsWithCD(), which may return a big list of SDs. This can severely slow down dropping partitions.&lt;/p&gt;

&lt;p&gt;We can add a maximum number of SDs to return, and just ask for 1 SD, since we are just doing an existential check.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; title=&quot;Slow dropping of partitions caused by full listing of storage descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2368&quot;&gt;&lt;del&gt;HIVE-2368&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2368&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java 1156401 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1462/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1462/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13132188" author="nzhang" created="Thu, 20 Oct 2011 23:20:17 +0000"  >&lt;p&gt;@Paul Yang, this looks good to me. Can you also review the patch? We&apos;ll need this soon. &lt;/p&gt;</comment>
                            <comment id="13132215" author="pauly" created="Thu, 20 Oct 2011 23:45:21 +0000"  >&lt;p&gt;The patch was good, will test and commit.&lt;/p&gt;</comment>
                            <comment id="13135386" author="pauly" created="Tue, 25 Oct 2011 20:14:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13135387" author="pauly" created="Tue, 25 Oct 2011 20:15:46 +0000"  >&lt;p&gt;Committed. Thanks Sohan!&lt;/p&gt;</comment>
                            <comment id="13135623" author="hudson" created="Wed, 26 Oct 2011 01:56:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1034 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1034/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1034/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; title=&quot;Slow dropping of partitions caused by full listing of storage descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2368&quot;&gt;&lt;del&gt;HIVE-2368&lt;/del&gt;&lt;/a&gt;. Slow dropping of partitions caused by full listing of storage descriptors (Sohan Jain via pauly)&lt;/p&gt;

&lt;p&gt;pauly : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188886&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188886&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13138065" author="pauly" created="Fri, 28 Oct 2011 05:49:20 +0000"  >&lt;p&gt;Backporting this to branch-0.8 as well.&lt;/p&gt;</comment>
                            <comment id="13147389" author="hudson" created="Thu, 10 Nov 2011 00:33:16 +0000"  >&lt;p&gt;Integrated in Hive-0.8.0-SNAPSHOT-h0.21 #89 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/89/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/89/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; title=&quot;Slow dropping of partitions caused by full listing of storage descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2368&quot;&gt;&lt;del&gt;HIVE-2368&lt;/del&gt;&lt;/a&gt;. Slow dropping of partitions caused by full listing of storage descriptors (Sohan Jain via pauly)&lt;/p&gt;

&lt;p&gt;pauly : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199915&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199915&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.8/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12512385">HIVE-2246</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490053" name="HIVE-2368.1.patch" size="1818" author="sohanjain" created="Wed, 10 Aug 2011 23:29:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Aug 2011 23:32:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123839</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2369] Minor typo in error message in HiveConnection.java (JDBC)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2369</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There is a minor typo issue in HiveConnection.java (jdbc) :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SQLException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not establish connecton to &quot;&lt;/span&gt;
            + uri + &lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt; + e.getMessage(), &lt;span class=&quot;code-quote&quot;&gt;&quot;08S01&quot;&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems like there&apos;s a &quot;i&quot; missing.&lt;/p&gt;

&lt;p&gt;I know it&apos;s a very minor typo but I report it anyway. I won&apos;t attach a patch because it would be too long for me to SVN checkout just for 1 letter.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12518613">HIVE-2369</key>
            <summary>Minor typo in error message in HiveConnection.java (JDBC)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cnotin">Cl&#233;ment Notin</assignee>
                                    <reporter username="cnotin">Cl&#233;ment Notin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Aug 2011 17:42:30 +0000</created>
                <updated>Tue, 23 May 2017 11:01:18 +0000</updated>
                            <resolved>Wed, 7 Sep 2011 03:04:42 +0000</resolved>
                                    <version>0.7.1</version>
                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="120">2m</timeoriginalestimate>
                            <timeestimate seconds="120">2m</timeestimate>
                                        <comments>
                            <comment id="13083277" author="cnotin" created="Thu, 11 Aug 2011 17:48:07 +0000"  >&lt;p&gt;Easy patch&lt;/p&gt;</comment>
                            <comment id="13083279" author="cnotin" created="Thu, 11 Aug 2011 17:49:07 +0000"  >&lt;p&gt;I wrote the patch on GitHub and made a pull request. You can get it there.&lt;/p&gt;</comment>
                            <comment id="13083310" author="jghoman" created="Thu, 11 Aug 2011 18:14:53 +0000"  >&lt;p&gt;Thanks for doing this.  Apache keeps all of its software in a SVN repository, so we need all the patches uploaded to JIRA in diff format (with --no-prefix if generated from git, to be compatible).  &lt;/p&gt;</comment>
                            <comment id="13084438" author="cnotin" created="Fri, 12 Aug 2011 22:53:41 +0000"  >&lt;p&gt;Index: jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java	(revision 1157240)&lt;br/&gt;
+++ jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java	(working copy)&lt;br/&gt;
@@ -95,7 +95,7 @@&lt;br/&gt;
       try &lt;/p&gt;
{
         transport.open();
       }
&lt;p&gt; catch (TTransportException e) &lt;/p&gt;
{
-        throw new SQLException(&quot;Could not establish connecton to &quot;
+        throw new SQLException(&quot;Could not establish connection to &quot;
             + uri + &quot;: &quot; + e.getMessage(), &quot;08S01&quot;);
       }
&lt;p&gt;     }&lt;/p&gt;</comment>
                            <comment id="13084440" author="cnotin" created="Fri, 12 Aug 2011 22:54:36 +0000"  >&lt;p&gt;Patch&lt;/p&gt;</comment>
                            <comment id="13098353" author="jvs" created="Tue, 6 Sep 2011 21:06:06 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13098567" author="jvs" created="Wed, 7 Sep 2011 03:04:42 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Cl&#233;ment!&lt;/p&gt;</comment>
                            <comment id="13098758" author="hudson" created="Wed, 7 Sep 2011 08:33:07 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #938 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/938/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/938/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2369&quot; title=&quot;Minor typo in error message in HiveConnection.java (JDBC)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2369&quot;&gt;&lt;del&gt;HIVE-2369&lt;/del&gt;&lt;/a&gt;. Minor typo in error message in HiveConnection.java (JDBC)&lt;br/&gt;
(Clement Notin via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1165985&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1165985&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16021036" author="githubbot" created="Tue, 23 May 2017 11:01:18 +0000"  >&lt;p&gt;Github user ClementNotin closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/3&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490296" name="HIVE-2369.patch" size="614" author="cnotin" created="Fri, 12 Aug 2011 22:54:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Aug 2011 18:14:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2370] Improve RCFileCat performance significantly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2370</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The rcfilecat utility is extraordinarily slow: the throughput can be &amp;lt; 0.5 MB/s of compressed RCFile.  We can implement much faster version to enable faster export of data from Hive.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518649">HIVE-2370</key>
            <summary>Improve RCFileCat performance significantly</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tarmstrong">Tim Armstrong</assignee>
                                    <reporter username="tarmstrong">Tim Armstrong</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Thu, 11 Aug 2011 21:38:08 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:13 +0000</updated>
                            <resolved>Sat, 13 Aug 2011 05:14:56 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13083765" author="jiraposter@reviews.apache.org" created="Thu, 11 Aug 2011 22:44:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch improves rcfilecat performance enormously: throughput increased from 0.32MB/s to 5.15MB/s on one benchmark: 16x. There were a number of improvements I made to get to this performance:&lt;/p&gt;

&lt;p&gt;Initial:&lt;br/&gt;
0.32 MB/s&lt;/p&gt;

&lt;p&gt;Change System.out to use bigger buffer (not line buffered)&lt;br/&gt;
1.7MB/s&lt;/p&gt;

&lt;p&gt;Unchecked Get:&lt;br/&gt;
1.75MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to construct each row before writing output.&lt;br/&gt;
3.7MB/s&lt;/p&gt;

&lt;p&gt;Streamline decoding:&lt;br/&gt;
4.16 MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to buffer multiple lines:&lt;br/&gt;
5 MB/s&lt;/p&gt;

&lt;p&gt;Tuning buffer sizes:&lt;br/&gt;
5.15 MB/s&lt;/p&gt;


&lt;p&gt;I also added a --verbose mode which writes progress updates to stderr.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; title=&quot;Improve RCFileCat performance significantly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2370&quot;&gt;&lt;del&gt;HIVE-2370&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2370&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java 1156839 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1474/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Used diff to check output was same as old version of RCFileCat&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Tim&lt;/p&gt;
</comment>
                            <comment id="13083766" author="tarmstrong" created="Thu, 11 Aug 2011 22:45:08 +0000"  >&lt;p&gt;Diff is available on reviewboard:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13083768" author="jiraposter@reviews.apache.org" created="Thu, 11 Aug 2011 22:46:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-11 22:44:48.620762)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Summary (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch improves rcfilecat performance enormously: throughput increased from 0.32MB/s to 5.15MB/s on one benchmark: 16x. There were a number of improvements I made to get to this performance:&lt;/p&gt;

&lt;p&gt;Initial:&lt;br/&gt;
0.32 MB/s&lt;/p&gt;

&lt;p&gt;Change System.out to use bigger buffer (not line buffered)&lt;br/&gt;
1.7MB/s&lt;/p&gt;

&lt;p&gt;Unchecked Get:&lt;br/&gt;
1.75MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to construct each row before writing output.&lt;br/&gt;
3.7MB/s&lt;/p&gt;

&lt;p&gt;Streamline decoding:&lt;br/&gt;
4.16 MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to buffer multiple lines:&lt;br/&gt;
5 MB/s&lt;/p&gt;

&lt;p&gt;Tuning buffer sizes:&lt;br/&gt;
5.15 MB/s&lt;/p&gt;


&lt;p&gt;I also added a --verbose mode which writes progress updates to stderr.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; title=&quot;Improve RCFileCat performance significantly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2370&quot;&gt;&lt;del&gt;HIVE-2370&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2370&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java 1156839 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1474/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Used diff to check output was same as old version of RCFileCat&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Tim&lt;/p&gt;
</comment>
                            <comment id="13083792" author="jiraposter@reviews.apache.org" created="Thu, 11 Aug 2011 23:08:35 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1474/#review1412&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/#review1412&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Great job! Does this number indicate the read and write speed or just the read (including decompression) part? &lt;/p&gt;


&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1474/#comment3266&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/#comment3266&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    can you remove all these TABs?&lt;/p&gt;



&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1474/#comment3267&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/#comment3267&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    make 2048 a static constant variable. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-11 22:44:48, Tim Armstrong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-11 22:44:48)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch improves rcfilecat performance enormously: throughput increased from 0.32MB/s to 5.15MB/s on one benchmark: 16x. There were a number of improvements I made to get to this performance:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Initial:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;0.32 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Change System.out to use bigger buffer (not line buffered)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;1.7MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Unchecked Get:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;1.75MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Use StringBuilder to construct each row before writing output.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;3.7MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Streamline decoding:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;4.16 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Use StringBuilder to buffer multiple lines:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;5 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tuning buffer sizes:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;5.15 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also added a --verbose mode which writes progress updates to stderr.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; title=&quot;Improve RCFileCat performance significantly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2370&quot;&gt;&lt;del&gt;HIVE-2370&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2370&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java 1156839 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1474/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Used diff to check output was same as old version of RCFileCat&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tim&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13083835" author="tarmstrong" created="Fri, 12 Aug 2011 00:16:30 +0000"  >&lt;p&gt;I&apos;m not sure exactly what you mean about read and write speeds.&lt;/p&gt;

&lt;p&gt;I tested it reading a file off a remote DFS instance, redirecting the output to a local file.  The time spend writing the output is negligible.  &lt;/p&gt;

&lt;p&gt;The largest part of time is spent doing unicode conversions to get it into a Java CharBuffer, and then writing it to the console.  Decompression and deserialisation also takes up a large part of CPU time.&lt;/p&gt;</comment>
                            <comment id="13083839" author="jiraposter@reviews.apache.org" created="Fri, 12 Aug 2011 00:23:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-12 00:22:11.295461)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Stripped out whitespace at end of line of old version.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch improves rcfilecat performance enormously: throughput increased from 0.32MB/s to 5.15MB/s on one benchmark: 16x. There were a number of improvements I made to get to this performance:&lt;/p&gt;

&lt;p&gt;Initial:&lt;br/&gt;
0.32 MB/s&lt;/p&gt;

&lt;p&gt;Change System.out to use bigger buffer (not line buffered)&lt;br/&gt;
1.7MB/s&lt;/p&gt;

&lt;p&gt;Unchecked Get:&lt;br/&gt;
1.75MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to construct each row before writing output.&lt;br/&gt;
3.7MB/s&lt;/p&gt;

&lt;p&gt;Streamline decoding:&lt;br/&gt;
4.16 MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to buffer multiple lines:&lt;br/&gt;
5 MB/s&lt;/p&gt;

&lt;p&gt;Tuning buffer sizes:&lt;br/&gt;
5.15 MB/s&lt;/p&gt;


&lt;p&gt;I also added a --verbose mode which writes progress updates to stderr.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; title=&quot;Improve RCFileCat performance significantly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2370&quot;&gt;&lt;del&gt;HIVE-2370&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2370&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java 1156839 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1474/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Used diff to check output was same as old version of RCFileCat&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Tim&lt;/p&gt;
</comment>
                            <comment id="13083870" author="jiraposter@reviews.apache.org" created="Fri, 12 Aug 2011 01:55:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1474/#review1414&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/#review1414&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1474/#comment3271&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/#comment3271&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This should probably be done after we finish processing the command line options.&lt;/p&gt;



&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1474/#comment3269&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/#comment3269&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &quot;1024*1024&quot; should be replaced with a static final variable.&lt;/p&gt;



&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1474/#comment3270&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/#comment3270&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Another constant that should be converted to a static final.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-12 00:22:11, Tim Armstrong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-12 00:22:11)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch improves rcfilecat performance enormously: throughput increased from 0.32MB/s to 5.15MB/s on one benchmark: 16x. There were a number of improvements I made to get to this performance:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Initial:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;0.32 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Change System.out to use bigger buffer (not line buffered)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;1.7MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Unchecked Get:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;1.75MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Use StringBuilder to construct each row before writing output.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;3.7MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Streamline decoding:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;4.16 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Use StringBuilder to buffer multiple lines:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;5 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tuning buffer sizes:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;5.15 MB/s&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also added a --verbose mode which writes progress updates to stderr.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; title=&quot;Improve RCFileCat performance significantly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2370&quot;&gt;&lt;del&gt;HIVE-2370&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2370&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java 1156839 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1474/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Used diff to check output was same as old version of RCFileCat&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tim&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13083903" author="jiraposter@reviews.apache.org" created="Fri, 12 Aug 2011 03:58:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-12 03:56:39.298860)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He, Ning Zhang, and namit jain.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Turned magic numbers into named constants, enable output buffering only after arguments processed.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch improves rcfilecat performance enormously: throughput increased from 0.32MB/s to 5.15MB/s on one benchmark: 16x. There were a number of improvements I made to get to this performance:&lt;/p&gt;

&lt;p&gt;Initial:&lt;br/&gt;
0.32 MB/s&lt;/p&gt;

&lt;p&gt;Change System.out to use bigger buffer (not line buffered)&lt;br/&gt;
1.7MB/s&lt;/p&gt;

&lt;p&gt;Unchecked Get:&lt;br/&gt;
1.75MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to construct each row before writing output.&lt;br/&gt;
3.7MB/s&lt;/p&gt;

&lt;p&gt;Streamline decoding:&lt;br/&gt;
4.16 MB/s&lt;/p&gt;

&lt;p&gt;Use StringBuilder to buffer multiple lines:&lt;br/&gt;
5 MB/s&lt;/p&gt;

&lt;p&gt;Tuning buffer sizes:&lt;br/&gt;
5.15 MB/s&lt;/p&gt;


&lt;p&gt;I also added a --verbose mode which writes progress updates to stderr.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; title=&quot;Improve RCFileCat performance significantly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2370&quot;&gt;&lt;del&gt;HIVE-2370&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2370&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java 1156839 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1474/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1474/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Used diff to check output was same as old version of RCFileCat&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Tim&lt;/p&gt;
</comment>
                            <comment id="13084320" author="nzhang" created="Fri, 12 Aug 2011 19:32:49 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="13084539" author="nzhang" created="Sat, 13 Aug 2011 05:14:56 +0000"  >&lt;p&gt;Committed. Thanks Tim!&lt;/p&gt;</comment>
                            <comment id="13084781" author="hudson" created="Sun, 14 Aug 2011 03:35:37 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #893 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/893/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/893/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2370&quot; title=&quot;Improve RCFileCat performance significantly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2370&quot;&gt;&lt;del&gt;HIVE-2370&lt;/del&gt;&lt;/a&gt;. Improve RCFileCat performance significantly (Tim Armstrong via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1157323&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1157323&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/RCFileCat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490183" name="rcfilecat_2011-08-11.patch" size="5796" author="tarmstrong" created="Thu, 11 Aug 2011 22:44:22 +0000"/>
                            <attachment id="12490212" name="rcfilecat_2011-08-11b.patch" size="6593" author="tarmstrong" created="Fri, 12 Aug 2011 03:56:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Aug 2011 22:44:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2371] sample_islocalmode_hook.q test is non-deterministic</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2371</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12518660">HIVE-2371</key>
            <summary>sample_islocalmode_hook.q test is non-deterministic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Aug 2011 00:02:25 +0000</created>
                <updated>Sun, 14 Aug 2011 01:02:08 +0000</updated>
                            <resolved>Sun, 14 Aug 2011 01:02:08 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13083837" author="jiraposter@reviews.apache.org" created="Fri, 12 Aug 2011 00:17:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1477/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1477/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adding order by to the two queries used to create the test tables makes the test deterministic.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2371&quot; title=&quot;sample_islocalmode_hook.q test is non-deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2371&quot;&gt;&lt;del&gt;HIVE-2371&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2371&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2371&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/test/queries/clientpositive/sample_islocalmode_hook.q 1156861 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/sample_islocalmode_hook.q.out 1156861 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1477/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1477/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I ran the test and verified it passed.&lt;/p&gt;

&lt;p&gt;I also had a person who had been seeing the test fail do to non-determinism run the test and verify that it passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13084755" author="kevinwilfong" created="Sun, 14 Aug 2011 01:01:55 +0000"  >&lt;p&gt;This was committed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2322&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2322&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490198" name="HIVE-2371.1.patch.txt" size="4770" author="kevinwilfong" created="Fri, 12 Aug 2011 00:12:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Aug 2011 00:17:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2372] java.io.IOException: error=7, Argument list too long</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2372</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I execute a huge query on a table with a lot of 2-level partitions. There is a perl reducer in my query. Maps worked ok, but every reducer fails with the following exception:&lt;/p&gt;

&lt;p&gt;2011-08-11 04:58:29,865 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: Executing &lt;span class=&quot;error&quot;&gt;&amp;#91;/usr/bin/perl, &amp;lt;reducer.pl&amp;gt;, &amp;lt;my_argument&amp;gt;&amp;#93;&lt;/span&gt;&lt;br/&gt;
2011-08-11 04:58:29,866 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: tablename=null&lt;br/&gt;
2011-08-11 04:58:29,866 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: partname=null&lt;br/&gt;
2011-08-11 04:58:29,866 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: alias=null&lt;br/&gt;
2011-08-11 04:58:29,935 FATAL ExecReducer: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row (tag=0) {&quot;key&quot;:&lt;/p&gt;
{&quot;reducesinkkey0&quot;:129390185139228,&quot;reducesinkkey1&quot;:&quot;00008AF10000000063CA6F&quot;}
&lt;p&gt;,&quot;value&quot;:&lt;/p&gt;
{&quot;_col0&quot;:&quot;00008AF10000000063CA6F&quot;,&quot;_col1&quot;:&quot;2011-07-27 22:48:52&quot;,&quot;_col2&quot;:129390185139228,&quot;_col3&quot;:2006,&quot;_col4&quot;:4100,&quot;_col5&quot;:&quot;10017388=6&quot;,&quot;_col6&quot;:1063,&quot;_col7&quot;:&quot;NULL&quot;,&quot;_col8&quot;:&quot;address.com&quot;,&quot;_col9&quot;:&quot;NULL&quot;,&quot;_col10&quot;:&quot;NULL&quot;}
&lt;p&gt;,&quot;alias&quot;:0}&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:256)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)&lt;br/&gt;
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:268)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:262)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Cannot initialize ScriptOperator&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ScriptOperator.processOp(ScriptOperator.java:320)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExtractOperator.processOp(ExtractOperator.java:45)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:247)&lt;br/&gt;
	... 7 more&lt;br/&gt;
Caused by: java.io.IOException: Cannot run program &quot;/usr/bin/perl&quot;: java.io.IOException: error=7, Argument list too long&lt;br/&gt;
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ScriptOperator.processOp(ScriptOperator.java:279)&lt;br/&gt;
	... 15 more&lt;br/&gt;
Caused by: java.io.IOException: java.io.IOException: error=7, Argument list too long&lt;br/&gt;
	at java.lang.UNIXProcess.&amp;lt;init&amp;gt;(UNIXProcess.java:148)&lt;br/&gt;
	at java.lang.ProcessImpl.start(ProcessImpl.java:65)&lt;br/&gt;
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)&lt;br/&gt;
	... 16 more&lt;/p&gt;

&lt;p&gt;It seems to me, I found the cause. ScriptOperator.java puts a lot of configs as environment variables to the child reduce process. One of variables is mapred.input.dir, which in my case more than 150KB. There are a huge amount of input directories in this variable. In short, the problem is that Linux (up to 2.6.23 kernel version) limits summary size of environment variables for child processes to 132KB. This problem could be solved by upgrading the kernel. But strings limitations still be 132KB per string in environment variable. So such huge variable doesn&apos;t work even on my home computer (2.6.32). You can read more information on (&lt;a href=&quot;http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;For now all our work has been stopped because of this problem and I can&apos;t find the solution. The only solution, which seems to me more reasonable is to get rid of this variable in reducers.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12518679">HIVE-2372</key>
            <summary>java.io.IOException: error=7, Argument list too long</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sergeant">Sergey Tryuber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Aug 2011 09:07:34 +0000</created>
                <updated>Wed, 11 Jun 2014 19:53:40 +0000</updated>
                            <resolved>Fri, 25 May 2012 23:55:02 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13089459" author="sergeant" created="Tue, 23 Aug 2011 13:33:13 +0000"  >&lt;p&gt;I&apos;ve added a quick fix on our cluster. The fix just erases mapred_input_dir from environment of child process.&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/exec/ScriptOperator.java:&lt;br/&gt;
         ProcessBuilder pb = new ProcessBuilder(wrappedCmdArgs);&lt;br/&gt;
         Map&amp;lt;String, String&amp;gt; env = pb.environment();&lt;br/&gt;
         addJobConfToEnvironment(hconf, env);&lt;br/&gt;
+&lt;br/&gt;
+        LOG.info(&quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2372&quot; title=&quot;java.io.IOException: error=7, Argument list too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2372&quot;&gt;&lt;del&gt;HIVE-2372&lt;/del&gt;&lt;/a&gt;. HOTFIX. Removing mapred_input_dir from environment variables&quot;);&lt;br/&gt;
+        env.remove(&quot;mapred_input_dir&quot;);&lt;br/&gt;
+&lt;br/&gt;
         env.put(safeEnvVarName(HiveConf.ConfVars.HIVEALIAS.varname), String&lt;br/&gt;
             .valueOf(alias));&lt;/p&gt;

&lt;p&gt;All queries are work fine now. If anyone proposes more correct decision (add a property which will disable this property), I&apos;ll try to make code changes and prepare a patch.&lt;/p&gt;</comment>
                            <comment id="13129442" author="he yongqiang" created="Tue, 18 Oct 2011 02:56:50 +0000"  >&lt;p&gt;Sergey Tryuber, can you put a patch?&lt;/p&gt;</comment>
                            <comment id="13129560" author="sdong" created="Tue, 18 Oct 2011 07:18:03 +0000"  >&lt;p&gt;Instead of simply removing the key, we should truncate the value to a shorter one if it is too long.&lt;/p&gt;</comment>
                            <comment id="13130793" author="sergeant" created="Wed, 19 Oct 2011 17:24:29 +0000"  >&lt;p&gt;Siying, what the limit we should set on this property? Limiting it to 132KB won&apos;t work on kernels prior to 2.6.23, because there are other properties exist and sum limit will exceed 132KB threshold for those kernels. May be we could introduce on more property that (if set to true) will remove the key?&lt;/p&gt;</comment>
                            <comment id="13134710" author="sdong" created="Tue, 25 Oct 2011 03:05:08 +0000"  >&lt;p&gt;I&apos;m thinking a very short limit, like 1024 chars or so. A longer chars won&apos;t get user any information.&lt;/p&gt;</comment>
                            <comment id="13135111" author="appodictic" created="Tue, 25 Oct 2011 14:56:29 +0000"  >&lt;p&gt;I am surprised no one has ran into this sooner. I had assumed the limit was much shorter. Streaming is &apos;a neat hack&apos; but with the UDF/UDAF frameworks I have never been convinced it is needed. Most often I see use it improperly to make hacky map side joins etc. Maybe your real problem is having to many input files and you should merge your input first, or use bucketing instead of two level partitioning.   &lt;/p&gt;</comment>
                            <comment id="13139745" author="sergeant" created="Sun, 30 Oct 2011 20:32:41 +0000"  >&lt;p&gt;Edward, firstly, I also was the same problems/questions on other forums, unsolved. The issue is that we need hourly based access to our data in HDFS. Sometimes, we just need to process couple of ours quickly, and, sometimes, we need to process several monthes of data. We don&apos;t use &quot;hacky map side joins&quot;. Our custom reducer performs only aggregations (quite complicated), nothing more.&lt;br/&gt;
Hive manages all our workflow quite well. Actually, this still be our only problem and we hope to use Hive later on.&lt;br/&gt;
Ok, what&apos;s the final decision: cut this option&apos;s lenght to 1,5,10KB? Or imply another option which enables this option removing from environment variables?&lt;/p&gt;</comment>
                            <comment id="13173554" author="lramos85" created="Tue, 20 Dec 2011 22:11:37 +0000"  >&lt;p&gt;We are running into the same problem here, my list of input files is even larger. In my case we are using a TRANSFORM() python script to convert the output of the reducers to csv format. I confirmed that lowering the number of input files works by specifying a limited partition or merging the inputs. Either way, I don&apos;t think it should pass that entire list through environment variables. I can go with an option to remove that.&lt;/p&gt;</comment>
                            <comment id="13173795" author="lramos85" created="Wed, 21 Dec 2011 03:00:39 +0000"  >&lt;p&gt;I just wanted to note, that in my case where I use a stream script for TRANSFORM, which only happens at the very end, a workaround was to simply force it to have 2 stages so that by the last stage, the input list has been merged. I understand that REDUCE scripts will work differently. &lt;/p&gt;

&lt;p&gt;Also +1 on Sergey Triuber quick fix. But might not be a solid solution. Thanks.&lt;/p&gt;</comment>
                            <comment id="13188263" author="sdong" created="Wed, 18 Jan 2012 03:59:03 +0000"  >&lt;p&gt;is there anyone still working on this?&lt;/p&gt;</comment>
                            <comment id="13188326" author="lramos85" created="Wed, 18 Jan 2012 08:05:01 +0000"  >&lt;p&gt;That&apos;s a good question, if anyone official wants to vote on a patch or Sergey Tryuber HOTFIX. &lt;/p&gt;

&lt;p&gt;After applying the HOTFIX and running &quot;ant test&quot; I didn&apos;t see any issues. And this definitely fixed our current problems with the limitation. +1 Thanks.&lt;/p&gt;</comment>
                            <comment id="13194602" author="sergeant" created="Fri, 27 Jan 2012 10:46:27 +0000"  >&lt;p&gt;Well, guys, give me a week to prepare a patch (just have no time right now) that will truncate this variable to 20KB if string length is too large (I&apos;m going to hardcode this value) and prints WARN to log if such thing happend. &lt;/p&gt;</comment>
                            <comment id="13197887" author="sergeant" created="Wed, 1 Feb 2012 15:00:41 +0000"  >&lt;p&gt;Patch, 1st version&lt;/p&gt;</comment>
                            <comment id="13197895" author="sergeant" created="Wed, 1 Feb 2012 15:09:10 +0000"  >&lt;p&gt;I&apos;ve attached a patch (as an attachment, not by &quot;submit patch&quot;, as described on wiki HowToContribute). When I cloned trunk and run tests without any changes, for about 5 hours, there was several test errors((( Build and testing with my changes showed the same errors count. So, please, review this patch and make remarks.&lt;/p&gt;</comment>
                            <comment id="13199411" author="sdong" created="Fri, 3 Feb 2012 00:34:11 +0000"  >&lt;p&gt;Is 2048 per value too long?&lt;/p&gt;</comment>
                            <comment id="13199587" author="sergeant" created="Fri, 3 Feb 2012 08:25:25 +0000"  >&lt;p&gt;Limitation in my patch is 20KB, I don&apos;t think, that smaller limit is good idea, because in some cases user might be really want to set long values. Actually, in some cases 2KB (as you proposed) is even not enough for for &quot;hive.query.string&quot;. But, of course, if you insist, I&apos;ll set limitation to 1KB, just let me know about it.&lt;/p&gt;</comment>
                            <comment id="13203105" author="sdong" created="Wed, 8 Feb 2012 01:30:27 +0000"  >&lt;p&gt;How about make it configurable? (though I hate to add more and more parameters.)&lt;/p&gt;</comment>
                            <comment id="13203684" author="sergeant" created="Wed, 8 Feb 2012 15:54:54 +0000"  >&lt;p&gt;That&apos;s was my initial idea (you even can see that in my comments). But after that I&apos;ve changed my mind because I also &quot;hate to add more and more parameters&quot;. This bug affects may be 0.001% of Hive users and I can&apos;t figure out the case of those 0.001% users when 20KB is not enough. Make this limit less then 20KB also has no sense, because that&apos;s not a bottleneck on modern environment. So, introducing one more useless option, prepare documentation for it and compel new Hive users to read/understand it... &lt;/p&gt;</comment>
                            <comment id="13204037" author="lramos85" created="Wed, 8 Feb 2012 21:54:40 +0000"  >&lt;p&gt;As a hive user affected by this bug, I would have no problem with truncating the variable to 20KB. That should be enough to give you an idea of the input list. 2KB sounds low to me.&lt;/p&gt;</comment>
                            <comment id="13214997" author="appodictic" created="Thu, 23 Feb 2012 20:06:23 +0000"  >&lt;p&gt;Lets get this committed. I think we should introduce the variables. In the normal case we want someone to get all the input they would expect. If they run into an exception they can turn the variable on to get out of the problem. &lt;/p&gt;

&lt;p&gt;Lets do this. Rebase your patch and add hive.scriptoperator.truncate.env=true|false to control this feature. Default it to false which would be how hive works now. I will review and commit. &lt;/p&gt;</comment>
                            <comment id="13217938" author="sergeant" created="Tue, 28 Feb 2012 06:08:22 +0000"  >&lt;p&gt;Ok, got your point. Edward, could you answer some questions:&lt;br/&gt;
1. As I understood from sources, there is no hive-default.xml (it is deprecated)? &lt;br/&gt;
2. I&apos;m going to add one more entry to HiveConf#ConfVars. Is that right way? &lt;br/&gt;
3. Where is place (in code base) for inserting comments for properties, or it just hive wiki? &lt;/p&gt;</comment>
                            <comment id="13218339" author="appodictic" created="Tue, 28 Feb 2012 16:40:16 +0000"  >&lt;p&gt;1. There is a hive-default.xml.template you should add it there along with a short description&lt;br/&gt;
2. Yes adding a ConfVar is the right way&lt;br/&gt;
3. You can add some inline comments if you wish although generally if the property name is chosen correctly it usually explains itself.&lt;/p&gt;</comment>
                            <comment id="13219942" author="sergeant" created="Thu, 1 Mar 2012 09:35:54 +0000"  >&lt;p&gt;Patch that has hive.script.operator.truncate.env option that enables truncation.&lt;/p&gt;</comment>
                            <comment id="13219946" author="sergeant" created="Thu, 1 Mar 2012 09:45:53 +0000"  >&lt;p&gt;Edward, I&apos;ve named my option hive.script.operator.truncate.env (instead of hive.scriptoperator.truncate.env as you proposed), to be analogous of hive.script.operator.id.env.var. Actually, I have a question, why do we have hive-default.xml.template if all options (their names and default values) are hardcoded in ConfVar?&lt;/p&gt;

&lt;p&gt;Also, as I wrote in previous posts, there was some Hive tests failures in my &quot;ant test&quot; before. I just want to share this information with other developers: this problem was solved by changing locale in my system from Russian to EN. So, I have all tests successfully completed.&lt;/p&gt;

&lt;p&gt;And the last notice. Edward, could you add *.iml files to gitignore. I use Idea as IDE and it creates all those files.&lt;/p&gt;</comment>
                            <comment id="13262330" author="appodictic" created="Thu, 26 Apr 2012 02:36:11 +0000"  >&lt;p&gt;I will take take a look at this. You should mark as match available when you are ready for review.&lt;/p&gt;</comment>
                            <comment id="13283808" author="appodictic" created="Fri, 25 May 2012 23:17:02 +0000"  >&lt;p&gt;+1 tests pass will commit&lt;/p&gt;</comment>
                            <comment id="13283924" author="hudson" created="Sat, 26 May 2012 06:49:15 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1450 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1450/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1450/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2372&quot; title=&quot;java.io.IOException: error=7, Argument list too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2372&quot;&gt;&lt;del&gt;HIVE-2372&lt;/del&gt;&lt;/a&gt; Argument list too long when streaming (Sergey Tryuber via egc) (Revision 1342841)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ecapriolo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1342841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1342841&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ScriptOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestOperators.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547980" author="hudson" created="Wed, 9 Jan 2013 10:23:50 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2372&quot; title=&quot;java.io.IOException: error=7, Argument list too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2372&quot;&gt;&lt;del&gt;HIVE-2372&lt;/del&gt;&lt;/a&gt; Argument list too long when streaming (Sergey Tryuber via egc) (Revision 1342841)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ecapriolo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1342841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1342841&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ScriptOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestOperators.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550088" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:20 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="14002734" author="rharris" created="Tue, 20 May 2014 03:05:58 +0000"  >&lt;p&gt;While creating a table with a large number of columns, a large hive variable is temporarily created using SET, the variable contains the columns and column descriptions.&lt;/p&gt;

&lt;p&gt;A CREATE TABLE statement then successfully uses that large variable.&lt;/p&gt;

&lt;p&gt;After successfully creating the table the hive script attempts to load data into the table using a TRANSFORM script, triggering the error:&lt;br/&gt;
java.io.IOException: error=7, Argument list too long&lt;/p&gt;

&lt;p&gt;Since the variable is no longer used after the table is created, the hive script was updated to SET the large variable to empty.&lt;br/&gt;
After setting the variable empty the second statement in the hive script ran fine.&lt;/p&gt;</comment>
                            <comment id="14027993" author="sergeant" created="Wed, 11 Jun 2014 16:42:51 +0000"  >&lt;p&gt;Hi Ryan,&lt;/p&gt;

&lt;p&gt;Yes, your issue is very related. Hive passes properties to TRANSFORM script via environment variables. In the scope of this ticket I&apos;ve shortened only environment variable which stores information about partitions.&lt;/p&gt;

&lt;p&gt;In case of user-defined variables (via SET statement), I&apos;m not even sure that approach to shorten them is correct. May be it would be better just to fail with error before map-reduce job execution and ask user to unset the variable (as you did). But it is quite hard to judge what is length limitation, because it depends on OS (even in my patch, as I remember, I hardcoded the length and now it seems to be not the best choice). As an alternative, Hive can print a warning, but continue the execution. &lt;/p&gt;

&lt;p&gt;Anyway, this issue had been closed so much time ago (and applied patch really solves the problem in issue description) that I think it would be better to create a new one and lead all the discussion there. Don&apos;t you mind to do it?&lt;/p&gt;</comment>
                            <comment id="14028312" author="rharris" created="Wed, 11 Jun 2014 19:53:40 +0000"  >&lt;p&gt;Thanks Sergey, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7218&quot; title=&quot;java.io.IOException: error=7, Argument list too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7218&quot;&gt;HIVE-7218&lt;/a&gt; created for continued tracking&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512758" name="HIVE-2372.1.patch.txt" size="4595" author="sergeant" created="Wed, 1 Feb 2012 15:00:41 +0000"/>
                            <attachment id="12516666" name="HIVE-2372.2.patch.txt" size="7180" author="sergeant" created="Thu, 1 Mar 2012 09:35:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Oct 2011 02:56:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Committed thanks</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2373] Importing hive tables into hbase+hive requires a lot of work which often can be implied</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2373</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The HiveQL way of creating a HBase table looks something like &lt;br/&gt;
REATE TABLE bla(id_1 type_1, id_2 type_2..., id_n type_n)&lt;br/&gt;
STORED BY &apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&quot;hbase.columns.mapping&quot; = &quot;:key,cf:id_2, cf:id_3&quot;) TBLPROPERTIES (&quot;hbase.table.name&quot; = &quot;blah&quot;);&lt;/p&gt;

&lt;p&gt;But in most cases huge amounts of this can be assumed from the original table description. In fact in most cases, especially ones when that data was imported from MySQL it is trivial to generate at least one HBase backing for that data. I currently wrote a python script which our users can use to make things simpler. Would anyone be interested in that script? Would it make sense to make it easy from Hive? I hate to add reserved words so any suggestions are welcome.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518751">HIVE-2373</key>
            <summary>Importing hive tables into hbase+hive requires a lot of work which often can be implied</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="posix4e">Alex Newman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Aug 2011 22:31:26 +0000</created>
                <updated>Mon, 28 Jan 2013 05:37:23 +0000</updated>
                                                                            <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13085478" author="jvs" created="Tue, 16 Aug 2011 01:47:39 +0000"  >&lt;p&gt;Posting the script somewhere and linking it from the wiki would be a good start:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Putting something into Hive&apos;s HBase handler would be even better.  There&apos;s no need to add new reserved words; you could add new optional automapping configuration parameters to the HBase handler.&lt;/p&gt;</comment>
                            <comment id="13085498" author="posix4e" created="Tue, 16 Aug 2011 02:35:56 +0000"  >&lt;p&gt;@John, I&apos;m doing some internal review before I paste it. I&apos;m guessing I&apos;m looking at some guidance of what it should look like from someone else, if they have thought of it. I guess I could just add an auto for the configuration parameter.&lt;/p&gt;</comment>
                            <comment id="13415990" author="weidong.bian.intel" created="Tue, 17 Jul 2012 07:53:10 +0000"  >&lt;p&gt;I&apos;ve also encountered this issue and got a quick and dirty fix for this.&lt;br/&gt;
the attached preliminary patch is to specify a hard coded default mapping if &quot;WITH SERDEPROPERTIES (&quot;hbase.columns.mapping&quot;)&quot; is missing.&lt;br/&gt;
It will use the first column specified by the user as :key and &quot;cf&quot; as the column family name and of course will only work if all columns are mapped to one column family.&lt;br/&gt;
A better approach would be allow the user to specify something like WITH SERDEPROPERTIES (&quot;hbase.columns.mapping&quot; = &quot;:key@2&quot;) to specify the second column as the :key and add the rest automatically. If anyone is interested, I can work on this.&lt;/p&gt;</comment>
                            <comment id="13490469" author="shane.huang" created="Mon, 5 Nov 2012 05:49:22 +0000"  >&lt;p&gt;Review Request submitted @ &lt;a href=&quot;https://reviews.apache.org/r/7866/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/7866/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12536791" name="HIVE-2373_v1.patch" size="5640" author="weidong.bian.intel" created="Tue, 17 Jul 2012 07:54:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Aug 2011 01:47:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42145</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08oxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2374] Make compression used between map reduce tasks configurable.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2374</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We want to allow the compression between map reduce tasks to be configurable, similar to the way it is between the map and reduce jobs is configurable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518755">HIVE-2374</key>
            <summary>Make compression used between map reduce tasks configurable.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Aug 2011 23:04:01 +0000</created>
                <updated>Thu, 8 Dec 2011 20:03:41 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13085452" author="jiraposter@reviews.apache.org" created="Tue, 16 Aug 2011 00:25:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1516/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a field to MapredWork and MapredLocalWork which indicates whether it is intermediate or not.  By intermediate, I mean that if the query is an insert, there is at least one other map reduce task that is guaranteed to happen before the move.  If the query is not an insert, intermediate applies to them all.  I determine this by defaulting the flag to true, and setting it to false when the tasks to move the data into a table or file are generated.&lt;/p&gt;

&lt;p&gt;If the work for a map reduce task (local or otherwise) is intermediate, then we set the compression to be used on the output of the reduce to some configured value, the default is LZO.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; title=&quot;Make compression used between map reduce tasks configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2374&quot;&gt;HIVE-2374&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2374&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1157918 &lt;br/&gt;
  trunk/conf/hive-default.xml 1157918 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1157918 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 1157918 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java 1157918 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java 1157918 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1157918 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestExecDriver.java 1157918 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyIsIntermediateHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/intermediate_compression.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/intermediate_compression.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1516/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test query and hook to verify that the is intermediate flag is set properly in the MapredWork/MapredLocalWork.&lt;/p&gt;

&lt;p&gt;I also added a test to TestExecDriver which checks that the correct compression is used on the output of the reduce for each value of the is intermediate flag.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13085454" author="kevinwilfong" created="Tue, 16 Aug 2011 00:29:49 +0000"  >&lt;p&gt;Running a test query involving a table of ~30 mb joining it with itself on a primary key and then using a group by on a randomly generated value, we saw a 27% decrease in the runtime of the join map reduce task, with a 17% increase in the size of the output, and a 5% decrease in the runtime of the group by map reduce task, with a 264% increase in the size of the output.&lt;/p&gt;

&lt;p&gt;Note that the original query (compression not configurable) the time was 72.8 sec for the join map reduce task with 12.8 mb of output, and 28.4 sec for the group by map reduce task with 14 kb of output.&lt;/p&gt;</comment>
                            <comment id="13091852" author="jiraposter@reviews.apache.org" created="Fri, 26 Aug 2011 16:24:28 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1516/#review1658&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/#review1658&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Still looking at the tests. Here are my partial comments.&lt;/p&gt;


&lt;p&gt;trunk/conf/hive-default.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1516/#comment3701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/#comment3701&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    There is another parameter hive.exec.compress.intermediate which controls whether to compress the intermediate data between MR jobs. Can you check if it&apos;s turned on by default? I think we should turned that on and do this change so that the unit tests are actually covering your new code path. &lt;/p&gt;



&lt;p&gt;trunk/conf/hive-default.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1516/#comment3700&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/#comment3700&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please be more specific (an example would help) about when this codec is going to be used. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-16 00:24:28, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1516/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-16 00:24:28)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Ning Zhang.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a field to MapredWork and MapredLocalWork which indicates whether it is intermediate or not.  By intermediate, I mean that if the query is an insert, there is at least one other map reduce task that is guaranteed to happen before the move.  If the query is not an insert, intermediate applies to them all.  I determine this by defaulting the flag to true, and setting it to false when the tasks to move the data into a table or file are generated.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If the work for a map reduce task (local or otherwise) is intermediate, then we set the compression to be used on the output of the reduce to some configured value, the default is LZO.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; title=&quot;Make compression used between map reduce tasks configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2374&quot;&gt;HIVE-2374&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2374&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestExecDriver.java 1157918 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyIsIntermediateHook.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/intermediate_compression.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/intermediate_compression.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1516/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a test query and hook to verify that the is intermediate flag is set properly in the MapredWork/MapredLocalWork.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also added a test to TestExecDriver which checks that the correct compression is used on the output of the reduce for each value of the is intermediate flag.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13096206" author="jiraposter@reviews.apache.org" created="Fri, 2 Sep 2011 18:57:12 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1516/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-02 18:56:14.079373)&lt;/p&gt;


&lt;p&gt;Review request for hive and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Made changes as suggested by nzhang.&lt;/p&gt;

&lt;p&gt;I made the description of hive.exec.inter.mapred.compression.codec much more detailed, and added a simple example.&lt;/p&gt;

&lt;p&gt;I also set hive.exec.compress.intermediate to default to true, but I let hive.exec.inter.mapred.compression.codec default to the Hadoop default value, so that the existing unit tests hit my new code path.  Note that my new unit tests check that if hive.exec.inter.mapred.compression.codec is set to something other than the Hadoop default value, it is used as intended.&lt;/p&gt;

&lt;p&gt;This change required that I update the output of any tests that are affected by the change to hive.exec.compress.intermediate&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a field to MapredWork and MapredLocalWork which indicates whether it is intermediate or not.  By intermediate, I mean that if the query is an insert, there is at least one other map reduce task that is guaranteed to happen before the move.  If the query is not an insert, intermediate applies to them all.  I determine this by defaulting the flag to true, and setting it to false when the tasks to move the data into a table or file are generated.&lt;/p&gt;

&lt;p&gt;If the work for a map reduce task (local or otherwise) is intermediate, then we set the compression to be used on the output of the reduce to some configured value, the default is LZO.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; title=&quot;Make compression used between map reduce tasks configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2374&quot;&gt;HIVE-2374&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2374&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1164667 &lt;br/&gt;
  trunk/conf/hive-default.xml 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1164667 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestExecDriver.java 1164667 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyIsIntermediateHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/intermediate_compression.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join0.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join10.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join11.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join12.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join13.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join15.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join16.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join18.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join18_multi_distinct.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join20.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join21.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join22.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join23.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join24.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join26.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join27.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join28.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join29.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join30.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join31.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/cluster.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ctas.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/filter_join_breaktask.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby3_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby5.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby6.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby6_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_self_join.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap_auto.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/innerjoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input14_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input1_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input25.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input26.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input39.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input3_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input4_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/insert_into3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/intermediate_compression.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join0.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join13.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join15.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join18.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join18_multi_distinct.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join19.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join20.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join21.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join22.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join23.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join29.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join30.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join31.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join32.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join33.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join35.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join38.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join40.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_hive_626.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_reorder.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_reorder2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_reorder3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/lateral_view.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/lineage1.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/load_dyn_part14.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/mapjoin_distinct.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/mapjoin_mapjoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/mapjoin_subquery.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/merge4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/multi_insert.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/multigroupby_singlemr.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/no_hooks.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/nullgroup.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/nullgroup2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/nullgroup4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/parallel.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/pcr.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_clusterby.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_gby2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_gby_join.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_join2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_udf_case.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/regex_col.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/sample8.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/semijoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/skewjoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/stats1.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_case_column_pruning.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_explode.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udtf_explode.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udtf_json_tuple.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union10.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union11.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union12.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union14.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union15.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union17.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union18.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union19.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union20.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union22.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union5.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union6.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union7.q.out 1164667 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1516/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test query and hook to verify that the is intermediate flag is set properly in the MapredWork/MapredLocalWork.&lt;/p&gt;

&lt;p&gt;I also added a test to TestExecDriver which checks that the correct compression is used on the output of the reduce for each value of the is intermediate flag.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13098525" author="jiraposter@reviews.apache.org" created="Wed, 7 Sep 2011 01:34:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1516/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-07 01:34:05.392697)&lt;/p&gt;


&lt;p&gt;Review request for hive, Yongqiang He and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a field to MapredWork and MapredLocalWork which indicates whether it is intermediate or not.  By intermediate, I mean that if the query is an insert, there is at least one other map reduce task that is guaranteed to happen before the move.  If the query is not an insert, intermediate applies to them all.  I determine this by defaulting the flag to true, and setting it to false when the tasks to move the data into a table or file are generated.&lt;/p&gt;

&lt;p&gt;If the work for a map reduce task (local or otherwise) is intermediate, then we set the compression to be used on the output of the reduce to some configured value, the default is LZO.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; title=&quot;Make compression used between map reduce tasks configurable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2374&quot;&gt;HIVE-2374&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2374&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2374&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1164667 &lt;br/&gt;
  trunk/conf/hive-default.xml 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java 1164667 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java 1164667 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestExecDriver.java 1164667 &lt;br/&gt;
  trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyIsIntermediateHook.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/intermediate_compression.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join0.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join10.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join11.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join12.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join13.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join15.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join16.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join18.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join18_multi_distinct.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join20.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join21.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join22.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join23.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join24.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join26.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join27.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join28.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join29.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join30.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/auto_join31.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/cluster.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ctas.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/filter_join_breaktask.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby10.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby11.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby1_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby2_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby3_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby5.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby6.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby6_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_map_skew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby8_noskew.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/groupby9.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_mult_tables.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_mult_tables_compact.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_auto_self_join.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap_auto.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/innerjoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input14_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input1_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input25.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input26.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input39.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input3_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/input4_limit.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/insert_into3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/intermediate_compression.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join0.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join13.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join15.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join18.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join18_multi_distinct.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join19.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join20.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join21.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join22.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join23.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join29.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join30.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join31.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join32.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join33.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join35.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join38.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join40.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_hive_626.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_reorder.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_reorder2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/join_reorder3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/lateral_view.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/lineage1.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/load_dyn_part14.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/mapjoin_distinct.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/mapjoin_mapjoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/mapjoin_subquery.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/merge4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/multi_insert.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/multigroupby_singlemr.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/no_hooks.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/nullgroup.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/nullgroup2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/nullgroup4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/parallel.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/pcr.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_clusterby.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_gby2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_gby_join.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_join2.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_repeated_alias.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ppd_udf_case.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/regex_col.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/sample8.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/semijoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/skewjoin.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/stats1.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_case_column_pruning.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_explode.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udtf_explode.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udtf_json_tuple.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union10.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union11.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union12.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union14.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union15.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union17.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union18.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union19.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union20.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union22.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union3.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union4.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union5.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union6.q.out 1164667 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/union7.q.out 1164667 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1516/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1516/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a test query and hook to verify that the is intermediate flag is set properly in the MapredWork/MapredLocalWork.&lt;/p&gt;

&lt;p&gt;I also added a test to TestExecDriver which checks that the correct compression is used on the output of the reduce for each value of the is intermediate flag.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490494" name="HIVE-2374.1.patch.txt" size="21568" author="kevinwilfong" created="Tue, 16 Aug 2011 00:24:55 +0000"/>
                            <attachment id="12492792" name="HIVE-2374.2.patch.txt" size="1334651" author="kevinwilfong" created="Fri, 2 Sep 2011 19:03:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Aug 2011 00:25:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2375] join multipe small tables with one big table in one mapside join?</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2375</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hive-user/201108.mbox/%3C130db22f.4dc7.131c2caf8d0.Coremail.hadoop_wu@163.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/hive-user/201108.mbox/%3C130db22f.4dc7.131c2caf8d0.Coremail.hadoop_wu@163.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;suppose we join 10 small tables (s1,s2...s10) with one huge table (big) in a data warehouse&lt;br/&gt;
system (the join is between big table and small tables, like star schema).  Is it possible to:&lt;br/&gt;
 first build 10 hash table: one for each small table,&lt;br/&gt;
and loop each row in the big table, if the row survive, just output, if not then discard,&lt;br/&gt;
in this way we only need to read the big data once, instead of read big data, write big data,&lt;br/&gt;
read big data, ...&lt;/p&gt;

&lt;p&gt;dataflow is like:&lt;br/&gt;
1: build 10 hash tables&lt;br/&gt;
2: foreach row in big table&lt;br/&gt;
         probe the row with each of these 10 hash table&lt;br/&gt;
         if match all these 10 hash table, go to next step (output, etc)&lt;br/&gt;
         else discard the row.&lt;br/&gt;
    end loop&lt;/p&gt;</description>
                <environment>&lt;p&gt;not related&lt;/p&gt;</environment>
        <key id="12518876">HIVE-2375</key>
            <summary>join multipe small tables with one big table in one mapside join?</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wqhhust">Daniel Wu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Aug 2011 13:06:11 +0000</created>
                <updated>Mon, 15 Aug 2011 13:06:11 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="60480000">16,800h</timeoriginalestimate>
                            <timeestimate seconds="60480000">16,800h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42143</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123843</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2376] Upgrade Hive&apos;s Thrift dependency to version 0.7.0</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2376</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12518903">HIVE-2376</key>
            <summary>Upgrade Hive&apos;s Thrift dependency to version 0.7.0</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Aug 2011 17:38:51 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:03 +0000</updated>
                            <resolved>Mon, 5 Sep 2011 09:05:17 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Build Infrastructure</component>
                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13085195" author="ashutoshc" created="Mon, 15 Aug 2011 17:45:05 +0000"  >&lt;p&gt;I will suggest to upgrade to 0.7 so that we also have &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1053&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-1053&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13093451" author="amareshwari" created="Tue, 30 Aug 2011 05:45:09 +0000"  >&lt;p&gt;Changes look fine.&lt;/p&gt;

&lt;p&gt;I see that the old License is removed. And no new License is added. Any reason for doing so?&lt;/p&gt;</comment>
                            <comment id="13093452" author="amareshwari" created="Tue, 30 Aug 2011 05:46:15 +0000"  >&lt;p&gt;I think this should be fixed in 0.8.0&lt;/p&gt;</comment>
                            <comment id="13095639" author="jiraposter@reviews.apache.org" created="Thu, 1 Sep 2011 22:10:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1695/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1695/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Amareshwari Sriramadasu.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Upgrade Hive&apos;s Thrift dependency to version 0.7.0&lt;/li&gt;
	&lt;li&gt;Resolve Thrift dependency using Ivy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2376&quot; title=&quot;Upgrade Hive&amp;#39;s Thrift dependency to version 0.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2376&quot;&gt;&lt;del&gt;HIVE-2376&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2376&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2376&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  service/src/java/org/apache/hadoop/hive/service/HiveServer.java c4b041f &lt;br/&gt;
  shims/ivy.xml 88fae44 &lt;br/&gt;
  metastore/ivy.xml 7647b37 &lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 285908e &lt;br/&gt;
  ql/build.xml 15a58ef &lt;br/&gt;
  ql/ivy.xml 99f3786 &lt;br/&gt;
  serde/ivy.xml 01c4d0c &lt;br/&gt;
  service/ivy.xml 7254a09 &lt;br/&gt;
  build.xml f20cbb6 &lt;br/&gt;
  cli/ivy.xml abe7232 &lt;br/&gt;
  eclipse-templates/.classpath 74e5542 &lt;br/&gt;
  ivy/libraries.properties 4236df1 &lt;br/&gt;
  jdbc/ivy.xml ec26e74 &lt;br/&gt;
  lib/README 6cc2fba &lt;br/&gt;
  lib/thrift-fb303.LICENSE 4eacb64 &lt;br/&gt;
  lib/thrift.LICENSE 9d189ef &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1695/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1695/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Carl&lt;/p&gt;
</comment>
                            <comment id="13095640" author="cwsteinbach" created="Thu, 1 Sep 2011 22:10:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I see that the old License is removed. And no new License is added. Any reason for doing so?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did this in anticipation of resolving the Thrift dependency with Ivy, which the new version of the patch does.&lt;/p&gt;</comment>
                            <comment id="13096997" author="jiraposter@reviews.apache.org" created="Mon, 5 Sep 2011 04:17:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1695/#review1745&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1695/#review1745&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;+1&lt;br/&gt;
Running tests&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Amareshwari&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-09-01 22:08:47, Carl Steinbach wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1695/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1695/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-09-01 22:08:47)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Amareshwari Sriramadasu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* Upgrade Hive&apos;s Thrift dependency to version 0.7.0&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;* Resolve Thrift dependency using Ivy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2376&quot; title=&quot;Upgrade Hive&amp;#39;s Thrift dependency to version 0.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2376&quot;&gt;&lt;del&gt;HIVE-2376&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2376&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2376&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/src/java/org/apache/hadoop/hive/service/HiveServer.java c4b041f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;shims/ivy.xml 88fae44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;metastore/ivy.xml 7647b37 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 285908e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 15a58ef &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/ivy.xml 99f3786 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;serde/ivy.xml 01c4d0c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;service/ivy.xml 7254a09 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build.xml f20cbb6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/ivy.xml abe7232 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;eclipse-templates/.classpath 74e5542 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ivy/libraries.properties 4236df1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;jdbc/ivy.xml ec26e74 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/README 6cc2fba &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/thrift-fb303.LICENSE 4eacb64 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;lib/thrift.LICENSE 9d189ef &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1695/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1695/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Carl&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13097068" author="amareshwari" created="Mon, 5 Sep 2011 09:05:17 +0000"  >&lt;p&gt;I just committed this to trunk and branch-0.8.&lt;/p&gt;

&lt;p&gt;Thanks Carl!&lt;/p&gt;</comment>
                            <comment id="13097137" author="hudson" created="Mon, 5 Sep 2011 13:04:52 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #934 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/934/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/934/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2376&quot; title=&quot;Upgrade Hive&amp;#39;s Thrift dependency to version 0.7.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2376&quot;&gt;&lt;del&gt;HIVE-2376&lt;/del&gt;&lt;/a&gt;. Upgrade Hive&apos;s Thrift dependency to version 0.7.0 (Carl Steinbach via amareshwari)&lt;/p&gt;

&lt;p&gt;amareshwari : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1165207&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1165207&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/README&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/thrift-0.5.0.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/thrift-fb303-0.5.0.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/thrift-fb303.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/thrift.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_constants.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_constants.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-cpp/hive_metastore_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/AlreadyExistsException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ConfigValSecurityException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Constants.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Database.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/FieldSchema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/HiveObjectPrivilege.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/HiveObjectRef.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/HiveObjectType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Index.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/IndexAlreadyExistsException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/InvalidObjectException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/InvalidOperationException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/InvalidPartitionException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/MetaException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/NoSuchObjectException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Order.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Partition.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/PartitionEventType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/PrincipalPrivilegeSet.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/PrincipalType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/PrivilegeBag.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/PrivilegeGrantInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Role.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Schema.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/SerDeInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/StorageDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Type.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/UnknownDBException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/UnknownPartitionException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/UnknownTableException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/Version.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_constants.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-php/hive_metastore/hive_metastore_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/constants.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-py/hive_metastore/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_constants.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/hive_metastore_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_constants.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_constants.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-cpp/queryplan_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/Adjacency.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/AdjacencyType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/Graph.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/NodeType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/Operator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/OperatorType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/Query.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/QueryPlan.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/Stage.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/StageType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/Task.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/ql/plan/api/TaskType.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-php/queryplan/queryplan_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-py/queryplan/constants.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-py/queryplan/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-rb/queryplan_constants.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/gen/thrift/gen-rb/queryplan_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-cpp/serde_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-cpp/serde_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/test/InnerStruct.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/test/ThriftTestObj.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde2/thrift/test/Complex.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde2/thrift/test/IntString.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-php/serde/serde_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-rb/serde_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-cpp/ThriftHive.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-cpp/ThriftHive.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-cpp/hive_service_constants.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-cpp/hive_service_constants.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-cpp/hive_service_types.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-cpp/hive_service_types.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/service/HiveClusterStatus.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/service/HiveServerException.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/service/JobTrackerState.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/service/ThriftHive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-php/hive_service/ThriftHive.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-php/hive_service/hive_service_types.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-py/hive_service/ThriftHive-remote&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-py/hive_service/ThriftHive.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-py/hive_service/constants.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-py/hive_service/ttypes.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-rb/hive_service_constants.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-rb/hive_service_types.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/gen/thrift/gen-rb/thrift_hive.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12520655">THRIFT-1308</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12492173" name="HIVE-2376-complete.1.patch.txt" size="3478527" author="cwsteinbach" created="Tue, 30 Aug 2011 01:38:24 +0000"/>
                            <attachment id="12492678" name="HIVE-2376-complete.2.patch.txt" size="3484286" author="cwsteinbach" created="Thu, 1 Sep 2011 22:04:46 +0000"/>
                            <attachment id="12492172" name="HIVE-2376-no-gen.1.patch.txt" size="22704" author="cwsteinbach" created="Tue, 30 Aug 2011 01:38:24 +0000"/>
                            <attachment id="12492680" name="HIVE-2376-no-gen.2.patch.txt" size="28133" author="cwsteinbach" created="Thu, 1 Sep 2011 22:09:16 +0000"/>
                            <attachment id="12492170" name="libfb303-0.7.0.jar" size="175982" author="cwsteinbach" created="Tue, 30 Aug 2011 01:36:31 +0000"/>
                            <attachment id="12492171" name="libthrift-0.7.0.jar" size="301547" author="cwsteinbach" created="Tue, 30 Aug 2011 01:36:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Aug 2011 17:45:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62684</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123844</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2377] USE database doesn&apos;t work when it&apos;s first command in session</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2377</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When USE database is run as a first command it has no effect:&lt;br/&gt;
USE database;&lt;br/&gt;
SHOW TABLES;&lt;br/&gt;
// wrong - default database tables&lt;/p&gt;

&lt;p&gt;When run twice it works:&lt;br/&gt;
USE database;&lt;br/&gt;
USE database;&lt;br/&gt;
SHOW TABLES;&lt;br/&gt;
// ok&lt;/p&gt;

&lt;p&gt;When SHOW DATABASES is used before it, it works:&lt;br/&gt;
SHOW DATABASES;&lt;br/&gt;
USE database;&lt;br/&gt;
SHOW TABLES;&lt;br/&gt;
// ok&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518936">HIVE-2377</key>
            <summary>USE database doesn&apos;t work when it&apos;s first command in session</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="marcink">Marcin Kurczych</assignee>
                                    <reporter username="marcink">Marcin Kurczych</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Aug 2011 23:01:01 +0000</created>
                <updated>Thu, 20 Oct 2011 23:39:43 +0000</updated>
                            <resolved>Thu, 20 Oct 2011 23:39:43 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13085427" author="jghoman" created="Mon, 15 Aug 2011 23:23:30 +0000"  >&lt;p&gt;@Marcin what version of Hive are you running against?  On 7, use as the initial command works fine for me:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; [jhoman@gw ~]$ hive
Hive history file=/hive_query_logs/jhoman/hive_job_log_jhoman_201108152322_635559337.txt
hive&amp;gt; use u_jhoman;
OK
Time taken: 1.968 seconds
hive&amp;gt; show tables;
OK
foo
Time taken: 0.297 seconds&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13085462" author="marcink" created="Tue, 16 Aug 2011 00:50:38 +0000"  >&lt;p&gt;On some snapshot of 0.8 version, I believe it&apos;s revision 1155573. Maybe the problem appeared after 0.7, or it has something to do with local configuration.&lt;/p&gt;</comment>
                            <comment id="13090730" author="marcink" created="Thu, 25 Aug 2011 03:04:33 +0000"  >&lt;p&gt;Problem appeared when changing between databases with different parameters. This made Hive.get function construct new Hive object with currentDatabase unbound.&lt;/p&gt;

&lt;p&gt;Patch adds setting currentDatabase to value from previous instance.&lt;/p&gt;</comment>
                            <comment id="13132209" author="jvs" created="Thu, 20 Oct 2011 23:39:43 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2501&quot; title=&quot;When new instance of Hive (class) is created, the current database is reset to default (current database shouldn&amp;#39;t be changed).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2501&quot;&gt;&lt;del&gt;HIVE-2501&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491568" name="HIVE-2377.1.patch" size="602" author="marcink" created="Wed, 24 Aug 2011 23:27:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Aug 2011 23:23:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123845</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2378] Warn user that precision is lost when bigint is implicitly cast to double.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2378</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a bigint is implicitly cast to a double (when a bigint is involved in an equality expression with a string or double) precision may be lost, resulting in unexpected behavior.  Until we fix the underlying issue we should throw an error in strict mode, and a warning in nonstrict mode alerting the user about this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518938">HIVE-2378</key>
            <summary>Warn user that precision is lost when bigint is implicitly cast to double.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Aug 2011 23:29:03 +0000</created>
                <updated>Fri, 29 Jun 2012 20:22:34 +0000</updated>
                            <resolved>Wed, 31 Aug 2011 00:17:49 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13085435" author="jiraposter@reviews.apache.org" created="Mon, 15 Aug 2011 23:37:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1515/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a check in the code for equality expressions (includes inequalities) with operands of different types, that throws an error or logs a warning, depending on strict mode, if one operand is a string or double and the other is a bigint.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2378&quot;&gt;&lt;del&gt;HIVE-2378&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2378&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1157946 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1157946 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1515/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added two tests (one for strings and one for doubles) to record the issue.&lt;/p&gt;

&lt;p&gt;I also verified the unit tests still run.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13086453" author="jiraposter@reviews.apache.org" created="Wed, 17 Aug 2011 17:06:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1515/#review1503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/#review1503&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Log.WARN is not sufficient to print error message to console. There is another place you can add the check in compile time: ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java in DefaultExprProcessor.getFuncExprNodeDesc(). There you can safely get error output stream from SessionState.get().&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Siying&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-15 23:37:16, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1515/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-15 23:37:16)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a check in the code for equality expressions (includes inequalities) with operands of different types, that throws an error or logs a warning, depending on strict mode, if one operand is a string or double and the other is a bigint.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2378&quot;&gt;&lt;del&gt;HIVE-2378&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2378&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1157946 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1157946 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1515/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added two tests (one for strings and one for doubles) to record the issue.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also verified the unit tests still run.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13086505" author="jiraposter@reviews.apache.org" created="Wed, 17 Aug 2011 18:36:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1515/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-17 18:34:44.253584)&lt;/p&gt;


&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This diff is in response to Siying&apos;s comments.&lt;/p&gt;

&lt;p&gt;I&apos;m a little hesitant to move the check into the method getFuncExprNodeDesc for two reasons:&lt;/p&gt;

&lt;p&gt;1) if the name of the UDF the method is called on corresponds to a comparison operator the code I modified (and hence the check in GenericUDFBaseCompare.ObjectInspector.initialize()) is already called &lt;br/&gt;
    DefaultExprProcessor.getFuncExprNodeDesc -&amp;gt; ExprNodeGenericFuncDesc.newInstance -&amp;gt; GenericUDFBaseCompare.ObjectInspector.initialize&lt;/p&gt;

&lt;p&gt;2) I would have to write new code in getFuncExprNodeDesc to check if  the GenericUDF is of type GenericUDFBaseCompare, and if so, get the TypeInfo for from each of its arguments.  Admittedly, this is only a few lines, but we get this for free by putting the check in GenericUDFBaseCompare.ObjectInspector.initialize&lt;/p&gt;

&lt;p&gt;If you still feel strongly about this, or you have other concerns, let me know and I will move the check, I just wanted to make those points before doing it.&lt;/p&gt;

&lt;p&gt;I didn&apos;t realize we wanted to print the warning to the console.  There is a function LogHelper.printError which checks uses SessionState&apos;s error output stream if possible and System.err otherwise and logs the message, which I have decided to use.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a check in the code for equality expressions (includes inequalities) with operands of different types, that throws an error or logs a warning, depending on strict mode, if one operand is a string or double and the other is a bigint.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2378&quot;&gt;&lt;del&gt;HIVE-2378&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2378&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1158835 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1158835 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1515/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added two tests (one for strings and one for doubles) to record the issue.&lt;/p&gt;

&lt;p&gt;I also verified the unit tests still run.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13086508" author="jiraposter@reviews.apache.org" created="Wed, 17 Aug 2011 18:40:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1515/#review1510&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/#review1510&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;It&apos;s OK if you think it&apos;s equivalent. Just make sure you print to console&apos;s error output stream, instead of Log.WARN&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Siying&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-17 18:34:44, Kevin Wilfong wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1515/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-17 18:34:44)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added a check in the code for equality expressions (includes inequalities) with operands of different types, that throws an error or logs a warning, depending on strict mode, if one operand is a string or double and the other is a bigint.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2378&quot;&gt;&lt;del&gt;HIVE-2378&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2378&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1158835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBaseCompare.java 1158835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1515/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I added two tests (one for strings and one for doubles) to record the issue.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I also verified the unit tests still run.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Kevin&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13087126" author="jiraposter@reviews.apache.org" created="Thu, 18 Aug 2011 17:22:28 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1515/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-18 17:21:26.213141)&lt;/p&gt;


&lt;p&gt;Review request for hive and Siying Dong.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Changed my mind.&lt;/p&gt;

&lt;p&gt;Ran a few more tests to make sure they were equivalent and found that having the check in  GenericUDFBaseCompare.ObjectInspector.initialize can result in the warning being thrown multiple times for the same operator.  I also found that queries, like the ones in the .q file don&apos;t hit DefaultExprProcessor.getFuncExprNodeDesc.&lt;/p&gt;

&lt;p&gt;I added the check to ExprNodeGenericFuncDesc.newInstance because this is hit, it appears to only be hit once per operator, and it will be hit if the code ever goes through DefaultExprProcessor.getFuncExprNodeDesc.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added a check in the code for equality expressions (includes inequalities) with operands of different types, that throws an error or logs a warning, depending on strict mode, if one operand is a string or double and the other is a bigint.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2378&quot;&gt;&lt;del&gt;HIVE-2378&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2378&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1158835 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java 1158835 &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1515/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1515/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I added two tests (one for strings and one for doubles) to record the issue.&lt;/p&gt;

&lt;p&gt;I also verified the unit tests still run.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;
</comment>
                            <comment id="13093991" author="sdong" created="Tue, 30 Aug 2011 18:44:29 +0000"  >&lt;p&gt;+1, will commit if unit tests pass.&lt;/p&gt;</comment>
                            <comment id="13094201" author="sdong" created="Wed, 31 Aug 2011 00:17:49 +0000"  >&lt;p&gt;Committed. Thanks Kevin!&lt;/p&gt;</comment>
                            <comment id="13094344" author="hudson" created="Wed, 31 Aug 2011 06:46:07 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #925 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/925/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/925/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2378&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2378&quot;&gt;&lt;del&gt;HIVE-2378&lt;/del&gt;&lt;/a&gt;. Warn user that precision is lost when bigint is implicitly cast to double. (Kevin Wilfong via Siying Dong)&lt;/p&gt;

&lt;p&gt;sdong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163455&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163455&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeGenericFuncDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/compare_double_bigint.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/compare_string_bigint.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/compare_double_bigint.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/compare_string_bigint.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13404172" author="kevinwilfong" created="Fri, 29 Jun 2012 20:22:34 +0000"  >&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2427&quot; title=&quot;Warn user that precision is lost when bigint is implicitly cast to double in joins and unions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2427&quot;&gt;HIVE-2427&lt;/a&gt; I want to make this controlled by a new config hive.mapred.bigint.comparison.mode instead of hive.mapred.mode because hive.mapred.mode is used to control too many things.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490487" name="HIVE-2378.1.patch.txt" size="6703" author="kevinwilfong" created="Mon, 15 Aug 2011 23:37:40 +0000"/>
                            <attachment id="12490684" name="HIVE-2378.2.patch.txt" size="6887" author="kevinwilfong" created="Wed, 17 Aug 2011 18:47:20 +0000"/>
                            <attachment id="12490819" name="HIVE-2378.3.patch.txt" size="7409" author="kevinwilfong" created="Thu, 18 Aug 2011 17:21:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Aug 2011 23:37:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2379] Hive/HBase integration could be improved</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2379</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;  For now any Hive/HBase queries would require the following jars to be explicitly added via hive&apos;s add jar command:&lt;/p&gt;

&lt;p&gt;add jar /usr/lib/hive/lib/hbase-0.90.1-cdh3u0.jar;&lt;br/&gt;
add jar /usr/lib/hive/lib/hive-hbase-handler-0.7.0-cdh3u0.jar;&lt;br/&gt;
add jar /usr/lib/hive/lib/zookeeper-3.3.1.jar;&lt;br/&gt;
add jar /usr/lib/hive/lib/guava-r06.jar;&lt;/p&gt;

&lt;p&gt;the longer term solution, perhaps, should be to have the code at submit time call hbase&apos;s &lt;br/&gt;
TableMapREduceUtil.addDependencyJar(job, HBaseStorageHandler.class) to ship it in distributedcache.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518939">HIVE-2379</key>
            <summary>Hive/HBase integration could be improved</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="rvs">Roman Shaposhnik</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Aug 2011 23:45:28 +0000</created>
                <updated>Thu, 26 Jun 2014 06:16:54 +0000</updated>
                            <resolved>Tue, 23 Apr 2013 06:10:13 +0000</resolved>
                                    <version>0.7.1</version>
                    <version>0.8.0</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>CLI</component>
                    <component>Clients</component>
                    <component>HBase Handler</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>15</watches>
                                                                <comments>
                            <comment id="13530608" author="phabricator@reviews.facebook.net" created="Thu, 13 Dec 2012 01:59:21 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive/HBase integration could be improved&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1936 Add libraries for hbase handler automatically&lt;/p&gt;

&lt;p&gt;  For now any Hive/HBase queries would require the following jars to be explicitly added via hive&apos;s add jar command:&lt;/p&gt;

&lt;p&gt;  add jar /usr/lib/hive/lib/hbase-0.90.1-cdh3u0.jar;&lt;br/&gt;
  add jar /usr/lib/hive/lib/hive-hbase-handler-0.7.0-cdh3u0.jar;&lt;br/&gt;
  add jar /usr/lib/hive/lib/zookeeper-3.3.1.jar;&lt;br/&gt;
  add jar /usr/lib/hive/lib/guava-r06.jar;&lt;/p&gt;

&lt;p&gt;  the longer term solution, perhaps, should be to have the code at submit time call hbase&apos;s&lt;br/&gt;
  TableMapREduceUtil.addDependencyJar(job, HBaseStorageHandler.class) to ship it in distributedcache.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/17559/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/17559/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13549413" author="phabricator@reviews.facebook.net" created="Thu, 10 Jan 2013 07:48:11 +0000"  >&lt;p&gt;zhenxiao has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive/HBase integration could be improved&quot;.&lt;/p&gt;

&lt;p&gt;  Non-Committer +1.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: zhenxiao&lt;/p&gt;</comment>
                            <comment id="13568308" author="ndimiduk" created="Fri, 1 Feb 2013 00:48:17 +0000"  >&lt;p&gt;You probably want to invoke &lt;tt&gt;TableMapReduceUtil.addDependencyJars(job)&lt;/tt&gt; in addition to itemizing your explicit classes. This will negate the need to explicitly include ZooKeeper.class. See &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java#L439-L451&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TableMapReduceUtil.java#L439-L451&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13568581" author="zeph" created="Fri, 1 Feb 2013 08:40:18 +0000"  >&lt;p&gt;hi guys, is the approval/review of someone still pending? it seems so... how can we speed it up? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;m building a whole infrastructure based on this integration... (k, k, I&apos;ll patch my local build)&lt;/p&gt;

&lt;p&gt;cheers,&lt;br/&gt;
G.&lt;/p&gt;</comment>
                            <comment id="13568582" author="zeph" created="Fri, 1 Feb 2013 08:40:58 +0000"  >&lt;p&gt;I guess we can close &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2055&quot; title=&quot;Hive should add HBase classpath dependencies when available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2055&quot;&gt;&lt;del&gt;HIVE-2055&lt;/del&gt;&lt;/a&gt; afterwards, as it is just a symptom of this&lt;/p&gt;</comment>
                            <comment id="13570076" author="zeph" created="Mon, 4 Feb 2013 09:08:15 +0000"  >&lt;p&gt;ahemm &lt;span class=&quot;error&quot;&gt;&amp;#91;~namitjain&amp;#93;&lt;/span&gt;, sorry if I dare to raise this to Critical and switch it to a Bug, but it is preventing one of the major use cases to work at all&lt;/p&gt;

&lt;p&gt;from hive&apos;s console I can sort of circumvent it, but from Hue or from a JDBC connector I have no easy way (even totally impossible from an end user&apos;s perspective)&lt;/p&gt;

&lt;p&gt;is anyone reviewing the patch? I tried to compile and apply it, but the unit tests against &quot;974918c Hive 0.9.0-rc0 release&quot; are failing, and I can&apos;t judge if I get to a consistent state applying it&lt;/p&gt;</comment>
                            <comment id="13570077" author="zeph" created="Mon, 4 Feb 2013 09:11:45 +0000"  >&lt;p&gt;(uhmm... looks like I stepped into &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2937&quot; title=&quot;TestHiveServerSessions hangs when executed directly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2937&quot;&gt;&lt;del&gt;HIVE-2937&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Running org.apache.hadoop.hive.service.TestHiveServerSessions
    [junit] Running org.apache.hadoop.hive.service.TestHiveServerSessions
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13570078" author="zeph" created="Mon, 4 Feb 2013 09:13:46 +0000"  >&lt;p&gt;and...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Running org.apache.hadoop.hive.cli.TestCliDriver
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but no much output though&lt;/p&gt;</comment>
                            <comment id="13572285" author="zeph" created="Wed, 6 Feb 2013 09:26:17 +0000"  >&lt;p&gt;blocked by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3991&quot; title=&quot;junit failure on Semantic Analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3991&quot;&gt;&lt;del&gt;HIVE-3991&lt;/del&gt;&lt;/a&gt;, junits are failing... on trunk and on branch &quot;release-0.9.0-rc2&quot;&lt;/p&gt;</comment>
                            <comment id="13577501" author="zeph" created="Wed, 13 Feb 2013 11:34:26 +0000"  >&lt;p&gt;btw... this is enough to fix it:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;hive.aux.jars.path&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;file:&lt;span class=&quot;code-comment&quot;&gt;///usr/lib/hive/lib/hbase.jar,file:///usr/lib/hive/lib/hive-hbase-handler-0.9.0-cdh4.1.2.jar&amp;lt;/value&amp;gt;
&lt;/span&gt;&amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;from Cloudera Manager into Hive Client Configuration Safety Valve for hive-site.xml&lt;/p&gt;</comment>
                            <comment id="13598044" author="michaeln" created="Sat, 9 Mar 2013 19:11:29 +0000"  >&lt;p&gt;Somehow CM 4.5 is ignoring Hive Client Configuration Safety Values for hive-site.xml&lt;/p&gt;</comment>
                            <comment id="13637379" author="ashutoshc" created="Sat, 20 Apr 2013 21:59:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt; Lets get this in. I tried your patch. But its not applying cleanly. Can you rebase it? Additionally, I wonder we also have TestHBaseMinimrCliDriver why doesn&apos;t that fail in absence of this patch. &lt;/p&gt;</comment>
                            <comment id="13637471" author="phabricator@reviews.facebook.net" created="Sun, 21 Apr 2013 04:31:15 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive/HBase integration could be improved&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7347?vs=23697&amp;amp;id=32571#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7347?vs=23697&amp;amp;id=32571#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: zhenxiao&lt;/p&gt;</comment>
                            <comment id="13637486" author="ashutoshc" created="Sun, 21 Apr 2013 06:08:09 +0000"  >&lt;p&gt;Navis, as Nick has noted on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379?focusedCommentId=13568308&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13568308&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this jira &lt;/a&gt; we should probably use TableMapReduceUtil.addDependencyJars(job) .&lt;/p&gt;</comment>
                            <comment id="13637522" author="navis" created="Sun, 21 Apr 2013 10:00:45 +0000"  >&lt;p&gt;It uses TableMapReduceUtil.addDependencyJars(job) in HiveStorageHandler.&lt;/p&gt;</comment>
                            <comment id="13637588" author="ashutoshc" created="Sun, 21 Apr 2013 16:19:35 +0000"  >&lt;p&gt;Navis, current patch uses  TableMapReduceUtil.addDependencyJars(job, Object...). Recommendation is to use  TableMapReduceUtil.addDependencyJars(job). Difference between two apis is that second one automatically puts in hbase dependencies, so that we don&apos;t have to. That way in future if HBase adds new dependency, we will still be safe. So, we need to do:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; TableMapReduceUtil.addDependencyJars(job)
 TableMapReduceUtil.addDependencyJars(job, HBaseStorageHandler.class)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;thats it.&lt;/p&gt;</comment>
                            <comment id="13637682" author="ndimiduk" created="Sun, 21 Apr 2013 23:27:34 +0000"  >&lt;p&gt;Nit: the version that accepts a &lt;tt&gt;Job&lt;/tt&gt; as an argument is the one you want. The other one is &lt;tt&gt;Configuration, Class...&lt;/tt&gt;. Because this is confusing and annoying, I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8386&quot; title=&quot;deprecate TableMapReduce.addDependencyJars(Configuration, class&amp;lt;?&amp;gt; ...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8386&quot;&gt;&lt;del&gt;HBASE-8386&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13637793" author="phabricator@reviews.facebook.net" created="Mon, 22 Apr 2013 06:37:13 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive/HBase integration could be improved&quot;.&lt;/p&gt;

&lt;p&gt;  Addressed comments and fixed HCatStorageHandler&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7347?vs=32571&amp;amp;id=32601#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7347?vs=32571&amp;amp;id=32601#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  hcatalog/core/src/main/java/org/apache/hcatalog/mapreduce/HCatStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: zhenxiao&lt;/p&gt;</comment>
                            <comment id="13637821" author="phabricator@reviews.facebook.net" created="Mon, 22 Apr 2013 08:03:13 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive/HBase integration could be improved&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit if tests pass&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1936&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;br/&gt;
Cc: zhenxiao&lt;/p&gt;</comment>
                            <comment id="13638474" author="ndimiduk" created="Mon, 22 Apr 2013 21:52:27 +0000"  >&lt;p&gt;I&apos;m not sure what the point is of the &lt;tt&gt;OperatorUtils&lt;/tt&gt; changes, but making proper use of &lt;tt&gt;TableMapReduceUtils#addDependencyJars&lt;/tt&gt; looks correct.&lt;/p&gt;</comment>
                            <comment id="13638613" author="navis" created="Tue, 23 Apr 2013 00:30:01 +0000"  >&lt;p&gt;It&apos;s for finding FS operators. All TableDescs linked to TS/FS are checked for configuring jobConf instance.&lt;/p&gt;</comment>
                            <comment id="13638828" author="ashutoshc" created="Tue, 23 Apr 2013 06:10:13 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13639297" author="hudson" created="Tue, 23 Apr 2013 17:44:48 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #171 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/171/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/171/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt; : Hive/HBase integration could be improved (Navis via Ashutosh Chauhan) (Revision 1470823)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470823&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hcatalog/core/src/main/java/org/apache/hcatalog/mapreduce/HCatStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13639310" author="ndimiduk" created="Tue, 23 Apr 2013 17:54:34 +0000"  >&lt;p&gt;Just to confirm, has this code been tested on a distributed cluster? I&apos;ve found that these issues are not tested easily on a local or even pseudo-distributed configuration because the classpaths are artificially generous. For instance, running junit tests is likely not sufficient to validate.&lt;/p&gt;</comment>
                            <comment id="13639347" author="ashutoshc" created="Tue, 23 Apr 2013 18:19:37 +0000"  >&lt;p&gt;I didn&apos;t test on cluster. I just ran unit tests. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt; did you test this on cluster ?&lt;/p&gt;</comment>
                            <comment id="13639355" author="hudson" created="Tue, 23 Apr 2013 18:23:46 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2075 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2075/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2075/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt; : Hive/HBase integration could be improved (Navis via Ashutosh Chauhan) (Revision 1470823)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470823&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470823&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hcatalog/core/src/main/java/org/apache/hcatalog/mapreduce/HCatStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13640825" author="ndimiduk" created="Wed, 24 Apr 2013 19:28:41 +0000"  >&lt;p&gt;I tried testing this on a cluster but I couldn&apos;t produce hive jars that are compatible. Some assistance is requested.&lt;/p&gt;</comment>
                            <comment id="13642490" author="navis" created="Fri, 26 Apr 2013 01:39:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; What version are you using? I can make backport for that.&lt;/p&gt;</comment>
                            <comment id="13642501" author="ndimiduk" created="Fri, 26 Apr 2013 01:48:39 +0000"  >&lt;p&gt;I&apos;m working off of 0.11.0.&lt;/p&gt;</comment>
                            <comment id="13645122" author="navis" created="Tue, 30 Apr 2013 01:06:12 +0000"  >&lt;p&gt;Sorry, missed this.&lt;/p&gt;</comment>
                            <comment id="13796034" author="ashutoshc" created="Tue, 15 Oct 2013 23:30:32 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12631027">HIVE-3991</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12643727">HBASE-8386</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12581097" name="HIVE-2379-0.11.patch.txt" size="12252" author="navis" created="Tue, 30 Apr 2013 01:06:12 +0000"/>
                            <attachment id="12560704" name="HIVE-2379.D7347.1.patch" size="10163" author="phabricator@reviews.facebook.net" created="Thu, 13 Dec 2012 01:59:21 +0000"/>
                            <attachment id="12579708" name="HIVE-2379.D7347.2.patch" size="9773" author="phabricator@reviews.facebook.net" created="Sun, 21 Apr 2013 04:31:15 +0000"/>
                            <attachment id="12579783" name="HIVE-2379.D7347.3.patch" size="11413" author="phabricator@reviews.facebook.net" created="Mon, 22 Apr 2013 06:37:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Dec 2012 01:59:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i014w7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4562</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2380] Add Binary Datatype in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2380</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Add bytearray as a primitive data type.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518954">HIVE-2380</key>
            <summary>Add Binary Datatype in Hive</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Aug 2011 05:54:52 +0000</created>
                <updated>Sat, 1 Dec 2012 01:10:15 +0000</updated>
                            <resolved>Thu, 6 Oct 2011 19:40:16 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13085550" author="ashutoshc" created="Tue, 16 Aug 2011 05:58:29 +0000"  >&lt;p&gt;This is WIP. Attaching it early to illustrate the design to get feedback.&lt;/p&gt;</comment>
                            <comment id="13087428" author="ashutoshc" created="Fri, 19 Aug 2011 00:44:47 +0000"  >&lt;p&gt;Complete patch. It is ready for review.&lt;/p&gt;</comment>
                            <comment id="13087435" author="jiraposter@reviews.apache.org" created="Fri, 19 Aug 2011 00:50:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableByteArrayObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableByteArrayObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableVoidObjectInspector.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1159452 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/ByteArrayObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaByteArrayObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryByteArray.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyByteArrayObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyByteArray.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarStruct.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToBoolean.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToByte.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToDouble.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToFloat.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToInteger.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToLong.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToShort.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/UDFToByteArray.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/if/serde.thrift 1159452 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1159452 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1159452 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1159452 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1159452 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1159452 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1159452 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1159452 &lt;br/&gt;
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1159452 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1159452 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added and updated unit tests.&lt;br/&gt;
Added new system tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13094245" author="jvs" created="Wed, 31 Aug 2011 01:49:11 +0000"  >&lt;p&gt;Taking a look.&lt;/p&gt;</comment>
                            <comment id="13095669" author="jvs" created="Thu, 1 Sep 2011 23:17:33 +0000"  >&lt;p&gt;Ashutosh, maybe we can discuss this one at the contributor meetup next week (and then record the conclusions here).&lt;/p&gt;

&lt;p&gt;A few questions that I&apos;ve heard so far:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Is there a design doc somewhere?&lt;/li&gt;
	&lt;li&gt;Since Hive already has an array type, but this feature is independent, we probably want a different type name than bytearray.&lt;/li&gt;
	&lt;li&gt;For conversions, is going through string for all types a good default behavior?  An alternative would be to prevent implicit conversions altogether, and force users to pick the UDF with the desired behavior.  E.g. for string/binary conversion, it&apos;s a good idea to be able to specify an encoding rather than always using the JVM default.&lt;/li&gt;
	&lt;li&gt;How does the new type work with TRANSFORM scripts, UDF&apos;s, saving to textfile, etc?&lt;/li&gt;
	&lt;li&gt;Don&apos;t we need more accessor functions (e.g. making the existing string functions such as LENGTH work)?&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13098082" author="ashutoshc" created="Tue, 6 Sep 2011 15:24:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is there a design doc somewhere?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not yet. I can put together some design notes quickly over here. Is there an example of design docs for the features done previously for Hive which I can look at to get an idea what shall I cover in it?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Since Hive already has an array type, but this feature is independent, we probably want a different type name than bytearray.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;OK. Binary ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;For conversions, is going through string for all types a good default behavior? An alternative would be to prevent implicit conversions altogether, and force users to pick the UDF with the desired behavior. E.g. for string/binary conversion, it&apos;s a good idea to be able to specify an encoding rather than always using the JVM default.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I also thought about casting and wasn&apos;t inclined for adding implicit casting. But I went with it so as to make easy things easier. This way users can use this type easily in scripts without needing to insert casts every time and in cases this doesnt work they can always write udfs. Further, in many cases, JVM encoding is a good default. But, if you think thats not a good idea, I can take away implicit casting.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How does the new type work with &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;TRANSFORM scripts, &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am assuming providing toString() will be good enough to make sure we can send data in string form and after receiving can convert into bytearray. Is there anything else ?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;UDF&apos;s, &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Like other types. Do I need to think about anything here?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;saving to textfile, etc?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I assume you mean file containing text data in other columns, if user does so, it will be his responsibility to escape and format data appropriately so that he can load it later, potentially with the serde which does understand the format and escaping. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Don&apos;t we need more accessor functions (e.g. making the existing string functions such as LENGTH work)?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Length should be possible. Any other accessor functions?&lt;/p&gt;</comment>
                            <comment id="13098322" author="jvs" created="Tue, 6 Sep 2011 20:24:55 +0000"  >&lt;p&gt;You can find design doc examples here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/DesignDocs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/DesignDocs&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13103243" author="ashutoshc" created="Tue, 13 Sep 2011 01:07:45 +0000"  >&lt;p&gt;Initial design proposal is here:&lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Binary+DataType+Proposal&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Binary+DataType+Proposal&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Comments welcome.&lt;/p&gt;</comment>
                            <comment id="13103894" author="jvs" created="Tue, 13 Sep 2011 18:44:18 +0000"  >&lt;p&gt;For accessor functions:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;length&lt;/li&gt;
	&lt;li&gt;substring&lt;/li&gt;
	&lt;li&gt;concat&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We can follow up later with search capabilities.&lt;/p&gt;

&lt;p&gt;For conversions:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;to/from hex string&lt;/li&gt;
	&lt;li&gt;to/from string using a specific encoding (or default JVM encoding if not specified)&lt;/li&gt;
	&lt;li&gt;to/from base64 string&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We can follow up later with more interesting conversions for non-string types.&lt;/p&gt;</comment>
                            <comment id="13104085" author="ashutoshc" created="Tue, 13 Sep 2011 23:56:27 +0000"  >&lt;p&gt;Is name binary acceptable?&lt;/p&gt;</comment>
                            <comment id="13104815" author="ashutoshc" created="Wed, 14 Sep 2011 19:39:35 +0000"  >&lt;p&gt;@John,&lt;br/&gt;
For conversions, in this jira I am planning to provide functionality for to/from string using default JVM encoding, rest of these conversions I will take up in a follow-up jira. Motivation is to avoid having one giant patch and have multiple smaller patches. Sounds reasonable?&lt;/p&gt;</comment>
                            <comment id="13104844" author="jvs" created="Wed, 14 Sep 2011 20:10:14 +0000"  >&lt;p&gt;Just checked, and the name BINARY in JDBC and standard SQL corresponds to a fixed-length binary type with a specified precision:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://download.oracle.com/javase/1.3/docs/guide/jdbc/getstart/mapping.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/javase/1.3/docs/guide/jdbc/getstart/mapping.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But I&apos;m fine with us using it to mean something slightly different, and matching thrift.&lt;/p&gt;

&lt;p&gt;Regarding the conversions, it&apos;s fine to break it out into multiple patches; open follow-up JIRA&apos;s linked to this one.  I think the hex one will be very useful for debugging.&lt;/p&gt;</comment>
                            <comment id="13104950" author="ashutoshc" created="Wed, 14 Sep 2011 22:28:33 +0000"  >&lt;p&gt;Turned out binary is already reserved KW in hive grammar. But, looks like its not used anywhere? Can someone confirm. If so, I will use that KW, else we need to find a different name.&lt;/p&gt;</comment>
                            <comment id="13104980" author="jvs" created="Wed, 14 Sep 2011 23:03:26 +0000"  >&lt;p&gt;I don&apos;t see any references to it, so I think you&apos;re free to use it.&lt;/p&gt;</comment>
                            <comment id="13107356" author="ashutoshc" created="Sun, 18 Sep 2011 05:50:49 +0000"  >&lt;p&gt;Updated patch incorporating feedback.&lt;/p&gt;</comment>
                            <comment id="13107357" author="jiraposter@reviews.apache.org" created="Sun, 18 Sep 2011 05:53:08 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-18 05:52:41.197110)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated patch incorporating feedback&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1172168 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/if/serde.thrift 1172168 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1172168 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1172168 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1172168 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1172168 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1172168 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarStruct.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1172168 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1172168 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1172168 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added and updated unit tests.&lt;br/&gt;
Added new system tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13113770" author="jvs" created="Fri, 23 Sep 2011 21:11:33 +0000"  >&lt;p&gt;I&apos;m planning to review this one next week.&lt;/p&gt;</comment>
                            <comment id="13115081" author="jiraposter@reviews.apache.org" created="Tue, 27 Sep 2011 00:43:12 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/#review2076&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#review2076&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4695&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4695&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I thought we decided an explicit cast would be required even for string&amp;lt;--&amp;gt;binary?&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4699&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4699&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    @Description annotation for this class needs to be updated.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4698&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4698&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    @Description annotation for this class needs to be updated.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4700&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4700&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    @Description annotation for this class needs to be updated.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4697&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4697&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This UDF class needs an @Description annotation.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4696&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4696&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The CAST should have parentheses, so&lt;/p&gt;

&lt;p&gt;    CAST(x AS BINARY)&lt;/p&gt;

&lt;p&gt;    (this applies to the existing code in GenericUDFTimestamp too)&lt;/p&gt;




&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table1.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4701&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Use ORDER BY on a key for all queries to guarantee test determinism.  Also, since test output keeps getting bigger and bigger, it&apos;s best to filter down to just a few rows to keep it easier to review and manage.&lt;/p&gt;

&lt;p&gt;    (This comment applies to all tests in this patch.)&lt;/p&gt;



&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4708&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4708&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is there a test for this somewhere?  It seems like a case where we need base64.&lt;/p&gt;



&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4715&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4715&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m not sure about the original connection between UTF and strings here (was something forcing a UTF encoding), but is it valid for arbitrary binary data?&lt;/p&gt;



&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment4716&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment4716&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Since we decided we&apos;re not going to support implicit conversions, these don&apos;t belong here, right?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-09-18 05:52:41, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-09-18 05:52:41)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/if/serde.thrift 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarStruct.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added and updated unit tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added new system tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13115086" author="jvs" created="Tue, 27 Sep 2011 00:54:22 +0000"  >&lt;p&gt;Some comments added on Review Board.  Also:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I would be a lot more comfortable with this patch if it included testing of real binary data (not just strings encoded as binary) at the QL level end-to-end, getting stored in a table, queried, passed through UDF&apos;s, etc. (not just the Java unit test level of serdes) since that is the intended use case&lt;/li&gt;
	&lt;li&gt;could you open followup JIRA issues for any items which you intend to address as immediate followups to this patch?&lt;/li&gt;
	&lt;li&gt;need negative tests for attempting illegal conversions to/from binary&lt;/li&gt;
	&lt;li&gt;please rename this issue since we&apos;re going with BINARY instead of BYTEARRAY&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13118223" author="jiraposter@reviews.apache.org" created="Fri, 30 Sep 2011 17:37:45 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-30 17:37:25.293739)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Incorporating John&apos;s feedback + lot of tests.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFTimestamp.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_5.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_6.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_5.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_6.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/binary_table_bincolserde.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/binary_table_colserde.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/load_binary_data.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_5.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_6.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_5.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_6.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/binary_table_bincolserde.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/binary_table_colserde.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/load_binary_data.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/if/serde.thrift 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/DelimitedJSONSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarStruct.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1177528 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added and updated unit tests.&lt;br/&gt;
Added new system tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13118224" author="jiraposter@reviews.apache.org" created="Fri, 30 Sep 2011 17:37:46 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java, line 675&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41673#file41673line675&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41673#file41673line675&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I thought we decided an explicit cast would be required even for string&amp;lt;--&amp;gt;binary?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct. Accidentally left. Will remove it in the new patch.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java, line 36&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41678#file41678line36&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41678#file41678line36&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     @Description annotation for this class needs to be updated.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will update in new patch.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java, line 55&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41679#file41679line55&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41679#file41679line55&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     @Description annotation for this class needs to be updated.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will update in new patch.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java, line 29&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41682#file41682line29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41682#file41682line29&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     This UDF class needs an @Description annotation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will update in new patch.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java, line 43&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41680#file41680line43&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41680#file41680line43&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     @Description annotation for this class needs to be updated.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will update in new patch.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java, line 67&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41682#file41682line67&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41682#file41682line67&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     The CAST should have parentheses, so&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     CAST(x AS BINARY)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     (this applies to the existing code in GenericUDFTimestamp too)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will update in new patch.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/ql/src/test/queries/clientpositive/ba_table1.q, line 9&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41683#file41683line9&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41683#file41683line9&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Use ORDER BY on a key for all queries to guarantee test determinism.  Also, since test output keeps getting bigger and bigger, it&apos;s best to filter down to just a few rows to keep it easier to review and manage.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     (This comment applies to all tests in this patch.)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Added order-by to guarantee determinism and limit to keep number of rows small in all the tests.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java, line 267&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41696#file41696line267&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41696#file41696line267&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is there a test for this somewhere?  It seems like a case where we need base64.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Missed the changes in DelimitedJSONserde so it was not getting used. DelimitedJSONserde now uses this method to print, so its gets used by all the tests.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java, line 83&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41698#file41698line83&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41698#file41698line83&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I&apos;m not sure about the original connection between UTF and strings here (was something forcing a UTF encoding), but is it valid for arbitrary binary data?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You are correct, this may break when there is a binary data of exactly one byte long and with that bit pattern, it will return null instead of that bit pattern. But thats a pretty corner-case. We can document something along the line &quot;If there is a possibility that your binary data may contain exactly one byte of 10111111, don&apos;t use LazyBinaryColumnarSerde with binary data type.&quot;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-09-27 00:43:03, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java, line 393&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/diff/2/?file=41716#file41716line393&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff/2/?file=41716#file41716line393&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Since we decided we&apos;re not going to support implicit conversions, these don&apos;t belong here, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct. Removed.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ashutosh&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/#review2076&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#review2076&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-09-18 05:52:41, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-09-18 05:52:41)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/if/serde.thrift 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarStruct.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1172168 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added and updated unit tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added new system tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13118232" author="ashutoshc" created="Fri, 30 Sep 2011 17:50:09 +0000"  >&lt;p&gt;@John&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I would be a lot more comfortable with this patch if it included testing of real binary data (not just strings encoded as binary) at the QL level end-to-end, getting stored in a table, queried, passed through UDF&apos;s, etc. (not just the Java unit test level of serdes) since that is the intended use case&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Added following tests:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ba_table1.q basic test which tests a) binary type works correctly in grammar b) string can be cast into binary c) binary can be stored in a table d) binary data can be loaded back again and queried d) order-by on a binary key&lt;/li&gt;
	&lt;li&gt;ba_table2.q All the test in ba_test1.q + using LazyBinarySerde instead of LazySimpleSerde&lt;/li&gt;
	&lt;li&gt;ba_table3.q All the tests of ba_table1.q + test for a group-by and aggregation on a binary key.&lt;/li&gt;
	&lt;li&gt;ba_table_udfs.q this query tests all the udfs provided to work with binary works.&lt;/li&gt;
	&lt;li&gt;ba_table_union.q this query tests ba_table1.q + nested queries with multiple operations on binary data types + union on binary types&lt;/li&gt;
	&lt;li&gt;binary_table_colserde.q - Everything in ba_table1.q + columnar serde in RCFILE.&lt;/li&gt;
	&lt;li&gt;binary_table_bincolserde.q  Tests everything in binary_table_colserde.q + uses LazyBinaryColumnarSerde&lt;/li&gt;
	&lt;li&gt;load_binary_data.q this query loads native binary data, stores in a table and then queries it. Note that string.txt contains binary data. Also uses transform clause and then length udf on binary fields.&lt;/li&gt;
&lt;/ul&gt;



&lt;blockquote&gt;&lt;p&gt;need negative tests for attempting illegal conversions to/from binary&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Added whole bunch of negative tests of form invalid_cast_to_binary_&lt;span class=&quot;error&quot;&gt;&amp;#91;1..6&amp;#93;&lt;/span&gt;.q and invalid_cast_from_binary_&lt;span class=&quot;error&quot;&gt;&amp;#91;1..6&amp;#93;&lt;/span&gt;.q to tests illegal conversion attempts.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;please rename this issue since we&apos;re going with BINARY instead of BYTEARRAY&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="13118465" author="ashutoshc" created="Fri, 30 Sep 2011 21:25:05 +0000"  >&lt;p&gt;Same patch as on RB.&lt;/p&gt;</comment>
                            <comment id="13118466" author="ashutoshc" created="Fri, 30 Sep 2011 21:25:45 +0000"  >&lt;p&gt;Marking as Patch Available as its ready for review.&lt;/p&gt;</comment>
                            <comment id="13118527" author="jiraposter@reviews.apache.org" created="Fri, 30 Sep 2011 22:33:49 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/#review2239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#review2239&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Looking good (added a note for one missing ORDER BY remaining).&lt;/p&gt;

&lt;p&gt;But regarding &quot;10111111&quot;, I don&apos;t think we should have any corner cases at all in the set of binary strings which can be stored.  That would just be a land mine.  Can you think of a solution?&lt;/p&gt;



&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table_union.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1586/#comment5195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/#comment5195&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Need ORDER BY.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-09-30 17:37:25, Ashutosh Chauhan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-09-30 17:37:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFTimestamp.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_4.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_5.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_6.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_4.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_5.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_6.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/ba_table_union.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/binary_table_bincolserde.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/binary_table_colserde.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/queries/clientpositive/load_binary_data.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_4.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_5.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_6.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_4.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_5.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_6.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/ba_table_union.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/binary_table_bincolserde.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/binary_table_colserde.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/test/results/clientpositive/load_binary_data.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/if/serde.thrift 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/DelimitedJSONSerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarSerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/columnar/LazyBinaryColumnarStruct.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1177528 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added and updated unit tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added new system tests.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ashutosh&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13119783" author="ashutoshc" created="Tue, 4 Oct 2011 00:08:55 +0000"  >&lt;p&gt;Attaching new patch which addresses John&apos;s two concerns. Added order-by in union query and for &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;But regarding &quot;10111111&quot;, I don&apos;t think we should have any corner cases at all in the set of binary strings which can be stored. That would just be a land mine. Can you think of a solution?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Instead of special casing for the case of serializing zero length binary throwing an exception. With that, if there ever is a case when user tries to serialize a 0-length binary through BinaryColumnarSerde, we will throw an exception. Now, there is no need of special casing in LazyBinaryColumnarSerde and LazyBinaryColumnarSerde, so rolled back changes in those. Also, added a unit test case testLazyBinaryColumnarSerdeWithEmpyBinary()to exercise this code path.&lt;/p&gt;</comment>
                            <comment id="13119827" author="jvs" created="Tue, 4 Oct 2011 00:57:07 +0000"  >&lt;p&gt;Can you update review board with latest?&lt;/p&gt;</comment>
                            <comment id="13119835" author="jiraposter@reviews.apache.org" created="Tue, 4 Oct 2011 01:12:34 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-04 01:10:59.091568)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFTimestamp.java 1177528 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_5.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_6.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_5.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_6.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/binary_table_bincolserde.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/binary_table_colserde.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/load_binary_data.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_5.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_6.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_5.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_6.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/binary_table_bincolserde.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/binary_table_colserde.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/load_binary_data.q.out PRE-CREATION &lt;br/&gt;
  trunk/serde/if/serde.thrift 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1177528 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/DelimitedJSONSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1177528 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1177528 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1177528 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added and updated unit tests.&lt;br/&gt;
Added new system tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13119838" author="ashutoshc" created="Tue, 4 Oct 2011 01:14:02 +0000"  >&lt;p&gt;Updated RB with latest patch.&lt;/p&gt;</comment>
                            <comment id="13120476" author="jvs" created="Tue, 4 Oct 2011 21:09:33 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;

&lt;p&gt;Ashutosh, could you please open and link these followups:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;UDF&apos;s to convert to/from hex string&lt;/li&gt;
	&lt;li&gt;UDF&apos;s to convert to/from string using a specific encoding&lt;/li&gt;
	&lt;li&gt;UDF&apos;s to convert to/from base64 string&lt;/li&gt;
	&lt;li&gt;UDF&apos;s to convert to/from non-string types using a particular serde&lt;/li&gt;
	&lt;li&gt;make LazyBinaryColumnarSerDe support 0-length binary strings, assigned to Krishna Kumar (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-956&quot; title=&quot;Add support of columnar binary serde&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-956&quot;&gt;&lt;del&gt;HIVE-956&lt;/del&gt;&lt;/a&gt;) in case he wants to work on a way to remove the limitation&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13120588" author="ashutoshc" created="Tue, 4 Oct 2011 23:42:46 +0000"  >&lt;p&gt;@John created and linked new jiras for follow-up work. &lt;/p&gt;</comment>
                            <comment id="13120701" author="jvs" created="Wed, 5 Oct 2011 06:19:28 +0000"  >&lt;p&gt;ant test hit the following failures:&lt;/p&gt;

&lt;p&gt;TestCliDriver:&lt;br/&gt;
show_describe_func_quotes&lt;br/&gt;
show_functions&lt;br/&gt;
udf_concat&lt;br/&gt;
udf_length&lt;br/&gt;
udf_substr&lt;br/&gt;
udf_substring&lt;/p&gt;

&lt;p&gt;TestParseNegative:&lt;br/&gt;
invalid_function_param2&lt;/p&gt;</comment>
                            <comment id="13121296" author="ashutoshc" created="Wed, 5 Oct 2011 18:03:14 +0000"  >&lt;p&gt;Sorry about that. Those test cases needs to be updated to match the updated description of those udfs. Attaching latest patch which includes updated *.q.out files for those udfs.&lt;/p&gt;</comment>
                            <comment id="13121301" author="jiraposter@reviews.apache.org" created="Wed, 5 Oct 2011 18:06:29 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1586/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-05 18:05:13.442838)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Uploading hive-2380_4.patch which includes updated *.q.out files for udfs whose description got updated.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch adds bytearray as a new datatype in Hive.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2380&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFTimestamp.java 1179305 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_5.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_6.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_4.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_5.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_6.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table1.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table2.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table3.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/ba_table_union.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/binary_table_bincolserde.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/binary_table_colserde.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/queries/clientpositive/load_binary_data.q PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_5.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_6.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_4.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_5.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_6.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table1.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table2.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table3.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/ba_table_union.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/binary_table_bincolserde.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/binary_table_colserde.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/load_binary_data.q.out PRE-CREATION &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/show_describe_func_quotes.q.out 1179305 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/show_functions.q.out 1179305 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_concat.q.out 1179305 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_length.q.out 1179305 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_substr.q.out 1179305 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/udf_substring.q.out 1179305 &lt;br/&gt;
  trunk/ql/src/test/results/compiler/errors/invalid_function_param2.q.out 1179305 &lt;br/&gt;
  trunk/serde/if/serde.thrift 1179305 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h 1179305 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp 1179305 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java 1179305 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php 1179305 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py 1179305 &lt;br/&gt;
  trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/DelimitedJSONSerDe.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java 1179305 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java 1179305 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 1179305 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1586/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1586/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added and updated unit tests.&lt;br/&gt;
Added new system tests.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashutosh&lt;/p&gt;
</comment>
                            <comment id="13121383" author="jvs" created="Wed, 5 Oct 2011 19:23:28 +0000"  >&lt;p&gt;I&apos;ll rerun with latest.  Please remember to click &quot;Submit Patch&quot; to get it back into the queue.&lt;/p&gt;</comment>
                            <comment id="13122190" author="jvs" created="Thu, 6 Oct 2011 19:40:16 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Ashutosh!&lt;/p&gt;</comment>
                            <comment id="13122249" author="hudson" created="Thu, 6 Oct 2011 20:23:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #997 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/997/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/997/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2380&quot; title=&quot;Add Binary Datatype in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2380&quot;&gt;&lt;del&gt;HIVE-2380&lt;/del&gt;&lt;/a&gt;. Add Binary Datatype in Hive&lt;br/&gt;
(Ashutosh Chauhan via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1179784&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1179784&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFConcat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFLength.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFTimestamp.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToBinary.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_5.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_from_binary_6.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_5.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_cast_to_binary_6.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_union.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/binary_table_bincolserde.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/binary_table_colserde.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/load_binary_data.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_5.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_from_binary_6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_5.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_cast_to_binary_6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_union.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/binary_table_bincolserde.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/binary_table_colserde.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/load_binary_data.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_describe_func_quotes.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_concat.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_length.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substring.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/invalid_function_param2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/if/serde.thrift&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-cpp/serde_constants.cpp&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-cpp/serde_constants.h&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/Constants.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-php/serde/serde_constants.php&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/gen/thrift/gen-rb/serde_constants.rb&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/DelimitedJSONSerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBinary.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBinaryObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBinary.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BinaryObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBinaryObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBinaryObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBinaryObjectInspector.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/columnar/TestLazyBinaryColumnarSerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyPrimitive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazySimpleSerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestObjectInspectorConverters.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13189346" author="hojjat" created="Thu, 19 Jan 2012 20:02:05 +0000"  >&lt;p&gt;Is there an example for defining a table with binary and timestamp columns and loading daata into the table and querying it?&lt;/p&gt;</comment>
                            <comment id="13507761" author="cconnell" created="Fri, 30 Nov 2012 23:42:49 +0000"  >&lt;p&gt;I am trying to use this feature (BINARY columns) and I believe I have the perfect use-case for it, but I am missing something. &lt;/p&gt;

&lt;p&gt;Here is the background... I have some files that each contain just one logical field, which is a binary object. (The files are Google Protobuf format.) I want to put these binary files into a larger file, where each protobuf is a logical record. Then I want to define a Hive table that stores each protobuf as one row, with the entire protobuf object in one BINARY column. Then I will use a custom UDF to select/query the binary object. &lt;/p&gt;

&lt;p&gt;This is about as simple as can be for putting binary data into Hive. But all of the test cases for this jira seem to draw the binary columns from another existing table and CAST them. I want to load the files from disk.&lt;/p&gt;

&lt;p&gt;What file format should I use to package the binary rows? What should the Hive table definition be? I cannot use TEXTFILE, since the binary may contain newlines. Many of my attempts have choked on the newlines.&lt;/p&gt;

&lt;p&gt;Thanks very much,&lt;br/&gt;
Chuck Connell&lt;br/&gt;
Nuance&lt;br/&gt;
Burlington, MA&lt;/p&gt;
</comment>
                            <comment id="13507810" author="cconnell" created="Sat, 1 Dec 2012 01:10:15 +0000"  >&lt;p&gt;Let me state my earlier comment another way... If the BINARY column type &quot;works&quot; in narrow sense, but it is impossible to get binary data from a file into Hive, then this feature is essentially useless. So we need some explanation for how to use the existing DDL features to support BINARY columns, or a new file format that allows it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12525746">HIVE-2482</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12525747">HIVE-2483</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490900" name="hive-2380.patch" size="129707" author="ashutoshc" created="Fri, 19 Aug 2011 00:44:47 +0000"/>
                            <attachment id="12494961" name="hive-2380_1.patch" size="131730" author="ashutoshc" created="Sun, 18 Sep 2011 05:50:49 +0000"/>
                            <attachment id="12497222" name="hive-2380_2.patch" size="138238" author="ashutoshc" created="Fri, 30 Sep 2011 21:25:05 +0000"/>
                            <attachment id="12497571" name="hive-2380_3.patch" size="136206" author="ashutoshc" created="Tue, 4 Oct 2011 00:08:55 +0000"/>
                            <attachment id="12497862" name="hive-2380_4.patch" size="151153" author="ashutoshc" created="Wed, 5 Oct 2011 18:03:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 00:50:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6660</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09zjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56200</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>New datatype BINARY can now be used in column definitions.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2381] SQLException thrown when the resultset becomes empty.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2381</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Using the next method on my HiveQueryResultSet, when the resultset becomes emtpy, a SQLException is thrown on this line of code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rowStr = (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) client.fetchOne();
...
...
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
      ex.printStackTrace();
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SQLException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error retrieving next row&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12519006">HIVE-2381</key>
            <summary>SQLException thrown when the resultset becomes empty.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rdubois">R&#233;my DUBOIS</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Aug 2011 15:17:40 +0000</created>
                <updated>Tue, 14 Feb 2012 07:09:06 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13105885" author="chinnalalam" created="Fri, 16 Sep 2011 06:12:48 +0000"  >&lt;p&gt;I have executed this scenario &lt;br/&gt;
select id from sampletable where id &amp;gt; 100;  &lt;br/&gt;
sampletable contains id&apos;s &amp;lt; 100 so  my result set is empty and when i try resultset.next() it is not throwing any exception.    &lt;/p&gt;

&lt;p&gt;Can u post what is the scenario.&lt;/p&gt;</comment>
                            <comment id="13207552" author="sessan60jp" created="Tue, 14 Feb 2012 07:09:06 +0000"  >&lt;p&gt;Excuse me for my poor English..&lt;/p&gt;

&lt;p&gt;I experienced the same error when I used JDBC Driver through Pentaho Report Designer &apos;Preview&apos;.&lt;/p&gt;

&lt;p&gt;Maybe, below is error occuring point.&lt;/p&gt;

&lt;p&gt;    } catch (HiveServerException e) {&lt;br/&gt;
      if (e.getErrorCode() == 0) &lt;/p&gt;
{ // error code == 0 means reached the EOF
        return false;
      }
&lt;p&gt; else &lt;/p&gt;
{
        throw new SQLException(&quot;Error retrieving next row&quot;, e);
      }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;In Pentaho Report Designer, Users can set Max Preview Row.&lt;br/&gt;
So I set the max preview row number smaller than the actual row number the hive table had, &lt;br/&gt;
then the error did&apos;nt occured.&lt;br/&gt;
But when I didn&apos;t set the max preview row number, always the error occured.&lt;br/&gt;
I think the HiveQueryResultSet class&apos;s &apos;next&apos; method can&apos;t recognize EOF.&lt;/p&gt;


&lt;p&gt;--Environments&lt;br/&gt;
Hadoop Distribution: CDH3u1&lt;br/&gt;
Pentaho Enterprise Edition 4.1 GA&lt;br/&gt;
Pnetaho Report Designer 3.8.3 GA&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Sep 2011 06:12:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35793</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123847</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
