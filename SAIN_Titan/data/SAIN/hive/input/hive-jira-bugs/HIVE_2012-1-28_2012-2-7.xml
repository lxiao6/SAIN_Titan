<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:20:06 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2012-1-28+AND+created+%3C%3D+2012-2-7+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="19" total="19"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2761] Remove lib/javaewah-0.3.jar</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2761</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt; it is retrieved from maven repo via ivy, we can get rid of it from our lib/&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540304">HIVE-2761</key>
            <summary>Remove lib/javaewah-0.3.jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Jan 2012 21:16:44 +0000</created>
                <updated>Wed, 9 Jan 2013 10:25:05 +0000</updated>
                            <resolved>Sat, 25 Feb 2012 14:28:40 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.8.1</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13195881" author="cwsteinbach" created="Mon, 30 Jan 2012 00:12:55 +0000"  >&lt;p&gt;We&apos;re not managing javaewah with Ivy because it&apos;s not available from any of the public Maven repos (as far as I know).&lt;/p&gt;</comment>
                            <comment id="13195911" author="ashutoshc" created="Mon, 30 Jan 2012 02:08:22 +0000"  >&lt;p&gt;Looking at &lt;a href=&quot;http://code.google.com/p/javaewah/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/javaewah/&lt;/a&gt; it seems its now available via maven.&lt;/p&gt;</comment>
                            <comment id="13199043" author="lemire" created="Thu, 2 Feb 2012 18:11:46 +0000"  >&lt;p&gt;That is correct. We upgraded the version of JavaEWAH to 0.3.1 when we posted it to the Maven central repository. Version 0.3.2 is simply a revision of the documentation (I corrected a few typos in the comments). &lt;/p&gt;

&lt;p&gt;You should be able to call on JavaEWAH as a dependency in the following manner:&lt;/p&gt;

&lt;p&gt;&amp;lt;dependencies&amp;gt;&lt;br/&gt;
    &amp;lt;dependency&amp;gt;&lt;br/&gt;
        &amp;lt;groupId&amp;gt;com.googlecode.javaewah&amp;lt;/groupId&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;JavaEWAH&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;version&amp;gt;0.3.2&amp;lt;/version&amp;gt;&lt;br/&gt;
    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
  &amp;lt;/dependencies&amp;gt;&lt;/p&gt;

&lt;p&gt;The upgrade from 0.3.0 to 0.3.2 should be harmless.&lt;/p&gt;
</comment>
                            <comment id="13215032" author="phabricator@reviews.facebook.net" created="Thu, 23 Feb 2012 20:44:48 +0000"  >&lt;p&gt;edwardcapriolo requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2761&quot; title=&quot;Remove lib/javaewah-0.3.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2761&quot;&gt;&lt;del&gt;HIVE-2761&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Remove lib/javaewah-0.3.jar&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2761&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2761&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Jar in SVN bad. Jar from maven good.&lt;/p&gt;

&lt;p&gt;  After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2391&quot; title=&quot;published POMs in Maven repo are incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2391&quot;&gt;&lt;del&gt;HIVE-2391&lt;/del&gt;&lt;/a&gt; it is retrieved from maven repo via ivy, we can get rid of it from our lib/&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1911&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1911&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  lib/javaewah-0.3.jar&lt;br/&gt;
  lib/javaewah.LICENSE&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  ql/build.xml&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4059/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4059/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13215261" author="phabricator@reviews.facebook.net" created="Fri, 24 Feb 2012 00:29:46 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2761&quot; title=&quot;Remove lib/javaewah-0.3.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2761&quot;&gt;&lt;del&gt;HIVE-2761&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Remove lib/javaewah-0.3.jar&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Running tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1911&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1911&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13215265" author="ashutoshc" created="Fri, 24 Feb 2012 00:31:17 +0000"  >&lt;p&gt;@Ed,&lt;br/&gt;
Can you upload the patch on jira granting perms?&lt;/p&gt;</comment>
                            <comment id="13215337" author="phabricator@reviews.facebook.net" created="Fri, 24 Feb 2012 03:21:51 +0000"  >&lt;p&gt;edwardcapriolo updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2761&quot; title=&quot;Remove lib/javaewah-0.3.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2761&quot;&gt;&lt;del&gt;HIVE-2761&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Remove lib/javaewah-0.3.jar&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;  Found one more instance of javaewah hardcoded.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1911&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1911&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  lib/javaewah-0.3.jar&lt;br/&gt;
  lib/javaewah.LICENSE&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  ql/build.xml&lt;/p&gt;</comment>
                            <comment id="13215339" author="appodictic" created="Fri, 24 Feb 2012 03:23:36 +0000"  >&lt;p&gt;Found one more instance of javaEwah&lt;/p&gt;</comment>
                            <comment id="13215418" author="ashutoshc" created="Fri, 24 Feb 2012 06:02:52 +0000"  >&lt;p&gt;There is one more in .classpath&lt;/p&gt;</comment>
                            <comment id="13216271" author="appodictic" created="Sat, 25 Feb 2012 03:12:41 +0000"  >&lt;p&gt;This covers the .classpath template as well.&lt;/p&gt;</comment>
                            <comment id="13216466" author="ashutoshc" created="Sat, 25 Feb 2012 14:28:40 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Ed!&lt;/p&gt;</comment>
                            <comment id="13216544" author="hudson" created="Sat, 25 Feb 2012 21:16:53 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1276 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1276/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1276/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2761&quot; title=&quot;Remove lib/javaewah-0.3.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2761&quot;&gt;&lt;del&gt;HIVE-2761&lt;/del&gt;&lt;/a&gt;: Remove lib/javaewah-0.3.jar (ecapriolo via hashutosh) (Revision 1293617)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293617&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293617&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/javaewah-0.3.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/javaewah.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265264" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:23 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548275" author="hudson" created="Wed, 9 Jan 2013 10:25:05 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2761&quot; title=&quot;Remove lib/javaewah-0.3.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2761&quot;&gt;&lt;del&gt;HIVE-2761&lt;/del&gt;&lt;/a&gt;: Remove lib/javaewah-0.3.jar (ecapriolo via hashutosh) (Revision 1293617)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293617&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293617&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/eclipse-templates/.classpath&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/javaewah-0.3.jar&lt;/li&gt;
	&lt;li&gt;/hive/trunk/lib/javaewah.LICENSE&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12515812" name="ASF.LICENSE.NOT.GRANTED--HIVE-2761.D1911.1.patch" size="13231" author="phabricator@reviews.facebook.net" created="Thu, 23 Feb 2012 20:44:48 +0000"/>
                            <attachment id="12515871" name="ASF.LICENSE.NOT.GRANTED--HIVE-2761.D1911.2.patch" size="14232" author="phabricator@reviews.facebook.net" created="Fri, 24 Feb 2012 03:21:51 +0000"/>
                            <attachment id="12515872" name="HIVE-2761.2.patch.txt" size="14491" author="appodictic" created="Fri, 24 Feb 2012 03:23:35 +0000"/>
                            <attachment id="12516024" name="HIVE-2761.3.patch.txt" size="15428" author="appodictic" created="Sat, 25 Feb 2012 03:12:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Jan 2012 00:12:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2762] Alter Table Partition Concatenate Fails On Certain Characters</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2762</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Alter table partition concatenate creates a Java URI object for the location of a partition.  If the partition name contains certain characters, such as } or space &apos; &apos;, the object constructor fails, causing the query to fail. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12540455">HIVE-2762</key>
            <summary>Alter Table Partition Concatenate Fails On Certain Characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jan 2012 23:14:55 +0000</created>
                <updated>Wed, 9 Jan 2013 10:25:04 +0000</updated>
                            <resolved>Thu, 2 Feb 2012 18:47:51 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13196529" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 23:19:10 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Alter Table Partition Concatenate Fails On Certain Characters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2762&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Changed the way the URI is created for a partition file as part of alter table partition concatenate queries.  This seems to resolve the issue.&lt;/p&gt;

&lt;p&gt;  Also added a new test which checks alter table partition concsatenate queries on partitions containing most ASCII characters.&lt;/p&gt;

&lt;p&gt;  Alter table partition concatenate creates a Java URI object for the location of a partition.  If the partition name contains certain characters, such as } or space &apos; &apos;, the object constructor fails, causing the query to fail.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1533&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/escape2.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/escape2.q&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3201/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3201/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13196533" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 23:21:10 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Alter Table Partition Concatenate Fails On Certain Characters&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Missed a file in the last diff.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1533&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/escape2.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/escape2.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13196536" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 23:25:09 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Alter Table Partition Concatenate Fails On Certain Characters&quot;.&lt;/p&gt;

&lt;p&gt;  I&apos;m not sure why escape2.q.out was considered a binary file by arcanist, but I attached a patch to the JIRA which includes the contents of that file.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1533&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13197965" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 17:18:57 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Alter Table Partition Concatenate Fails On Certain Characters&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/escape2.q:47 Why are you running the same command multiple times ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1533&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13198122" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 20:44:58 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Alter Table Partition Concatenate Fails On Certain Characters&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Those commands are not the same, they contain unprintable characters in this format.  I updated the test with comments indicating which ASCII characters those represent, and which ASCII characters are not represented in the test.  Those cases are already being escaped in the metastore, I just included them for the sake of completeness, or something close to it.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1533&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/escape2.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/escape2.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13198129" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 20:48:57 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Alter Table Partition Concatenate Fails On Certain Characters&quot;.&lt;/p&gt;

&lt;p&gt;  If you open the patch in an editor that supports displaying those unprintable characters, you can see them in the file.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1533&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1533&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13198342" author="namit" created="Wed, 1 Feb 2012 23:54:37 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Running tests&lt;/p&gt;</comment>
                            <comment id="13199084" author="namit" created="Thu, 2 Feb 2012 18:47:51 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13199375" author="hudson" created="Thu, 2 Feb 2012 23:47:46 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1240 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1240/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1240/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; Alter Table Partition Concatenate Fails On Certain Characters&lt;br/&gt;
(Kevin Wilfong via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239754&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239754&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/escape2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/escape2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265368" author="ashutoshc" created="Mon, 30 Apr 2012 21:12:03 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13548273" author="hudson" created="Wed, 9 Jan 2013 10:25:04 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2762&quot; title=&quot;Alter Table Partition Concatenate Fails On Certain Characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2762&quot;&gt;&lt;del&gt;HIVE-2762&lt;/del&gt;&lt;/a&gt; Alter Table Partition Concatenate Fails On Certain Characters&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1239754)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239754&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239754&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/escape2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/escape2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512493" name="ASF.LICENSE.NOT.GRANTED--HIVE-2762.D1533.1.patch" size="8653" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 23:19:10 +0000"/>
                            <attachment id="12512495" name="ASF.LICENSE.NOT.GRANTED--HIVE-2762.D1533.2.patch" size="9840" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 23:21:11 +0000"/>
                            <attachment id="12512797" name="ASF.LICENSE.NOT.GRANTED--HIVE-2762.D1533.3.patch" size="9936" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 20:44:59 +0000"/>
                            <attachment id="12512496" name="HIVE-2762.1.patch.txt" size="1068282" author="kevinwilfong" created="Mon, 30 Jan 2012 23:22:59 +0000"/>
                            <attachment id="12512798" name="HIVE-2762.2.patch.txt" size="1069254" author="kevinwilfong" created="Wed, 1 Feb 2012 20:46:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Jan 2012 23:19:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225868</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124127</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2763] CREATE TABLE IF NOT EXISTS should match schemas.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2763</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;CREATE TABLE foo (bar BIGINT);&lt;br/&gt;
CREATE TABLE IF NOT EXISTS foo (baz BIGINT, extra STRING);&lt;/p&gt;

&lt;p&gt;...the latter should throw a warning, because the table &lt;em&gt;as specified&lt;/em&gt; does not exist.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540468">HIVE-2763</key>
            <summary>CREATE TABLE IF NOT EXISTS should match schemas.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2012 00:22:52 +0000</created>
                <updated>Tue, 31 Jan 2012 00:22:52 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2764] Obtain delegation tokens for MR jobs in secure hbase setup  </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2764</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;As discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-244&quot; title=&quot;Security in Hcat &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-244&quot;&gt;HCATALOG-244&lt;/a&gt;, in a secure hbase setup with 0.92, we need to obtain delegation tokens for hbase and save it in jobconf, so that tasks can access region servers. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12540479">HIVE-2764</key>
            <summary>Obtain delegation tokens for MR jobs in secure hbase setup  </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2012 01:19:54 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:28 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 20:27:17 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>HBase Handler</component>
                    <component>Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13222862" author="enis" created="Tue, 6 Mar 2012 01:18:21 +0000"  >&lt;p&gt;We had some discussion with Ashutosh about how to best approach this. As a part of this issue, we have to obtain delegation tokens from the storage handler (hbase in this case), and then pass this to the submitted job. However, HiveStorageHandler.configureTableJobProperties() does not expose the JobConf object, or an interface to configure the job&apos;s credentials. There seems a couple of options we can go for:&lt;br/&gt;
1. At HiveStorageHandler.configureTableJobProperties(), create and save the job credentials somewhere, and at the time of job submit, merge all the credentials before submitting the job. &lt;br/&gt;
2. Change the HiveStorageHandler.configureTableJobProperties() to get the actual Job to be submitted, so that Storage handlers have a real shot at configuring the job. &lt;br/&gt;
3. Add a method like HiveStorageHandler.configureJobCredentials(), and call it from HIF.getSplits() and HiveHBaseTableOutputFormat.checkOutputSpecs(). &lt;/p&gt;

&lt;p&gt;Number 1 and 3 seems hackish, and we will want to give the storagehandlers ability to configure the actual job. So we are leaning towards that. But this will also be merged with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt;. I am still trying to make this work, so any comments / suggestions are more than welcome. &lt;/p&gt;</comment>
                            <comment id="13222936" author="enis" created="Tue, 6 Mar 2012 02:30:52 +0000"  >&lt;p&gt;Attaching a patch for demonstration of yet another approach of adding the Credentials to TableDesc. This patch is still WIP.&lt;/p&gt;

&lt;p&gt;I have tested this with fully secure hadoop  +hbase. Compiles with -Dhadoop.version=1.0.0&lt;/p&gt;</comment>
                            <comment id="13222994" author="toffer" created="Tue, 6 Mar 2012 05:00:23 +0000"  >&lt;p&gt;Having making getCredentials() exposed as a TableDesc member sounds ok to me as it really is a special property of JobConf. &lt;/p&gt;

&lt;p&gt;Though it breaks the expectation of tableDesc being readonly and jobProperties being the only one mutable for configureTableProperties(). I wonder if we can remove jobProperties altogether and use tableDesc.jobProperties to set properties. As tableDesc.jobProperties is always a new HashMap when configureTableProperties() is called?&lt;/p&gt;</comment>
                            <comment id="13225677" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 23:33:55 +0000"  >&lt;p&gt;enis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt;. Obtain delegation tokens for MR jobs in secure hbase setup.Title:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt;. Obtain delegation tokens for MR jobs in secure hbase setup.&lt;/p&gt;

&lt;p&gt;  As discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-244&quot; title=&quot;Security in Hcat &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-244&quot;&gt;HCATALOG-244&lt;/a&gt;, in a secure hbase setup with 0.92, we need to obtain delegation tokens for hbase and save it in jobconf, so that tasks can access region servers.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Tested manually by setting up a kerberos cluster with hadoop&lt;br/&gt;
  + hbase security enabled.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/RCFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4839/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4839/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13225683" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 23:47:56 +0000"  >&lt;p&gt;enis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;/p&gt;

&lt;p&gt;  Some comments about the patch:&lt;br/&gt;
  Changing the StorageHandler.configureJobProperties() to be called with the actual job is kind of intrusive, so I have given up on that approach, and go with the plan of obtaining the delegation tokens from the IF.getSplits() and OF.checkOutputSpecs() time. However, one problem with this approach is that although on the input side it works fine, on the output side, Hive does not use OF&apos;s properly.&lt;/p&gt;

&lt;p&gt;  So, this patch adds a HiveOutputFormatImpl class, and changes the HOF to extend OF. The actual usage of OFs are not changed as a part of this patch, since it is out of the scope of this issue. However, not the HOFImpl class delgates the checkOutputSpecs() call to the underlying OutputFormat, so that if the OF wants to do any initialization, it can.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13233109" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 01:43:35 +0000"  >&lt;p&gt;enis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;


&lt;p&gt;  Realized that HiveHFileOutputFormat does not need delegation tokens. Duh!&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/RCFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  shims/src/test/org/apache/hadoop/hive/thrift/TestZooKeeperTokenStore.java&lt;/p&gt;</comment>
                            <comment id="13235106" author="phabricator@reviews.facebook.net" created="Wed, 21 Mar 2012 22:23:35 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;/p&gt;

&lt;p&gt;  Added comments. Also, patch needs to be rebased.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java:104 I understand from this patch that checkOutputSpecs() is never called. But, see an existing impl here. So, then before this patch, this code was never getting invoked ?&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java:214 I don&apos;t think you want to override this function and leave a no-op here. I think you still want super-class checkOS to be called. Isn&apos;t it ?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java:53 This is not supposed to get called, right ? In that case this should throw exception, instead of creating object and returning it.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java:45-49 I dont&apos; see any use of this, you can as well keep it in local variable in checkOS()&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java:75 Instead of throwing Runtime, you should throw IOException which method signature allows you to do.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java:268 This results in setting of NullOF in all the shims. We should no longer do that, since we are resetting it again in following line.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java:769 Is this null check necessary? At the time, checkOS is called, hiveOF would already have been initialized, no?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java:27 Looks like this import statement inadvertently got added.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java:781 To maintain backward-compat you should first check whether hiveOF has the method checkOS, and call it only if it has.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  hbase-dt-of&lt;/p&gt;</comment>
                            <comment id="13245883" author="phabricator@reviews.facebook.net" created="Tue, 3 Apr 2012 23:28:21 +0000"  >&lt;p&gt;enis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java:104 Yes, that is correct. It was never invoked.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java:268 HadoopShims.setNullOutputFormat() not only sets the OF, but sets the null output committer, etc. So we still need that call.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java:769 checkOS() is called at the job submission time from the client, but FileSinkOperator.initializeOp() is called from the task context when the job is running. So we need to initialize the output format.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java:781 I though HOF was hive-private. You are saying that, we need this for maintaining binary BC? We are also changing the HOF to extent OF, so all HOF implementations have to be fixed (to include the OF methods) and recompiled.&lt;/p&gt;

&lt;p&gt;  If for binary BC, I can use reflection to check whether the method is there.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java:27 It is a rearrange for the import statement.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  hbase-dt-of&lt;/p&gt;</comment>
                            <comment id="13245921" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 00:20:20 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java:268 Sorry, I wasn&apos;t clear. What I meant was we should remove setting of OF class  inside setNullOF() method, because its redundant as we set it again later in this method.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java:781 Yes, please use reflection to check if method is there and then only call.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  hbase-dt-of&lt;/p&gt;</comment>
                            <comment id="13245964" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 02:10:19 +0000"  >&lt;p&gt;enis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java:53 Hadoop framework calls the getRR() although we do not emit any records. So we need some kind of an empty implementation.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  hbase-dt-of&lt;/p&gt;</comment>
                            <comment id="13245970" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 02:26:18 +0000"  >&lt;p&gt;enis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;



&lt;p&gt;  incorporated review suggestions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;change HadoopShims.setNullOutputFormat() to .prepareJobOutput()&lt;/li&gt;
	&lt;li&gt;BC check for HiveOutputFormat.checkOutputSpecs() call.&lt;/li&gt;
	&lt;li&gt;HiveHFileOutputFormat.checkOS() now delegates to underlying OF.&lt;/li&gt;
	&lt;li&gt;minor changes per review.&lt;/li&gt;
	&lt;li&gt;running tests right now.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/RCFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/rcfile/merge/BlockMergeTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;</comment>
                            <comment id="13246816" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 22:52:19 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;/p&gt;

&lt;p&gt;  Changes look good. But, I see plenty of failures while running tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13246820" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 23:00:19 +0000"  >&lt;p&gt;enis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;/p&gt;

&lt;p&gt;  Strange, all of the tests passed for me except for one. I rerun that and it passed as well. Can you rerun the tests or post the logs ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13246830" author="ashutoshc" created="Wed, 4 Apr 2012 23:14:59 +0000"  >&lt;p&gt;In TestCliDriver, following tests failed:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;alter_concatenate_indexed_table.q&lt;/li&gt;
	&lt;li&gt;alter_merge.q&lt;/li&gt;
	&lt;li&gt;alter_merge_2.q&lt;/li&gt;
	&lt;li&gt;alter_merge_stats.q&lt;/li&gt;
	&lt;li&gt;concatenate_inherit_table_location.q&lt;/li&gt;
	&lt;li&gt;create_merge_compressed.q&lt;/li&gt;
	&lt;li&gt;escape2.q&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I re-ran them again individually, and they again failed.&lt;/p&gt;</comment>
                            <comment id="13246914" author="phabricator@reviews.facebook.net" created="Thu, 5 Apr 2012 01:04:19 +0000"  >&lt;p&gt;enis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;


&lt;p&gt;  Fixed failing tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/RCFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/rcfile/merge/BlockMergeTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;</comment>
                            <comment id="13247075" author="ashutoshc" created="Thu, 5 Apr 2012 07:38:12 +0000"  >&lt;p&gt;Those tests passed. So, thats a progress. But following new ones failed.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rcfile_merge3.q&lt;/li&gt;
	&lt;li&gt;rcfile_createas1.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13250057" author="phabricator@reviews.facebook.net" created="Mon, 9 Apr 2012 18:47:17 +0000"  >&lt;p&gt;enis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Obtain delegation tokens for MR jobs in secure hbase setup&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;  Fixed one more issue with the tests. All tests pass now.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2205&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveSequenceFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/RCFileOutputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/rcfile/merge/BlockMergeTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;</comment>
                            <comment id="13250149" author="ashutoshc" created="Mon, 9 Apr 2012 20:27:17 +0000"  >&lt;p&gt;Checked-in trunk. Thanks, Enis!&lt;/p&gt;</comment>
                            <comment id="13250410" author="hudson" created="Tue, 10 Apr 2012 02:24:34 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1364 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1364/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1364/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt;: Obtain delegation tokens for MR jobs in secure hbase setup (Enis Soztutar via Ashutosh Chauhan) (Revision 1311418)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1311418&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1311418&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveSequenceFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/rcfile/merge/BlockMergeTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265370" author="ashutoshc" created="Mon, 30 Apr 2012 21:12:03 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547890" author="hudson" created="Wed, 9 Jan 2013 10:23:28 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2764&quot; title=&quot;Obtain delegation tokens for MR jobs in secure hbase setup  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2764&quot;&gt;&lt;del&gt;HIVE-2764&lt;/del&gt;&lt;/a&gt;: Obtain delegation tokens for MR jobs in secure hbase setup (Enis Soztutar via Ashutosh Chauhan) (Revision 1311418)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1311418&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1311418&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveNullValueSequenceFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveOutputFormatImpl.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveSequenceFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/rcfile/merge/BlockMergeTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12540473">HCATALOG-244</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12539788">HIVE-2748</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12540757">HIVE-2773</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12517638" name="ASF.LICENSE.NOT.GRANTED--HIVE-2764.D2205.1.patch" size="18193" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 23:33:56 +0000"/>
                            <attachment id="12519002" name="ASF.LICENSE.NOT.GRANTED--HIVE-2764.D2205.2.patch" size="19483" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 01:43:36 +0000"/>
                            <attachment id="12521265" name="ASF.LICENSE.NOT.GRANTED--HIVE-2764.D2205.3.patch" size="20733" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 02:26:19 +0000"/>
                            <attachment id="12521438" name="ASF.LICENSE.NOT.GRANTED--HIVE-2764.D2205.4.patch" size="21553" author="phabricator@reviews.facebook.net" created="Thu, 5 Apr 2012 01:04:19 +0000"/>
                            <attachment id="12521991" name="ASF.LICENSE.NOT.GRANTED--HIVE-2764.D2205.5.patch" size="21757" author="phabricator@reviews.facebook.net" created="Mon, 9 Apr 2012 18:47:19 +0000"/>
                            <attachment id="12517188" name="HIVE-2764_v0.patch" size="7948" author="enis" created="Tue, 6 Mar 2012 02:30:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Mar 2012 05:00:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06ag7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34624</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2765] hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2765</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It cannot integrate with HBase0.21 and may not be able to integrate with hbase0.9x&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540481">HIVE-2765</key>
            <summary>hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peiyue">Pei Yue</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Tue, 31 Jan 2012 01:29:07 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:28 +0000</updated>
                            <resolved>Tue, 31 Jan 2012 22:36:26 +0000</resolved>
                                    <version>0.7.0</version>
                    <version>0.8.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="13197327" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 22:25:58 +0000"  >&lt;p&gt;hobbymanyp updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2765&quot; title=&quot;hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2765&quot;&gt;&lt;del&gt;HIVE-2765&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; refactor DDL code (both DDLWork and DDLTask)&quot;.&lt;br/&gt;
Reviewers: JIRA, heyongqiang, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Update diff title with jira number &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2765&quot; title=&quot;hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2765&quot;&gt;&lt;del&gt;HIVE-2765&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1485&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1485&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/p&gt;</comment>
                            <comment id="13197335" author="he yongqiang" created="Tue, 31 Jan 2012 22:36:26 +0000"  >&lt;p&gt;I manually committed via &quot;svn commit&apos;. Thanks Pei!&lt;/p&gt;</comment>
                            <comment id="13197560" author="hudson" created="Wed, 1 Feb 2012 03:45:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1235 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1235/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1235/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2765&quot; title=&quot;hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2765&quot;&gt;&lt;del&gt;HIVE-2765&lt;/del&gt;&lt;/a&gt; hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 (Pei Yue via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1238837&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1238837&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265341" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:57 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547889" author="hudson" created="Wed, 9 Jan 2013 10:23:28 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2765&quot; title=&quot;hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2765&quot;&gt;&lt;del&gt;HIVE-2765&lt;/del&gt;&lt;/a&gt; hbase handler uses ZooKeeperConnectionException which is not compatible with HBase versions other than 0.89 (Pei Yue via He Yongqiang) (Revision 1238837)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1238837&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1238837&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512678" name="ASF.LICENSE.NOT.GRANTED--HIVE-2765.D1485.3.patch" size="1359" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 22:25:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Jan 2012 22:25:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225894</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2766] Hive freezes and takes 100% cpu when missing an HDFS block</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2766</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a block is corrupt or missing from HDFS (due to the failure of multiple nodes), Hive jobs hang mysteriously at the beginning (without starting the M/R job):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Launching Job 2 out of 4
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of reduce tasks not specified. Estimated from input data size: 2
In order to change the average load &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a reducer (in bytes):
  set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;
In order to limit the maximum number of reducers:
  set hive.exec.reducers.max=&amp;lt;number&amp;gt;
In order to set a constant number of reducers:
  set mapred.reduce.tasks=&amp;lt;number&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The java process takes 100% of 1 CPU, and never stops, i had to kill manually all my hive jobs.&lt;/p&gt;

&lt;p&gt;It would be nice if the processes could fail with an appropriate exception rather than hanging.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Reproduced on Cloudera 3&lt;/p&gt;</environment>
        <key id="12540517">HIVE-2766</key>
            <summary>Hive freezes and takes 100% cpu when missing an HDFS block</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="brugidou">Maxime Brugidou</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2012 09:13:16 +0000</created>
                <updated>Tue, 31 Jan 2012 09:13:16 +0000</updated>
                                                                            <component>CLI</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2767] Optionally use framed transport with metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2767</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Users may want/need to use thrift&apos;s framed transport when communicating with the Hive MetaStore. This patch adds a new property &lt;tt&gt;hive.metastore.thrift.framed.transport.enabled&lt;/tt&gt; that enables the framed transport (defaults to off, aka no change from before the patch). This property must be set for both clients and the HMS server.&lt;/p&gt;

&lt;p&gt;It wasn&apos;t immediately clear how to use the framed transport with SASL, so as written an exception is thrown if you try starting the server with both options. If SASL and the framed transport will indeed work together I can update the patch (although I don&apos;t have a secured environment to test in).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540586">HIVE-2767</key>
            <summary>Optionally use framed transport with metastore</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="traviscrawford">Travis Crawford</assignee>
                                    <reporter username="traviscrawford">Travis Crawford</reporter>
                        <labels>
                            <label>TODOC10</label>
                    </labels>
                <created>Tue, 31 Jan 2012 17:58:48 +0000</created>
                <updated>Thu, 20 Nov 2014 10:17:08 +0000</updated>
                            <resolved>Thu, 12 Apr 2012 18:59:01 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13217667" author="ashutoshc" created="Mon, 27 Feb 2012 23:01:45 +0000"  >&lt;p&gt;Patch looks ok to me. I presume this is for performance. Just curious, have you seen substantial performance gains because of this. Since, most of the rpc call in MetaStore are of fairly small payload. To me, it appears it won&apos;t bring in much perf gains.&lt;/p&gt;</comment>
                            <comment id="13217694" author="traviscrawford" created="Mon, 27 Feb 2012 23:39:28 +0000"  >&lt;p&gt;Thanks for the feedback Ashutosh - if this is something you&apos;d consider adding I can update based on current trunk if things have changed.&lt;/p&gt;

&lt;p&gt;While there may be perf gains, this is needed to integrate with our compute grid. Basically a wrapper registers the metastore host:port in zookeeper, and a thrift framed-transport-only proxy proxies metastore requests based on its ZK registration. This lets us launch the metastore on our mesos cluster and still give clients the hard-coded host:port they expect.&lt;/p&gt;</comment>
                            <comment id="13217743" author="ashutoshc" created="Tue, 28 Feb 2012 00:38:02 +0000"  >&lt;p&gt;Thanks Travis for explaining the usecase. Makes sense. Without that I was shooting in dark about why you need Framed Transport. : ) Yeah, update the patch. I will test and commit.&lt;/p&gt;</comment>
                            <comment id="13217794" author="julienledem" created="Tue, 28 Feb 2012 01:23:45 +0000"  >&lt;p&gt;I have an updated patch, as Hive changed since this patch. Will post it soon.&lt;/p&gt;</comment>
                            <comment id="13218389" author="julienledem" created="Tue, 28 Feb 2012 17:44:09 +0000"  >&lt;p&gt;patch updated to latest Hive&lt;/p&gt;</comment>
                            <comment id="13218454" author="ashutoshc" created="Tue, 28 Feb 2012 18:42:47 +0000"  >&lt;p&gt;Not to the latest trunk : ) Patch fails to apply. Also, can you use arc to submit the patch. Instructions are here: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13244936" author="ashutoshc" created="Tue, 3 Apr 2012 03:30:00 +0000"  >&lt;p&gt;Patch needs to be rebased.&lt;/p&gt;</comment>
                            <comment id="13249024" author="phabricator@reviews.facebook.net" created="Fri, 6 Apr 2012 23:02:15 +0000"  >&lt;p&gt;travis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Add support for optionally using the thrift framed transport, enabling integration with environments where that is necessary.&lt;/p&gt;

&lt;p&gt;  Users may want/need to use thrift&apos;s framed transport when communicating with the Hive MetaStore. This patch adds a new property hive.metastore.thrift.framed.transport.enabled that enables the framed transport (defaults to off, aka no change from before the patch). This property must be set for both clients and the HMS server.&lt;/p&gt;

&lt;p&gt;  It wasn&apos;t immediately clear how to use the framed transport with SASL, so as written an exception is thrown if you try starting the server with both options. If SASL and the framed transport will indeed work together I can update the patch (although I don&apos;t have a secured environment to test in).&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Tested locally that client and server can connect, both with and without the flag. Tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6111/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6111/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13249300" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 17:52:16 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&quot;.&lt;/p&gt;

&lt;p&gt;  What will happen if the config variable is set to true in client, but is false in server and vice-versa?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:269 This also needs to be added in conf/hive-default.xml.template which serve as a documentation.&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java:3020 In your earlier version of patch you were throwing exception in case both secure mode as well as framed transport is set to true. If you have tested with both true and it works then its fine, otherwise we should throw an exception here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt;_optional_framed_transport&lt;/p&gt;</comment>
                            <comment id="13249411" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 23:24:14 +0000"  >&lt;p&gt;travis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&quot;.&lt;/p&gt;

&lt;p&gt;  If just one side of the connection is using the framed transport the connection will fail, likely after the timeout.&lt;/p&gt;

&lt;p&gt;  As this is something that is setup just once per site its not likely to change often, and it defaults off, so the risk of casual misconfiguration is low.&lt;/p&gt;

&lt;p&gt;  Any suggestions on how to better clue the user in that the transport may be the issue?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:269 Good suggestion, done.&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java:3020 Good suggestion. I don&apos;t have an environment to test SASL in, so I&apos;ll add the check back.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt;_optional_framed_transport&lt;/p&gt;</comment>
                            <comment id="13249422" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 23:46:14 +0000"  >&lt;p&gt;travis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;    -&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/p&gt;</comment>
                            <comment id="13249424" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 23:48:15 +0000"  >&lt;p&gt;travis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;  Update per comments from review. Add option to hive-default.xml, and disallow framed transport when using SASL as that has not been tested.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/p&gt;</comment>
                            <comment id="13249582" author="ashutoshc" created="Sun, 8 Apr 2012 17:35:59 +0000"  >&lt;p&gt;After your patch test &lt;tt&gt;ant test -Dtestcase=TestHiveServerSessions&lt;/tt&gt; is timing out. Can you take a look?&lt;/p&gt;</comment>
                            <comment id="13250707" author="traviscrawford" created="Tue, 10 Apr 2012 14:54:07 +0000"  >&lt;p&gt;@ashutosh - Yeah this test does seem problematic. It works fine in IntelliJ but I can&apos;t get it to pass with the command you gave, even when doing a clean trunk build. Looking at Jenkins the test works fine, so perhaps its something to do with my machine (osx 10.7.3).&lt;/p&gt;

&lt;p&gt;I&apos;m looking into why the test doesn&apos;t work on trunk, then will see if this change affects it.&lt;/p&gt;</comment>
                            <comment id="13250711" author="ashutoshc" created="Tue, 10 Apr 2012 15:00:36 +0000"  >&lt;p&gt;@Travis,&lt;br/&gt;
It has nothing to do with your patch. Problem exists on trunk. See, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2937&quot; title=&quot;TestHiveServerSessions hangs when executed directly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2937&quot;&gt;&lt;del&gt;HIVE-2937&lt;/del&gt;&lt;/a&gt; And ya, its a race condition, so it doesn&apos;t show up always.&lt;/p&gt;</comment>
                            <comment id="13250718" author="traviscrawford" created="Tue, 10 Apr 2012 15:10:15 +0000"  >&lt;p&gt;Cool - thanks for the pointer! I&apos;ll watch that issue and afterwards rebase if necessary and update.&lt;/p&gt;</comment>
                            <comment id="13252738" author="ashutoshc" created="Thu, 12 Apr 2012 18:59:01 +0000"  >&lt;p&gt;Committed. Thanks, Travis!&lt;/p&gt;</comment>
                            <comment id="13252739" author="phabricator@reviews.facebook.net" created="Thu, 12 Apr 2012 18:59:14 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit soon.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt;_optional_framed_transport&lt;/p&gt;</comment>
                            <comment id="13252746" author="phabricator@reviews.facebook.net" created="Thu, 12 Apr 2012 19:05:15 +0000"  >&lt;p&gt;travis has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by hashutosh.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1325446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1325446&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13253072" author="hudson" created="Fri, 13 Apr 2012 03:07:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1370 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1370/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1370/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&lt;br/&gt;
(Travis Crawford via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
Add support for optionally using the thrift framed transport, enabling&lt;br/&gt;
integration with environments where that is necessary.&lt;/p&gt;

&lt;p&gt;Users may want/need to use thrift&apos;s framed transport when communicating with the&lt;br/&gt;
Hive MetaStore. This patch adds a new property&lt;br/&gt;
hive.metastore.thrift.framed.transport.enabled that enables the framed transport&lt;br/&gt;
(defaults to off, aka no change from before the patch). This property must be&lt;br/&gt;
set for both clients and the HMS server.&lt;/p&gt;

&lt;p&gt;It wasn&apos;t immediately clear how to use the framed transport with SASL, so as&lt;br/&gt;
written an exception is thrown if you try starting the server with both options.&lt;br/&gt;
If SASL and the framed transport will indeed work together I can update the&lt;br/&gt;
patch (although I don&apos;t have a secured environment to test in).&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
Tested locally that client and server can connect, both with and&lt;br/&gt;
without the flag. Tests pass.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt; (Revision 1325446)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325446&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547891" author="hudson" created="Wed, 9 Jan 2013 10:23:28 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2767&quot; title=&quot;Optionally use framed transport with metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2767&quot;&gt;&lt;del&gt;HIVE-2767&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Optionally use framed transport with metastore&lt;br/&gt;
(Travis Crawford via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
Add support for optionally using the thrift framed transport, enabling&lt;br/&gt;
integration with environments where that is necessary.&lt;/p&gt;

&lt;p&gt;Users may want/need to use thrift&apos;s framed transport when communicating with the&lt;br/&gt;
Hive MetaStore. This patch adds a new property&lt;br/&gt;
hive.metastore.thrift.framed.transport.enabled that enables the framed transport&lt;br/&gt;
(defaults to off, aka no change from before the patch). This property must be&lt;br/&gt;
set for both clients and the HMS server.&lt;/p&gt;

&lt;p&gt;It wasn&apos;t immediately clear how to use the framed transport with SASL, so as&lt;br/&gt;
written an exception is thrown if you try starting the server with both options.&lt;br/&gt;
If SASL and the framed transport will indeed work together I can update the&lt;br/&gt;
patch (although I don&apos;t have a secured environment to test in).&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
Tested locally that client and server can connect, both with and&lt;br/&gt;
without the flag. Tests pass.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2661&lt;/a&gt; (Revision 1325446)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1325446&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550072" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:16 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="14219200" author="lefty@hortonworks.com" created="Thu, 20 Nov 2014 10:17:08 +0000"  >&lt;p&gt;Doc note:  This adds configuration parameter &lt;b&gt;hive.metastore.thrift.framed.transport.enabled&lt;/b&gt; to HiveConf.java, so it needs to be documented in the wiki:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-MetaStore&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; MetaStore &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12521779" name="ASF.LICENSE.NOT.GRANTED--HIVE-2767.D2661.1.patch" size="5652" author="phabricator@reviews.facebook.net" created="Fri, 6 Apr 2012 23:02:16 +0000"/>
                            <attachment id="12521865" name="ASF.LICENSE.NOT.GRANTED--HIVE-2767.D2661.2.patch" size="6791" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 23:46:14 +0000"/>
                            <attachment id="12521866" name="ASF.LICENSE.NOT.GRANTED--HIVE-2767.D2661.3.patch" size="6791" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 23:48:17 +0000"/>
                            <attachment id="12512599" name="HIVE-2767.patch.txt" size="4455" author="traviscrawford" created="Tue, 31 Jan 2012 18:00:48 +0000"/>
                            <attachment id="12516359" name="HIVE-2767_a.patch.txt" size="6467" author="julienledem" created="Tue, 28 Feb 2012 17:44:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Feb 2012 23:01:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225999</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ur3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14583</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2768] Add a getAuthorizationProvider to HiveStorageHandler</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2768</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In version 0.92 HBase supports ACLs for tables.  In HCatalog, since we delegate security to the underlying storage layer, we would like to be able to obtain a HiveAuthorizationProvider specific to a HiveStorageHandler instance.  This can be done by adding a getAuthorizationProvider method to HiveStorageHandler.  In the case where Hive is configured to use the DefaultHiveAuthorizationProvider this call will return the same default provider, since Hive handles all of the authorization itself in that case.  In the case where it is configured to use the HCatAuthorizationProvider, it would return an instance specific to the underlying storage.&lt;/p&gt;

&lt;p&gt;For more background on this proposed change see &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-237&quot; title=&quot;Switch from using StorageDrivers to SerDes to do data (de)serialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-237&quot;&gt;&lt;del&gt;HCATALOG-237&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://cwiki.apache.org/confluence/display/HCATALOG/Hcat+Security+Design&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/HCATALOG/Hcat+Security+Design&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540635">HIVE-2768</key>
            <summary>Add a getAuthorizationProvider to HiveStorageHandler</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="toffer">Francis Liu</assignee>
                                    <reporter username="alangates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2012 21:40:18 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:28 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 21:34:03 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13213887" author="phabricator@reviews.facebook.net" created="Wed, 22 Feb 2012 19:21:47 +0000"  >&lt;p&gt;toffer requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2768&quot; title=&quot;Add a getAuthorizationProvider to HiveStorageHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2768&quot;&gt;&lt;del&gt;HIVE-2768&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a getAuthorizationProvider to HiveStorageHandler&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach, ashutoshc&lt;/p&gt;

&lt;p&gt;  In version 0.92 HBase supports ACLs for tables. In HCatalog, since we delegate security to the underlying storage layer, we would like to be able to obtain a HiveAuthorizationProvider specific to a HiveStorageHandler instance. This can be done by adding a getAuthorizationProvider method to HiveStorageHandler. In the case where Hive is configured to use the DefaultHiveAuthorizationProvider this call will return the same default provider, since Hive handles all of the authorization itself in that case. In the case where it is configured to use the HCatAuthorizationProvider, it would return an instance specific to the underlying storage. For more background on this proposed change see &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-237&quot; title=&quot;Switch from using StorageDrivers to SerDes to do data (de)serialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-237&quot;&gt;&lt;del&gt;HCATALOG-237&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://cwiki.apache.org/confluence/display/HCATALOG/Hcat+Security+Design&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/HCATALOG/Hcat+Security+Design&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1869&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1869&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3975/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13214038" author="phabricator@reviews.facebook.net" created="Wed, 22 Feb 2012 22:07:46 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2768&quot; title=&quot;Add a getAuthorizationProvider to HiveStorageHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2768&quot;&gt;&lt;del&gt;HIVE-2768&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add a getAuthorizationProvider to HiveStorageHandler&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Running tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1869&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1869&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  auth&lt;/p&gt;</comment>
                            <comment id="13215073" author="ashutoshc" created="Thu, 23 Feb 2012 21:34:04 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Francis!&lt;/p&gt;</comment>
                            <comment id="13215326" author="hudson" created="Fri, 24 Feb 2012 02:48:28 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1272 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1272/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1272/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2768&quot; title=&quot;Add a getAuthorizationProvider to HiveStorageHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2768&quot;&gt;&lt;del&gt;HIVE-2768&lt;/del&gt;&lt;/a&gt;: Add a getAuthorizationProvider to HiveStorageHandler (toffer via hashutosh) (Revision 1292969)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1292969&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1292969&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265228" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:13 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547888" author="hudson" created="Wed, 9 Jan 2013 10:23:28 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2768&quot; title=&quot;Add a getAuthorizationProvider to HiveStorageHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2768&quot;&gt;&lt;del&gt;HIVE-2768&lt;/del&gt;&lt;/a&gt;: Add a getAuthorizationProvider to HiveStorageHandler (toffer via hashutosh) (Revision 1292969)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1292969&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1292969&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12540195">HCATALOG-237</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12542958">HIVE-2809</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12515634" name="ASF.LICENSE.NOT.GRANTED--HIVE-2768.D1869.1.patch" size="2155" author="phabricator@reviews.facebook.net" created="Wed, 22 Feb 2012 19:21:48 +0000"/>
                            <attachment id="12515825" name="HIVE-2768.D1869.1.patch" size="2155" author="toffer" created="Thu, 23 Feb 2012 21:49:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Feb 2012 19:21:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d34f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74282</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2769] union with a multi-table insert is not working</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2769</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12540647">HIVE-2769</key>
            <summary>union with a multi-table insert is not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2012 23:23:45 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:27 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 18:08:41 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13197394" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 23:55:58 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; title=&quot;union with a multi-table insert is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2769&quot;&gt;&lt;del&gt;HIVE-2769&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; union with a multi-table insert is not working&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2769&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; title=&quot;union with a multi-table insert is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2769&quot;&gt;&lt;del&gt;HIVE-2769&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1545&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1545&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/union31.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/union31.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRRedSink3.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3255/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3255/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13197444" author="he yongqiang" created="Wed, 1 Feb 2012 00:52:47 +0000"  >&lt;p&gt;+1, will commit after tests pass&lt;/p&gt;</comment>
                            <comment id="13197452" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 00:55:58 +0000"  >&lt;p&gt;heyongqiang has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; title=&quot;union with a multi-table insert is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2769&quot;&gt;&lt;del&gt;HIVE-2769&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; union with a multi-table insert is not working&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1545&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1545&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13198014" author="namit" created="Wed, 1 Feb 2012 18:08:41 +0000"  >&lt;p&gt;Committed by Yongqiang&lt;/p&gt;</comment>
                            <comment id="13209174" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:53:10 +0000"  >&lt;p&gt;heyongqiang has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; title=&quot;union with a multi-table insert is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2769&quot;&gt;&lt;del&gt;HIVE-2769&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; union with a multi-table insert is not working&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1545&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1545&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1239161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1239161&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13265288" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:31 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547887" author="hudson" created="Wed, 9 Jan 2013 10:23:27 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; title=&quot;union with a multi-table insert is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2769&quot;&gt;&lt;del&gt;HIVE-2769&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; union with a multi-table insert is not working&lt;br/&gt;
(Namit Jain via Yongqiang He)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2769&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2769&quot; title=&quot;union with a multi-table insert is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2769&quot;&gt;&lt;del&gt;HIVE-2769&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, heyongqiang&lt;/p&gt;

&lt;p&gt;Reviewed By: heyongqiang&lt;/p&gt;

&lt;p&gt;CC: heyongqiang&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1545&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1545&lt;/a&gt; (Revision 1239161)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239161&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRRedSink3.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union31.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union31.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512695" name="ASF.LICENSE.NOT.GRANTED--HIVE-2769.D1545.1.patch" size="59215" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 23:55:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Jan 2012 23:55:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2770] HCatInputFormat.getSplits() ignores properties added in JobContext.getConfiguration()</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2770</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12540654">HIVE-2770</key>
            <summary>HCatInputFormat.getSplits() ignores properties added in JobContext.getConfiguration()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="toffer">Francis Liu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Feb 2012 00:06:59 +0000</created>
                <updated>Wed, 1 Feb 2012 00:08:41 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 00:08:41 +0000</resolved>
                                    <version>0.3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13197407" author="toffer" created="Wed, 1 Feb 2012 00:08:41 +0000"  >&lt;p&gt;sorry wrong project. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2771] Add support for filter pushdown for key ranges in hbase for keys of type string</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2771</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is a subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1643&quot; title=&quot;support range scans and non-key columns in HBase filter pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1643&quot;&gt;HIVE-1643&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540675">HIVE-2771</key>
            <summary>Add support for filter pushdown for key ranges in hbase for keys of type string</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12474221">HIVE-1643</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Feb 2012 04:49:49 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:29 +0000</updated>
                            <resolved>Tue, 6 Mar 2012 20:10:57 +0000</resolved>
                                    <version>0.7.0</version>
                    <version>0.7.1</version>
                    <version>0.8.0</version>
                    <version>0.8.1</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13197585" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 05:00:57 +0000"  >&lt;p&gt;ashutoshc requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for keys of type string&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2771&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  This patch adds support for key range scans pushdown to hbase for keys of type string. With this patch filter pushdowns of following types are supported:&lt;br/&gt;
  a) Point lookups for keys of any types.&lt;br/&gt;
  b) Range scans for keys of type string.&lt;/p&gt;

&lt;p&gt;  Test Plan:&lt;br/&gt;
  Added hbase_ppd_key_range.q which is modeled after hbase_pushdown.q&lt;/p&gt;

&lt;p&gt;  This is a subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1643&quot; title=&quot;support range scans and non-key columns in HBase filter pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1643&quot;&gt;HIVE-1643&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/test/results/hbase_ppd_key_range.q.out&lt;br/&gt;
  hbase-handler/src/test/queries/hbase_ppd_key_range.q&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3261/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3261/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13197879" author="ashutoshc" created="Wed, 1 Feb 2012 14:47:43 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;BUILD SUCCESSFUL
Total time: 269 minutes 29 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All the tests passes with this patch. This is ready for review.&lt;/p&gt;</comment>
                            <comment id="13200606" author="phabricator@reviews.facebook.net" created="Sun, 5 Feb 2012 00:31:52 +0000"  >&lt;p&gt;jsichi has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for keys of type string&quot;.&lt;/p&gt;

&lt;p&gt;  One thing to note is that if the filter implementation turns out to be too loose (rather than too strict), tests may not notice it because in some cases Hive currently redundantly applies the filter row-by-row on whatever comes back from the scan.  (I&apos;ve added a line-specific comment above for one of those cases.) So you might want to add some private logging just to make sure you&apos;ve got it right.  I can&apos;t remember whether that&apos;s why I added the WhileMatchFilter originally.&lt;/p&gt;

&lt;p&gt;  Also, note the comment in HBaseStorageHandler.decomposePredicate.  Have you a tested a case such as WHERE key &amp;gt; 20 and key &amp;lt; 30?&lt;/p&gt;


&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  hbase-handler/src/test/results/hbase_ppd_key_range.q.out:47 Note that here Hive did not remove the redundant filter.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13203786" author="phabricator@reviews.facebook.net" created="Wed, 8 Feb 2012 18:04:58 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for keys of type string&quot;.&lt;/p&gt;

&lt;p&gt;  &amp;gt; Also, note the comment in HBaseStorageHandler.decomposePredicate. Have you a tested a case such as WHERE key &amp;gt; 20 and key &amp;lt; 30?&lt;/p&gt;

&lt;p&gt;  For those queries filter will not be pushed exactly because of that comment. I will update the patch with this test where filter is not pushed in HBase and filtering is done by Hive.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  hbase-handler/src/test/results/hbase_ppd_key_range.q.out:47 Hive did remove the redundant filter. I verified this by adding private logging. Further, even for queries in hbase_pushdown.q if you look at hbase_pushdown.q.out its the same behavior where for filter key = 90, its been pushed up in storage handler still shows up in explain plan.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13203812" author="jvs" created="Wed, 8 Feb 2012 18:25:28 +0000"  >&lt;p&gt;Isn&apos;t a range predicate such as &quot;WHERE key &amp;gt; 20 and key &amp;lt; 30&quot; a fairly important use case?&lt;/p&gt;</comment>
                            <comment id="13203830" author="ashutoshc" created="Wed, 8 Feb 2012 18:41:03 +0000"  >&lt;p&gt;It is. I plan to take that up in a follow-up jira to keep patch sizes small and manageable. Also, I think &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1634&quot; title=&quot;Allow access to Primitive types stored in binary format in HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1634&quot;&gt;&lt;del&gt;HIVE-1634&lt;/del&gt;&lt;/a&gt; might have impact on that, so I think it make sense to defer that case.&lt;/p&gt;</comment>
                            <comment id="13203835" author="phabricator@reviews.facebook.net" created="Wed, 8 Feb 2012 18:46:57 +0000"  >&lt;p&gt;ashutoshc updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for keys of type string&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi&lt;/p&gt;

&lt;p&gt;  Added test for key &amp;lt; &apos;20&apos; and key &amp;gt; &apos;30&apos;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/test/results/hbase_ppd_key_range.q.out&lt;br/&gt;
  hbase-handler/src/test/queries/hbase_ppd_key_range.q&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;/p&gt;</comment>
                            <comment id="13222511" author="phabricator@reviews.facebook.net" created="Mon, 5 Mar 2012 19:01:55 +0000"  >&lt;p&gt;cwsteinbach has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for keys of type string&quot;.&lt;/p&gt;

&lt;p&gt;  +1. Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13223608" author="cwsteinbach" created="Tue, 6 Mar 2012 20:10:57 +0000"  >&lt;p&gt;Committed to trunk. Thanks Ashutosh!&lt;/p&gt;</comment>
                            <comment id="13223610" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 20:15:55 +0000"  >&lt;p&gt;ashutoshc has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for keys of type string&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by cws.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1297675&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1297675&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13223973" author="ashutoshc" created="Wed, 7 Mar 2012 05:05:11 +0000"  >&lt;p&gt;Patch with license.&lt;/p&gt;</comment>
                            <comment id="13265237" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:17 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547892" author="hudson" created="Wed, 9 Jan 2013 10:23:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; title=&quot;Add support for filter pushdown for key ranges in hbase for keys of type string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2771&quot;&gt;&lt;del&gt;HIVE-2771&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add support for filter pushdown for key ranges in hbase for&lt;br/&gt;
keys of type string&lt;br/&gt;
(Ashutosh Chauhan via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2771&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This patch adds support for key range scans pushdown to hbase for keys of type&lt;br/&gt;
string. With this patch filter pushdowns of following types are supported:&lt;br/&gt;
a) Point lookups for keys of any types.&lt;br/&gt;
b) Range scans for keys of type string. &lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
Added hbase_ppd_key_range.q which is modeled after hbase_pushdown.q&lt;/p&gt;

&lt;p&gt;This is a subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1643&quot; title=&quot;support range scans and non-key columns in HBase filter pushdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1643&quot;&gt;HIVE-1643&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, jsichi, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;CC: jsichi, ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1551&lt;/a&gt; (Revision 1297675)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1297675&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1297675&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/hbase_ppd_key_range.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/hbase_ppd_key_range.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12543736">HIVE-2815</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12512716" name="ASF.LICENSE.NOT.GRANTED--HIVE-2771.D1551.1.patch" size="29870" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 05:00:58 +0000"/>
                            <attachment id="12513842" name="ASF.LICENSE.NOT.GRANTED--HIVE-2771.D1551.2.patch" size="32087" author="phabricator@reviews.facebook.net" created="Wed, 8 Feb 2012 18:46:58 +0000"/>
                            <attachment id="12517367" name="hive-2771.patch" size="32087" author="ashutoshc" created="Wed, 7 Mar 2012 05:05:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Feb 2012 05:00:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226070</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09yrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2772] make union31.q deterministic</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2772</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12540739">HIVE-2772</key>
            <summary>make union31.q deterministic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Feb 2012 16:55:19 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:29 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 19:57:45 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13197951" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 16:56:58 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make union31.q deterministic&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2772&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1557&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1557&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/union31.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/union31.q&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3273/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3273/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13197994" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 17:52:57 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make union31.q deterministic&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1557&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1557&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13198097" author="namit" created="Wed, 1 Feb 2012 19:57:45 +0000"  >&lt;p&gt;Committed by Yongqiang&lt;/p&gt;</comment>
                            <comment id="13198383" author="hudson" created="Thu, 2 Feb 2012 00:39:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1238 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1238/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1238/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make union31.q deterministic&lt;br/&gt;
(Namit Jain via Yongqiang He)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2772&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;CC: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1557&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1557&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239286&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239286&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union31.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union31.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13209157" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:52:59 +0000"  >&lt;p&gt;heyongqiang has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make union31.q deterministic&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1557&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1557&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1239286&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1239286&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13265230" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:14 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547893" author="hudson" created="Wed, 9 Jan 2013 10:23:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make union31.q deterministic&lt;br/&gt;
(Namit Jain via Yongqiang He)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2772&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2772&quot; title=&quot;make union31.q deterministic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2772&quot;&gt;&lt;del&gt;HIVE-2772&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;CC: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1557&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1557&lt;/a&gt; (Revision 1239286)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239286&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1239286&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union31.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union31.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512768" name="ASF.LICENSE.NOT.GRANTED--HIVE-2772.D1557.1.patch" size="8848" author="phabricator@reviews.facebook.net" created="Wed, 1 Feb 2012 16:56:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Feb 2012 16:56:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2773] HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2773</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HiveStorageHandler.configureTableJobProperties() is called to allow the storage handler to setup any properties that the underlying inputformat/outputformat/serde may need. But the handler implementation does not know whether it is being called for configuring input or output. This makes it a problem for handlers which sets an external state. In the case of HCatalog&apos;s HBase storageHandler, whenever a write needs to be configured we create a write transaction which needs to be committed or aborted later on. In this case configuring for both input and output each time configureTableJobProperties() is called would not be desirable. This has become an issue since HCatalog is dropping storageDrivers for SerDe and StorageHandler (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HCATALOG-237&quot; title=&quot;Switch from using StorageDrivers to SerDes to do data (de)serialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HCATALOG-237&quot;&gt;&lt;del&gt;HCATALOG-237&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;My proposal is to replace configureTableJobProperties() with two methods:&lt;/p&gt;

&lt;p&gt;configureInputJobProperties()&lt;br/&gt;
configureOutputJobProperties()&lt;/p&gt;

&lt;p&gt;Each method will have the same signature. I cursory look at the code and I believe changes should be straighforward also given that we are not really changing anything just splitting responsibility. If the community is fine with this approach I will go ahead and create a aptch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540757">HIVE-2773</key>
            <summary>HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="toffer">Francis Liu</assignee>
                                    <reporter username="toffer">Francis Liu</reporter>
                        <labels>
                            <label>hcatalog</label>
                            <label>storage_handler</label>
                    </labels>
                <created>Wed, 1 Feb 2012 19:00:31 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:29 +0000</updated>
                            <resolved>Fri, 23 Mar 2012 02:39:11 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13212490" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 10:09:33 +0000"  >&lt;p&gt;toffer requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt; HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Empty&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1815&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1815&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PartitionDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3867/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3867/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13214018" author="ashutoshc" created="Wed, 22 Feb 2012 21:37:03 +0000"  >&lt;p&gt;This will effectively break backwards compatibility since you are removing a method from an interface. You can get around this by keeping original method as well as introducing new ones. Then, at the time of invocation of these methods, you can check if newer methods exists, if they do then invoke them else invoke old method. Then, we can deprecate old method. But, before you go down that path and introduce code complexity I suggest you send an email on user@hive to check with people if they are ok with your current approach as is and will be able to upgrade their storage handlers, in which case we can go ahead with this current approach.&lt;/p&gt;</comment>
                            <comment id="13214835" author="toffer" created="Thu, 23 Feb 2012 16:27:48 +0000"  >&lt;p&gt;Since it&apos;s an interface, things will still break not unless they extended DefaultStorageHandler. In any case will ask user@hive.&lt;/p&gt;</comment>
                            <comment id="13214854" author="alo.alt" created="Thu, 23 Feb 2012 17:03:12 +0000"  >&lt;p&gt;Since Hive need the new methods to work with HCatalog the interface should be extended. Later it can be dropped or marked as obsolete. For a flumeNG hive sink the new methods are a good improvement. &lt;/p&gt;</comment>
                            <comment id="13214962" author="toffer" created="Thu, 23 Feb 2012 19:28:27 +0000"  >&lt;p&gt;If I add new methods, classes implementing the interface will have to implement the new methods anyway, why not just take the extra step of having them do a very little bit of refactoring (see my changes to HBaseStorageHandler)? Of course if most users are extending DefaultStorageHandler then doing as you say would be a smoother way to go about it. &lt;/p&gt;</comment>
                            <comment id="13214979" author="ashutoshc" created="Thu, 23 Feb 2012 19:40:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;If I add new methods, classes implementing the interface will have to implement the new methods anyway,&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Adding or removing methods have different impacts from point of view of backward compatibility. &lt;br/&gt;
If you add new methods in an interface then implementations using the older interface will continue to work even after they upgrade to new version of hive. That has no cost on people who have implemented the old interface. Only if they recompile it, then they have to implement new methods.  &lt;br/&gt;
On the other hand, if you remove methods, then their old implementation won&apos;t work anymore after upgrade. They have to recompile and this implies work on their part.&lt;/p&gt;

&lt;p&gt;This is the difference which gets factored in backward compatibility. So, as long as you are adding new methods in interface, I consider it to be backward compatible. But, if you are removing methods, then its not. Makes sense?   &lt;/p&gt;</comment>
                            <comment id="13218711" author="phabricator@reviews.facebook.net" created="Tue, 28 Feb 2012 23:45:59 +0000"  >&lt;p&gt;toffer requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach, ashutoshc&lt;/p&gt;

&lt;p&gt;  This is a patch which supports backward compatibility for the old storageHandlers which implements the deprecated method. Patch is built against 0.8-r2&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2007&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PartitionDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4281/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4281/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13224942" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 02:14:54 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot;.&lt;/p&gt;

&lt;p&gt;  Francis,&lt;br/&gt;
  Normally, we first apply patches to trunk and then potentially backport them to a branch. Can, you please first generate a patch for trunk?&lt;br/&gt;
  Overall, patch looks good. I left couple of comments.  Also, lint is complaining for few lines being too long. Can you take care of those one too?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java:698 Should this be NoSuchMethodError ?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java:708 Should this be NoSuchMethodError ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2007&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2007&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  arcpatch-D1815&lt;/p&gt;</comment>
                            <comment id="13235370" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 05:47:37 +0000"  >&lt;p&gt;toffer requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2415&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2415&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PartitionDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5409/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5409/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13236024" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 20:57:24 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2415&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2415&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  configure2&lt;/p&gt;</comment>
                            <comment id="13236287" author="ashutoshc" created="Fri, 23 Mar 2012 02:39:11 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Francis!&lt;/p&gt;</comment>
                            <comment id="13236772" author="hudson" created="Fri, 23 Mar 2012 16:48:46 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1328 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1328/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1328/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt;: HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output (Francis Liu via Ashutosh Chauhan) (Revision 1304167)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1304167&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1304167&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PartitionDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265346" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:58 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547894" author="hudson" created="Wed, 9 Jan 2013 10:23:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2773&quot; title=&quot;HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2773&quot;&gt;&lt;del&gt;HIVE-2773&lt;/del&gt;&lt;/a&gt;: HiveStorageHandler.configureTableJobProperites() should let the handler know wether it is configuration for input or output (Francis Liu via Ashutosh Chauhan) (Revision 1304167)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1304167&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1304167&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/DefaultStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveStorageHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/MapredLocalWork.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PartitionDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12543084">HCATALOG-263</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12540479">HIVE-2764</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12515339" name="ASF.LICENSE.NOT.GRANTED--HIVE-2773.D1815.1.patch" size="9892" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 10:09:33 +0000"/>
                            <attachment id="12516465" name="ASF.LICENSE.NOT.GRANTED--HIVE-2773.D2007.1.patch" size="10548" author="phabricator@reviews.facebook.net" created="Tue, 28 Feb 2012 23:46:01 +0000"/>
                            <attachment id="12519407" name="ASF.LICENSE.NOT.GRANTED--HIVE-2773.D2415.1.patch" size="11136" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 05:47:39 +0000"/>
                            <attachment id="12515033" name="HIVE-2773.patch" size="10388" author="toffer" created="Fri, 17 Feb 2012 21:55:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Feb 2012 10:09:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226152</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124133</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>HiveStorageHandler.configureTableJobProperties() has been replaced with configureInputJobProperties() and configureOutputJobProperties().</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2774] Message when trying to create a view from a view should give name of offending view</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2774</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently when trying to create a view that contains another view (a prohibited operation) the exception is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;FAILED: Error in semantic analysis: Invalid Table Alias Referencing view from foreign databases is not supported.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;Twould be better if this message included the view that caused the error so that when building views from lots of tables, one doesn&apos;t need to hunt to figure out which one was the actual view.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540849">HIVE-2774</key>
            <summary>Message when trying to create a view from a view should give name of offending view</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jghoman">Jakob Homan</assignee>
                                    <reporter username="jghoman">Jakob Homan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Feb 2012 00:14:13 +0000</created>
                <updated>Sat, 21 Apr 2012 16:35:01 +0000</updated>
                                            <version>0.7.1</version>
                    <version>0.9.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13198358" author="jghoman" created="Thu, 2 Feb 2012 00:15:38 +0000"  >&lt;p&gt;Quick patch that adds the offending table name to the message.  Not easily testable and easily reasonable, so no tests.&lt;/p&gt;</comment>
                            <comment id="13203167" author="namit" created="Wed, 8 Feb 2012 02:23:41 +0000"  >&lt;p&gt;Can you add a negative test ?&lt;br/&gt;
Look at ql/src/test/queries/clientnegative for an example ?&lt;/p&gt;</comment>
                            <comment id="13258881" author="ashutoshc" created="Sat, 21 Apr 2012 16:35:01 +0000"  >&lt;p&gt;Unlinking from 0.9 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512877" name="HIVE-2774.patch" size="1342" author="jghoman" created="Thu, 2 Feb 2012 00:15:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2012 02:23:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48515</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2775] allow the number of files to be a multiple of bucketed table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2775</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, hive bucketed table requires the number of files to match the bucket number in order to sample correctly. This is very restrictive. e.g. we can only populate the table using a fix number of reducer, which can be a bottleneck. &lt;/p&gt;

&lt;p&gt;The idea is to introduce the concept of &quot;physical bucket&quot; and &quot;logical bucket&quot;. &quot;physical bucket&quot; is the number of files on disk and &quot;logical bucket&quot; is the number of bucket stored in meda-data for bucketed table. By allowing &quot;physical bucket&quot; to be a multiple of &quot;logical bucket&quot;, we can do correct sampling as well as scaling up. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12540873">HIVE-2775</key>
            <summary>allow the number of files to be a multiple of bucketed table</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xwang">xiaoyu wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Feb 2012 05:02:42 +0000</created>
                <updated>Fri, 17 Feb 2012 20:41:05 +0000</updated>
                                                                            <component>Metastore</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13198542" author="xwang" created="Thu, 2 Feb 2012 05:22:05 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;index d0ff67e..bcddc5b 100644
@@ -349,7 +349,25 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Partition &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable {
    * we are just storing it as a property of the table as a &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; term measure.
    */
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getBucketCount() {
-    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; table.getNumBuckets();
+      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; logicalBucketNumber = table.getNumBuckets();
+      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pathPattern = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getPartitionPath().toString() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/*&quot;&lt;/span&gt;;
+      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+          FileSystem fs = FileSystem.get(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.table.getDataLocation(),Hive.get().getConf());
+          FileStatus srcs[] = fs.globStatus(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(pathPattern));
+          &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; physicalBucketNumber = srcs.length;
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((physicalBucketNumber/logicalBucketNumber) * logicalBucketNumber ==  physicalBucketNumber){
+              &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; physicalBucketNumber;
+          } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+              &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot get bucket count &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; table &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.table.getTableName() +
+                      &lt;span class=&quot;code-quote&quot;&gt;&quot; logical bucket is &quot;&lt;/span&gt; + logicalBucketNumber + &lt;span class=&quot;code-quote&quot;&gt;&quot; physical bucket number is &quot;&lt;/span&gt; + physicalBucketNumber);
+          }
+      }&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e)
+      {
+          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot get bucket count &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; table &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.table.getTableName(), e) ;
+      }
+
+
+&lt;span class=&quot;code-comment&quot;&gt;//    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; table.getNumBuckets();
&lt;/span&gt;     /*
      * TODO: Keeping &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; code around &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; later use when we will support
      * sampling on tables which are not created with CLUSTERED INTO clause
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lli7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2776] Setting test.silent=false has not effect</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2776</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12540990">HIVE-2776</key>
            <summary>Setting test.silent=false has not effect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Feb 2012 20:11:53 +0000</created>
                <updated>Wed, 30 May 2012 23:14:26 +0000</updated>
                                                                            <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13199175" author="cwsteinbach" created="Thu, 2 Feb 2012 20:15:10 +0000"  >&lt;p&gt;QTestUtil and the various CliDriver templates all print out the following help message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, it turns out that test.silent=false by default, and you change the behavior of the tests only by setting test.silent=true.&lt;/p&gt;

&lt;p&gt;From MapredLocalTask:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      String isSilent = &quot;true&quot;.equalsIgnoreCase(System.getProperty(&quot;test.silent&quot;)) ? &quot;-nolog&quot; : &quot;&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From MapRedTask:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      String isSilent = &quot;true&quot;.equalsIgnoreCase(System
          .getProperty(&quot;test.silent&quot;)) ? &quot;-nolog&quot; : &quot;&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13286181" author="zhenxiao" created="Wed, 30 May 2012 23:14:25 +0000"  >&lt;p&gt;test.silent is set to be true by default, and there is no -nolog parameter passed to the hadoop command that submitted as a MapReduce Job.&lt;/p&gt;

&lt;p&gt;When setting test.silent to be false, -nolog parameter is passed to the hadoop command, and configured the MapReduce Job.&lt;/p&gt;

&lt;p&gt;This -nolog will only make effect when the MapReduce Job is failing. While, in most testcases, the MapReduce job succeeded, but the optimizer/compiler is doing wrong, so the result is different from the expected output.&lt;/p&gt;

&lt;p&gt;My proposed solution:&lt;/p&gt;

&lt;p&gt;1. Remove this &quot;try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&quot; from QTestUtil, since this message does not make sense in the test context.&lt;br/&gt;
   Even if you set -Dtest.silent=false, you may get no detailed log(in most cases), since the MapReduce Job does not fail, the optimizer/compiler is doing things wrong.&lt;/p&gt;

&lt;p&gt;2. Print these log info when a MapReduce Job is failing. while only happens in MapRedTask, should not be in MapRedLocalTask.&lt;/p&gt;

&lt;p&gt;3. The property name is misleading, it seems like a test property, but actually, both MapRedTask and MapredLocalTask is using this property. We could either remove this property at all, and always print the log info when a MapReduce Job is failing as stated in #2, or choose another non-test related property name to determine the behavior of MapReduce Job failing logs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 May 2012 23:14:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2777] ability to add and drop partitions atomically</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2777</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive should have ability to atomically add and drop partitions. This way admins can change partitions atomically without breaking the running jobs. It allows admin to merge several partitions into one.&lt;br/&gt;
Essentially, we would like to have an api- add_drop_partitions(String db, String tbl_name, List&amp;lt;Partition&amp;gt; addParts, List&amp;lt;List&amp;lt;String&amp;gt;&amp;gt; dropParts, boolean deleteData);&lt;br/&gt;
This jira covers changes required for metastore and thrift.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541225">HIVE-2777</key>
            <summary>ability to add and drop partitions atomically</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aniket486">Aniket Mokashi</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 5 Feb 2012 03:34:19 +0000</created>
                <updated>Wed, 17 May 2017 03:51:13 +0000</updated>
                                            <version>0.13.0</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>15</watches>
                                                                <comments>
                            <comment id="13200672" author="ashutoshc" created="Sun, 5 Feb 2012 06:43:40 +0000"  >&lt;p&gt;Dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2224&quot; title=&quot;Ability to add partitions atomically&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2224&quot;&gt;&lt;del&gt;HIVE-2224&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="13200673" author="ashutoshc" created="Sun, 5 Feb 2012 06:45:47 +0000"  >&lt;p&gt;Oh, looks like you want more than &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2224&quot; title=&quot;Ability to add partitions atomically&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2224&quot;&gt;&lt;del&gt;HIVE-2224&lt;/del&gt;&lt;/a&gt;. You are passing in both addParts as well as dropParts in one call.&lt;/p&gt;</comment>
                            <comment id="13200674" author="aniket486" created="Sun, 5 Feb 2012 06:49:20 +0000"  >&lt;p&gt;Yes. Basically, I would like to support merge of partitions.&lt;/p&gt;</comment>
                            <comment id="13201946" author="alangates" created="Tue, 7 Feb 2012 01:31:20 +0000"  >&lt;p&gt;Is the goal here to reduce the number of partitions that Hive has or the number of files in HDFS?  If the goal is to reduce the number of files then you might consider using har to pack the files into one and then change the location value in the partitions.  &lt;/p&gt;</comment>
                            <comment id="13201963" author="aniket486" created="Tue, 7 Feb 2012 01:49:17 +0000"  >&lt;p&gt;Yes, our goal is to merge multiple small files (partitions) into big ones. But, we would like users to see the data as soon as it comes to warehouse. Also, one limitation is we run from S3, that doesn&apos;t allow a move operation. So, with that we have come up with an idea to transparently create a new location for merged data and atomically drop and add partitions to point to it.&lt;/p&gt;</comment>
                            <comment id="13203896" author="ashutoshc" created="Wed, 8 Feb 2012 19:46:38 +0000"  >&lt;p&gt;So, this api is purely metadata and data won&apos;t be touched at all? Data is managed separately in such cases. I think if thats the case, this new api should have an additional parameter bool moveData, which for now works as you described for moveData = false and throws exception for moveData = true. &lt;/p&gt;</comment>
                            <comment id="13203913" author="aniket486" created="Wed, 8 Feb 2012 20:01:13 +0000"  >&lt;p&gt;I am adding deleteData option there, deletion of data itself cannot be made atomic. But, its good to have as part of the api. deleteData=true attempts to delete the data.&lt;/p&gt;</comment>
                            <comment id="13227894" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 21:02:37 +0000"  >&lt;p&gt;aniket486 requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2777&quot; title=&quot;ability to add and drop partitions atomically&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2777&quot;&gt;HIVE-2777&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ability to add and drop partitions atomically&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2777&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2777&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  ability to add and drop partitions atomically&lt;/p&gt;

&lt;p&gt;  Hive should have ability to atomically add and drop partitions. This way admins can change partitions atomically without breaking the running jobs. It allows admin to merge several partitions into one.&lt;br/&gt;
  Essentially, we would like to have an api- add_drop_partitions(String db, String tbl_name, List&amp;lt;Partition&amp;gt; addParts, List&amp;lt;List&amp;lt;String&amp;gt;&amp;gt; dropParts, boolean deleteData);&lt;br/&gt;
  This jira covers changes required for metastore and thrift.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2271&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2271&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py&lt;br/&gt;
  metastore/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore.h&lt;br/&gt;
  metastore/src/gen/thrift/gen-cpp/ThriftHiveMetastore_server.skeleton.cpp&lt;br/&gt;
  metastore/src/gen/thrift/gen-rb/thrift_hive_metastore.rb&lt;br/&gt;
  metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java&lt;br/&gt;
  metastore/src/gen/thrift/gen-php/hive_metastore/ThriftHiveMetastore.php&lt;br/&gt;
  metastore/if/hive_metastore.thrift&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5037/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5037/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13258892" author="ashutoshc" created="Sat, 21 Apr 2012 16:47:52 +0000"  >&lt;p&gt;Unlinking from 0.9 &lt;/p&gt;</comment>
                            <comment id="13262282" author="aniket486" created="Thu, 26 Apr 2012 00:37:56 +0000"  >&lt;p&gt;Hi Ashutosh, &lt;/p&gt;

&lt;p&gt;Let me know if the patch is missing something. I will work on fixing those problems. It would be good api to have.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Aniket&lt;/p&gt;</comment>
                            <comment id="13419639" author="aniket486" created="Fri, 20 Jul 2012 22:40:22 +0000"  >&lt;p&gt;Can someone take a look at this?&lt;/p&gt;</comment>
                            <comment id="13420012" author="namit" created="Sun, 22 Jul 2012 00:53:04 +0000"  >&lt;p&gt; add_drop_partitions(String db, String tbl_name, List&amp;lt;Partition&amp;gt; addParts, List&amp;lt;List&amp;lt;String&amp;gt;&amp;gt; dropParts, boolean deleteData);&lt;/p&gt;

&lt;p&gt;What are the exact semantics of the above API ?&lt;br/&gt;
Can you give an example of what you are trying to do ?&lt;/p&gt;</comment>
                            <comment id="13420102" author="aniket486" created="Sun, 22 Jul 2012 03:55:04 +0000"  >&lt;p&gt;Thanks Namit. We are using S3 as our storage, which doesnt support move operation. Hence, to replace n number of partitions with one, we need to support that only through metadata api. In following api, for the given db and tbl_name, addParts partition list will be added to metastore and dropParts partitions will be deleted, atomically. Hence, users querying of one level up of partition hierarchy would not know that the partitions were replaced with data with a better representation (merged into bigger files, sorted etc.)&lt;/p&gt;

&lt;p&gt;add_drop_partitions(String db, String tbl_name, List&amp;lt;Partition&amp;gt; addParts, List&amp;lt;List&amp;lt;String&amp;gt;&amp;gt; dropParts, boolean deleteData);&lt;/p&gt;

&lt;p&gt;Any downsides of this approach?&lt;/p&gt;</comment>
                            <comment id="13756247" author="aniket486" created="Mon, 2 Sep 2013 21:29:55 +0000"  >&lt;p&gt;Canceling old patch, I will submit a rebased one&lt;/p&gt;</comment>
                            <comment id="13988029" author="slider" created="Fri, 2 May 2014 18:04:48 +0000"  >&lt;p&gt;ASF.LICENSE.NOT.GRANTED--&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2777&quot; title=&quot;ability to add and drop partitions atomically&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2777&quot;&gt;HIVE-2777&lt;/a&gt;.D2271.1.patch was created by Netflix. We at Netflix intend it to be freely used according to the Apache license.&lt;/p&gt;</comment>
                            <comment id="13988381" author="xinyuwan" created="Fri, 2 May 2014 22:52:14 +0000"  >&lt;p&gt;This is a rebased patch on top of hive branch-0.13. Please review.&lt;/p&gt;</comment>
                            <comment id="13988688" author="hiveqa" created="Sat, 3 May 2014 13:35:02 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12643147/hive-2777.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12643147/hive-2777.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/112/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/112/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/112/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/112/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n &apos;&apos; ]]
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-112/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;itests/hive-unit/src/test/java/org/apache/hive/beeline/TestBeeLineWithArgs.java&apos;
Reverted &apos;beeline/src/java/org/apache/hive/beeline/BeeLine.java&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ awk &apos;{print $2}&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-minikdc/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/core/target hcatalog/streaming/target hcatalog/server-extensions/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target
+ svn update

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
External at revision 1592204.

At revision 1592204.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12643147&lt;/p&gt;</comment>
                            <comment id="13991389" author="xinyuwan" created="Wed, 7 May 2014 00:17:08 +0000"  >&lt;p&gt;Sorry for the previous patch, I rebased it, and it seems fine now. Can someone please review?&lt;/p&gt;</comment>
                            <comment id="13991708" author="hiveqa" created="Wed, 7 May 2014 10:17:04 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12643663/hive-2777.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12643663/hive-2777.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 5495 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_grouping_sets4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_partscan_1_23
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_dml
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testPartition
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testPartition
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testPartition
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testPartition
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/136/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/136/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/136/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/136/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12643663&lt;/p&gt;</comment>
                            <comment id="13992031" author="ksumit" created="Wed, 7 May 2014 17:38:43 +0000"  >&lt;p&gt;These failures don&apos;t seem to be related to this patch. Can someone more knowledgeable than me comment please? &lt;/p&gt;</comment>
                            <comment id="14152614" author="xinyuwan" created="Tue, 30 Sep 2014 00:39:12 +0000"  >&lt;p&gt;Updated hive-2777 patch which fixed all the testPartition() tests. Also for the other failed tests, they are failing as well in branch-0.13 too. So please help rerun the test again. Thank you!&lt;/p&gt;</comment>
                            <comment id="16013475" author="binarylogic" created="Wed, 17 May 2017 03:51:13 +0000"  >&lt;p&gt;Apologies for digging up an old issue, but was this ever resolved? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt; did you find a work around for this? We&apos;re also storing data on S3 and need a way to atomically merge data. Hive&apos;s CONCATENATE feature is not sufficient as it introduces a brief period where data just disappears and the reappears. I&apos;d love to hear solutions to this if anyone has them. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518086" name="ASF.LICENSE.NOT.GRANTED--HIVE-2777.D2271.1.patch" size="851507" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 21:02:38 +0000"/>
                            <attachment id="12671930" name="hive-2777-updated.patch" size="700474" author="xinyuwan" created="Tue, 30 Sep 2014 00:39:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Feb 2012 06:43:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124136</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2778] Fail on table sampling </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2778</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Trying table sampling on any non-empty table throws NPE. This does not occur by test on mini-MR.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select count(*) from emp tablesample (0.1 percent);     
Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks determined at compile time: 1
In order to change the average load for a reducer (in bytes):
  set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;
In order to limit the maximum number of reducers:
  set hive.exec.reducers.max=&amp;lt;number&amp;gt;
In order to set a constant number of reducers:
  set mapred.reduce.tasks=&amp;lt;number&amp;gt;
java.lang.NullPointerException
	at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.sampleSplits(CombineHiveInputFormat.java:450)
	at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getSplits(CombineHiveInputFormat.java:403)
	at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:971)
	at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:963)
	at org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170)
	at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:880)
	at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:833)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:396)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)
	at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:833)
	at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:807)
	at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:432)
	at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136)
	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134)
	at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)
	at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1332)
	at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1123)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:931)
	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:255)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)
	at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:186)
Job Submission failed with exception &apos;java.lang.NullPointerException(null)&apos;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Reproduced only on hadoop-0.20.2-CDH3u1, work fine on hadoop-0.20.2&lt;/p&gt;</environment>
        <key id="12541359">HIVE-2778</key>
            <summary>Fail on table sampling </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Feb 2012 02:36:13 +0000</created>
                <updated>Thu, 2 May 2013 02:30:54 +0000</updated>
                            <resolved>Fri, 16 Mar 2012 01:50:42 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13201005" author="phabricator@reviews.facebook.net" created="Mon, 6 Feb 2012 02:41:58 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fail on table sampling&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; fix NPE on table sampling&lt;/p&gt;

&lt;p&gt;  Trying table sampling on any non-empty table throws NPE. This does not occur by test on mini-MR.  &amp;lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&amp;gt;&amp;lt;div class=&quot;preformattedContent panelContent&quot;&amp;gt; &amp;lt;pre&amp;gt;select count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from emp tablesample (0.1 percent);      Total MapReduce jobs = 1 Launching Job 1 out of 1 Number of reduce tasks determined at compile time: 1 In order to change the average load for a reducer (in bytes):   set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt; In order to limit the maximum number of reducers:   set hive.exec.reducers.max=&amp;lt;number&amp;gt; In order to set a constant number of reducers:   set mapred.reduce.tasks=&amp;lt;number&amp;gt; java.lang.NullPointerException 	at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.sampleSplits(CombineHiveInputFormat.java:450) 	at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getSplits(CombineHiveInputFormat.java:403) 	at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:971) 	at org.apache.hadoop.mapred.&lt;br/&gt;
 JobClient.writeSplits(JobClient.java:963) 	at org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170) 	at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:880) 	at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:833) 	at java.security.AccessController.doPrivileged(Native Method) 	at javax.security.auth.Subject.doAs(Subject.java:396) 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127) 	at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:833) 	at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:807) 	at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:432) 	at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136) 	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134) 	at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57) 	at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1332) 	at org.apache.hadoop.hive.ql.D&lt;br/&gt;
 river.execute(Driver.java:1123) 	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:931) 	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:255) 	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212) 	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403) 	at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671) 	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:597) 	at org.apache.hadoop.util.RunJar.main(RunJar.java:186) Job Submission failed with exception &apos;java.lang.NullPointerException(null)&apos; FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask  &amp;lt;/pre&amp;gt; &amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1593&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1593&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3375/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3375/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13202129" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 07:20:58 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fail on table sampling&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Walk around for hadoop-0.20.2-cdh3u1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1593&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1593&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;/p&gt;</comment>
                            <comment id="13229696" author="phabricator@reviews.facebook.net" created="Wed, 14 Mar 2012 22:22:37 +0000"  >&lt;p&gt;cwsteinbach has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fail on table sampling&quot;.&lt;/p&gt;

&lt;p&gt;  +1. Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1593&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1593&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-724&lt;/p&gt;</comment>
                            <comment id="13229698" author="cwsteinbach" created="Wed, 14 Mar 2012 22:22:56 +0000"  >&lt;p&gt;@Navis: Can you please grant license rights to the ASF? Patch looks good otherwise. Thanks.&lt;/p&gt;</comment>
                            <comment id="13230088" author="navis" created="Thu, 15 Mar 2012 11:46:08 +0000"  >&lt;p&gt;Granted license to ASF.. Couldn&apos;t it be automated by phabricator?&lt;/p&gt;</comment>
                            <comment id="13230819" author="cwsteinbach" created="Fri, 16 Mar 2012 01:50:42 +0000"  >&lt;p&gt;Committed to trunk. Thanks Navis!&lt;/p&gt;</comment>
                            <comment id="13230828" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 02:01:35 +0000"  >&lt;p&gt;navis has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fail on table sampling&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by cws.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1593&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1593&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1301310&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1301310&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13230954" author="hudson" created="Fri, 16 Mar 2012 07:54:48 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1313 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1313/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1313/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fail on table sampling&lt;br/&gt;
(Navis Ryu via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; fix NPE on table sampling&lt;/p&gt;

&lt;p&gt;Trying table sampling on any non-empty table throws NPE. This does not occur by&lt;br/&gt;
test on mini-MR.  &amp;lt;div class=&quot;preformatted panel&quot; style=&quot;border-width:&lt;br/&gt;
1px;&quot;&amp;gt;&amp;lt;div class=&quot;preformattedContent panelContent&quot;&amp;gt; &amp;lt;pre&amp;gt;select count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from&lt;br/&gt;
emp tablesample (0.1 percent);      Total MapReduce jobs = 1 Launching Job 1 out&lt;br/&gt;
of 1 Number of reduce tasks determined at compile time: 1 In order to change the&lt;br/&gt;
average load for a reducer (in bytes):   set&lt;br/&gt;
hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt; In order to limit the maximum&lt;br/&gt;
number of reducers:   set hive.exec.reducers.max=&amp;lt;number&amp;gt; In order to set a&lt;br/&gt;
constant number of reducers:   set mapred.reduce.tasks=&amp;lt;number&amp;gt;&lt;br/&gt;
java.lang.NullPointerException 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.sampleSplits(CombineHiveInputFormat.java:450)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getSplits(CombineHiveInputFormat.java:403)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:971) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:963) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:880) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:833) 	at&lt;br/&gt;
java.security.AccessController.doPrivileged(Native Method) 	at&lt;br/&gt;
javax.security.auth.Subject.doAs(Subject.java:396) 	at&lt;br/&gt;
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:833) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:807) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:432) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1332) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1123) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.Driver.run(Driver.java:931) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:255) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554) 	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597) 	at&lt;br/&gt;
org.apache.hadoop.util.RunJar.main(RunJar.java:186) Job Submission failed with&lt;br/&gt;
exception &apos;java.lang.NullPointerException(null)&apos; FAILED: Execution Error, return&lt;br/&gt;
code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask  &amp;lt;/pre&amp;gt; &amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1593&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1593&lt;/a&gt; (Revision 1301310)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301310&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301310&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265319" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:42 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547909" author="hudson" created="Wed, 9 Jan 2013 10:23:33 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Fail on table sampling&lt;br/&gt;
(Navis Ryu via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt; fix NPE on table sampling&lt;/p&gt;

&lt;p&gt;Trying table sampling on any non-empty table throws NPE. This does not occur by&lt;br/&gt;
test on mini-MR.  &amp;lt;div class=&quot;preformatted panel&quot; style=&quot;border-width:&lt;br/&gt;
1px;&quot;&amp;gt;&amp;lt;div class=&quot;preformattedContent panelContent&quot;&amp;gt; &amp;lt;pre&amp;gt;select count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from&lt;br/&gt;
emp tablesample (0.1 percent);      Total MapReduce jobs = 1 Launching Job 1 out&lt;br/&gt;
of 1 Number of reduce tasks determined at compile time: 1 In order to change the&lt;br/&gt;
average load for a reducer (in bytes):   set&lt;br/&gt;
hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt; In order to limit the maximum&lt;br/&gt;
number of reducers:   set hive.exec.reducers.max=&amp;lt;number&amp;gt; In order to set a&lt;br/&gt;
constant number of reducers:   set mapred.reduce.tasks=&amp;lt;number&amp;gt;&lt;br/&gt;
java.lang.NullPointerException 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.sampleSplits(CombineHiveInputFormat.java:450)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getSplits(CombineHiveInputFormat.java:403)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:971) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:963) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:880) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:833) 	at&lt;br/&gt;
java.security.AccessController.doPrivileged(Native Method) 	at&lt;br/&gt;
javax.security.auth.Subject.doAs(Subject.java:396) 	at&lt;br/&gt;
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)&lt;br/&gt;
	at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:833) 	at&lt;br/&gt;
org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:807) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:432) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1332) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1123) 	at&lt;br/&gt;
org.apache.hadoop.hive.ql.Driver.run(Driver.java:931) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:255) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671) 	at&lt;br/&gt;
org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554) 	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597) 	at&lt;br/&gt;
org.apache.hadoop.util.RunJar.main(RunJar.java:186) Job Submission failed with&lt;br/&gt;
exception &apos;java.lang.NullPointerException(null)&apos; FAILED: Execution Error, return&lt;br/&gt;
code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask  &amp;lt;/pre&amp;gt; &amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;Reviewed By: cwsteinbach&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1593&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1593&lt;/a&gt; (Revision 1301310)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301310&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1301310&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12541728">HIVE-2784</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12539495">HIVE-2737</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12598782">HIVE-3257</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513389" name="ASF.LICENSE.NOT.GRANTED--HIVE-2778.D1593.1.patch" size="1395" author="phabricator@reviews.facebook.net" created="Mon, 6 Feb 2012 02:41:58 +0000"/>
                            <attachment id="12513580" name="ASF.LICENSE.NOT.GRANTED--HIVE-2778.D1593.2.patch" size="1837" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 07:20:59 +0000"/>
                            <attachment id="12518449" name="HIVE-2778.D1593.2.patch" size="1837" author="navis" created="Thu, 15 Mar 2012 11:46:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Feb 2012 02:41:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07py7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2779] Improve hooks run in Driver</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2779</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are some small improvements that can be made to the hooks which are run in the Driver:&lt;/p&gt;

&lt;p&gt;1) The code to get hooks has been clearly just been copy+pasted for each of Pre/Post/OnFailure/SemanticAnalyzer hooks.  This code should be consolidated into a single method.&lt;/p&gt;

&lt;p&gt;2) There is a lot more information available to SemanticAnalyzer hooks which ran after semantic analysis than to those that run before, such as inputs and outputs.  We should make some of this information available to those hooks, preferably through HiveSemanticAnalyzerHookContext, so that existing hooks aren&apos;t broken.&lt;/p&gt;

&lt;p&gt;3) Currently, possibly unintentionally, hooks are initialized and run in the order they appear in the comma separated list that is the value of the configuration variable.  This is a useful property, we should add comments indicating this is desired and add a unit test to enforce it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541537">HIVE-2779</key>
            <summary>Improve hooks run in Driver</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Feb 2012 23:50:17 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:33 +0000</updated>
                            <resolved>Wed, 8 Feb 2012 01:38:11 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13201863" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 00:20:58 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; title=&quot;Improve hooks run in Driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2779&quot;&gt;&lt;del&gt;HIVE-2779&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Improve hooks run in Driver&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2779&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Merged the various methods in Driver to get hooks into a single method.  I took care to ensure that the checks that were occurring for SemanticAnalyzer hooks, but not for other hooks, as they are not necessarily applicable.&lt;/p&gt;

&lt;p&gt;  While doing this, I also mentioned in the comments on the method that the hooks are returned in the same order they were specified, and this was intentional.&lt;/p&gt;

&lt;p&gt;  I also updated the HiveSemanticAnalyzerHookContext to include the inputs and outputs from the SemanticAnalyzer before it is passed to any hooks which run after analysis.  I wrote it in a way such that it should not be difficult to add more should we need them.&lt;/p&gt;

&lt;p&gt;  There are some small improvements that can be made to the hooks which are run in the Driver:&lt;/p&gt;

&lt;p&gt;  1) The code to get hooks has been clearly just been copy+pasted for each of Pre/Post/OnFailure/SemanticAnalyzer hooks.  This code should be consolidated into a single method.&lt;/p&gt;

&lt;p&gt;  2) There is a lot more information available to SemanticAnalyzer hooks which ran after semantic analysis than to those that run before, such as inputs and outputs.  We should make some of this information available to those hooks, preferably through HiveSemanticAnalyzerHookContext, so that existing hooks aren&apos;t broken.&lt;/p&gt;

&lt;p&gt;  3) Currently, possibly unintentionally, hooks are initialized and run in the order they appear in the comma separated list that is the value of the configuration variable.  This is a useful property, we should add comments indicating this is desired and add a unit test to enforce it.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1599&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1599&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientnegative/bad_exec_hooks.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/hook_order.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/hook_order.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHook.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContextImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3399/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3399/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13201947" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 01:32:59 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; title=&quot;Improve hooks run in Driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2779&quot;&gt;&lt;del&gt;HIVE-2779&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Improve hooks run in Driver&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Added tests for pre and post semantic analysis hooks to verify order.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1599&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1599&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientnegative/bad_exec_hooks.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/hook_order.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/hook_order.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHook.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContextImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/p&gt;</comment>
                            <comment id="13202611" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 18:42:59 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; title=&quot;Improve hooks run in Driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2779&quot;&gt;&lt;del&gt;HIVE-2779&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Improve hooks run in Driver&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good - one minor comment. Can you add that all the inputs and outputs need not be populated&lt;br/&gt;
  in the semantic analyzer hook ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1599&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1599&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13202814" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 21:30:59 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; title=&quot;Improve hooks run in Driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2779&quot;&gt;&lt;del&gt;HIVE-2779&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Improve hooks run in Driver&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Updated the comments in HiveSemanticAnalyzerHookContext and HiveSemanticAnalyzerHookContextImpl to more explicitely say that the getInputs and getOutputs methods will only not return null if they are called after the update method is called, which should only be the case in the postAnalysis method of hooks.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1599&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1599&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientnegative/bad_exec_hooks.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/hook_order.q.out&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/hook_order.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHook.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContextImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/p&gt;</comment>
                            <comment id="13203116" author="namit" created="Wed, 8 Feb 2012 01:38:11 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13203311" author="hudson" created="Wed, 8 Feb 2012 06:32:50 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1247 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1247/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1247/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; title=&quot;Improve hooks run in Driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2779&quot;&gt;&lt;del&gt;HIVE-2779&lt;/del&gt;&lt;/a&gt; Improve Hooks run in Driver&lt;br/&gt;
(Kevin Wilfong via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1241729&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1241729&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContextImpl.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hook_order.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/bad_exec_hooks.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hook_order.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265354" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:59 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13494430" author="phabricator@reviews.facebook.net" created="Fri, 9 Nov 2012 23:37:12 +0000"  >&lt;p&gt;kevinwilfong has closed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; title=&quot;Improve hooks run in Driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2779&quot;&gt;&lt;del&gt;HIVE-2779&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Improve hooks run in Driver&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1599&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1599&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, kevinwilfong&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13547908" author="hudson" created="Wed, 9 Jan 2013 10:23:33 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2779&quot; title=&quot;Improve hooks run in Driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2779&quot;&gt;&lt;del&gt;HIVE-2779&lt;/del&gt;&lt;/a&gt; Improve Hooks run in Driver&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1241729)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1241729&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1241729&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveSemanticAnalyzerHookContextImpl.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/VerifyHooksRunInOrder.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hook_order.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/bad_exec_hooks.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hook_order.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12513538" name="ASF.LICENSE.NOT.GRANTED--HIVE-2779.D1599.1.patch" size="18740" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 00:20:59 +0000"/>
                            <attachment id="12513547" name="ASF.LICENSE.NOT.GRANTED--HIVE-2779.D1599.2.patch" size="21892" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 01:32:59 +0000"/>
                            <attachment id="12513690" name="ASF.LICENSE.NOT.GRANTED--HIVE-2779.D1599.3.patch" size="22306" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 21:31:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2012 00:20:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226824</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iy7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>108635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
