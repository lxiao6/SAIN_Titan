<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:13:30 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-5-27+AND+created+%3C%3D+2009-6-3+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="17" total="17"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-519] Regex processing gets stuck when querying weblogs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-519</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When running a simple query on a table similar to the apachelog table here: &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/UserGuide&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/UserGuide&lt;/a&gt; the regular expression matcher gets stuck in an infinite loop.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426452">HIVE-519</key>
            <summary>Regex processing gets stuck when querying weblogs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2009 10:36:06 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:12 +0000</updated>
                            <resolved>Fri, 24 Jul 2009 08:46:54 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12713524" author="johanoskarsson" created="Wed, 27 May 2009 10:37:51 +0000"  >&lt;p&gt;Attaching a thread dump from one of the map tasks.&lt;/p&gt;

&lt;p&gt;Example query that triggers this behaviour:&lt;br/&gt;
select remote_ip, count(1) from weblogs  where insertdate=&apos;2009-05-26&apos; group by remote_ip limit 10;&lt;/p&gt;</comment>
                            <comment id="12713820" author="zshao" created="Thu, 28 May 2009 01:06:57 +0000"  >&lt;p&gt;Can you upload the line of data that caused the trouble?&lt;/p&gt;</comment>
                            <comment id="12713824" author="zshao" created="Thu, 28 May 2009 01:13:23 +0000"  >&lt;p&gt;For debugging, please try&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(?:^| )((&lt;span class=&quot;code-quote&quot;&gt;&quot;|\[|\])(?:[^(&quot;&lt;/span&gt;|\[|\])]+|(&lt;span class=&quot;code-quote&quot;&gt;&quot;|\[|\])(&quot;&lt;/span&gt;|\[|\]))*(&quot;|\[|\])|[^ ]*)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;br/&gt;
your line of log&lt;br/&gt;
on&lt;br/&gt;
&lt;a href=&quot;http://www.fileformat.info/tool/regex.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.fileformat.info/tool/regex.htm&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12713947" author="johanoskarsson" created="Thu, 28 May 2009 11:26:05 +0000"  >&lt;p&gt;127.0.0.1 - - &lt;span class=&quot;error&quot;&gt;&amp;#91;26/May/2009:00:00:00 +0000&amp;#93;&lt;/span&gt; &quot;GET /someurl/?track=Blabla(Main) HTTP/1.1&quot; 200 5864 - &quot;Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/525.19 (KHTML, like Gecko) Chrome/1.0.154.65 Safari/525.19&quot;&lt;/p&gt;

&lt;p&gt;Example of a line that takes 15 seconds to process on my machine, it does eventually complete though. If I remove the (Main) part of the url it takes 29 milliseconds to finish.&lt;/p&gt;</comment>
                            <comment id="12714102" author="martind" created="Thu, 28 May 2009 18:25:00 +0000"  >&lt;p&gt;To reiterate &amp;#8211; the behaviour reported is that records with certain character sequences (in this example: an HTTP request line with parentheses in the requested path) take many orders of magnitude longer to process than usual. &lt;/p&gt;

&lt;p&gt;This looks like it&apos;s a result of Java&apos;s regex implementation using a Non-deterministic Finite Automaton, which performs badly in worst-case scenarios (like probably this one.) Check e.g. &lt;a href=&quot;http://weblogs.java.net/blog/tomwhite/archive/2006/03/a_faster_java_r.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://weblogs.java.net/blog/tomwhite/archive/2006/03/a_faster_java_r.html&lt;/a&gt; for some background.&lt;/p&gt;

&lt;p&gt;There are essentially two options to avoid this: Alter the expression, or use a different regex library. There may be a way to do the former. &lt;/p&gt;

&lt;p&gt;I&apos;ll use TestTCTLSeparatedProtocol.test1ApacheLogFormat() as an example.&lt;/p&gt;

&lt;p&gt;This is the pattern generated for this test: (?:^| )((&quot;|[|])(?:&lt;span class=&quot;error&quot;&gt;&amp;#91;^(&amp;quot;|\[|\])&amp;#93;&lt;/span&gt;+|(&quot;|[|])(&quot;|[|]))&lt;b&gt;(&quot;|[|])|&lt;span class=&quot;error&quot;&gt;&amp;#91;^ &amp;#93;&lt;/span&gt;&lt;/b&gt;)&lt;br/&gt;
Note the sub-expression: ...&lt;span class=&quot;error&quot;&gt;&amp;#91;^(&amp;quot;|\[|\])&amp;#93;&lt;/span&gt;+...&lt;/p&gt;

&lt;p&gt;I.e., it builds a pattern for a negating character class (&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;^...&amp;#93;&lt;/span&gt;&quot;) that unfortunately doesn&apos;t contain a list of characters, but instead another pattern group in parentheses. Namely, the value of QUOTE_CHAR: (&quot;|[|])&lt;/p&gt;

&lt;p&gt;After I manually converted this sub-expression to the legitimate &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;^&amp;quot;\[\]&amp;#93;&lt;/span&gt;+&quot; character class the pattern matcher performed admirably against Johan&apos;s test case.&lt;/p&gt;

&lt;p&gt;Tbh I&apos;m not sure if the character class that currently gets generated is valid; at minimum it may have some unintended side-effects. To implement this properly the pattern builder would need to have access to two different representations of the QUOTE_CHAR parameter (as a grouped expression and as a character class) when there currently only is one. &lt;/p&gt;

&lt;p&gt;(You probably need to apply &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-520&quot; title=&quot;TestTCTLSeparatedProtocol is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-520&quot;&gt;&lt;del&gt;HIVE-520&lt;/del&gt;&lt;/a&gt; first to make the TestTCTLSeparatedProtocol unit test run.)&lt;/p&gt;</comment>
                            <comment id="12734980" author="zshao" created="Fri, 24 Jul 2009 08:46:54 +0000"  >&lt;p&gt;Fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-167&quot; title=&quot;Hive: add a RegularExpressionDeserializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-167&quot;&gt;&lt;del&gt;HIVE-167&lt;/del&gt;&lt;/a&gt;. Please see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-662&quot; title=&quot;Add a method to parse apache weblogs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-662&quot;&gt;&lt;del&gt;HIVE-662&lt;/del&gt;&lt;/a&gt; for the example query for apache web log files.&lt;/p&gt;</comment>
                            <comment id="12734986" author="zshao" created="Fri, 24 Jul 2009 08:58:28 +0000"  >&lt;p&gt;By the way, we plan to deprecate DynamicSerDe (with all protocols) at some time, because a lot of protocols (like TCTLSeparatedProtocol) are not real Thrift Protocols and it&apos;s overly complicated to fit these serialization methods into Thrift.  We will still support the &quot;ThriftDeserializer&quot; which supports statically generated java classes.&lt;/p&gt;

&lt;p&gt;What do you guys think? Are there any dependencies on DynamicSerDe on your end?&lt;/p&gt;</comment>
                            <comment id="12735595" author="johanoskarsson" created="Mon, 27 Jul 2009 12:56:13 +0000"  >&lt;p&gt;We don&apos;t depend on DynamicSerDe, so we don&apos;t mind if it is deprecated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12431012">HIVE-662</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12407566">HIVE-167</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12409153" name="hive-stdout" size="14015" author="johanoskarsson" created="Wed, 27 May 2009 10:37:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 May 2009 01:06:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73474</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-520] TestTCTLSeparatedProtocol is broken</title>
                <link>https://issues.apache.org/jira/browse/HIVE-520</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Some of the tests in TestTCTLSeparatedProtocol throws a NullPointedException that is catched, logged and not rethrown. This means the tests don&apos;t fail even though an unexpected exception is thrown.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426489">HIVE-520</key>
            <summary>TestTCTLSeparatedProtocol is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johanoskarsson">Johan Oskarsson</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2009 16:59:28 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:51 +0000</updated>
                            <resolved>Sat, 30 May 2009 22:54:48 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12713917" author="johanoskarsson" created="Thu, 28 May 2009 09:21:50 +0000"  >&lt;p&gt;This patch removes the try catch block to allow the tests to fail if an unexpected exception is thrown. It also changes the various &quot;empty string&quot; checks to check for null values, which seems to be the current behaviour. The final piece is that internalInitialize was run twice, causing it to empty the string tokenizer and failing the tests.&lt;/p&gt;</comment>
                            <comment id="12714094" author="namit" created="Thu, 28 May 2009 18:08:21 +0000"  >&lt;p&gt;I think we should get rid of DynamicSerde and TCLSeperatedProtocol completely - it is not being used much anyway.&lt;br/&gt;
We should phase it out - in that case, I am not sure if we should invest in fixing bugs in that area. &lt;/p&gt;

&lt;p&gt;Your patch looks OK, but in the long run, I am not sure whether we want to support Dynamic SerDe or not.&lt;/p&gt;</comment>
                            <comment id="12714172" author="zshao" created="Thu, 28 May 2009 21:02:58 +0000"  >&lt;p&gt;I think we should keep the internalInitialize() call in TCTLSeparatedProtocol, because people are not required to call initialize (per Thrift TProtocol interface).&lt;br/&gt;
Otherwise it looks good.&lt;/p&gt;

&lt;p&gt;Given the interests of parsing apache logs, I think we will have to keep TCTLSeparatedProtocol for some time.&lt;/p&gt;</comment>
                            <comment id="12714451" author="johanoskarsson" created="Fri, 29 May 2009 13:42:48 +0000"  >&lt;p&gt;Would the best alternative to DynamicSerde and TCLSeperatedProtocol be to implement a custom Apache weblog serde? I assume it is a reasonably common use case to parse weblogs.&lt;/p&gt;

&lt;p&gt;If the internalInitialize() call is left in both the constructor and the initialize method it breaks the tests. The first call will consume the data from the transport and by the time the second call comes there won&apos;t be any data left to initialize with, resulting in a NullPointerException. Perhaps all the initializing can be moved to the constructor?&lt;/p&gt;</comment>
                            <comment id="12714638" author="zshao" created="Fri, 29 May 2009 23:45:52 +0000"  >&lt;p&gt;Johan, that makes sense - I agree we don&apos;t need &quot;initialize&quot; call in the constructor now.&lt;br/&gt;
The patch looks good. I will test the patch and commit.&lt;/p&gt;</comment>
                            <comment id="12714791" author="zshao" created="Sat, 30 May 2009 22:54:48 +0000"  >&lt;p&gt;Committed. Thanks Johan!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409249" name="HIVE-520.patch" size="9852" author="johanoskarsson" created="Thu, 28 May 2009 09:21:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 May 2009 18:08:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122313</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-520&quot; title=&quot;TestTCTLSeparatedProtocol is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-520&quot;&gt;&lt;strike&gt;HIVE-520&lt;/strike&gt;&lt;/a&gt;. Fix TestTCTLSeparatedProtocol. (Johan Oskarsson via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-521] Move size, if, isnull, isnotnull to GenericUDF</title>
                <link>https://issues.apache.org/jira/browse/HIVE-521</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-511&quot; title=&quot;Change the hashcode for DoubleWritable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-511&quot;&gt;&lt;del&gt;HIVE-511&lt;/del&gt;&lt;/a&gt; for an example of the move.&lt;/p&gt;

&lt;p&gt;size, if, isnull, isnotnull are all implemented with UDF but they are actually working on variable types of objects. We should move them to GenericUDF for better type handling.&lt;/p&gt;

&lt;p&gt;This also helps to clean up the hack in doing type matching/type conversion in UDF.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426515">HIVE-521</key>
            <summary>Move size, if, isnull, isnotnull to GenericUDF</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coderplay">Min Zhou</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2009 21:15:44 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:49 +0000</updated>
                            <resolved>Fri, 19 Jun 2009 01:54:22 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12714877" author="coderplay" created="Sun, 31 May 2009 15:14:24 +0000"  >&lt;p&gt;support if now.&lt;/p&gt;</comment>
                            <comment id="12714880" author="coderplay" created="Sun, 31 May 2009 15:26:31 +0000"  >&lt;p&gt;corrected a typo&lt;/p&gt;</comment>
                            <comment id="12714884" author="coderplay" created="Sun, 31 May 2009 15:45:36 +0000"  >&lt;p&gt;Zheng, I don&apos;t quite understand why isnull &amp;amp; isnotnull need type handlings, could you give me an explanation?&lt;/p&gt;</comment>
                            <comment id="12714937" author="zshao" created="Sun, 31 May 2009 23:40:59 +0000"  >&lt;p&gt;Nice work.&lt;/p&gt;

&lt;p&gt;Several issues:&lt;br/&gt;
1. It seems the code does not work if the boolean expression evaluates to null. Can you add a test case (like ql/test/query/clientpositive/udf*.q) and run &quot;ant test -Dtestcase=TestCliDriver -Dqfile=udf_if.q -Doverwrite=true) to generate the standard output of the query? Also we need to do &quot;svn add&quot; for both the query file and the result file.&lt;br/&gt;
2. GenericUDFIsNull and GenericUDFIsNotNull can be very simple - just test if the Object is null or not in evaluate. We are now doing it in UDFIsNull etc but we did add special handling code to make sure we can pass a complex object into UDF. That solution is half-baked (can only test whether it&apos;s null/not null but there is no way to inspect the internal structure because no ObjectInspector is passed) and very ugly. That&apos;s why we want to move it to GenericUDF.&lt;br/&gt;
3. The above argument is also true for size(). We have special handling code in UDF to make sure we can convert a Hive map/list data structure to java map/list, which is also half-baked and hacky.&lt;/p&gt;

&lt;p&gt;Let me know if you have any questions on this.&lt;/p&gt;</comment>
                            <comment id="12714950" author="coderplay" created="Mon, 1 Jun 2009 01:06:12 +0000"  >&lt;p&gt;Thanks, Zheng&lt;/p&gt;

&lt;p&gt;1. Do you mean queries like below ? &lt;br/&gt;
  select if(true, null , null) from tbl&lt;br/&gt;
I believe GenericUDFWhen also has that problem, try&lt;br/&gt;
  select case when true then null else null end from tbl&lt;br/&gt;
2. Some excpetion throws when initializing actually is not a type exception, but an exception on arguments&apos; length.  Signature for method initialize() is not fit for every situation, I think.&lt;br/&gt;
 public ObjectInspector initialize(ObjectInspector[] arguments)&lt;br/&gt;
      throws UDFArgumentTypeException;&lt;br/&gt;
3. please check &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-512&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-512&lt;/a&gt;, I thought there are more inconvenience in GenericUDF.&lt;/p&gt;</comment>
                            <comment id="12714953" author="coderplay" created="Mon, 1 Jun 2009 02:28:53 +0000"  >&lt;p&gt;add 4 unit test cases, 1 positive, 3 negatives.&lt;/p&gt;</comment>
                            <comment id="12714955" author="coderplay" created="Mon, 1 Jun 2009 02:44:16 +0000"  >&lt;p&gt;can work if the first expression evaluates to null now.&lt;/p&gt;</comment>
                            <comment id="12715736" author="zshao" created="Tue, 2 Jun 2009 22:46:38 +0000"  >&lt;p&gt;Getting better.&lt;br/&gt;
IF(null, 1, 2) should return 2 instead of null according to mysql.&lt;br/&gt;
Can you move size, isnull and isnotnull in the same transaction?&lt;/p&gt;</comment>
                            <comment id="12717187" author="coderplay" created="Mon, 8 Jun 2009 07:56:51 +0000"  >&lt;p&gt;done.&lt;/p&gt;</comment>
                            <comment id="12717196" author="zshao" created="Mon, 8 Jun 2009 08:41:10 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-521&quot; title=&quot;Move size, if, isnull, isnotnull to GenericUDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-521&quot;&gt;&lt;del&gt;HIVE-521&lt;/del&gt;&lt;/a&gt;-all-v1.patch&lt;br/&gt;
Almost perfect now. Some minor issues:&lt;br/&gt;
1. getDisplayString for &quot;null&quot; and &quot;is not null&quot; does not include the display string for any children.&lt;br/&gt;
2. for both &quot;null&quot; and &quot;is not null&quot; (and maybe others), please put &quot;assert&quot; on the size of the parameter when appropriate&lt;br/&gt;
3. I think&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void registerGenericUDF(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; functionName, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericUDF&amp;gt; genericUDFClass);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is good enough. We don&apos;t need the other 2 newly added registerGenericUDF functions because genericUDF constructs the display string by itself (so there is no need for OPType and isOperator).&lt;br/&gt;
What do you think? If you agree, let&apos;s do:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    registerGenericUDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;isnull&quot;&lt;/span&gt;, GenericUDFOPNull.class);
+    registerGenericUDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;isnotnull&quot;&lt;/span&gt;, GenericUDFOPNotNull.class);
+    registerGenericUDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;&quot;&lt;/span&gt;, GenericUDFIf.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12717221" author="coderplay" created="Mon, 8 Jun 2009 10:14:44 +0000"  >&lt;p&gt;I don&apos;t think assert is a good way detecting runtime exceptions since it will throw exceptions won&apos;t be caught by jvm.  Those jvms running on slave nodes will down. It&apos;s better show errors to user before submitting a job. &lt;/p&gt;</comment>
                            <comment id="12717336" author="zshao" created="Mon, 8 Jun 2009 17:42:13 +0000"  >&lt;p&gt;Min mentioned the UDFArgumentException and UDFArgumentLengthException offline. I think that&apos;s a better way we can either do that in a separate jira or together with this one.&lt;br/&gt;
The good thing about doing it together is that GenericUDFOPNull and GenericUDFOPNotNull (and GenericUDFIf) can use it right away.&lt;/p&gt;</comment>
                            <comment id="12718101" author="coderplay" created="Wed, 10 Jun 2009 14:51:53 +0000"  >&lt;p&gt;fixed issues commented by Zheng,  UDFArgumentException and UDFArgumentLengthException added.&lt;/p&gt;</comment>
                            <comment id="12718271" author="coderplay" created="Thu, 11 Jun 2009 01:53:04 +0000"  >&lt;p&gt;catch UDFArgumentLengthException.&lt;/p&gt;</comment>
                            <comment id="12719901" author="zshao" created="Tue, 16 Jun 2009 02:34:22 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-521&quot; title=&quot;Move size, if, isnull, isnotnull to GenericUDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-521&quot;&gt;&lt;del&gt;HIVE-521&lt;/del&gt;&lt;/a&gt;-all-v3.patch:&lt;/p&gt;

&lt;p&gt;Some nitpicks about error messages:&lt;br/&gt;
&quot;The function IF(expr1,expr2,expr3) only accepts 3 arguments&quot; --&amp;gt; &quot;The function IF(expr1,expr2,expr3) accepts exactly 3 arguments&quot;&lt;br/&gt;
&quot;The first expression of function IF is expected to&quot; --&amp;gt; &quot;The first argument of function IF should be &quot;&lt;br/&gt;
&quot;The second and the third expressions of function IF should have the same type&quot; --&amp;gt; &quot;The second and the third arguments of function IF should have the same type&quot;&lt;br/&gt;
&quot;but it&apos;s found the former is \&quot;&quot; + arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.getTypeName()  + &quot;\&quot;, while the latter is \&quot;&quot; + arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.getTypeName() + &quot;\&quot;&quot;); --&amp;gt; &quot;but they are different: \&quot;&quot; + arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.getTypeName()  + &quot;\&quot; and \&quot;&quot; + arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.getTypeName() + &quot;\&quot;&quot;);&lt;/p&gt;

&lt;p&gt;Please also do an &quot;svn up&quot; since there are some recent changes that might break this patch. Also try &quot;ant test -Dhadoop.version=0.17.0 -Doverwrite=true&quot; to get all changed test outputs (if any).&lt;/p&gt;</comment>
                            <comment id="12720129" author="coderplay" created="Tue, 16 Jun 2009 13:44:22 +0000"  >&lt;p&gt;passed tests on hadoop version 0.17.0.&lt;/p&gt;</comment>
                            <comment id="12721146" author="zshao" created="Thu, 18 Jun 2009 09:49:03 +0000"  >&lt;p&gt;Fixed some more test output changes.&lt;/p&gt;

&lt;p&gt;Next time, please run:&lt;br/&gt;
ant -Dhadoop.version=0.17.0 test -Doverwrite=true&lt;/p&gt;

&lt;p&gt;to generate all new test results, and then make sure the changed test results are OK.&lt;/p&gt;


&lt;p&gt;Testing again. Will commit if the tests all pass.&lt;/p&gt;</comment>
                            <comment id="12721169" author="coderplay" created="Thu, 18 Jun 2009 10:23:10 +0000"  >&lt;p&gt;I didn&apos;t  think all tests would pass due to the shortage of a class BinaryComparable. The reason why failing has nothing to do with this jira.  you can check out the trunk,and do &lt;br/&gt;
ant -Dhadoop.version=0.17.0 test -Doverwrite=true&lt;br/&gt;
then error message will be displayed.&lt;br/&gt;
...&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: org/apache/hadoop/io/BinaryComparable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.lang.NoClassDefFoundError: org/apache/hadoop/io/BinaryComparable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.Class.getDeclaredConstructors0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.Class.getConstructor0(Class.java:2699)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.Class.newInstance0(Class.java:326)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.Class.newInstance(Class.java:308)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.exec.FunctionRegistry.getUDFMethod(FunctionRegistry.java:309)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.getFuncExprNodeDesc(TypeCheckProcFactory.java:451)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.getXpathOrFuncExprNodeDesc(TypeCheckProcFactory.java:558)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.process(TypeCheckProcFactory.java:653)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:80)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.dispatch(DefaultGraphWalker.java:83)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.walk(DefaultGraphWalker.java:116)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.startWalking(DefaultGraphWalker.java:95)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:3922)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genFilterPlan(SemanticAnalyzer.java:1000)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genFilterPlan(SemanticAnalyzer.java:986)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genBodyPlan(SemanticAnalyzer.java:3163)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:3610)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:3840)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:76)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:44)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:76)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:177)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.Driver.run(Driver.java:209)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:176)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:216)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.QTestUtil.executeClient(QTestUtil.java:471)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_case_sensitivity(TestCliDriver.java:726)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:297)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:672)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:567)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.io.BinaryComparable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.net.URLClassLoader$1.run(URLClassLoader.java:200)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     ... 43 more&lt;/p&gt;</comment>
                            <comment id="12721170" author="zshao" created="Thu, 18 Jun 2009 10:27:52 +0000"  >&lt;p&gt;Min, please do &quot;ant clean&quot; before you try a different hadoop.version. Then you won&apos;t see this problem again.&lt;/p&gt;</comment>
                            <comment id="12721173" author="zshao" created="Thu, 18 Jun 2009 10:35:41 +0000"  >&lt;p&gt;Attached a wrong file last time.&lt;/p&gt;</comment>
                            <comment id="12721192" author="zshao" created="Thu, 18 Jun 2009 11:02:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-521&quot; title=&quot;Move size, if, isnull, isnotnull to GenericUDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-521&quot;&gt;&lt;del&gt;HIVE-521&lt;/del&gt;&lt;/a&gt;-all-v7.patch passed all tests on my local machine.&lt;br/&gt;
Min, can you take a look at the minor changes that I made to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-521&quot; title=&quot;Move size, if, isnull, isnotnull to GenericUDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-521&quot;&gt;&lt;del&gt;HIVE-521&lt;/del&gt;&lt;/a&gt;-all-v6.patch?&lt;/p&gt;</comment>
                            <comment id="12721231" author="coderplay" created="Thu, 18 Jun 2009 12:42:50 +0000"  >&lt;p&gt;@ &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-521&quot; title=&quot;Move size, if, isnull, isnotnull to GenericUDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-521&quot;&gt;&lt;del&gt;HIVE-521&lt;/del&gt;&lt;/a&gt;-all-v7.patch &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; conditionTypeIsOk = (arguments[0].getCategory() == ObjectInspector.Category.PRIMITIVE);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conditionTypeIsOk) {
  PrimitiveObjectInspector poi = ((PrimitiveObjectInspector)arguments[0]);
  conditionTypeIsOk = (poi.getPrimitiveCategory() == PrimitiveObjectInspector.PrimitiveCategory.BOOLEAN
                       || poi.getPrimitiveCategory() == PrimitiveObjectInspector.PrimitiveCategory.VOID);
}
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!conditionTypeIsOk) {
  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UDFArgumentTypeException(0,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;The first argument of function IF should be \&quot;&lt;/span&gt;&quot; + Constants.BOOLEAN_TYPE_NAME
      + &lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;, but \&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; + arguments[0].getTypeName() + &quot;&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot; is found&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; typeName = arguments[0].getTypeName();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!typeName.equals(Constants.BOOLEAN_TYPE_NAME)
            || !typeName.equals(Constants.VOID_TYPE_NAME)) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UDFArgumentTypeException(0,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;The first expression of function IF is expected to \&quot;&lt;/span&gt;&quot; + Constants.BOOLEAN_TYPE_NAME
          + &lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;, but \&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; + arguments[0].getTypeName() + &quot;&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot; is found&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I though the 2nd approach is more concise, do you think so?&lt;/p&gt;</comment>
                            <comment id="12721232" author="zshao" created="Thu, 18 Jun 2009 12:47:29 +0000"  >&lt;p&gt;Yes, the 2nd approach is more concise. But I think the 1st approach is more elegant.&lt;br/&gt;
Doing string comparisons are kind of ugly and sometimes error-prone, because strings are usually for display purposes.&lt;/p&gt;</comment>
                            <comment id="12721595" author="coderplay" created="Fri, 19 Jun 2009 01:03:12 +0000"  >&lt;p&gt;ok, we are hairsplitting. passed all tests here, let commit it .&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="12721610" author="zshao" created="Fri, 19 Jun 2009 01:54:22 +0000"  >&lt;p&gt;Committed. Thanks Min!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409503" name="HIVE-521-IF-2.patch" size="4901" author="coderplay" created="Sun, 31 May 2009 15:26:31 +0000"/>
                            <attachment id="12409517" name="HIVE-521-IF-3.patch" size="10398" author="coderplay" created="Mon, 1 Jun 2009 02:28:53 +0000"/>
                            <attachment id="12409519" name="HIVE-521-IF-4.patch" size="10833" author="coderplay" created="Mon, 1 Jun 2009 02:44:16 +0000"/>
                            <attachment id="12409521" name="HIVE-521-IF-5.patch" size="10866" author="coderplay" created="Mon, 1 Jun 2009 03:28:50 +0000"/>
                            <attachment id="12409497" name="HIVE-521-IF.patch" size="4898" author="coderplay" created="Sun, 31 May 2009 15:14:24 +0000"/>
                            <attachment id="12410109" name="HIVE-521-all-v1.patch" size="31470" author="coderplay" created="Mon, 8 Jun 2009 07:56:51 +0000"/>
                            <attachment id="12410317" name="HIVE-521-all-v2.patch" size="42414" author="coderplay" created="Wed, 10 Jun 2009 14:51:53 +0000"/>
                            <attachment id="12410355" name="HIVE-521-all-v3.patch" size="42888" author="coderplay" created="Thu, 11 Jun 2009 01:53:04 +0000"/>
                            <attachment id="12410805" name="HIVE-521-all-v4.patch" size="42859" author="coderplay" created="Tue, 16 Jun 2009 13:44:22 +0000"/>
                            <attachment id="12411022" name="HIVE-521-all-v5.patch" size="42446" author="coderplay" created="Thu, 18 Jun 2009 03:28:16 +0000"/>
                            <attachment id="12411029" name="HIVE-521-all-v6.patch" size="42040" author="coderplay" created="Thu, 18 Jun 2009 05:22:33 +0000"/>
                            <attachment id="12411059" name="HIVE-521-all-v7.patch" size="92618" author="zshao" created="Thu, 18 Jun 2009 10:35:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 31 May 2009 15:14:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73472</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122314</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-521&quot; title=&quot;Move size, if, isnull, isnotnull to GenericUDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-521&quot;&gt;&lt;strike&gt;HIVE-521&lt;/strike&gt;&lt;/a&gt;. Move size, if, isnull, isnotnull to GenericUDF. (Min Zhou via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-522] GenericUDAF: Extend UDAF to deal with complex types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-522</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We can pass arbitrary arguments into GenericUDFs. We should do the same thing to GenericUDAF so that UDAF can also take arbitrary arguments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426536">HIVE-522</key>
            <summary>GenericUDAF: Extend UDAF to deal with complex types</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 May 2009 01:37:09 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:47 +0000</updated>
                            <resolved>Wed, 15 Jul 2009 01:53:46 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12715818" author="zshao" created="Wed, 3 Jun 2009 05:49:36 +0000"  >&lt;p&gt;A preliminary patch that includes all new classes. They are not integrated with GroupByOperator yet but the integration work is pretty straight-forward.&lt;/p&gt;

&lt;p&gt;GenericUDAF is more complex than I thought at first. So I&apos;ve created a bunch of classes for it:&lt;/p&gt;

&lt;p&gt;1, GenericUDAFResolver: takes a function name and the list of parameter TypeInfo and returns a GenericUDAFEvaluator.&lt;br/&gt;
2. GenericUDAFEvaluator: allows 2 things:&lt;br/&gt;
2.1 Create a new aggregation result buffer&lt;br/&gt;
2.2 Update an aggregation result buffer, or terminate the aggregation and get the results.&lt;br/&gt;
3. The aggregation result buffer in step 2 is an interface. Each GenericUDAFEvaluator should have its own aggregation result buffer class to store the data (for example, a count for count(), a count and a sum for average()).&lt;/p&gt;

&lt;p&gt;1 is used at compile time. 2 and 3 are at runtime.&lt;/p&gt;

&lt;p&gt;The reason that I split 2 and 3 is:&lt;br/&gt;
A. It shrinks the size of the aggregation result buffer size - only a &quot;long&quot; is needed for count. (input&apos;s ObjectInspector and output writable Object (e.g. Long or LongWritable of count()) are both stored in GenericUDAFEvaluator).&lt;br/&gt;
B. It makes it easier to move to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-535&quot; title=&quot;Memory-efficient hash-based Aggregation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-535&quot;&gt;HIVE-535&lt;/a&gt;: A3 in the future.&lt;/p&gt;
</comment>
                            <comment id="12717185" author="zshao" created="Mon, 8 Jun 2009 07:55:20 +0000"  >&lt;p&gt;This patch passes all tests.&lt;/p&gt;

&lt;p&gt;Note that there was a bug in the &quot;count&quot; UDAF in treating empty strings as nulls. This patch also fixes this problem.&lt;br/&gt;
Also, the SerDe for temporary files between different jobs are changed to LazySimpleSerDe, because DynamicSerDe is not capable of understanding sub-structs (GenericUDAFAverage&apos;s partial aggregation results are a struct of a &quot;long&quot; count and a &quot;double&quot; sum).&lt;/p&gt;</comment>
                            <comment id="12727371" author="zshao" created="Mon, 6 Jul 2009 00:27:41 +0000"  >&lt;p&gt;This patch merged all recent trunk changes and fixed all test errors.&lt;/p&gt;</comment>
                            <comment id="12727809" author="zshao" created="Mon, 6 Jul 2009 22:16:13 +0000"  >&lt;p&gt;Resolved conflicts with recent trunk changes.&lt;/p&gt;</comment>
                            <comment id="12727837" author="zshao" created="Mon, 6 Jul 2009 23:48:01 +0000"  >&lt;p&gt;Overwrited all test failures.&lt;/p&gt;</comment>
                            <comment id="12729572" author="zshao" created="Fri, 10 Jul 2009 08:26:55 +0000"  >&lt;p&gt;Merged with trunk again and fixed all tests.&lt;/p&gt;</comment>
                            <comment id="12730451" author="zshao" created="Mon, 13 Jul 2009 18:24:43 +0000"  >&lt;p&gt;Merged with trunk again.&lt;/p&gt;</comment>
                            <comment id="12731219" author="zshao" created="Tue, 14 Jul 2009 23:59:00 +0000"  >&lt;p&gt;Merged with trunk again.&lt;/p&gt;

&lt;p&gt;Some other changes after reviewing with Namit:&lt;br/&gt;
1. Remove debug message in Driver.java&lt;br/&gt;
2. Using LazySimpleSerDe for map/reduce boundary value part, and intermediate files&lt;br/&gt;
3. Removed PrimitiveConverter classes that is already added in the code base in another file.&lt;/p&gt;</comment>
                            <comment id="12731230" author="zshao" created="Wed, 15 Jul 2009 00:41:38 +0000"  >&lt;p&gt;Forgot to overwrite some of the test results.&lt;/p&gt;</comment>
                            <comment id="12731242" author="namit" created="Wed, 15 Jul 2009 01:53:46 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409731" name="HIVE-522.1.patch" size="37634" author="zshao" created="Wed, 3 Jun 2009 05:49:36 +0000"/>
                            <attachment id="12413506" name="HIVE-522.10.patch" size="616763" author="zshao" created="Wed, 15 Jul 2009 00:41:38 +0000"/>
                            <attachment id="12410108" name="HIVE-522.2.patch" size="387951" author="zshao" created="Mon, 8 Jun 2009 07:55:20 +0000"/>
                            <attachment id="12412571" name="HIVE-522.3.patch" size="434324" author="zshao" created="Mon, 6 Jul 2009 00:27:41 +0000"/>
                            <attachment id="12412660" name="HIVE-522.4.patch" size="406105" author="zshao" created="Mon, 6 Jul 2009 22:16:13 +0000"/>
                            <attachment id="12412674" name="HIVE-522.5.patch" size="612895" author="zshao" created="Mon, 6 Jul 2009 23:48:00 +0000"/>
                            <attachment id="12413091" name="HIVE-522.6.patch" size="329643" author="zshao" created="Fri, 10 Jul 2009 08:26:55 +0000"/>
                            <attachment id="12413329" name="HIVE-522.8.patch" size="622831" author="zshao" created="Mon, 13 Jul 2009 18:24:43 +0000"/>
                            <attachment id="12413501" name="HIVE-522.9.patch" size="623478" author="zshao" created="Tue, 14 Jul 2009 23:59:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jul 2009 01:53:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73471</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laa7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122316</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-523] FIx PartitionPruner not to fetch all partitions at once</title>
                <link>https://issues.apache.org/jira/browse/HIVE-523</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;All partitions are fetched at once causing metastore to go OutOfMemory. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12426636">HIVE-523</key>
            <summary>FIx PartitionPruner not to fetch all partitions at once</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 May 2009 23:05:45 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:44 +0000</updated>
                            <resolved>Fri, 29 May 2009 07:02:00 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Metastore</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12714236" author="prasadc" created="Fri, 29 May 2009 00:07:01 +0000"  >&lt;p&gt;Instead of fetching all the partition objects, fetch only partition names and then fetch each partition one by one, only when needed.&lt;/p&gt;</comment>
                            <comment id="12714237" author="prasadc" created="Fri, 29 May 2009 00:07:37 +0000"  >&lt;p&gt;running tests...&lt;/p&gt;</comment>
                            <comment id="12714302" author="prasadc" created="Fri, 29 May 2009 05:34:22 +0000"  >&lt;p&gt;there was a problem with test where output partitions are listed in reverse order. fixed that.&lt;/p&gt;</comment>
                            <comment id="12714321" author="zshao" created="Fri, 29 May 2009 06:20:55 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12714331" author="zshao" created="Fri, 29 May 2009 07:02:00 +0000"  >&lt;p&gt;Committed. Thanks Prasad!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409339" name="hive-523.2.patch" size="11116" author="prasadc" created="Fri, 29 May 2009 05:34:22 +0000"/>
                            <attachment id="12409325" name="hive-523.patch" size="5688" author="prasadc" created="Fri, 29 May 2009 00:07:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 May 2009 06:20:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-523&quot; title=&quot;FIx PartitionPruner not to fetch all partitions at once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-523&quot;&gt;&lt;strike&gt;HIVE-523&lt;/strike&gt;&lt;/a&gt;. FIx PartitionPruner not to fetch all partitions at once. (Prasad Chakka via zshao) </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-524] ExecDriver adds 0 byte file to input paths</title>
                <link>https://issues.apache.org/jira/browse/HIVE-524</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In the addInputPaths method in ExecDriver:&lt;br/&gt;
If the input path of a partition cannot be found or contains no files with data in them, a 0 byte file is created and added to the job instead. This causes our custom InputFormat to throw an exception since it is asked to process an unknown file format (not an lzo file).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426679">HIVE-524</key>
            <summary>ExecDriver adds 0 byte file to input paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 May 2009 14:24:38 +0000</created>
                <updated>Mon, 26 Jul 2010 06:33:35 +0000</updated>
                                            <version>0.5.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12714464" author="johanoskarsson" created="Fri, 29 May 2009 14:27:00 +0000"  >&lt;p&gt;What is the purpose of the empty files? Could we simply skip adding anything if the input partition directory is missing? Or alternatively raise an error to the user.&lt;/p&gt;</comment>
                            <comment id="12714561" author="namit" created="Fri, 29 May 2009 19:29:45 +0000"  >&lt;p&gt;The problem is that downstream map-reduce jobs can run into problems.&lt;/p&gt;

&lt;p&gt;For eg:&lt;/p&gt;

&lt;p&gt;consider the query:&lt;/p&gt;


&lt;p&gt;select .... from&lt;br/&gt;
(query 1  union all query 2);&lt;/p&gt;

&lt;p&gt;It will result in 3 map-reduce jobs: query 1, query 2 and outer query depending on query 1 and query2.&lt;/p&gt;

&lt;p&gt;If query2 had empty partitions, and we disallow it.&lt;br/&gt;
outer query will fail because the output for query 2 has not been created.&lt;/p&gt;

&lt;p&gt;That&apos;s why we create a dummy file&lt;/p&gt;

&lt;p&gt;The correct fix would be to create a file based on the table descriptor instead of some hard-coded value. Then, the custom input format can be attached to the table descriptor and will work fine.&lt;br/&gt;
I am already in the process of implementing that as part of map-join, and will merge it in soon.&lt;/p&gt;</comment>
                            <comment id="12714562" author="namit" created="Fri, 29 May 2009 19:30:27 +0000"  >&lt;p&gt;The fix should be in:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-195&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12714637" author="zshao" created="Fri, 29 May 2009 23:42:26 +0000"  >&lt;p&gt;Namit, is it convenient to split the patch for this one? That map-side join is a big patch but this one seems a really small fix.&lt;/p&gt;</comment>
                            <comment id="12714646" author="jsensarma" created="Sat, 30 May 2009 01:16:59 +0000"  >&lt;p&gt;maybe we should get rid of the assumption that the subqueries need to produce output directories?&lt;/p&gt;</comment>
                            <comment id="12729598" author="johanoskarsson" created="Fri, 10 Jul 2009 10:39:37 +0000"  >&lt;p&gt;Seems &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-195&quot; title=&quot;map-side joins are not supported&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-195&quot;&gt;&lt;del&gt;HIVE-195&lt;/del&gt;&lt;/a&gt; didn&apos;t fix this issue? I just ran into it again with the latest trunk checkout&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12424563">HIVE-469</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 May 2009 19:29:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122319</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-525] Hive on Eclipse is broken</title>
                <link>https://issues.apache.org/jira/browse/HIVE-525</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Recent addition of MiniMRCluster broken Eclipse setup&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426753">HIVE-525</key>
            <summary>Hive on Eclipse is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Sat, 30 May 2009 22:28:02 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:17 +0000</updated>
                            <resolved>Mon, 1 Jun 2009 10:16:57 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12715045" author="johanoskarsson" created="Mon, 1 Jun 2009 10:16:57 +0000"  >&lt;p&gt;Committed. Thanks Prasad!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409483" name="hive-525.patch" size="861" author="prasadc" created="Sat, 30 May 2009 22:30:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 1 Jun 2009 10:16:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73469</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lab3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122320</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-526] add standalone option to jdbc tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-526</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;currently the code for standalone tests is commented. also need to add test for describe and show commands for jdbc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426866">HIVE-526</key>
            <summary>add standalone option to jdbc tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 00:19:35 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:22 +0000</updated>
                            <resolved>Sat, 20 Jun 2009 03:31:55 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12715315" author="rsm" created="Tue, 2 Jun 2009 00:22:23 +0000"  >&lt;p&gt;For instructions on running the test in standalone mode see &lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/HiveServer&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/HiveServer&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12722129" author="billgraham" created="Sat, 20 Jun 2009 03:31:55 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-568&quot; title=&quot;Driver.getSchema() throws an Exception with partitioned tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-568&quot;&gt;&lt;del&gt;HIVE-568&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409615" name="hive-526.1.patch" size="2524" author="rsm" created="Tue, 2 Jun 2009 00:22:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 20 Jun 2009 03:31:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kq0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>119033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-527] Inserting into a partitioned table without specifying the partition field should fail</title>
                <link>https://issues.apache.org/jira/browse/HIVE-527</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following piece of code should fail but it succeeded - and it deletes all existing partitions of zshao_p.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE zshao_p (a string) PARTITIONED BY (ds string);
INSERT OVERWRITE table zshao_p SELECT 1 from zshao_tt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It should output an error saying that the partition key/value pair is not specified.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426875">HIVE-527</key>
            <summary>Inserting into a partitioned table without specifying the partition field should fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 04:01:18 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:43 +0000</updated>
                            <resolved>Thu, 9 Jul 2009 16:45:44 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12718329" author="he yongqiang" created="Thu, 11 Jun 2009 07:24:11 +0000"  >&lt;p&gt;Then what about the load overwrite data statement? Should it also report an error if no partition specified? &lt;/p&gt;</comment>
                            <comment id="12718331" author="prasadc" created="Thu, 11 Jun 2009 07:26:28 +0000"  >&lt;p&gt;yeah, it should fail as well.&lt;/p&gt;</comment>
                            <comment id="12718562" author="namit" created="Thu, 11 Jun 2009 17:12:15 +0000"  >&lt;p&gt;The changes looks good, but I had a minor comment.&lt;/p&gt;

&lt;p&gt;Instead of &lt;/p&gt;

&lt;p&gt;new SemanticException(&quot;need to specify partition columns because the destination table is partitioned.&quot;);&lt;/p&gt;

&lt;p&gt;add a new ErrorMsg and use that.&lt;/p&gt;</comment>
                            <comment id="12718571" author="he yongqiang" created="Thu, 11 Jun 2009 17:54:31 +0000"  >&lt;p&gt;hive-527-2009-06-12.patch integrates Namit&apos;s suggestions. &lt;/p&gt;</comment>
                            <comment id="12729298" author="namit" created="Thu, 9 Jul 2009 15:35:13 +0000"  >&lt;p&gt;The changes looks good - I will commit it if the tests pass&lt;/p&gt;</comment>
                            <comment id="12729319" author="namit" created="Thu, 9 Jul 2009 16:45:44 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410368" name="hive-527-2009-06-11-2.patch" size="4314" author="he yongqiang" created="Thu, 11 Jun 2009 08:32:49 +0000"/>
                            <attachment id="12410419" name="hive-527-2009-06-12.patch" size="5052" author="he yongqiang" created="Thu, 11 Jun 2009 17:54:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Jun 2009 07:24:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0labb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122321</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-528] Map Join followup: split MapJoinObject into MapJoinObjectKey and MapJoinObjectValue</title>
                <link>https://issues.apache.org/jira/browse/HIVE-528</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;split MapJoinObject into MapJoinObjectKey and MapJoinObjectValue for code cleanup&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426883">HIVE-528</key>
            <summary>Map Join followup: split MapJoinObject into MapJoinObjectKey and MapJoinObjectValue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 05:21:13 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:46 +0000</updated>
                            <resolved>Sun, 7 Jun 2009 07:42:56 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12716778" author="zshao" created="Fri, 5 Jun 2009 22:33:07 +0000"  >&lt;p&gt;Nitpick:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+      MapJoinObjectCtx ctx = MapJoinOperator.getMapMetadata().get(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(metadataTag));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Use Integer.valueOf() instead since this is going to be called multiple times with the same integer number.&lt;/p&gt;


&lt;p&gt;Also just to make sure, MapJoinOperator is a singleton so that getMapMetadata() can be defined as a static function?&lt;br/&gt;
is it possible to have 2 MapJoinOperator in the same mapper? (let&apos;s assume their join keys are different so they cannot be merged)&lt;/p&gt;</comment>
                            <comment id="12716781" author="namit" created="Fri, 5 Jun 2009 22:55:02 +0000"  >&lt;p&gt;incorporated Zheng&apos;s comments.&lt;/p&gt;

&lt;p&gt;MapJoinOperator is a singleton - if the joins do not merge, there is a FileSink after the first MapJoin&lt;/p&gt;</comment>
                            <comment id="12716803" author="zshao" created="Sat, 6 Jun 2009 00:11:25 +0000"  >&lt;p&gt;+1. Will commit if the test passes.&lt;/p&gt;</comment>
                            <comment id="12716813" author="namit" created="Sat, 6 Jun 2009 01:18:13 +0000"  >&lt;p&gt;Talked offline with Zheng who told a minor performance problem. Fixed that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410030" name="hive.528.1.patch" size="30243" author="namit" created="Fri, 5 Jun 2009 22:23:58 +0000"/>
                            <attachment id="12410036" name="hive.528.2.patch" size="30259" author="namit" created="Fri, 5 Jun 2009 22:55:02 +0000"/>
                            <attachment id="12410047" name="hive.528.3.patch" size="30308" author="namit" created="Sat, 6 Jun 2009 01:18:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Jun 2009 22:33:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0labj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122322</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-528&quot; title=&quot;Map Join followup: split MapJoinObject into MapJoinObjectKey and MapJoinObjectValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-528&quot;&gt;&lt;strike&gt;HIVE-528&lt;/strike&gt;&lt;/a&gt;. Map Join followup: split MapJoinObject into MapJoinObjectKey and MapJoinObjectValue. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-529] Map Join followup: move process from CommonJoinOperator to JoinOperator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-529</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;move process from CommonJoinOperator to JoinOperator&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426884">HIVE-529</key>
            <summary>Map Join followup: move process from CommonJoinOperator to JoinOperator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 05:22:04 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:53 +0000</updated>
                            <resolved>Fri, 19 Jun 2009 00:43:18 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12721191" author="zshao" created="Thu, 18 Jun 2009 10:58:22 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-529&quot; title=&quot;Map Join followup: move process from CommonJoinOperator to JoinOperator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-529&quot;&gt;&lt;del&gt;HIVE-529&lt;/del&gt;&lt;/a&gt;.1.patch:&lt;br/&gt;
This patch moves the method, as well as cleans up a lot of code in MapJoinOperator that deals with SerDe and ObjectInspector.&lt;br/&gt;
Also fixed a bug in ObjectInspectorUtils.copyToStandardObjectInspector.&lt;br/&gt;
Testing now.&lt;/p&gt;</comment>
                            <comment id="12721199" author="zshao" created="Thu, 18 Jun 2009 11:17:40 +0000"  >&lt;p&gt;Test succeeded on my local machine.&lt;/p&gt;</comment>
                            <comment id="12721587" author="namit" created="Fri, 19 Jun 2009 00:42:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411066" name="HIVE-529.1.patch" size="37565" author="zshao" created="Thu, 18 Jun 2009 10:58:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Jun 2009 10:58:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73465</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0labr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122323</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-530] Map Join followup: optimize number of map-reduce jobs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-530</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Instead of creating a temporary destination after every mapJoin, avoid where-ever possible.&lt;br/&gt;
Also, replace the Select after MapJoin with a ForwardOperator&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426885">HIVE-530</key>
            <summary>Map Join followup: optimize number of map-reduce jobs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 05:23:56 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:52 +0000</updated>
                            <resolved>Mon, 29 Jun 2009 19:37:45 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12723912" author="namit" created="Thu, 25 Jun 2009 06:03:15 +0000"  >&lt;p&gt;As a first cut, the whole job should be made map-only single job if possible&lt;/p&gt;</comment>
                            <comment id="12724761" author="namit" created="Fri, 26 Jun 2009 23:24:35 +0000"  >&lt;p&gt;optimized the scenario when the mapjoin is not followed by a reducer&lt;/p&gt;</comment>
                            <comment id="12724768" author="namit" created="Sat, 27 Jun 2009 00:28:36 +0000"  >&lt;p&gt;Fixed  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-585&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-585&lt;/a&gt; also , sending a heartbeat perodically&lt;/p&gt;</comment>
                            <comment id="12725001" author="zshao" created="Sun, 28 Jun 2009 21:48:47 +0000"  >&lt;p&gt;There is a test failure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Running org.apache.hadoop.hive.ql.exec.TestOperators
    [junit] Testing Filter Operator
    [junit] java.lang.NullPointerException
    [junit]     at org.apache.hadoop.hive.conf.HiveConf.getIntVar(HiveConf.java:217)
    [junit]     at org.apache.hadoop.hive.ql.exec.FilterOperator.initializeOp(FilterOperator.java:58)
    [junit]     at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:264)
    [junit]     at org.apache.hadoop.hive.ql.exec.TestOperators.testBaseFilterOperator(TestOperators.java:92)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    [junit]     at java.lang.reflect.Method.invoke(Method.java:597)
    [junit]     at junit.framework.TestCase.runTest(TestCase.java:154)
    [junit]     at junit.framework.TestCase.runBare(TestCase.java:127)
    [junit]     at junit.framework.TestResult$1.protect(TestResult.java:106)
    [junit]     at junit.framework.TestResult.runProtected(TestResult.java:124)
    [junit]     at junit.framework.TestResult.run(TestResult.java:109)
    [junit]     at junit.framework.TestCase.run(TestCase.java:118)
    [junit]     at junit.framework.TestSuite.runTest(TestSuite.java:208)
    [junit]     at junit.framework.TestSuite.run(TestSuite.java:203)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)
    [junit] java.lang.RuntimeException: java.lang.NullPointerException
    [junit]     at org.apache.hadoop.hive.ql.exec.FilterOperator.initializeOp(FilterOperator.java:66)
    [junit]     at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:264)
    [junit]     at org.apache.hadoop.hive.ql.exec.TestOperators.testBaseFilterOperator(TestOperators.java:92)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    [junit]     at java.lang.reflect.Method.invoke(Method.java:597)
    [junit]     at junit.framework.TestCase.runTest(TestCase.java:154)
    [junit]     at junit.framework.TestCase.runBare(TestCase.java:127)
    [junit]     at junit.framework.TestResult$1.protect(TestResult.java:106)
    [junit]     at junit.framework.TestResult.runProtected(TestResult.java:124)
    [junit]     at junit.framework.TestResult.run(TestResult.java:109)
    [junit]     at junit.framework.TestCase.run(TestCase.java:118)
    [junit]     at junit.framework.TestSuite.runTest(TestSuite.java:208)
    [junit]     at junit.framework.TestSuite.run(TestSuite.java:203)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)
    [junit] Caused by: java.lang.NullPointerException
    [junit]     at org.apache.hadoop.hive.conf.HiveConf.getIntVar(HiveConf.java:217)
    [junit]     at org.apache.hadoop.hive.ql.exec.FilterOperator.initializeOp(FilterOperator.java:58)
    [junit]     ... 17 more
    [junit] Testing FileSink Operator
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12725143" author="he yongqiang" created="Mon, 29 Jun 2009 12:08:41 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12725148" author="he yongqiang" created="Mon, 29 Jun 2009 12:21:39 +0000"  >&lt;p&gt;This patch intends to avoid one unneeded job which serves as intermediate data store. am i right?&lt;br/&gt;
The failure Zheng commented is caused by passing null as conf in the failed testcase.&lt;/p&gt;</comment>
                            <comment id="12725259" author="namit" created="Mon, 29 Jun 2009 17:23:36 +0000"  >&lt;p&gt;Thats right - I have changed the test to pass a correct configuration, and will load the new patch soon&lt;/p&gt;</comment>
                            <comment id="12725315" author="namit" created="Mon, 29 Jun 2009 19:06:38 +0000"  >&lt;p&gt;fixed the test&lt;/p&gt;</comment>
                            <comment id="12725322" author="zshao" created="Mon, 29 Jun 2009 19:37:45 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411968" name="hive.530.1.patch" size="130262" author="namit" created="Fri, 26 Jun 2009 23:24:35 +0000"/>
                            <attachment id="12411970" name="hive.530.2.patch" size="131550" author="namit" created="Sat, 27 Jun 2009 00:27:47 +0000"/>
                            <attachment id="12411974" name="hive.530.3.patch" size="134853" author="namit" created="Sat, 27 Jun 2009 01:32:48 +0000"/>
                            <attachment id="12412098" name="hive.530.4.patch" size="135481" author="namit" created="Mon, 29 Jun 2009 19:06:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 Jun 2009 21:48:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0labz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-530&quot; title=&quot;Map Join followup: optimize number of map-reduce jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-530&quot;&gt;&lt;strike&gt;HIVE-530&lt;/strike&gt;&lt;/a&gt;. Map Join followup: optimize number of map-reduce jobs. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-531] Map Join followup: handling of null inputs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-531</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, we rely on denied partitions to get partition data. If a partitioned table does not have any partition, it will fail.&lt;br/&gt;
Therefore, get the partition metadata from the table object in that case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426886">HIVE-531</key>
            <summary>Map Join followup: handling of null inputs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 05:26:02 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:46 +0000</updated>
                            <resolved>Wed, 30 Dec 2009 22:22:26 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12795471" author="namit" created="Wed, 30 Dec 2009 22:22:13 +0000"  >&lt;p&gt;fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1000&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lac7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122325</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-532] predicate clause with limit should not be pushed down.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-532</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;in queries like below , &apos;v.c2 &amp;gt; 20&apos; shouldn&apos;t be pushed up.&lt;/p&gt;

&lt;p&gt;select * from (select * from t where t.c &amp;gt; 20 limit 20) v where v.c2 &amp;gt; 20&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12426954">HIVE-532</key>
            <summary>predicate clause with limit should not be pushed down.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 18:42:59 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:56 +0000</updated>
                            <resolved>Wed, 3 Jun 2009 05:11:42 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12715677" author="prasadc" created="Tue, 2 Jun 2009 20:52:28 +0000"  >&lt;p&gt;made limit operator similar to that of script operator. predicates are not pushed past beyond a limit or script operator.&lt;/p&gt;</comment>
                            <comment id="12715775" author="namit" created="Wed, 3 Jun 2009 01:08:15 +0000"  >&lt;p&gt;+1 looks good&lt;br/&gt;
will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12715803" author="namit" created="Wed, 3 Jun 2009 05:11:42 +0000"  >&lt;p&gt;Committed. Thanks Prasad.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12426321">HIVE-516</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12409691" name="hive-532.patch" size="2403" author="prasadc" created="Tue, 2 Jun 2009 20:52:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jun 2009 01:08:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lacn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-533] predicate clauses with rand() should not be pushed down</title>
                <link>https://issues.apache.org/jira/browse/HIVE-533</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;in the following query, all predicates except the rand() is pushed down where in rand() is applied after filter which should not be the case.&lt;/p&gt;

&lt;p&gt;select a.* from srcpart a where rand(1) &amp;lt; 0.1 and a.ds = &apos;2008-04-08&apos; and not(key &amp;gt; 50 or key &amp;lt; 10) and a.hr like &apos;%2&apos;;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426955">HIVE-533</key>
            <summary>predicate clauses with rand() should not be pushed down</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 18:45:41 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:15 +0000</updated>
                            <resolved>Thu, 4 Jun 2009 04:30:47 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12715694" author="athusoo" created="Tue, 2 Jun 2009 21:18:43 +0000"  >&lt;p&gt;Did we not already handle the case with the non deterministic function support that we had added to predicate pushdown?&lt;/p&gt;</comment>
                            <comment id="12715708" author="prasadc" created="Tue, 2 Jun 2009 21:49:36 +0000"  >&lt;p&gt;we didn&apos;t push rand() but we pushed all other predicates in the clause. so rand() is getting applied after rows are filtered. the current behavior seems to be rand() gets applied before rows are filtered. not sure if there is a ANSI semantics, but this fix keeps the current behavior of Hive even when PPD is applied.&lt;/p&gt;</comment>
                            <comment id="12716060" author="namit" created="Wed, 3 Jun 2009 20:52:56 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12716151" author="namit" created="Thu, 4 Jun 2009 04:30:47 +0000"  >&lt;p&gt;Committed. Thanks Prasad&lt;/p&gt;</comment>
                            <comment id="12729006" author="namit" created="Thu, 9 Jul 2009 02:12:48 +0000"  >&lt;p&gt;Can you add some constants ? like 1/2 for boolean false/true = may help in some debugging later on.&lt;/p&gt;

&lt;p&gt;Also, it might be useful to add a dump() method which takes the inputbytebuffer and dumps the structure ?&lt;br/&gt;
This can be done in a follow-up later also, may be useful for other serdes also.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12426321">HIVE-516</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12409708" name="hive-533.patch" size="10522" author="prasadc" created="Tue, 2 Jun 2009 22:08:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Jun 2009 21:18:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lacv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122328</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-534] cli adds a new line at the beginning of every query</title>
                <link>https://issues.apache.org/jira/browse/HIVE-534</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;this results in error messages always specify a line which is one more than the actual error.&lt;/p&gt;

&lt;p&gt;hive&amp;gt; select count* from abc; &lt;br/&gt;
FAILED: Parse Error: line 2:14 cannot recognize input &apos;from&apos; in expression specification&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12426959">HIVE-534</key>
            <summary>cli adds a new line at the beginning of every query</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2009 19:13:53 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:23 +0000</updated>
                            <resolved>Wed, 3 Jun 2009 20:24:03 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12715634" author="rsm" created="Tue, 2 Jun 2009 19:24:26 +0000"  >&lt;p&gt;there are no tests for cli&apos;s main. so, only made a trivial code change&lt;/p&gt;</comment>
                            <comment id="12715671" author="athusoo" created="Tue, 2 Jun 2009 20:39:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Looks fine to me.&lt;/p&gt;

&lt;p&gt;Will run tests and checkin once they pass.&lt;/p&gt;</comment>
                            <comment id="12716051" author="athusoo" created="Wed, 3 Jun 2009 20:24:03 +0000"  >&lt;p&gt;committed. Thanks Raghu!!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409684" name="hive-534.1.patch" size="835" author="rsm" created="Tue, 2 Jun 2009 19:24:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Jun 2009 20:39:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lad3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-535] Memory-efficient hash-based Aggregation</title>
                <link>https://issues.apache.org/jira/browse/HIVE-535</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently there are a lot of memory overhead in the hash-based aggregation in GroupByOperator.&lt;br/&gt;
The net result is that GroupByOperator won&apos;t be able to store many entries in its HashTable, and flushes frequently, and won&apos;t be able to achieve very good partial aggregation result.&lt;/p&gt;

&lt;p&gt;Here are some initial thoughts (some of them are from Joydeep long time ago):&lt;/p&gt;

&lt;p&gt;A1. Serialize the key of the HashTable. This will eliminate the 16-byte per-object overhead of Java in keys (depending on how many objects there are in the key, the saving can be substantial).&lt;br/&gt;
A2. Use more memory-efficient hash tables - java.util.HashMap has about 64 bytes of overhead per entry.&lt;br/&gt;
A3. Use primitive array to store aggregation results. Basically, the UDAF should manage the array of aggregation results, so UDAFCount should manage a long[], UDAFAvg should manage a double[] and a long[]. The external code should pass an index to iterate/merge/terminal an aggregation result. This will eliminate the 16-byte per-object overhead of Java.&lt;/p&gt;

&lt;p&gt;More ideas are welcome.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426964">HIVE-535</key>
            <summary>Memory-efficient hash-based Aggregation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                            <label>optimization</label>
                    </labels>
                <created>Tue, 2 Jun 2009 20:02:43 +0000</created>
                <updated>Tue, 5 Apr 2011 22:51:03 +0000</updated>
                                            <version>0.4.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="12715663" author="athusoo" created="Tue, 2 Jun 2009 20:28:01 +0000"  >&lt;p&gt;how does A3 help?&lt;/p&gt;</comment>
                            <comment id="12715727" author="zshao" created="Tue, 2 Jun 2009 22:33:58 +0000"  >&lt;p&gt;Some details about A3:&lt;br/&gt;
We use a special hashmap that the value part has to be a primitive int (4 bytes). We let he UDAFs manage the array of aggregation results, and store the index of the aggregation results in the hashTable.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT departmentid, count(1), sum(revenue)
FROM sales
GROUP BY departmentid;

  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; key_id = -1;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!hashmap.contains(departmentid)) {
    key_id = hashmap.size() + 1;
    hashmap.insert(departmentid, key_id);
    count_1.initAggregation(key_id);
    sum_revenue.initAggregation(key_id);
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    key_id = hashmap.get(departmentid);
  }
  count_1.iterate(key_id, 1);
  sum_revenue.iterate(key_id, revenue);

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12715737" author="jsensarma" created="Tue, 2 Jun 2009 22:51:10 +0000"  >&lt;p&gt;+1 on A3 (its become one of my interview questions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;).&lt;/p&gt;

&lt;p&gt;one of the issues with it that one would need to have rewritten version of HashMap that does not store a object reference in the value (but rather a primitive field directly). (current hashmap is from object to object). &lt;/p&gt;

&lt;p&gt;there is a tradeoff between memory usage and speed (since serialization will cost cpu) - might be worth going the serialized route only if cardinality is observed to be high enough.&lt;/p&gt;

&lt;p&gt;the other low hanging fruit is to not spill hash map contents randomly (that&apos;s probably a separate jira somewhere and somewhat unrelated).&lt;/p&gt;</comment>
                            <comment id="12836529" author="zshao" created="Mon, 22 Feb 2010 06:57:06 +0000"  >&lt;p&gt;Some external evaluations of memory-saving hashmaps:&lt;br/&gt;
&lt;a href=&quot;http://b010.blogspot.com/2009/05/speed-comparison-of-1-javas-built-in.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://b010.blogspot.com/2009/05/speed-comparison-of-1-javas-built-in.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12836832" author="nzhang" created="Mon, 22 Feb 2010 19:08:34 +0000"  >&lt;p&gt;Interesting indeed. I checked the license of these two open source projects and they both turn out to be LGPL. So we probably can only use them as references and implement our own Java/C++ version. &lt;/p&gt;</comment>
                            <comment id="12836840" author="jvs" created="Mon, 22 Feb 2010 19:20:30 +0000"  >&lt;p&gt;Apache wicket has one:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wicket.apache.org/docs/1.4/org/apache/wicket/util/collections/IntHashMap.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wicket.apache.org/docs/1.4/org/apache/wicket/util/collections/IntHashMap.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Maybe we can clone the code from there since it looks like efforts to put something similar in Apache Commons haven&apos;t gone anywhere so far.&lt;/p&gt;</comment>
                            <comment id="12836841" author="zshao" created="Mon, 22 Feb 2010 19:22:13 +0000"  >&lt;p&gt;Actually colt.* has a different license. I believe it is compatible with Apache but we should definitely get a lawyer before including it (if ever needed).&lt;/p&gt;

&lt;p&gt;Packages cern.colt* , cern.jet*, cern.clhep&lt;/p&gt;

&lt;p&gt;Copyright (c) 1999 CERN - European Organization for Nuclear Research.&lt;br/&gt;
Permission to use, copy, modify, distribute and sell this software and its documentation for any purpose is hereby granted without fee, provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in supporting documentation. CERN makes no representations about the suitability of this software for any purpose. It is provided &quot;as is&quot; without expressed or implied warranty.&lt;/p&gt;</comment>
                            <comment id="12838095" author="cwsteinbach" created="Wed, 24 Feb 2010 23:46:19 +0000"  >&lt;p&gt;The folks working on Mahout seem to think the CERN license is compatible with Apache. They have&lt;br/&gt;
already imported cern.colt*, cern.jet* and cern.clhep into their source tree. See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-222&quot; title=&quot;Colt collections work in progress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-222&quot;&gt;&lt;del&gt;MAHOUT-222&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Check out the update to their LICENSE.txt file: &lt;a href=&quot;http://svn.apache.org/repos/asf/lucene/mahout/trunk/LICENSE.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/lucene/mahout/trunk/LICENSE.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12881121" author="he yongqiang" created="Tue, 22 Jun 2010 07:54:07 +0000"  >&lt;p&gt;Has anyone tried google sparsehash &lt;a href=&quot;http://code.google.com/p/google-sparsehash/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/google-sparsehash/&lt;/a&gt; ? It&apos;s BSD license. But it seems it is in C, and no java version.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12441510">HIVE-949</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Jun 2009 20:28:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08nxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48475</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
