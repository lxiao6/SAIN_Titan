<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:18:08 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-5-4+AND+created+%3C%3D+2011-5-11+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="9" total="9"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2149] Provide a way to generate an SQL file with the Metastore schema</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2149</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Running generate-schema target in metastore dir results in&lt;br/&gt;
generate-schema:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/jpox/SchemaTool&lt;/p&gt;</description>
                <environment></environment>
        <key id="12506223">HIVE-2149</key>
            <summary>Provide a way to generate an SQL file with the Metastore schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 May 2011 21:07:19 +0000</created>
                <updated>Wed, 10 Sep 2014 16:06:16 +0000</updated>
                                                                            <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13028962" author="ashutoshc" created="Wed, 4 May 2011 21:08:58 +0000"  >&lt;p&gt;Looks like in jpox to datanucleus transition in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-445&quot; title=&quot;Upgrade JPOX to datanuclues plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-445&quot;&gt;&lt;del&gt;HIVE-445&lt;/del&gt;&lt;/a&gt; this target was left behind.&lt;/p&gt;</comment>
                            <comment id="14125328" author="lars_francke" created="Mon, 8 Sep 2014 09:08:17 +0000"  >&lt;p&gt;Invalid since the move to Maven&lt;/p&gt;</comment>
                            <comment id="14125676" author="ashutoshc" created="Mon, 8 Sep 2014 15:35:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lars_francke&quot; class=&quot;user-hover&quot; rel=&quot;lars_francke&quot;&gt;Lars Francke&lt;/a&gt; It will be good to have this functionality. Moving our build system has not provided this functionality nor made it obsolete. It will be good to have a maven target using which one can generate schema from jdo declaration. Shall we edit title of jira as &quot;Provide generate-schema target&quot; and reopen this?&lt;/p&gt;</comment>
                            <comment id="14126286" author="lars_francke" created="Mon, 8 Sep 2014 23:21:24 +0000"  >&lt;p&gt;Ah, maybe I have been too overeager. Do I understand this correctly that this goal would create the necessary schema (tables etc.) in an underlying database?&lt;/p&gt;

&lt;p&gt;I&apos;ve looked at the datanucleus Maven Plugin &lt;a href=&quot;http://www.datanucleus.org/products/datanucleus/jdo/schema.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.datanucleus.org/products/datanucleus/jdo/schema.html&lt;/a&gt;&lt;br/&gt;
That does have a schema-create goal which one can just run. The only problem I am facing there is that it expects the DB Driver on the classpath so we&apos;d need a profile for every DB....I think.&lt;/p&gt;

&lt;p&gt;I&apos;d be in favor of leaving this closed until someone needs it and is willing to work on it but I won&apos;t object if you want to open it again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14126301" author="ashutoshc" created="Mon, 8 Sep 2014 23:32:39 +0000"  >&lt;p&gt;No, it will not create schema, but will generate sql file which you can than run to create schema. But, second half of your point is still valid I believe because target requires jdbc connector jar on path. I think useful thing here is to atleast document steps (in addition to any changes required in pom files) on how to do this, if one desires. I myself would have used it if it existed to generate schema for a released version of hive. Anyhow, Invalid is not correct resolution, may be just leave it open?&lt;/p&gt;</comment>
                            <comment id="14126307" author="ashutoshc" created="Mon, 8 Sep 2014 23:36:12 +0000"  >&lt;p&gt;I am not suggesting to add db-specific profiles (although if some does that will be useful), but expose this target and than document steps to follow to make it work for one&apos;s desired db.&lt;/p&gt;</comment>
                            <comment id="14128448" author="lars_francke" created="Wed, 10 Sep 2014 13:11:57 +0000"  >&lt;p&gt;Okay, I&apos;ll reopen the issue but won&apos;t work on it.&lt;/p&gt;

&lt;p&gt;The problem is that the DataNucleus Maven Plugin requires a database connection even to create the Schema. That means we need to provide a profile or some other way to get a driver on the classpath.&lt;/p&gt;</comment>
                            <comment id="14128449" author="lars_francke" created="Wed, 10 Sep 2014 13:12:49 +0000"  >&lt;p&gt;Turns out I can&apos;t reopen issues....can you?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Sep 2014 09:08:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42251</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lin3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2150] Sampling fails after dynamic-partition insert into a bucketed s3n table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2150</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When using dynamic-partition insert and bucketing together on an s3n table, the insert does not create files for empty buckets. This will result in the following exception when running a sampling query that includes the empty buckets.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;FAILED: Hive Internal Error: java.lang.RuntimeException(Cannot get bucket path for bucket 1)
java.lang.RuntimeException: Cannot get bucket path for bucket 1
	at org.apache.hadoop.hive.ql.metadata.Partition.getBucketPath(Partition.java:367)
	at org.apache.hadoop.hive.ql.optimizer.SamplePruner.prune(SamplePruner.java:186)
	at org.apache.hadoop.hive.ql.optimizer.GenMapRedUtils.setTaskPlan(GenMapRedUtils.java:603)
	at org.apache.hadoop.hive.ql.optimizer.GenMapRedUtils.setTaskPlan(GenMapRedUtils.java:514)
	at org.apache.hadoop.hive.ql.optimizer.GenMRFileSink1.processFS(GenMRFileSink1.java:586)
	at org.apache.hadoop.hive.ql.optimizer.GenMRFileSink1.process(GenMRFileSink1.java:145)
	at org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:89)
	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.dispatch(DefaultGraphWalker.java:88)
	at org.apache.hadoop.hive.ql.parse.GenMapRedWalker.walk(GenMapRedWalker.java:55)
	at org.apache.hadoop.hive.ql.parse.GenMapRedWalker.walk(GenMapRedWalker.java:67)
	at org.apache.hadoop.hive.ql.parse.GenMapRedWalker.walk(GenMapRedWalker.java:67)
	at org.apache.hadoop.hive.ql.parse.GenMapRedWalker.walk(GenMapRedWalker.java:67)
	at org.apache.hadoop.hive.ql.parse.GenMapRedWalker.walk(GenMapRedWalker.java:67)
	at org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.startWalking(DefaultGraphWalker.java:102)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapRedTasks(SemanticAnalyzer.java:6336)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:6615)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:238)
	at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:332)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:686)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:149)
	at org.apache.hadoop.hive.cli.CliDriver.processLineInternal(CliDriver.java:228)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:209)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:355)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 1
	at org.apache.hadoop.hive.ql.metadata.Partition.getBucketPath(Partition.java:365)
	... 27 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is a repro case:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE tab
(x string)
PARTITIONED BY (p1 string, p2 string)
CLUSTERED BY (x) INTO 4 BUCKETS
LOCATION &apos;s3n://some/path&apos;;

SET hive.exec.dynamic.partition=true;
SET hive.enforce.bucketing=true;

INSERT OVERWRITE TABLE tab
PARTITION (p1=&apos;p&apos;, p2)
SELECT &apos;v1&apos;, &apos;v2&apos;
FROM dual;

SELECT *
FROM tab TABLESAMPLE (BUCKET 2 OUT OF 4);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12506237">HIVE-2150</key>
            <summary>Sampling fails after dynamic-partition insert into a bucketed s3n table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="vaggarw">Vaibhav Aggarwal</assignee>
                                    <reporter username="slider">Steven K. Wong</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2011 00:31:30 +0000</created>
                <updated>Fri, 1 Jul 2011 21:23:46 +0000</updated>
                                            <version>0.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42250</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0linb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2151] Too many open files in running negative cli tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2151</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12506358">HIVE-2151</key>
            <summary>Too many open files in running negative cli tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 May 2011 01:57:55 +0000</created>
                <updated>Fri, 16 Dec 2011 23:55:37 +0000</updated>
                            <resolved>Tue, 10 May 2011 14:31:27 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>CLI</component>
                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13029696" author="ashutoshc" created="Fri, 6 May 2011 02:07:25 +0000"  >&lt;p&gt;I have hit this issue too.&lt;/p&gt;</comment>
                            <comment id="13029813" author="jiraposter@reviews.apache.org" created="Fri, 6 May 2011 07:50:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/696/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/696/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Too many open files in running negative cli tests&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2151&quot; title=&quot;Too many open files in running negative cli tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2151&quot;&gt;&lt;del&gt;HIVE-2151&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2151&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java 1100117 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/696/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/696/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Yongqiang&lt;/p&gt;
</comment>
                            <comment id="13030069" author="nzhang" created="Fri, 6 May 2011 18:17:46 +0000"  >&lt;p&gt;We did an offline review and found a better fix. Yongqiang will upload a new patch soon. &lt;/p&gt;</comment>
                            <comment id="13030098" author="jiraposter@reviews.apache.org" created="Fri, 6 May 2011 19:18:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/696/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/696/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-06 19:17:48.260294)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;new diff&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Too many open files in running negative cli tests&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2151&quot; title=&quot;Too many open files in running negative cli tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2151&quot;&gt;&lt;del&gt;HIVE-2151&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2151&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java 1100117 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/696/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/696/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Yongqiang&lt;/p&gt;
</comment>
                            <comment id="13030364" author="nzhang" created="Sat, 7 May 2011 15:32:26 +0000"  >&lt;p&gt;Can you update the review board with the latest patch? It&apos;s much easier to add comments.&lt;/p&gt;

&lt;p&gt;In ZooKeeperHiveLockManager.close(), I&apos;m not sure if the change is desired. According to the comment, it simply close the client to release transient locks. The later removeAllRedundantNodes() call may be needed after the client close to clean up further. So changing the order may results in undesired behavior. Namit, can you comment on this?&lt;/p&gt;

&lt;p&gt;Driver.java:148, add comments wht ctx needs to set HiveLockManager. &lt;/p&gt;</comment>
                            <comment id="13030384" author="he yongqiang" created="Sat, 7 May 2011 18:21:40 +0000"  >&lt;p&gt;removeAllRedundantNodes() leaks a zookeeper connection. it should be put before closing zookeeper instance because it is still using the zookeeper instance.&lt;/p&gt;</comment>
                            <comment id="13030819" author="jiraposter@reviews.apache.org" created="Mon, 9 May 2011 17:15:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/696/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/696/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-09 17:15:15.221624)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;reverted the change in ZooKeeperHiveLockManager&apos;s close, but put a zookeeper close in removeReduantNodes&lt;br/&gt;
added more comments in Driver.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Too many open files in running negative cli tests&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2151&quot; title=&quot;Too many open files in running negative cli tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2151&quot;&gt;&lt;del&gt;HIVE-2151&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2151&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java 1101116 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/lockmgr/zookeeper/ZooKeeperHiveLockManager.java 1101116 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/696/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/696/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Yongqiang&lt;/p&gt;
</comment>
                            <comment id="13030820" author="he yongqiang" created="Mon, 9 May 2011 17:15:49 +0000"  >&lt;p&gt;Talked with namit offline, this new patch reverted the change in ZooKeeperHiveLockManager&apos;s close, but put a zookeeper close in removeReduantNodes.&lt;br/&gt;
Also added more comments in Driver to address Ning&apos;s last comments.&lt;/p&gt;</comment>
                            <comment id="13030877" author="nzhang" created="Mon, 9 May 2011 20:01:44 +0000"  >&lt;p&gt;+1. Will commit if tests pass&lt;/p&gt;</comment>
                            <comment id="13030962" author="nzhang" created="Mon, 9 May 2011 23:56:49 +0000"  >&lt;p&gt;Yongqiang, the TestClilDriver failed (index_auto.q, etc.). It seems the change is conflict with the recent bitmap index changes. Can you take a look? &lt;/p&gt;</comment>
                            <comment id="13030988" author="he yongqiang" created="Tue, 10 May 2011 02:14:15 +0000"  >&lt;p&gt;Ning, it seems the index_auto.q still fail without this patch. Can you verify?&lt;/p&gt;</comment>
                            <comment id="13030992" author="jvs" created="Tue, 10 May 2011 02:45:39 +0000"  >&lt;p&gt;It has been passing fine in Jenkins:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/717/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/717/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13030997" author="he yongqiang" created="Tue, 10 May 2011 03:35:08 +0000"  >&lt;p&gt;i got a failure on a clean check out when running index_auto.q. But when i run again, the error is not there. And also after apply the patch, there is also no error. &lt;/p&gt;

&lt;p&gt;Ning, can you do a &apos;ant clean run&apos;?&lt;/p&gt;</comment>
                            <comment id="13031004" author="nzhang" created="Tue, 10 May 2011 04:21:00 +0000"  >&lt;p&gt;OK. I got why it failed. index_auto.q build index to /tmp/index_where. I had run the test before under root, which makes the owner of /tmp/index_where root. Running the same test using my own user will fail because of write permission. &lt;/p&gt;

&lt;p&gt;Going forward I think we should change all index building tests to make results under trunk/build/ rather than /tmp, so that ant clean will clean all side effects.&lt;/p&gt;</comment>
                            <comment id="13031008" author="he yongqiang" created="Tue, 10 May 2011 04:30:36 +0000"  >&lt;p&gt;Good catch, Ning! At least we should make sure the /tmp/xxx dir got removed at the end of the testcase, if making it use build/tmp/ is not easy to do. &lt;/p&gt;</comment>
                            <comment id="13031017" author="nzhang" created="Tue, 10 May 2011 05:01:02 +0000"  >&lt;p&gt;Yongqiang, you can reference the build directory using &apos;${system:build.dir.hive}&apos;, which is defined in build-common.xml. Can you open a JIRA and fix all such index tests? &lt;/p&gt;</comment>
                            <comment id="13031205" author="nzhang" created="Tue, 10 May 2011 14:31:27 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang!&lt;/p&gt;</comment>
                            <comment id="13032616" author="hudson" created="Thu, 12 May 2011 19:40:22 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.20 #726 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/726/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12478385" name="HIVE-2151.1.patch" size="1352" author="he yongqiang" created="Fri, 6 May 2011 07:48:43 +0000"/>
                            <attachment id="12478461" name="HIVE-2151.2.patch" size="1262" author="he yongqiang" created="Fri, 6 May 2011 19:16:21 +0000"/>
                            <attachment id="12478472" name="HIVE-2151.3.patch" size="3891" author="he yongqiang" created="Fri, 6 May 2011 21:29:12 +0000"/>
                            <attachment id="12478621" name="HIVE-2151.4.patch" size="4384" author="he yongqiang" created="Mon, 9 May 2011 17:13:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 May 2011 02:07:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0linj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2152] Hive throws an NPE if hive-default.xml.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2152</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If you don&apos;t have hive-default.xml in your classpath, you get the following error when you try to show tables in the the hive shell:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; show tables; &lt;br/&gt;
FAILED: Error in metadata: java.lang.NullPointerException &lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;

&lt;p&gt;It would be a lot more useful to print message indicating that hive-default.xml. This problem will become mute if &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1530&quot; title=&quot;Include hive-default.xml and hive-log4j.properties in hive-common JAR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1530&quot;&gt;&lt;del&gt;HIVE-1530&lt;/del&gt;&lt;/a&gt; gets accepted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12506647">HIVE-2152</key>
            <summary>Hive throws an NPE if hive-default.xml.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fwiffo">Joey Echeverria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 May 2011 18:41:44 +0000</created>
                <updated>Wed, 27 Feb 2013 08:18:36 +0000</updated>
                            <resolved>Wed, 27 Feb 2013 08:18:36 +0000</resolved>
                                    <version>0.7.0</version>
                                                    <component>Diagnosability</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13030853" author="fwiffo" created="Mon, 9 May 2011 18:47:20 +0000"  >&lt;p&gt;Also, the log file isn&apos;t much better. You&apos;ll see exceptions that look like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2011-04-25 14:23:12,384 ERROR exec.DDLTask (SessionState.java:printError(343)) - FAILED: Error in metadata: java.lang.NullPointerException
org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.NullPointerException
	at org.apache.hadoop.hive.ql.metadata.Hive.getDatabase(Hive.java:1028)
	at org.apache.hadoop.hive.ql.metadata.Hive.databaseExists(Hive.java:1013)
	at org.apache.hadoop.hive.ql.exec.DDLTask.showTables(DDLTask.java:1691)
	at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:289)
	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:130)
	at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)
	at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1063)
	at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:900)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:748)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:164)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:241)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:456)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:186)
Caused by: java.lang.NullPointerException
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:247)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getClass(HiveMetaStore.java:472)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:354)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.executeWithRetry(HiveMetaStore.java:306)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:451)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:232)
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.&amp;lt;init&amp;gt;(HiveMetaStore.java:197)
	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.&amp;lt;init&amp;gt;(HiveMetaStoreClient.java:108)
	at org.apache.hadoop.hive.ql.metadata.Hive.createMetaStoreClient(Hive.java:1855)
	at org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:1865)
	at org.apache.hadoop.hive.ql.metadata.Hive.getDatabase(Hive.java:1024)
	... 16 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13034273" author="fwiffo" created="Mon, 16 May 2011 20:14:40 +0000"  >&lt;p&gt;This issue goes away if &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1530&quot; title=&quot;Include hive-default.xml and hive-log4j.properties in hive-common JAR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1530&quot;&gt;&lt;del&gt;HIVE-1530&lt;/del&gt;&lt;/a&gt; is accepted.&lt;/p&gt;</comment>
                            <comment id="13588114" author="navis" created="Wed, 27 Feb 2013 08:18:36 +0000"  >&lt;p&gt;Confirmed fixed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12471357">HIVE-1530</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Feb 2013 08:18:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42249</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0linr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2153] Stats JDBC LIKE queries should escape &apos;_&apos; and &apos;%&apos;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2153</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;DELETE /* Hive stats aggregation: org.apache.hadoop.hive.ql.stats.jdbc.JDBCStatsAggregator */ FROM PARTITION_STAT_TBL WHERE ID LIKE &apos;hdfs://dfsnode:9000/tmp/hive-root/hive_2011-05-09_04-30-28_586_4184342157898880918/-ext-10000/ds=2011-05-08/table_name=dim_page_to_user_suggest_assoc/%&apos;&lt;/p&gt;

&lt;p&gt;It is a prefix query but the &apos;_&apos; in the ID column should be escaped. The same applies to &apos;%&apos; if they appear in ID. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12506654">HIVE-2153</key>
            <summary>Stats JDBC LIKE queries should escape &apos;_&apos; and &apos;%&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 May 2011 20:23:51 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:07 +0000</updated>
                            <resolved>Tue, 10 May 2011 06:54:19 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13030942" author="nzhang" created="Mon, 9 May 2011 23:07:02 +0000"  >&lt;p&gt;review board &lt;a href=&quot;https://reviews.apache.org/r/702/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/702/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13030943" author="jiraposter@reviews.apache.org" created="Mon, 9 May 2011 23:07:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/702/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/702/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Escape &apos;_&apos; and &apos;%&apos; in the LIKE operands. &lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2153&quot; title=&quot;Stats JDBC LIKE queries should escape &amp;#39;_&amp;#39; and &amp;#39;%&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2153&quot;&gt;&lt;del&gt;HIVE-2153&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2153&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2153&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java 1101220 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java 1101220 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/702/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/702/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;passed the stats test suite, also tested it manually on mysql in addition to derby. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ning&lt;/p&gt;
</comment>
                            <comment id="13030948" author="nzhang" created="Mon, 9 May 2011 23:23:15 +0000"  >&lt;p&gt;escape the escaping char itself. &lt;/p&gt;</comment>
                            <comment id="13030954" author="jiraposter@reviews.apache.org" created="Mon, 9 May 2011 23:27:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/702/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/702/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-09 23:25:51.497027)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Escape &apos;_&apos; and &apos;%&apos; in the LIKE operands. &lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2153&quot; title=&quot;Stats JDBC LIKE queries should escape &amp;#39;_&amp;#39; and &amp;#39;%&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2153&quot;&gt;&lt;del&gt;HIVE-2153&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2153&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2153&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java 1101220 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java 1101220 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/702/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/702/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;passed the stats test suite, also tested it manually on mysql in addition to derby. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ning&lt;/p&gt;
</comment>
                            <comment id="13030981" author="pauly" created="Tue, 10 May 2011 01:26:24 +0000"  >&lt;p&gt;+1 Will test and commit&lt;/p&gt;</comment>
                            <comment id="13031058" author="pauly" created="Tue, 10 May 2011 06:54:19 +0000"  >&lt;p&gt;Committed. Thanks Ning!&lt;/p&gt;</comment>
                            <comment id="13032617" author="hudson" created="Thu, 12 May 2011 19:40:22 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.20 #726 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/726/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12478650" name="HIVE-2153.2.patch" size="3996" author="nzhang" created="Mon, 9 May 2011 23:23:15 +0000"/>
                            <attachment id="12478645" name="HIVE-2153.patch" size="4113" author="nzhang" created="Mon, 9 May 2011 23:00:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 May 2011 23:07:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72548</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0linz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2154] add exception handling to hive&apos;s record reader </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2154</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12506661">HIVE-2154</key>
            <summary>add exception handling to hive&apos;s record reader </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 May 2011 22:47:39 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:23 +0000</updated>
                            <resolved>Thu, 2 Jun 2011 07:52:52 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13041797" author="nzhang" created="Tue, 31 May 2011 20:09:00 +0000"  >&lt;p&gt;Yongqiang, can you post it to review board? It&apos;s much easier that way. &lt;/p&gt;</comment>
                            <comment id="13041804" author="he yongqiang" created="Tue, 31 May 2011 20:31:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/812/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13041806" author="jiraposter@reviews.apache.org" created="Tue, 31 May 2011 20:31:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/812/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-31 20:31:23.581581)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;add exception handling to hive&apos;s record reader&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;add exception handling to hive&apos;s record reader&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; title=&quot;add exception handling to hive&amp;#39;s record reader &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2154&quot;&gt;&lt;del&gt;HIVE-2154&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2154&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/conf/hive-default.xml 1127229 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java 1101261 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1101261 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1101261 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/SymlinkTextInputFormat.java 1101261 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java 1101261 &lt;br/&gt;
  trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1101261 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1101261 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandler.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionNextHandleResult.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/812/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Yongqiang&lt;/p&gt;
</comment>
                            <comment id="13041835" author="jiraposter@reviews.apache.org" created="Tue, 31 May 2011 21:17:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/812/#review740&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#review740&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/conf/hive-default.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1493&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1493&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    comment should be more specific: class names of the exception handlers. &lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1494&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1494&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    rename the variable to indicate it is a chain rather than just 1 handler.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1497&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1497&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    this function throws IOException but the original code throws RuntimeException. Should check if this is OK.&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1496&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1496&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    same as below&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1495&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1495&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    check if the function return false and throw exception&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1498&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1498&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    indentation&lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1499&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1499&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    comment on what the innerReader is when there is an exception in the first call of getRecordReader(). &lt;/p&gt;



&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1500&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1500&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    also need to throw exception when all handlers return false. Should try to refactor the code&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-05-31 20:31:23, Yongqiang He wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/812/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-31 20:31:23)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;add exception handling to hive&apos;s record reader&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; title=&quot;add exception handling to hive&amp;#39;s record reader &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2154&quot;&gt;&lt;del&gt;HIVE-2154&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2154&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1127229 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java 1101261 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1101261 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1101261 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/SymlinkTextInputFormat.java 1101261 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java 1101261 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1101261 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1101261 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandler.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionNextHandleResult.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/812/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Yongqiang&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13041917" author="jiraposter@reviews.apache.org" created="Wed, 1 Jun 2011 00:39:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/812/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-06-01 00:38:42.863958)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;address Ning&apos;s comments to move some code to hadoopshims&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;add exception handling to hive&apos;s record reader&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; title=&quot;add exception handling to hive&amp;#39;s record reader &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2154&quot;&gt;&lt;del&gt;HIVE-2154&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2154&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/conf/hive-default.xml 1129953 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java 1129953 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1129953 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1129953 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/SymlinkTextInputFormat.java 1129953 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java 1129953 &lt;br/&gt;
  trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1129953 &lt;br/&gt;
  trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1129953 &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandler.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerUtil.java PRE-CREATION &lt;br/&gt;
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionNextHandleResult.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/812/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Yongqiang&lt;/p&gt;
</comment>
                            <comment id="13042007" author="jiraposter@reviews.apache.org" created="Wed, 1 Jun 2011 06:49:48 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/812/#review741&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#review741&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1516&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1516&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This function is not intuitive. Maybe you need more comments about the why it is designed this way. &lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerUtil.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1514&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1514&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Do you need to throw exception when all handler return false?&lt;/p&gt;



&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerUtil.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/#comment1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#comment1515&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    same as above&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-06-01 00:38:42, Yongqiang He wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/812/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-01 00:38:42)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;add exception handling to hive&apos;s record reader&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; title=&quot;add exception handling to hive&amp;#39;s record reader &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2154&quot;&gt;&lt;del&gt;HIVE-2154&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2154&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/SymlinkTextInputFormat.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandler.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerUtil.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionNextHandleResult.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/812/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Yongqiang&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13042031" author="jiraposter@reviews.apache.org" created="Wed, 1 Jun 2011 07:51:47 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-06-01 06:48:14, Ning Zhang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerUtil.java, line 57&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/812/diff/2/?file=20084#file20084line57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/diff/2/?file=20084#file20084line57&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Do you need to throw exception when all handler return false?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ioExpectionHandlerChain will throw exception if all handler returns false.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Yongqiang&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/812/#review741&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/#review741&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-06-01 00:38:42, Yongqiang He wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/812/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-06-01 00:38:42)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;add exception handling to hive&apos;s record reader&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; title=&quot;add exception handling to hive&amp;#39;s record reader &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2154&quot;&gt;&lt;del&gt;HIVE-2154&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2154&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/conf/hive-default.xml 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/SymlinkTextInputFormat.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1129953 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandler.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerUtil.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionNextHandleResult.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/812/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/812/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Yongqiang&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13042602" author="nzhang" created="Thu, 2 Jun 2011 04:38:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13042639" author="nzhang" created="Thu, 2 Jun 2011 07:52:52 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang!&lt;/p&gt;</comment>
                            <comment id="13042717" author="hudson" created="Thu, 2 Jun 2011 11:48:52 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #756 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Hive-trunk-h0.21/756/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Hive-trunk-h0.21/756/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2154&quot; title=&quot;add exception handling to hive&amp;#39;s record reader &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2154&quot;&gt;&lt;del&gt;HIVE-2154&lt;/del&gt;&lt;/a&gt;. add exception handling to hive&apos;s record reader (Yongqiang He via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1130427&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1130427&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionNextHandleResult.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/SymlinkTextInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerUtil.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/BucketizedHiveRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/io&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12480981" name="HIVE-2154.1.patch" size="24470" author="he yongqiang" created="Tue, 31 May 2011 19:00:08 +0000"/>
                            <attachment id="12481020" name="HIVE-2154.2.patch" size="25165" author="he yongqiang" created="Wed, 1 Jun 2011 00:37:38 +0000"/>
                            <attachment id="12481146" name="HIVE-2154.3.patch" size="25612" author="he yongqiang" created="Wed, 1 Jun 2011 21:07:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 May 2011 20:09:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72266</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lio7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2155] Improve error messages emitted during semantic analysis</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2155</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Follow-up to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1731&quot; title=&quot;Improve miscellaneous error messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1731&quot;&gt;&lt;del&gt;HIVE-1731&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
A number of issues raised in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1731&quot; title=&quot;Improve miscellaneous error messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1731&quot;&gt;&lt;del&gt;HIVE-1731&lt;/del&gt;&lt;/a&gt; were caused by SemanticAnalyzer not reporting errors correctly.&lt;br/&gt;
Specifically, the following issues need to be addressed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Line numbers are not always provided and sometimes emitted as (0:-1), which is useless&lt;/li&gt;
	&lt;li&gt;Insufficient or unclear context strings are provided&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Specific issues described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1731&quot; title=&quot;Improve miscellaneous error messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1731&quot;&gt;&lt;del&gt;HIVE-1731&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
FAILED: Error in semantic analysis: Schema of both sides of union should match: destinationid:_col1 _col2&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;No line/col numbers, context strings provide internal aliases instead of actual column names&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;FAILED: Error in semantic analysis: line 0:-1 Both Left and Right Aliases Encountered in Join time&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Incorrect line/col number info, no context strings to describe the aliases encountered&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;FAILED: Error in semantic analysis: AS clause has an invalid number of aliases&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;No line/col numbers, not context string to show the aliases encountered&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;FAILED: Error in semantic analysis: line 1:94 Expression Not In Group By Key a&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;testcase: SELECT a.id, VAR(a.cnt) FROM mytable a&lt;/li&gt;
	&lt;li&gt;Context string is unhelpful, needs to provide the actual expression, not just the table reference&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12506664">HIVE-2155</key>
            <summary>Improve error messages emitted during semantic analysis</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="salbiz">Syed S. Albiz</assignee>
                                    <reporter username="salbiz">Syed S. Albiz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 May 2011 23:49:59 +0000</created>
                <updated>Wed, 6 Feb 2013 09:23:50 +0000</updated>
                            <resolved>Tue, 17 May 2011 01:29:55 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13031984" author="salbiz" created="Wed, 11 May 2011 19:29:52 +0000"  >&lt;p&gt;This patch (review board still not accepting new registrations) attaches line/column number to the vast majority of SemanticExceptions thrown. In addition, the context strings for the error messages relating to UNION ALLs and GROUP BY keys have been changed to provide more meaningful context&lt;/p&gt;</comment>
                            <comment id="13032169" author="jiraposter@reviews.apache.org" created="Wed, 11 May 2011 23:19:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/731/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Attaches line/column number to the vast majority of SemanticExceptions thrown. In addition, the context strings for the error messages relating to UNION ALLs and GROUP BY keys have been changed to provide more meaningful context.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; title=&quot;Improve error messages emitted during semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2155&quot;&gt;&lt;del&gt;HIVE-2155&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2155&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java 2fe37b6 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 4ddf5b9 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java bca37fd &lt;br/&gt;
  ql/src/test/queries/clientnegative/union3.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/analyze_view.q.out ef76106 &lt;br/&gt;
  ql/src/test/results/clientnegative/clusterbydistributeby.q.out 4c1ebfb &lt;br/&gt;
  ql/src/test/results/clientnegative/clusterbysortby.q.out f76d4a7 &lt;br/&gt;
  ql/src/test/results/clientnegative/clustern3.q.out da71016 &lt;br/&gt;
  ql/src/test/results/clientnegative/clustern4.q.out 1519e48 &lt;br/&gt;
  ql/src/test/results/clientnegative/create_view_failure3.q.out 70e365a &lt;br/&gt;
  ql/src/test/results/clientnegative/ddltime.q.out 11d00c3 &lt;br/&gt;
  ql/src/test/results/clientnegative/drop_partition_failure.q.out 1a0ac10 &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part2.q.out cc0cd3c &lt;br/&gt;
  ql/src/test/results/clientnegative/fileformat_void_input.q.out 5a7a05a &lt;br/&gt;
  ql/src/test/results/clientnegative/groupby_key.q.out c6218a4 &lt;br/&gt;
  ql/src/test/results/clientnegative/input1.q.out 73f1657 &lt;br/&gt;
  ql/src/test/results/clientnegative/input2.q.out 0c460a6 &lt;br/&gt;
  ql/src/test/results/clientnegative/invalidate_view1.q.out 9f61228 &lt;br/&gt;
  ql/src/test/results/clientnegative/joinneg.q.out d85d508 &lt;br/&gt;
  ql/src/test/results/clientnegative/line_terminator.q.out b672bd8 &lt;br/&gt;
  ql/src/test/results/clientnegative/load_wrong_noof_part.q.out 4d8c8d8 &lt;br/&gt;
  ql/src/test/results/clientnegative/nopart_insert.q.out 42bca76 &lt;br/&gt;
  ql/src/test/results/clientnegative/notable_alias3.q.out d48d5e1 &lt;br/&gt;
  ql/src/test/results/clientnegative/orderbysortby.q.out 73b83a4 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_1.q.out 7547858 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_2.q.out f570010 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_groupby.q.out 8497718 &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin1.q.out 739931f &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin2.q.out 2b418de &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin3.q.out a803b50 &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin4.q.out 86a834b &lt;br/&gt;
  ql/src/test/results/clientnegative/split_sample_out_of_range.q.out 0761955 &lt;br/&gt;
  ql/src/test/results/clientnegative/split_sample_wrong_format.q.out 19b1417 &lt;br/&gt;
  ql/src/test/results/clientnegative/strict_orderby.q.out 2d3ba6b &lt;br/&gt;
  ql/src/test/results/clientnegative/subq_insert.q.out 8c3ce79 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_array_contains_wrong1.q.out d6b98b4 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_array_contains_wrong2.q.out 7b8dca6 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong.q.out 75b9638 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong2.q.out 126fa4e &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong3.q.out fd62771 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_coalesce.q.out a5279f5 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_elt_wrong_args_len.q.out 22a085a &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_elt_wrong_type.q.out fc83f23 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_field_wrong_args_len.q.out 3bf97d9 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_field_wrong_type.q.out 2a2e944 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_if_not_bool.q.out a3c8902 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_if_wrong_args_len.q.out 89b23c8 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_in.q.out 50a6b98 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_instr_wrong_args_len.q.out 7f66db7 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_instr_wrong_type.q.out 89d8542 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_locate_wrong_args_len.q.out 46613e8 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_locate_wrong_type.q.out 42cc4b6 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_size_wrong_args_len.q.out b05731e &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_size_wrong_type.q.out 0c91c8f &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong.q.out bec3725 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong2.q.out 5b06467 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong3.q.out 6974dd7 &lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_not_supported1.q.out cc5f23b &lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_not_supported2.q.out c8987ea &lt;br/&gt;
  ql/src/test/results/clientnegative/union.q.out 333230d &lt;br/&gt;
  ql/src/test/results/clientnegative/union2.q.out 1e6c782 &lt;br/&gt;
  ql/src/test/results/clientnegative/union3.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/compiler/errors/ambiguous_table_col.q.out 1641ead &lt;br/&gt;
  ql/src/test/results/compiler/errors/duplicate_alias.q.out 1429744 &lt;br/&gt;
  ql/src/test/results/compiler/errors/insert_wrong_number_columns.q.out 7efe359 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_dot.q.out e63be5f &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_function_param2.q.out f1f41a1 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_index.q.out 77dc0c0 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_list_index.q.out 3714b68 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_list_index2.q.out c64b248 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_map_index.q.out e241bc6 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_map_index2.q.out 1c8d660 &lt;br/&gt;
  ql/src/test/results/compiler/errors/nonkey_groupby.q.out 21a9f46 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column1.q.out 4d89065 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column2.q.out 43f31db &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column3.q.out d8ee8d0 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column4.q.out 24d8c87 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column5.q.out d15e993 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column6.q.out aac42d1 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function1.q.out 5180f38 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function2.q.out dcb97bc &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function3.q.out dcb97bc &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function4.q.out 5180f38 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_table1.q.out ff92e4e &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_table2.q.out 54185e4 &lt;br/&gt;
  ql/src/test/results/compiler/errors/wrong_distinct1.q.out 74bc6e6 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/731/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Regenerated testcase expected output for TestNegativeCliDriver/TestParseNegative/TestNegativeContribCliDriver&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13032191" author="salbiz" created="Thu, 12 May 2011 00:04:01 +0000"  >&lt;p&gt;Removed some trailing whitespace&lt;/p&gt;</comment>
                            <comment id="13032262" author="jvs" created="Thu, 12 May 2011 05:51:41 +0000"  >&lt;p&gt;One comment:  Hive currently has this strange convention where it appends a context token onto an error message, without always explaining how it relates to the error.  For example, &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;In strict mode, if ORDER BY is specified, LIMIT must also be specified &apos;key&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here the &apos;key&apos; on the end is really confusing.  It should be something like&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;In strict mode, if ORDER BY is specified, LIMIT must also be specified; error encountered near token &apos;key&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This patch increases the number of places where we do this, so I think we need to improve the existing convention as part of it.  I&apos;m not sure if the suggestion above is generic enough.&lt;/p&gt;</comment>
                            <comment id="13032753" author="jiraposter@reviews.apache.org" created="Thu, 12 May 2011 23:44:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/731/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-12 23:44:48.689718)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated based on John&apos;s comments in the JIRA, instead of changing the overall structure, I decided to move the logic to print that context token into the new generateErrorMessage, which prevents breaking existing error messages which rely on that behavior.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Attaches line/column number to the vast majority of SemanticExceptions thrown. In addition, the context strings for the error messages relating to UNION ALLs and GROUP BY keys have been changed to provide more meaningful context.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; title=&quot;Improve error messages emitted during semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2155&quot;&gt;&lt;del&gt;HIVE-2155&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2155&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java 2fe37b6 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 4ddf5b9 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java bca37fd &lt;br/&gt;
  ql/src/test/queries/clientnegative/union3.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/analyze_view.q.out ef76106 &lt;br/&gt;
  ql/src/test/results/clientnegative/clusterbydistributeby.q.out 4c1ebfb &lt;br/&gt;
  ql/src/test/results/clientnegative/clusterbysortby.q.out f76d4a7 &lt;br/&gt;
  ql/src/test/results/clientnegative/clustern3.q.out da71016 &lt;br/&gt;
  ql/src/test/results/clientnegative/clustern4.q.out 1519e48 &lt;br/&gt;
  ql/src/test/results/clientnegative/create_view_failure3.q.out 70e365a &lt;br/&gt;
  ql/src/test/results/clientnegative/ddltime.q.out 11d00c3 &lt;br/&gt;
  ql/src/test/results/clientnegative/drop_partition_failure.q.out 1a0ac10 &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part2.q.out cc0cd3c &lt;br/&gt;
  ql/src/test/results/clientnegative/fileformat_void_input.q.out 5a7a05a &lt;br/&gt;
  ql/src/test/results/clientnegative/groupby_key.q.out c6218a4 &lt;br/&gt;
  ql/src/test/results/clientnegative/input1.q.out 73f1657 &lt;br/&gt;
  ql/src/test/results/clientnegative/input2.q.out 0c460a6 &lt;br/&gt;
  ql/src/test/results/clientnegative/invalidate_view1.q.out 9f61228 &lt;br/&gt;
  ql/src/test/results/clientnegative/joinneg.q.out d85d508 &lt;br/&gt;
  ql/src/test/results/clientnegative/line_terminator.q.out b672bd8 &lt;br/&gt;
  ql/src/test/results/clientnegative/load_wrong_noof_part.q.out 4d8c8d8 &lt;br/&gt;
  ql/src/test/results/clientnegative/nopart_insert.q.out 42bca76 &lt;br/&gt;
  ql/src/test/results/clientnegative/notable_alias3.q.out d48d5e1 &lt;br/&gt;
  ql/src/test/results/clientnegative/orderbysortby.q.out 73b83a4 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_1.q.out 7547858 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_2.q.out f570010 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_groupby.q.out 8497718 &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin1.q.out 739931f &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin2.q.out 2b418de &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin3.q.out a803b50 &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin4.q.out 86a834b &lt;br/&gt;
  ql/src/test/results/clientnegative/split_sample_out_of_range.q.out 0761955 &lt;br/&gt;
  ql/src/test/results/clientnegative/split_sample_wrong_format.q.out 19b1417 &lt;br/&gt;
  ql/src/test/results/clientnegative/strict_orderby.q.out 2d3ba6b &lt;br/&gt;
  ql/src/test/results/clientnegative/subq_insert.q.out 8c3ce79 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_array_contains_wrong1.q.out d6b98b4 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_array_contains_wrong2.q.out 7b8dca6 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong.q.out 75b9638 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong2.q.out 126fa4e &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong3.q.out fd62771 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_coalesce.q.out a5279f5 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_elt_wrong_args_len.q.out 22a085a &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_elt_wrong_type.q.out fc83f23 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_field_wrong_args_len.q.out 3bf97d9 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_field_wrong_type.q.out 2a2e944 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_if_not_bool.q.out a3c8902 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_if_wrong_args_len.q.out 89b23c8 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_in.q.out 50a6b98 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_instr_wrong_args_len.q.out 7f66db7 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_instr_wrong_type.q.out 89d8542 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_locate_wrong_args_len.q.out 46613e8 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_locate_wrong_type.q.out 42cc4b6 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_size_wrong_args_len.q.out b05731e &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_size_wrong_type.q.out 0c91c8f &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong.q.out bec3725 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong2.q.out 5b06467 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong3.q.out 6974dd7 &lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_not_supported1.q.out cc5f23b &lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_not_supported2.q.out c8987ea &lt;br/&gt;
  ql/src/test/results/clientnegative/union.q.out 333230d &lt;br/&gt;
  ql/src/test/results/clientnegative/union2.q.out 1e6c782 &lt;br/&gt;
  ql/src/test/results/clientnegative/union3.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/compiler/errors/ambiguous_table_col.q.out 1641ead &lt;br/&gt;
  ql/src/test/results/compiler/errors/duplicate_alias.q.out 1429744 &lt;br/&gt;
  ql/src/test/results/compiler/errors/insert_wrong_number_columns.q.out 7efe359 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_dot.q.out e63be5f &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_function_param2.q.out f1f41a1 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_index.q.out 77dc0c0 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_list_index.q.out 3714b68 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_list_index2.q.out c64b248 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_map_index.q.out e241bc6 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_map_index2.q.out 1c8d660 &lt;br/&gt;
  ql/src/test/results/compiler/errors/nonkey_groupby.q.out 21a9f46 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column1.q.out 4d89065 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column2.q.out 43f31db &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column3.q.out d8ee8d0 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column4.q.out 24d8c87 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column5.q.out d15e993 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column6.q.out aac42d1 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function1.q.out 5180f38 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function2.q.out dcb97bc &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function3.q.out dcb97bc &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function4.q.out 5180f38 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_table1.q.out ff92e4e &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_table2.q.out 54185e4 &lt;br/&gt;
  ql/src/test/results/compiler/errors/wrong_distinct1.q.out 74bc6e6 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/731/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Regenerated testcase expected output for TestNegativeCliDriver/TestParseNegative/TestNegativeContribCliDriver&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13032754" author="salbiz" created="Thu, 12 May 2011 23:45:18 +0000"  >&lt;p&gt;Instead of changing the overall structure, I decided to move the logic to print that context token into the new generateErrorMessage method, which prevents breaking existing error messages which rely on that behavior of an error token finishing the message.&lt;/p&gt;</comment>
                            <comment id="13033167" author="jvs" created="Fri, 13 May 2011 18:06:53 +0000"  >&lt;p&gt;Added a few comments in review board.&lt;/p&gt;</comment>
                            <comment id="13033173" author="jiraposter@reviews.apache.org" created="Fri, 13 May 2011 18:19:49 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/731/#review669&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/#review669&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/test/results/clientnegative/create_view_failure3.q.out&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/731/#comment1333&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/#comment1333&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is an example where an existing error should have been using the new &quot;Error encountered...&quot;.  You can either take care of these now, or open a followup for that.&lt;/p&gt;



&lt;p&gt;ql/src/test/results/clientnegative/ddltime.q.out&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/731/#comment1332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/#comment1332&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Need a period before &quot;Error encountered...&quot;.  That&apos;s true in general;.&lt;/p&gt;




&lt;p&gt;ql/src/test/results/clientnegative/groupby_key.q.out&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/731/#comment1331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/#comment1331&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is kinda ugly...&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-05-12 23:44:48, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/731/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-12 23:44:48)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Attaches line/column number to the vast majority of SemanticExceptions thrown. In addition, the context strings for the error messages relating to UNION ALLs and GROUP BY keys have been changed to provide more meaningful context.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; title=&quot;Improve error messages emitted during semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2155&quot;&gt;&lt;del&gt;HIVE-2155&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2155&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java 2fe37b6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 4ddf5b9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java bca37fd &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientnegative/union3.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/analyze_view.q.out ef76106 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/clusterbydistributeby.q.out 4c1ebfb &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/clusterbysortby.q.out f76d4a7 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/clustern3.q.out da71016 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/clustern4.q.out 1519e48 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/create_view_failure3.q.out 70e365a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/ddltime.q.out 11d00c3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/drop_partition_failure.q.out 1a0ac10 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part2.q.out cc0cd3c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/fileformat_void_input.q.out 5a7a05a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/groupby_key.q.out c6218a4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/input1.q.out 73f1657 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/input2.q.out 0c460a6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/invalidate_view1.q.out 9f61228 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/joinneg.q.out d85d508 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/line_terminator.q.out b672bd8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/load_wrong_noof_part.q.out 4d8c8d8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/nopart_insert.q.out 42bca76 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/notable_alias3.q.out d48d5e1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/orderbysortby.q.out 73b83a4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/regex_col_1.q.out 7547858 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/regex_col_2.q.out f570010 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/regex_col_groupby.q.out 8497718 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/semijoin1.q.out 739931f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/semijoin2.q.out 2b418de &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/semijoin3.q.out a803b50 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/semijoin4.q.out 86a834b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/split_sample_out_of_range.q.out 0761955 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/split_sample_wrong_format.q.out 19b1417 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/strict_orderby.q.out 2d3ba6b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/subq_insert.q.out 8c3ce79 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_array_contains_wrong1.q.out d6b98b4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_array_contains_wrong2.q.out 7b8dca6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_case_type_wrong.q.out 75b9638 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_case_type_wrong2.q.out 126fa4e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_case_type_wrong3.q.out fd62771 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_coalesce.q.out a5279f5 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_elt_wrong_args_len.q.out 22a085a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_elt_wrong_type.q.out fc83f23 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_field_wrong_args_len.q.out 3bf97d9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_field_wrong_type.q.out 2a2e944 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_if_not_bool.q.out a3c8902 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_if_wrong_args_len.q.out 89b23c8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_in.q.out 50a6b98 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_instr_wrong_args_len.q.out 7f66db7 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_instr_wrong_type.q.out 89d8542 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_locate_wrong_args_len.q.out 46613e8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_locate_wrong_type.q.out 42cc4b6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_size_wrong_args_len.q.out b05731e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_size_wrong_type.q.out 0c91c8f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_when_type_wrong.q.out bec3725 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_when_type_wrong2.q.out 5b06467 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_when_type_wrong3.q.out 6974dd7 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udtf_not_supported1.q.out cc5f23b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udtf_not_supported2.q.out c8987ea &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/union.q.out 333230d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/union2.q.out 1e6c782 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/union3.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/ambiguous_table_col.q.out 1641ead &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/duplicate_alias.q.out 1429744 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/insert_wrong_number_columns.q.out 7efe359 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/invalid_dot.q.out e63be5f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/invalid_function_param2.q.out f1f41a1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/invalid_index.q.out 77dc0c0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/invalid_list_index.q.out 3714b68 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/invalid_list_index2.q.out c64b248 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/invalid_map_index.q.out e241bc6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/invalid_map_index2.q.out 1c8d660 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/nonkey_groupby.q.out 21a9f46 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_column1.q.out 4d89065 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_column2.q.out 43f31db &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_column3.q.out d8ee8d0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_column4.q.out 24d8c87 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_column5.q.out d15e993 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_column6.q.out aac42d1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_function1.q.out 5180f38 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_function2.q.out dcb97bc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_function3.q.out dcb97bc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_function4.q.out 5180f38 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_table1.q.out ff92e4e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/unknown_table2.q.out 54185e4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/compiler/errors/wrong_distinct1.q.out 74bc6e6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/731/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Regenerated testcase expected output for TestNegativeCliDriver/TestParseNegative/TestNegativeContribCliDriver&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13033406" author="jiraposter@reviews.apache.org" created="Sat, 14 May 2011 01:05:48 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/731/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-14 01:05:47.070322)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Made the following changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Updated existing error messages to use the &apos;Error encountered near &amp;lt;tokenbq. &apos; format&lt;/li&gt;
	&lt;li&gt;Added the period to the error message&lt;/li&gt;
	&lt;li&gt;Fixed the generation of GROUP BY context string to be less fugly (generate the context string off the AST token one level below the top of the stack that contains the invalid column reference instead of the table alias.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Attaches line/column number to the vast majority of SemanticExceptions thrown. In addition, the context strings for the error messages relating to UNION ALLs and GROUP BY keys have been changed to provide more meaningful context.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; title=&quot;Improve error messages emitted during semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2155&quot;&gt;&lt;del&gt;HIVE-2155&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2155&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java 2fe37b6 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 4ddf5b9 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java bca37fd &lt;br/&gt;
  ql/src/test/queries/clientnegative/union3.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/analyze_view.q.out ef76106 &lt;br/&gt;
  ql/src/test/results/clientnegative/clusterbydistributeby.q.out 4c1ebfb &lt;br/&gt;
  ql/src/test/results/clientnegative/clusterbysortby.q.out f76d4a7 &lt;br/&gt;
  ql/src/test/results/clientnegative/clustern3.q.out da71016 &lt;br/&gt;
  ql/src/test/results/clientnegative/clustern4.q.out 1519e48 &lt;br/&gt;
  ql/src/test/results/clientnegative/create_view_failure3.q.out 70e365a &lt;br/&gt;
  ql/src/test/results/clientnegative/ctas.q.out a39fb7c &lt;br/&gt;
  ql/src/test/results/clientnegative/ddltime.q.out 11d00c3 &lt;br/&gt;
  ql/src/test/results/clientnegative/drop_partition_failure.q.out 1a0ac10 &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part2.q.out cc0cd3c &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part_merge.q.out cab97f7 &lt;br/&gt;
  ql/src/test/results/clientnegative/fileformat_void_input.q.out 5a7a05a &lt;br/&gt;
  ql/src/test/results/clientnegative/groupby_key.q.out c6218a4 &lt;br/&gt;
  ql/src/test/results/clientnegative/input1.q.out 73f1657 &lt;br/&gt;
  ql/src/test/results/clientnegative/input2.q.out 0c460a6 &lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_create_tbl1.q.out d091d8c &lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_t_alter1.q.out f7ae626 &lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_t_alter2.q.out f7ae626 &lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_t_create1.q.out d091d8c &lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_t_create2.q.out d091d8c &lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_t_create3.q.out d091d8c &lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_t_transform.q.out d091d8c &lt;br/&gt;
  ql/src/test/results/clientnegative/invalidate_view1.q.out 9f61228 &lt;br/&gt;
  ql/src/test/results/clientnegative/joinneg.q.out d85d508 &lt;br/&gt;
  ql/src/test/results/clientnegative/line_terminator.q.out b672bd8 &lt;br/&gt;
  ql/src/test/results/clientnegative/load_part_nospec.q.out 251c7e1 &lt;br/&gt;
  ql/src/test/results/clientnegative/load_wrong_noof_part.q.out 4d8c8d8 &lt;br/&gt;
  ql/src/test/results/clientnegative/nopart_insert.q.out 42bca76 &lt;br/&gt;
  ql/src/test/results/clientnegative/nopart_load.q.out 31376c8 &lt;br/&gt;
  ql/src/test/results/clientnegative/notable_alias3.q.out d48d5e1 &lt;br/&gt;
  ql/src/test/results/clientnegative/orderbysortby.q.out 73b83a4 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_1.q.out 7547858 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_2.q.out f570010 &lt;br/&gt;
  ql/src/test/results/clientnegative/regex_col_groupby.q.out 8497718 &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin1.q.out 739931f &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin2.q.out 2b418de &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin3.q.out a803b50 &lt;br/&gt;
  ql/src/test/results/clientnegative/semijoin4.q.out 86a834b &lt;br/&gt;
  ql/src/test/results/clientnegative/split_sample_out_of_range.q.out 0761955 &lt;br/&gt;
  ql/src/test/results/clientnegative/split_sample_wrong_format.q.out 19b1417 &lt;br/&gt;
  ql/src/test/results/clientnegative/strict_orderby.q.out 2d3ba6b &lt;br/&gt;
  ql/src/test/results/clientnegative/subq_insert.q.out 8c3ce79 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_array_contains_wrong1.q.out d6b98b4 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_array_contains_wrong2.q.out 7b8dca6 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong.q.out 75b9638 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong2.q.out 126fa4e &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_case_type_wrong3.q.out fd62771 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_coalesce.q.out a5279f5 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_elt_wrong_args_len.q.out 22a085a &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_elt_wrong_type.q.out fc83f23 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_field_wrong_args_len.q.out 3bf97d9 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_field_wrong_type.q.out 2a2e944 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_if_not_bool.q.out a3c8902 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_if_wrong_args_len.q.out 89b23c8 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_in.q.out 50a6b98 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_instr_wrong_args_len.q.out 7f66db7 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_instr_wrong_type.q.out 89d8542 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_locate_wrong_args_len.q.out 46613e8 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_locate_wrong_type.q.out 42cc4b6 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_size_wrong_args_len.q.out b05731e &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_size_wrong_type.q.out 0c91c8f &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong.q.out bec3725 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong2.q.out 5b06467 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_when_type_wrong3.q.out 6974dd7 &lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_not_supported1.q.out cc5f23b &lt;br/&gt;
  ql/src/test/results/clientnegative/udtf_not_supported2.q.out c8987ea &lt;br/&gt;
  ql/src/test/results/clientnegative/union.q.out 333230d &lt;br/&gt;
  ql/src/test/results/clientnegative/union2.q.out 1e6c782 &lt;br/&gt;
  ql/src/test/results/clientnegative/union3.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/compiler/errors/ambiguous_table_col.q.out 1641ead &lt;br/&gt;
  ql/src/test/results/compiler/errors/duplicate_alias.q.out 1429744 &lt;br/&gt;
  ql/src/test/results/compiler/errors/insert_wrong_number_columns.q.out 7efe359 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_dot.q.out e63be5f &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_function_param2.q.out f1f41a1 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_index.q.out 77dc0c0 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_list_index.q.out 3714b68 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_list_index2.q.out c64b248 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_map_index.q.out e241bc6 &lt;br/&gt;
  ql/src/test/results/compiler/errors/invalid_map_index2.q.out 1c8d660 &lt;br/&gt;
  ql/src/test/results/compiler/errors/nonkey_groupby.q.out 21a9f46 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column1.q.out 4d89065 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column2.q.out 43f31db &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column3.q.out d8ee8d0 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column4.q.out 24d8c87 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column5.q.out d15e993 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_column6.q.out aac42d1 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function1.q.out 5180f38 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function2.q.out dcb97bc &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function3.q.out dcb97bc &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_function4.q.out 5180f38 &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_table1.q.out ff92e4e &lt;br/&gt;
  ql/src/test/results/compiler/errors/unknown_table2.q.out 54185e4 &lt;br/&gt;
  ql/src/test/results/compiler/errors/wrong_distinct1.q.out 74bc6e6 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/731/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/731/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Regenerated testcase expected output for TestNegativeCliDriver/TestParseNegative/TestNegativeContribCliDriver&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13033408" author="salbiz" created="Sat, 14 May 2011 01:07:41 +0000"  >&lt;p&gt;Updated patch based on reviewboard comments (Changes described there)&lt;/p&gt;</comment>
                            <comment id="13034167" author="jvs" created="Mon, 16 May 2011 18:16:55 +0000"  >&lt;p&gt;I added *&apos;s on a bunch of places that should be using the new &quot;Encountered near&quot; phrasing.&lt;/p&gt;

&lt;p&gt;Also, the fugliness is still there for the GROUP BY stuff.  Those internal nodes should never be printed at all.  Did you look into trying to get it to print the column instead of the table?&lt;/p&gt;</comment>
                            <comment id="13034252" author="salbiz" created="Mon, 16 May 2011 20:00:05 +0000"  >&lt;p&gt;Regenerate the TestParseNegative bucket, and modify the existing ugly testcases to use the new &quot;Error encountered near&quot; strings.&lt;/p&gt;</comment>
                            <comment id="13034322" author="jvs" created="Mon, 16 May 2011 21:20:34 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13034488" author="jvs" created="Tue, 17 May 2011 01:29:55 +0000"  >&lt;p&gt;Committed.  Thanks Syed!&lt;/p&gt;</comment>
                            <comment id="13034596" author="hudson" created="Tue, 17 May 2011 06:07:16 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.20 #732 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/732/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/732/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; title=&quot;Improve error messages emitted during semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2155&quot;&gt;&lt;del&gt;HIVE-2155&lt;/del&gt;&lt;/a&gt;. Improve error messages emitted during semantic analysis&lt;br/&gt;
(Syed Albiz via jvs)&lt;/p&gt;</comment>
                            <comment id="13064794" author="hudson" created="Wed, 13 Jul 2011 19:34:52 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #824 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/824/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/824/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2281&quot; title=&quot;Regression introduced from HIVE-2155&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2281&quot;&gt;&lt;del&gt;HIVE-2281&lt;/del&gt;&lt;/a&gt;. Regression introduced from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; title=&quot;Improve error messages emitted during semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2155&quot;&gt;&lt;del&gt;HIVE-2155&lt;/del&gt;&lt;/a&gt; (Syed S. Albiz via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1146100&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1146100&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/nonkey_groupby.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/nonkey_groupby.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12631027">HIVE-3991</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12477690">HIVE-1731</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12478866" name="HIVE-2155.1.patch" size="65497" author="salbiz" created="Wed, 11 May 2011 19:29:52 +0000"/>
                            <attachment id="12478914" name="HIVE-2155.2.patch" size="65479" author="salbiz" created="Thu, 12 May 2011 00:04:01 +0000"/>
                            <attachment id="12479037" name="HIVE-2155.3.patch" size="66585" author="salbiz" created="Thu, 12 May 2011 23:45:18 +0000"/>
                            <attachment id="12479201" name="HIVE-2155.4.patch" size="78151" author="salbiz" created="Sat, 14 May 2011 01:07:41 +0000"/>
                            <attachment id="12479375" name="HIVE-2155.5.patch" size="83404" author="salbiz" created="Mon, 16 May 2011 20:00:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 May 2011 23:19:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>68137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0liof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2156] Improve error messages emitted during task execution</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2156</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Follow-up to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1731&quot; title=&quot;Improve miscellaneous error messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1731&quot;&gt;&lt;del&gt;HIVE-1731&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
A number of issues were related to reporting errors from task execution and surfacing these in a more useful form.&lt;br/&gt;
Currently a cryptic message with &quot;Execution Error&quot; and a return code and class name of the task is emitted.&lt;/p&gt;

&lt;p&gt;The most useful log messages here are emitted to the local logs, which can be found through jobtracker. Having either a pointer to these logs as part of the error message or the actual content would improve the usefulness substantially. It may also warrant looking into how the underlying error reporting through Hadoop is done and if more information can be propagated up from there.&lt;/p&gt;

&lt;p&gt;Specific issues raised in  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1731&quot; title=&quot;Improve miscellaneous error messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1731&quot;&gt;&lt;del&gt;HIVE-1731&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;issue was in regexp_extract syntax&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tried: desc table_does_not_exist;&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment></environment>
        <key id="12506667">HIVE-2156</key>
            <summary>Improve error messages emitted during task execution</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="salbiz">Syed S. Albiz</assignee>
                                    <reporter username="salbiz">Syed S. Albiz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 May 2011 00:01:14 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:40 +0000</updated>
                            <resolved>Fri, 12 Aug 2011 01:06:12 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13032951" author="salbiz" created="Fri, 13 May 2011 10:44:20 +0000"  >&lt;p&gt;Based on our discussion, I am pursuing the following resolutions:&lt;br/&gt;
1) Populate a knowledge base-style lookup table of error code to possible causes, replacing the opaqure &apos;return code %d&apos; with either a list of possible causes, or reference to some document with a knowledge-base article&lt;br/&gt;
2) Look at problems with HadoopJobHelper.showJobFailDebugInfo(...) which printed out task log URLs for specific failing tasks&lt;br/&gt;
3) Investigate changing how error propagation works from hadoop to hive, and figure out if more context can be surfaced than just an exit value.&lt;/p&gt;</comment>
                            <comment id="13038110" author="salbiz" created="Mon, 23 May 2011 18:20:51 +0000"  >&lt;p&gt;Timeout fetching of job debug info after 5 minutes, unify the local mode error messages as well with a pointer to the job logs, and &lt;/p&gt;</comment>
                            <comment id="13038116" author="jiraposter@reviews.apache.org" created="Mon, 23 May 2011 18:26:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;br/&gt;
  conf/hive-default.xml 159d825 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13038177" author="jiraposter@reviews.apache.org" created="Mon, 23 May 2011 20:03:48 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/#review707&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#review707&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1411&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1411&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Isn&apos;t this an unrelated change?  It seems like a good thing to do, just not part of this JIRA issue.&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1412&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1412&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Someone may have changed the log4j configuration, so this isn&apos;t good enough.  There&apos;s a way to get the file path corresponding to a log4j FileAppender (method getFile()), so maybe you can use that?&lt;/p&gt;




&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1413&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The timeout should be configurable.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1414&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1414&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Add Javadoc.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1415&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1415&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Any fallback we should try if IOException occurs?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-05-23 18:25:37, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-23 18:25:37)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add local error messages to point to job logs and provide TaskIDs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add a timeout to the fetching of task logs and errors&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 159d825 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13038186" author="jiraposter@reviews.apache.org" created="Mon, 23 May 2011 20:17:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/#review708&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#review708&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1416&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1416&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    You are missing a space in the string break here.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-05-23 18:25:37, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-23 18:25:37)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add local error messages to point to job logs and provide TaskIDs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add a timeout to the fetching of task logs and errors&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 159d825 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13038379" author="salbiz" created="Tue, 24 May 2011 04:30:22 +0000"  >&lt;p&gt;Address comments in previous patch. &lt;/p&gt;</comment>
                            <comment id="13038381" author="jiraposter@reviews.apache.org" created="Tue, 24 May 2011 04:30:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-05-24 04:29:32.782216)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Address comments, add TestNegativeMinimrCliDriver testcase to cover negative testcases.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml 00c3680 &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;br/&gt;
  conf/hive-default.xml 159d825 &lt;br/&gt;
  ql/build.xml 449b47a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;br/&gt;
  ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;br/&gt;
  ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13038382" author="jiraposter@reviews.apache.org" created="Tue, 24 May 2011 04:34:47 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-05-23 20:03:10, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java, line 84&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/diff/1/?file=19535#file19535line84&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff/1/?file=19535#file19535line84&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Any fallback we should try if IOException occurs?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Besides propagating an error message to notify the user that something has gone wrong in grabbing the debugging information, not much can be done here. I can definitely add a console.print statement with an additional error though&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Syed&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/#review707&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#review707&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-05-24 04:29:32, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-24 04:29:32)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add local error messages to point to job logs and provide TaskIDs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add a timeout to the fetching of task logs and errors&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 00c3680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 159d825 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 449b47a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13038776" author="jiraposter@reviews.apache.org" created="Tue, 24 May 2011 20:49:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/#review711&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#review711&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1420&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1420&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    error code -101 is also used in TaskRunner.java to indicate OOM exception. We should define all these error code in a centralized place.  &lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1421&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1421&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We should use interface in the declaration (Set&amp;lt;String&amp;gt;). &lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1422&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1422&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Also the return type should use interface rather than class implementation. &lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1423&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1423&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Print out error message related to the exception so that user know what goes wrong?&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1424&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1424&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Some task log are very big. retrieving all may take a long time. It may be sufficient to just retrieve the last 8KB. &lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment1425&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment1425&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Do you have some numbers on how long it takes to get all the TaskCompletionEvents? There are cases that a job may have more than 10k tasks and all of them failed with the same error.&lt;/p&gt;

&lt;p&gt;    If it takes too long you may want to consider adding a threshold to the time spent in getting all the TaskCompleteEvents. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-05-24 04:29:32, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-24 04:29:32)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add local error messages to point to job logs and provide TaskIDs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add a timeout to the fetching of task logs and errors&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 00c3680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 159d825 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 449b47a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13038842" author="jiraposter@reviews.apache.org" created="Tue, 24 May 2011 21:56:47 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-05-24 20:49:24, Ning Zhang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java, line 110&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/diff/2/?file=19557#file19557line110&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff/2/?file=19557#file19557line110&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Do you have some numbers on how long it takes to get all the TaskCompletionEvents? There are cases that a job may have more than 10k tasks and all of them failed with the same error.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     If it takes too long you may want to consider adding a threshold to the time spent in getting all the TaskCompleteEvents.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have only tested it on some of the queries in the NegativeCliDriver tests, where it usually only takes &amp;lt;10s running in miniMR cluster mode. There is a coarse timeout (default 5 minutes, configurable in HiveConf.ConfVars.JOB_DEBUG_TIMEOUT) to get all TaskCompletionEvents before we stop that is enforced by HadoopJobExecHelper, but it would make sense to timeout grabbing TaskCompletionEvents specifically, and then print out the information obtained so far instead of what this patch does, which is just throw away the taskCompletionEvents gathered so far and return the &quot;could not obtain debugging info&quot;. Does that sound reasonable, or do you think the coarse timeout would be sufficient?&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-05-24 20:49:24, Ning Zhang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java, line 571&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/diff/2/?file=19556#file19556line571&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff/2/?file=19556#file19556line571&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     error code -101 is also used in TaskRunner.java to indicate OOM exception. We should define all these error code in a centralized place.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This was just used as something to initialize the exitVal to, that specific value should never be returned unless the call to runningJob.waitFor() returns the same value. I can change it to something else just to avoid the collision, but should we do both the consolidation of exit codes and the change to showJobDebugInfo in the same patch? They seem like different changes, and consolidating the exit codes would require touching several other parts of MapredLocalTask, MapRedTask and ExecDriver. Would these changes fit better in a separate patch?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Syed&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/#review711&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#review711&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-05-24 04:29:32, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-24 04:29:32)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add local error messages to point to job logs and provide TaskIDs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add a timeout to the fetching of task logs and errors&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 00c3680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 159d825 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 449b47a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13039831" author="jiraposter@reviews.apache.org" created="Thu, 26 May 2011 17:57:47 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-05-24 20:49:24, Ning Zhang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java, line 571&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/diff/2/?file=19556#file19556line571&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff/2/?file=19556#file19556line571&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     error code -101 is also used in TaskRunner.java to indicate OOM exception. We should define all these error code in a centralized place.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed Albiz wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This was just used as something to initialize the exitVal to, that specific value should never be returned unless the call to runningJob.waitFor() returns the same value. I can change it to something else just to avoid the collision, but should we do both the consolidation of exit codes and the change to showJobDebugInfo in the same patch? They seem like different changes, and consolidating the exit codes would require touching several other parts of MapredLocalTask, MapRedTask and ExecDriver. Would these changes fit better in a separate patch?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, change it to something else won&apos;t be fine for now. We should probably consider consolidate all error codes into a centralized place in a separate JIRA. &lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-05-24 20:49:24, Ning Zhang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java, line 110&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/diff/2/?file=19557#file19557line110&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff/2/?file=19557#file19557line110&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Do you have some numbers on how long it takes to get all the TaskCompletionEvents? There are cases that a job may have more than 10k tasks and all of them failed with the same error.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     If it takes too long you may want to consider adding a threshold to the time spent in getting all the TaskCompleteEvents.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed Albiz wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I have only tested it on some of the queries in the NegativeCliDriver tests, where it usually only takes &amp;lt;10s running in miniMR cluster mode. There is a coarse timeout (default 5 minutes, configurable in HiveConf.ConfVars.JOB_DEBUG_TIMEOUT) to get all TaskCompletionEvents before we stop that is enforced by HadoopJobExecHelper, but it would make sense to timeout grabbing TaskCompletionEvents specifically, and then print out the information obtained so far instead of what this patch does, which is just throw away the taskCompletionEvents gathered so far and return the &quot;could not obtain debugging info&quot;. Does that sound reasonable, or do you think the coarse timeout would be sufficient?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think 5 mins is too long for getting the TaskCompleteEvents. And if the timeout happens, we won&apos;t get any error message from the task tracker.  Can you get a sense of how long it takes to get a small number of TaskCompleteEvents in a real cluster, and then extrapolate to large (say 30k) # of mappers? If that&apos;s too long we should restrict the number of fetching TaskCompleteEvents to a few seconds and spend sometime to retrieve the task logs. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/#review711&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#review711&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-05-24 04:29:32, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-05-24 04:29:32)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add local error messages to point to job logs and provide TaskIDs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add a timeout to the fetching of task logs and errors&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 00c3680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java dc96a1f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 159d825 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 449b47a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 4717c25 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 9cb407c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13045730" author="jiraposter@reviews.apache.org" created="Wed, 8 Jun 2011 00:55:59 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-06-08 00:55:49.148248)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Addressed Ning&apos;s comments. After testing on the cluster, I ran into the coarse timeout a few times, so I think it makes sense to have a fine timeout on grabbing the task completions and then proceed with the rest of the JobDebugger stuff. I have added a separate configuration variable to toggle the timeout for grabbing task completions, we may just want to scale the overall timeout by some factor.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml a2236e1 &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b94cdc6 &lt;br/&gt;
  conf/hive-default.xml 1317a9c &lt;br/&gt;
  ql/build.xml 449b47a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 40d2644 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java ec816e9 &lt;br/&gt;
  ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;br/&gt;
  ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13067510" author="nzhang" created="Tue, 19 Jul 2011 05:29:27 +0000"  >&lt;p&gt;Hi Syed, it looks good in general. Can you rebase this diff to the current trunk? I&apos;ll start testing it then. &lt;/p&gt;</comment>
                            <comment id="13067858" author="jiraposter@reviews.apache.org" created="Tue, 19 Jul 2011 17:42:58 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-07-19 17:42:08.908937)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Rebased patch against latest trunk&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml b6807fa &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java d29cc77 &lt;br/&gt;
  conf/hive-default.xml 0ca7085 &lt;br/&gt;
  ql/build.xml 449b47a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 40d2644 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java 53769a0 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 691f038 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java cd3de76 &lt;br/&gt;
  ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;br/&gt;
  ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13068055" author="nzhang" created="Tue, 19 Jul 2011 23:13:40 +0000"  >&lt;p&gt;Syed, the test failed with a lot of diffs. I&apos;ve send you the test.log file a separate email. &lt;/p&gt;</comment>
                            <comment id="13078534" author="salbiz" created="Wed, 3 Aug 2011 00:39:04 +0000"  >&lt;p&gt;regenerate patch against testcase output&lt;/p&gt;</comment>
                            <comment id="13078535" author="jiraposter@reviews.apache.org" created="Wed, 3 Aug 2011 00:40:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-03 00:40:14.013522)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;regenerated patch against testcase output&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml 4856c5f &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b46976f &lt;br/&gt;
  conf/hive-default.xml 3a4f833 &lt;br/&gt;
  ql/build.xml 449b47a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 1c6f092 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java e687b1a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 3d5e95d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java cec0d46 &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;br/&gt;
  ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13078620" author="nzhang" created="Wed, 3 Aug 2011 07:32:54 +0000"  >&lt;p&gt;Syed, there are still 2 tests failed on: mapjoin_hook.q and auto_join25.q. All other tests passed. &lt;/p&gt;</comment>
                            <comment id="13078908" author="salbiz" created="Wed, 3 Aug 2011 18:34:44 +0000"  >&lt;p&gt;ah, sorry, those testcases didn&apos;t get included for some reason. This patch should fix it.&lt;/p&gt;</comment>
                            <comment id="13078909" author="jiraposter@reviews.apache.org" created="Wed, 3 Aug 2011 18:35:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-03 18:35:22.814828)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;add fixes for two failing tests&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml 4856c5f &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b46976f &lt;br/&gt;
  conf/hive-default.xml 3a4f833 &lt;br/&gt;
  ql/build.xml 449b47a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 1c6f092 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java e687b1a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 3d5e95d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java cec0d46 &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out fcb2673 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join25.q.out 362b2fa &lt;br/&gt;
  ql/src/test/results/clientpositive/mapjoin_hook.q.out acdeefa &lt;br/&gt;
  ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13079673" author="salbiz" created="Thu, 4 Aug 2011 23:16:17 +0000"  >&lt;p&gt;regenerated against latest revision so fix conflicts&lt;/p&gt;</comment>
                            <comment id="13080074" author="nzhang" created="Fri, 5 Aug 2011 16:56:24 +0000"  >&lt;p&gt;Syed, there are still 2 tests are failing: TestContribCliDriver: case_with_row_sequence. It&apos;s probably just a diff update, can you take a look again? &lt;/p&gt;</comment>
                            <comment id="13080163" author="salbiz" created="Fri, 5 Aug 2011 19:18:23 +0000"  >&lt;p&gt;fixed failing tests&lt;/p&gt;</comment>
                            <comment id="13080176" author="jghoman" created="Fri, 5 Aug 2011 19:47:13 +0000"  >&lt;p&gt;This would be a nice patch to have in 7.1.  Any objection to a version for that release?  I&apos;d consider this more of a bug than an improvement since the comments don&apos;t work without it.&lt;/p&gt;</comment>
                            <comment id="13080277" author="nzhang" created="Fri, 5 Aug 2011 22:53:25 +0000"  >&lt;p&gt;Jakob, I don&apos;t see the relationship between this patch and comments. Which JIRA are you referring to? &lt;/p&gt;</comment>
                            <comment id="13081049" author="nzhang" created="Mon, 8 Aug 2011 16:47:23 +0000"  >&lt;p&gt;Syed, TestNegativeMinimrCliDriver failed, there&apos;s no minimr_broken_pipe.q. Did you forget to included it in the patch? Also all 8 tests of TestExecDriver failed. Can you take yet another look?&lt;/p&gt;</comment>
                            <comment id="13081249" author="salbiz" created="Mon, 8 Aug 2011 22:13:56 +0000"  >&lt;p&gt;required a slight code change to fix the ExecDriver change and regenerated the patch to include the minimr tests&lt;/p&gt;</comment>
                            <comment id="13081847" author="nzhang" created="Tue, 9 Aug 2011 19:07:37 +0000"  >&lt;p&gt;Syed, can you update the review board with your latest patch as well? Otherwise it&apos;s hard to track the additional changes.&lt;/p&gt;</comment>
                            <comment id="13081865" author="jiraposter@reviews.apache.org" created="Tue, 9 Aug 2011 19:34:28 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-09 19:33:53.896288)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;update patch to avoid TestExecDriver errors and include miniMR mode testcase&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml 4856c5f &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b46976f &lt;br/&gt;
  conf/hive-default.xml 3a4f833 &lt;br/&gt;
  contrib/src/test/results/clientnegative/case_with_row_sequence.q.out 4447c65 &lt;br/&gt;
  ql/build.xml 449b47a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 1c6f092 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java e687b1a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 3d5e95d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java cec0d46 &lt;br/&gt;
  ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out 06437c7 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out 54f1262 &lt;br/&gt;
  ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join25.q.out 362b2fa &lt;br/&gt;
  ql/src/test/results/clientpositive/mapjoin_hook.q.out acdeefa &lt;br/&gt;
  ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13082142" author="nzhang" created="Wed, 10 Aug 2011 05:32:59 +0000"  >&lt;p&gt;Syed, there are still 2 tests failing:  minimr_broken_pipe.q in TestNegativeCliDriver and TestNegativeMinimrCliDriver. Can you take yet another look? Also please rerun all unit tests and make sure all of them pass before submitting. Otherwise it takes too many iterations. &lt;/p&gt;</comment>
                            <comment id="13082828" author="salbiz" created="Thu, 11 Aug 2011 01:06:55 +0000"  >&lt;p&gt;The previous patch was failing as I generated it using &apos;-Doverwrite=true&apos;, and minimr_broken_pipe.q was being written over twice. I have fixed the patch to exclude minimr_broken_pipe.q from the regular TestNegativeCliDriver test run, and also updated the diff ignores to prevent the TestNegativeMinimrCliDriver failure&lt;/p&gt;</comment>
                            <comment id="13082832" author="jiraposter@reviews.apache.org" created="Thu, 11 Aug 2011 01:09:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-11 01:07:35.822886)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The previous patch was failing as I generated it using &apos;-Doverwrite=true&apos;, and minimr_broken_pipe.q was being written over twice. I have fixed the patch to exclude minimr_broken_pipe.q from the regular TestNegativeCliDriver test run, and also updated the diff ignores to prevent the TestNegativeMinimrCliDriver failure&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add local error messages to point to job logs and provide TaskIDs&lt;/li&gt;
	&lt;li&gt;Add a timeout to the fetching of task logs and errors&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml 4856c5f &lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b46976f &lt;br/&gt;
  conf/hive-default.xml 3a4f833 &lt;br/&gt;
  contrib/src/test/results/clientnegative/case_with_row_sequence.q.out 4447c65 &lt;br/&gt;
  ql/build.xml 449b47a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 1c6f092 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java e687b1a &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 3d5e95d &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java cec0d46 &lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java 8a50dc6 &lt;br/&gt;
  ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_entry_limit.q.out 06437c7 &lt;br/&gt;
  ql/src/test/results/clientnegative/index_compact_size_limit.q.out 54f1262 &lt;br/&gt;
  ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;br/&gt;
  ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;br/&gt;
  ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join25.q.out 362b2fa &lt;br/&gt;
  ql/src/test/results/clientpositive/mapjoin_hook.q.out acdeefa &lt;br/&gt;
  ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13083855" author="nzhang" created="Fri, 12 Aug 2011 01:06:12 +0000"  >&lt;p&gt;Committed. Thanks Syed!&lt;/p&gt;</comment>
                            <comment id="13083953" author="hudson" created="Fri, 12 Aug 2011 05:45:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #890 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/890/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/890/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;. Improve error messages emitted during task execution (Syed S. Albiz via Ning Zhang)&lt;/p&gt;

&lt;p&gt;nzhang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1156928&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1156928&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/templates/TestNegativeCliDriver.vm&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/script_broken_pipe1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/script_error.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/script_broken_pipe2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/script_broken_pipe3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/minimr_broken_pipe.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/mapjoin_hook.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/dyn_part3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_test_error.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/minimr_broken_pipe.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_compact_size_limit.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/auto_join25.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/test/results/clientnegative/case_with_row_sequence.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_test_error_reduce.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_compact_entry_limit.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_reflect_neg.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13084624" author="jiraposter@reviews.apache.org" created="Sat, 13 Aug 2011 14:31:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/777/#review1445&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#review1445&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment3345&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment3345&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    assert(jobId.equals(ti.getJobId())) would have been enough&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment3346&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment3346&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please take the declaration out of the loop&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment3347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment3347&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    the condition could have been much simpler this way:&lt;br/&gt;
    jobId.equals(ti.getJobId())&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment3348&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment3348&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    invoking size() directly on the failures map would have been enough&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment3350&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment3350&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please use java.util.Collections.max() inplace of the existing logic.&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/777/#comment3349&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/#comment3349&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please use entry set to loop over the failures map, instead of using the keyset&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;M&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-11 01:07:35, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-11 01:07:35)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add local error messages to point to job logs and provide TaskIDs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Add a timeout to the fetching of task logs and errors&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; title=&quot;Improve error messages emitted during task execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2156&quot;&gt;&lt;del&gt;HIVE-2156&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2156&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2156&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 4856c5f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;common/src/java/org/apache/hadoop/hive/conf/HiveConf.java b46976f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;conf/hive-default.xml 3a4f833 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;contrib/src/test/results/clientnegative/case_with_row_sequence.q.out 4447c65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/build.xml 449b47a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java 1c6f092 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapRedTask.java e687b1a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/MapredLocalTask.java 3d5e95d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java cec0d46 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java 8a50dc6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientnegative/minimr_broken_pipe.q PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/dyn_part3.q.out 5f4df65 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/index_compact_entry_limit.q.out 06437c7 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/index_compact_size_limit.q.out 54f1262 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/minimr_broken_pipe.q.out PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe1.q.out d33d2cc &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe2.q.out afbaa44 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_broken_pipe3.q.out fe8f757 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/script_error.q.out c72d780 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_reflect_neg.q.out f2082a3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error.q.out 5fd9a00 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientnegative/udf_test_error_reduce.q.out ddc5e5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/auto_join25.q.out 362b2fa &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/mapjoin_hook.q.out acdeefa &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/templates/TestNegativeCliDriver.vm ec13f79 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/777/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/777/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Tested TestNegativeCliDriver in both local and miniMR mode&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12477690">HIVE-1731</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12480141" name="HIVE-2156.1.patch" size="29328" author="salbiz" created="Mon, 23 May 2011 18:20:51 +0000"/>
                            <attachment id="12489421" name="HIVE-2156.10.patch" size="39393" author="salbiz" created="Thu, 4 Aug 2011 23:16:17 +0000"/>
                            <attachment id="12489519" name="HIVE-2156.11.patch" size="40370" author="salbiz" created="Fri, 5 Aug 2011 19:18:23 +0000"/>
                            <attachment id="12489758" name="HIVE-2156.12.patch" size="41657" author="salbiz" created="Mon, 8 Aug 2011 22:13:56 +0000"/>
                            <attachment id="12490063" name="HIVE-2156.13.patch" size="42666" author="salbiz" created="Thu, 11 Aug 2011 01:06:55 +0000"/>
                            <attachment id="12480202" name="HIVE-2156.2.patch" size="34221" author="salbiz" created="Tue, 24 May 2011 04:30:22 +0000"/>
                            <attachment id="12487036" name="HIVE-2156.4.patch" size="39576" author="salbiz" created="Tue, 19 Jul 2011 17:41:27 +0000"/>
                            <attachment id="12489144" name="HIVE-2156.8.patch" size="34513" author="salbiz" created="Wed, 3 Aug 2011 00:39:04 +0000"/>
                            <attachment id="12489228" name="HIVE-2156.9.patch" size="41918" author="salbiz" created="Wed, 3 Aug 2011 18:34:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 May 2011 18:26:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lion:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2157] NPE in MapJoinObjectKey</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2157</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12506762">HIVE-2157</key>
            <summary>NPE in MapJoinObjectKey</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 May 2011 20:05:58 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:33 +0000</updated>
                            <resolved>Wed, 11 May 2011 07:16:08 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13031353" author="namit" created="Tue, 10 May 2011 20:22:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13031577" author="namit" created="Wed, 11 May 2011 07:16:08 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                            <comment id="13032615" author="hudson" created="Thu, 12 May 2011 19:40:22 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.20 #726 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Hive-trunk-h0.20/726/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12478730" name="HIVE-2157.1.patch" size="701" author="he yongqiang" created="Tue, 10 May 2011 20:08:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 May 2011 20:22:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66831</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0liov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
