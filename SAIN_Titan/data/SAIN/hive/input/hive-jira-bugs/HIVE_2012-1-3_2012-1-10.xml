<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:19:53 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2012-1-3+AND+created+%3C%3D+2012-1-10+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="8" total="8"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2690] a bug in &apos;alter table concatenate&apos; that causes filenames getting double url encoded</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2690</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12537112">HIVE-2690</key>
            <summary>a bug in &apos;alter table concatenate&apos; that causes filenames getting double url encoded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jan 2012 23:12:16 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:48 +0000</updated>
                            <resolved>Wed, 4 Jan 2012 13:32:47 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13179142" author="he yongqiang" created="Tue, 3 Jan 2012 23:50:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D1095&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1095&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13179143" author="phabricator@reviews.facebook.net" created="Tue, 3 Jan 2012 23:50:38 +0000"  >&lt;p&gt;heyongqiang requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2690&quot; title=&quot;a bug in &amp;#39;alter table concatenate&amp;#39; that causes filenames getting double url encoded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2690&quot;&gt;&lt;del&gt;HIVE-2690&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; a bug in &apos;alter table concatenate&apos; that causes filenames getting double url encoded&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;



&lt;p&gt;TEST PLAN&lt;br/&gt;
  testcase&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1095&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1095&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_merge_2.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/alter_merge_2.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2313/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2313/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13179191" author="phabricator@reviews.facebook.net" created="Wed, 4 Jan 2012 01:00:38 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2690&quot; title=&quot;a bug in &amp;#39;alter table concatenate&amp;#39; that causes filenames getting double url encoded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2690&quot;&gt;&lt;del&gt;HIVE-2690&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; a bug in &apos;alter table concatenate&apos; that causes filenames getting double url encoded&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1095&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1095&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13179473" author="namit" created="Wed, 4 Jan 2012 13:32:47 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                            <comment id="13180142" author="hudson" created="Thu, 5 Jan 2012 02:42:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1184 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1184/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1184/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2690&quot; title=&quot;a bug in &amp;#39;alter table concatenate&amp;#39; that causes filenames getting double url encoded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2690&quot;&gt;&lt;del&gt;HIVE-2690&lt;/del&gt;&lt;/a&gt; a bug in &apos;alter table concatenate&apos; that causes filenames getting&lt;br/&gt;
double url encoded (He Yongqiang via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227151&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/alter_merge_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_merge_2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265314" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:40 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547973" author="hudson" created="Wed, 9 Jan 2013 10:23:48 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2690&quot; title=&quot;a bug in &amp;#39;alter table concatenate&amp;#39; that causes filenames getting double url encoded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2690&quot;&gt;&lt;del&gt;HIVE-2690&lt;/del&gt;&lt;/a&gt; a bug in &apos;alter table concatenate&apos; that causes filenames getting&lt;br/&gt;
double url encoded (He Yongqiang via namit) (Revision 1227151)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227151&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/alter_merge_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_merge_2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12509356" name="ASF.LICENSE.NOT.GRANTED--HIVE-2690.D1095.1.patch" size="10051" author="phabricator@reviews.facebook.net" created="Tue, 3 Jan 2012 23:50:39 +0000"/>
                            <attachment id="12509355" name="HIVE-2690.1.patch" size="10223" author="he yongqiang" created="Tue, 3 Jan 2012 23:42:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Jan 2012 23:50:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2691] Specify location of log4j configuration files via configuration properties</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2691</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Oozie needs to be able to override the default location of the log4j configuration&lt;br/&gt;
files from the Hive command line, e.g:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive -hiveconf hive.log4j.file=/home/carl/hive-log4j.properties -hiveconf hive.log4j.exec.file=/home/carl/hive-exec-log4j.properties
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12537123">HIVE-2691</key>
            <summary>Specify location of log4j configuration files via configuration properties</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                            <label>TODOC11</label>
                    </labels>
                <created>Wed, 4 Jan 2012 01:11:39 +0000</created>
                <updated>Sun, 6 Dec 2015 07:58:28 +0000</updated>
                            <resolved>Sun, 9 Dec 2012 09:36:16 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Configuration</component>
                    <component>Logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13181720" author="phabricator@reviews.facebook.net" created="Sat, 7 Jan 2012 00:15:39 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt;: Specify location of log4j configuration files via configuration properties&lt;/p&gt;

&lt;p&gt;  Oozie needs to be able to override the default location of the log4j configuration&lt;br/&gt;
  files from the Hive command line, e.g:&lt;/p&gt;

&lt;p&gt;  hive -hiveconf hive.log4j.file=/home/carl/hive-log4j.properties -hiveconf hive.log4j.exec.file=/home/carl/hive-exec-log4j.properties&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1131&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1131&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2391/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2391/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13184529" author="namit" created="Wed, 11 Jan 2012 23:25:18 +0000"  >&lt;p&gt;commented on D1131&lt;/p&gt;</comment>
                            <comment id="13184530" author="phabricator@reviews.facebook.net" created="Wed, 11 Jan 2012 23:25:39 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:562 Add these properties in hive-default.xml with a explanation&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:843 the 2nd log file is not used&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1131&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1131&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13184648" author="phabricator@reviews.facebook.net" created="Thu, 12 Jan 2012 01:39:39 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt;: Specify location of log4j configuration files via configuration properties&lt;/p&gt;

&lt;p&gt;  Oozie needs to be able to override the default location of the log4j configuration&lt;br/&gt;
  files from the Hive command line, e.g:&lt;/p&gt;

&lt;p&gt;  hive -hiveconf hive.log4j.file=/home/carl/hive-log4j.properties -hiveconf hive.log4j.exec.file=/home/carl/hive-exec-log4j.properties&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2493/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2493/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13184714" author="cwsteinbach" created="Thu, 12 Jan 2012 04:22:37 +0000"  >&lt;p&gt;@Zhenxiao: Looks like Arc is creating new review requests instead of updating your original request. Can you please verify that you are following the directions for updating review requests: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview#PhabricatorCodeReview-UpdatingPatches%28git%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/PhabricatorCodeReview#PhabricatorCodeReview-UpdatingPatches%28git%29&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13184718" author="phabricator@reviews.facebook.net" created="Thu, 12 Jan 2012 04:47:39 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:48 This method should not take an input parameter. Instead, look the config value up directly using HiveConf.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:52 If the logging conf file is specified using the configuration property, then you have to assume that the value is a canonical path, and you need to look it up on the local filesystem, not from the classpath.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:50 The default value for the two new conf properties is &quot;&quot;. Checking for null will not catch this.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java:551 Please move this code to LogUtils.initHiveExecLog4j()&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java:557 The default value of HiveConf.ConfVars.HIVE_EXEC_LOG4J_FILE is &quot;&quot;. We should also check to make sure that the file actually exists. If it doesn&apos;t, we should use the default log conf from the classpath instead, and probably log a message explaining that we weren&apos;t able to find the conf file specified by HiveConf.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java:566 The javadoc for PropertyConfigurator.configure(String) is a little unclear about whether or not it can handle canonical paths that specify locations which aren&apos;t on the classpath, and since it doesn&apos;t return any error information I&apos;m not convinced that this is actually working. Please try setting the log4j.debug variable (mentioned in the javadoc) to see if you can get any diagnostic information about where it&apos;s loading the logging configuration from.&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;  conf/hive-default.xml.template:1201 Both descriptions should make the following clear:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;If the property is not set, then logging will be initialized using hive-log4j.properties (or hive-exec-log4j.properties) found on the classpath.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;If the property is set, the value must be a valid URI (java.net.URI, e.g. &quot;file:///tmp/my-logging.properties&quot;), which you can then extract a URL from and pass to PropertyConfigurator.configure(URL).&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:63 I&apos;m pretty sure that these logging statements are silently failing since this block of code runs before HiveConf.init() is called.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  I think the cleanest solution is to add getters to HiveConf that provide access to the hiveDefaultURl and hiveSiteURL variables, and then log the same information in LogUtils.initHiveLog4j() after logging has been initialized.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:32 Change the visibility to private.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:840 I&apos;m reversing what I said earlier. I think this code should be moved back to CliDriver, ExecDriver, etc, and initHiveLog4j/initHiveExecLog4j should take a HiveConf object as input.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13185464" author="phabricator@reviews.facebook.net" created="Fri, 13 Jan 2012 07:15:39 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;


&lt;p&gt;  Address Carl&apos;s comments.&lt;br/&gt;
  Move log4j configuration logic into LogUtils&lt;br/&gt;
  HiveConf provide getters for hiveDefaultURL and hiveSiteURL&lt;br/&gt;
  hive-site location is logged by LogUtils to sequence log/conf initialization&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;</comment>
                            <comment id="13185465" author="phabricator@reviews.facebook.net" created="Fri, 13 Jan 2012 07:21:39 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;


&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt;: Code Cleanup&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;</comment>
                            <comment id="13185740" author="zhenxiao" created="Fri, 13 Jan 2012 18:39:50 +0000"  >&lt;p&gt;Found tests failure&lt;/p&gt;</comment>
                            <comment id="13185776" author="phabricator@reviews.facebook.net" created="Fri, 13 Jan 2012 19:28:40 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;


&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt;: Test Failure fixed&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;</comment>
                            <comment id="13186102" author="phabricator@reviews.facebook.net" created="Sat, 14 Jan 2012 05:40:40 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;


&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt;: TestHiveHistory failure fixed&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;</comment>
                            <comment id="13186862" author="phabricator@reviews.facebook.net" created="Mon, 16 Jan 2012 10:48:40 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java:566 Shouldn&apos;t CliSessionState be initialized after logging is initialized?&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java:565 Better to just call this &quot;conf&quot; instead of &quot;log4jconf&quot;&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:105 Please move this piece of code back to ExecDriver. It&apos;s out of place here.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:87 This code does not belong here.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:102 What about HIVE_EXEC_L4J?&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:119 Please change this method to return void and instead write to the log directly from this method.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:902 Remove this method. Folks can call getPath() on their own.&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java:55 initHiveLog4j can create its own HiveConf object, in which case you don&apos;t need to check to see if the input arg is null. I think this approach is preferable.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13187224" author="phabricator@reviews.facebook.net" created="Mon, 16 Jan 2012 21:50:39 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;


&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt;: Carl&apos;s comments addressed&lt;br/&gt;
              initHiveLog4j() and initHiveExecLog4j() constucts their own HiveConf&lt;br/&gt;
              Log4j init callers&apos; code remains unchanged&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;</comment>
                            <comment id="13249095" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 00:37:14 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt;.  Specify location of log4j configuration files via configuration properties&lt;/p&gt;

&lt;p&gt;  Oozie needs to be able to override the default location of the log4j configuration&lt;br/&gt;
  files from the Hive command line, e.g:&lt;/p&gt;

&lt;p&gt;  hive -hiveconf hive.log4j.file=/home/carl/hive-log4j.properties -hiveconf hive.log4j.exec.file=/home/carl/hive-exec-log4j.properties&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2667&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2667&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveConf.java&lt;br/&gt;
  common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;br/&gt;
  common/src/test/resources/hive-exec-log4j-test.properties&lt;br/&gt;
  common/src/test/resources/hive-log4j-test.properties&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6117/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6117/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13498541" author="ashutoshc" created="Fri, 16 Nov 2012 02:08:54 +0000"  >&lt;p&gt;Patch doesn&apos;t apply cleanly anymore. Zhenxiao, can you please refresh the patch.&lt;/p&gt;</comment>
                            <comment id="13499037" author="cwsteinbach" created="Fri, 16 Nov 2012 19:27:16 +0000"  >&lt;p&gt;@Zhenxiao: Please let me know if you plan to continue working on this ticket. If not I&apos;ll reassign it to someone else. Thanks.&lt;/p&gt;</comment>
                            <comment id="13499635" author="zhenxiao" created="Sun, 18 Nov 2012 07:16:44 +0000"  >&lt;p&gt;@Carl and Ashutosh:&lt;br/&gt;
I will rebase the patch, and resubmit it soon.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13499997" author="zhenxiao" created="Mon, 19 Nov 2012 03:04:02 +0000"  >&lt;p&gt;Updated patch submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D6789&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D6789&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13527271" author="ashutoshc" created="Sat, 8 Dec 2012 21:44:21 +0000"  >&lt;p&gt;+1 will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13527384" author="ashutoshc" created="Sun, 9 Dec 2012 09:36:16 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13527573" author="hudson" created="Sun, 9 Dec 2012 18:39:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1845 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1845/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1845/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; : Specify location of log4j configuration files via configuration properties (Zhenxiao Luo via Ashutosh Chauhan) (Revision 1418858)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418858&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418858&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/org/apache/hadoop/hive/conf/TestHiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/resources/hive-exec-log4j-test.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/resources/hive-log4j-test.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528499" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:27:20 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1131&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1131&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13528507" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:31:20 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, cwsteinbach, zhenxiao&lt;br/&gt;
Cc: cwsteinbach&lt;/p&gt;</comment>
                            <comment id="13528517" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:37:20 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3573&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3573&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13528519" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:37:20 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Specify location of log4j configuration files via configuration properties&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2667&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2667&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13547972" author="hudson" created="Wed, 9 Jan 2013 10:23:48 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2691&quot; title=&quot;Specify location of log4j configuration files via configuration properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2691&quot;&gt;&lt;del&gt;HIVE-2691&lt;/del&gt;&lt;/a&gt; : Specify location of log4j configuration files via configuration properties (Zhenxiao Luo via Ashutosh Chauhan) (Revision 1418858)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418858&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418858&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/common/LogUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/org/apache/hadoop/hive/conf/TestHiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/org/apache/hadoop/hive/conf/TestHiveLogging.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/resources/hive-exec-log4j-test.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/test/resources/hive-log4j-test.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14203653" author="lefty@hortonworks.com" created="Sat, 8 Nov 2014 22:36:03 +0000"  >&lt;p&gt;Doc note:  This added two configuration parameters (&lt;b&gt;hive.log4j.file&lt;/b&gt; and &lt;b&gt;hive.exec.log4j.file&lt;/b&gt;) to HiveConf.java and the template file in 0.11, so they need to be documented in the wiki.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-QueryandDDLExecution&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Query and DDL Execution &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14698132" author="lefty@hortonworks.com" created="Sat, 15 Aug 2015 05:52:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11304&quot; title=&quot;Migrate to Log4j2 from Log4j 1.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11304&quot;&gt;&lt;del&gt;HIVE-11304&lt;/del&gt;&lt;/a&gt; changes the description of &lt;b&gt;hive.log4j.file&lt;/b&gt; for migration to Log4j2 in Hive 2.0.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12685067">OOZIE-1643</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12902174">HIVE-12020</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12509750" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D1131.1.patch" size="19314" author="phabricator@reviews.facebook.net" created="Sat, 7 Jan 2012 00:15:39 +0000"/>
                            <attachment id="12510297" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D1203.1.patch" size="21358" author="phabricator@reviews.facebook.net" created="Thu, 12 Jan 2012 01:39:40 +0000"/>
                            <attachment id="12510465" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D1203.2.patch" size="25488" author="phabricator@reviews.facebook.net" created="Fri, 13 Jan 2012 07:15:40 +0000"/>
                            <attachment id="12510466" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D1203.3.patch" size="25205" author="phabricator@reviews.facebook.net" created="Fri, 13 Jan 2012 07:21:39 +0000"/>
                            <attachment id="12510513" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D1203.4.patch" size="25264" author="phabricator@reviews.facebook.net" created="Fri, 13 Jan 2012 19:28:41 +0000"/>
                            <attachment id="12510562" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D1203.5.patch" size="25276" author="phabricator@reviews.facebook.net" created="Sat, 14 Jan 2012 05:40:41 +0000"/>
                            <attachment id="12510758" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D1203.6.patch" size="23549" author="phabricator@reviews.facebook.net" created="Mon, 16 Jan 2012 21:50:40 +0000"/>
                            <attachment id="12521793" name="ASF.LICENSE.NOT.GRANTED--HIVE-2691.D2667.1.patch" size="23586" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 00:37:15 +0000"/>
                            <attachment id="12531472" name="HIVE-2691.1.patch.txt" size="23260" author="zhenxiao" created="Sat, 9 Jun 2012 00:16:27 +0000"/>
                            <attachment id="12554107" name="HIVE-2691.2.patch.txt" size="23344" author="zhenxiao" created="Mon, 19 Nov 2012 03:04:17 +0000"/>
                            <attachment id="12521794" name="HIVE-2691.D2667.1.patch" size="23586" author="zhenxiao" created="Sat, 7 Apr 2012 00:37:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Jan 2012 00:15:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kmyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118537</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2692] Add compressors for qualitative data types </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2692</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Any data type (int, string et al) for which the frequency of occurrences can be counted (a.k.a. categorical or enumeration types), can be compressed via methods such as huffman, arithmetic and ppm compressors. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12537281">HIVE-2692</key>
            <summary>Add compressors for qualitative data types </summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12503539">HIVE-2097</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="n_krishna_kumar">Krishna Kumar</assignee>
                                    <reporter username="n_krishna_kumar">Krishna Kumar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jan 2012 04:27:00 +0000</created>
                <updated>Thu, 5 Jan 2012 04:27:00 +0000</updated>
                                                                            <component>Contrib</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2693] Add DECIMAL data type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2693</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Add support for the DECIMAL data type. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2272&quot; title=&quot;add TIMESTAMP data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2272&quot;&gt;&lt;del&gt;HIVE-2272&lt;/del&gt;&lt;/a&gt; (TIMESTAMP) provides a nice template for how to do this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12537384">HIVE-2693</key>
            <summary>Add DECIMAL data type</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadm">Prasad Mujumdar</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jan 2012 19:05:03 +0000</created>
                <updated>Sun, 18 May 2014 07:35:28 +0000</updated>
                            <resolved>Wed, 16 Jan 2013 23:05:25 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Query Processor</component>
                    <component>Types</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>23</watches>
                                                                                                            <comments>
                            <comment id="13274020" author="ransom" created="Sat, 12 May 2012 14:23:47 +0000"  >&lt;p&gt;greate! date type should also be supportted.&lt;/p&gt;</comment>
                            <comment id="13293088" author="cwsteinbach" created="Mon, 11 Jun 2012 21:13:25 +0000"  >&lt;p&gt;Review request from a while ago: &lt;a href=&quot;https://reviews.facebook.net/D1221&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1221&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13293131" author="jwills" created="Mon, 11 Jun 2012 22:08:58 +0000"  >&lt;p&gt;The old version of this change.&lt;/p&gt;</comment>
                            <comment id="13484567" author="vikram.dixit" created="Thu, 25 Oct 2012 23:18:32 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I was trying out this patch and found that it is missing some of the classes. Specifically BigDecimalWritable, BigDecimalObjectInspector (org.apache.hadoop.hive.serde2.objectinspector.primitive.BigDecimalObjectInspector), WritableBigDecimalObjectInspector (org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableBigDecimalObjectInspector), JavaBigDecimalObjectInspector are missing. Would it be possible to update this patch. Is anyone working on this? It seems like a local git commit is the likely cause for this as Carl pointed out in the review.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Vikram.&lt;/p&gt;</comment>
                            <comment id="13484627" author="jwills" created="Fri, 26 Oct 2012 01:02:40 +0000"  >&lt;p&gt;Hey Vikram-- sorry about that, I haven&apos;t paid much attention to this issue. How does this patch work for you?&lt;/p&gt;</comment>
                            <comment id="13484639" author="vikram.dixit" created="Fri, 26 Oct 2012 01:17:46 +0000"  >&lt;p&gt;Hey Josh, Thank you for your response. I still get errors when I apply this patch. The class - BigDecimalWritable is missing in the repository. The changes specified for this class does not apply.&lt;/p&gt;</comment>
                            <comment id="13484663" author="jwills" created="Fri, 26 Oct 2012 03:04:49 +0000"  >&lt;p&gt;One more try.&lt;/p&gt;</comment>
                            <comment id="13484687" author="vikram.dixit" created="Fri, 26 Oct 2012 04:13:32 +0000"  >&lt;p&gt;Patch applied fine but when I try to compile the change, I see that the WritableBigDecimalObjectInspector class is missing.&lt;/p&gt;</comment>
                            <comment id="13484752" author="jwills" created="Fri, 26 Oct 2012 07:03:12 +0000"  >&lt;p&gt;This compiles and makes it to the test phase before I started running into errors, but I can&apos;t tell if it&apos;s a problem w/the patch or my test harness. In any case, that&apos;s enough work on it for tonight.&lt;/p&gt;</comment>
                            <comment id="13485105" author="vikram.dixit" created="Fri, 26 Oct 2012 18:38:41 +0000"  >&lt;p&gt;I tried the latest patch and it builds successfully. However, I cannot run any tests because there seems to be something broken in the parser. Posting the error below:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; FAILED: ParseException line 1:23 cannot recognize input near &apos;&apos;/grid/0/hive/BigD/data/files/kv1.txt&apos;&apos; &apos;(&apos; &apos;&apos;2008-04-08&apos;&apos;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.lang.Exception: load command: LOAD DATA LOCAL INPATH &apos;/grid/0/hive/BigD/data/files/kv1.txt&apos; OVERWRITE INTO TABLE srcpart PARTITION (ds=&apos;2008-04-08&apos;,hr=&apos;11&apos;) failed with exit code= 40000&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.QTestUtil.runLoadCmd(QTestUtil.java:468)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.QTestUtil.createSources(QTestUtil.java:512)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.cli.TestCliDriver.&amp;lt;clinit&amp;gt;(TestCliDriver.java:55)&lt;/p&gt;</comment>
                            <comment id="13485144" author="jwills" created="Fri, 26 Oct 2012 19:35:09 +0000"  >&lt;p&gt;Hrm, I&apos;m not seeing that. I&apos;m just doing &apos;ant package&apos; followed by &apos;ant test&apos;-- I assume you&apos;re doing the same?&lt;/p&gt;</comment>
                            <comment id="13485156" author="vikram.dixit" created="Fri, 26 Oct 2012 20:02:44 +0000"  >&lt;p&gt;Yes. For the test however, I am running ant test -Dtestcase=TestCliDriver -Dqfile=decimal_1.q. However, I see this error even when I run ant test -Dtestcase=TestCliDriver. I ran the compilation step after cleaning up my m2 and ivy caches.&lt;/p&gt;</comment>
                            <comment id="13485254" author="jwills" created="Fri, 26 Oct 2012 22:51:58 +0000"  >&lt;p&gt;Latest and greatest.&lt;/p&gt;</comment>
                            <comment id="13487004" author="jwills" created="Tue, 30 Oct 2012 16:48:42 +0000"  >&lt;p&gt;Comments/feedback?&lt;/p&gt;</comment>
                            <comment id="13487108" author="vikram.dixit" created="Tue, 30 Oct 2012 18:35:00 +0000"  >&lt;p&gt;Hi Josh, I have been able to successfully build and run the tests contained in this patch. However, I see a few failures (4 in total) related to some UDF tests - udf_div.q, udf_round.q, ql_rewrite_gbtoidx.q, udf7.q.&lt;/p&gt;</comment>
                            <comment id="13487278" author="vikram.dixit" created="Tue, 30 Oct 2012 21:41:44 +0000"  >&lt;p&gt;org.apache.hadoop.hive.ql.parse.SemanticException: Line 3:36 Wrong arguments &apos;TOK_NULL&apos;: Ambiguous method for class org.apache.hadoop.hive.ql.udf.UDFRound with (int, void). Possible choices: &lt;em&gt;FUNC&lt;/em&gt;(double)  &lt;em&gt;FUNC&lt;/em&gt;(double, int)  &lt;em&gt;FUNC&lt;/em&gt;(decimal, int)&lt;br/&gt;
  at org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.process(TypeCheckProcFactory.java:914)&lt;/p&gt;

&lt;p&gt;Similar errors in the others.&lt;/p&gt;</comment>
                            <comment id="13488240" author="vikram.dixit" created="Wed, 31 Oct 2012 21:19:02 +0000"  >&lt;p&gt;Hi Josh, I found the issue. The getMethodInternal api within the FunctionRegistry class iterates over all the apis within a class say UDFRound and finds the api with the lowest conversion cost to use for the subsequent operations. Since the addition of the big decimal evaluate api in the UDFRound class, there is now a collision between the Double and Big decimal evaluate apis since both have the same conversion cost. One way I think we can fix this is to add an enum of conversion precedence in the functionregistry class. The precedence order can be:&lt;/p&gt;

&lt;p&gt;BigDecimal &amp;gt; Double &amp;gt; Float &amp;gt; Long &amp;gt; Int &amp;gt; boolean. If we see a collision, we can resolve it in favor of the broadest (most accepting) object which in this case is BigDecimal. Let me know what you think and also if you have time to work on it.&lt;/p&gt;</comment>
                            <comment id="13488283" author="jwills" created="Wed, 31 Oct 2012 22:02:10 +0000"  >&lt;p&gt;Hey Vikram-- I&apos;m a bit swamped at the moment and we&apos;re pushing the limits of my knowledge of Hive internals. Would you or someone else like to take a crack at it?&lt;/p&gt;</comment>
                            <comment id="13488946" author="vikram.dixit" created="Thu, 1 Nov 2012 19:11:30 +0000"  >&lt;p&gt;Ok. I will look into this error.&lt;/p&gt;</comment>
                            <comment id="13489644" author="vikram.dixit" created="Fri, 2 Nov 2012 18:49:17 +0000"  >&lt;p&gt;Hi Josh,&lt;/p&gt;

&lt;p&gt;Can you tell me why in the UDFRound.java, the math context is being initialized with the formula bd.precision() - (bd.scale() - i.get())? This is causing some issues with respect to calls such as round(55555, -6) etc. The reason is the bigdecimal constructor sets precision by default to the number of digits of the integer passed into it. In this case for 55555, it is set to 5 and the scale by default is 0. This implies that for this case, the formula above results in a negative number that the mathcontext constructor cannot take. I am not sure what the behavior should be?&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Vikram.&lt;/p&gt;</comment>
                            <comment id="13489650" author="jwills" created="Fri, 2 Nov 2012 18:54:03 +0000"  >&lt;p&gt;For the life of me, I do not remember-- if there&apos;s something that makes sense, by all means, change it up.&lt;/p&gt;</comment>
                            <comment id="13490477" author="vikram.dixit" created="Mon, 5 Nov 2012 06:40:29 +0000"  >&lt;p&gt;Updated patch with fixes for the failed unit-tests.&lt;/p&gt;</comment>
                            <comment id="13490479" author="mgrover" created="Mon, 5 Nov 2012 06:53:16 +0000"  >&lt;p&gt;Can someone update the review please?&lt;/p&gt;</comment>
                            <comment id="13490481" author="vikram.dixit" created="Mon, 5 Nov 2012 07:04:23 +0000"  >&lt;p&gt;With this latest patch, I see all the failed tests passing. I have just started a run of the entire test suite just to be sure I did not break anything. There is one issue however. The mysql round function behavior does not seem to be reproducible via the bigdecimal round function. The round function takes a math context object whose scale can only be a positive integer and this results in some inconsistent results. The currently existing double-based method is producing the expected results in accordance with the mysql response. I am not sure which way the coin should drop in this case. Bigdecimal&apos;s primary use case is to have higher precision but, the round operation is not entirely compatible with the current mysql standard. As an err on the mysql side strategy, I have taken the approach of sticking to the current double based round api. Based on consensus in the hive community, I can add back the capability to go the big decimal route or if anyone knows how to tune the bigdecimal to round the way mysql does it, I would be happy to correct/use that.&lt;/p&gt;

&lt;p&gt;Apart from this change, I have also had to refactor the code in FunctionRegistry to be able to choose a &apos;higher denominator&apos; api over a lower one as alluded to in the comment above. This was required for the logarithm udf function. I have refactored things in such a way that new apis can easily be added that uses the already existing hierarchy without the user having to get caught in these internals.&lt;/p&gt;</comment>
                            <comment id="13495108" author="vikram.dixit" created="Mon, 12 Nov 2012 05:51:42 +0000"  >&lt;p&gt;Updated to apply on latest trunk.&lt;/p&gt;</comment>
                            <comment id="13495865" author="ashutoshc" created="Tue, 13 Nov 2012 02:18:59 +0000"  >&lt;p&gt;@Vikram, Patch still doesn&apos;t apply. Can you update the patch. Also, note that you need to install thrift-0.9.0 now after we updated from thrift-0.7. Also, can you please create a phabricator or review board review request?&lt;/p&gt;</comment>
                            <comment id="13496820" author="vikram.dixit" created="Wed, 14 Nov 2012 03:43:06 +0000"  >&lt;p&gt;Latest update with Ashutosh&apos;s comments addressed.&lt;/p&gt;</comment>
                            <comment id="13496826" author="vikram.dixit" created="Wed, 14 Nov 2012 03:48:55 +0000"  >&lt;p&gt;Patch needs review.&lt;/p&gt;</comment>
                            <comment id="13496836" author="vikram.dixit" created="Wed, 14 Nov 2012 04:09:16 +0000"  >&lt;p&gt;Review board url:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/8049/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/8049/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13497546" author="ashutoshc" created="Wed, 14 Nov 2012 22:43:23 +0000"  >&lt;p&gt;Vikram, I left some comments on RB.&lt;/p&gt;</comment>
                            <comment id="13497941" author="cdub" created="Thu, 15 Nov 2012 11:16:59 +0000"  >&lt;p&gt;Ignore: just testing to see if JIRA contributors can attach files...&lt;/p&gt;</comment>
                            <comment id="13497946" author="cwsteinbach" created="Thu, 15 Nov 2012 11:24:21 +0000"  >&lt;p&gt;@Vikram: Just spoke with Josh and found out that he doesn&apos;t have time to work on this. I&apos;m reassigning this to Prasad since he&apos;s already working on this patch and has done some additional changes that are needed for the JDBC driver. Let me know if you want to work on this too and we can find some way to collaborate. Thanks.&lt;/p&gt;</comment>
                            <comment id="13498098" author="vikram.dixit" created="Thu, 15 Nov 2012 16:09:37 +0000"  >&lt;p&gt;Hi Carl, I have already done some work with regard to review comments. I am planning to continue to work on this. Let me know how you want to proceed. Thanks Vikram.&lt;/p&gt;</comment>
                            <comment id="13498110" author="ashutoshc" created="Thu, 15 Nov 2012 16:26:54 +0000"  >&lt;p&gt;Vikram,&lt;br/&gt;
Current patch also lacks test coverage. Please add following tests:&lt;br/&gt;
a) Test which loads data in the table having decimal column via reading from text file.&lt;br/&gt;
b) Test which does group-by / join on decimal column.&lt;/p&gt;</comment>
                            <comment id="13498411" author="prasadm" created="Thu, 15 Nov 2012 22:38:35 +0000"  >&lt;p&gt;Here&apos;s the updated patch with test updates, additional patches for failed tests and JDBC support -&lt;br/&gt;
There were a few tests still failing, like clientnegative/invalid_cast_from_binary_&lt;span class=&quot;error&quot;&gt;&amp;#91;1-6&amp;#93;&lt;/span&gt; which required out file updates.&lt;br/&gt;
The patch 7&amp;amp;8 removed decimal round function which breaks things like round(int/int) and also round(decimal), so its added back. Also added JDBC support for handling decimal type data and metadata which was missing in Josh&apos;s original patch. I will log a separate ticket for HiveServer2 driver once both the patches are committed.&lt;/p&gt;

&lt;p&gt;I think the outstanding issue is the implicit type conversion for UDFs. Firstly this changes expressions like (int/int) from double to decimal. This could be a problem of existing clients like ODBC, perl and python which expect this to be a double. Besides this leads to inconsistent behavior on division by 0, for example 1.1/0.0 stays NaN but 1/0 throws exception since it gets promoted by division of decimal which behaves differently from double. The BigDecimal throws an exception in case of division by 0. I added a couple of patches and modified the udf_round_2 test so that it returns NULL (which is also MySQL default behavior). Perhaps we should change the other cases also to from NaN to NULL and support a configuration option to fall back to old behavior (which can be done in a separate patch).&lt;/p&gt;

&lt;p&gt;@Vikram, we can collaborate on this. You can  add your new changes on top of it and update on reviewboard.&lt;/p&gt;</comment>
                            <comment id="13533646" author="mgrover" created="Mon, 17 Dec 2012 04:44:43 +0000"  >&lt;p&gt;I was playing around with this and noticed that group by on Decimal column doesn&apos;t work because BinarySortableSerDe doesn&apos;t support DECIMAL type. It&apos;s questionable if it would ever support it since BigDecimal is arbitrarily long and BinarySortableSerDe dictates data to be serialized so that the value can be compared byte by byte with the same order. That would have been ok but it seems like &lt;tt&gt;getReduceKeyTableDesc&lt;/tt&gt; in &lt;tt&gt;PlanUtils.java&lt;/tt&gt; is hardcoded to use BinarySortableSerDe. I will have to poke around some more to see how Group By can be made to work with Decimal type (backed by BigDecimal).&lt;/p&gt;

&lt;p&gt;In any case, the last patch didn&apos;t apply cleanly on trunk, so I fixed some merge conflicts and am attaching a new patch (#11) which is a refresh of patch 10 that applies cleanly on trunk as of today.&lt;/p&gt;</comment>
                            <comment id="13533647" author="mgrover" created="Mon, 17 Dec 2012 04:45:12 +0000"  >&lt;p&gt;Refresh of patch 10.&lt;/p&gt;</comment>
                            <comment id="13534221" author="hagleitn" created="Mon, 17 Dec 2012 19:45:05 +0000"  >&lt;p&gt;It should be possible to serialize a big decimal as &amp;lt;sign&amp;gt;&amp;lt;scale&amp;gt;&amp;lt;length&amp;gt;&amp;lt;int-digits&amp;gt;. That way the natural ordering should be preserved at the binary level.&lt;/p&gt;</comment>
                            <comment id="13534241" author="hagleitn" created="Mon, 17 Dec 2012 19:59:35 +0000"  >&lt;p&gt;Actually, that&apos;s not going to work because of the length. But for this case I don&apos;t think we need to encode the length. Hive key will put the stuff in a byteswritable and skip the length header on comparison.&lt;/p&gt;

&lt;p&gt;Also &amp;lt;sign&amp;gt; has to be 1 for positive 0 for negative (to preserve order) and &amp;lt;scale&amp;gt; has to be negated for negative numbers.&lt;/p&gt;</comment>
                            <comment id="13534290" author="hagleitn" created="Mon, 17 Dec 2012 20:53:03 +0000"  >&lt;p&gt;Wrong again, but getting closer. The length of strings/byte arrays are encoded with trailing &quot;\0&quot; in BinarySortableSerDe. So the encoding should be&lt;/p&gt;

&lt;p&gt;&amp;lt;sign byte&amp;gt;&amp;lt;sale int&amp;gt;&amp;lt;string of digits&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;sign byte&amp;gt;: 1 for &amp;gt;= 0, 0 for &amp;lt;0&lt;br/&gt;
&amp;lt;scale&amp;gt;: scale integer if sign byte 1, -scale integer otherwise&lt;br/&gt;
&amp;lt;string of digits&amp;gt;: Zero terminated string of digits&lt;/p&gt;

&lt;p&gt;I&apos;m trying this out right now. &lt;/p&gt;</comment>
                            <comment id="13534319" author="mgrover" created="Mon, 17 Dec 2012 21:25:51 +0000"  >&lt;p&gt;Thanks for your comments, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;. Yeah, the right thing moving forward would be to update BinarySortableSerDe to support BigDecimal. When I thinking of the best way to serialize BigDecimal, the sign and scale part were easy but I wasn&apos;t able to come up with a space efficient way to store and arbitrary number of digits so they are in-order byte sortable. Correct me if I am wrong but seems like you are suggesting 1 byte per digit which would work (if the lengths are equal) but can be dangerous since we are &quot;exploding&quot; an arbitrarily long integer. Having said that, given Hive&apos;s historical philosophy of ignoring malicious intent users, I am ok with moving forward with that approach.&lt;/p&gt;

&lt;p&gt;On a related note, let&apos;s talk about the scale.&lt;br/&gt;
13267 has a scale of 0 and digits 13267&lt;br/&gt;
132.67 has a scale of 2 and digits 13267&lt;br/&gt;
132670 has a scale of -1 and digits 13267&lt;/p&gt;

&lt;p&gt;So, it seems like the lower scale always means bigger number for positive numbers, so shouldn&apos;t we do&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;scale&amp;gt;: -scale &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; positive numbers (sign &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; 1) and scale &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; negative numbers (sign &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; 0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;scale&amp;gt;: scale integer &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; sign &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; 1, -scale integer otherwise
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which you suggested in your previous comment. I am basically asking to flip it around since negative numbers have sign byte 0 and positive have sign byte.&lt;br/&gt;
BTW, feel free to contact me offline if you want to bounce around some ideas!&lt;/p&gt;</comment>
                            <comment id="13534762" author="hagleitn" created="Tue, 18 Dec 2012 08:49:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;-12-SortableSerDe.patch adds DECIMAL decimal to the LazySortableSerDe. It also adds tests for order by asc/desc, group by, distinct and join.&lt;/p&gt;

&lt;p&gt;The serialization is similar as described before: &amp;lt;sign&amp;gt;&amp;lt;factor&amp;gt;&amp;lt;digits&amp;gt;&lt;/p&gt;

&lt;p&gt;where:&lt;br/&gt;
&amp;lt;sign&amp;gt; = -1,0,1 (zero has it&apos;s own sign now)&lt;br/&gt;
&amp;lt;factor&amp;gt; = factor is the position of the first digit before the decimal point (&amp;gt;1) or the first non zero after the decimal point&lt;br/&gt;
&amp;lt;digits&amp;gt; = string of digits of the number without the decimal point&lt;/p&gt;</comment>
                            <comment id="13534942" author="mgrover" created="Tue, 18 Dec 2012 14:56:21 +0000"  >&lt;p&gt;Thanks for contributing, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;! I am just about to take a closer look at your latest patch but like we discussed offline, a better packed byte (with radix 256) might be a better solution to a digit (i.e. a radix 10) based serialization. Since we would need a sentinel character for terminating this arbitrary long sequence of bytes (regardless of what radix we use), we have 2 options:&lt;br/&gt;
A. To use a smaller radix and reserve a particular byte as a terminator&lt;br/&gt;
B. To use a larger radix (like 256) and have certain escape character to escape in the terminator if it appears in the content, similar to what we have for string.&lt;/p&gt;

&lt;p&gt;I would prefer the latter (option B). Any particular concerns from anybody about that?&lt;/p&gt;</comment>
                            <comment id="13535044" author="mgrover" created="Tue, 18 Dec 2012 16:57:46 +0000"  >&lt;p&gt;I added some test data and more tests to patch12 and found a few more interesting issues:&lt;br/&gt;
1. I added new tests related to where clauses. The where clause doesn&apos;t seem to be working as expected. I will take another look to see if I am doing something wrong but that&apos;s my first impression anyways.&lt;br/&gt;
2. I added more test data where the decimal column has values like 3.14 and 3.140. This is an interesting case since we would like to maintain compatibility with MySQL where possible. If I remember correctly (from a few days ago when I tried it), MySQL considers 3.14 and 3.140 to be equivalent. Therefore, they would be considered the same in equi-join, where clauses, etc. This addition of a new data led me to see that order by is non-deterministic when done over a decimal column. Again something, we should look more into. FWIW, 3.14 are correctly being joined to 3.140 rows, so that&apos;s good!&lt;br/&gt;
3. I added some more test data with NULLs for the decimal column to make sure those were being read and handled properly when the table was being loaded.&lt;br/&gt;
I will submit a new patch with these added tests and data shortly.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt; About patch 12, do we need to have a separate sign (0) for zero? Would it not suffice for it to use the same sign as positive numbers? That would make it consistent with other datatypes as well. Been having a little busy morning but will review the rest of the patch shortly!&lt;/p&gt;</comment>
                            <comment id="13535127" author="mgrover" created="Tue, 18 Dec 2012 18:28:21 +0000"  >&lt;p&gt;Based on top off patch 12 but has more tests, some more interesting test data. Also, takes out an extraneous file Hive.g.orig which shouldn&apos;t be present in the patch.&lt;/p&gt;</comment>
                            <comment id="13535191" author="mgrover" created="Tue, 18 Dec 2012 19:29:03 +0000"  >&lt;p&gt;Ok, took a better look at a patch 12. Looks good overall.&lt;br/&gt;
On second thought, radix 10 is good for now. I am not going to vouch for unnecessary optimization unless there is evidence that we need to. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;&lt;br/&gt;
1. I understand the intent of +/- 2 you are doing to the sign bit. Is that really necessary? Sure, you can have a sign that is the same as terminator but the terminator is not considered until you get to the variable length part. What do you think?&lt;br/&gt;
2. Were you able to test out your serialization and deserialization code? We should make sure it works the way we expect? Do you need some help with testing that?&lt;/p&gt;

&lt;p&gt;So, once we can fix the issues I mentioned in the previous comment (where clauses, deterministic order by), we should be good to review and post.&lt;br/&gt;
Thanks again!&lt;/p&gt;</comment>
                            <comment id="13535252" author="hagleitn" created="Tue, 18 Dec 2012 20:05:18 +0000"  >&lt;p&gt;Mark, thanks for the additional tests, I&apos;ll take a closer look this afternoon.&lt;/p&gt;

&lt;p&gt;To answer the questions:&lt;/p&gt;

&lt;p&gt;1: I introduced +/-2 when I was at a point in the debugging stage where paranoia took over. I can remove that, it&apos;ll make the code more readable.&lt;br/&gt;
2: It is only implicitly tested in all the queries that use a reduce stage. I agree that a test of just that code would be good. Is there a place in the current unit tests that already does that/that I could use as a model?&lt;/p&gt;

&lt;p&gt;Sign bit: I introduced a value for zero to avoid a &quot;factor&quot; of negative infinity. If you lump 0 into either the positive or negative bucket it would become the number that has an infinite number of zeros before the first non-zero digit (after the decimal point). MIN_INT might have been an option, but it seems cleaner to just make the sign have three states (-1,0,1). BigDecimal class in Java itself for instance more or less randomly defines precision of 0 (i.e.: number of unscaled digits) as 1. &lt;/p&gt;

&lt;p&gt;Non-deterministic order: 3.14 and 3.140 are indeed equal. Their representation should be exactly the same (&amp;lt;1&amp;gt;,&amp;lt;1&amp;gt;,&amp;lt;314&amp;gt;). Given that, I&apos;m not sure how to enforce a deterministic order or even what that would be. Are you suggesting 3.14 should always appear before 3.140?&lt;/p&gt;

&lt;p&gt;I am worried about your comments about the where clause. I&apos;ll take a look at the tests. But you say it&apos;s not working right?&lt;/p&gt;</comment>
                            <comment id="13535407" author="mgrover" created="Tue, 18 Dec 2012 22:31:32 +0000"  >&lt;p&gt;1. Yeah, let&apos;s take the +/- 2 out please.&lt;br/&gt;
2. I am not aware of any such unit tests at the top of my head. I can try to poke around the code and see if I find something, will post if I find something. It probably wouldn&apos;t be until tomorrow.&lt;/p&gt;

&lt;p&gt;I didn&apos;t realize that about the sign bit. Yeah, (-1,0,1) is good then.&lt;/p&gt;

&lt;p&gt;Non-deterministic order: You are right they that are equal (and they should be). However, if you diff patch12 patch13, you will find the order in which order by displayed 1.0 and 1 got switched. The only thing that changed was me adding some data. All I would expect is for the order to remain consistent and deterministic which doesn&apos;t seem to be the case presently.&lt;/p&gt;

&lt;p&gt;One thing that did stand out was in serialize()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;BigDecimal dec = boi.getPrimitiveJavaObject(o).stripTrailingZeros();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;stripTrailingZeros() seems interesting. I am just handwaving right now, need to look more before I can assert further but could this be a part of the problem?&lt;/p&gt;

&lt;p&gt;Yeah, where clause is not working. The tests didn&apos;t give the expected output. Consequently, I tested using the Hive CLI (which I built after applying the patch) and it doesn&apos;t work on that either. You&apos;re welcome to take a look, I will try to find some time tonight or tomorrow morning to look into this as well.&lt;br/&gt;
These two problems might be related but look at this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; select &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(3.14 as decimal) from decimal_3 limit 1;
3.140000000000000124344978758017532527446746826171875
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That doesn&apos;t look right to me&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13535453" author="hagleitn" created="Tue, 18 Dec 2012 23:35:05 +0000"  >&lt;p&gt;Ordering: The stripTrailingZeros() does not change the value of the BigDecimal and therefore doesn&apos;t change the serialized output. I don&apos;t think this is the culprit. The order of the output depends on what hadoop does in the shuffle/sort phase. My guess is that since you changed the input the results that mapred came up with where different. Hadoop doesn&apos;t guarantee stable sort afaik.&lt;/p&gt;

&lt;p&gt;Where clause: Yes, it&apos;s one and the same problem. We end up comparing 3.14 with 3.140000...1243... Still debugging but it seems we&apos;re going through double on the way to BigDecimal which changes the number.&lt;/p&gt;</comment>
                            <comment id="13535519" author="hagleitn" created="Wed, 19 Dec 2012 00:57:38 +0000"  >&lt;p&gt;Ok. I think I&apos;ve convinced myself that the cast statement above is executed correctly, but the result is definitely not very intuitive.&lt;/p&gt;

&lt;p&gt;When you say: &quot;cast (3.14 as decimal)&quot; you ask hive to convert the double 3.14 to a bigdecimal in unlimited context, i.e. no rounding. Thus 3.1400001234... is correct. If you ask &quot;cast(&apos;3.14&apos; as decimal)&quot; you get 3.14. Which is what you want. Rounding would be another option.&lt;/p&gt;

&lt;p&gt;There was a similar issue with big integer: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2509&quot; title=&quot;Literal bigint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2509&quot;&gt;&lt;del&gt;HIVE-2509&lt;/del&gt;&lt;/a&gt;. They &apos;solved&apos; the problem by at least having a shorthand for big int literals (i.e.: 0L). BigDecimal should at the very least allow something like that too. E.g.: 3.14D or 3.14BD.&lt;/p&gt;

&lt;p&gt;So, should we just introduce a literal shorthand and leave the behavior as is?&lt;/p&gt;</comment>
                            <comment id="13535523" author="hagleitn" created="Wed, 19 Dec 2012 01:01:53 +0000"  >&lt;p&gt;One more thing. It would be great to stop auto-converting double to decimal. &quot;WHERE decimal_column = 3.14&quot; should preferably fail in the semantic analysis, so that any user would know that they have to cast from string or use a short hand.&lt;/p&gt;</comment>
                            <comment id="13535526" author="mgrover" created="Wed, 19 Dec 2012 01:04:18 +0000"  >&lt;p&gt;Fair enough. I would say let&apos;s not worry about the literal in this JIRA. We can create another JIRA and deal with it separately. I personally don&apos;t think it&apos;s a big deal because the 3.14 had it been read from a file in HDFS (when doing say &apos;LOCAL DATA IN PATH&apos;), would have been correctly interpreted as a BigDecimal.&lt;/p&gt;

&lt;p&gt;Good point about the hadoop shuffle/sort not being stable, I was hoping it was but I can see why it&apos;s not.&lt;/p&gt;

&lt;p&gt;So, that leaves us with a hurdle and a half:&lt;br/&gt;
1: where clause&lt;br/&gt;
0.5: rigorous testing of serialization and deserialization code for Decimal type.&lt;/p&gt;</comment>
                            <comment id="13535532" author="mgrover" created="Wed, 19 Dec 2012 01:13:53 +0000"  >&lt;p&gt;That actually explains why where clauses aren&apos;t working because we are comparing BigDecimal with Double.&lt;br/&gt;
I tried the same where clause but with a string and that worked:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT * FROM DECIMAL_3 WHERE key=&lt;span class=&quot;code-quote&quot;&gt;&apos;3.14&apos;&lt;/span&gt;;
3.14	3
3.14	3
3.14	3
3.140	4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, here is the million dollar question. Our users (understandably so) are going to forget about the quotes. Even if we introduce a new literal as a part of this JIRA, they are going to forget about the literal. I can think of two options:&lt;br/&gt;
1. Somehow promote the double 3.14 to be a BigDecimal 3.14 (maintaining precision). Maybe via a double-&amp;gt;string-&amp;gt;BigDecimal?&lt;br/&gt;
2. Throw an error like you suggested.&lt;/p&gt;

&lt;p&gt;What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13535538" author="mgrover" created="Wed, 19 Dec 2012 01:21:25 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3820&quot; title=&quot;Consider creating a literal like &amp;quot;D&amp;quot; or &amp;quot;BD&amp;quot; for representing Decimal type constants&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3820&quot;&gt;&lt;del&gt;HIVE-3820&lt;/del&gt;&lt;/a&gt; for the Decimal type literal.&lt;/p&gt;</comment>
                            <comment id="13535548" author="hagleitn" created="Wed, 19 Dec 2012 01:41:41 +0000"  >&lt;p&gt;Solution Number 1 would be nice, but I don&apos;t think we&apos;ll be able to do that. Any time we convert to double in an intermediate step we lose precision - and I don&apos;t think it can be recovered by using string or anything else afterwards. That seems to be just in the nature of floating point operations. We could round to fewer digits in the conversion for instance, but that will probably just cause issues elsewhere.&lt;/p&gt;

&lt;p&gt;Not converting to double also seems a bad choice. That would change some very fundamental behavior in hive. All of a sudden &quot;select 3.14 * 2 ...&quot; would return BigDecimal instead of double. Not good.&lt;/p&gt;

&lt;p&gt;So, I am in favor of throwing an error. At least we&apos;ll fail early and don&apos;t send users on a wild goose chase. Although it&apos;s not ideal either: The where clause issue wouldn&apos;t have happened for instance. But we probably don&apos;t want to bar explicit casts (&quot;cast (3.14 as decimal)&quot;) even though they probably won&apos;t do what anyone thinks they do. Or do we want to disallow them?&lt;/p&gt;</comment>
                            <comment id="13535666" author="mgrover" created="Wed, 19 Dec 2012 05:37:07 +0000"  >&lt;p&gt;I figured out why CAST(3.4 as DECIMAL) doesn&apos;t work as expected. It&apos;s because there is a no UDF equivalent to UDFToDouble (we should call it UDFToDecimal) that would do the cast from double to decimal. The associated implicit costs of conversions need to be updated in FunctionRegistry as well for the newly introduced decimal type. I am working on a patch. Will keep you posted!&lt;/p&gt;</comment>
                            <comment id="13535817" author="hagleitn" created="Wed, 19 Dec 2012 09:34:47 +0000"  >&lt;p&gt;Very cool. So there is a way directly from string to decimal in casts? Looking forward to it.&lt;/p&gt;</comment>
                            <comment id="13535820" author="hagleitn" created="Wed, 19 Dec 2012 09:39:54 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changed +/-2 in serialization of sign to +/-1. Can&apos;t change it to just use the output of compareTo, because the negative value will be sorted incorrectly.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added BigDecimal to TestStatsSerde, TestLazyBinarySerde and (most importantly) to TestSortableBinarySerde. This does roundtrip serialization/deserialization of a large struct and should cover the requested testing.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fixed bug found with TestSortableBinarySerde. Good call on the additional testing. Nasty bug.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changed BigDecimalWritable.equals. It uses compareTo == 0 now. With big decimals equals is not compatible with compareTo.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added BigDecimal as the java object for Decimal in PrimitiveTypeEntry to make the reflection based objectinspector work.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13536251" author="mgrover" created="Wed, 19 Dec 2012 18:29:24 +0000"  >&lt;p&gt;Gunther, to answer your former question. Yes, the trick is to convert double(by default)-&amp;gt; String -&amp;gt; BigDecimal in the casting code. I just verified with my latest changes that cast(3.4 as decimal) gives the correct precise BigDecimal. An added benefit of this is that where clause are now working. No quotes or literals required. Let me tidy up a few loose ends and I will post the patch up.&lt;/p&gt;

&lt;p&gt;About your latest patch, thanks for the testing more. I agree that we should use compareTo over equals. There is another place where equals() is being used in PrimitiveObjectInspectorUtils.java I will change that to compareTo() in my next patch. Was the nasty bug you are referring to related to equals/compareTo inconsistency?&lt;/p&gt;

&lt;p&gt;Thanks again, patch coming soon.&lt;/p&gt;</comment>
                            <comment id="13536334" author="hagleitn" created="Wed, 19 Dec 2012 19:25:08 +0000"  >&lt;p&gt;The nasty bug was that the deserialization code didn&apos;t read the final byte. Which works fine if you serialize only one column but generates incorrect results in the general case.&lt;/p&gt;</comment>
                            <comment id="13536361" author="mgrover" created="Wed, 19 Dec 2012 19:56:37 +0000"  >&lt;p&gt;Latest patch that makes where clause, casts to decimal types work. I added more tests too. This patch is rebased on top of patch14 so includes all bug fixes from there as well. We are ready for review!&lt;/p&gt;</comment>
                            <comment id="13536369" author="mgrover" created="Wed, 19 Dec 2012 20:04:21 +0000"  >&lt;p&gt;New review at &lt;a href=&quot;https://reviews.facebook.net/D7491&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7491&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13536389" author="hagleitn" created="Wed, 19 Dec 2012 20:22:59 +0000"  >&lt;p&gt;Mark,&lt;/p&gt;

&lt;p&gt;If the conversion code goes through double -&amp;gt; String -&amp;gt; BigDecimal, I think it&apos;s basically rounding the result of the operation. You can achieve the same by setting the MathContext in the BigDecimal. That might seem better, but still causes issues. For instance: BigDecimal(Double.parseDouble(String.valueOf(&quot;0.99999999999999999&quot;)) = 1.0 and BigDecimal(&quot;0.99999999999999999&quot;) = 0.99999999999999999.&lt;/p&gt;

&lt;p&gt;Maybe documenting that we&apos;re rounding to a specific precision is the way forward, but I still think that not implicitly casting + error is the safer choice.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13536632" author="mgrover" created="Thu, 20 Dec 2012 00:18:29 +0000"  >&lt;p&gt;Gunther, I see where you are coming from. However, in my opinion, a closer analogy is &lt;tt&gt;new BigDecimal(Double.valueOf(&quot;0.99999999999999999&quot;).toString())&lt;/tt&gt; which is what&apos;s being done instead of &lt;tt&gt;new BigDecimal(Double.valueOf(&quot;0.99999999999999999&quot;))&lt;/tt&gt; which was being done previously.&lt;/p&gt;

&lt;p&gt;I am inclined towards keeping the present behavior and documenting it. However, if you feel strongly about not implicitly casting, I am happy to reconsider.&lt;/p&gt;</comment>
                            <comment id="13536660" author="hagleitn" created="Thu, 20 Dec 2012 01:15:39 +0000"  >&lt;p&gt;No, I don&apos;t feel strongly. I was playing with your patch this afternoon and am starting to think this is better. For instance, one would run into the same problem with BigInteger where at some point you&apos;d run out of space in the double and start having to use a big int literal. So it seems consistent to do BigDecimal that way as well. Also, most cases are going to be covered with the cast and when someone runs into issues there are ways to handle it.&lt;/p&gt;</comment>
                            <comment id="13536675" author="mgrover" created="Thu, 20 Dec 2012 01:32:56 +0000"  >&lt;p&gt;Sweet! I will self-review the code tomorrow and if you get a chance, it&apos;d be great if you could do that too!&lt;/p&gt;</comment>
                            <comment id="13540409" author="hagleitn" created="Fri, 28 Dec 2012 09:43:10 +0000"  >&lt;p&gt;New patch that addresses all issues in the review:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Removed mathematical UDFs that implicitly converted to double (Log, Exp, Sqrt). Should open new jira to provide big decimal implementations&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fixed Ceil, Floor, Round to work with decimals with any scale&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added additional tests for UDFs&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Type conversion: Code keeps conversion rules backwards compatible now (e.g.: integer division return double), numerical values are converted to big decimal only if needed (e.g.: one half of a binop is already in decimal), otherwise conversion to lower types are preferred.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Switched to mathematical equivalency in UDFToBoolean (was comparison by value + scale)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13540426" author="phabricator@reviews.facebook.net" created="Fri, 28 Dec 2012 10:42:11 +0000"  >&lt;p&gt;hagleitn requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add DECIMAL data type&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;: Add DECIMAL data type&lt;/p&gt;

&lt;p&gt;  Add support for the DECIMAL data type. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2272&quot; title=&quot;add TIMESTAMP data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2272&quot;&gt;&lt;del&gt;HIVE-2272&lt;/del&gt;&lt;/a&gt; (TIMESTAMP) provides a nice template for how to do this.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  New tests decimal_1.q, decimal_2.q, decimal_3.q (Casts, udfs, joins, aggregates, order/sort, etc)&lt;br/&gt;
  Decimal has been added to SerDe test classes (TestBinarySortable, etc)&lt;br/&gt;
  Decimal has been added to UDF test files&lt;br/&gt;
  Decimal has been added to jdbc test file&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  data/files/datatypes.txt&lt;br/&gt;
  data/files/kv7.txt&lt;br/&gt;
  jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveBaseResultSet.java&lt;br/&gt;
  jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveResultSetMetaData.java&lt;br/&gt;
  jdbc/src/java/org/apache/hadoop/hive/jdbc/JdbcColumn.java&lt;br/&gt;
  jdbc/src/java/org/apache/hadoop/hive/jdbc/Utils.java&lt;br/&gt;
  jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFAbs.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFBaseNumericOp.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFBaseNumericUnaryOp.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFCeil.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFFloor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFOPDivide.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFOPMinus.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFOPMod.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFOPMultiply.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFOPNegative.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFOPPlus.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFOPPositive.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFPosMod.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFPower.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToBoolean.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToByte.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToDouble.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToFloat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToInteger.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToLong.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToShort.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFToString.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFCorrelation.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFCovariance.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFCovarianceSample.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFHistogramNumeric.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFPercentileApprox.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFStd.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFStdSample.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFSum.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFVariance.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFVarianceSample.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFToDecimal.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/decimal_1.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/decimal_2.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/decimal_3.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf7.q&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_cast_from_binary_1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_cast_from_binary_2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_cast_from_binary_3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_cast_from_binary_4.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_cast_from_binary_5.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_cast_from_binary_6.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/wrong_column_type.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/decimal_1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/decimal_2.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/decimal_3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf7.q.out&lt;br/&gt;
  serde/if/serde.thrift&lt;br/&gt;
  serde/src/gen/thrift/gen-cpp/serde_constants.cpp&lt;br/&gt;
  serde/src/gen/thrift/gen-cpp/serde_constants.h&lt;br/&gt;
  serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/serdeConstants.java&lt;br/&gt;
  serde/src/gen/thrift/gen-php/org/apache/hadoop/hive/serde/Types.php&lt;br/&gt;
  serde/src/gen/thrift/gen-py/org_apache_hadoop_hive_serde/constants.py&lt;br/&gt;
  serde/src/gen/thrift/gen-rb/serde_constants.rb&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/io/BigDecimalWritable.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyBigDecimal.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUtils.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyBigDecimalObjectInspector.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/primitive/LazyPrimitiveObjectInspectorFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryBigDecimal.java&lt;br/&gt;
  serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassSmaller.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinarySerDe.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryUtils.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/PrimitiveObjectInspector.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/BigDecimalObjectInspector.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaBigDecimalObjectInspector.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorConverter.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorUtils.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/SettableBigDecimalObjectInspector.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableBigDecimalObjectInspector.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantBigDecimalObjectInspector.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java&lt;br/&gt;
  serde/src/test/org/apache/hadoop/hive/serde2/TestStatsSerde.java&lt;br/&gt;
  serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/MyTestClass.java&lt;br/&gt;
  serde/src/test/org/apache/hadoop/hive/serde2/binarysortable/TestBinarySortableSerDe.java&lt;br/&gt;
  serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/MyTestClassBigger.java&lt;br/&gt;
  serde/src/test/org/apache/hadoop/hive/serde2/lazybinary/TestLazyBinarySerDe.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/18435/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/18435/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, hagleitn&lt;br/&gt;
Cc: mgrover&lt;/p&gt;</comment>
                            <comment id="13540435" author="hagleitn" created="Fri, 28 Dec 2012 11:40:33 +0000"  >&lt;p&gt;Sorry for the noise. Here&apos;s the right review: &lt;a href=&quot;https://reviews.facebook.net/D7689&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7689&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tried to fix the fact that some new files show up as copied files in the review, but the end result seems right.&lt;/p&gt;</comment>
                            <comment id="13542054" author="namit" created="Wed, 2 Jan 2013 08:23:02 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13542080" author="namit" created="Wed, 2 Jan 2013 10:50:12 +0000"  >&lt;p&gt;Looks mostly good.&lt;/p&gt;

&lt;p&gt;Most of the comments are minor - the only major ones are around lack of testing.&lt;/p&gt;</comment>
                            <comment id="13543219" author="hagleitn" created="Thu, 3 Jan 2013 19:39:20 +0000"  >&lt;p&gt;Thanks for the review! I am in the process of adding the requested tests and taking care of the other comments.&lt;/p&gt;</comment>
                            <comment id="13543787" author="hagleitn" created="Fri, 4 Jan 2013 10:55:05 +0000"  >&lt;p&gt;This one should address the comments. Added the requested new tests: &lt;a href=&quot;https://reviews.facebook.net/D7779&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7779&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13544204" author="mgrover" created="Fri, 4 Jan 2013 20:04:34 +0000"  >&lt;p&gt;Some comments on the reviews. &lt;/p&gt;

&lt;p&gt;I agree with Namit that we should deal with the ambiguous UDF issue separately in a different JIRA. Created a subtask for that: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3859&quot; title=&quot;Expand UDF method selection logic in Function Registry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3859&quot;&gt;&lt;del&gt;HIVE-3859&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13544227" author="hagleitn" created="Fri, 4 Jan 2013 20:29:32 +0000"  >&lt;p&gt;I thought I had added a response on the ambiguous UDF issue on the review, but it seems I never submitted that. It&apos;s there now.&lt;/p&gt;

&lt;p&gt;I think it would be rather cumbersome to remove that piece from the patch. We would have to remove all the conversion code from the file (including any implicit conversion of numbers to decimal) and then rewrite all the tests to work around this. Just to re-introduce this in a new jira and change the tests back to what they were.&lt;/p&gt;

&lt;p&gt;It seems Mark you have an idea of re-writing this piece altogether using different cost for conversions. I think that&apos;s more intrusive (the current code just adds a case for multiple choices) and could be handled in another jira. &lt;/p&gt;</comment>
                            <comment id="13544288" author="hagleitn" created="Fri, 4 Jan 2013 21:58:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;-18.patch is the same as in the review + the couple line change to add the Text conversion for big decimal (as reported by Mark). (+ Unit test)&lt;/p&gt;</comment>
                            <comment id="13545313" author="hagleitn" created="Sun, 6 Jan 2013 05:44:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;-19.patch is same as patch 18, but rebased (didn&apos;t apply cleanly anymore because of CRLF conversion).&lt;/p&gt;</comment>
                            <comment id="13546256" author="mgrover" created="Mon, 7 Jan 2013 20:55:58 +0000"  >&lt;p&gt;Non-committer +1&lt;/p&gt;

&lt;p&gt;Namit, any thoughts on the UDF method selection logic?&lt;/p&gt;</comment>
                            <comment id="13548873" author="hagleitn" created="Wed, 9 Jan 2013 19:32:22 +0000"  >&lt;p&gt;Rebased. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;.20.patch applies cleanly again.&lt;/p&gt;</comment>
                            <comment id="13550926" author="hagleitn" created="Fri, 11 Jan 2013 07:32:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;-21.patch addresses Ashutosh&apos; review.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fixes/adds comments&lt;/li&gt;
	&lt;li&gt;Error message&lt;/li&gt;
	&lt;li&gt;Additional conversion tests&lt;/li&gt;
	&lt;li&gt;ASF headers&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550950" author="cwsteinbach" created="Fri, 11 Jan 2013 07:58:31 +0000"  >&lt;p&gt;+1. Changes look good to me.&lt;/p&gt;

&lt;p&gt;Ashutosh and Namit: let me know if you want more time to look at this. Otherwise I&apos;ll plan to commit it in 24 hours. Thanks.&lt;/p&gt;</comment>
                            <comment id="13550965" author="ashutoshc" created="Fri, 11 Jan 2013 08:09:18 +0000"  >&lt;p&gt;Latest patch looks good to me. +1&lt;/p&gt;</comment>
                            <comment id="13550970" author="namit" created="Fri, 11 Jan 2013 08:13:01 +0000"  >&lt;p&gt;Carl, give me some time. I will try to take a look today/tomorrow.&lt;br/&gt;
Can you give me ~2 days ? Go ahead, if you dont hear from me.&lt;/p&gt;</comment>
                            <comment id="13550974" author="cwsteinbach" created="Fri, 11 Jan 2013 08:18:50 +0000"  >&lt;p&gt;@Namit: Sure thing. I&apos;ll wait until Sunday to commit. Is that cool?&lt;/p&gt;</comment>
                            <comment id="13551969" author="namit" created="Sat, 12 Jan 2013 17:38:19 +0000"  >&lt;p&gt;All, Does &lt;a href=&quot;https://reviews.facebook.net/D7779&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7779&lt;/a&gt; contain the latest patch ?&lt;/p&gt;</comment>
                            <comment id="13551970" author="namit" created="Sat, 12 Jan 2013 17:42:43 +0000"  >&lt;p&gt;I see that some comments from Ashutosh have not been addressed.&lt;/p&gt;</comment>
                            <comment id="13551974" author="namit" created="Sat, 12 Jan 2013 17:53:58 +0000"  >&lt;p&gt;minor comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13551998" author="ashutoshc" created="Sat, 12 Jan 2013 19:06:59 +0000"  >&lt;p&gt;@Namit: I think you looked at phabricator patch, but if you look at the latest patch which is attached here on jira &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;-21.patch my comments has been addressed. &lt;/p&gt;</comment>
                            <comment id="13552027" author="mgrover" created="Sat, 12 Jan 2013 19:52:53 +0000"  >&lt;p&gt;Thanks for the review, Namit, Carl and Ashutosh!&lt;/p&gt;

&lt;p&gt;Ashutosh&apos;s comments were addressed in patch 21. I think we missed updating the review. Gunther, can you please update the review with patch 21. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=namit&quot; class=&quot;user-hover&quot; rel=&quot;namit&quot;&gt;Namit Jain&lt;/a&gt;: Your review comments about ceil, round, floor, etc. are correct. MySQL doesn&apos;t return decimal on floor(decimal), etc. So, I will fix that.&lt;/p&gt;</comment>
                            <comment id="13552101" author="mgrover" created="Sat, 12 Jan 2013 23:38:23 +0000"  >&lt;p&gt;Updated patch with Namit&apos;s suggestions from code review:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Updated ceil and floor UDFs to return long instead of decimal type&lt;/li&gt;
	&lt;li&gt;Updated unit tests to reflect the above change&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13552145" author="hagleitn" created="Sun, 13 Jan 2013 05:41:37 +0000"  >&lt;p&gt;I don&apos;t think ceil/floor should return long. If the decimal is larger than the max long value it will result in truncation and return an incorrect result, which isn&apos;t necessary if we stay in the same type. As far as compatibility goes: Judging from the docs MySQL just promises that exact-value goes to an exact-value type and floating point to floating point. Returning decimal would be in line with this. Oracle/SQL Server stay in the same datatype.&lt;/p&gt;</comment>
                            <comment id="13552148" author="hagleitn" created="Sun, 13 Jan 2013 06:17:16 +0000"  >&lt;p&gt;As requested: Created &lt;a href=&quot;https://reviews.facebook.net/D7875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D7875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;-21.patch, which if we agree on decimal return type for floor/ceil is the patch to use. It has the fixes Ashutosh requested.&lt;/p&gt;</comment>
                            <comment id="13552151" author="mgrover" created="Sun, 13 Jan 2013 08:06:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;Gunther Hagleitner&lt;/a&gt;, I see what you mean. The reason I had changed the type was to be consistent with other methods in the UDF in terms of &quot;scale&quot; of the return type, albeit at the cost of losing precision. In any case, given what you found in documentation, I agree that it makes sense to retain the type to decimal. &lt;/p&gt;

&lt;p&gt;However, the scale of the return value in floor/ceil/round UDFs for decimal type methods seems incorrect to me. We should be not be setting the return values back to the original scale.&lt;/p&gt;

&lt;p&gt;This seems to lead to inconsistencies in ceil/floor and a bug in round UDF.&lt;br/&gt;
For example,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mysql&amp;gt; select ceil(-0.33) from t;
+-------------+
| ceil(-0.33) |
+-------------+
|           0 |
+-------------+
1 row in set (0.00 sec)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, patch 21 gives ceil(-0.33) as 0.00. With the proposed change, the result in hive would be consistent in representation with MySQL.&lt;/p&gt;

&lt;p&gt;Here is what seems like a bug in round UDF:&lt;br/&gt;
In MySQL:&lt;br/&gt;
round(1E-99,2)=0.00&lt;br/&gt;
But, hive gives&lt;br/&gt;
round(1E-99,2)=0E-99&lt;br/&gt;
which seems to be the incorrect representation.&lt;/p&gt;

&lt;p&gt;The proposed change will make hive give the correct result (consistent with MySQL): round(1E-99,2)=0.00&lt;/p&gt;

&lt;p&gt;What do you think? If you agree, I can upload the new patch. Please let me know. Thanks!&lt;/p&gt;</comment>
                            <comment id="13552219" author="namit" created="Sun, 13 Jan 2013 15:37:18 +0000"  >&lt;p&gt;Either approach is fine, as long as we document it clearly.&lt;/p&gt;

&lt;p&gt;Intuitively, returning a long makes sense, barring the corner cases.&lt;br/&gt;
But, I am open.&lt;/p&gt;</comment>
                            <comment id="13552297" author="hagleitn" created="Sun, 13 Jan 2013 20:15:27 +0000"  >&lt;p&gt;Mark: Scale is different from the return type. Seems both you and Namit are open to using decimal as the return type with documentation. Given that decimal avoids overflow issues, I think we can settle on the current (patch .21) implementation for this.&lt;/p&gt;

&lt;p&gt;As far as the scale/representation of the returned decimal goes: I don&apos;t see a bug. 0.00, 0, 0E-99 are all the same number it&apos;s just the representation that&apos;s different. And since all these numbers are considered the same they will be handled correctly by the system (we don&apos;t consider identical numbers with different scale different). Keeping representation in line with MySQL has other implications. For one, MySQL doesn&apos;t use scientific notation, also MySQL decimals are defined with additional parameters prec and scale, which control among other things the representation.&lt;/p&gt;

&lt;p&gt;My proposal: Keep patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2693&quot; title=&quot;Add DECIMAL data type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2693&quot;&gt;&lt;del&gt;HIVE-2693&lt;/del&gt;&lt;/a&gt;-21.patch as is and check it in. It passed muster with Ashutosh, Carl and Namit and gives correct results in Mark&apos;s cases as well. Open a new jira to extend the feature and give users control over representation with optional prec/scale (i.e.: decimal(5,2)).&lt;/p&gt;
</comment>
                            <comment id="13552312" author="mgrover" created="Sun, 13 Jan 2013 21:16:55 +0000"  >&lt;p&gt;Gunther: thanks for the feedback! I understand what you are saying about the different representation for the same number. That&apos;s why I referred to the scale change as inconsistencies for floor/ceil but a bug for round. I called them inconsistencies for floor/ceil because they are the exact same numbers and like we have discussed before the decimal patch considers same numbers with different representation equal (by using compareTo() instead of equals()). However, here is why I considered it a bug for round because by definition round(x,d) rounds number x to d decimal places. While 0.00, 0 and 0E-99 are all the same number (with different representation), only one of them has 2 decimal places as expected by the result of round(1E-99, 2). Here is an example where it could cause problems: if someone was using the thrift client to issue Hive queries from C++, and issued a query like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select round(mycol,2) from mytable;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and split the output based on the decimal point to obtain the fractional part; they would expect the fractional part to fit in a string of length of 2. However, given the present implementation, that&apos;s not the case.&lt;/p&gt;

&lt;p&gt;Consistency with MySQL aside, I don&apos;t think we should be setting the value back to the original scale, especially in round.&lt;/p&gt;

&lt;p&gt;Having said the above, I agree that they are just different representations of the same number so if you feel strongly about not changing this, I happily +1 patch 21.&lt;/p&gt;</comment>
                            <comment id="13552495" author="hagleitn" created="Mon, 14 Jan 2013 08:13:47 +0000"  >&lt;p&gt;Mark: Thanks for the clarification. I had misunderstood you earlier. I think you do bring up an important point about controlling representation, however, I think my point about best fixing this with an optional scoped decimal is still valid.&lt;/p&gt;

&lt;p&gt;The example of the poor C++ thrift developer eventually got me thinking: Why would setting the scale in round even have any effect? We strip trailing zeros internally from all decimals, so 0.00, 0E-99 should always come out as simply 0.&lt;/p&gt;

&lt;p&gt;(I think we&apos;ve talked about this before, we have to strip zeros, because otherwise sorting, joins, group-bys etc would all internally distinguish by value and scale instead of just value, which would be bad because we allow mixed-scale input and any operation performed on decimals can change the scale.)&lt;/p&gt;

&lt;p&gt;So given that, the reason you are seeing the sticky scale on &quot;round()&quot; is this: &lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6480539&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6480539&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A bug in the JVM: stripTrailingZeros doesn&apos;t work for the number &quot;0&quot;.&lt;/p&gt;

&lt;p&gt;I&apos;ve put a workaround for that bug in the code (simply storing BigDecimal.ZERO when the value is &quot;0&quot;) and that gives at least consistent behavior between floor, ceiling and round, however that still does not allow you to control the representation. For that (given that we have to strip internally), I still suggest another jira that let&apos;s you define types that do specifically that.&lt;/p&gt;

&lt;p&gt;It does also help the C++ coder: With this round(mycol, 2) would give you at most 2 decimal digits (instead of potentially unlimited many). So if they init that buffer right, they should be fine.&lt;/p&gt;

&lt;p&gt;So can you take a look at patch 23? It only special-cases the ZERO value (and removes the meaningless setting to original scale in round). Does that seem reasonable?&lt;/p&gt;</comment>
                            <comment id="13552877" author="mgrover" created="Mon, 14 Jan 2013 16:55:36 +0000"  >&lt;p&gt;Gunther: I took a look at patch 23 and it looks good to me! Good catch on stripTrailingZeros(), BTW!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=namit&quot; class=&quot;user-hover&quot; rel=&quot;namit&quot;&gt;Namit Jain&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cwsteinbach&quot; class=&quot;user-hover&quot; rel=&quot;cwsteinbach&quot;&gt;Carl Steinbach&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Thanks for reviewing the change. It seems like you all were pretty happy with patch21 but it seemed to have a bug in round UDF that we noticed while reviewing Namit&apos;s review comments. That bug has now been fixed in patch 23. Would one of you please take a final look at the patch and commit it if there are no concerns?&lt;/p&gt;

&lt;p&gt;FWIW, here is the diff between patch21 and patch23:&lt;br/&gt;
It basically doesn&apos;t set the original scale on the return value of round UDF and has a workaround for the stripTrailingZeros() bug in BigDecimal. Apart from that it&apos;s just updates to the test results.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java
index af8186a..1c807ef 100644
--- ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java
+++ ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java
@@ -72,8 +72,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; BigDecimalWritable evaluate(BigDecimalWritable n, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i) {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
     }
     BigDecimal bd = n.getBigDecimal();
-    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; origScale = bd.scale();
-    bd = n.getBigDecimal().setScale(i, RoundingMode.HALF_UP).setScale(origScale);
+    bd = n.getBigDecimal().setScale(i, RoundingMode.HALF_UP);
     bigDecimalWritable.set(bd);
     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; bigDecimalWritable;
   }
diff --git ql/src/test/results/clientpositive/decimal_3.q.out ql/src/test/results/clientpositive/decimal_3.q.out
index ad6190a..30e6d92 100644
--- ql/src/test/results/clientpositive/decimal_3.q.out
+++ ql/src/test/results/clientpositive/decimal_3.q.out
@@ -219,7 +219,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_3
 -0.333
 -0.33
 -0.3
-0.00
+0
 1E-99
 0.01
 0.02
@@ -258,7 +258,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_3
 -0.333	0
 -0.33	0
 -0.3	0
-0.00	0
+0	0
 1E-99	0
 0.01	0
 0.02	0
diff --git ql/src/test/results/clientpositive/decimal_udf.q.out ql/src/test/results/clientpositive/decimal_udf.q.out
index be05146..e55ad9d 100644
--- ql/src/test/results/clientpositive/decimal_udf.q.out
+++ ql/src/test/results/clientpositive/decimal_udf.q.out
@@ -145,7 +145,7 @@ POSTHOOK: query: SELECT key + value FROM DECIMAL_UDF
 POSTHOOK: type: QUERY
 POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 #### A masked pattern was here ####
-0E+2
+0
 1E+99
 1E-99
 0
@@ -229,7 +229,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 -2.2E+3
 1E+99
 1E-99
-0.0
+0
 1.5E+2
 15
 1.5
@@ -238,7 +238,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 3E+2
 3E+1
 3
-0.0
+0
 0.2
 0.02
 0.3
@@ -390,44 +390,44 @@ POSTHOOK: query: SELECT key - key FROM DECIMAL_UDF
 POSTHOOK: type: QUERY
 POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 #### A masked pattern was here ####
-0E+2
-0E+99
-0E-99
-0
-0E+2
-0E+1
-0
-0.0
-0.00
-0E+2
-0E+1
-0
-0
-0.0
-0.00
-0.0
-0.00
-0.000
-0.0
-0.00
-0.000
-0
-0
-0.00
-0.00
-0.00
-0.000
-0.00
-0.000
-0
-0.0
-0.00
-0.00
-0.00
-0.00
-0E-25
-0E-9
-0E-8
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
 PREHOOK: query: EXPLAIN SELECT key - value FROM DECIMAL_UDF
 PREHOOK: type: QUERY
 POSTHOOK: query: EXPLAIN SELECT key - value FROM DECIMAL_UDF
@@ -475,13 +475,13 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 1E+99
 1E-99
 0
-0E+2
-0E+1
+0
+0
 0
 0.1
 0.01
-0E+2
-0E+1
+0
+0
 0
 0
 0.2
@@ -555,7 +555,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 -6.6E+3
 1E+99
 1E-99
-0.0
+0
 5E+1
 5
 0.5
@@ -564,7 +564,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 1E+2
 1E+1
 1
-0.0
+0
 0.2
 0.02
 0.3
@@ -798,26 +798,26 @@ POSTHOOK: type: QUERY
 POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 #### A masked pattern was here ####
 -1.936E+7
-0E+99
-0E-99
+0
+0
 0
 1E+4
 1E+2
 1
-0.0
-0.00
+0
+0
 4E+4
 4E+2
 4
 0
-0.0
-0.00
-0.0
-0.00
-0.000
-0.0
-0.00
-0.000
+0
+0
+0
+0
+0
+0
+0
+0
 1
 4
 9.42
@@ -879,26 +879,26 @@ POSTHOOK: type: QUERY
 POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 #### A masked pattern was here ####
 -9.68E+6
-0E+98
-0E-100
-0.0
+0
+0
+0
 5E+3
 5E+1
 0.5
-0.00
-0.000
+0
+0
 2E+4
 2E+2
 2
-0.0
-0.00
-0.000
-0.00
-0.000
-0.0000
-0.00
-0.000
-0.0000
+0
+0
+0
+0
+0
+0
+0
+0
+0
 0.5
 2
 4.71
@@ -1359,8 +1359,8 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 #### A masked pattern was here ####
 -2.2E+3
 5E+98
-0E-65
-0E-65
+0
+0
 5E+1
 5
 0.5
@@ -1369,7 +1369,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 1E+2
 1E+1
 1
-0E-65
+0
 0.1
 0.01
 0.15
@@ -1707,9 +1707,9 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 1
 1
 1
-0.0
-0.00
-0.000
+0
+0
+0
 1
 2
 4
@@ -1774,22 +1774,22 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 #### A masked pattern was here ####
 -4.4E+3
 1E+99
-0E-99
+0
 0
 1E+2
 1E+1
 1
-0.0
-0.00
+0
+0
 2E+2
 2E+1
 2
 0
-0.0
-0.00
-0.0
-0.00
-0.000
+0
+0
+0
+0
+0
 -1
 -1
 -1
@@ -1807,7 +1807,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 3
 3
 3
-0E-25
+0
 -1234567891
 1.23456789E+9
 PREHOOK: query: -- round
@@ -1857,7 +1857,7 @@ POSTHOOK: Input: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@decimal_udf
 #### A masked pattern was here ####
 -4.4E+3
 1E+99
-0E-99
+0
 0
 1E+2
 1E+1
@@ -2027,22 +2027,22 @@ NULL
 NULL
 1
 1
-0.0
-0.00
-0.000
+0
+0
+0
 1
 1
 0
 NULL
-0.0
-0.00
+0
+0
 0.1
 0.01
 0.001
 0.1
 0.01
 0.001
-0.0
+0
 0
 1
 -0.12
diff --git serde/src/java/org/apache/hadoop/hive/serde2/io/BigDecimalWritable.java serde/src/java/org/apache/hadoop/hive/serde2/io/BigDecimalWritable.java
index 1d0a31b..db009c4 100644
--- serde/src/java/org/apache/hadoop/hive/serde2/io/BigDecimalWritable.java
+++ serde/src/java/org/apache/hadoop/hive/serde2/io/BigDecimalWritable.java
@@ -57,6 +57,10 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; BigDecimalWritable(BigDecimal value) {
 
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void set(BigDecimal value) {
     value = value.stripTrailingZeros();
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value.compareTo(BigDecimal.ZERO) == 0) {
+      &lt;span class=&quot;code-comment&quot;&gt;// Special &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 0, because java doesn&apos;t strip zeros correctly on that number.
&lt;/span&gt;+      value = BigDecimal.ZERO;
+    }
     set(value.unscaledValue().toByteArray(), value.scale());
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13553400" author="cwsteinbach" created="Tue, 15 Jan 2013 01:52:03 +0000"  >&lt;p&gt;+1 on patch 23. Running tests. Will commit if everything passes.&lt;/p&gt;</comment>
                            <comment id="13555575" author="cwsteinbach" created="Wed, 16 Jan 2013 23:05:25 +0000"  >&lt;p&gt;Committed to trunk. Thanks Josh, Vikram, Prasad, Mark, and Gunther!&lt;/p&gt;</comment>
                            <comment id="13569234" author="mgrover" created="Fri, 1 Feb 2013 23:21:47 +0000"  >&lt;p&gt;Thanks for committing this, Carl!&lt;/p&gt;

&lt;p&gt;FYI, I have updated the wiki pages with info about Decimal type.&lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12556352">HIVE-3036</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12624560">HIVE-3820</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12640091">HIVE-4271</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12641720">HIVE-4320</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12556352">HIVE-3036</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12630455">HIVE-3976</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12674164">HIVE-5565</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12690073">HIVE-6246</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12691866">HIVE-6327</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12693609">HIVE-6385</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12553076" name="2693_7.patch" size="127923" author="vikram.dixit" created="Mon, 12 Nov 2012 05:51:42 +0000"/>
                            <attachment id="12553442" name="2693_8.patch" size="127166" author="vikram.dixit" created="Wed, 14 Nov 2012 03:43:06 +0000"/>
                            <attachment id="12552066" name="2693_fix_all_tests1.patch" size="126848" author="vikram.dixit" created="Mon, 5 Nov 2012 06:40:29 +0000"/>
                            <attachment id="12553645" name="HIVE-2693-1.patch.txt" size="127166" author="cdub" created="Thu, 15 Nov 2012 11:16:59 +0000"/>
                            <attachment id="12553710" name="HIVE-2693-10.patch" size="152588" author="prasadm" created="Thu, 15 Nov 2012 22:38:35 +0000"/>
                            <attachment id="12561241" name="HIVE-2693-11.patch" size="152588" author="mgrover" created="Mon, 17 Dec 2012 04:45:12 +0000"/>
                            <attachment id="12561450" name="HIVE-2693-12-SortableSerDe.patch" size="238094" author="hagleitn" created="Tue, 18 Dec 2012 08:49:39 +0000"/>
                            <attachment id="12561536" name="HIVE-2693-13.patch" size="167964" author="mgrover" created="Tue, 18 Dec 2012 18:28:21 +0000"/>
                            <attachment id="12561676" name="HIVE-2693-14.patch" size="188032" author="hagleitn" created="Wed, 19 Dec 2012 09:39:54 +0000"/>
                            <attachment id="12561774" name="HIVE-2693-15.patch" size="197737" author="mgrover" created="Wed, 19 Dec 2012 19:56:37 +0000"/>
                            <attachment id="12562574" name="HIVE-2693-16.patch" size="187813" author="hagleitn" created="Fri, 28 Dec 2012 09:43:10 +0000"/>
                            <attachment id="12563276" name="HIVE-2693-17.patch" size="282422" author="hagleitn" created="Fri, 4 Jan 2013 10:57:38 +0000"/>
                            <attachment id="12563369" name="HIVE-2693-18.patch" size="284955" author="hagleitn" created="Fri, 4 Jan 2013 21:58:46 +0000"/>
                            <attachment id="12563460" name="HIVE-2693-19.patch" size="273645" author="hagleitn" created="Sun, 6 Jan 2013 05:44:07 +0000"/>
                            <attachment id="12564003" name="HIVE-2693-20.patch" size="273654" author="hagleitn" created="Wed, 9 Jan 2013 19:32:22 +0000"/>
                            <attachment id="12564370" name="HIVE-2693-21.patch" size="280112" author="hagleitn" created="Fri, 11 Jan 2013 07:32:50 +0000"/>
                            <attachment id="12564600" name="HIVE-2693-22.patch" size="280367" author="mgrover" created="Sat, 12 Jan 2013 23:38:23 +0000"/>
                            <attachment id="12564669" name="HIVE-2693-23.patch" size="279958" author="hagleitn" created="Mon, 14 Jan 2013 08:14:17 +0000"/>
                            <attachment id="12550903" name="HIVE-2693-all.patch" size="104733" author="jwills" created="Fri, 26 Oct 2012 01:02:40 +0000"/>
                            <attachment id="12550914" name="HIVE-2693-fix.patch" size="105312" author="jwills" created="Fri, 26 Oct 2012 03:04:49 +0000"/>
                            <attachment id="12550931" name="HIVE-2693-take3.patch" size="131459" author="jwills" created="Fri, 26 Oct 2012 07:03:12 +0000"/>
                            <attachment id="12551036" name="HIVE-2693-take4.patch" size="146709" author="jwills" created="Fri, 26 Oct 2012 22:51:58 +0000"/>
                            <attachment id="12562576" name="HIVE-2693.D7683.1.patch" size="174713" author="phabricator@reviews.facebook.net" created="Fri, 28 Dec 2012 10:42:11 +0000"/>
                            <attachment id="12531731" name="HIVE-2693.patch" size="92189" author="jwills" created="Mon, 11 Jun 2012 22:08:57 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12626111">HIVE-3859</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 12 May 2012 14:23:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i013yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2694] Add FORMAT UDF</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2694</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12537391">HIVE-2694</key>
            <summary>Add FORMAT UDF</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                            <label>TODOC10</label>
                    </labels>
                <created>Thu, 5 Jan 2012 19:26:53 +0000</created>
                <updated>Sun, 15 Jun 2014 04:58:46 +0000</updated>
                            <resolved>Mon, 11 Jun 2012 19:16:51 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13180747" author="cwsteinbach" created="Thu, 5 Jan 2012 19:27:39 +0000"  >&lt;p&gt;Ref: &lt;a href=&quot;http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_format&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_format&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Formats the number X to a format like &apos;#,###,###.##&apos;, rounded to D decimal places, and returns the result as a string. If D is 0, the result has no decimal point or fractional part.&lt;/p&gt;

&lt;p&gt;mysql&amp;gt; SELECT FORMAT(12332.123456, 4);&lt;br/&gt;
        -&amp;gt; &apos;12,332.1235&apos;&lt;br/&gt;
mysql&amp;gt; SELECT FORMAT(12332.1,4);&lt;br/&gt;
        -&amp;gt; &apos;12,332.1000&apos;&lt;br/&gt;
mysql&amp;gt; SELECT FORMAT(12332.2,0);&lt;br/&gt;
        -&amp;gt; &apos;12,332&apos;&lt;/p&gt;</comment>
                            <comment id="13182935" author="phabricator@reviews.facebook.net" created="Mon, 9 Jan 2012 23:50:39 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add FORMAT UDF&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;: add format_number() UDF&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1149&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong2.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong3.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong4.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong5.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong6.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong7.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong8.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_format_number.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong4.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong5.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong6.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong7.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong8.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_format_number.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2421/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2421/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13186848" author="phabricator@reviews.facebook.net" created="Mon, 16 Jan 2012 10:26:40 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add FORMAT UDF&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:65 Instead of string comparisons on the type name, please do the following to verify the types:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Verify that the two OIs are PrimitiveObjectInspectors.&lt;/li&gt;
	&lt;li&gt;Cast both OIs to PrimtiveObjectInspector and then validate the type in a switch statement using PrimitiveObjectInspector.getPrimitiveCategory().&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:106 Let&apos;s make the StringBuilder a private instance variable and initialize it once in the constructor, and then clear it every time evaluate gets called:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  pattern.delete(0, pattern.length())&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:139 I think it should only be necessary to construct a new DecimalFormat object when evaluate is called with a new dValue. Otherwise, it seems like it should be possible to reuse the DecimalFormat object from the previous evaluation.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:114 This doesn&apos;t look right to me. It&apos;s not possible to construct a single pattern that tells DecimalFormat to use the grouping separator for thousands?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1149&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13187350" author="phabricator@reviews.facebook.net" created="Tue, 17 Jan 2012 01:04:39 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add FORMAT UDF&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;


&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;: Carl&apos;s comments addressed.&lt;br/&gt;
              New DecimalFormat constructed only if evaluated with a new dValue&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1149&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong2.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong3.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong4.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong5.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong6.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong7.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong8.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_format_number.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong4.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong5.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong6.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong7.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong8.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_format_number.q.out&lt;/p&gt;</comment>
                            <comment id="13190162" author="phabricator@reviews.facebook.net" created="Fri, 20 Jan 2012 22:02:39 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add FORMAT UDF&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:99 Cleaner to take advantage of fall-through here, e.g:&lt;/p&gt;

&lt;p&gt;  switch (..) &lt;/p&gt;
{
   case VOID:
   case FLOAT:
   case DOUBLE:
     break;
   default:
    ...
  }
&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:114 Fall-through&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_format_number.q:17 Please try formatting Double.MAX_VALUE and Long.MAX_VALUE.&lt;/p&gt;

&lt;p&gt;  ql/src/test/queries/clientpositive/udf_format_number.q:23 Please try formatting Double.MIN_VALUE and Long.MIN_VALUE.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:49 The MySQL docs describe this function as follows:&lt;/p&gt;

&lt;p&gt;  &quot;FORMAT(X,D)&lt;/p&gt;

&lt;p&gt;  Formats the number X to a format like &apos;#,###,###.##&apos;, rounded to D decimal places, and returns the result as a string. If D is 0, the result has no decimal point or fractional part.&quot;&lt;/p&gt;

&lt;p&gt;  I think types in the current description (double, int) should be removed.&lt;/p&gt;

&lt;p&gt;  Also, please make it clear in the doc string that this is intended to duplicated the functionality of MySQL&apos;s FORMAT UDF.&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong3.q.out:1 Actually, I think it&apos;s acceptable for the first argument to be an integer type. In that case the digits to the right of the decimal point will always be zero. You can double check how the FORMAT UDF behaves in MySQL if you doubt this.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java:101 The integer types should also be acceptable. See my other comment below.&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_format_number.q:9 Also try formatting the values 0, 1, 12, 123, 1234&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1149&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13190288" author="phabricator@reviews.facebook.net" created="Sat, 21 Jan 2012 03:06:41 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add FORMAT UDF&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;


&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;: Carl&apos;s comments addressed&lt;br/&gt;
              also accepts integer as X value to format&lt;br/&gt;
              add testcases for Long/Double boundary values&lt;br/&gt;
              currently using -9223372036854775807 as Long.MIN_VALUE&lt;br/&gt;
              Found a Hive bug, PrimitiveObjectInspector.getPrimitiveCategory() returns DOUBLE for  Long.MIN_VALUE -9223372036854775808. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2733&quot; title=&quot;PrimitiveObjectInspector.getPrimitiveCategory() returns DOUBLE for LONG MIN_VAUE(-9223372036854775808)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2733&quot;&gt;HIVE-2733&lt;/a&gt; is created to track this bug&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1149&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong2.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong3.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong4.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong5.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong6.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong7.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_format_number.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong4.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong5.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong6.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong7.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_format_number.q.out&lt;/p&gt;</comment>
                            <comment id="13249105" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 01:05:15 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add FORMAT UDF&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;:  Add FORMAT UDF&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2673&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2673&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong2.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong3.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong4.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong5.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong6.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_format_number_wrong7.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_format_number.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong4.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong5.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong6.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_format_number_wrong7.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_format_number.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6123/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6123/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13286276" author="cwsteinbach" created="Thu, 31 May 2012 02:35:18 +0000"  >&lt;p&gt;@Zhenxiao: please see my comments on reviewboard. Thanks.&lt;/p&gt;</comment>
                            <comment id="13286832" author="zhenxiao" created="Thu, 31 May 2012 18:59:26 +0000"  >&lt;p&gt;PrimitiveObjectInspector.getPrimitiveCategory() returns DOUBLE for LONG MIN_VAUE(-9223372036854775808)&lt;/p&gt;

&lt;p&gt;In testcase, use -9223372036854775807 for LONG boundary checking&lt;/p&gt;</comment>
                            <comment id="13286833" author="zhenxiao" created="Thu, 31 May 2012 19:01:13 +0000"  >&lt;p&gt;Could not use Format as the UDF name, due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2717&quot; title=&quot;Could not Name UDF using Reserved Word&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2717&quot;&gt;HIVE-2717&lt;/a&gt;(A bug in Hive.g).&lt;br/&gt;
Use Format_number here.&lt;/p&gt;</comment>
                            <comment id="13292044" author="cwsteinbach" created="Fri, 8 Jun 2012 22:14:22 +0000"  >&lt;p&gt;@Zhenxiao: Please see my comments on phabricator. Thanks.&lt;/p&gt;</comment>
                            <comment id="13292067" author="cwsteinbach" created="Fri, 8 Jun 2012 23:00:13 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13292068" author="cwsteinbach" created="Fri, 8 Jun 2012 23:00:37 +0000"  >&lt;p&gt;Latest review request from Zhenxiao: &lt;a href=&quot;https://reviews.facebook.net/D2673&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2673&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13292106" author="zhenxiao" created="Fri, 8 Jun 2012 23:54:29 +0000"  >&lt;p&gt;@Carl: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;.3.patch.txt is the updated patch for the current trunk.&lt;/p&gt;</comment>
                            <comment id="13292907" author="cwsteinbach" created="Mon, 11 Jun 2012 17:34:29 +0000"  >&lt;p&gt;@Zhenxiao: Looks like the negative testcase outputs need to be updated. Can you please do this and then resubmit? Thanks.&lt;/p&gt;</comment>
                            <comment id="13292938" author="zhenxiao" created="Mon, 11 Jun 2012 18:17:56 +0000"  >&lt;p&gt;@Carl: negative testcase outputs updated in the new patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;.4.patch.txt.&lt;/p&gt;</comment>
                            <comment id="13293000" author="cwsteinbach" created="Mon, 11 Jun 2012 19:16:51 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13293260" author="hudson" created="Tue, 12 Jun 2012 01:36:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1479 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1479/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1479/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;. Add FORMAT UDF (Zhenxiao Luo via cws) (Revision 1348976)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348976&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong5.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong6.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong7.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_format_number.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong5.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong7.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_format_number.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528510" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:31:21 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add FORMAT UDF&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1149&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1149&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, cwsteinbach, zhenxiao&lt;br/&gt;
Cc: cwsteinbach&lt;/p&gt;</comment>
                            <comment id="13547976" author="hudson" created="Wed, 9 Jan 2013 10:23:49 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2694&quot; title=&quot;Add FORMAT UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2694&quot;&gt;&lt;del&gt;HIVE-2694&lt;/del&gt;&lt;/a&gt;. Add FORMAT UDF (Zhenxiao Luo via cws) (Revision 1348976)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348976&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFormatNumber.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong5.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong6.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_format_number_wrong7.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_format_number.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong5.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_format_number_wrong7.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_format_number.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550176" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:40 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12538287">HIVE-2717</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12539244">HIVE-2733</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12437212">HIVE-867</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12509975" name="ASF.LICENSE.NOT.GRANTED--HIVE-2694.D1149.1.patch" size="23175" author="phabricator@reviews.facebook.net" created="Mon, 9 Jan 2012 23:50:40 +0000"/>
                            <attachment id="12510783" name="ASF.LICENSE.NOT.GRANTED--HIVE-2694.D1149.2.patch" size="24042" author="phabricator@reviews.facebook.net" created="Tue, 17 Jan 2012 01:04:40 +0000"/>
                            <attachment id="12511354" name="ASF.LICENSE.NOT.GRANTED--HIVE-2694.D1149.3.patch" size="29930" author="phabricator@reviews.facebook.net" created="Sat, 21 Jan 2012 03:06:42 +0000"/>
                            <attachment id="12521799" name="ASF.LICENSE.NOT.GRANTED--HIVE-2694.D2673.1.patch" size="29912" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 01:05:17 +0000"/>
                            <attachment id="12530300" name="HIVE-2694.1.patch.txt" size="30852" author="zhenxiao" created="Wed, 30 May 2012 23:56:50 +0000"/>
                            <attachment id="12530437" name="HIVE-2694.2.patch.txt" size="27078" author="zhenxiao" created="Thu, 31 May 2012 19:16:42 +0000"/>
                            <attachment id="12531470" name="HIVE-2694.3.patch.txt" size="27078" author="zhenxiao" created="Fri, 8 Jun 2012 23:53:27 +0000"/>
                            <attachment id="12531702" name="HIVE-2694.4.patch.txt" size="27078" author="zhenxiao" created="Mon, 11 Jun 2012 18:17:15 +0000"/>
                            <attachment id="12521800" name="HIVE-2694.D2673.1.patch" size="29912" author="zhenxiao" created="Sat, 7 Apr 2012 01:06:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Jan 2012 23:50:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222899</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2695] Add PRINTF() Udf</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2695</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12537396">HIVE-2695</key>
            <summary>Add PRINTF() Udf</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jan 2012 19:39:30 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:48 +0000</updated>
                            <resolved>Thu, 12 Jan 2012 20:26:34 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13180759" author="cwsteinbach" created="Thu, 5 Jan 2012 19:42:07 +0000"  >&lt;p&gt;Add a PRINTF(String format, Obj... args) Udf that can format strings according to printf-style format strings.&lt;/p&gt;

&lt;p&gt;Ref: &lt;a href=&quot;http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13183079" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 05:06:39 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt;: Add PRINTF() UDF&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFPrintf.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong2.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong3.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_printf.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_printf.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2427/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2427/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13183082" author="zhenxiao" created="Tue, 10 Jan 2012 05:14:03 +0000"  >&lt;p&gt;Needs more testcases&lt;/p&gt;</comment>
                            <comment id="13183120" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 07:08:38 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt;: Add Printf() UDF&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1161&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFPrintf.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong2.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong3.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong4.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_printf.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_printf.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2433/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2433/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13183121" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 07:08:40 +0000"  >&lt;p&gt;zhenxiao has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;/p&gt;

&lt;p&gt;  Invalid patch. More testcases needed.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1155&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13183707" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 23:30:39 +0000"  >&lt;p&gt;zhenxiao has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;/p&gt;

&lt;p&gt;  udf_printf_wrong4.q.out is missing, will checkin a new patch soon&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1161&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13183713" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 23:42:42 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt;: Add Printf() UDF&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1173&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1173&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFPrintf.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong2.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong3.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/udf_printf_wrong4.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_printf.q&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/udf_printf_wrong4.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/show_functions.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_printf.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2451/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2451/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13184518" author="namit" created="Wed, 11 Jan 2012 23:19:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13185205" author="namit" created="Thu, 12 Jan 2012 20:26:34 +0000"  >&lt;p&gt;Committed. Thanks Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13185382" author="hudson" created="Fri, 13 Jan 2012 01:44:45 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1198 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1198/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1198/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; Add PRINTF() Udf (Zhenxiao Luo via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230758&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230758&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFPrintf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_printf.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_printf.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13186778" author="hudson" created="Mon, 16 Jan 2012 08:45:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21-dbg #3 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/3/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/3/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; Add PRINTF() Udf (Zhenxiao Luo via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230758&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230758&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFPrintf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_printf.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_printf.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265246" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:19 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13528501" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:27:21 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;br/&gt;
Cc: zhenxiao&lt;/p&gt;</comment>
                            <comment id="13528504" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:29:19 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1161&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;br/&gt;
Cc: zhenxiao&lt;/p&gt;</comment>
                            <comment id="13528508" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:31:20 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Add PRINTF() Udf&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1173&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1173&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13547975" author="hudson" created="Wed, 9 Jan 2013 10:23:48 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2695&quot; title=&quot;Add PRINTF() Udf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2695&quot;&gt;&lt;del&gt;HIVE-2695&lt;/del&gt;&lt;/a&gt; Add PRINTF() Udf (Zhenxiao Luo via namit) (Revision 1230758)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230758&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230758&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFPrintf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/udf_printf_wrong4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_printf.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/udf_printf_wrong4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_printf.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12510007" name="ASF.LICENSE.NOT.GRANTED--HIVE-2695.D1155.1.patch" size="14718" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 05:06:40 +0000"/>
                            <attachment id="12510013" name="ASF.LICENSE.NOT.GRANTED--HIVE-2695.D1161.1.patch" size="22304" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 07:08:39 +0000"/>
                            <attachment id="12510124" name="ASF.LICENSE.NOT.GRANTED--HIVE-2695.D1173.1.patch" size="22697" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 23:42:43 +0000"/>
                            <attachment id="12521801" name="HIVE-2695.D1173.1.patch" size="22697" author="zhenxiao" created="Sat, 7 Apr 2012 01:10:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Jan 2012 05:06:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222904</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2696] Conf variable to turn off setting the create time for a new partition</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2696</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are some cases where the user does not want the create time for a partition to change on INSERT OVERWRITE to that partition.  To accommodate this, we can add a new conf variable which will prevent the create time from being set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12537449">HIVE-2696</key>
            <summary>Conf variable to turn off setting the create time for a new partition</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jan 2012 00:54:36 +0000</created>
                <updated>Fri, 6 Jan 2012 02:24:10 +0000</updated>
                            <resolved>Fri, 6 Jan 2012 02:24:10 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222957</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2697] Ant compile-test target should be triggered from subprojects, not from top-level targets</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2697</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12537461">HIVE-2697</key>
            <summary>Ant compile-test target should be triggered from subprojects, not from top-level targets</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jan 2012 02:36:32 +0000</created>
                <updated>Sat, 6 Dec 2014 05:20:38 +0000</updated>
                            <resolved>Sat, 6 Dec 2014 05:20:38 +0000</resolved>
                                    <version>0.8.0</version>
                                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13195866" author="ashutoshc" created="Sun, 29 Jan 2012 22:47:32 +0000"  >&lt;p&gt;After applying this patch it seems like tests get run twice. Also, ant test -Dtestcase=TestHadoop20SAuthBridge fails.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12510359" name="HIVE-2697.1.patch.txt" size="8015" author="cwsteinbach" created="Thu, 12 Jan 2012 11:09:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 29 Jan 2012 22:47:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
