<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:19:50 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-12-27+AND+created+%3C%3D+2012-1-3+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="8" total="8"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2682] Clean-up logs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2682</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Just wanted to cleanup some logs being printed at wrong loglevel -&lt;/p&gt;

&lt;p&gt;1. org.apache.hadoop.hive.ql.exec.CommonJoinOperator prints &quot;table 0 has 1000 rows for join key &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&quot; as WARNING. Is it really that? &lt;/p&gt;

&lt;p&gt;2. org.apache.hadoop.hive.ql.exec.GroupByOperator prints &quot;Hash Table completed flushed&quot; and &quot;Begin Hash Table flush at close: size = 21&quot; as WARNING. It shouldn&apos;t be.&lt;/p&gt;

&lt;p&gt;3. org.apache.hadoop.hive.ql.stats.jdbc.JDBCStatsPublisher prints &quot;Warning. Invalid statistic.&quot; which looks fishy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12536412">HIVE-2682</key>
            <summary>Clean-up logs</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajatgoel2010">Rajat Goel</assignee>
                                    <reporter username="rajatgoel2010">Rajat Goel</reporter>
                        <labels>
                            <label>logging</label>
                    </labels>
                <created>Tue, 27 Dec 2011 08:26:08 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:19 +0000</updated>
                            <resolved>Thu, 12 Jan 2012 04:05:02 +0000</resolved>
                                    <version>0.8.1</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13176112" author="phabricator@reviews.facebook.net" created="Tue, 27 Dec 2011 08:34:30 +0000"  >&lt;p&gt;rajat requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Clean-up logs&lt;/p&gt;

&lt;p&gt;  Just wanted to cleanup some logs being printed at wrong loglevel -&lt;/p&gt;

&lt;p&gt;  1. org.apache.hadoop.hive.ql.exec.CommonJoinOperator prints &quot;table 0 has 1000 rows for join key &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&quot; as WARNING. Is it really that?&lt;/p&gt;

&lt;p&gt;  2. org.apache.hadoop.hive.ql.exec.GroupByOperator prints &quot;Hash Table completed flushed&quot; and &quot;Begin Hash Table flush at close: size = 21&quot; as WARNING. It shouldn&apos;t be.&lt;/p&gt;

&lt;p&gt;  4. org.apache.hadoop.hive.ql.stats.jdbc.JDBCStatsPublisher prints &quot;Warning. Invalid statistic.&quot; which looks fishy.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2169/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2169/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13176269" author="phabricator@reviews.facebook.net" created="Tue, 27 Dec 2011 19:06:30 +0000"  >&lt;p&gt;raghotham has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java:128 you dont really need to say &apos;Warning&apos; - it will show up in the log anyway.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java:112-114 what does this comment even mean? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13176429" author="phabricator@reviews.facebook.net" created="Wed, 28 Dec 2011 03:31:32 +0000"  >&lt;p&gt;rajat has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java:128 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;  Then I need to change this in multiple places.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java:112-114 I think this is related to skew joins. If we touch 1000 rows for a single key, there is a chance of data being skewed for that key and it needs to be handled specially. (I am just guessing, though).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13176431" author="phabricator@reviews.facebook.net" created="Wed, 28 Dec 2011 03:35:30 +0000"  >&lt;p&gt;rajat updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi, jonchang, heyongqiang, njain&lt;/p&gt;

&lt;p&gt;  Took care of the comments&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/p&gt;</comment>
                            <comment id="13180312" author="phabricator@reviews.facebook.net" created="Thu, 5 Jan 2012 12:31:39 +0000"  >&lt;p&gt;rajat updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;br/&gt;
Reviewers: JIRA, jsichi, jonchang, heyongqiang, njain&lt;/p&gt;

&lt;p&gt;  Incorporated suggestions from Dymtro (dms).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyStruct.java&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryStruct.java&lt;/p&gt;</comment>
                            <comment id="13183941" author="ashutoshc" created="Wed, 11 Jan 2012 08:26:13 +0000"  >&lt;p&gt;+1 Looks good. Will commit once tests pass.&lt;/p&gt;</comment>
                            <comment id="13184030" author="ashutoshc" created="Wed, 11 Jan 2012 12:47:16 +0000"  >&lt;p&gt;Can you upload the patch on jira directly and grant perms?&lt;/p&gt;</comment>
                            <comment id="13184042" author="phabricator@reviews.facebook.net" created="Wed, 11 Jan 2012 13:03:38 +0000"  >&lt;p&gt;rajat has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13184043" author="rajatgoel" created="Wed, 11 Jan 2012 13:03:39 +0000"  >&lt;p&gt;Definitely. How to do that? I have added you as a reviewer at&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And thanks a lot of looking at the diff.&lt;/p&gt;

&lt;p&gt;Rajat&lt;/p&gt;



&lt;p&gt;On Wed, Jan 11, 2012 at 18:17, Ashutosh Chauhan (Commented) (JIRA)&lt;/p&gt;</comment>
                            <comment id="13184047" author="ashutoshc" created="Wed, 11 Jan 2012 13:09:56 +0000"  >&lt;p&gt;Click on More Actions button at top of this page then click on Add Files and then add your patch. Don&apos;t forget to click on radio button to grant perms.&lt;/p&gt;</comment>
                            <comment id="13184049" author="rajatgoel" created="Wed, 11 Jan 2012 13:15:02 +0000"  >&lt;p&gt;Generated via &lt;/p&gt;

&lt;p&gt;&quot;git format-patch origin --stdout &amp;gt; hive-2862.patch&quot;&lt;/p&gt;</comment>
                            <comment id="13184505" author="namit" created="Wed, 11 Jan 2012 23:09:52 +0000"  >&lt;p&gt;Sorry Ashutosh, didn&apos;t notice that you are looking at it.&lt;/p&gt;</comment>
                            <comment id="13184506" author="phabricator@reviews.facebook.net" created="Wed, 11 Jan 2012 23:10:39 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13184708" author="ashutoshc" created="Thu, 12 Jan 2012 04:05:02 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Rajat!&lt;/p&gt;</comment>
                            <comment id="13184822" author="hudson" created="Thu, 12 Jan 2012 08:40:45 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1195 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1195/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1195/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt;: Clean-up logs (Rajat Goel via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyStruct.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryStruct.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13186777" author="hudson" created="Mon, 16 Jan 2012 08:45:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21-dbg #3 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/3/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/3/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt;: Clean-up logs (Rajat Goel via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyStruct.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryStruct.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13187020" author="hudson" created="Mon, 16 Jan 2012 16:51:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21-dbg #5 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/5/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21-dbg/5/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt;: Clean-up logs (Rajat Goel via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyStruct.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryStruct.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265235" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:16 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13534431" author="phabricator@reviews.facebook.net" created="Mon, 17 Dec 2012 23:36:12 +0000"  >&lt;p&gt;rajat has closed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Clean-up logs&quot;.&lt;/p&gt;

&lt;p&gt;  Committed&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1035&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1035&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, jsichi, jonchang, heyongqiang, njain, ashutoshc, rajat&lt;br/&gt;
Cc: raghotham, rajat, njain&lt;/p&gt;</comment>
                            <comment id="13547851" author="hudson" created="Wed, 9 Jan 2013 10:23:19 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2682&quot; title=&quot;Clean-up logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2682&quot;&gt;&lt;del&gt;HIVE-2682&lt;/del&gt;&lt;/a&gt;: Clean-up logs (Rajat Goel via Ashutosh Chauhan) (Revision 1230379)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1230379&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/GroupByOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyStruct.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazybinary/LazyBinaryStruct.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508665" name="ASF.LICENSE.NOT.GRANTED--HIVE-2682.D1035.1.patch" size="2471" author="phabricator@reviews.facebook.net" created="Tue, 27 Dec 2011 08:34:30 +0000"/>
                            <attachment id="12508720" name="ASF.LICENSE.NOT.GRANTED--HIVE-2682.D1035.2.patch" size="3232" author="phabricator@reviews.facebook.net" created="Wed, 28 Dec 2011 03:35:31 +0000"/>
                            <attachment id="12509527" name="ASF.LICENSE.NOT.GRANTED--HIVE-2682.D1035.3.patch" size="5168" author="phabricator@reviews.facebook.net" created="Thu, 5 Jan 2012 12:31:40 +0000"/>
                            <attachment id="12510181" name="hive-2682.patch" size="7211" author="rajatgoel" created="Wed, 11 Jan 2012 13:15:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 27 Dec 2011 08:34:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124073</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Some trivial cleanup of logs.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2683] load data twice from the same hdfs file without overwrite fails with return code  1 from org.apache.hadoop.hive.ql.exec.MoveTask</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2683</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I try to load data into a hive table twice from the same hdfs file without overwrite option.&lt;br/&gt;
I would expect second load to append to existing data or at least replace it. &lt;br/&gt;
I get the following error message instead.&lt;/p&gt;

&lt;p&gt;Note that, during the operation Hive is renaming the source file to &amp;lt;original_name&amp;gt;&lt;em&gt;copy&lt;/em&gt;&amp;lt;nbr&amp;gt;, which&lt;br/&gt;
makes us believe it is trying to avoid erasing the existing file while moving and both files (original and renamed) would be made available to Hive. But this is not the case.&lt;/p&gt;

&lt;p&gt;Example of code end error stack : &lt;/p&gt;

&lt;p&gt;load data  inpath &apos;hdfs://0.0.0.0/user/qafiles/SRC_FILE_EMP.dat&apos; &lt;br/&gt;
into table EMP_DELIMITED_FILE_TRUNC_TBL &lt;/p&gt;

&lt;p&gt;------------------- &lt;br/&gt;
Query returned non-zero code: 9, cause: FAILED: Execution Error, return code &lt;br/&gt;
1 from org.apache.hadoop.hive.ql.exec.MoveTask &lt;/p&gt;

&lt;p&gt;river returned: 9.  Errors: Hive history &lt;br/&gt;
file=/tmp/hue/hive_job_log_hue_201112132213_439347746.txt &lt;br/&gt;
Loading data to table default.emp_delimited_file_trunc_tbl &lt;br/&gt;
Failed with exception null &lt;br/&gt;
FAILED: Execution Error, return code 1 from &lt;br/&gt;
org.apache.hadoop.hive.ql.exec.MoveTask &lt;/p&gt;

&lt;p&gt;Failed with exception null &lt;br/&gt;
11/12/13 22:13:55 ERROR exec.MoveTask: Failed with exception null &lt;br/&gt;
java.lang.NullPointerException &lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.copyFiles(Hive.java:1738) &lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Table.copyFiles(Table.java:542) &lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.loadTable(Hive.java:1189) &lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.MoveTask.execute(MoveTask.java:197) &lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:130) &lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57) &lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1063) &lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:900) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState.execute(BeeswaxServiceImpl.java:306) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:510) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:499) &lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method) &lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:337) &lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java :1110) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1.run(BeeswaxService Impl.java:499) &lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) &lt;br/&gt;
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) &lt;br/&gt;
at java.util.concurrent.FutureTask.run(FutureTask.java:138) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java :886) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908 ) &lt;br/&gt;
at java.lang.Thread.run(Thread.java:619) &lt;/p&gt;

&lt;p&gt;FAILED: Execution Error, return code 1 from &lt;br/&gt;
org.apache.hadoop.hive.ql.exec.MoveTask &lt;br/&gt;
11/12/13 22:13:55 ERROR ql.Driver: FAILED: Execution Error, return code 1 &lt;br/&gt;
from org.apache.hadoop.hive.ql.exec.MoveTask &lt;br/&gt;
11/12/13 22:13:55 ERROR beeswax.BeeswaxServiceImpl: Exception while &lt;br/&gt;
processing query &lt;br/&gt;
BeeswaxException(message:Driver returned: 9.  Errors: Hive history &lt;br/&gt;
file=/tmp/hue/hive_job_log_hue_201112132213_439347746.txt &lt;br/&gt;
Loading data to table default.emp_delimited_file_trunc_tbl &lt;br/&gt;
Failed with exception null &lt;br/&gt;
FAILED: Execution Error, return code 1 from &lt;br/&gt;
org.apache.hadoop.hive.ql.exec.MoveTask &lt;br/&gt;
, log_context:8e8ea906-9b5a-4bfe-9946-515249cc523f, &lt;br/&gt;
handle:QueryHandle(id:8e8ea906-9b5a-4bfe-9946-515249cc523f, &lt;br/&gt;
log_context:8e8ea906-9b5a-4bfe-9946-515249cc523f)) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState.execute(BeeswaxServiceImpl.java:313) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:510) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:499) &lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method) &lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:337) &lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java :1110) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1.run(BeeswaxServiceImpl.java:499) &lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) &lt;br/&gt;
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) &lt;br/&gt;
at java.util.concurrent.FutureTask.run(FutureTask.java:138) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java :886) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908 ) &lt;br/&gt;
at java.lang.Thread.run(Thread.java:619) &lt;br/&gt;
11/12/13 22:13:58 ERROR beeswax.BeeswaxServiceImpl: Caught BeeswaxException &lt;br/&gt;
BeeswaxException(message:Driver returned: 9.  Errors: Hive history &lt;br/&gt;
file=/tmp/hue/hive_job_log_hue_201112132213_439347746.txt &lt;br/&gt;
Loading data to table default.emp_delimited_file_trunc_tbl &lt;br/&gt;
Failed with exception null &lt;br/&gt;
FAILED: Execution Error, return code 1 from &lt;br/&gt;
org.apache.hadoop.hive.ql.exec.MoveTask &lt;br/&gt;
, log_context:8e8ea906-9b5a-4bfe-9946-515249cc523f, &lt;br/&gt;
handle:QueryHandle(id:8e8ea906-9b5a-4bfe-9946-515249cc523f, &lt;br/&gt;
log_context:8e8ea906-9b5a-4bfe-9946-515249cc523f)) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState.execute(BeeswaxServiceImpl.java:313) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:510) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:499) &lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method) &lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:337) &lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1110) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1.run(BeeswaxServiceImpl.java:499) &lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) &lt;br/&gt;
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) &lt;br/&gt;
at java.util.concurrent.FutureTask.run(FutureTask.java:138) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908 ) &lt;br/&gt;
at java.lang.Thread.run(Thread.java:619) &lt;br/&gt;
11/12/13 22:30:51 ERROR beeswax.BeeswaxServiceImpl: Caught BeeswaxException &lt;br/&gt;
BeeswaxException(message:Driver returned: 9.  Errors: Hive history &lt;br/&gt;
file=/tmp/hue/hive_job_log_hue_201112132213_439347746.txt &lt;br/&gt;
Loading data to table default.emp_delimited_file_trunc_tbl &lt;br/&gt;
Failed with exception null &lt;br/&gt;
FAILED: Execution Error, return code 1 from &lt;br/&gt;
org.apache.hadoop.hive.ql.exec.MoveTask &lt;br/&gt;
, log_context:8e8ea906-9b5a-4bfe-9946-515249cc523f, &lt;br/&gt;
handle:QueryHandle(id:8e8ea906-9b5a-4bfe-9946-515249cc523f, &lt;br/&gt;
log_context:8e8ea906-9b5a-4bfe-9946-515249cc523f)) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState.execute(BeeswaxServiceImpl.java:313) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:510) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1$1.run(BeeswaxServiceImpl.java:499) &lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method) &lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:337) &lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1110) &lt;br/&gt;
at com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState$1.run(BeeswaxServiceImpl.java:499) &lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) &lt;br/&gt;
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) &lt;br/&gt;
at java.util.concurrent.FutureTask.run(FutureTask.java:138) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) &lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) &lt;br/&gt;
at java.lang.Thread.run(Thread.java:619) &lt;/p&gt;
</description>
                <environment>&lt;p&gt;Cloudera VM for Linux Red Hat&lt;/p&gt;</environment>
        <key id="12536446">HIVE-2683</key>
            <summary>load data twice from the same hdfs file without overwrite fails with return code  1 from org.apache.hadoop.hive.ql.exec.MoveTask</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bobovava">Bobo Vava</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Dec 2011 21:59:42 +0000</created>
                <updated>Wed, 28 Dec 2011 09:58:31 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13176551" author="chinnalalam" created="Wed, 28 Dec 2011 09:58:31 +0000"  >&lt;p&gt;Pls check this issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1996&quot; title=&quot;&amp;quot;LOAD DATA INPATH&amp;quot; fails when the table already contains a file of the same name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1996&quot;&gt;&lt;del&gt;HIVE-1996&lt;/del&gt;&lt;/a&gt; it resolves this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Dec 2011 09:58:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d38f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2684] Provide compile + run method for HiveServer interface</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2684</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In our use cases, we need to access query plan in early time (before execution). &lt;/p&gt;

&lt;p&gt;1. compile&lt;br/&gt;
2. get query plan&lt;br/&gt;
3. setup configuration (callback, etc.)&lt;br/&gt;
4. run the query&lt;/p&gt;

&lt;p&gt;Additional methods are needed for 1, 3, 4 stage.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12536457">HIVE-2684</key>
            <summary>Provide compile + run method for HiveServer interface</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Dec 2011 01:00:44 +0000</created>
                <updated>Wed, 2 May 2012 04:18:36 +0000</updated>
                            <resolved>Wed, 2 May 2012 04:18:35 +0000</resolved>
                                                                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13176428" author="phabricator@reviews.facebook.net" created="Wed, 28 Dec 2011 03:31:30 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2684&quot; title=&quot;Provide compile + run method for HiveServer interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2684&quot;&gt;&lt;del&gt;HIVE-2684&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Provide compile + run method for HiveServer interface&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-165 Split thrift_client#execute to compile + run for early access to execution plan&lt;/p&gt;

&lt;p&gt;  In our use cases, we need to access query plan in early time (before execution).&lt;/p&gt;

&lt;p&gt;  1. compile&lt;br/&gt;
  2. get query plan&lt;br/&gt;
  3. setup configuration (callback, etc.)&lt;br/&gt;
  4. run the query&lt;/p&gt;

&lt;p&gt;  Additional methods are needed for 1, 3, 4 stage.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1041&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1041&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
  service/if/hive_service.thrift&lt;br/&gt;
  service/src/gen/thrift/gen-cpp/ThriftHive.cpp&lt;br/&gt;
  service/src/gen/thrift/gen-cpp/ThriftHive.h&lt;br/&gt;
  service/src/gen/thrift/gen-cpp/ThriftHive_server.skeleton.cpp&lt;br/&gt;
  service/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/service/ThriftHive.java&lt;br/&gt;
  service/src/gen/thrift/gen-php/hive_service/ThriftHive.php&lt;br/&gt;
  service/src/gen/thrift/gen-py/hive_service/ThriftHive-remote&lt;br/&gt;
  service/src/gen/thrift/gen-py/hive_service/ThriftHive.py&lt;br/&gt;
  service/src/gen/thrift/gen-rb/thrift_hive.rb&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;br/&gt;
  service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2175/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2175/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13176432" author="phabricator@reviews.facebook.net" created="Wed, 28 Dec 2011 03:45:30 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2684&quot; title=&quot;Provide compile + run method for HiveServer interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2684&quot;&gt;&lt;del&gt;HIVE-2684&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Provide compile + run method for HiveServer interface&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  revert filemode of &apos;service/src/gen/thrift/gen-py/hive_service/ThriftHive-remote&apos;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1041&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1041&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
  service/if/hive_service.thrift&lt;br/&gt;
  service/src/gen/thrift/gen-cpp/ThriftHive.cpp&lt;br/&gt;
  service/src/gen/thrift/gen-cpp/ThriftHive.h&lt;br/&gt;
  service/src/gen/thrift/gen-cpp/ThriftHive_server.skeleton.cpp&lt;br/&gt;
  service/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/service/ThriftHive.java&lt;br/&gt;
  service/src/gen/thrift/gen-php/hive_service/ThriftHive.php&lt;br/&gt;
  service/src/gen/thrift/gen-py/hive_service/ThriftHive-remote&lt;br/&gt;
  service/src/gen/thrift/gen-py/hive_service/ThriftHive.py&lt;br/&gt;
  service/src/gen/thrift/gen-rb/thrift_hive.rb&lt;br/&gt;
  service/src/java/org/apache/hadoop/hive/service/HiveServer.java&lt;br/&gt;
  service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java&lt;/p&gt;</comment>
                            <comment id="13258877" author="ashutoshc" created="Sat, 21 Apr 2012 16:28:37 +0000"  >&lt;p&gt;Unlinking from 0.9 &lt;/p&gt;</comment>
                            <comment id="13266331" author="navis" created="Wed, 2 May 2012 04:18:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2935&quot; title=&quot;Implement HiveServer2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2935&quot;&gt;&lt;del&gt;HIVE-2935&lt;/del&gt;&lt;/a&gt; has better interface than this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508719" name="ASF.LICENSE.NOT.GRANTED--HIVE-2684.D1041.1.patch" size="171604" author="phabricator@reviews.facebook.net" created="Wed, 28 Dec 2011 03:31:31 +0000"/>
                            <attachment id="12508721" name="ASF.LICENSE.NOT.GRANTED--HIVE-2684.D1041.2.patch" size="171604" author="phabricator@reviews.facebook.net" created="Wed, 28 Dec 2011 03:45:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Dec 2011 03:31:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2685] Unable to query Hive table defined with custom ROW FORMAT remotely using JDBC</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2685</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Created table using custom format as follows :&lt;/p&gt;

&lt;p&gt;create  table if not exists FILE_HDFS_TO_HIVE_CUSTOM_NO_STAGE_TGT&lt;br/&gt;
(&lt;br/&gt;
	ID	STRING,&lt;br/&gt;
	NAME	STRING,&lt;br/&gt;
	DESCR	STRING&lt;br/&gt;
)&lt;/p&gt;

&lt;p&gt;ROW FORMAT SERDE &apos;org.apache.hadoop.hive.contrib.serde2.RegexSerDe&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
  &quot;input.regex&quot; = &quot;(.&lt;/p&gt;
{3}
&lt;p&gt;)(.&lt;/p&gt;
{5}
&lt;p&gt;)(.&lt;/p&gt;
{9}
&lt;p&gt;)&quot;,&lt;br/&gt;
  &quot;output.format.string&quot; = &quot;%1$s %2$s %3$s&quot;&lt;br/&gt;
)&lt;br/&gt;
STORED AS TEXTFILE&lt;/p&gt;

&lt;p&gt;and loaded some data into it.&lt;/p&gt;

&lt;p&gt;Now I am trying to query the table from a remote host using JDBC from a java program.&lt;br/&gt;
All the Hive JDBC jars are included in the classpath and I am able to execute run all kinds &lt;br/&gt;
of DDL and DML statements except for this one.&lt;br/&gt;
Additionally I use add jar just before executing the query :&lt;/p&gt;

&lt;p&gt;add jar /ade/bosimova_bobo_odi/odi/odiqa/automation/qa_scripts/knowledge_modules/sql/hive_cert/drivers/hive-contrib-0.7.1-cdh3u2.jar&lt;br/&gt;
0&lt;/p&gt;

&lt;p&gt;select * from file_hdfs_to_hive_custom_no_stage_tgt order by id&lt;br/&gt;
Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;java.lang.ClassNotFoundException: org.apache.hadoop.hive.contrib.serde2.RegexSerDe&lt;/p&gt;

&lt;p&gt;More details : &lt;/p&gt;

&lt;p&gt;2011-12-27 19:59:30,695 WARN org.apache.hadoop.mapred.Child: Error running child&lt;br/&gt;
java.lang.RuntimeException: Error in configuring object&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:387)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)&lt;br/&gt;
at org.apache.hadoop.mapred.Child$4.run(Child.java:270)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)&lt;br/&gt;
at org.apache.hadoop.mapred.Child.main(Child.java:264)&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)&lt;br/&gt;
... 9 more&lt;br/&gt;
Caused by: java.lang.RuntimeException: Error in configuring object&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)&lt;br/&gt;
at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)&lt;br/&gt;
... 14 more&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)&lt;br/&gt;
... 17 more&lt;br/&gt;
Caused by: java.lang.RuntimeException: Map operator initialization failed&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.ExecMapper.configure(ExecMapper.java:121)&lt;br/&gt;
... 22 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.ClassNotFoundException: org.apache.hadoop.hive.contrib.serde2.RegexSerDe&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.MapOperator.setChildren(MapOperator.java:403)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.ExecMapper.configure(ExecMapper.java:90)&lt;br/&gt;
... 22 more&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.contrib.serde2.RegexSerDe&lt;br/&gt;
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)&lt;br/&gt;
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)&lt;br/&gt;
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)&lt;br/&gt;
at java.lang.ClassLoader.loadClass(ClassLoader.java:248)&lt;br/&gt;
at java.lang.Class.forName0(Native Method)&lt;br/&gt;
at java.lang.Class.forName(Class.java:247)&lt;br/&gt;
at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:943)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.MapOperator.initObjectInspector(MapOperator.java:228)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.MapOperator.setChildren(MapOperator.java:359)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Cloudera VM for Linux Red Hat&lt;/p&gt;</environment>
        <key id="12536458">HIVE-2685</key>
            <summary>Unable to query Hive table defined with custom ROW FORMAT remotely using JDBC</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bobovava">Bobo Vava</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Dec 2011 01:04:41 +0000</created>
                <updated>Wed, 28 Dec 2011 01:04:41 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d3ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2686] Test ppr_pushdown.q is failing on trunk</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2686</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$  ant test -Dtestcase=TestCliDriver -Dqfile=ppr_pushdown.q
    [junit] See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.
    [junit] 	at junit.framework.Assert.fail(Assert.java:50)
    [junit] 	at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppr_pushdown(TestCliDriver.java:129)
    [junit] 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit] 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    [junit] 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    [junit] 	at java.lang.reflect.Method.invoke(Method.java:597)
    [junit] 	at junit.framework.TestCase.runTest(TestCase.java:168)
    [junit] 	at junit.framework.TestCase.runBare(TestCase.java:134)
    [junit] 	at junit.framework.TestResult$1.protect(TestResult.java:110)
    [junit] 	at junit.framework.TestResult.runProtected(TestResult.java:128)
    [junit] 	at junit.framework.TestResult.run(TestResult.java:113)
    [junit] 	at junit.framework.TestCase.run(TestCase.java:124)
    [junit] 	at junit.framework.TestSuite.runTest(TestSuite.java:243)
    [junit] 	at junit.framework.TestSuite.run(TestSuite.java:238)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906)
    [junit] 178d177
    [junit] &amp;lt; 1234	1234
    [junit] 179a179
    [junit] &amp;gt; 1234	1234
    [junit] 196d195
    [junit] &amp;lt; 1224	1224
    [junit] 197a197
    [junit] &amp;gt; 1224	1224
    [junit] 214d213
    [junit] Exception: Client execution results failed with error code = 1
    [junit] See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.
    [junit] &amp;lt; 1214	1214
    [junit] 215a215
    [junit] &amp;gt; 1214	1214
    [junit] 232d231
    [junit] &amp;lt; 12.4	12.4
    [junit] 233a233
    [junit] &amp;gt; 12.4	12.4
    [junit] 250d249
    [junit] &amp;lt; 12+4	12+4
    [junit] 251a251
    [junit] &amp;gt; 12+4	12+4
    [junit] 268d267
    [junit] &amp;lt; 12:4	12:4
    [junit] 269a269
    [junit] &amp;gt; 12:4	12:4
    [junit] 286d285
    [junit] &amp;lt; 12%4	12%4
    [junit] 287a287
    [junit] &amp;gt; 12%4	12%4
    [junit] 304d303
    [junit] &amp;lt; 12*4	12*4
    [junit] 305a305
    [junit] &amp;gt; 12*4	12*4
    [junit] Cleaning up TestCliDriver
    [junit] Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 137.556 sec
    [junit] Test org.apache.hadoop.hive.cli.TestCliDriver FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12536474">HIVE-2686</key>
            <summary>Test ppr_pushdown.q is failing on trunk</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Dec 2011 06:05:37 +0000</created>
                <updated>Mon, 19 Mar 2012 03:34:45 +0000</updated>
                            <resolved>Mon, 19 Mar 2012 03:31:15 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13176832" author="ashutoshc" created="Wed, 28 Dec 2011 21:52:04 +0000"  >&lt;p&gt;It looks like q.out file for this particular .q file got left behind and needs to be updated. Marek, you did some work recently for streamlining q.out files. Can you take a look to verify if that indeed is the case and not a regression.&lt;/p&gt;</comment>
                            <comment id="13177323" author="ashutoshc" created="Thu, 29 Dec 2011 18:57:09 +0000"  >&lt;p&gt;Lowering priority since it passed on another machine for me. Keeping it open to figure out the flakiness.&lt;/p&gt;</comment>
                            <comment id="13178655" author="jvs" created="Tue, 3 Jan 2012 07:46:56 +0000"  >&lt;p&gt;Looks like the test queries are missing ORDER BY, hence the nondeterminism.&lt;/p&gt;</comment>
                            <comment id="13184794" author="phabricator@reviews.facebook.net" created="Thu, 12 Jan 2012 07:55:16 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2686&quot; title=&quot;Test ppr_pushdown.q is failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2686&quot;&gt;&lt;del&gt;HIVE-2686&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Test ppr_pushdown.q is failing on trunk&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-611 Fix test failure on ppr_pushdown.q&lt;/p&gt;

&lt;p&gt;  &amp;lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&amp;gt;&amp;lt;div class=&quot;preformattedContent panelContent&quot;&amp;gt; &amp;lt;pre&amp;gt;$  ant test -Dtestcase=TestCliDriver -Dqfile=ppr_pushdown.q     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.fail(Assert.java:50)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppr_pushdown(TestCliDriver.java:129)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.reflect.Method.invoke(Method.java:597)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.runTest(TestCase.java:168)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.runBare(TestCase.java:134)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult$1.protect(TestResult.java:110)    &lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult.runProtected(TestResult.java:128)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult.run(TestResult.java:113)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.run(TestCase.java:124)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestSuite.runTest(TestSuite.java:243)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestSuite.run(TestSuite.java:238)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906)     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 178d177     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 1234	1234     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 179a179     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 1234	1234     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 196d195     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 1224	1224     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 197a197     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 1224	1224     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 214d213     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant&lt;br/&gt;
  test ... -Dtest.silent=false&quot; to get more logs.     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 1214	1214     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 215a215     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 1214	1214     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 232d231     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 12.4	12.4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 233a233     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 12.4	12.4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 250d249     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 12+4	12+4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 251a251     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 12+4	12+4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 268d267     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 12:4	12:4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 269a269     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 12:4	12:4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 286d285     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 12%4	12%4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 287a287     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 12%4	12%4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 304d303     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 12*4	12*4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 305a305     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 12*4	12*4     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Cleaning up TestCliDriver     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 137.556 sec     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hive.cli.TestCliDriver FAILED &amp;lt;/pre&amp;gt; &amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppr_pushdown.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ppr_pushdown.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2511/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2511/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13184802" author="phabricator@reviews.facebook.net" created="Thu, 12 Jan 2012 08:02:59 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2686&quot; title=&quot;Test ppr_pushdown.q is failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2686&quot;&gt;&lt;del&gt;HIVE-2686&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Test ppr_pushdown.q is failing on trunk&quot;.&lt;/p&gt;

&lt;p&gt;  I don&apos;t know the detail of this test but I suspect &apos;union&apos; makes some non-deterministic result.&lt;/p&gt;

&lt;p&gt;  This patch might make it deterministic and way faster.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1215&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13190770" author="ashutoshc" created="Sun, 22 Jan 2012 20:44:19 +0000"  >&lt;p&gt;In my environment this test fails on trunk but passes on 0.8 branch and I suspect &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1040&quot; title=&quot;use sed rather than diff for masking out noise in diff-based tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1040&quot;&gt;&lt;del&gt;HIVE-1040&lt;/del&gt;&lt;/a&gt; to be the cause which is present on trunk only. This makes me believe that it may not have anything to do with non-determinism caused by absence of order by in this query.&lt;/p&gt;</comment>
                            <comment id="13192744" author="navis" created="Wed, 25 Jan 2012 01:03:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2642&quot; title=&quot;fix Hive-2566 and make union optimization more aggressive &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2642&quot;&gt;&lt;del&gt;HIVE-2642&lt;/del&gt;&lt;/a&gt; seemed to be a cause of this problem. I&apos;m reviewing on it.&lt;/p&gt;</comment>
                            <comment id="13192754" author="ashutoshc" created="Wed, 25 Jan 2012 01:16:11 +0000"  >&lt;p&gt;Thanks Navis for looking into it. Let us know what you find.&lt;/p&gt;</comment>
                            <comment id="13192958" author="navis" created="Wed, 25 Jan 2012 09:44:32 +0000"  >&lt;p&gt;Before &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2642&quot; title=&quot;fix Hive-2566 and make union optimization more aggressive &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2642&quot;&gt;&lt;del&gt;HIVE-2642&lt;/del&gt;&lt;/a&gt;, union in ppr_pushdown was executed by single map task. But after that it is executed by two map task, making table ordering issue(A-B or B-A). With multiple inputs, mini-MR and hadoop-MR make different results which explains why executing same query in hive-cli makes accordant with &apos;ql/test/results&apos; but ant test always fails.&lt;/p&gt;

&lt;p&gt;And.. topOps/topSelOps in SemanticAnalyzer also make ordering issue for union. It is not non-deterministic, but it is non-predictive. I think it should be changed to LinkedHashMap (HashMap, currently).&lt;/p&gt;

&lt;p&gt;Current patch (not using union) might be enough for resolving this issue. But above problems should be resolved above all.&lt;/p&gt;</comment>
                            <comment id="13193194" author="ashutoshc" created="Wed, 25 Jan 2012 18:39:05 +0000"  >&lt;p&gt;I think we shouldn&apos;t rewrite test queries which avoids union to make them pass. If ordering issue arises because of HashMap Vs LinkedHashMap usage, lets fix that.&lt;/p&gt;</comment>
                            <comment id="13193538" author="navis" created="Thu, 26 Jan 2012 03:20:04 +0000"  >&lt;p&gt;Agreed. But I suggest making another test for union ordering. The ppr_pushdown.q uses insert/union 8 times which induces 4 MR for each, making test time very long (1m 40s for my notebook).&lt;/p&gt;

&lt;p&gt;And.. I found &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2642&quot; title=&quot;fix Hive-2566 and make union optimization more aggressive &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2642&quot;&gt;&lt;del&gt;HIVE-2642&lt;/del&gt;&lt;/a&gt; prepended TSs for each input, which making input splits for each. Before that same union operator made every inputs to be combined to single split. Was this intentional?&lt;/p&gt;</comment>
                            <comment id="13195363" author="phabricator@reviews.facebook.net" created="Sat, 28 Jan 2012 02:35:09 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2686&quot; title=&quot;Test ppr_pushdown.q is failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2686&quot;&gt;&lt;del&gt;HIVE-2686&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Test ppr_pushdown.q is failing on trunk&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  1. created new test for ordering of union (union_order.q)&lt;br/&gt;
  2. replaced union with explode for ppr_pushdown.q&lt;br/&gt;
  3. replaced HashMap with LinkedHashMap for topOps and topSelOps in SemanticAnalyzer&lt;br/&gt;
  4. replaced TS with following UNION for merging input split&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppr_pushdown.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/union_order.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ppr_pushdown.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union_order.q.out&lt;/p&gt;</comment>
                            <comment id="13195892" author="navis" created="Mon, 30 Jan 2012 00:27:55 +0000"  >&lt;p&gt;There was also a bug not-related with this issue, adding non-root task as root task making query executed differently with plan provided by EXPLAIN (and different result). I&apos;ll update the patch after test.&lt;/p&gt;</comment>
                            <comment id="13197874" author="ashutoshc" created="Wed, 1 Feb 2012 14:40:29 +0000"  >&lt;p&gt;In the meanwhile &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2249&quot; title=&quot;When creating constant expression for numbers, try to infer type from another comparison operand, instead of trying to use integer first, and then long and double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2249&quot;&gt;&lt;del&gt;HIVE-2249&lt;/del&gt;&lt;/a&gt; got committed which introduced order-by in ppr_pushdown.q which makes this test to pass. I think that just mask this problem and its better to fix the ordering issue for union queries.&lt;/p&gt;</comment>
                            <comment id="13199559" author="phabricator@reviews.facebook.net" created="Fri, 3 Feb 2012 06:53:53 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2686&quot; title=&quot;Test ppr_pushdown.q is failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2686&quot;&gt;&lt;del&gt;HIVE-2686&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Test ppr_pushdown.q is failing on trunk&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Changing topOps to LinkedHashMap made predictable execution plans, but MapRed task executed with multiple map still induces non-predictable result, which cannot be corrected. I think I&apos;m done.&lt;/p&gt;

&lt;p&gt;  For ppr_pushdown, I prefer using explode instead of union, which is more faster. But it&apos;s not an important issue.&lt;/p&gt;

&lt;p&gt;  Included a fix for trivial-but-critical bug, which registers task with parent to root task.&lt;br/&gt;
  Also made best effort to find common union operator which could reduce map task in CombinHiveInputFormat.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1215&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/test/results/hbase_queries.q.out&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveFileFormatUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRUnion1.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppr_pushdown.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/union_order.q&lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join27.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join30.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/auto_join31.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/join19.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/join28.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/lineage1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/load_dyn_part14.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ppd_union_view.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ppr_pushdown.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ql_rewrite_gbtoidx.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union20.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union22.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union24.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union25.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union26.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/union_order.q.out&lt;br/&gt;
  ql/src/test/results/compiler/plan/join4.q.xml&lt;br/&gt;
  ql/src/test/results/compiler/plan/join5.q.xml&lt;br/&gt;
  ql/src/test/results/compiler/plan/join6.q.xml&lt;br/&gt;
  ql/src/test/results/compiler/plan/join7.q.xml&lt;br/&gt;
  ql/src/test/results/compiler/plan/join8.q.xml&lt;/p&gt;</comment>
                            <comment id="13232421" author="navis" created="Mon, 19 Mar 2012 03:31:15 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2249&quot; title=&quot;When creating constant expression for numbers, try to infer type from another comparison operand, instead of trying to use integer first, and then long and double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2249&quot;&gt;&lt;del&gt;HIVE-2249&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2755&quot; title=&quot;union follwowed by union_subq does not work if the subquery union has reducers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2755&quot;&gt;&lt;del&gt;HIVE-2755&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13232422" author="phabricator@reviews.facebook.net" created="Mon, 19 Mar 2012 03:34:45 +0000"  >&lt;p&gt;navis has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2686&quot; title=&quot;Test ppr_pushdown.q is failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2686&quot;&gt;&lt;del&gt;HIVE-2686&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Test ppr_pushdown.q is failing on trunk&quot;.&lt;/p&gt;

&lt;p&gt;  Issue was fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2249&quot; title=&quot;When creating constant expression for numbers, try to infer type from another comparison operand, instead of trying to use integer first, and then long and double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2249&quot;&gt;&lt;del&gt;HIVE-2249&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2755&quot; title=&quot;union follwowed by union_subq does not work if the subquery union has reducers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2755&quot;&gt;&lt;del&gt;HIVE-2755&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1215&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12510319" name="ASF.LICENSE.NOT.GRANTED--HIVE-2686.D1215.1.patch" size="35248" author="phabricator@reviews.facebook.net" created="Thu, 12 Jan 2012 07:55:17 +0000"/>
                            <attachment id="12512276" name="ASF.LICENSE.NOT.GRANTED--HIVE-2686.D1215.2.patch" size="39138" author="phabricator@reviews.facebook.net" created="Sat, 28 Jan 2012 02:35:10 +0000"/>
                            <attachment id="12513108" name="ASF.LICENSE.NOT.GRANTED--HIVE-2686.D1215.3.patch" size="260151" author="phabricator@reviews.facebook.net" created="Fri, 3 Feb 2012 06:53:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Jan 2012 07:46:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222157</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2687] Test classpath should resemble runtime classpath</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2687</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12536619">HIVE-2687</key>
            <summary>Test classpath should resemble runtime classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Dec 2011 21:51:53 +0000</created>
                <updated>Mon, 30 Apr 2012 22:26:12 +0000</updated>
                            <resolved>Mon, 30 Apr 2012 22:26:12 +0000</resolved>
                                    <version>0.8.0</version>
                                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13177418" author="cwsteinbach" created="Thu, 29 Dec 2011 21:55:01 +0000"  >&lt;p&gt;The scripts in the bin/ directory execute Hive using the&lt;br/&gt;
&apos;hadoop jar&apos; command. Consequently Hive inherits and gives&lt;br/&gt;
precedence to the contents of Hadoop&apos;s lib/ directory. We&lt;br/&gt;
need to make sure that Hive tests run with a similar&lt;br/&gt;
classpath.&lt;/p&gt;</comment>
                            <comment id="13265455" author="cwsteinbach" created="Mon, 30 Apr 2012 22:26:12 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222302</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2688] arc patch does not handle file copy to newly added directories </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2688</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D1077&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1077&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12536707">HIVE-2688</key>
            <summary>arc patch does not handle file copy to newly added directories </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="thw">Thomas Weise</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Dec 2011 00:00:46 +0000</created>
                <updated>Sat, 31 Dec 2011 00:01:34 +0000</updated>
                                                                            <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222390</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2689] ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2689</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In a bunch of places we rely on ObjectInspectorConverters to implicitly convert types.  Unfortunately, an exception will needlessly be thrown if one of the types is a complex type and the other is a void type.  For example,&lt;/p&gt;

&lt;p&gt;SELECT ARRAY(ARRAY(), NULL) ...&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12536715">HIVE-2689</key>
            <summary>ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonchang">Jonathan Chang</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Dec 2011 01:11:12 +0000</created>
                <updated>Thu, 16 May 2013 21:10:36 +0000</updated>
                            <resolved>Mon, 10 Dec 2012 05:41:56 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13177867" author="phabricator@reviews.facebook.net" created="Sat, 31 Dec 2011 01:29:30 +0000"  >&lt;p&gt;jonchang requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2689&quot; title=&quot;ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2689&quot;&gt;&lt;del&gt;HIVE-2689&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  HIVE-XXXX: Null conversion&lt;/p&gt;

&lt;p&gt;  In a bunch of places we rely on ObjectInspectorConverters to implicitly convert types.  Unfortunately, an exception will needlessly be thrown if one of the types is a complex type and the other is a void type.  For example,&lt;/p&gt;

&lt;p&gt;  SELECT ARRAY(ARRAY(), NULL) ...&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1083&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1083&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/queries/clientpositive/null_cast.q&lt;br/&gt;
  ql/src/test/results/clientpositive/null_cast.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2277/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2277/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13183351" author="phabricator@reviews.facebook.net" created="Tue, 10 Jan 2012 16:09:40 +0000"  >&lt;p&gt;jonchang has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2689&quot; title=&quot;ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2689&quot;&gt;&lt;del&gt;HIVE-2689&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.&quot;.&lt;/p&gt;

&lt;p&gt;  pingping&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1083&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1083&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13527549" author="ashutoshc" created="Sun, 9 Dec 2012 18:02:44 +0000"  >&lt;p&gt;+1 will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13527725" author="ashutoshc" created="Mon, 10 Dec 2012 05:41:56 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Jon!&lt;/p&gt;</comment>
                            <comment id="13528238" author="hudson" created="Mon, 10 Dec 2012 20:15:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1848 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1848/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1848/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2689&quot; title=&quot;ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2689&quot;&gt;&lt;del&gt;HIVE-2689&lt;/del&gt;&lt;/a&gt; : ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types. (Jonathan Chang via Ashutosh Chauhan) (Revision 1419202)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419202&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419202&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/null_cast.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/null_cast.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547961" author="hudson" created="Wed, 9 Jan 2013 10:23:45 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2689&quot; title=&quot;ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2689&quot;&gt;&lt;del&gt;HIVE-2689&lt;/del&gt;&lt;/a&gt; : ObjectInspectorConverters cannot convert Void types to Array/Map/Struct types. (Jonathan Chang via Ashutosh Chauhan) (Revision 1419202)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419202&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419202&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/null_cast.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/null_cast.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorConverters.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508971" name="ASF.LICENSE.NOT.GRANTED--HIVE-2689.D1083.1.patch" size="8965" author="phabricator@reviews.facebook.net" created="Sat, 31 Dec 2011 01:29:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 31 Dec 2011 01:29:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ll5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124078</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
