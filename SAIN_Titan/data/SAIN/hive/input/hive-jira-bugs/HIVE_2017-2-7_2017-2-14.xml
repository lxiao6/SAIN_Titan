<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 03:43:22 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2017-2-7+AND+created+%3C%3D+2017-2-14+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="71" total="71"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-15830] Allow additional ACLs for tez jobs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15830</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Allow users to grant view access to additional users when running tez jobs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13040846">HIVE-15830</key>
            <summary>Allow additional ACLs for tez jobs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseth">Siddharth Seth</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                            <label>TODOC2.2</label>
                    </labels>
                <created>Tue, 7 Feb 2017 03:48:14 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:49 +0000</updated>
                            <resolved>Thu, 23 Feb 2017 22:25:55 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15855260" author="sseth" created="Tue, 7 Feb 2017 03:51:01 +0000"  >&lt;p&gt;The patch adds a config parameter which can be set up per query to change ACLs. This is only additional ACLs. Hive, by default, will continue to add the submitting user. The patch also adds the hiveserver user into the list.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;Jason Dere&lt;/a&gt; - could you please take a look.&lt;/p&gt;</comment>
                            <comment id="15855442" author="hiveqa" created="Tue, 7 Feb 2017 06:53:05 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851299/HIVE-15830.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851299/HIVE-15830.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10216 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=108)
	[auto_join30.q,timestamp_null.q,union32.q,join16.q,groupby_ppr.q,bucketmapjoin7.q,smb_mapjoin_18.q,join19.q,vector_varchar_4.q,union6.q,cbo_subq_in.q,vectorization_part.q,sample8.q,vectorized_timestamp_funcs.q,join_star.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.ql.exec.tez.TestTezTask.testBuildDag (batchId=263)
org.apache.hadoop.hive.ql.exec.tez.TestTezTask.testEmptyWork (batchId=263)
org.apache.hive.common.util.TestACLConfigurationParser.test (batchId=237)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3410/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3410/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3410/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3410/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3410/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3410/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851299 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15858558" author="jdere" created="Wed, 8 Feb 2017 21:23:14 +0000"  >&lt;p&gt;Some of these test failures look related.&lt;/p&gt;</comment>
                            <comment id="15871121" author="sseth" created="Fri, 17 Feb 2017 03:29:57 +0000"  >&lt;p&gt;Going to reduce the scope after discussing with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;.&lt;br/&gt;
Adding the hive user to the ACcess list optionally.&lt;/p&gt;</comment>
                            <comment id="15871150" author="sseth" created="Fri, 17 Feb 2017 04:23:35 +0000"  >&lt;p&gt;Updated patch to only allow the hive user to be added to the ACL list.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; - please review.&lt;/p&gt;</comment>
                            <comment id="15871677" author="hiveqa" created="Fri, 17 Feb 2017 11:06:19 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853205/HIVE-15830.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853205/HIVE-15830.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 35 failed/errored test(s), 10215 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_external_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_not_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure1] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure2] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[external1] (batchId=85)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=102)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testAlterTable (batchId=194)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testTransactionalValidation (batchId=194)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterTable (batchId=197)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTransactionalValidation (batchId=197)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterTable (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTransactionalValidation (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterTable (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTransactionalValidation (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterTable (batchId=202)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTransactionalValidation (batchId=202)
org.apache.hadoop.hive.ql.security.TestMetastoreAuthorizationProvider.testSimplePrivileges (batchId=210)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProvider.testSimplePrivileges (batchId=208)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProviderWithACL.testSimplePrivileges (batchId=220)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
org.apache.hive.hcatalog.api.TestHCatClient.testBasicDDLCommands (batchId=170)
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=170)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.createTable (batchId=221)
org.apache.hive.service.cli.TestEmbeddedThriftBinaryCLIService.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithBinary.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithHttp.testExecuteStatementAsync (batchId=213)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3622/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3622/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3622/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3622/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3622/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3622/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 35 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853205 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15872839" author="sseth" created="Sat, 18 Feb 2017 01:14:08 +0000"  >&lt;p&gt;Updated again.&lt;br/&gt;
New behaviour. Use tez properties to determine the initial ACL set. Add the submitting user. Add the hs2/proc owner if the config property is set.&lt;/p&gt;

&lt;p&gt;The same tez property - for AM acls - is re-used to set dag ACLs.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15873039" author="hiveqa" created="Sat, 18 Feb 2017 07:41:14 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853394/HIVE-15830.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853394/HIVE-15830.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10246 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hive.common.util.TestACLConfigurationParser.test (batchId=237)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3643/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3643/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3643/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3643/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3643/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3643/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853394 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15873077" author="daijy" created="Sat, 18 Feb 2017 09:38:29 +0000"  >&lt;p&gt;Can you move getAclStringWithHiveModification to a non-tez package? I&apos;d like to use it in timeline ACL as well.&lt;/p&gt;</comment>
                            <comment id="15879390" author="sseth" created="Wed, 22 Feb 2017 22:40:01 +0000"  >&lt;p&gt;Updated patch:&lt;br/&gt;
Moved to Uilities under ql/exec&lt;br/&gt;
Also added a minor fix in the ATSHook to use ugi.getShortName instead of ugi.getUser. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;Jason Dere&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15879412" author="jdere" created="Wed, 22 Feb 2017 22:54:12 +0000"  >&lt;p&gt;A bit confusing, but in ATSHook, user is the HS2 process user (hive). requestuser is the one that shows the user logged into HS2 and running the query.&lt;br/&gt;
I think the real fix for this is in Driver.execute():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      SessionState ss = SessionState.get();
      hookContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HookContext(plan, queryState, ctx.getPathToCS(), ss.getUserName(),
          ss.getUserIpAddress(), InetAddress.getLocalHost().getHostAddress(), operationId,
          ss.getSessionId(), &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getName(), ss.isHiveServerQuery(), perfLogger);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ss.getUserName() should be changed to ss.getUserFromAuthenticator() instead.&lt;/p&gt;</comment>
                            <comment id="15879652" author="sseth" created="Thu, 23 Feb 2017 01:25:37 +0000"  >&lt;p&gt;Updated to use userFromAUthenticator. Also leaving the ugi.getShortUserName change in place. The long name normally includes realm etc information.&lt;/p&gt;</comment>
                            <comment id="15879961" author="hiveqa" created="Thu, 23 Feb 2017 06:21:40 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854109/HIVE-15830.06.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854109/HIVE-15830.06.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10255 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.ql.exec.tez.TestTezTask.testBuildDag (batchId=263)
org.apache.hadoop.hive.ql.exec.tez.TestTezTask.testEmptyWork (batchId=263)
org.apache.hive.common.util.TestACLConfigurationParser.test (batchId=237)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3714/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3714/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3714/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3714/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3714/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3714/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854109 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15880053" author="sseth" created="Thu, 23 Feb 2017 07:31:49 +0000"  >&lt;p&gt;Updated to fix test failures.&lt;/p&gt;</comment>
                            <comment id="15880247" author="hiveqa" created="Thu, 23 Feb 2017 10:50:38 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854154/HIVE-15830.07.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854154/HIVE-15830.07.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10255 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testConcurrentStatements (batchId=217)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3720/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3720/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3720/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3720/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3720/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3720/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854154 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15880863" author="hiveqa" created="Thu, 23 Feb 2017 17:14:58 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854154/HIVE-15830.07.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854154/HIVE-15830.07.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10255 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3727/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3727/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3727/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3727/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3727/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3727/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854154 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15881272" author="daijy" created="Thu, 23 Feb 2017 21:09:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15881413" author="sseth" created="Thu, 23 Feb 2017 22:24:28 +0000"  >&lt;p&gt;Thanks for the review. Committing.&lt;/p&gt;</comment>
                            <comment id="15887487" author="lefty@hortonworks.com" created="Tue, 28 Feb 2017 07:49:41 +0000"  >&lt;p&gt;Doc note:  This adds &lt;b&gt;hive.tez.hs2.user.access&lt;/b&gt; to HiveConf.java, so it needs to be documented in the Tez section of Configuration Properties (with a crossreference in the HiveServer2 section).&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Tez&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; Tez &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-HiveServer2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; HiveServer2 &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added a TODOC2.2 label.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851299" name="HIVE-15830.01.patch" size="17273" author="sseth" created="Tue, 7 Feb 2017 03:51:01 +0000"/>
                            <attachment id="12853205" name="HIVE-15830.02.patch" size="6105" author="sseth" created="Fri, 17 Feb 2017 04:23:35 +0000"/>
                            <attachment id="12853394" name="HIVE-15830.03.patch" size="18991" author="sseth" created="Sat, 18 Feb 2017 01:14:08 +0000"/>
                            <attachment id="12854081" name="HIVE-15830.05.patch" size="18983" author="sseth" created="Wed, 22 Feb 2017 22:40:01 +0000"/>
                            <attachment id="12854109" name="HIVE-15830.06.patch" size="19960" author="sseth" created="Thu, 23 Feb 2017 01:25:37 +0000"/>
                            <attachment id="12854154" name="HIVE-15830.07.patch" size="21322" author="sseth" created="Thu, 23 Feb 2017 07:31:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2017 06:53:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39p7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15831] LLAP: Fix a problem of the output of LlapDump</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15831</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The output of llapdump doesn&apos;t include the first column at the moment.&lt;/p&gt;

&lt;p&gt;This is an output example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;url: jdbc:hive2://{hiveserver2_interactive}
user: hive
query: select column1, column2 from table_a limit 10
column1:int,column2:float
Results:

, 258.0
, 645.0
, 652.0
, 1336.096
, 97.1828
, 1864.4
, 10428.4
, 2346.3
, 425.1
, 228.9
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13040852">HIVE-15831</key>
            <summary>LLAP: Fix a problem of the output of LlapDump</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tasanuma0829">Takanobu Asanuma</assignee>
                                    <reporter username="tasanuma0829">Takanobu Asanuma</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 04:13:04 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:13 +0000</updated>
                            <resolved>Fri, 10 Feb 2017 02:44:16 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>llap</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15855586" author="tasanuma0829" created="Tue, 7 Feb 2017 08:52:58 +0000"  >&lt;p&gt;Uploaded the first patch. It also removes unused imports.&lt;/p&gt;</comment>
                            <comment id="15855728" author="hiveqa" created="Tue, 7 Feb 2017 10:45:19 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851336/HIVE-15831.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851336/HIVE-15831.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 10 failed/errored test(s), 10138 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=20)
	[timestamp_comparison.q,rename_column.q,union5.q,insert_into1.q,drop_udf.q,alter3.q,cast_qualified_types.q,vectorization_4.q,disable_file_format_check.q,vector_left_outer_join.q,decimal_1_1.q,alter_index.q,correlationoptimizer7.q,annotate_stats_table.q,skewjoinopt9.q,llap_partitioned.q,skewjoinopt3.q,skewjoinopt19.q,ba_table_union.q,index_compact.q,vector_date_1.q,join_merge_multi_expressions.q,partition_multilevels.q,sort_merge_join_desc_2.q,varchar_udf1.q,alter_varchar2.q,orc_dictionary_threshold.q,semijoin.q,input_testxpath3.q,rcfile_bigdata.q]
TestCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=5)
	[auto_join_reordering_values.q,sample2.q,decimal_join.q,mapjoin_subquery2.q,join43.q,udf_month.q,varchar_join1.q,mapjoin1.q,avro_partitioned_native.q,join25.q,json_serde_tsformat.q,tez_union2.q,nullformatdir.q,authorization_admin_almighty1.q,udf_avg.q,groupby3.q,union20.q,inputddl5.q,select_transform_hint.q,cbo_rp_union.q,union27.q,exim_03_nonpart_over_compat.q,udf_logged_in_user.q,index_stale.q,union12.q,groupby7_map_multi_single_reducer.q,skewjoinopt2.q,bucketsortoptimize_insert_2.q,quote2.q,authorization_owner_actions.q]
TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestJdbcWithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
TestJdbcWithMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
TestJdbcWithMiniLlap - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
TestMultiSessionsHS2WithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
TestXSRFFilter - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3413/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3413/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3413/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3413/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3413/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3413/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851336 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860272" author="sershe" created="Thu, 9 Feb 2017 21:55:18 +0000"  >&lt;p&gt;+1, I am assuming test failures are unrelated.&lt;/p&gt;</comment>
                            <comment id="15860580" author="sershe" created="Fri, 10 Feb 2017 02:44:16 +0000"  >&lt;p&gt;Committed to master. Thanks for the patch!&lt;/p&gt;</comment>
                            <comment id="15871377" author="tasanuma0829" created="Fri, 17 Feb 2017 08:00:13 +0000"  >&lt;p&gt;Thanks again, Sergey!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851336" name="HIVE-15831.1.patch" size="2297" author="tasanuma0829" created="Tue, 7 Feb 2017 08:52:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2017 10:45:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39p93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15832] Hplsql UDF doesn&apos;t work in Hplsql</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15832</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>
&lt;p&gt;&#8251; &lt;a href=&quot;http://www.hplsql.org/udf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.hplsql.org/udf&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;1) UDF Test &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@node2 /apps/hplsql&amp;#93;&lt;/span&gt;#./hplsql -e &quot;SELECT hello(name) FROM USERS;&quot; -trace&lt;br/&gt;
...&lt;br/&gt;
Ln:1 SELECT completed successfully&lt;br/&gt;
Ln:1 Standalone SELECT executed: 1 columns in the result set&lt;br/&gt;
Unhandled exception in HPL/SQL&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;2) Add &apos;Exception&apos; (org.apache.hive.hplsql.Select)&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; 123 line &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;before :&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;      else if ((ctx.parent instanceof HplsqlParser.StmtContext)) {&lt;br/&gt;
        int cols = rm.getColumnCount();&lt;br/&gt;
        if (this.trace) &lt;/p&gt;
{
          trace(ctx, &quot;Standalone SELECT executed: &quot; + cols + &quot; columns in the result set&quot;);
        }
&lt;p&gt;        while (rs.next()) {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;after :&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;        try {         &lt;br/&gt;
	        while (rs.next()) &lt;/p&gt;
{
...
        }
&lt;p&gt;        catch (Exception e) &lt;/p&gt;
{
        	e.printStackTrace();
        }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Error Log&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@node2 /apps/hplsql&amp;#93;&lt;/span&gt;#./hplsql -e &quot;SELECT hello(1) FROM USERS;&quot; -trace&lt;br/&gt;
Configuration file: &lt;a href=&quot;file:/apps/hplsql-0.3.17/hplsql-site.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/apps/hplsql-0.3.17/hplsql-site.xml&lt;/a&gt;&lt;br/&gt;
Parser tree: (program (block (stmt (select_stmt (fullselect_stmt (fullselect_stmt_item (subselect_stmt SELECT (select_list (select_list_item (expr (expr_func (ident hello) ( (expr_func_params (func_param (expr (expr_atom (int_number 1))))) ))) (select_list_alias AS (ident A)))) (from_clause FROM (from_table_clause (from_table_name_clause (table_name (ident USERS)))))))))) (stmt (semicolon_stmt &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)))&lt;br/&gt;
INLCUDE CONTENT hplsqlrc (non-empty)&lt;br/&gt;
Ln:1 CREATE FUNCTION hello&lt;br/&gt;
Ln:1 SELECT&lt;br/&gt;
&amp;gt;&amp;gt;registerUdf begin :false&lt;br/&gt;
&amp;gt;&amp;gt;registerUdf end :true&lt;br/&gt;
Ln:1 SELECT hplsql(&apos;hello(:1)&apos;, 1) AS A FROM USERS&lt;br/&gt;
17/02/06 20:28:13 INFO jdbc.Utils: Supplied authorities: node3:10000&lt;br/&gt;
17/02/06 20:28:13 INFO jdbc.Utils: Resolved authority: node3:10000&lt;br/&gt;
Open connection: jdbc:hive2://node3:10000 (225 ms)&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting query&lt;br/&gt;
Query executed successfully (84 ms)&lt;br/&gt;
Ln:1 SELECT completed successfully&lt;br/&gt;
Ln:1 Standalone SELECT executed: 1 columns in the result set&lt;br/&gt;
cols:1&lt;br/&gt;
org.apache.hive.service.cli.HiveSQLException: java.io.IOException: org.apache.hadoop.hive.ql.metadata.HiveException: java.util.zip.ZipException: invalid code lengths set&lt;br/&gt;
 at org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:258)&lt;br/&gt;
 at org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:244)&lt;br/&gt;
 at org.apache.hive.jdbc.HiveQueryResultSet.next(HiveQueryResultSet.java:364)&lt;br/&gt;
 at org.apache.hive.hplsql.Select.select(Select.java:116)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.visitSelect_stmt(Exec.java:870)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.visitSelect_stmt(Exec.java:1)&lt;br/&gt;
 at org.apache.hive.hplsql.HplsqlParser$Select_stmtContext.accept(HplsqlParser.java:14249)&lt;br/&gt;
 at org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:70)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.visitStmt(Exec.java:865)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.visitStmt(Exec.java:1)&lt;br/&gt;
 at org.apache.hive.hplsql.HplsqlParser$StmtContext.accept(HplsqlParser.java:998)&lt;br/&gt;
 at org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:70)&lt;br/&gt;
 at org.apache.hive.hplsql.HplsqlBaseVisitor.visitBlock(HplsqlBaseVisitor.java:28)&lt;br/&gt;
 at org.apache.hive.hplsql.HplsqlParser$BlockContext.accept(HplsqlParser.java:438)&lt;br/&gt;
 at org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:70)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.visitProgram(Exec.java:780)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.visitProgram(Exec.java:1)&lt;br/&gt;
 at org.apache.hive.hplsql.HplsqlParser$ProgramContext.accept(HplsqlParser.java:381)&lt;br/&gt;
 at org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visit(AbstractParseTreeVisitor.java:42)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.run(Exec.java:652)&lt;br/&gt;
 at org.apache.hive.hplsql.Exec.run(Exec.java:630)&lt;br/&gt;
 at org.apache.hive.hplsql.Hplsql.main(Hplsql.java:23)&lt;br/&gt;
Caused by: org.apache.hive.service.cli.HiveSQLException: java.io.IOException: org.apache.hadoop.hive.ql.metadata.HiveException: java.util.zip.ZipException: invalid code lengths set&lt;br/&gt;
 at org.apache.hive.service.cli.operation.SQLOperation.getNextRowSet(SQLOperation.java:352)&lt;br/&gt;
 at org.apache.hive.service.cli.operation.OperationManager.getOperationNextRowSet(OperationManager.java:223)&lt;br/&gt;
 at org.apache.hive.service.cli.session.HiveSessionImpl.fetchResults(HiveSessionImpl.java:716)&lt;br/&gt;
 at sun.reflect.GeneratedMethodAccessor51.invoke(Unknown Source)&lt;br/&gt;
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
 at java.lang.reflect.Method.invoke(Method.java:483)&lt;br/&gt;
 at org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:78)&lt;br/&gt;
 at org.apache.hive.service.cli.session.HiveSessionProxy.access$000(HiveSessionProxy.java:36)&lt;br/&gt;
 at org.apache.hive.service.cli.session.HiveSessionProxy$1.run(HiveSessionProxy.java:63)&lt;br/&gt;
 at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
 at javax.security.auth.Subject.doAs(Subject.java:422)&lt;br/&gt;
 at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1709)&lt;br/&gt;
 at org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:59)&lt;br/&gt;
 at com.sun.proxy.$Proxy20.fetchResults(Unknown Source)&lt;br/&gt;
 at org.apache.hive.service.cli.CLIService.fetchResults(CLIService.java:456)&lt;br/&gt;
 at org.apache.hive.service.cli.thrift.ThriftCLIService.FetchResults(ThriftCLIService.java:672)&lt;br/&gt;
 at org.apache.hive.service.cli.thrift.TCLIService$Processor$FetchResults.getResult(TCLIService.java:1557)&lt;br/&gt;
 at org.apache.hive.service.cli.thrift.TCLIService$Processor$FetchResults.getResult(TCLIService.java:1542)&lt;br/&gt;
 at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)&lt;br/&gt;
 at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)&lt;br/&gt;
 at org.apache.hive.service.auth.TSetIpAddressProcessor.process(TSetIpAddressProcessor.java:56)&lt;br/&gt;
 at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:285)&lt;br/&gt;
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
 at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.io.IOException: org.apache.hadoop.hive.ql.metadata.HiveException: java.util.zip.ZipException: invalid code lengths set&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:157)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:1745)&lt;br/&gt;
 at org.apache.hive.service.cli.operation.SQLOperation.getNextRowSet(SQLOperation.java:347)&lt;br/&gt;
 ... 24 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.util.zip.ZipException: invalid code lengths set&lt;br/&gt;
 at org.apache.hive.hplsql.Udf.evaluate(Udf.java:70)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.ExprNodeGenericFuncEvaluator._evaluate(ExprNodeGenericFuncEvaluator.java:186)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:77)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:65)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.SelectOperator.process(SelectOperator.java:81)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:838)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:117)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:429)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:421)&lt;br/&gt;
 at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:143)&lt;br/&gt;
 ... 26 more&lt;/p&gt;

</description>
                <environment>&lt;p&gt;HDP : 2.4.2.0-258&lt;br/&gt;
Hive lib : hive-XXX-1.2.1000.2.4.2.0-258.jar&lt;br/&gt;
Hplsql : hplsql-0.3.17.jar&lt;/p&gt;</environment>
        <key id="13040859">HIVE-15832</key>
            <summary>Hplsql UDF doesn&apos;t work in Hplsql</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ferhui">Fei Hui</assignee>
                                    <reporter username="golem">Sungwoon Ma</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Tue, 7 Feb 2017 05:03:38 +0000</created>
                <updated>Sat, 25 Mar 2017 20:39:47 +0000</updated>
                                            <version>1.2.1</version>
                                    <fixVersion>1.2.1</fixVersion>
                                    <component>hpl/sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15857497" author="ferhui" created="Wed, 8 Feb 2017 06:38:45 +0000"  >&lt;p&gt;i have reproduced it on hive 2.2.0&lt;br/&gt;
i will work on it&lt;/p&gt;</comment>
                            <comment id="15857499" author="ferhui" created="Wed, 8 Feb 2017 06:40:21 +0000"  >&lt;p&gt;here is error log i get, it is different hive 1.2.1&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hive.hplsql.Exec.setVariable(Exec.java:148) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hive.hplsql.Exec.setVariable(Exec.java:158) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hive.hplsql.Udf.setParameters(Udf.java:92) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hive.hplsql.Udf.evaluate(Udf.java:74) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeGenericFuncEvaluator._evaluate(ExprNodeGenericFuncEvaluator.java:187) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:80) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:68) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.SelectOperator.process(SelectOperator.java:88) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:897) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:130) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:438) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:430) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:147) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:2209) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hive.service.cli.operation.SQLOperation.getNextRowSet(SQLOperation.java:492) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-service-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="15857539" author="ferhui" created="Wed, 8 Feb 2017 07:07:33 +0000"  >&lt;p&gt;patch uploaded&lt;/p&gt;</comment>
                            <comment id="15857548" author="ferhui" created="Wed, 8 Feb 2017 07:10:20 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15857885" author="hiveqa" created="Wed, 8 Feb 2017 11:53:22 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851574/HIVE-15832.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851574/HIVE-15832.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10241 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3437/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3437/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3437/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3437/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3437/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3437/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851574 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15857906" author="ferhui" created="Wed, 8 Feb 2017 12:11:16 +0000"  >&lt;p&gt;failing tests are not related, could please take a look and give suggestions &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt;, thanks&lt;/p&gt;</comment>
                            <comment id="15857912" author="ferhui" created="Wed, 8 Feb 2017 12:15:09 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt;, could you please give any suggestions ,thanks&lt;/p&gt;</comment>
                            <comment id="15858764" author="ferd" created="Thu, 9 Feb 2017 00:27:27 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ferhui&quot; class=&quot;user-hover&quot; rel=&quot;ferhui&quot;&gt;Fei Hui&lt;/a&gt; for working on this issue. Your patch is addressing a NPE instead of the error mentioned in the description. Can you file a new ticket about the error you met and attach your patch there? BTW, is it possible to add some tests to avoid regression?&lt;/p&gt;</comment>
                            <comment id="15858842" author="ferhui" created="Thu, 9 Feb 2017 01:53:22 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; i will file a new ticket. &lt;/p&gt;</comment>
                            <comment id="15941960" author="pxiong" created="Sat, 25 Mar 2017 20:39:47 +0000"  >&lt;p&gt;Hello, I am deferring this to Hive 3.0 as we are going to cut the first RC and it is not marked as blocker. Please feel free to commit to the branch if this can be resolved before the release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851574" name="HIVE-15832.patch" size="865" author="ferhui" created="Wed, 8 Feb 2017 07:07:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2017 06:38:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39pan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12340268</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>


<item>
            <title>[HIVE-15833] Add unit tests for org.json usage on branch-1</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15833</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Before switching implementation, we should add some tests that capture the current behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13040886">HIVE-15833</key>
            <summary>Add unit tests for org.json usage on branch-1</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13018999">HIVE-15144</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dvoros">Daniel Voros</assignee>
                                    <reporter username="dvoros">Daniel Voros</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Tue, 7 Feb 2017 08:17:49 +0000</created>
                <updated>Fri, 31 Mar 2017 08:19:38 +0000</updated>
                            <resolved>Fri, 31 Mar 2017 07:03:58 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15858267" author="dvoros" created="Wed, 8 Feb 2017 17:22:05 +0000"  >&lt;p&gt;Attaching patch #1. This adds test to all non-trivial usages of the org.json library.&lt;/p&gt;

&lt;p&gt;The new tests also use org.json, but only to a minimal extent and only where it is necessary to interact with the units under tests (e.g. when testing a method with a JSONObject attribute). These usages should be trivial to replace when switching implementation.&lt;/p&gt;

&lt;p&gt;In every other place, where org.json was not absolutely necessary, Jackson is used to interact with (mostly to compare) JSON objects. Jackson was chosen over json-simple and gson, as it is already a dependency of Hive and it&apos;s object mapping capabilities might come in handy when switching implementation.&lt;/p&gt;</comment>
                            <comment id="15858483" author="hiveqa" created="Wed, 8 Feb 2017 20:14:20 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851665/HIVE-15833.1-branch-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851665/HIVE-15833.1-branch-1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 7 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 162 failed/errored test(s), 8110 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAcidOnTez - did not produce a TEST-*.xml file (likely timed out) (batchId=376)
TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=358)
TestAuthorizationPreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=391)
TestAuthzApiEmbedAuthorizerInEmbed - did not produce a TEST-*.xml file (likely timed out) (batchId=368)
TestAuthzApiEmbedAuthorizerInRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=374)
TestBeeLineWithArgs - did not produce a TEST-*.xml file (likely timed out) (batchId=398)
TestCLIAuthzSessionContext - did not produce a TEST-*.xml file (likely timed out) (batchId=416)
TestClearDanglingScratchDir - did not produce a TEST-*.xml file (likely timed out) (batchId=383)
TestClientSideAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=390)
TestCompactor - did not produce a TEST-*.xml file (likely timed out) (batchId=379)
TestCreateUdfEntities - did not produce a TEST-*.xml file (likely timed out) (batchId=378)
TestCustomAuthentication - did not produce a TEST-*.xml file (likely timed out) (batchId=399)
TestDBTokenStore - did not produce a TEST-*.xml file (likely timed out) (batchId=342)
TestDDLWithRemoteMetastoreSecondNamenode - did not produce a TEST-*.xml file (likely timed out) (batchId=377)
TestDynamicSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=345)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=355)
TestEmbeddedThriftBinaryCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=402)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=350)
TestFolderPermissions - did not produce a TEST-*.xml file (likely timed out) (batchId=385)
TestHS2AuthzContext - did not produce a TEST-*.xml file (likely timed out) (batchId=419)
TestHS2AuthzSessionContext - did not produce a TEST-*.xml file (likely timed out) (batchId=420)
TestHS2ClearDanglingScratchDir - did not produce a TEST-*.xml file (likely timed out) (batchId=406)
TestHS2ImpersonationWithRemoteMS - did not produce a TEST-*.xml file (likely timed out) (batchId=407)
TestHiveAuthorizerCheckInvocation - did not produce a TEST-*.xml file (likely timed out) (batchId=394)
TestHiveAuthorizerShowFilters - did not produce a TEST-*.xml file (likely timed out) (batchId=393)
TestHiveHistory - did not produce a TEST-*.xml file (likely timed out) (batchId=396)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=370)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=360)
TestHiveMetaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=373)
TestHiveServer2 - did not produce a TEST-*.xml file (likely timed out) (batchId=422)
TestHiveServer2SessionTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=423)
TestHiveSessionImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=403)
TestHs2Hooks - did not produce a TEST-*.xml file (likely timed out) (batchId=375)
TestHs2HooksWithMiniKdc - did not produce a TEST-*.xml file (likely timed out) (batchId=451)
TestJdbcDriver2 - did not produce a TEST-*.xml file (likely timed out) (batchId=410)
TestJdbcMetadataApiAuth - did not produce a TEST-*.xml file (likely timed out) (batchId=421)
TestJdbcWithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=415)
TestJdbcWithMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=412)
TestJdbcWithMiniKdc - did not produce a TEST-*.xml file (likely timed out) (batchId=448)
TestJdbcWithMiniKdcCookie - did not produce a TEST-*.xml file (likely timed out) (batchId=447)
TestJdbcWithMiniKdcSQLAuthBinary - did not produce a TEST-*.xml file (likely timed out) (batchId=445)
TestJdbcWithMiniKdcSQLAuthHttp - did not produce a TEST-*.xml file (likely timed out) (batchId=450)
TestJdbcWithMiniMr - did not produce a TEST-*.xml file (likely timed out) (batchId=411)
TestJdbcWithSQLAuthUDFBlacklist - did not produce a TEST-*.xml file (likely timed out) (batchId=417)
TestJdbcWithSQLAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=418)
TestLocationQueries - did not produce a TEST-*.xml file (likely timed out) (batchId=382)
TestMTQueries - did not produce a TEST-*.xml file (likely timed out) (batchId=380)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=367)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=371)
TestMetaStoreAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=356)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=354)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=353)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=363)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=366)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=369)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=365)
TestMetaStoreMetrics - did not produce a TEST-*.xml file (likely timed out) (batchId=346)
TestMetaStoreUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=347)
TestMetastoreAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=387)
TestMetastoreVersion - did not produce a TEST-*.xml file (likely timed out) (batchId=362)
TestMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=424)
TestMiniSparkOnYarnCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=452)
TestMultiAuthorizationPreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=388)
TestMultiSessionsHS2WithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=414)
TestNoSaslAuth - did not produce a TEST-*.xml file (likely timed out) (batchId=413)
TestOperationLoggingAPIWithMr - did not produce a TEST-*.xml file (likely timed out) (batchId=404)
TestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file (likely timed out) (batchId=405)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=351)
TestPasswordWithConfig - did not produce a TEST-*.xml file (likely timed out) (batchId=389)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=359)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=348)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=364)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=357)
TestSSL - did not produce a TEST-*.xml file (likely timed out) (batchId=408)
TestSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=397)
TestSemanticAnalyzerHookLoading - did not produce a TEST-*.xml file (likely timed out) (batchId=381)
TestSerdeWithFieldComments - did not produce a TEST-*.xml file (likely timed out) (batchId=344)
TestServerSpecificConfig - did not produce a TEST-*.xml file (likely timed out) (batchId=361)
TestServiceDiscovery - did not produce a TEST-*.xml file (likely timed out) (batchId=409)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=352)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=349)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=372)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=191)
	[bucketmapjoin4.q,bucket_map_join_spark2.q,bucket_map_join_spark4.q,union21.q,timestamp_2.q,date_join1.q,mergejoins.q,smb_mapjoin_11.q,auto_sortmerge_join_3.q,mapjoin_test_outer.q,vectorization_9.q,merge2.q,auto_join_without_localtask.q,bucketmapjoin2.q,multi_join_union.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=192)
	[parallel_join1.q,join_cond_pushdown_unqual4.q,union_remove_7.q,join13.q,join_vc.q,groupby_cube1.q,join_reorder4.q,sample3.q,smb_mapjoin_19.q,stats16.q,union23.q,union.q,union31.q,cbo_udf_udaf.q,ptf_decimal.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=193)
	[union27.q,mapjoin_subquery2.q,union12.q,groupby7_map_multi_single_reducer.q,varchar_join1.q,join7.q,mapjoin1.q,skewjoinopt2.q,bucketsortoptimize_insert_2.q,smb_mapjoin_17.q,script_env_var1.q,groupby7_map.q,groupby3.q,bucketsortoptimize_insert_8.q,union20.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=194)
	[ptf_general_queries.q,auto_join_reordering_values.q,sample2.q,join1.q,decimal_join.q,join32_lessSize.q,order2.q,skewjoinopt18.q,union_remove_18.q,join25.q,union_remove_4.q,smb_mapjoin_25.q,groupby9.q,bucketsortoptimize_insert_6.q,ctas.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=195)
	[skewjoinopt15.q,list_bucket_dml_2.q,groupby_map_ppr.q,join_rc.q,union14.q,load_dyn_part3.q,smb_mapjoin_12.q,vector_cast_constant.q,auto_sortmerge_join_15.q,union10.q,auto_join11.q,load_dyn_part7.q,vectorization_12.q,groupby_sort_skew_1_23.q,skewjoinopt12.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=196)
	[auto_join18.q,input1_limit.q,auto_join26.q,union_remove_14.q,auto_sortmerge_join_14.q,stats_counter_partitioned.q,union22.q,bucket_map_join_tez2.q,smb_mapjoin_22.q,join_reorder.q,stats15.q,transform_ppr1.q,sample1.q,bucketmapjoin8.q,union34.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=197)
	[avro_joins.q,skewjoinopt16.q,bucket3.q,skewjoinopt13.q,auto_join14.q,vectorization_14.q,stats1.q,cbo_stats.q,auto_sortmerge_join_6.q,auto_join15.q,union_remove_24.q,union_view.q,join22.q,join33.q,ptf_matchpath.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=198)
	[vector_decimal_aggregate.q,skewjoin_noskew.q,leftsemijoin_mr.q,auto_join23.q,bucketmapjoin9.q,input18.q,cbo_simple_select.q,ptf.q,vectorized_nested_mapjoin.q,sample4.q,union18.q,multi_insert_gby.q,groupby1.q,join_reorder2.q,join_cond_pushdown_unqual2.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=199)
	[order.q,ppd_join3.q,join10.q,union_remove_11.q,vectorized_math_funcs.q,union_ppr.q,skewjoinopt6.q,union_remove_19.q,join14.q,join32.q,groupby_multi_single_reducer2.q,stats3.q,parquet_join.q,outer_join_ppr.q,join26.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=200)
	[skewjoinopt3.q,skewjoinopt19.q,join_merge_multi_expressions.q,skewjoinopt10.q,union5.q,insert_into1.q,vectorization_4.q,stats_counter.q,vectorization_2.q,vector_left_outer_join.q,decimal_1_1.q,semijoin.q,skewjoinopt9.q,rcfile_bigdata.q,load_dyn_part10.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=201)
	[multi_insert_mixed.q,smb_mapjoin_4.q,timestamp_comparison.q,join_cond_pushdown_3.q,insert1.q,union_remove_10.q,mapreduce2.q,bucketmapjoin_negative.q,udf_in_file.q,skewjoinopt5.q,auto_join12.q,skewjoin.q,vector_count_distinct.q,smb_mapjoin_3.q,stats10.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=202)
	[bucketsortoptimize_insert_4.q,skewjoinopt8.q,vectorization_10.q,auto_join18_multi_distinct.q,custom_input_output_format.q,insert_into3.q,vectorization_part_project.q,vectorization_6.q,skewjoinopt4.q,count.q,stats9.q,auto_join7.q,parallel.q,union33.q,union_lateralview.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=203)
	[skewjoin_union_remove_2.q,avro_decimal_native.q,timestamp_null.q,bucketmapjoin_negative3.q,union32.q,groupby_ppr.q,vector_varchar_4.q,stats6.q,stats_only_null.q,join18_multi_distinct.q,cross_join.q,sample8.q,timestamp_1.q,join24.q,join_star.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=204)
	[auto_join30.q,union_remove_1.q,ppd_outer_join2.q,date_udf.q,join16.q,smb_mapjoin_13.q,bucketmapjoin7.q,smb_mapjoin_18.q,join19.q,metadata_only_queries.q,union6.q,cbo_subq_in.q,vectorization_part.q,groupby3_map_multi_distinct.q,vectorized_timestamp_funcs.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=205)
	[bucketmapjoin12.q,auto_join10.q,ptf_rcfile.q,join20.q,vector_elt.q,multi_insert.q,groupby_rollup1.q,ppd_join5.q,join_filters_overlap.q,vector_string_concat.q,join_empty.q,smb_mapjoin_6.q,auto_sortmerge_join_12.q,groupby_bigdata.q,innerjoin.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=206)
	[tez_joins_explain.q,input17.q,ppd_gby_join.q,vectorized_rcfile_columnar.q,ppd_join.q,join_cond_pushdown_1.q,union_remove_6_subq.q,timestamp_3.q,load_dyn_part6.q,load_dyn_part9.q,multi_insert_gby2.q,vectorization_11.q,avro_compression_enabled_native.q,stats_noscan_2.q,transform1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=207)
	[smb_mapjoin_21.q,load_dyn_part15.q,transform2.q,subquery_exists.q,cbo_semijoin.q,bucketmapjoin13.q,join27.q,alter_merge_stats_orc.q,union_remove_2.q,groupby_position.q,join12.q,smb_mapjoin_8.q,join21.q,auto_join16.q,union9.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=208)
	[vectorization_16.q,enforce_order.q,join_casesensitive.q,ppd_join2.q,ppd_outer_join5.q,mapjoin_memcheck.q,create_merge_compressed.q,louter_join_ppr.q,sample9.q,smb_mapjoin_16.q,vectorization_not.q,having.q,ppd_outer_join1.q,vector_orderby_5.q,union_remove_12.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=209)
	[bucketmapjoin3.q,load_dyn_part5.q,transform_ppr2.q,join23.q,groupby7_map_skew.q,cbo_gby.q,auto_join31.q,auto_sortmerge_join_1.q,join_cond_pushdown_unqual1.q,bucket_map_join_spark3.q,union28.q,escape_sortby1.q,leftsemijoin.q,union_remove_6.q,join29.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=210)
	[escape_distributeby1.q,join9.q,groupby2.q,vectorization_pushdown.q,union_date.q,join_cond_pushdown_unqual3.q,join8.q,sample10.q,ppd_outer_join3.q,cross_product_check_1.q,statsfs.q,auto_sortmerge_join_2.q,auto_join_stats.q,input_part2.q,groupby_multi_single_reducer3.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=211)
	[groupby_map_ppr_multi_distinct.q,vectorization_13.q,mapjoin_mapjoin.q,union2.q,join41.q,groupby8_map.q,cbo_gby_empty.q,vectorization_short_regress.q,identity_project_remove_skip.q,stats5.q,groupby8_map_skew.q,mapjoin_subquery.q,bucket2.q,smb_mapjoin_1.q,union_remove_8.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=212)
	[join39.q,bucketsortoptimize_insert_7.q,vector_distinct_2.q,bucketmapjoin10.q,join11.q,cbo_subq_not_in.q,auto_sortmerge_join_16.q,windowing.q,join40.q,skewjoinopt7.q,stats7.q,annotate_stats_join.q,multi_insert_lateral_view.q,ptf_streaming.q,join_1to1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=213)
	[timestamp_lazy.q,union29.q,runtime_skewjoin_mapjoin_spark.q,auto_join22.q,union8.q,union13.q,dynamic_rdd_cache.q,auto_join29.q,merge1.q,mapjoin_distinct.q,union_remove_3.q,vector_decimal_mapjoin.q,sample5.q,multi_insert_move_tasks_share_dependencies.q,join_array.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=214)
	[ppd_join4.q,load_dyn_part2.q,smb_mapjoin_7.q,vectorization_5.q,smb_mapjoin_2.q,ppd_join_filter.q,column_access_stats.q,stats0.q,vector_between_in.q,vectorized_string_funcs.q,vectorization_1.q,bucket_map_join_2.q,temp_table_join1.q,vectorized_case.q,stats_noscan_1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=215)
	[stats2.q,groupby3_map_skew.q,join_cond_pushdown_2.q,union19.q,union24.q,union_remove_5.q,groupby7_noskew_multi_single_reducer.q,groupby_multi_single_reducer.q,index_auto_self_join.q,auto_smb_mapjoin_14.q,script_env_var2.q,pcr.q,auto_join_filters.q,join0.q,join37.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=216)
	[stats12.q,groupby4.q,union_top_level.q,groupby10.q,subquery_in.q,mapjoin_filter_on_outerjoin.q,stats14.q,auto_sortmerge_join_4.q,limit_partition_metadataonly.q,load_dyn_part4.q,union3.q,smb_mapjoin_14.q,groupby3_noskew_multi_distinct.q,stats18.q,union_remove_21.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
	[auto_sortmerge_join_13.q,join4.q,join35.q,join_reorder3.q,auto_join19.q,sample7.q,vectorization_15.q,union7.q,vectorization_nested_udf.q,load_dyn_part8.q,vector_groupby_3.q,vectorized_ptf.q,auto_join2.q,alter_merge_orc.q,bucket_map_join_1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=218)
	[groupby_complex_types.q,groupby3_map.q,union11.q,union26.q,mapreduce1.q,mapjoin_addjar.q,bucketmapjoin_negative2.q,bucket_map_join_spark1.q,udf_example_add.q,vectorization_div0.q,union_remove_17.q,auto_join_nulls.q,ppd_outer_join4.q,sample6.q,auto_sortmerge_join_9.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=219)
	[multigroupby_singlemr.q,auto_join4.q,mapjoin_decimal.q,groupby7.q,join34.q,join5.q,sort.q,join17.q,union_script.q,add_part_multiple.q,limit_pushdown.q,uniquejoin.q,metadata_only_queries_with_filters.q,union25.q,load_dyn_part13.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=220)
	[table_access_keys_stats.q,bucketmapjoin11.q,union_remove_9.q,mergejoins_mixed.q,join_nullsafe.q,stats8.q,auto_join28.q,skewjoinopt14.q,union17.q,vectorized_shufflejoin.q,groupby8_noskew.q,auto_sortmerge_join_10.q,groupby11.q,skewjoinopt11.q,load_dyn_part11.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=221)
	[script_pipe.q,auto_join24.q,ptf_seqfile.q,union_remove_23.q,filter_join_breaktask.q,parallel_join0.q,join_thrift.q,vectorized_mapjoin.q,groupby8.q,union4.q,auto_join5.q,smb_mapjoin_20.q,groupby_multi_insert_common_distinct.q,join6.q,union_remove_16.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=222)
	[ppd_transform.q,smb_mapjoin_15.q,auto_join9.q,vector_data_types.q,input13.q,bucket4.q,ppd_multi_insert.q,skewjoinopt20.q,input12.q,multi_insert_gby3.q,join_map_ppr.q,auto_sortmerge_join_8.q,escape_clusterby1.q,reduce_deduplicate_exclude_join.q,filter_join_breaktask2.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=223)
	[auto_join1.q,input14.q,union30.q,stats20.q,union_remove_22.q,vectorization_3.q,cbo_union.q,union_date_trim.q,disable_merge_for_bucketing.q,join3.q,skewjoinopt1.q,join_alt_syntax.q,join30.q,groupby_sort_1_23.q,timestamp_udf.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=224)
	[stats13.q,router_join_ppr.q,join15.q,auto_join13.q,join_hive_626.q,vector_mapjoin_reduce.q,auto_join21.q,ptf_register_tblfn.q,join_view.q,join_merging.q,groupby3_noskew.q,optimize_nullscan.q,join38.q,auto_join3.q,vectorization_decimal_date.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=225)
	[load_dyn_part12.q,scriptfile1.q,groupby7_noskew.q,bucketmapjoin1.q,auto_join17.q,subquery_multiinsert.q,lateral_view_explode2.q,tez_join_tests.q,join28.q,join_cond_pushdown_4.q,vectorization_0.q,load_dyn_part1.q,skewjoinopt17.q,union_null.q,bucketmapjoin5.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
	[join36.q,union_remove_15.q,smb_mapjoin_10.q,bucket_map_join_tez1.q,temp_table.q,union_remove_13.q,auto_join8.q,auto_join6.q,auto_join0.q,vectorization_17.q,auto_join_stats2.q,skewjoin_union_remove_1.q,union16.q,auto_join32.q,union_remove_20.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
	[join2.q,avro_joins_native.q,join18.q,auto_join20.q,smb_mapjoin_5.q,vector_char_4.q,auto_sortmerge_join_5.q,cross_product_check_2.q,union_remove_25.q,insert_into2.q,escape_orderby1.q,cbo_limit.q,stats_partscan_1_23.q,groupby_complex_types_multi_single_reducer.q,join_literals.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
	[union15.q,auto_sortmerge_join_7.q,join31.q,auto_join27.q,load_dyn_part14.q]
TestSparkNegativeCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=453)
TestStorageBasedClientSideAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=395)
TestStorageBasedMetastoreAuthorizationDrops - did not produce a TEST-*.xml file (likely timed out) (batchId=386)
TestStorageBasedMetastoreAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=384)
TestStorageBasedMetastoreAuthorizationReads - did not produce a TEST-*.xml file (likely timed out) (batchId=392)
TestThriftBinaryCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=400)
TestThriftHttpCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=401)
TestZooKeeperTokenStore - did not produce a TEST-*.xml file (likely timed out) (batchId=343)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_globallimit (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_mapjoin (batchId=16)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_annotate_stats_table (batchId=32)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_drop_database_removes_partition_dirs (batchId=98)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_drop_table_removes_partition_dirs (batchId=132)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization (batchId=81)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization_acid (batchId=69)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby10 (batchId=95)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby11 (batchId=111)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby8 (batchId=114)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ivyDownload (batchId=38)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_semijoin5 (batchId=23)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_temp_table_gb1 (batchId=50)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_fast_stats (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_string_decimal (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_windowing (batchId=82)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_drop_partition (batchId=437)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynamic_partition_pruning (batchId=175)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_groupby2 (batchId=180)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_only_null (batchId=174)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_empty (batchId=176)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union_fast_stats (batchId=181)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_dynamic_partition_pruning (batchId=175)
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_groupby2 (batchId=143)
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_index_bitmap_auto (batchId=138)
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_2 (batchId=147)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import (batchId=153)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_right_side_join (batchId=153)
org.apache.hadoop.hive.ql.exec.TestExplainTask.testOutputMapJsonShouldMatch (batchId=698)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenFailure (batchId=593)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=269)
org.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForDBTokenStore (batchId=449)
org.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForMemoryTokenStore (batchId=449)
org.apache.hive.minikdc.TestMiniHiveKdc.testLogin (batchId=446)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3444/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3444/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3444/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3444/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3444/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3444/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 162 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851665 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15948524" author="kgyrtkirk" created="Thu, 30 Mar 2017 07:05:50 +0000"  >&lt;p&gt;LGTM +1&lt;/p&gt;</comment>
                            <comment id="15948645" author="hiveqa" created="Thu, 30 Mar 2017 08:22:33 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851665/HIVE-15833.1-branch-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851665/HIVE-15833.1-branch-1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 7 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 162 failed/errored test(s), 8112 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAcidOnTez - did not produce a TEST-*.xml file (likely timed out) (batchId=376)
TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=358)
TestAuthorizationPreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=391)
TestAuthzApiEmbedAuthorizerInEmbed - did not produce a TEST-*.xml file (likely timed out) (batchId=368)
TestAuthzApiEmbedAuthorizerInRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=374)
TestBeeLineWithArgs - did not produce a TEST-*.xml file (likely timed out) (batchId=398)
TestCLIAuthzSessionContext - did not produce a TEST-*.xml file (likely timed out) (batchId=416)
TestClearDanglingScratchDir - did not produce a TEST-*.xml file (likely timed out) (batchId=383)
TestClientSideAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=390)
TestCompactor - did not produce a TEST-*.xml file (likely timed out) (batchId=379)
TestCreateUdfEntities - did not produce a TEST-*.xml file (likely timed out) (batchId=378)
TestCustomAuthentication - did not produce a TEST-*.xml file (likely timed out) (batchId=399)
TestDBTokenStore - did not produce a TEST-*.xml file (likely timed out) (batchId=342)
TestDDLWithRemoteMetastoreSecondNamenode - did not produce a TEST-*.xml file (likely timed out) (batchId=377)
TestDynamicSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=345)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=355)
TestEmbeddedThriftBinaryCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=402)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=350)
TestFolderPermissions - did not produce a TEST-*.xml file (likely timed out) (batchId=385)
TestHS2AuthzContext - did not produce a TEST-*.xml file (likely timed out) (batchId=419)
TestHS2AuthzSessionContext - did not produce a TEST-*.xml file (likely timed out) (batchId=420)
TestHS2ClearDanglingScratchDir - did not produce a TEST-*.xml file (likely timed out) (batchId=406)
TestHS2ImpersonationWithRemoteMS - did not produce a TEST-*.xml file (likely timed out) (batchId=407)
TestHiveAuthorizerCheckInvocation - did not produce a TEST-*.xml file (likely timed out) (batchId=394)
TestHiveAuthorizerShowFilters - did not produce a TEST-*.xml file (likely timed out) (batchId=393)
TestHiveHistory - did not produce a TEST-*.xml file (likely timed out) (batchId=396)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=370)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=360)
TestHiveMetaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=373)
TestHiveServer2 - did not produce a TEST-*.xml file (likely timed out) (batchId=422)
TestHiveServer2SessionTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=423)
TestHiveSessionImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=403)
TestHs2Hooks - did not produce a TEST-*.xml file (likely timed out) (batchId=375)
TestHs2HooksWithMiniKdc - did not produce a TEST-*.xml file (likely timed out) (batchId=451)
TestJdbcDriver2 - did not produce a TEST-*.xml file (likely timed out) (batchId=410)
TestJdbcMetadataApiAuth - did not produce a TEST-*.xml file (likely timed out) (batchId=421)
TestJdbcWithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=415)
TestJdbcWithMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=412)
TestJdbcWithMiniKdc - did not produce a TEST-*.xml file (likely timed out) (batchId=448)
TestJdbcWithMiniKdcCookie - did not produce a TEST-*.xml file (likely timed out) (batchId=447)
TestJdbcWithMiniKdcSQLAuthBinary - did not produce a TEST-*.xml file (likely timed out) (batchId=445)
TestJdbcWithMiniKdcSQLAuthHttp - did not produce a TEST-*.xml file (likely timed out) (batchId=450)
TestJdbcWithMiniMr - did not produce a TEST-*.xml file (likely timed out) (batchId=411)
TestJdbcWithSQLAuthUDFBlacklist - did not produce a TEST-*.xml file (likely timed out) (batchId=417)
TestJdbcWithSQLAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=418)
TestLocationQueries - did not produce a TEST-*.xml file (likely timed out) (batchId=382)
TestMTQueries - did not produce a TEST-*.xml file (likely timed out) (batchId=380)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=367)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=371)
TestMetaStoreAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=356)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=354)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=353)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=363)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=366)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=369)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=365)
TestMetaStoreMetrics - did not produce a TEST-*.xml file (likely timed out) (batchId=346)
TestMetaStoreUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=347)
TestMetastoreAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=387)
TestMetastoreVersion - did not produce a TEST-*.xml file (likely timed out) (batchId=362)
TestMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=424)
TestMiniSparkOnYarnCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=452)
TestMultiAuthorizationPreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=388)
TestMultiSessionsHS2WithLocalClusterSpark - did not produce a TEST-*.xml file (likely timed out) (batchId=414)
TestNoSaslAuth - did not produce a TEST-*.xml file (likely timed out) (batchId=413)
TestOperationLoggingAPIWithMr - did not produce a TEST-*.xml file (likely timed out) (batchId=404)
TestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file (likely timed out) (batchId=405)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=351)
TestPasswordWithConfig - did not produce a TEST-*.xml file (likely timed out) (batchId=389)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=359)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=348)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=364)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=357)
TestSSL - did not produce a TEST-*.xml file (likely timed out) (batchId=408)
TestSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=397)
TestSemanticAnalyzerHookLoading - did not produce a TEST-*.xml file (likely timed out) (batchId=381)
TestSerdeWithFieldComments - did not produce a TEST-*.xml file (likely timed out) (batchId=344)
TestServerSpecificConfig - did not produce a TEST-*.xml file (likely timed out) (batchId=361)
TestServiceDiscovery - did not produce a TEST-*.xml file (likely timed out) (batchId=409)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=352)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=349)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=372)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=191)
	[bucketmapjoin4.q,bucket_map_join_spark2.q,bucket_map_join_spark4.q,union21.q,timestamp_2.q,date_join1.q,mergejoins.q,smb_mapjoin_11.q,auto_sortmerge_join_3.q,mapjoin_test_outer.q,vectorization_9.q,merge2.q,auto_join_without_localtask.q,bucketmapjoin2.q,multi_join_union.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=192)
	[parallel_join1.q,join_cond_pushdown_unqual4.q,union_remove_7.q,join13.q,join_vc.q,groupby_cube1.q,join_reorder4.q,sample3.q,smb_mapjoin_19.q,stats16.q,union23.q,union.q,union31.q,cbo_udf_udaf.q,ptf_decimal.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=193)
	[union27.q,mapjoin_subquery2.q,union12.q,groupby7_map_multi_single_reducer.q,varchar_join1.q,join7.q,mapjoin1.q,skewjoinopt2.q,bucketsortoptimize_insert_2.q,smb_mapjoin_17.q,script_env_var1.q,groupby7_map.q,groupby3.q,bucketsortoptimize_insert_8.q,union20.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=194)
	[ptf_general_queries.q,auto_join_reordering_values.q,sample2.q,join1.q,decimal_join.q,join32_lessSize.q,order2.q,skewjoinopt18.q,union_remove_18.q,join25.q,union_remove_4.q,smb_mapjoin_25.q,groupby9.q,bucketsortoptimize_insert_6.q,ctas.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=195)
	[skewjoinopt15.q,list_bucket_dml_2.q,groupby_map_ppr.q,join_rc.q,union14.q,load_dyn_part3.q,smb_mapjoin_12.q,vector_cast_constant.q,auto_sortmerge_join_15.q,union10.q,auto_join11.q,load_dyn_part7.q,vectorization_12.q,groupby_sort_skew_1_23.q,skewjoinopt12.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=196)
	[auto_join18.q,input1_limit.q,auto_join26.q,union_remove_14.q,auto_sortmerge_join_14.q,stats_counter_partitioned.q,union22.q,bucket_map_join_tez2.q,smb_mapjoin_22.q,join_reorder.q,stats15.q,transform_ppr1.q,sample1.q,bucketmapjoin8.q,union34.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=197)
	[avro_joins.q,skewjoinopt16.q,bucket3.q,skewjoinopt13.q,auto_join14.q,vectorization_14.q,stats1.q,cbo_stats.q,auto_sortmerge_join_6.q,auto_join15.q,union_remove_24.q,union_view.q,join22.q,join33.q,ptf_matchpath.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=198)
	[vector_decimal_aggregate.q,skewjoin_noskew.q,leftsemijoin_mr.q,auto_join23.q,bucketmapjoin9.q,input18.q,cbo_simple_select.q,ptf.q,vectorized_nested_mapjoin.q,sample4.q,union18.q,multi_insert_gby.q,groupby1.q,join_reorder2.q,join_cond_pushdown_unqual2.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=199)
	[order.q,ppd_join3.q,join10.q,union_remove_11.q,vectorized_math_funcs.q,union_ppr.q,skewjoinopt6.q,union_remove_19.q,join14.q,join32.q,groupby_multi_single_reducer2.q,stats3.q,parquet_join.q,outer_join_ppr.q,join26.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=200)
	[skewjoinopt3.q,skewjoinopt19.q,join_merge_multi_expressions.q,skewjoinopt10.q,union5.q,insert_into1.q,vectorization_4.q,stats_counter.q,vectorization_2.q,vector_left_outer_join.q,decimal_1_1.q,semijoin.q,skewjoinopt9.q,rcfile_bigdata.q,load_dyn_part10.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=201)
	[multi_insert_mixed.q,smb_mapjoin_4.q,timestamp_comparison.q,join_cond_pushdown_3.q,insert1.q,union_remove_10.q,mapreduce2.q,bucketmapjoin_negative.q,udf_in_file.q,skewjoinopt5.q,auto_join12.q,skewjoin.q,vector_count_distinct.q,smb_mapjoin_3.q,stats10.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=202)
	[bucketsortoptimize_insert_4.q,skewjoinopt8.q,vectorization_10.q,auto_join18_multi_distinct.q,custom_input_output_format.q,insert_into3.q,vectorization_part_project.q,vectorization_6.q,skewjoinopt4.q,count.q,stats9.q,auto_join7.q,parallel.q,union33.q,union_lateralview.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=203)
	[skewjoin_union_remove_2.q,avro_decimal_native.q,timestamp_null.q,bucketmapjoin_negative3.q,union32.q,groupby_ppr.q,vector_varchar_4.q,stats6.q,stats_only_null.q,join18_multi_distinct.q,cross_join.q,sample8.q,timestamp_1.q,join24.q,join_star.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=204)
	[auto_join30.q,union_remove_1.q,ppd_outer_join2.q,date_udf.q,join16.q,smb_mapjoin_13.q,bucketmapjoin7.q,smb_mapjoin_18.q,join19.q,metadata_only_queries.q,union6.q,cbo_subq_in.q,vectorization_part.q,groupby3_map_multi_distinct.q,vectorized_timestamp_funcs.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=205)
	[bucketmapjoin12.q,auto_join10.q,ptf_rcfile.q,join20.q,vector_elt.q,multi_insert.q,groupby_rollup1.q,ppd_join5.q,join_filters_overlap.q,vector_string_concat.q,join_empty.q,smb_mapjoin_6.q,auto_sortmerge_join_12.q,groupby_bigdata.q,innerjoin.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=206)
	[tez_joins_explain.q,input17.q,ppd_gby_join.q,vectorized_rcfile_columnar.q,ppd_join.q,join_cond_pushdown_1.q,union_remove_6_subq.q,timestamp_3.q,load_dyn_part6.q,load_dyn_part9.q,multi_insert_gby2.q,vectorization_11.q,avro_compression_enabled_native.q,stats_noscan_2.q,transform1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=207)
	[smb_mapjoin_21.q,load_dyn_part15.q,transform2.q,subquery_exists.q,cbo_semijoin.q,bucketmapjoin13.q,join27.q,alter_merge_stats_orc.q,union_remove_2.q,groupby_position.q,join12.q,smb_mapjoin_8.q,join21.q,auto_join16.q,union9.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=208)
	[vectorization_16.q,enforce_order.q,join_casesensitive.q,ppd_join2.q,ppd_outer_join5.q,mapjoin_memcheck.q,create_merge_compressed.q,louter_join_ppr.q,sample9.q,smb_mapjoin_16.q,vectorization_not.q,having.q,ppd_outer_join1.q,vector_orderby_5.q,union_remove_12.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=209)
	[bucketmapjoin3.q,load_dyn_part5.q,transform_ppr2.q,join23.q,groupby7_map_skew.q,cbo_gby.q,auto_join31.q,auto_sortmerge_join_1.q,join_cond_pushdown_unqual1.q,bucket_map_join_spark3.q,union28.q,escape_sortby1.q,leftsemijoin.q,union_remove_6.q,join29.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=210)
	[escape_distributeby1.q,join9.q,groupby2.q,vectorization_pushdown.q,union_date.q,join_cond_pushdown_unqual3.q,join8.q,sample10.q,ppd_outer_join3.q,cross_product_check_1.q,statsfs.q,auto_sortmerge_join_2.q,auto_join_stats.q,input_part2.q,groupby_multi_single_reducer3.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=211)
	[groupby_map_ppr_multi_distinct.q,vectorization_13.q,mapjoin_mapjoin.q,union2.q,join41.q,groupby8_map.q,cbo_gby_empty.q,vectorization_short_regress.q,identity_project_remove_skip.q,stats5.q,groupby8_map_skew.q,mapjoin_subquery.q,bucket2.q,smb_mapjoin_1.q,union_remove_8.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=212)
	[join39.q,bucketsortoptimize_insert_7.q,vector_distinct_2.q,bucketmapjoin10.q,join11.q,cbo_subq_not_in.q,auto_sortmerge_join_16.q,windowing.q,join40.q,skewjoinopt7.q,stats7.q,annotate_stats_join.q,multi_insert_lateral_view.q,ptf_streaming.q,join_1to1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=213)
	[timestamp_lazy.q,union29.q,runtime_skewjoin_mapjoin_spark.q,auto_join22.q,union8.q,union13.q,dynamic_rdd_cache.q,auto_join29.q,merge1.q,mapjoin_distinct.q,union_remove_3.q,vector_decimal_mapjoin.q,sample5.q,multi_insert_move_tasks_share_dependencies.q,join_array.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=214)
	[ppd_join4.q,load_dyn_part2.q,smb_mapjoin_7.q,vectorization_5.q,smb_mapjoin_2.q,ppd_join_filter.q,column_access_stats.q,stats0.q,vector_between_in.q,vectorized_string_funcs.q,vectorization_1.q,bucket_map_join_2.q,temp_table_join1.q,vectorized_case.q,stats_noscan_1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=215)
	[stats2.q,groupby3_map_skew.q,join_cond_pushdown_2.q,union19.q,union24.q,union_remove_5.q,groupby7_noskew_multi_single_reducer.q,groupby_multi_single_reducer.q,index_auto_self_join.q,auto_smb_mapjoin_14.q,script_env_var2.q,pcr.q,auto_join_filters.q,join0.q,join37.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=216)
	[stats12.q,groupby4.q,union_top_level.q,groupby10.q,subquery_in.q,mapjoin_filter_on_outerjoin.q,stats14.q,auto_sortmerge_join_4.q,limit_partition_metadataonly.q,load_dyn_part4.q,union3.q,smb_mapjoin_14.q,groupby3_noskew_multi_distinct.q,stats18.q,union_remove_21.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
	[auto_sortmerge_join_13.q,join4.q,join35.q,join_reorder3.q,auto_join19.q,sample7.q,vectorization_15.q,union7.q,vectorization_nested_udf.q,load_dyn_part8.q,vector_groupby_3.q,vectorized_ptf.q,auto_join2.q,alter_merge_orc.q,bucket_map_join_1.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=218)
	[groupby_complex_types.q,groupby3_map.q,union11.q,union26.q,mapreduce1.q,mapjoin_addjar.q,bucketmapjoin_negative2.q,bucket_map_join_spark1.q,udf_example_add.q,vectorization_div0.q,union_remove_17.q,auto_join_nulls.q,ppd_outer_join4.q,sample6.q,auto_sortmerge_join_9.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=219)
	[multigroupby_singlemr.q,auto_join4.q,mapjoin_decimal.q,groupby7.q,join34.q,join5.q,sort.q,join17.q,union_script.q,add_part_multiple.q,limit_pushdown.q,uniquejoin.q,metadata_only_queries_with_filters.q,union25.q,load_dyn_part13.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=220)
	[table_access_keys_stats.q,bucketmapjoin11.q,union_remove_9.q,mergejoins_mixed.q,join_nullsafe.q,stats8.q,auto_join28.q,skewjoinopt14.q,union17.q,vectorized_shufflejoin.q,groupby8_noskew.q,auto_sortmerge_join_10.q,groupby11.q,skewjoinopt11.q,load_dyn_part11.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=221)
	[script_pipe.q,auto_join24.q,ptf_seqfile.q,union_remove_23.q,filter_join_breaktask.q,parallel_join0.q,join_thrift.q,vectorized_mapjoin.q,groupby8.q,union4.q,auto_join5.q,smb_mapjoin_20.q,groupby_multi_insert_common_distinct.q,join6.q,union_remove_16.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=222)
	[ppd_transform.q,smb_mapjoin_15.q,auto_join9.q,vector_data_types.q,input13.q,bucket4.q,ppd_multi_insert.q,skewjoinopt20.q,input12.q,multi_insert_gby3.q,join_map_ppr.q,auto_sortmerge_join_8.q,escape_clusterby1.q,reduce_deduplicate_exclude_join.q,filter_join_breaktask2.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=223)
	[auto_join1.q,input14.q,union30.q,stats20.q,union_remove_22.q,vectorization_3.q,cbo_union.q,union_date_trim.q,disable_merge_for_bucketing.q,join3.q,skewjoinopt1.q,join_alt_syntax.q,join30.q,groupby_sort_1_23.q,timestamp_udf.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=224)
	[stats13.q,router_join_ppr.q,join15.q,auto_join13.q,join_hive_626.q,vector_mapjoin_reduce.q,auto_join21.q,ptf_register_tblfn.q,join_view.q,join_merging.q,groupby3_noskew.q,optimize_nullscan.q,join38.q,auto_join3.q,vectorization_decimal_date.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=225)
	[load_dyn_part12.q,scriptfile1.q,groupby7_noskew.q,bucketmapjoin1.q,auto_join17.q,subquery_multiinsert.q,lateral_view_explode2.q,tez_join_tests.q,join28.q,join_cond_pushdown_4.q,vectorization_0.q,load_dyn_part1.q,skewjoinopt17.q,union_null.q,bucketmapjoin5.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
	[join36.q,union_remove_15.q,smb_mapjoin_10.q,bucket_map_join_tez1.q,temp_table.q,union_remove_13.q,auto_join8.q,auto_join6.q,auto_join0.q,vectorization_17.q,auto_join_stats2.q,skewjoin_union_remove_1.q,union16.q,auto_join32.q,union_remove_20.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
	[join2.q,avro_joins_native.q,join18.q,auto_join20.q,smb_mapjoin_5.q,vector_char_4.q,auto_sortmerge_join_5.q,cross_product_check_2.q,union_remove_25.q,insert_into2.q,escape_orderby1.q,cbo_limit.q,stats_partscan_1_23.q,groupby_complex_types_multi_single_reducer.q,join_literals.q]
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
	[union15.q,auto_sortmerge_join_7.q,join31.q,auto_join27.q,load_dyn_part14.q]
TestSparkNegativeCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=453)
TestStorageBasedClientSideAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=395)
TestStorageBasedMetastoreAuthorizationDrops - did not produce a TEST-*.xml file (likely timed out) (batchId=386)
TestStorageBasedMetastoreAuthorizationProvider - did not produce a TEST-*.xml file (likely timed out) (batchId=384)
TestStorageBasedMetastoreAuthorizationReads - did not produce a TEST-*.xml file (likely timed out) (batchId=392)
TestThriftBinaryCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=400)
TestThriftHttpCLIService - did not produce a TEST-*.xml file (likely timed out) (batchId=401)
TestZooKeeperTokenStore - did not produce a TEST-*.xml file (likely timed out) (batchId=343)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_globallimit (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_mapjoin (batchId=16)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_annotate_stats_table (batchId=32)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_drop_database_removes_partition_dirs (batchId=98)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_drop_table_removes_partition_dirs (batchId=132)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization (batchId=81)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization_acid (batchId=69)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby10 (batchId=95)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby11 (batchId=111)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby8 (batchId=114)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ivyDownload (batchId=38)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_semijoin5 (batchId=23)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_temp_table_gb1 (batchId=50)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_fast_stats (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_string_decimal (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_windowing (batchId=82)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_drop_partition (batchId=437)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynamic_partition_pruning (batchId=175)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_groupby2 (batchId=180)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_only_null (batchId=174)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_empty (batchId=176)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union_fast_stats (batchId=181)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_dynamic_partition_pruning (batchId=175)
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_groupby2 (batchId=143)
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_index_bitmap_auto (batchId=138)
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_2 (batchId=147)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import (batchId=153)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_right_side_join (batchId=153)
org.apache.hadoop.hive.ql.exec.TestExplainTask.testOutputMapJsonShouldMatch (batchId=698)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenFailure (batchId=593)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=269)
org.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForDBTokenStore (batchId=449)
org.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForMemoryTokenStore (batchId=449)
org.apache.hive.minikdc.TestMiniHiveKdc.testLogin (batchId=446)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4464/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4464/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4464/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4464/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4464/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4464/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 162 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851665 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15950427" author="kgyrtkirk" created="Fri, 31 Mar 2017 07:03:58 +0000"  >&lt;p&gt;pushed to branch-1. Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dvoros&quot; class=&quot;user-hover&quot; rel=&quot;dvoros&quot;&gt;Daniel Voros&lt;/a&gt; for adding these tests!&lt;/p&gt;</comment>
                            <comment id="15950514" author="dvoros" created="Fri, 31 Mar 2017 08:19:38 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kgyrtkirk&quot; class=&quot;user-hover&quot; rel=&quot;kgyrtkirk&quot;&gt;Zoltan Haindrich&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13021146">HIVE-15224</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12851665" name="HIVE-15833.1-branch-1.patch" size="39375" author="dvoros" created="Wed, 8 Feb 2017 17:22:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2017 20:14:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39pgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15834] Add unit tests for org.json usage on master</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15834</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Before switching implementation, we should add some tests that capture the current behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13040887">HIVE-15834</key>
            <summary>Add unit tests for org.json usage on master</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13018999">HIVE-15144</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dvoros">Daniel Voros</assignee>
                                    <reporter username="dvoros">Daniel Voros</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 08:18:15 +0000</created>
                <updated>Tue, 22 May 2018 23:58:06 +0000</updated>
                            <resolved>Thu, 25 May 2017 19:28:35 +0000</resolved>
                                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15998425" author="dvoros" created="Fri, 5 May 2017 14:45:12 +0000"  >&lt;p&gt;Attaching patch #1. This adds test to all non-trivial usages of the org.json library.&lt;/p&gt;

&lt;p&gt;This is the port of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15833&quot; title=&quot;Add unit tests for org.json usage on branch-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15833&quot;&gt;&lt;del&gt;HIVE-15833&lt;/del&gt;&lt;/a&gt; with a few additions to cover new paths.&lt;/p&gt;</comment>
                            <comment id="15999462" author="hiveqa" created="Sat, 6 May 2017 15:17:54 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866629/HIVE-15834.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12866629/HIVE-15834.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 6 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10678 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[hybridgrace_hashjoin_1] (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=143)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5077/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5077/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5077/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5077/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5077/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5077/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12866629 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16000319" author="kgyrtkirk" created="Mon, 8 May 2017 06:19:00 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16000407" author="dvoros" created="Mon, 8 May 2017 08:00:38 +0000"  >&lt;p&gt;Attaching patch #2. This switches from HashMap to LinkedHashMap in tests. Could have led to failures as it did in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15224&quot; title=&quot;replace org.json usage in branch-1 with as minor changes as possible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15224&quot;&gt;&lt;del&gt;HIVE-15224&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16000560" author="hiveqa" created="Mon, 8 May 2017 10:17:01 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866848/HIVE-15834.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12866848/HIVE-15834.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 6 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 10680 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[columnstats_part_coltype] (batchId=155)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5107/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5107/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5107/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5107/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5107/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5107/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12866848 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16011138" author="kgyrtkirk" created="Mon, 15 May 2017 19:07:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dvoros&quot; class=&quot;user-hover&quot; rel=&quot;dvoros&quot;&gt;Daniel Voros&lt;/a&gt; seems like &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16485&quot; title=&quot;Enable outputName for RS operator in explain formatted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-16485&quot;&gt;&lt;del&gt;HIVE-16485&lt;/del&gt;&lt;/a&gt; have change some method signatures...could you rebase the patch?&lt;/p&gt;</comment>
                            <comment id="16022518" author="dvoros" created="Wed, 24 May 2017 08:23:08 +0000"  >&lt;p&gt;Attaching patch #3. This rebases the previous patch on the current master.&lt;/p&gt;</comment>
                            <comment id="16022666" author="hiveqa" created="Wed, 24 May 2017 10:19:27 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12869600/HIVE-15834.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12869600/HIVE-15834.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 6 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10774 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_scalar] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_join30] (batchId=149)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5416/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5416/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5416/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5416/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5416/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5416/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12869600 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16022775" author="dvoros" created="Wed, 24 May 2017 12:07:24 +0000"  >&lt;p&gt;Failed tests are unrelated.&lt;/p&gt;</comment>
                            <comment id="16025251" author="kgyrtkirk" created="Thu, 25 May 2017 19:28:35 +0000"  >&lt;p&gt;pushed to master. Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dvoros&quot; class=&quot;user-hover&quot; rel=&quot;dvoros&quot;&gt;Daniel Voros&lt;/a&gt; for writing these tests!&lt;/p&gt;</comment>
                            <comment id="16025338" author="dvoros" created="Thu, 25 May 2017 20:25:58 +0000"  >&lt;p&gt;Thank you for the review!&lt;/p&gt;</comment>
                            <comment id="16485885" author="vgarg" created="Tue, 22 May 2018 23:58:06 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12866629" name="HIVE-15834.1.patch" size="38266" author="dvoros" created="Fri, 5 May 2017 14:45:12 +0000"/>
                            <attachment id="12866848" name="HIVE-15834.2.patch" size="38234" author="dvoros" created="Mon, 8 May 2017 08:00:38 +0000"/>
                            <attachment id="12869600" name="HIVE-15834.3.patch" size="37385" author="dvoros" created="Wed, 24 May 2017 08:23:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 May 2017 15:17:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39pgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15835] Make GetOperationStatus more responsive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15835</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15473&quot; title=&quot;Progress Bar on Beeline client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15473&quot;&gt;&lt;del&gt;HIVE-15473&lt;/del&gt;&lt;/a&gt; beeline is able to show progress information. This however leads to a case where certain long running commands like MSCK will not launch a job on Tez and hence will lead to GetOperationStatus to wait till the query execution finishes.&lt;/p&gt;

&lt;p&gt;Prevent the above from happening such that users calling GetOperationStatus can still get the update more frequently.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13040889">HIVE-15835</key>
            <summary>Make GetOperationStatus more responsive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="anishek">anishek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 08:28:26 +0000</created>
                <updated>Fri, 17 Feb 2017 10:19:57 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15871605" author="anishek" created="Fri, 17 Feb 2017 10:19:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15917&quot; title=&quot;incorrect error handling from BackgroundWork can cause beeline query to hang&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15917&quot;&gt;&lt;del&gt;HIVE-15917&lt;/del&gt;&lt;/a&gt;  might also take care of this one ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39phb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15836] CATS failed when the table is stored as orc and select clause has null</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15836</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Based on the stable version 1.2.1, I patched &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11217&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-11217&lt;/a&gt;, but I still got error.&lt;/p&gt;

&lt;p&gt;CASE:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;CREATE TABLE empty (x int);&lt;br/&gt;
CREATE TABLE orc_table_with_null &lt;br/&gt;
STORED AS ORC &lt;br/&gt;
AS &lt;br/&gt;
SELECT &lt;br/&gt;
x,&lt;br/&gt;
null&lt;br/&gt;
FROM empty;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ERROR:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;FAILED: SemanticException &lt;span class=&quot;error&quot;&gt;&amp;#91;Error 10305&amp;#93;&lt;/span&gt;: CREATE-TABLE-AS-SELECT creates a VOID type, please use CAST to specify the type, near field:  _c1&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13040902">HIVE-15836</key>
            <summary>CATS failed when the table is stored as orc and select clause has null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Huang Xiaomeng">Xiaomeng Huang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 09:05:27 +0000</created>
                <updated>Thu, 9 Feb 2017 05:57:29 +0000</updated>
                            <resolved>Thu, 9 Feb 2017 05:53:41 +0000</resolved>
                                    <version>1.2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15855608" author="huang xiaomeng" created="Tue, 7 Feb 2017 09:09:33 +0000"  >&lt;p&gt;Do anyone have a look?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39pk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15837] Failing Test: TestSparkCliDriver join_array.q / multi_insert_move_tasks_share_dependencies.q</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15837</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Looks like due to check in for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15297&quot; title=&quot;Hive should not split semicolon within quoted string literals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15297&quot;&gt;&lt;del&gt;HIVE-15297&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13040913">HIVE-15837</key>
            <summary>Failing Test: TestSparkCliDriver join_array.q / multi_insert_move_tasks_share_dependencies.q</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13015210">HIVE-15058</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pxiong">Pengcheng Xiong</assignee>
                                    <reporter username="anishek">anishek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 09:39:10 +0000</created>
                <updated>Tue, 7 Feb 2017 09:41:23 +0000</updated>
                                                                            <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39pmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15838] Escaping illegal characters allowed in HBase and disallowed in Hive DDL</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15838</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In HBase it&apos;s possible to have table names such as:&lt;/p&gt;

&lt;p&gt;cf:one,  cf:two , cf:three#i&lt;/p&gt;

&lt;p&gt;when creating an Hive table from HBase, such as:&lt;/p&gt;

&lt;p&gt;CREATE TABLE MyTable (key int, one string, two int, three int)&lt;br/&gt;
STORED BY &apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
&quot;hbase.columns.mapping&quot; = &quot;:key,cf:one#s,cf:two,cf:three#i&quot;,&lt;br/&gt;
&quot;hbase.table.default.storage.type&quot; = &quot;binary&quot;&lt;br/&gt;
);&lt;/p&gt;

&lt;p&gt;it fails, because &apos;#s&apos; and &apos;#b&apos; are reserved keywords to specify storage type in Hive, and in this case &apos;#i&apos; confuses the DDL.&lt;/p&gt;

&lt;p&gt;Anyway the &apos;#&apos; it&apos;s an allowed column name in HBase, and it would be possible to escape it without confusing the Hive DDL.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13040931">HIVE-15838</key>
            <summary>Escaping illegal characters allowed in HBase and disallowed in Hive DDL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dgesino">Davide Gesino</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 10:36:09 +0000</created>
                <updated>Tue, 7 Feb 2017 10:58:27 +0000</updated>
                                            <version>2.1.1</version>
                                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39pqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15839] Don&apos;t force cardinality check if only WHEN NOT MATCHED is specified</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15839</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;should&apos;ve been part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14949&quot; title=&quot;Add Cardinality Violation check in SQL MERGE stmt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14949&quot;&gt;&lt;del&gt;HIVE-14949&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;if only WHEN NOT MATCHED is specified then the join is basically an anti-join and we are not retrieving any values from target side. So the cardinality check is just overhead (though presumably very minor since the filter above the join will filter everything and thus there is nothing to group)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041110">HIVE-15839</key>
            <summary>Don&apos;t force cardinality check if only WHEN NOT MATCHED is specified</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12835256">HIVE-10924</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 19:50:04 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:38 +0000</updated>
                            <resolved>Mon, 13 Feb 2017 22:46:05 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Query Planning</component>
                    <component>Query Processor</component>
                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15860587" author="ekoifman" created="Fri, 10 Feb 2017 02:50:29 +0000"  >&lt;p&gt;local branch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15871&quot; title=&quot;Cannot insert into target table because column number/types are different with hive.merge.cardinality.check=false &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15871&quot;&gt;&lt;del&gt;HIVE-15871&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15861723" author="hiveqa" created="Fri, 10 Feb 2017 19:25:41 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852094/HIVE-15839.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852094/HIVE-15839.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10246 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3493/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3493/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3493/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3493/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3493/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3493/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852094 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15861727" author="ekoifman" created="Fri, 10 Feb 2017 19:31:57 +0000"  >&lt;p&gt;failures have age &amp;gt; 1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzheng&quot; class=&quot;user-hover&quot; rel=&quot;wzheng&quot;&gt;Wei Zheng&lt;/a&gt; could you review please&lt;/p&gt;</comment>
                            <comment id="15864563" author="wzheng" created="Mon, 13 Feb 2017 22:14:31 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15864618" author="ekoifman" created="Mon, 13 Feb 2017 22:46:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15839&quot; title=&quot;Don&amp;#39;t force cardinality check if only WHEN NOT MATCHED is specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15839&quot;&gt;&lt;del&gt;HIVE-15839&lt;/del&gt;&lt;/a&gt;.03.patch committed to master&lt;br/&gt;
thanks Wei for the review&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13041914">HIVE-15871</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13012102">HIVE-14949</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12851983" name="HIVE-15839.01.patch" size="8586" author="ekoifman" created="Fri, 10 Feb 2017 04:17:10 +0000"/>
                            <attachment id="12852087" name="HIVE-15839.02.patch" size="8232" author="ekoifman" created="Fri, 10 Feb 2017 17:30:57 +0000"/>
                            <attachment id="12852094" name="HIVE-15839.03.patch" size="8232" author="ekoifman" created="Fri, 10 Feb 2017 17:53:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 19:25:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39quf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15840] Webhcat test TestPig_5 failing with Pig on Tez at check for percent complete of job</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15840</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TestPig_5 is failing at percentage check if the job is Pig on Tez:&lt;br/&gt;
check_job_percent_complete failed. got percentComplete , expected 100% complete&lt;/p&gt;

&lt;p&gt;Test command:&lt;br/&gt;
curl -d user.name=daijy -d arg=-p -d arg=INPDIR=/tmp/templeton_test_data -d arg=-p -d arg=OUTDIR=/tmp/output -d file=loadstore.pig -X POST &lt;a href=&quot;http://localhost:50111/templeton/v1/pig&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:50111/templeton/v1/pig&lt;/a&gt;&lt;br/&gt;
curl &lt;a href=&quot;http://localhost:50111/templeton/v1/jobs/job_1486502484681_0003?user.name=daijy&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:50111/templeton/v1/jobs/job_1486502484681_0003?user.name=daijy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9351&quot; title=&quot;Running Hive Jobs with Tez cause templeton to never report percent complete&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9351&quot;&gt;&lt;del&gt;HIVE-9351&lt;/del&gt;&lt;/a&gt;, which fixes Hive on Tez.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041199">HIVE-15840</key>
            <summary>Webhcat test TestPig_5 failing with Pig on Tez at check for percent complete of job</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 22:57:24 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:04 +0000</updated>
                            <resolved>Wed, 8 Feb 2017 03:45:35 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15857030" author="thejas" created="Tue, 7 Feb 2017 23:35:00 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15857143" author="hiveqa" created="Wed, 8 Feb 2017 00:56:22 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851494/HIVE-15840.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851494/HIVE-15840.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10236 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=230)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3423/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3423/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3423/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3423/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3423/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3423/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851494 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15857338" author="daijy" created="Wed, 8 Feb 2017 03:45:35 +0000"  >&lt;p&gt;UT failures are not related. Patch pushed to both master and branch-1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851494" name="HIVE-15840.1.patch" size="3541" author="daijy" created="Tue, 7 Feb 2017 22:58:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2017 23:35:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39re7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12332154</customfieldvalue>
    <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15841] Upgrade Hive to ORC 1.3.3</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15841</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive needs &lt;a href=&quot;https://issues.apache.org/jira/browse/ORC-141&quot; title=&quot;inconsistent memorymanager usage after PhysicalWriter patch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ORC-141&quot;&gt;&lt;del&gt;ORC-141&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/ORC-135&quot; title=&quot;PPD for timestamp is wrong when reader and writer timezones are different&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ORC-135&quot;&gt;&lt;del&gt;ORC-135&lt;/del&gt;&lt;/a&gt;, so we should upgrade to ORC 1.3.3 once it releases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041203">HIVE-15841</key>
            <summary>Upgrade Hive to ORC 1.3.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="owen.omalley">Owen O&apos;Malley</assignee>
                                    <reporter username="owen.omalley">Owen O&apos;Malley</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 23:09:42 +0000</created>
                <updated>Mon, 11 Sep 2017 17:45:12 +0000</updated>
                            <resolved>Fri, 24 Mar 2017 05:07:59 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15857023" author="githubbot" created="Tue, 7 Feb 2017 23:29:19 +0000"  >&lt;p&gt;GitHub user omalley opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/142&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15841&quot; title=&quot;Upgrade Hive to ORC 1.3.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15841&quot;&gt;&lt;del&gt;HIVE-15841&lt;/del&gt;&lt;/a&gt;. Upgrade to ORC 1.3.2.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/omalley/hive&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/omalley/hive&lt;/a&gt; hive-15841&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/142.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/142.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #142&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3078b0f32fec97607b97fa31e29527da50631099&lt;br/&gt;
Author: Owen O&apos;Malley &amp;lt;omalley@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-02-07T23:27:31Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15841&quot; title=&quot;Upgrade Hive to ORC 1.3.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15841&quot;&gt;&lt;del&gt;HIVE-15841&lt;/del&gt;&lt;/a&gt;. Upgrade to ORC 1.3.2.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15868830" author="sershe" created="Wed, 15 Feb 2017 23:53:24 +0000"  >&lt;p&gt;How does sarg applier know the column names now?&lt;/p&gt;</comment>
                            <comment id="15868894" author="owen.omalley" created="Thu, 16 Feb 2017 00:37:08 +0000"  >&lt;p&gt;It gets them from the SchemaEvolution. In particular, they come from OrcInputFormat.getDesiredRowTypeDescr(...) which uses schema.evolution.columns and schema.evolution.columns.types or columns and columns.types from the config.&lt;/p&gt;</comment>
                            <comment id="15869135" author="hiveqa" created="Thu, 16 Feb 2017 04:20:18 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852928/HIVE-15841.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852928/HIVE-15841.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join1] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join2] (batchId=160)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3583/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3583/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3583/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3583/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3583/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3583/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852928 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15935350" author="prasanth_j" created="Tue, 21 Mar 2017 21:16:39 +0000"  >&lt;p&gt;Resubmitted for another test run. Should this be upgraded to 1.3.3 directly?&lt;/p&gt;</comment>
                            <comment id="15935369" author="owen.omalley" created="Tue, 21 Mar 2017 21:30:09 +0000"  >&lt;p&gt;Yes, I agree. Updating the patch now.&lt;/p&gt;</comment>
                            <comment id="15935380" author="hiveqa" created="Tue, 21 Mar 2017 21:38:37 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852928/HIVE-15841.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852928/HIVE-15841.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4274/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4274/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4274/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4274/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4274/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4274/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-03-21 21:38:36.156
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-4274/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-03-21 21:38:36.158
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   4f45536..9f5a3e3  master     -&amp;gt; origin/master
+ git reset --hard HEAD
HEAD is now at 4f45536 HIVE-16246: Support auto gather column stats for columns with trailing white spaces (Pengcheng XXiong, reviewed by Ashutosh Chauhan)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is behind &apos;origin/master&apos; by 1 commit, and can be fast-forwarded.
  (use &quot;git pull&quot; to update your local branch)
+ git reset --hard origin/master
HEAD is now at 9f5a3e3 HIVE-16180 : LLAP: Native memory leak in EncodedReader (Sergey Shelukhin/Prasanth Jayachandran, reviewed by Prasanth Jayachandran/Sergey Shelukhin)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-03-21 21:38:37.431
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: patch failed: llap-server/src/java/org/apache/hadoop/hive/llap/io/encoded/OrcEncodedDataReader.java:26
error: llap-server/src/java/org/apache/hadoop/hive/llap/io/encoded/OrcEncodedDataReader.java: patch does not apply
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852928 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15935423" author="owen.omalley" created="Tue, 21 Mar 2017 22:09:14 +0000"  >&lt;p&gt;Updated to ORC 1.3.3.&lt;/p&gt;</comment>
                            <comment id="15935544" author="hiveqa" created="Tue, 21 Mar 2017 23:30:29 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12859794/HIVE-15841.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12859794/HIVE-15841.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10496 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join1] (batchId=162)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join2] (batchId=162)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4275/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4275/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4275/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4275/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4275/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4275/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12859794 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15935628" author="prasanth_j" created="Wed, 22 Mar 2017 01:29:58 +0000"  >&lt;p&gt;union_fast_stats failure seems to be related. &lt;/p&gt;</comment>
                            <comment id="15935713" author="owen.omalley" created="Wed, 22 Mar 2017 03:16:07 +0000"  >&lt;p&gt;Updated the last test case output.&lt;/p&gt;</comment>
                            <comment id="15935953" author="hiveqa" created="Wed, 22 Mar 2017 08:52:28 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12859847/HIVE-15841.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12859847/HIVE-15841.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10496 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join1] (batchId=162)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join2] (batchId=162)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4285/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4285/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4285/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4285/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4285/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4285/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12859847 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15936807" author="prasanth_j" created="Wed, 22 Mar 2017 17:59:51 +0000"  >&lt;p&gt;stats changes in minispark failures also looks related. &lt;/p&gt;</comment>
                            <comment id="15937285" author="prasanth_j" created="Wed, 22 Mar 2017 22:30:27 +0000"  >&lt;p&gt;+1. Pending test fix and new test run.&lt;/p&gt;</comment>
                            <comment id="15939452" author="prasanth_j" created="Thu, 23 Mar 2017 23:46:21 +0000"  >&lt;p&gt;.2 patch with spark golden files update&lt;/p&gt;</comment>
                            <comment id="15939780" author="hiveqa" created="Fri, 24 Mar 2017 04:40:29 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12860247/HIVE-15841.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12860247/HIVE-15841.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10511 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=141)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4330/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4330/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4330/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4330/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4330/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4330/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12860247 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15939804" author="prasanth_j" created="Fri, 24 Mar 2017 05:07:59 +0000"  >&lt;p&gt;Committed to master. &lt;/p&gt;</comment>
                            <comment id="15939805" author="prasanth_j" created="Fri, 24 Mar 2017 05:08:23 +0000"  >&lt;p&gt;Other test failures are already happening in master.&lt;/p&gt;</comment>
                            <comment id="16161664" author="githubbot" created="Mon, 11 Sep 2017 17:45:12 +0000"  >&lt;p&gt;Github user omalley closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/142&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/142&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12860247" name="HIVE-15841.2.patch" size="67933" author="prasanth_j" created="Thu, 23 Mar 2017 23:45:48 +0000"/>
                            <attachment id="12859847" name="HIVE-15841.patch" size="53880" author="owen.omalley" created="Wed, 22 Mar 2017 03:16:07 +0000"/>
                            <attachment id="12859794" name="HIVE-15841.patch" size="51543" author="owen.omalley" created="Tue, 21 Mar 2017 22:09:14 +0000"/>
                            <attachment id="12852928" name="HIVE-15841.patch" size="48854" author="owen.omalley" created="Wed, 15 Feb 2017 23:36:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2017 23:29:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39rf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15842] disable slider YARN resource normalization for LLAP</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15842</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This can lead to LLAP starting with an invalid config with regard to cache size, jmx and container size. If the memory configuration is invalid, it should fail immediately.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041215">HIVE-15842</key>
            <summary>disable slider YARN resource normalization for LLAP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 23:53:31 +0000</created>
                <updated>Tue, 7 Feb 2017 23:54:11 +0000</updated>
                            <resolved>Tue, 7 Feb 2017 23:54:11 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39rhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15843] disable slider YARN resource normalization for LLAP</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15843</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The normalization can lead to LLAP starting with invalid configuration with regard to cache size, jmx and container size. If the memory configuration is invalid, it should fail immediately.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041216">HIVE-15843</key>
            <summary>disable slider YARN resource normalization for LLAP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2017 23:53:51 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:05 +0000</updated>
                            <resolved>Wed, 8 Feb 2017 23:10:15 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15857058" author="sershe" created="Tue, 7 Feb 2017 23:55:27 +0000"  >&lt;p&gt;The patch. Need to test in the cluster. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;Siddharth Seth&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15857080" author="sershe" created="Wed, 8 Feb 2017 00:10:12 +0000"  >&lt;p&gt;Hmm, I don&apos;t have access to a new enough version of Slider, but I do see the setting applied in the package; and it doesn&apos;t fail due to an unknown setting on Slider 0.91, which is something else I wanted to test.&lt;/p&gt;</comment>
                            <comment id="15857214" author="sseth" created="Wed, 8 Feb 2017 01:47:42 +0000"  >&lt;p&gt;The patch looks good to me. Slider build is fairly straightforward from their &quot;develop&quot; branch.&lt;/p&gt;</comment>
                            <comment id="15857217" author="hiveqa" created="Wed, 8 Feb 2017 01:48:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851503/HIVE-15843.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851503/HIVE-15843.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10240 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.hcatalog.pig.TestHCatLoaderComplexSchema.testMapNullKey[0] (batchId=173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3424/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3424/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3424/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3424/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3424/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3424/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851503 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15858669" author="sershe" created="Wed, 8 Feb 2017 23:05:51 +0000"  >&lt;p&gt;Tested both cases&lt;/p&gt;</comment>
                            <comment id="15858677" author="sershe" created="Wed, 8 Feb 2017 23:10:15 +0000"  >&lt;p&gt;Committed to master&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851503" name="HIVE-15843.patch" size="509" author="sershe" created="Tue, 7 Feb 2017 23:55:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2017 23:55:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39rhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15844] Make ReduceSinkOperator independent of Acid</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15844</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;ol&gt;
	&lt;li&gt;both FileSinkDesk and ReduceSinkDesk have special code path for Update/Delete operations. It is not always set correctly for ReduceSink. ReduceSinkDeDuplication is one place where it gets lost. Even when it isn&apos;t set correctly, elsewhere (&lt;em&gt;SemanticAnalyzer.getPartitionColsFromBucketColsForUpdateDelete()&lt;/em&gt;) we set ROW_ID to be the partition column of the ReduceSinkOperator and UDFToInteger special cases it to extract bucketId from ROW_ID. We need to modify Explain Plan to record Write Type (i.e. insert/update/delete) to make sure we have tests that can catch errors here.&lt;/li&gt;
	&lt;li&gt;Add some validation at the end of the plan to make sure that RSO/FSO which represent the end of the pipeline and write to acid table have WriteType set (to something other than default).&lt;/li&gt;
	&lt;li&gt;We don&apos;t seem to have any tests where number of buckets is &amp;gt; number of reducers. Add those.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13041231">HIVE-15844</key>
            <summary>Make ReduceSinkOperator independent of Acid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 01:07:06 +0000</created>
                <updated>Tue, 15 Aug 2017 22:16:16 +0000</updated>
                            <resolved>Wed, 1 Mar 2017 19:26:56 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15858756" author="ekoifman" created="Thu, 9 Feb 2017 00:23:39 +0000"  >&lt;p&gt;update hive.txn.manager in HiveConf - remove ref to enforce bucketing - it doesn&apos;t exist in Hive2/master&lt;/p&gt;</comment>
                            <comment id="15876829" author="hiveqa" created="Tue, 21 Feb 2017 22:05:31 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853791/HIVE-15844.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853791/HIVE-15844.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 44 failed/errored test(s), 10251 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_into_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_overwrite_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[autoColumnStats_4] (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[delete_all_non_partitioned] (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[delete_all_partitioned] (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[delete_tmp_table] (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[delete_whole_partition] (batchId=9)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[dynpart_sort_optimization_acid2] (batchId=29)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_update_delete] (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[update_after_multiple_inserts] (batchId=62)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[update_after_multiple_inserts_special_characters] (batchId=66)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[update_all_non_partitioned] (batchId=7)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[update_all_partitioned] (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[update_two_cols] (batchId=19)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[delete_all_non_partitioned] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[delete_all_partitioned] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[delete_tmp_table] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[delete_whole_partition] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_opt_vectorization] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization2] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization] (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization_acid] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[insert_update_delete] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_acid_part_update] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_acid_table_update] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_acidvec_part_update] (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_acidvec_table_update] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[update_after_multiple_inserts] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[update_all_non_partitioned] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[update_all_partitioned] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[update_two_cols] (batchId=142)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_5] (batchId=93)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge2 (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge3 (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge2 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge3 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge2 (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge3 (batchId=266)
org.apache.hadoop.hive.ql.txn.compactor.TestCompactor.schemaEvolutionAddColDynamicPartitioningUpdate (batchId=205)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3674/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3674/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3674/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3674/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3674/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3674/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 44 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853791 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15884301" author="hiveqa" created="Sat, 25 Feb 2017 16:32:28 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854643/HIVE-15844.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854643/HIVE-15844.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 12 failed/errored test(s), 10259 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_into_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_overwrite_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[autoColumnStats_4] (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[dynpart_sort_optimization_acid2] (batchId=29)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_opt_vectorization] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization2] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization] (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization_acid] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=153)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3785/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3785/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3785/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3785/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3785/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3785/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854643 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15886477" author="hiveqa" created="Mon, 27 Feb 2017 20:26:16 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854946/HIVE-15844.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854946/HIVE-15844.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10268 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_into_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_overwrite_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[autoColumnStats_4] (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[dynpart_sort_optimization_acid2] (batchId=29)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization_acid] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3816/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3816/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3816/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3816/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3816/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3816/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854946 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15887006" author="hiveqa" created="Tue, 28 Feb 2017 01:26:42 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854976/HIVE-15844.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854976/HIVE-15844.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10273 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_into_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[insert_overwrite_dynamic_partitions] (batchId=231)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3822/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3822/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3822/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3822/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3822/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3822/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854976 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15887286" author="hiveqa" created="Tue, 28 Feb 2017 05:12:33 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855047/HIVE-15844.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855047/HIVE-15844.05.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10273 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
org.apache.hive.hcatalog.pig.TestTextFileHCatStorer.testStoreWithNoSchema (batchId=173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3826/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3826/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3826/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3826/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3826/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3826/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855047 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15887367" author="ekoifman" created="Tue, 28 Feb 2017 06:16:42 +0000"  >&lt;p&gt;Failures not related&lt;/p&gt;

&lt;p&gt;Then change is to make ReduceSinkOperator independent of the type of operation (sql statement).&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;Prasanth Jayachandran&lt;/a&gt; could you review please?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;Matt McCline&lt;/a&gt; FYI changes in Vectorizer.java&lt;/p&gt;</comment>
                            <comment id="15887526" author="hiveqa" created="Tue, 28 Feb 2017 08:17:34 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855047/HIVE-15844.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855047/HIVE-15844.05.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10274 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynamic_semijoin_reduction_3] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3832/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3832/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3832/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3832/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3832/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3832/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855047 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15888355" author="ekoifman" created="Tue, 28 Feb 2017 16:19:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16022&quot; title=&quot;BloomFilter check not showing up in MERGE statement queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-16022&quot;&gt;&lt;del&gt;HIVE-16022&lt;/del&gt;&lt;/a&gt; was committed while patch5 was running&lt;br/&gt;
patch6 fixes the new test&lt;/p&gt;</comment>
                            <comment id="15888518" author="hiveqa" created="Tue, 28 Feb 2017 17:35:03 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855170/HIVE-15844.06.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855170/HIVE-15844.06.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10276 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3844/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3844/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3844/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3844/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3844/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3844/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855170 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15888547" author="ekoifman" created="Tue, 28 Feb 2017 17:50:04 +0000"  >&lt;p&gt;no related failures&lt;/p&gt;</comment>
                            <comment id="15888601" author="prasanth_j" created="Tue, 28 Feb 2017 18:30:48 +0000"  >&lt;p&gt;Can you please attach patch to RB?&lt;/p&gt;</comment>
                            <comment id="15888617" author="ekoifman" created="Tue, 28 Feb 2017 18:38:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/57154/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/57154/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15888977" author="prasanth_j" created="Tue, 28 Feb 2017 22:26:18 +0000"  >&lt;p&gt;mostly looks good to me. +1 for non-vectorization changes.&lt;/p&gt;</comment>
                            <comment id="15889123" author="ekoifman" created="Tue, 28 Feb 2017 23:38:01 +0000"  >&lt;p&gt;patch 7 integrating comments from Matt and Prasanth&lt;/p&gt;</comment>
                            <comment id="15889426" author="hiveqa" created="Wed, 1 Mar 2017 03:20:27 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855251/HIVE-15844.07.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855251/HIVE-15844.07.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 125 failed/errored test(s), 10298 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_binary_join_groupby] (batchId=75)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_char_2] (batchId=64)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_char_mapjoin1] (batchId=30)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_char_simple] (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_coalesce] (batchId=10)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_coalesce_2] (batchId=66)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_count] (batchId=13)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_data_types] (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_decimal_aggregate] (batchId=17)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_decimal_expressions] (batchId=49)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_decimal_round] (batchId=33)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_decimal_round_2] (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_distinct_2] (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_empty_where] (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_groupby4] (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_groupby6] (batchId=80)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_groupby_3] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_groupby_reduce] (batchId=52)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_if_expr] (batchId=10)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_include_no_sel] (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_interval_1] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_interval_arithmetic] (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_non_string_partition] (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_orderby_5] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_outer_join1] (batchId=41)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_outer_join2] (batchId=28)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_outer_join3] (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_outer_join4] (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_reduce1] (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_reduce2] (batchId=36)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_reduce3] (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_reduce_groupby_decimal] (batchId=30)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_string_concat] (batchId=30)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_varchar_simple] (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_when_case_null] (batchId=33)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorization_7] (batchId=40)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorization_8] (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorization_div0] (batchId=63)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorization_limit] (batchId=34)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorization_offset_limit] (batchId=42)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorized_date_funcs] (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorized_mapjoin2] (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorized_timestamp] (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vectorized_timestamp_funcs] (batchId=28)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_adaptor_usage_mode] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_auto_smb_mapjoin_14] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_between_columns] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_between_in] (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_binary_join_groupby] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_char_2] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_char_mapjoin1] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_char_simple] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_coalesce] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_coalesce_2] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_count] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_count_distinct] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_data_types] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_decimal_aggregate] (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_decimal_expressions] (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_decimal_mapjoin] (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_decimal_round] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_decimal_round_2] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_distinct_2] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_groupby4] (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_groupby6] (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_groupby_3] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_groupby_mapjoin] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_groupby_reduce] (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_include_no_sel] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_inner_join] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_interval_1] (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_interval_2] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_interval_arithmetic] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_interval_mapjoin] (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_join30] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_left_outer_join2] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_leftsemi_mapjoin] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_nullsafe_join] (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_number_compare_projection] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_orderby_5] (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_outer_join0] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_outer_join1] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_outer_join2] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_partition_diff_num_cols] (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_partitioned_date_time] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_reduce1] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_reduce2] (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_reduce3] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_reduce_groupby_decimal] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_string_concat] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_varchar_simple] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_when_case_null] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorization_0] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorization_7] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorization_8] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorization_short_regress] (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_bucketmapjoin1] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_date_funcs] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_dynamic_semijoin_reduction] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_mapjoin] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_shufflejoin] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_timestamp_funcs] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join1] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join2] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[vector_non_string_partition] (batchId=93)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[vectorization_div0] (batchId=94)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[vectorization_limit] (batchId=93)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_between_in] (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_count_distinct] (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_data_types] (batchId=128)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_decimal_aggregate] (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_distinct_2] (batchId=117)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_groupby_3] (batchId=122)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_orderby_5] (batchId=112)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_string_concat] (batchId=109)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorization_0] (batchId=130)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorization_div0] (batchId=124)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorization_short_regress] (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorized_shufflejoin] (batchId=126)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorized_timestamp_funcs] (batchId=108)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationDrops.testDropPartition (batchId=210)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgress (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3854/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3854/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3854/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3854/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3854/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3854/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 125 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855251 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15890766" author="hiveqa" created="Wed, 1 Mar 2017 18:40:32 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855419/HIVE-15844.08.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855419/HIVE-15844.08.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10323 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=212)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3872/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3872/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3872/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3872/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3872/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3872/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855419 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15890829" author="ekoifman" created="Wed, 1 Mar 2017 19:12:37 +0000"  >&lt;p&gt;TestBeeLineWithArgs.testQueryProgressParallel is unstable, e.g. &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3870/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3870/&lt;/a&gt;&lt;br/&gt;
the other failure has age &amp;gt; 1&lt;/p&gt;
</comment>
                            <comment id="15890852" author="ekoifman" created="Wed, 1 Mar 2017 19:20:45 +0000"  >&lt;p&gt;Summary:&lt;br/&gt;
ReduceSinkOperator no longer needs to be specialized for Acid update/delete&lt;br/&gt;
(it&apos;s handled by making sure the partitionEval is UDFToInteger(ROW__ID))&lt;br/&gt;
QueryPlan now records Acid operation&lt;/p&gt;

&lt;p&gt;Thanks Prasanth &amp;amp; Matt for review&lt;/p&gt;

&lt;p&gt;committed to master&lt;/p&gt;</comment>
                            <comment id="15891107" author="ashutoshc" created="Wed, 1 Mar 2017 21:42:43 +0000"  >&lt;p&gt;Thanks for taking this up &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; Such refactoring is very much needed to keep sanity of devs and readability of code.&lt;/p&gt;

&lt;p&gt;I am still troubled with SPDO inserting &quot;constant&quot; bucket_number column and the RS magically computing and replacing that constant at runtime. Ideally that should be created as column expression which is evaluated as any other expression in RS (or perhaps in SEL prior to it). I am hopeful someday that refactoring would happen as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15891141" author="ekoifman" created="Wed, 1 Mar 2017 21:56:36 +0000"  >&lt;p&gt;perhaps someone should file a Jira... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13047423">HIVE-16077</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13039001">HIVE-15756</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13094880">HIVE-17328</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12853791" name="HIVE-15844.01.patch" size="5778" author="ekoifman" created="Tue, 21 Feb 2017 18:31:49 +0000"/>
                            <attachment id="12854643" name="HIVE-15844.02.patch" size="18827" author="ekoifman" created="Sat, 25 Feb 2017 04:32:32 +0000"/>
                            <attachment id="12854946" name="HIVE-15844.03.patch" size="46354" author="ekoifman" created="Mon, 27 Feb 2017 18:50:27 +0000"/>
                            <attachment id="12854976" name="HIVE-15844.04.patch" size="168643" author="ekoifman" created="Mon, 27 Feb 2017 20:48:22 +0000"/>
                            <attachment id="12855047" name="HIVE-15844.05.patch" size="166966" author="ekoifman" created="Tue, 28 Feb 2017 03:27:31 +0000"/>
                            <attachment id="12855170" name="HIVE-15844.06.patch" size="169863" author="ekoifman" created="Tue, 28 Feb 2017 16:15:24 +0000"/>
                            <attachment id="12855251" name="HIVE-15844.07.patch" size="171914" author="ekoifman" created="Tue, 28 Feb 2017 23:38:01 +0000"/>
                            <attachment id="12855419" name="HIVE-15844.08.patch" size="929102" author="ekoifman" created="Wed, 1 Mar 2017 17:28:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Feb 2017 22:05:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39rlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15845] create view on subquery_exists_having may not work well with unparseTranslator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15845</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;On master,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; create view v as select b.key, count(*)
    &amp;gt; from src b
    &amp;gt; group by b.key
    &amp;gt; having exists
    &amp;gt;   (select a.key
    &amp;gt;   from src a
    &amp;gt;   where a.key = b.key and a.value &amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;val_9&apos;&lt;/span&gt;
    &amp;gt;   );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;View Expanded Text: 	select `b`.`key`, count(*)
	                    	from `&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;`.`src` `b`
	                    	group by `b`.`key`
	                    	having exists
	                    	  (select `a`.`key`
	                    	  from `&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;`.`src` `a`
	                    	  where `a`.`key` = b.key and `a`.`value` &amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;val_9&apos;&lt;/span&gt;
	                    	  )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can see that  b.key  is not quoted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041235">HIVE-15845</key>
            <summary>create view on subquery_exists_having may not work well with unparseTranslator</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13039247">HIVE-15769</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pxiong">Pengcheng Xiong</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 01:43:40 +0000</created>
                <updated>Wed, 8 Feb 2017 01:43:40 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39rm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15846] Relocate more dependencies (e.g. org.apache.zookeeper) for JDBC uber jar</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15846</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13041236">HIVE-15846</key>
            <summary>Relocate more dependencies (e.g. org.apache.zookeeper) for JDBC uber jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="taoli-hwx">Tao Li</assignee>
                                    <reporter username="taoli-hwx">Tao Li</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 01:44:46 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:09 +0000</updated>
                            <resolved>Sun, 19 Feb 2017 05:13:14 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15858710" author="taoli-hwx" created="Wed, 8 Feb 2017 23:46:16 +0000"  >&lt;p&gt;The size of the JDBC uber jar has been reduced from ~ 68MB to ~ 63MB with this change.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15859073" author="hiveqa" created="Thu, 9 Feb 2017 06:02:58 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851759/HIVE-15846.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851759/HIVE-15846.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10223 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=161)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3454/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3454/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3454/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3454/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3454/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3454/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851759 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15859703" author="thejas" created="Thu, 9 Feb 2017 15:59:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=taoli-hwx&quot; class=&quot;user-hover&quot; rel=&quot;taoli-hwx&quot;&gt;Tao Li&lt;/a&gt;&lt;br/&gt;
Can you please verify it works with this change with following configs enabled as well ? - zookeeper, kerberos and http mode ?&lt;/p&gt;</comment>
                            <comment id="15866394" author="taoli-hwx" created="Tue, 14 Feb 2017 18:56:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; I have verified it works in a Kerberized cluster with ZK.&lt;/p&gt;</comment>
                            <comment id="15866593" author="hiveqa" created="Tue, 14 Feb 2017 20:33:34 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852634/HIVE-15846.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852634/HIVE-15846.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3544/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3544/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3544/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3544/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3544/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3544/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-14 20:33:32.661
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-3544/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-14 20:33:32.664
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   d76c774..8432dd8  master     -&amp;gt; origin/master
+ git reset --hard HEAD
HEAD is now at d76c774 HIVE-15906 : thrift code regeneration to include new protocol version (Anishek Agarwal via Thejas Nair)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is behind &apos;origin/master&apos; by 1 commit, and can be fast-forwarded.
  (use &quot;git pull&quot; to update your local branch)
+ git reset --hard origin/master
HEAD is now at 8432dd8 HIVE-15901 : LLAP: incorrect usage of gap cache (Sergey Shelukhin, reviewed by Prasanth Jayachandran)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-14 20:33:33.937
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/jdbc/pom.xml: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852634 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15869159" author="thejas" created="Thu, 16 Feb 2017 04:41:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=taoli-hwx&quot; class=&quot;user-hover&quot; rel=&quot;taoli-hwx&quot;&gt;Tao Li&lt;/a&gt;&lt;br/&gt;
The patch isn&apos;t applying on master anymore. Can you please take a look ?&lt;/p&gt;</comment>
                            <comment id="15872668" author="taoli-hwx" created="Fri, 17 Feb 2017 22:38:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; I have uploaded another patch to merge the conflicts.&lt;/p&gt;</comment>
                            <comment id="15872950" author="hiveqa" created="Sat, 18 Feb 2017 03:17:40 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853375/HIVE-15846.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853375/HIVE-15846.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10245 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3638/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3638/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3638/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3638/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3638/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3638/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853375 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15873491" author="thejas" created="Sun, 19 Feb 2017 05:13:14 +0000"  >&lt;p&gt;Patch committed to master.&lt;br/&gt;
Thanks Tao!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851759" name="HIVE-15846.1.patch" size="3212" author="taoli-hwx" created="Wed, 8 Feb 2017 23:44:05 +0000"/>
                            <attachment id="12852634" name="HIVE-15846.2.patch" size="4340" author="taoli-hwx" created="Tue, 14 Feb 2017 18:59:14 +0000"/>
                            <attachment id="12853375" name="HIVE-15846.3.patch" size="4352" author="taoli-hwx" created="Fri, 17 Feb 2017 22:36:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 06:02:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39rmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15847] In Progress update refreshes seem slow</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15847</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15473&quot; title=&quot;Progress Bar on Beeline client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15473&quot;&gt;&lt;del&gt;HIVE-15473&lt;/del&gt;&lt;/a&gt;, the refresh rates for in place progress bar seems to be slow on hive cli. &lt;/p&gt;

&lt;p&gt;As pointed out by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;Prasanth Jayachandran&lt;/a&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The refresh rate is slow. Following video will show it&lt;br/&gt;
before patch: &lt;a href=&quot;https://asciinema.org/a/2fgcncxg5gjavcpxt6lfb8jg9&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://asciinema.org/a/2fgcncxg5gjavcpxt6lfb8jg9&lt;/a&gt;&lt;br/&gt;
after patch: &lt;a href=&quot;https://asciinema.org/a/2tht5jf6l9b2dc3ylt5gtztqg&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://asciinema.org/a/2tht5jf6l9b2dc3ylt5gtztqg&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13041273">HIVE-15847</key>
            <summary>In Progress update refreshes seem slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anishek">anishek</assignee>
                                    <reporter username="anishek">anishek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 05:06:17 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:14 +0000</updated>
                            <resolved>Tue, 21 Feb 2017 20:49:55 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15857447" author="anishek" created="Wed, 8 Feb 2017 05:42:32 +0000"  >&lt;p&gt;additionally there are more columns being printed in task summary as shown by &lt;/p&gt;

&lt;p&gt;after patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15473&quot; title=&quot;Progress Bar on Beeline client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15473&quot;&gt;&lt;del&gt;HIVE-15473&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851509/summary_after_patch.png&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851509/summary_after_patch.png&lt;/a&gt;&lt;br/&gt;
before patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15473&quot; title=&quot;Progress Bar on Beeline client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15473&quot;&gt;&lt;del&gt;HIVE-15473&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851510/summary_before_patch.png&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851510/summary_before_patch.png&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15865203" author="anishek" created="Tue, 14 Feb 2017 06:51:15 +0000"  >&lt;p&gt;when the server logs are turned to info tthe progress bar output is distorted, this should be fixed to allow end user to better read the details, this will most probably require merging the query log request / response mechanism to be similar to getProgressUpdate&lt;/p&gt;</comment>
                            <comment id="15871643" author="anishek" created="Fri, 17 Feb 2017 10:45:06 +0000"  >&lt;p&gt;Not sure why this is not showing the pull request automatically @ &lt;a href=&quot;https://github.com/apache/hive/pull/151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/151&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15871883" author="hiveqa" created="Fri, 17 Feb 2017 13:51:30 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853250/HIVE-15847.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853250/HIVE-15847.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 31 failed/errored test(s), 10244 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_external_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_not_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure1] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure2] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[external1] (batchId=85)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testAlterTable (batchId=194)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testTransactionalValidation (batchId=194)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterTable (batchId=197)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTransactionalValidation (batchId=197)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterTable (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTransactionalValidation (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterTable (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTransactionalValidation (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterTable (batchId=202)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTransactionalValidation (batchId=202)
org.apache.hadoop.hive.ql.security.TestMetastoreAuthorizationProvider.testSimplePrivileges (batchId=210)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProvider.testSimplePrivileges (batchId=208)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProviderWithACL.testSimplePrivileges (batchId=220)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
org.apache.hive.hcatalog.api.TestHCatClient.testBasicDDLCommands (batchId=170)
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=170)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.createTable (batchId=221)
org.apache.hive.service.cli.TestEmbeddedThriftBinaryCLIService.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithBinary.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithHttp.testExecuteStatementAsync (batchId=213)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3625/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3625/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3625/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3625/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3625/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3625/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 31 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853250 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15874167" author="thejas" created="Mon, 20 Feb 2017 07:58:48 +0000"  >&lt;p&gt;The changes to formatting of output looks good.&lt;br/&gt;
However, I haven&apos;t understood how this impacts the rate of refresh.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;Prasanth Jayachandran&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="15875381" author="anishek" created="Tue, 21 Feb 2017 05:12:39 +0000"  >&lt;p&gt;I have attached the current response section as a video. I think with the previous change, the lastReport object had to be different to allow updating the response and the last report string might be same with more time being spent so the time section in the progress bar would not get updated and it would only change when there was a visible change  in some part of the display. now the time section should keep updating giving a more responsive feel to this progress bar information. &lt;/p&gt;</comment>
                            <comment id="15875389" author="hiveqa" created="Tue, 21 Feb 2017 05:19:17 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853656/current_response.mov&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853656/current_response.mov&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3665/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3665/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3665/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3665/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3665/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3665/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-21 05:19:15.724
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-3665/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-21 05:19:15.727
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 016afe0 HIVE-15972: Runtime filtering not vectorizing for decimal/timestamp/char/varchar (Jason Dere, reviewed by Matt McCline)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 016afe0 HIVE-15972: Runtime filtering not vectorizing for decimal/timestamp/char/varchar (Jason Dere, reviewed by Matt McCline)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-21 05:19:16.720
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
patch: **** Only garbage was found in the patch input.
patch: **** Only garbage was found in the patch input.
patch: **** Only garbage was found in the patch input.
fatal: unrecognized input
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853656 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15875431" author="thejas" created="Tue, 21 Feb 2017 06:24:01 +0000"  >&lt;p&gt;+1 for 2.patch, pending tests&lt;/p&gt;</comment>
                            <comment id="15875445" author="anishek" created="Tue, 21 Feb 2017 06:45:18 +0000"  >&lt;p&gt;adding it again so build is kicked off&lt;/p&gt;</comment>
                            <comment id="15875540" author="hiveqa" created="Tue, 21 Feb 2017 07:49:52 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853667/HIVE-15847.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853667/HIVE-15847.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 10237 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[index_auto_mult_tables_compact] (batchId=33)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=118)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3666/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3666/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3666/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3666/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3666/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3666/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853667 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15875550" author="anishek" created="Tue, 21 Feb 2017 07:55:57 +0000"  >&lt;p&gt;Most of them have been failing historically and new test failures are unrelated to the change.&lt;/p&gt;</comment>
                            <comment id="15876689" author="thejas" created="Tue, 21 Feb 2017 20:49:55 +0000"  >&lt;p&gt;Patch committed to master.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anishek&quot; class=&quot;user-hover&quot; rel=&quot;anishek&quot;&gt;anishek&lt;/a&gt;&lt;br/&gt;
I also created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15847&quot; title=&quot;In Progress update refreshes seem slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15847&quot;&gt;&lt;del&gt;HIVE-15847&lt;/del&gt;&lt;/a&gt; for the flaky test TestCliDriver.iindex_auto_mult_tables_compact&lt;/p&gt;</comment>
                            <comment id="15877464" author="anishek" created="Wed, 22 Feb 2017 04:44:59 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12853250" name="HIVE-15847.1.patch" size="16218" author="anishek" created="Fri, 17 Feb 2017 10:42:19 +0000"/>
                            <attachment id="12853667" name="HIVE-15847.2.patch" size="16509" author="anishek" created="Tue, 21 Feb 2017 06:45:18 +0000"/>
                            <attachment id="12853656" name="current_response.mov" size="7902767" author="anishek" created="Tue, 21 Feb 2017 05:09:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Feb 2017 13:51:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39run:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15848] count or sum distinct incorrect when hive.optimize.reducededuplication set to true</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15848</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Test Table:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; test(id &lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Data&#65306;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;id&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;key&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Test SQL1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; id,&lt;span class=&quot;code-keyword&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;Distinct&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;),&lt;span class=&quot;code-keyword&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;Distinct&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; id,&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; count_distinct_test &lt;span class=&quot;code-keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;by&lt;/span&gt; id,&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt;)&lt;span class=&quot;code-keyword&quot;&gt;m&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;by&lt;/span&gt; id;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;result&#65306;&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;expect:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Test SQL2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; id,&lt;span class=&quot;code-keyword&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;Distinct&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt;),&lt;span class=&quot;code-keyword&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;Distinct&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; id,&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; count_distinct_test &lt;span class=&quot;code-keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;by&lt;/span&gt; id,&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;)&lt;span class=&quot;code-keyword&quot;&gt;m&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;by&lt;/span&gt; id;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;result:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</description>
                <environment></environment>
        <key id="13041313">HIVE-15848</key>
            <summary>count or sum distinct incorrect when hive.optimize.reducededuplication set to true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kgyrtkirk">Zoltan Haindrich</assignee>
                                    <reporter username="bill">Biao Wu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 08:18:50 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:00 +0000</updated>
                            <resolved>Wed, 1 Mar 2017 22:13:04 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15882170" author="kgyrtkirk" created="Fri, 24 Feb 2017 07:55:07 +0000"  >&lt;p&gt;this bug is present on the current master branch&lt;/p&gt;</comment>
                            <comment id="15884256" author="kgyrtkirk" created="Sat, 25 Feb 2017 14:16:23 +0000"  >&lt;p&gt;All my efforts to leave the optimization enabled in this case have failed - however I still feel that it might be saved somehow.&lt;/p&gt;

&lt;p&gt;I&apos;ve encountered a very intresting thing while working on this: for the second case the optimization didn&apos;t kick in because the key order is permutated wrt to the other RS - I&apos;m not sure what&apos;s causing this - but it may prevent this optimisation from happening in other cases as well. &lt;tt&gt;ReduceSinkDeDuplication#sameKeys&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I propose to disable reduce deduplication in cases like this:&lt;/p&gt;

&lt;p&gt;patch#1: when the about to be removed reduce sink is also doing distinct related work(DistinctColumnIndices) - the optimization is disabled.&lt;/p&gt;</comment>
                            <comment id="15884357" author="hiveqa" created="Sat, 25 Feb 2017 20:05:09 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854665/HIVE-15848.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854665/HIVE-15848.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 10 failed/errored test(s), 10256 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[multi_insert_gby3] (batchId=69)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[explainuser_2] (batchId=137)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=136)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[tez_union_multiinsert] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=94)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[multi_insert_gby3] (batchId=127)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=230)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3789/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3789/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3789/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3789/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3789/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3789/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854665 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15885037" author="bill" created="Mon, 27 Feb 2017 02:13:42 +0000"  >&lt;p&gt;Thanks  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kgyrtkirk&quot; class=&quot;user-hover&quot; rel=&quot;kgyrtkirk&quot;&gt;Zoltan Haindrich&lt;/a&gt;, I think  childDistinctColumnIndices should less than 2, the optimization is  enabled when childDistinctColumnIndices only have one key.&lt;br/&gt;
PR:  &lt;a href=&quot;https://github.com/apache/hive/pull/150/commits/a4fc3af4c77beafe11e3e4188571177862d64e4e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/150/commits/a4fc3af4c77beafe11e3e4188571177862d64e4e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15886454" author="kgyrtkirk" created="Mon, 27 Feb 2017 20:13:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bill&quot; class=&quot;user-hover&quot; rel=&quot;bill&quot;&gt;Biao Wu&lt;/a&gt; seems like you&apos;ve came to a similar conclusion &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;ve adjusted the patch. &lt;/p&gt;</comment>
                            <comment id="15886704" author="hiveqa" created="Mon, 27 Feb 2017 22:56:18 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854961/HIVE-15848.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854961/HIVE-15848.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10274 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3819/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3819/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3819/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3819/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3819/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3819/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854961 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15887340" author="ashutoshc" created="Tue, 28 Feb 2017 05:54:44 +0000"  >&lt;p&gt;It will be ideal to migrate these optimizations to calcite tree by writing an calcite rule where implementing these optimizations are more straight forward. In the meanwhile its alright to turn off these optimization in this particular case. &lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="15891171" author="kgyrtkirk" created="Wed, 1 Mar 2017 22:13:04 +0000"  >&lt;p&gt;It would be great to have this in calcite...however I&apos;m not yet familiar enough with it - but I will keep it in mind.&lt;br/&gt;
Pushed to master, thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; for the review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12854665" name="HIVE-15848.1.patch" size="26921" author="kgyrtkirk" created="Sat, 25 Feb 2017 14:16:23 +0000"/>
                            <attachment id="12854961" name="HIVE-15848.2.patch" size="26922" author="kgyrtkirk" created="Mon, 27 Feb 2017 20:07:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Feb 2017 07:55:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39s3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15849] hplsql should add enterGlobalScope func to UDF</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15849</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;code in Udf.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Udf.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (exec == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      exec = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exec();
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; query = queryOI.getPrimitiveJavaObject(arguments[0].get());
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args = { &lt;span class=&quot;code-quote&quot;&gt;&quot;-e&quot;&lt;/span&gt;, query, &lt;span class=&quot;code-quote&quot;&gt;&quot;-trace&quot;&lt;/span&gt; };
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        exec.setUdfRun(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        exec.init(args);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HiveException(e.getMessage());
      }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (arguments.length &amp;gt; 1) {
      setParameters(arguments);
    }
    Var result = exec.run();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (result != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result.toString();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is my thoughts&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;we should add &apos;exec.enterGlobalScope(); &apos;  between &apos;exec = new Exec();&apos; and &apos;setParameters(arguments);&apos;&lt;br/&gt;
Because if we do not call exec.enterGlobalScope(),  setParameters(arguments) will useless. Vars are not added into scope , but exec.run() will use vars which we set. The vars are parameters passed to UDF, &lt;span class=&quot;error&quot;&gt;&amp;#91;, :1, :2, ...n&amp;#93;&lt;/span&gt; which are description in Udf.java&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Before add this function, the result as follow. we get the wrong result, because the result contains  empty string  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting query&lt;br/&gt;
Query executed successfully (2.30 sec)&lt;br/&gt;
Ln:8 SELECT completed successfully&lt;br/&gt;
Ln:8 Standalone SELECT executed: 1 columns in the result set&lt;br/&gt;
Hello, !&lt;br/&gt;
Hello, !&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After add this function, we get the right result&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting pre-SQL statement&lt;br/&gt;
Starting query&lt;br/&gt;
Query executed successfully (2.35 sec)&lt;br/&gt;
Ln:8 SELECT completed successfully&lt;br/&gt;
Ln:8 Standalone SELECT executed: 1 columns in the result set&lt;br/&gt;
Hello, fei!&lt;br/&gt;
Hello, fei!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;tests come from &lt;a href=&quot;http://www.hplsql.org/udf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.hplsql.org/udf&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13041360">HIVE-15849</key>
            <summary>hplsql should add enterGlobalScope func to UDF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ferhui">Fei Hui</assignee>
                                    <reporter username="ferhui">Fei Hui</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 12:05:10 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:10 +0000</updated>
                            <resolved>Thu, 16 Mar 2017 22:20:10 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>hpl/sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15857901" author="ferhui" created="Wed, 8 Feb 2017 12:08:29 +0000"  >&lt;p&gt;patch uploaded&lt;/p&gt;</comment>
                            <comment id="15857902" author="ferhui" created="Wed, 8 Feb 2017 12:09:03 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15858010" author="hiveqa" created="Wed, 8 Feb 2017 13:55:00 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851620/HIVE-15832.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851620/HIVE-15832.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10241 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.metastore.TestMarkPartitionRemote.testMarkingPartitionSet (batchId=203)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3439/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3439/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3439/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3439/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3439/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3439/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851620 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15858869" author="ferhui" created="Thu, 9 Feb 2017 02:06:44 +0000"  >&lt;p&gt;upload the right patch&lt;/p&gt;</comment>
                            <comment id="15859557" author="hiveqa" created="Thu, 9 Feb 2017 14:03:18 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851771/HIVE-15849.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851771/HIVE-15849.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10227 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=109)
	[union_remove_1.q,ppd_outer_join2.q,date_udf.q,groupby1_noskew.q,join20.q,smb_mapjoin_13.q,groupby_rollup1.q,temp_table_gb1.q,vector_string_concat.q,smb_mapjoin_6.q,metadata_only_queries.q,auto_sortmerge_join_12.q,groupby_bigdata.q,groupby3_map_multi_distinct.q,innerjoin.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3461/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3461/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3461/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3461/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3461/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3461/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851771 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860839" author="ferhui" created="Fri, 10 Feb 2017 06:48:25 +0000"  >&lt;p&gt;failing tests are not related&lt;/p&gt;</comment>
                            <comment id="15861214" author="ferhui" created="Fri, 10 Feb 2017 12:47:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alangates&quot; class=&quot;user-hover&quot; rel=&quot;alangates&quot;&gt;Alan Gates&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt; could you please give any suggestions ?&lt;/p&gt;</comment>
                            <comment id="15871080" author="ferhui" created="Fri, 17 Feb 2017 02:49:18 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; could you please give any suggestions?&lt;/p&gt;</comment>
                            <comment id="15902126" author="alangates" created="Wed, 8 Mar 2017 22:52:43 +0000"  >&lt;p&gt;Adding a unit test that reproduces the problem and shows this fixes it would be good.&lt;/p&gt;</comment>
                            <comment id="15904412" author="ferhui" created="Fri, 10 Mar 2017 04:20:09 +0000"  >&lt;p&gt;patch update with ut&lt;/p&gt;

&lt;p&gt;affter apply this patch, get the right result&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;hive&amp;gt; add jar /usr/lib/hive-current/lib/antlr-runtime-4.5.jar;&lt;br/&gt;
Added &lt;span class=&quot;error&quot;&gt;&amp;#91;/usr/lib/hive-current/lib/antlr-runtime-4.5.jar&amp;#93;&lt;/span&gt; to class path&lt;br/&gt;
Added resources: &lt;span class=&quot;error&quot;&gt;&amp;#91;/usr/lib/hive-current/lib/antlr-runtime-4.5.jar&amp;#93;&lt;/span&gt;&lt;br/&gt;
hive&amp;gt; add jar /usr/lib/hive-current/lib/hplsql.jar;&lt;br/&gt;
Added &lt;span class=&quot;error&quot;&gt;&amp;#91;/usr/lib/hive-current/lib/hplsql.jar&amp;#93;&lt;/span&gt; to class path&lt;br/&gt;
Added resources: &lt;span class=&quot;error&quot;&gt;&amp;#91;/usr/lib/hive-current/lib/hplsql.jar&amp;#93;&lt;/span&gt;&lt;br/&gt;
hive&amp;gt; add file hplsqlrc;&lt;br/&gt;
Added resources: &lt;span class=&quot;error&quot;&gt;&amp;#91;hplsqlrc&amp;#93;&lt;/span&gt;&lt;br/&gt;
hive&amp;gt; CREATE TEMPORARY FUNCTION hplsql AS &apos;org.apache.hive.hplsql.Udf&apos;;&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.023 seconds&lt;br/&gt;
hive&amp;gt; SELECT hplsql(&apos;hello(:1)&apos;, name) FROM users;&lt;br/&gt;
OK&lt;br/&gt;
Configuration file: &lt;a href=&quot;file:/etc/emr/hive-conf-2.0.1/hplsql-site.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/etc/emr/hive-conf-2.0.1/hplsql-site.xml&lt;/a&gt;&lt;br/&gt;
Parser tree: (program (block (stmt (expr_stmt (expr (expr_func (ident hello) ( (expr_func_params (func_param (expr (expr_atom (ident :1))))) )))))))&lt;br/&gt;
INLCUDE CONTENT hplsqlrc (non-empty)&lt;br/&gt;
Ln:1 CREATE FUNCTION hello&lt;br/&gt;
Ln:1 EXEC FUNCTION hello&lt;br/&gt;
Ln:1 SET PARAM text = fei&lt;br/&gt;
Ln:4 RETURN&lt;br/&gt;
Hello, fei!&lt;br/&gt;
Time taken: 0.653 seconds, Fetched: 1 row(s)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15904414" author="ferhui" created="Fri, 10 Mar 2017 04:24:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alangates&quot; class=&quot;user-hover&quot; rel=&quot;alangates&quot;&gt;Alan Gates&lt;/a&gt; could you please take a look? add unit test , checking the var.  We do not get the result just because the vars are not added to scope&lt;/p&gt;</comment>
                            <comment id="15922791" author="alangates" created="Mon, 13 Mar 2017 19:23:19 +0000"  >&lt;p&gt;Patch looks good.  We just need the test run.  I&apos;ll cancel the patch and return it to patch available to try to get those to run.&lt;/p&gt;</comment>
                            <comment id="15924415" author="ferhui" created="Tue, 14 Mar 2017 15:30:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Could you please manually trigger the Jenkins job for this issue? Maybe PreCommitAdmin does not work, but  i have no login privileges to builds@apache. Thanks&lt;/p&gt;</comment>
                            <comment id="15924546" author="hiveqa" created="Tue, 14 Mar 2017 16:45:03 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12857176/HIVE-15849.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12857176/HIVE-15849.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 10344 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4127/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4127/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4127/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4127/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4127/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4127/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12857176 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15926219" author="ferhui" created="Wed, 15 Mar 2017 14:00:39 +0000"  >&lt;p&gt;Tests passed. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alangates&quot; class=&quot;user-hover&quot; rel=&quot;alangates&quot;&gt;Alan Gates&lt;/a&gt; could you please commit it to master? Thanks.&lt;/p&gt;</comment>
                            <comment id="15927991" author="ferhui" created="Thu, 16 Mar 2017 13:12:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; could you please help to commit it to master? Thanks&lt;/p&gt;</comment>
                            <comment id="15929023" author="alangates" created="Thu, 16 Mar 2017 22:19:55 +0000"  >&lt;p&gt;Patch 1 committed to master.  Thanks Fei for the patch, and for your patience in us taking a while to get this in.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12857176" name="HIVE-15849.1.patch" size="3390" author="ferhui" created="Fri, 10 Mar 2017 04:20:09 +0000"/>
                            <attachment id="12851771" name="HIVE-15849.patch" size="658" author="ferhui" created="Thu, 9 Feb 2017 02:06:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2017 13:55:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39sdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15850] Proper handling of timezone in Druid storage handler</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15850</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We need to make sure that filters on timestamp are passed to Druid with correct timezone.&lt;/p&gt;

&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-1617&quot; title=&quot;Druid adapter: Send timestamp literals to Druid as local time, not UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-1617&quot;&gt;&lt;del&gt;CALCITE-1617&lt;/del&gt;&lt;/a&gt;, Calcite will generate a Druid query with intervals without timezone specification. In Druid, these intervals will be assumed to be in UTC (if Druid is running in UTC, which is currently the recommendation). However, in Hive, those intervals should be assumed to be in the user timezone. Thus, we should respect Hive semantics and include the user timezone in the intervals passed to Druid.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041368">HIVE-15850</key>
            <summary>Proper handling of timezone in Druid storage handler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcamachorodriguez">Jesus Camacho Rodriguez</assignee>
                                    <reporter username="jcamachorodriguez">Jesus Camacho Rodriguez</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 12:27:16 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:27 +0000</updated>
                            <resolved>Fri, 10 Feb 2017 12:02:29 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Druid integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15858094" author="hiveqa" created="Wed, 8 Feb 2017 15:00:37 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851635/HIVE-15850.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851635/HIVE-15850.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10226 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=121)
	[stats12.q,groupby4.q,union_top_level.q,stats2.q,groupby10.q,mapjoin_filter_on_outerjoin.q,auto_sortmerge_join_4.q,limit_partition_metadataonly.q,load_dyn_part4.q,union3.q,groupby_multi_single_reducer.q,smb_mapjoin_14.q,groupby3_noskew_multi_distinct.q,stats18.q,union_remove_21.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3440/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3440/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3440/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3440/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3440/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3440/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851635 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15858171" author="bslim" created="Wed, 8 Feb 2017 16:08:32 +0000"  >&lt;p&gt;@jcamachor most of the change of this PR is re-writing the implementation from `long` to `DateTime`, i might be missing something but not sure what is exactly fixing. It will be nice if you layout a test scenario that breaks the old code and get fixed by this patch.  &lt;/p&gt;</comment>
                            <comment id="15858178" author="jcamachorodriguez" created="Wed, 8 Feb 2017 16:18:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;slim bouguerra&lt;/a&gt;, you are correct, I thought deserializing was having an issue with timestamp values (got confused with default timezone), but it does not. I am closing this one as invalid.&lt;/p&gt;</comment>
                            <comment id="15859351" author="jcamachorodriguez" created="Thu, 9 Feb 2017 10:59:52 +0000"  >&lt;p&gt;Reopening and updating description.&lt;/p&gt;</comment>
                            <comment id="15859520" author="jcamachorodriguez" created="Thu, 9 Feb 2017 13:34:28 +0000"  >&lt;p&gt;PR is in &lt;a href=&quot;https://github.com/apache/hive/pull/145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/145&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="15859821" author="bslim" created="Thu, 9 Feb 2017 17:08:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcamachorodriguez&quot; class=&quot;user-hover&quot; rel=&quot;jcamachorodriguez&quot;&gt;Jesus Camacho Rodriguez&lt;/a&gt; thanks LGTM.&lt;br/&gt;
More questions, can you ensure that if the user uses UDFs like to_utc_timestamp(timestamp, string timezone) this still work ?  &lt;/p&gt;</comment>
                            <comment id="15859845" author="jcamachorodriguez" created="Thu, 9 Feb 2017 17:20:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;slim bouguerra&lt;/a&gt;, that&apos;s a fair point.&lt;/p&gt;

&lt;p&gt;That logic is independent from this code and somehow more related to the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15863&quot; title=&quot;Calendar inside DATE, TIME and TIMESTAMP literals for Calcite should have UTC timezone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15863&quot;&gt;&lt;del&gt;HIVE-15863&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This problem should not exist since Calcite cannot fold &lt;tt&gt;to_utc_timestamp(timestamp, string timezone)&lt;/tt&gt; (the UDF is a black box). In turn, it relies on the Hive expression folding logic, which needs to go through the Calcite to Hive expression translation, and thus, will have the right literal in timestamp (for more details, check the changes in ExprNodeConverter.java in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15863&quot; title=&quot;Calendar inside DATE, TIME and TIMESTAMP literals for Calcite should have UTC timezone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15863&quot;&gt;&lt;del&gt;HIVE-15863&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15860529" author="ashutoshc" created="Fri, 10 Feb 2017 01:40:45 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15861111" author="hiveqa" created="Fri, 10 Feb 2017 11:09:29 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851860/HIVE-15850.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851860/HIVE-15850.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10230 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=97)
	[parallel_join1.q,union27.q,union12.q,groupby7_map_multi_single_reducer.q,varchar_join1.q,join7.q,join_reorder4.q,skewjoinopt2.q,bucketsortoptimize_insert_2.q,smb_mapjoin_17.q,script_env_var1.q,groupby7_map.q,groupby3.q,bucketsortoptimize_insert_8.q,union20.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3486/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3486/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3486/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3486/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3486/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3486/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851860 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15861178" author="githubbot" created="Fri, 10 Feb 2017 12:02:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/145&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15861179" author="jcamachorodriguez" created="Fri, 10 Feb 2017 12:02:29 +0000"  >&lt;p&gt;Pushed to master, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;slim bouguerra&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851860" name="HIVE-15850.patch" size="16256" author="jcamachorodriguez" created="Thu, 9 Feb 2017 13:37:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2017 15:00:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39sfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15851] CompactorMR.launchCompactionJob() should use JobClient.submitJob() not runJob</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15851</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;otherwise hadoop JobId of the job is not visible in SHOW COMPACTIONS until the job completes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041464">HIVE-15851</key>
            <summary>CompactorMR.launchCompactionJob() should use JobClient.submitJob() not runJob</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 19:46:18 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:11 +0000</updated>
                            <resolved>Thu, 9 Feb 2017 18:15:48 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15858650" author="hiveqa" created="Wed, 8 Feb 2017 22:50:21 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851735/HIVE-15851.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851735/HIVE-15851.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10242 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3447/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3447/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3447/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3447/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3447/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3447/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851735 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15858676" author="ekoifman" created="Wed, 8 Feb 2017 23:09:14 +0000"  >&lt;p&gt;Failures not related&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzheng&quot; class=&quot;user-hover&quot; rel=&quot;wzheng&quot;&gt;Wei Zheng&lt;/a&gt; could you review please&lt;/p&gt;</comment>
                            <comment id="15858704" author="wzheng" created="Wed, 8 Feb 2017 23:36:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15859937" author="ekoifman" created="Thu, 9 Feb 2017 18:15:48 +0000"  >&lt;p&gt;committed to master&lt;br/&gt;
thanks Wei for the review&lt;/p&gt;</comment>
                            <comment id="15966724" author="wzheng" created="Wed, 12 Apr 2017 22:07:01 +0000"  >&lt;p&gt;Previous commit by Eugene went into master, then branch-2, then branch-2.3.&lt;/p&gt;

&lt;p&gt;I just backported it to branch-2.2 as well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13024933">HIVE-15337</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13055772">HIVE-16193</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12851735" name="HIVE-15851.01.patch" size="966" author="ekoifman" created="Wed, 8 Feb 2017 21:28:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2017 22:50:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39t13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15852] Tablesampling on Tez in low-record case throws ArrayIndexOutOfBoundsException</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15852</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13040&quot; title=&quot;Handle empty bucket creations more efficiently &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13040&quot;&gt;&lt;del&gt;HIVE-13040&lt;/del&gt;&lt;/a&gt; ( &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13040&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-13040&lt;/a&gt; ), which doesn&apos;t create empty files to represent empty buckets when Hive is on Tez, a couple things are broken.&lt;/p&gt;

&lt;p&gt;First of all, if there are empty buckets (which is possible with large datasets in the partitioned-bucketed case), tablesampling will not work if you&apos;re referencing a bucket number higher than the number of files.&lt;br/&gt;
e.g. In some partition &apos;p&apos;, there are three rows. The table &apos;t&apos; is clustered into ten buckets. With maximal hashing, only three bucket files will be created. If we do select * from t tablesample (bucket x out of 10) where &amp;lt;selecting from p&amp;gt; (where x &amp;gt; 3), an ArrayIndexOutOfBoundsException will be thrown because Hive assumes there are only three buckets.&lt;/p&gt;

&lt;p&gt;Second, other applications (such as Pig) may be making assumptions about the number of files equaling the number of buckets.&lt;/p&gt;

&lt;p&gt;Possible fixes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13040&quot; title=&quot;Handle empty bucket creations more efficiently &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13040&quot;&gt;&lt;del&gt;HIVE-13040&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Change how tablesampling is implemented to accept possibility that number of files != number of buckets
	&lt;ul&gt;
		&lt;li&gt;Would require coordination across projects to change assumptions&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Things to consider:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;what performance gains are there from not creating empty files?&lt;/li&gt;
	&lt;li&gt;if the gains are large, are we willing to lose them? (by reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13040&quot; title=&quot;Handle empty bucket creations more efficiently &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13040&quot;&gt;&lt;del&gt;HIVE-13040&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;&lt;em&gt;how else can we avoid creating unnecessary files, while still maintaining invariants other applications expect?&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13041470">HIVE-15852</key>
            <summary>Tablesampling on Tez in low-record case throws ArrayIndexOutOfBoundsException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="poeppt">Thomas Poepping</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 20:13:18 +0000</created>
                <updated>Tue, 14 Feb 2017 00:16:39 +0000</updated>
                                            <version>2.1.1</version>
                                                    <component>Tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15858485" author="poeppt" created="Wed, 8 Feb 2017 20:14:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Ashutosh, sorry it took so long to open this Jira issue. Here&apos;s a summary of what I&apos;ve found so far. While it&apos;s the easiest solution, I really don&apos;t want to revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13040&quot; title=&quot;Handle empty bucket creations more efficiently &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13040&quot;&gt;&lt;del&gt;HIVE-13040&lt;/del&gt;&lt;/a&gt;, I think the performance gains can be large, especially in the blobstore (s3a or azure) case, as empty file creation is far from free.&lt;/p&gt;

&lt;p&gt;Happy to hear suggestions, and start a conversation.&lt;/p&gt;</comment>
                            <comment id="15864733" author="ashutoshc" created="Tue, 14 Feb 2017 00:05:52 +0000"  >&lt;p&gt;Gains of not creating empty files are huge even on HDFS, I don&apos;t think we want to loose those.&lt;/p&gt;

&lt;p&gt;We should fix tablesampling. I am not aware of Pig&apos;s assumption for bucketing. Can you describe bit more what is that assumption? Anyway, even if it has that seems like assuming something in implementation, since there is no interface contract anywhere that # of buckets = # of files.&lt;/p&gt;</comment>
                            <comment id="15864742" author="poeppt" created="Tue, 14 Feb 2017 00:16:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Yeah, I think that solution makes the most sense. Even if there are some hidden dependencies in other projects, as you say, there is no interface contract and so those assumptions should not even be made. &lt;/p&gt;

&lt;p&gt;I will take a look into how tablesampling can be improved. Hopefully the fix is not too wide.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Feb 2017 00:05:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39t2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15853] Semijoin removed in case of dynamically partitioned hash join</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15853</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Incase of dynamically partitioned hash join, the semijoin branch is removed to avoid a cycle even though it does not create a cycle.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041535">HIVE-15853</key>
            <summary>Semijoin removed in case of dynamically partitioned hash join</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djaiswal">Deepak Jaiswal</assignee>
                                    <reporter username="djaiswal">Deepak Jaiswal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 23:40:47 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:44 +0000</updated>
                            <resolved>Thu, 9 Feb 2017 22:03:22 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15858719" author="jdere" created="Wed, 8 Feb 2017 23:51:18 +0000"  >&lt;p&gt;+1. One small nit, can you some extra comments on the line above to mention why the semijoin opt branch should be removed if the RS parent is being removed?&lt;/p&gt;</comment>
                            <comment id="15858724" author="djaiswal" created="Wed, 8 Feb 2017 23:58:10 +0000"  >&lt;p&gt;Added comments as suggested.&lt;/p&gt;</comment>
                            <comment id="15859193" author="hiveqa" created="Thu, 9 Feb 2017 08:19:25 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851762/HIVE-15853.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851762/HIVE-15853.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10242 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3456/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3456/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3456/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3456/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3456/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3456/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851762 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15859257" author="hiveqa" created="Thu, 9 Feb 2017 09:31:42 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851762/HIVE-15853.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851762/HIVE-15853.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10227 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=110)
	[groupby_grouping_id2.q,input17.q,bucketmapjoin12.q,ppd_gby_join.q,auto_join10.q,ptf_rcfile.q,vector_elt.q,multi_insert.q,ppd_join5.q,ppd_join.q,join_filters_overlap.q,join_cond_pushdown_1.q,timestamp_3.q,load_dyn_part6.q,stats_noscan_2.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3457/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3457/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3457/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3457/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3457/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3457/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851762 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860293" author="jdere" created="Thu, 9 Feb 2017 22:03:22 +0000"  >&lt;p&gt;Committed to master&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851758" name="HIVE-15853.1.patch" size="796" author="djaiswal" created="Wed, 8 Feb 2017 23:42:09 +0000"/>
                            <attachment id="12851762" name="HIVE-15853.2.patch" size="997" author="djaiswal" created="Wed, 8 Feb 2017 23:57:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2017 23:51:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39tgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15854] MM tables - autoColumnStats_9.q different stats</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15854</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There&apos;s difference in column stats for unclear reason (null count). The results of the queries are the same (if added to the file). Logs are huge and it&apos;s unclear how to investigate, probably the stats UDF needs to be logged in the debugger with all rows.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041549">HIVE-15854</key>
            <summary>MM tables - autoColumnStats_9.q different stats</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12997110">HIVE-14535</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 00:50:24 +0000</created>
                <updated>Fri, 3 Mar 2017 02:46:35 +0000</updated>
                            <resolved>Fri, 3 Mar 2017 02:46:35 +0000</resolved>
                                                    <fixVersion>hive-14535</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15858805" author="pxiong" created="Thu, 9 Feb 2017 01:03:05 +0000"  >&lt;p&gt;in which run it failed? I saw in the most recent runs, it did not fail?&lt;/p&gt;</comment>
                            <comment id="15858820" author="sershe" created="Thu, 9 Feb 2017 01:14:25 +0000"  >&lt;p&gt;Updated the title. it&apos;s only for the feature branch, see parent jira&lt;/p&gt;</comment>
                            <comment id="15893620" author="sershe" created="Fri, 3 Mar 2017 02:46:35 +0000"  >&lt;p&gt;This was caused by the issue with MM and skewjoin that was fixed in a different JIRA&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 01:03:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39tjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15855] throws NPE when using Hplsql UDF</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15855</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://www.hplsql.org/udf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.hplsql.org/udf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;here is error log i get&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
at org.apache.hive.hplsql.Exec.setVariable(Exec.java:148) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hive.hplsql.Exec.setVariable(Exec.java:158) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hive.hplsql.Udf.setParameters(Udf.java:92) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hive.hplsql.Udf.evaluate(Udf.java:74) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-hplsql-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.ExprNodeGenericFuncEvaluator._evaluate(ExprNodeGenericFuncEvaluator.java:187) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:80) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:68) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.SelectOperator.process(SelectOperator.java:88) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:897) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:130) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:438) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:430) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:147) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:2209) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.hive.service.cli.operation.SQLOperation.getNextRowSet(SQLOperation.java:492) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-service-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;hive 2.2.0&lt;/p&gt;</environment>
        <key id="13041561">HIVE-15855</key>
            <summary>throws NPE when using Hplsql UDF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ferhui">Fei Hui</assignee>
                                    <reporter username="ferhui">Fei Hui</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 01:56:50 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:04 +0000</updated>
                            <resolved>Fri, 10 Feb 2017 00:24:28 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>hpl/sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15858857" author="ferhui" created="Thu, 9 Feb 2017 02:01:16 +0000"  >&lt;p&gt;i find that, there are only basic sql tests on hpl, and the error occurs on hiveserver2.&lt;br/&gt;
it is hard to add tests for this patch CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt;&lt;br/&gt;
patch is simple&#65292; just add if clause&lt;/p&gt;</comment>
                            <comment id="15858861" author="ferhui" created="Thu, 9 Feb 2017 02:03:18 +0000"  >&lt;p&gt;patch uploaded&lt;/p&gt;</comment>
                            <comment id="15858884" author="ferhui" created="Thu, 9 Feb 2017 02:19:11 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15858888" author="ferd" created="Thu, 9 Feb 2017 02:21:42 +0000"  >&lt;p&gt;Thanks @Fei Hui for creating this ticket. LGTM +1, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alangates&quot; class=&quot;user-hover&quot; rel=&quot;alangates&quot;&gt;Alan Gates&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmtolpeko&quot; class=&quot;user-hover&quot; rel=&quot;dmtolpeko&quot;&gt;Dmitry Tolpeko&lt;/a&gt;, do you have any further comments?&lt;/p&gt;</comment>
                            <comment id="15859378" author="ferhui" created="Thu, 9 Feb 2017 11:24:31 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ferd&quot; class=&quot;user-hover&quot; rel=&quot;Ferd&quot;&gt;Ferdinand Xu&lt;/a&gt; could you please commit it to master?&lt;/p&gt;</comment>
                            <comment id="15859454" author="hiveqa" created="Thu, 9 Feb 2017 12:58:46 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851770/HIVE-15855.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851770/HIVE-15855.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10227 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=112)
	[enforce_order.q,smb_mapjoin_21.q,load_dyn_part15.q,udf_min.q,groupby_resolution.q,mapjoin_memcheck.q,subquery_exists.q,groupby5.q,join27.q,alter_merge_stats_orc.q,union_remove_2.q,vector_orderby_5.q,groupby6_map_skew.q,join12.q,union9.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3460/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3460/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3460/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3460/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3460/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3460/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851770 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15859515" author="ferhui" created="Thu, 9 Feb 2017 13:32:42 +0000"  >&lt;p&gt;failing tests are not related&lt;/p&gt;</comment>
                            <comment id="15860454" author="ferd" created="Fri, 10 Feb 2017 00:24:28 +0000"  >&lt;p&gt;Committed to the master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ferhui&quot; class=&quot;user-hover&quot; rel=&quot;ferhui&quot;&gt;Fei Hui&lt;/a&gt; for the contribution.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851770" name="HIVE-15855.patch" size="865" author="ferhui" created="Thu, 9 Feb 2017 02:03:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 02:21:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39tmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15856] Hive export/import (hive.exim.uri.scheme.whitelist) to support s3a</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15856</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Add support for export / import operations on S3.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041563">HIVE-15856</key>
            <summary>Hive export/import (hive.exim.uri.scheme.whitelist) to support s3a</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stakiar">Sahil Takiar</assignee>
                                    <reporter username="stakiar">Sahil Takiar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 02:00:21 +0000</created>
                <updated>Thu, 23 Mar 2017 17:27:13 +0000</updated>
                            <resolved>Thu, 23 Mar 2017 17:27:13 +0000</resolved>
                                                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15859033" author="zyork" created="Thu, 9 Feb 2017 05:07:29 +0000"  >&lt;p&gt;Is that not already fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13463?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-13463?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15860153" author="stakiar" created="Thu, 9 Feb 2017 20:35:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zyork&quot; class=&quot;user-hover&quot; rel=&quot;zyork&quot;&gt;Zach York&lt;/a&gt; it seems that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13463&quot; title=&quot;Fix ImportSemanticAnalyzer to allow for different src/dst filesystems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13463&quot;&gt;&lt;del&gt;HIVE-13463&lt;/del&gt;&lt;/a&gt; fixes issues when trying to import across filesystems, but in order for an export / import command to run against a filesystem, the scheme of the filesystem uri must be in the list &lt;tt&gt;hive.exim.uri.scheme.whitelist&lt;/tt&gt; - currently there are no S3 schemes in that list.&lt;/p&gt;

&lt;p&gt;At least, the following query fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;export table src to &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:test.blobstore.path.unique}/exim/src&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.hadoop.hive.ql.parse.SemanticException: Invalid path only the following file systems accepted &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; export/&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; : hdfs,pfile,file
	at org.apache.hadoop.hive.ql.parse.EximUtil.getValidatedURI(EximUtil.java:187)
	at org.apache.hadoop.hive.ql.parse.ExportSemanticAnalyzer.analyzeInternal(ExportSemanticAnalyzer.java:73)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:258)
	at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:514)
	at org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1319)
	at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1459)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1239)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1229)
	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:233)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:184)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:336)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15860163" author="zyork" created="Thu, 9 Feb 2017 20:39:38 +0000"  >&lt;p&gt;So you want to add this to the list by default? You can manually set hive.exim.uri.scheme.whitelist=hdfs,pfile,file,s3,s3a,s3n.&lt;/p&gt;

&lt;p&gt;If you add s3a, can you also add s3 and s3n?&lt;/p&gt;</comment>
                            <comment id="15860197" author="stakiar" created="Thu, 9 Feb 2017 21:00:15 +0000"  >&lt;p&gt;Yes, add them by default, and add qtests for them to the &lt;tt&gt;hive-blobstore&lt;/tt&gt; module. Sure, will add s3 and s3n too.&lt;/p&gt;</comment>
                            <comment id="15860325" author="poeppt" created="Thu, 9 Feb 2017 22:33:19 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt;, I&apos;ve actually been working on import/export tests for blobstore, just created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15867&quot; title=&quot;Add blobstore tests for import/export&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15867&quot;&gt;&lt;del&gt;HIVE-15867&lt;/del&gt;&lt;/a&gt; to track&lt;/p&gt;

&lt;p&gt;Suggest we make this JIRA dependent on that one&lt;/p&gt;</comment>
                            <comment id="15860388" author="stakiar" created="Thu, 9 Feb 2017 23:33:58 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt;, sounds good. I haven&apos;t done much for writing the qtests yet, just started today. So if you have been working on this, that sounds good to me. I will make this JIRA dependent on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15867&quot; title=&quot;Add blobstore tests for import/export&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15867&quot;&gt;&lt;del&gt;HIVE-15867&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For reference, this is what I wrote earlier today:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table hdfs_src (col1 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, col2 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, col3 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
insert into table hdfs_src values (1, 2, 3), (4, 5, 6), (7, 8, 9);

create table blobstore_src location &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:test.blobstore.path.unique}/exim/blobstore_src&apos;&lt;/span&gt; as select * from hdfs_src;

-- Test export HDFS to blobstore, and then &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; blobstore to HDFS

export table hdfs_src to &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:test.blobstore.path.unique}/exim/export_from_hdfs&apos;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; table imported_from_hdfs from &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:test.blobstore.path.unique}/exim/export_from_hdfs&apos;&lt;/span&gt;;
select * from imported_from_hdfs;

-- Test export blobstore to blobstore, and then &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; blobstore to blobstore

export table blobstore_src to &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:test.blobstore.path.unique}/exim/export_from_blobstore&apos;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; table imported_from_blobstore from &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:test.blobstore.path.unique}/exim/export_from_blobstore&apos;&lt;/span&gt;; 
select * from imported_from_blobstore;

-- Test export blobstore to HDFS, and then &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; HDFS to blobstore

export table blobstore_src to &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:hive.metastore.warehouse.dir}/export_from_blobstore&apos;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; table imported_from_hdfs from &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:hive.metastore.warehouse.dir}/blobstore_src_hdfs&apos;&lt;/span&gt; location &lt;span class=&quot;code-quote&quot;&gt;&apos;${hiveconf:test.blobstore.path.unique}/exim/imported_from_hdfs&apos;&lt;/span&gt;;
select * from imported_from_hdfs;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15860419" author="poeppt" created="Thu, 9 Feb 2017 23:47:49 +0000"  >&lt;p&gt;The way that we will likely be doing this is with multiple different tests &amp;#8211; one for each of these cases. But in essence, that&apos;s what we have as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15866610" author="jzhuge" created="Tue, 14 Feb 2017 20:39:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt;, do you plan to add ADLS scheme &lt;tt&gt;adl&lt;/tt&gt; to the whitelist in this JIRA or file a new JIRA?&lt;/p&gt;</comment>
                            <comment id="15872039" author="stakiar" created="Fri, 17 Feb 2017 16:15:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jzhuge&quot; class=&quot;user-hover&quot; rel=&quot;jzhuge&quot;&gt;John Zhuge&lt;/a&gt; yes I can &lt;tt&gt;adl&lt;/tt&gt; to the whitelist, can you help in testing it against a real adls cluster? The tests Thomas is writing in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15867&quot; title=&quot;Add blobstore tests for import/export&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15867&quot;&gt;&lt;del&gt;HIVE-15867&lt;/del&gt;&lt;/a&gt; can be run against ADLS - see &lt;tt&gt;itests/hive-blobstore/README&lt;/tt&gt; for directions.&lt;/p&gt;</comment>
                            <comment id="15881798" author="jzhuge" created="Fri, 24 Feb 2017 02:10:22 +0000"  >&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt;&apos;s help, I was able to run &lt;tt&gt;hive-blobstore&lt;/tt&gt; itests on ADLS after adding &lt;tt&gt;adl&lt;/tt&gt; to the whitelist. The itests eventually failed at other places, we will file a separate JIRA.&lt;/p&gt;</comment>
                            <comment id="15938837" author="stakiar" created="Thu, 23 Mar 2017 17:27:06 +0000"  >&lt;p&gt;This was done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15867&quot; title=&quot;Add blobstore tests for import/export&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15867&quot;&gt;&lt;del&gt;HIVE-15867&lt;/del&gt;&lt;/a&gt; - closing this JIRA. ADLS support will be done in a separate JIRA.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13041866">HIVE-15867</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 05:07:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39tn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15857] Vectorization: Add string conversion case for UDFToInteger, etc</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15857</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Otherwise, VectorUDFAdaptor is used to convert a column from String to Int, etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041609">HIVE-15857</key>
            <summary>Vectorization: Add string conversion case for UDFToInteger, etc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mmccline">Matt McCline</assignee>
                                    <reporter username="mmccline">Matt McCline</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 07:07:19 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:00 +0000</updated>
                            <resolved>Sun, 19 Mar 2017 15:56:14 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15859152" author="mmccline" created="Thu, 9 Feb 2017 07:26:14 +0000"  >&lt;p&gt;Without the new CastStringToLong class, conversion falls to VectorUDFAdaptor.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;vector.VectorExpressionDescriptor: getVectorExpressionClass udf UDFToInteger descriptor: Argument Count = 1, mode = PROJECTION, Argument Types = {STRING}, Input Expression Types = {COLUMN}
vector.VectorExpressionDescriptor: getVectorExpressionClass doesn&apos;t match CastTimestampToLong Argument Count = 1, mode = PROJECTION, Argument Types = {TIMESTAMP}, Input Expression Types = {COLUMN}
vector.VectorExpressionDescriptor: getVectorExpressionClass doesn&apos;t match CastDoubleToLong Argument Count = 1, mode = PROJECTION, Argument Types = {FLOAT_FAMILY}, Input Expression Types = {COLUMN}
vector.VectorExpressionDescriptor: getVectorExpressionClass doesn&apos;t match CastDecimalToLong Argument Count = 1, mode = PROJECTION, Argument Types = {DECIMAL}, Input Expression Types = {COLUMN}
vector.VectorizationContext: No vector udf found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; UDFToInteger, descriptor: Argument Count = 1, mode = PROJECTION, Argument Types = {STRING}, Input Expression Types = {COLUMN}
vector.VectorizationContext: We will &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to use the VectorUDFAdaptor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; GenericUDFBridge ==&amp;gt; UDFToInteger (Column[tmp_values_col1]) because hive.vectorized.adaptor.usage.mode=all
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15859683" author="hiveqa" created="Thu, 9 Feb 2017 15:50:42 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851809/HIVE-15857.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851809/HIVE-15857.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10242 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_char_2] (batchId=63)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_coalesce_2] (batchId=65)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_bucket] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_char_2] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_coalesce_2] (batchId=152)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3463/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3463/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3463/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3463/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3463/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3463/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851809 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860473" author="mmccline" created="Fri, 10 Feb 2017 00:45:28 +0000"  >&lt;p&gt;Relevant test failures (vector_char_2, vector_coalesce_2, vector_bucket) are all golden file EXPLAIN differences show CastStringToLong being used instead of VectorUDFAdaptor.&lt;/p&gt;</comment>
                            <comment id="15880145" author="hiveqa" created="Thu, 23 Feb 2017 09:05:05 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854088/HIVE-15857.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854088/HIVE-15857.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 28 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10254 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_char_2] (batchId=64)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_coalesce_2] (batchId=66)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_count_distinct] (batchId=106)
org.apache.hive.hcatalog.pig.TestHCatLoaderComplexSchema.testTupleInBagInTupleInBag[1] (batchId=173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3717/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3717/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3717/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3717/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3717/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3717/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854088 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15895520" author="hiveqa" created="Sat, 4 Mar 2017 05:08:48 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855959/HIVE-15857.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855959/HIVE-15857.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3933/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3933/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3933/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3933/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3933/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3933/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Tests exited with: ExecutionException: java.util.concurrent.ExecutionException: java.io.IOException: Could not create /data/hiveptest/logs/PreCommit-HIVE-Build-3933/succeeded/28-TestCliDriver-input11_limit.q-nonreserved_keywords_input37.q-partition_char.q-and-27-more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855959 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15898208" author="hiveqa" created="Mon, 6 Mar 2017 21:48:40 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12856331/HIVE-15857.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12856331/HIVE-15857.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 28 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10327 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[escape_comments] (batchId=229)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_between_in] (batchId=119)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3971/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3971/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3971/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3971/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3971/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3971/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12856331 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15898277" author="sershe" created="Mon, 6 Mar 2017 22:34:15 +0000"  >&lt;p&gt;Is it possible to have an RB without out file changes? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15900148" author="sershe" created="Tue, 7 Mar 2017 21:00:37 +0000"  >&lt;p&gt;+1 w/one small comment. There is some repetitive code that is handled less repetitively elsewhere in vectorization iirc (e.g. selectedInUse where it does int index = sIU ? sel&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; : i, instead of having 2 separate loops). I am assuming this is due to vectorization requirements that they are all handled separately &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15900323" author="mmccline" created="Tue, 7 Mar 2017 22:40:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Thank you for your review!!&lt;/p&gt;</comment>
                            <comment id="15901188" author="hiveqa" created="Wed, 8 Mar 2017 12:38:48 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12856698/HIVE-15857.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12856698/HIVE-15857.05.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 28 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10332 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_between_in] (batchId=119)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4016/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4016/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4016/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4016/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4016/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4016/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12856698 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15931761" author="mmccline" created="Sun, 19 Mar 2017 15:55:18 +0000"  >&lt;p&gt;Fixup a few Q files &amp;#8211; no Hive QA rerun.&lt;/p&gt;</comment>
                            <comment id="15931762" author="mmccline" created="Sun, 19 Mar 2017 15:55:34 +0000"  >&lt;p&gt;Committed to master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851809" name="HIVE-15857.01.patch" size="41005" author="mmccline" created="Thu, 9 Feb 2017 07:21:42 +0000"/>
                            <attachment id="12854088" name="HIVE-15857.02.patch" size="344176" author="mmccline" created="Wed, 22 Feb 2017 23:06:51 +0000"/>
                            <attachment id="12855959" name="HIVE-15857.03.patch" size="445283" author="mmccline" created="Fri, 3 Mar 2017 20:19:12 +0000"/>
                            <attachment id="12856331" name="HIVE-15857.04.patch" size="445283" author="mmccline" created="Mon, 6 Mar 2017 19:11:34 +0000"/>
                            <attachment id="12856698" name="HIVE-15857.05.patch" size="445297" author="mmccline" created="Tue, 7 Mar 2017 22:39:46 +0000"/>
                            <attachment id="12859407" name="HIVE-15857.06.patch" size="445297" author="mmccline" created="Sat, 18 Mar 2017 04:51:44 +0000"/>
                            <attachment id="12859468" name="HIVE-15857.07.patch" size="347488" author="mmccline" created="Sun, 19 Mar 2017 15:55:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 15:50:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39txb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15858] Beeline ^C doesn&apos;t close the session in HTTP mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15858</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When open multiple connections through Beeline to Hiveserver2 and if tries to close the client using !quit or ^C command, it looks like all the connections/sessions are not getting closed.&lt;br/&gt;
!quit seems to close the current active connection but fails to close other open sessions.&lt;br/&gt;
^C doesn&apos;t close any session.&lt;/p&gt;

&lt;p&gt;This behaviour is noticed only with the HTTP mode of transport (hive.server2.transport.mode=http). In case of BINARY mode, server triggers the close session when a tcp connection is closed by peer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041628">HIVE-15858</key>
            <summary>Beeline ^C doesn&apos;t close the session in HTTP mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sankarh">Sankar Hariappan</assignee>
                                    <reporter username="sankarh">Sankar Hariappan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 08:41:03 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:03 +0000</updated>
                            <resolved>Mon, 13 Feb 2017 20:31:58 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Beeline</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15859225" author="xuefuz" created="Thu, 9 Feb 2017 08:56:42 +0000"  >&lt;p&gt;Does &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15626&quot; title=&quot;beeline should not exit after canceling the query on ctrl-c&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15626&quot;&gt;&lt;del&gt;HIVE-15626&lt;/del&gt;&lt;/a&gt; help?&lt;/p&gt;</comment>
                            <comment id="15859271" author="sankarh" created="Thu, 9 Feb 2017 09:49:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15626&quot; title=&quot;beeline should not exit after canceling the query on ctrl-c&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15626&quot;&gt;&lt;del&gt;HIVE-15626&lt;/del&gt;&lt;/a&gt; supports the smooth cancellation of running query when we hit Ctrl+C. But, this issue for the scenario, where no queries are running currently and if we hit either !quit or Ctrl+C, then the beeline client closes but the sessions remain open in the server side. Also, I noticed this issue occurs only with HTTP mode of transport.&lt;/p&gt;</comment>
                            <comment id="15859319" author="sankarh" created="Thu, 9 Feb 2017 10:35:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; Please review the patch where I closed all open sessions through ShutdownHook.&lt;/p&gt;</comment>
                            <comment id="15859328" author="githubbot" created="Thu, 9 Feb 2017 10:41:49 +0000"  >&lt;p&gt;GitHub user sankarh opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/144&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/144&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15858&quot; title=&quot;Beeline ^C doesn&amp;#39;t close the session in HTTP mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15858&quot;&gt;&lt;del&gt;HIVE-15858&lt;/del&gt;&lt;/a&gt;: Beeline ^C doesn&apos;t close the session&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15858&quot; title=&quot;Beeline ^C doesn&amp;#39;t close the session in HTTP mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15858&quot;&gt;&lt;del&gt;HIVE-15858&lt;/del&gt;&lt;/a&gt;: Beeline ^C doesn&apos;t close the session&lt;br/&gt;
    Fixed by closing the sessions through ShutdownHook.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sankarh/hive&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sankarh/hive&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15858&quot; title=&quot;Beeline ^C doesn&amp;#39;t close the session in HTTP mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15858&quot;&gt;&lt;del&gt;HIVE-15858&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/144.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/144.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #144&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 07624a9328f9f8256aeb2f10a22058f4cf1aa693&lt;br/&gt;
Author: Sankar Hariappan &amp;lt;mailtosankarh@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-09T10:29:23Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15858&quot; title=&quot;Beeline ^C doesn&amp;#39;t close the session in HTTP mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15858&quot;&gt;&lt;del&gt;HIVE-15858&lt;/del&gt;&lt;/a&gt;: Beeline ^C doesn&apos;t close the session&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15859412" author="xuefuz" created="Thu, 9 Feb 2017 12:07:28 +0000"  >&lt;p&gt;+1 for the change. However, I think a patch is expected here to trigger tests.&lt;/p&gt;</comment>
                            <comment id="15859748" author="vihangk1" created="Thu, 9 Feb 2017 16:29:01 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sankarh&quot; class=&quot;user-hover&quot; rel=&quot;sankarh&quot;&gt;Sankar Hariappan&lt;/a&gt; for the patch. It looks like we have two places in Beeline code to handles signals like Ctrl^C. 1. SunSignalHandler and the code section which is modified by the patch. Do you think it would be a good idea modify the code so that they are all handled at the same place?&lt;/p&gt;</comment>
                            <comment id="15859873" author="hiveqa" created="Thu, 9 Feb 2017 17:38:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851831/HIVE-15858.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851831/HIVE-15858.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10242 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.hcatalog.pig.TestTextFileHCatStorer.testWriteDate3 (batchId=173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3466/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3466/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3466/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3466/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3466/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3466/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851831 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860814" author="thejas" created="Fri, 10 Feb 2017 06:25:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;It looks like we have two places in Beeline code to handles signals like Ctrl^C. 1. SunSignalHandler and the code section which is modified by the patch. Do you think it would be a good idea modify the code so that they are all handled at the same place?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;While the description talks about ^C, I think this closing of session is something we should be doing on any reason for exit. So the shutdownhook is the better place for that in my opinion.&lt;br/&gt;
For the desired behavior described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15626&quot; title=&quot;beeline should not exit after canceling the query on ctrl-c&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15626&quot;&gt;&lt;del&gt;HIVE-15626&lt;/del&gt;&lt;/a&gt;  for ^C, that would need to be dealt with in signalhandler.&lt;br/&gt;
So I think it makes sense to handle this two different requirements in two different places.&lt;/p&gt;</comment>
                            <comment id="15861064" author="sankarh" created="Fri, 10 Feb 2017 10:33:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; for the comment! I do agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; point that these changes are meant for different reasons. &lt;/p&gt;</comment>
                            <comment id="15861073" author="sankarh" created="Fri, 10 Feb 2017 10:38:04 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;! I shall see the test results right below your comment. Seems few failures not related to the patch. &lt;/p&gt;</comment>
                            <comment id="15861651" author="vihangk1" created="Fri, 10 Feb 2017 18:36:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;For the desired behavior described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15626&quot; title=&quot;beeline should not exit after canceling the query on ctrl-c&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15626&quot;&gt;&lt;del&gt;HIVE-15626&lt;/del&gt;&lt;/a&gt; for ^C, that would need to be dealt with in signalhandler. So I think it makes sense to handle this two different requirements in two different places.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Got it. In that case patch looks good to me too. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sankarh&quot; class=&quot;user-hover&quot; rel=&quot;sankarh&quot;&gt;Sankar Hariappan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15862561" author="thejas" created="Sat, 11 Feb 2017 22:41:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sankarh&quot; class=&quot;user-hover&quot; rel=&quot;sankarh&quot;&gt;Sankar Hariappan&lt;/a&gt;&lt;br/&gt;
Added a comment in github pull request. &lt;br/&gt;
Can you also add a unit test case for this ? Doing it for shutdown hook might not be feasible, so maybe create a separate runnable object in Beeline which shutdownhook would invoke, and also that can be accessed from test case. Add a mocked connetion object to Beeline.connections and verify that when this runnable is invoked there are no more connections ? (or something else you can think of)&lt;/p&gt;
</comment>
                            <comment id="15862940" author="sankarh" created="Sun, 12 Feb 2017 19:54:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt;&lt;br/&gt;
Added a unit test case and the new patch is attached for your review.&lt;/p&gt;</comment>
                            <comment id="15862941" author="sankarh" created="Sun, 12 Feb 2017 19:55:27 +0000"  >&lt;p&gt;Made ShutdownHook as a private Runnable object and also added an unit test case.&lt;/p&gt;</comment>
                            <comment id="15862982" author="hiveqa" created="Sun, 12 Feb 2017 21:16:14 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852264/HIVE-15858.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852264/HIVE-15858.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10222 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=131)
	[union_remove_15.q,bucket_map_join_tez1.q,scriptfile1.q,groupby7_noskew.q,bucketmapjoin1.q,subquery_multiinsert.q,auto_join8.q,auto_join6.q,groupby2_map_skew.q,lateral_view_explode2.q,join28.q,load_dyn_part1.q,skewjoinopt17.q,union_remove_20.q,bucketmapjoin5.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3509/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3509/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3509/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3509/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3509/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3509/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852264 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15863258" author="thejas" created="Mon, 13 Feb 2017 06:46:33 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Thanks for also adding the test.&lt;/p&gt;</comment>
                            <comment id="15864373" author="thejas" created="Mon, 13 Feb 2017 20:31:58 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sankarh&quot; class=&quot;user-hover&quot; rel=&quot;sankarh&quot;&gt;Sankar Hariappan&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15865509" author="sankarh" created="Tue, 14 Feb 2017 10:04:39 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; for the commit!&lt;/p&gt;</comment>
                            <comment id="15865511" author="githubbot" created="Tue, 14 Feb 2017 10:05:21 +0000"  >&lt;p&gt;Github user sankarh closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/144&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/144&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851831" name="HIVE-15858.01.patch" size="878" author="sankarh" created="Thu, 9 Feb 2017 10:31:54 +0000"/>
                            <attachment id="12852264" name="HIVE-15858.02.patch" size="4981" author="sankarh" created="Sun, 12 Feb 2017 19:55:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 08:56:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39u1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15859] HoS: Write RPC messages in event loop</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15859</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive on Spark, failed with error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-02-08 09:50:59,331 Stage-2_0: 1039(+2)/1041 Stage-3_0: 796(+456)/1520 Stage-4_0: 0/2021 Stage-5_0: 0/1009 Stage-6_0: 0/1
2017-02-08 09:51:00,335 Stage-2_0: 1040(+1)/1041 Stage-3_0: 914(+398)/1520 Stage-4_0: 0/2021 Stage-5_0: 0/1009 Stage-6_0: 0/1
2017-02-08 09:51:01,338 Stage-2_0: 1041/1041 Finished Stage-3_0: 961(+383)/1520 Stage-4_0: 0/2021 Stage-5_0: 0/1009 Stage-6_0: 0/1
Failed to monitor Job[ 2] with exception &apos;java.lang.IllegalStateException(RPC channel is closed.)&apos;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.spark.SparkTask
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;application log shows the driver commanded a shutdown with some unknown reason, but hive&apos;s log shows Driver could not get RPC header( Expected RPC header, got org.apache.hive.spark.client.rpc.Rpc$NullMessage instead).&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;17/02/08 09:51:04 INFO exec.Utilities: PLAN PATH = hdfs://hsx-node1:8020/tmp/hive/root/b723c85d-2a7b-469e-bab1-9c165b25e656/hive_2017-02-08_09-49-37_890_6267025825539539056-1/-mr-10006/71a9dacb-a463-40ef-9e86-78d3b8e3738d/map.xml
17/02/08 09:51:04 INFO executor.Executor: Executor killed task 1169.0 in stage 3.0 (TID 2519)
17/02/08 09:51:04 INFO executor.CoarseGrainedExecutorBackend: Driver commanded a shutdown
17/02/08 09:51:04 INFO storage.MemoryStore: MemoryStore cleared
17/02/08 09:51:04 INFO storage.BlockManager: BlockManager stopped
17/02/08 09:51:04 INFO exec.Utilities: PLAN PATH = hdfs://hsx-node1:8020/tmp/hive/root/b723c85d-2a7b-469e-bab1-9c165b25e656/hive_2017-02-08_09-49-37_890_6267025825539539056-1/-mr-10006/71a9dacb-a463-40ef-9e86-78d3b8e3738d/map.xml
17/02/08 09:51:04 WARN executor.CoarseGrainedExecutorBackend: An unknown (hsx-node1:42777) driver disconnected.
17/02/08 09:51:04 ERROR executor.CoarseGrainedExecutorBackend: Driver 192.168.1.1:42777 disassociated! Shutting down.
17/02/08 09:51:04 INFO executor.Executor: Executor killed task 1105.0 in stage 3.0 (TID 2511)
17/02/08 09:51:04 INFO util.ShutdownHookManager: Shutdown hook called
17/02/08 09:51:04 INFO remote.RemoteActorRefProvider$RemotingTerminator: Shutting down remote daemon.
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk6/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-71da1dfc-99bd-4687-bc2f-33452db8de3d
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk2/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-7f134d81-e77e-4b92-bd99-0a51d0962c14
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk5/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-77a90d63-fb05-4bc6-8d5e-1562cc502e6c
17/02/08 09:51:04 INFO remote.RemoteActorRefProvider$RemotingTerminator: Remote daemon shut down; proceeding with flushing remote transports.
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk4/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-91f8b91a-114d-4340-8560-d3cd085c1cd4
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk1/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-a3c24f9e-8609-48f0-9d37-0de7ae06682a
17/02/08 09:51:04 INFO remote.RemoteActorRefProvider$RemotingTerminator: Remoting shut down.
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk7/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-f6120a43-2158-4780-927c-c5786b78f53e
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk3/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-e17931ad-9e8a-45da-86f8-9a0fdca0fad1
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk8/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-4de34175-f871-4c28-8ec0-d2fc0020c5c3
17/02/08 09:51:04 INFO executor.Executor: Executor killed task 1137.0 in stage 3.0 (TID 2515)
17/02/08 09:51:04 INFO executor.Executor: Executor killed task 897.0 in stage 3.0 (TID 2417)
17/02/08 09:51:04 INFO executor.Executor: Executor killed task 1225.0 in stage 3.0 (TID 2526)
17/02/08 09:51:04 INFO executor.Executor: Executor killed task 905.0 in stage 3.0 (TID 2423)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in hive&apos;s log,&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-02-08T09:51:04,327 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 INFO scheduler.TaskSetManager: Finished task 971.0 in stage 3.0 (TID 2218) in 5948 ms on hsx-node8 (1338/1520)
2017-02-08T09:51:04,346 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 INFO rpc.RpcDispatcher: [DriverProtocol] Closing channel due to exception in pipeline (org.apache.hive.spark.client.RemoteDriver$DriverProtocol.handle(io.netty.channel.ChannelHandlerContext, org.apache.hive.spark.client.rpc.Rpc$MessageHeader)).
2017-02-08T09:51:04,346 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 WARN rpc.RpcDispatcher: [DriverProtocol] Expected RPC header, got org.apache.hive.spark.client.rpc.Rpc$NullMessage instead.
2017-02-08T09:51:04,347 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 INFO rpc.RpcDispatcher: [DriverProtocol] Closing channel due to exception in pipeline (null).
2017-02-08T09:51:04,347 INFO [RPC-Handler-3] rpc.RpcDispatcher: [ClientProtocol] Closing channel due to exception in pipeline (Connection reset by peer).
2017-02-08T09:51:04,347 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 ERROR scheduler.LiveListenerBus: Listener ClientListener threw an exception
2017-02-08T09:51:04,347 INFO [stderr-redir-1] client.SparkClientImpl: java.lang.IllegalStateException: RPC channel is closed.
2017-02-08T09:51:04,347 INFO [stderr-redir-1] client.SparkClientImpl: at com.google.common.base.Preconditions.checkState(Preconditions.java:149)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.rpc.Rpc.call(Rpc.java:276)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.rpc.Rpc.call(Rpc.java:259)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$DriverProtocol.sendMetrics(RemoteDriver.java:270)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$ClientListener.onTaskEnd(RemoteDriver.java:490)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.SparkListenerBus$class.onPostEvent(SparkListenerBus.scala:42)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.LiveListenerBus.onPostEvent(LiveListenerBus.scala:31)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.LiveListenerBus.onPostEvent(LiveListenerBus.scala:31)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.ListenerBus$class.postToAll(ListenerBus.scala:55)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus.postToAll(AsynchronousListenerBus.scala:37)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(AsynchronousListenerBus.scala:80)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply(AsynchronousListenerBus.scala:65)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply(AsynchronousListenerBus.scala:65)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1.apply$mcV$sp(AsynchronousListenerBus.scala:64)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.Utils$.tryOrStopSparkContext(Utils.scala:1181)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1.run(AsynchronousListenerBus.scala:63)
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 WARN rpc.Rpc: Failed to send RPC, closing connection.
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: java.nio.channels.ClosedChannelException
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 WARN client.RemoteDriver: Shutting down driver because RPC channel was closed.
2017-02-08T09:51:04,348 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 INFO client.RemoteDriver: Shutting down remote driver.
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 ERROR scheduler.LiveListenerBus: Listener ClientListener threw an exception
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: java.lang.IllegalStateException: RPC channel is closed.
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: at com.google.common.base.Preconditions.checkState(Preconditions.java:149)
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.rpc.Rpc.call(Rpc.java:276)
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.rpc.Rpc.call(Rpc.java:259)
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$DriverProtocol.sendMetrics(RemoteDriver.java:270)
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$ClientListener.onTaskEnd(RemoteDriver.java:490)
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.SparkListenerBus$class.onPostEvent(SparkListenerBus.scala:42)
2017-02-08T09:51:04,349 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.LiveListenerBus.onPostEvent(LiveListenerBus.scala:31)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.LiveListenerBus.onPostEvent(LiveListenerBus.scala:31)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.ListenerBus$class.postToAll(ListenerBus.scala:55)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus.postToAll(AsynchronousListenerBus.scala:37)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(AsynchronousListenerBus.scala:80)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply(AsynchronousListenerBus.scala:65)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply(AsynchronousListenerBus.scala:65)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1.apply$mcV$sp(AsynchronousListenerBus.scala:64)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.Utils$.tryOrStopSparkContext(Utils.scala:1181)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1.run(AsynchronousListenerBus.scala:63)
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 INFO scheduler.DAGScheduler: Asked to cancel job 2
2017-02-08T09:51:04,350 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 ERROR scheduler.LiveListenerBus: Listener ClientListener threw an exception
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: java.lang.InterruptedException
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at java.lang.Object.wait(Native Method)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at java.lang.Object.wait(Object.java:502)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.JobWaiter.awaitResult(JobWaiter.scala:73)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.SimpleFutureAction.org$apache$spark$SimpleFutureAction$$awaitResult(FutureAction.scala:165)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.SimpleFutureAction.ready(FutureAction.scala:120)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.SimpleFutureAction.ready(FutureAction.scala:108)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at scala.concurrent.Await$$anonfun$ready$1.apply(package.scala:86)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at scala.concurrent.Await$$anonfun$ready$1.apply(package.scala:86)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:53)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at scala.concurrent.Await$.ready(package.scala:86)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.JavaFutureActionWrapper.getImpl(FutureAction.scala:303)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.JavaFutureActionWrapper.get(FutureAction.scala:316)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$JobWrapper.call(RemoteDriver.java:362)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$JobWrapper.call(RemoteDriver.java:323)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at java.util.concurrent.FutureTask.run(FutureTask.java:266)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at java.lang.Thread.run(Thread.java:745)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 ERROR scheduler.LiveListenerBus: Listener ClientListener threw an exception
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: java.lang.IllegalStateException: RPC channel is closed.
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at com.google.common.base.Preconditions.checkState(Preconditions.java:149)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.rpc.Rpc.call(Rpc.java:276)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.rpc.Rpc.call(Rpc.java:259)
2017-02-08T09:51:04,351 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$DriverProtocol.sendMetrics(RemoteDriver.java:270)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.hive.spark.client.RemoteDriver$ClientListener.onTaskEnd(RemoteDriver.java:490)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.SparkListenerBus$class.onPostEvent(SparkListenerBus.scala:42)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.LiveListenerBus.onPostEvent(LiveListenerBus.scala:31)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.scheduler.LiveListenerBus.onPostEvent(LiveListenerBus.scala:31)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.ListenerBus$class.postToAll(ListenerBus.scala:55)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus.postToAll(AsynchronousListenerBus.scala:37)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(AsynchronousListenerBus.scala:80)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply(AsynchronousListenerBus.scala:65)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1$$anonfun$apply$mcV$sp$1.apply(AsynchronousListenerBus.scala:65)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
2017-02-08T09:51:04,352 INFO [stderr-redir-1] client.SparkClientImpl: at org.apache.spark.util.AsynchronousListenerBus$$anon$1$$anonfun$run$1.apply$mcV$sp(AsynchronousListenerBus.scala:64)
2017-02-08T09:51:04,654 INFO [stderr-redir-1] client.SparkClientImpl: 17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-65f40590-d87f-4701-b374-6b3b2a11538c
2017-02-08T09:52:04,346 WARN [b723c85d-2a7b-469e-bab1-9c165b25e656 main] impl.RemoteSparkJobStatus: Error getting stage info
java.util.concurrent.TimeoutException
at io.netty.util.concurrent.AbstractFuture.get(AbstractFuture.java:49) ~[netty-all-4.0.23.Final.jar:4.0.23.Final]
at org.apache.hadoop.hive.ql.exec.spark.status.impl.RemoteSparkJobStatus.getSparkStageInfo(RemoteSparkJobStatus.java:161) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.exec.spark.status.impl.RemoteSparkJobStatus.getSparkStageProgress(RemoteSparkJobStatus.java:96) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.exec.spark.status.RemoteSparkJobMonitor.startMonitor(RemoteSparkJobMonitor.java:82) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.exec.spark.status.impl.RemoteSparkJobRef.monitorJob(RemoteSparkJobRef.java:60) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.exec.spark.SparkTask.execute(SparkTask.java:101) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:199) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:100) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1997) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1688) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1419) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1143) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1131) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:233) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:184) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:400) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:336) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.processReader(CliDriver.java:430) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.processFile(CliDriver.java:446) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:749) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:715) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:642) ~[hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_60]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_60]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_60]
at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_60]
at org.apache.hadoop.util.RunJar.run(RunJar.java:221) ~[spark-assembly-1.6.2-hadoop2.6.0.jar:1.6.2]
at org.apache.hadoop.util.RunJar.main(RunJar.java:136) ~[spark-assembly-1.6.2-hadoop2.6.0.jar:1.6.2]
2017-02-08T09:52:04,346 ERROR [b723c85d-2a7b-469e-bab1-9c165b25e656 main] status.SparkJobMonitor: Failed to monitor Job[ 2] with exception &apos;java.lang.IllegalStateException(RPC channel is closed.)&apos;
java.lang.IllegalStateException: RPC channel is closed.
at com.google.common.base.Preconditions.checkState(Preconditions.java:149) ~[guava-14.0.1.jar:?]
at org.apache.hive.spark.client.rpc.Rpc.call(Rpc.java:276) ~[hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;also in container&apos;s log, I find Driver still request for executors:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;17/02/08 09:51:00 INFO yarn.YarnAllocator: Driver requested a total number of 77 executor(s).
17/02/08 09:51:00 INFO yarn.YarnAllocator: Canceling requests for 2 executor containers
17/02/08 09:51:00 INFO yarn.YarnAllocator: Driver requested a total number of 76 executor(s).
17/02/08 09:51:00 INFO yarn.YarnAllocator: Canceling requests for 1 executor containers
17/02/08 09:51:00 INFO yarn.YarnAllocator: Driver requested a total number of 75 executor(s).
17/02/08 09:51:00 INFO yarn.YarnAllocator: Canceling requests for 1 executor containers
17/02/08 09:51:00 INFO yarn.YarnAllocator: Driver requested a total number of 74 executor(s).
17/02/08 09:51:00 INFO yarn.YarnAllocator: Canceling requests for 1 executor containers
17/02/08 09:51:00 INFO yarn.YarnAllocator: Driver requested a total number of 73 executor(s).
17/02/08 09:51:00 INFO yarn.YarnAllocator: Canceling requests for 1 executor containers
17/02/08 09:51:00 INFO yarn.YarnAllocator: Driver requested a total number of 71 executor(s).
17/02/08 09:51:00 INFO yarn.YarnAllocator: Canceling requests for 2 executor containers
17/02/08 09:51:00 INFO yarn.YarnAllocator: Driver requested a total number of 70 executor(s).
17/02/08 09:51:00 INFO yarn.YarnAllocator: Canceling requests for 1 executor containers
17/02/08 09:51:04 INFO yarn.YarnAllocator: Driver requested a total number of 50 executor(s).
17/02/08 09:51:04 INFO yarn.YarnAllocator: Canceling requests for 0 executor containers
17/02/08 09:51:04 WARN yarn.YarnAllocator: Expected to find pending requests, but found none.
17/02/08 09:51:04 INFO yarn.YarnAllocator: Driver requested a total number of 0 executor(s).
17/02/08 09:51:04 INFO yarn.YarnAllocator: Canceling requests for 0 executor containers
17/02/08 09:51:04 WARN yarn.YarnAllocator: Expected to find pending requests, but found none.
17/02/08 09:51:04 INFO yarn.ApplicationMaster$AMEndpoint: Driver terminated or disconnected! Shutting down. 192.168.1.1:42777
17/02/08 09:51:04 INFO yarn.ApplicationMaster$AMEndpoint: Driver terminated or disconnected! Shutting down. hsx-node1:42777
17/02/08 09:51:04 INFO yarn.ApplicationMaster: Final app status: SUCCEEDED, exitCode: 0
17/02/08 09:51:04 INFO yarn.ApplicationMaster: Unregistering ApplicationMaster with SUCCEEDED
17/02/08 09:51:04 INFO impl.AMRMClientImpl: Waiting for application to be successfully unregistered.
17/02/08 09:51:04 INFO yarn.ApplicationMaster: Deleting staging directory .sparkStaging/application_1486453422616_0150
17/02/08 09:51:04 INFO util.ShutdownHookManager: Shutdown hook called
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;found only one ERROR in yarn application log:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;17/02/08 09:51:00 INFO executor.Executor: Finished task 1492.0 in stage 3.0 (TID 2168). 3294 bytes result sent to driver
17/02/08 09:51:00 INFO executor.Executor: Finished task 556.0 in stage 3.0 (TID 1587). 3312 bytes result sent to driver
17/02/08 09:51:00 INFO executor.Executor: Finished task 1412.0 in stage 3.0 (TID 2136). 3294 bytes result sent to driver
17/02/08 09:51:00 INFO executor.Executor: Finished task 1236.0 in stage 3.0 (TID 2007). 3294 bytes result sent to driver
17/02/08 09:51:04 INFO executor.CoarseGrainedExecutorBackend: Driver commanded a shutdown
17/02/08 09:51:04 INFO storage.MemoryStore: MemoryStore cleared
17/02/08 09:51:04 INFO storage.BlockManager: BlockManager stopped
17/02/08 09:51:04 WARN executor.CoarseGrainedExecutorBackend: An unknown (hsx-node1:42777) driver disconnected.
17/02/08 09:51:04 ERROR executor.CoarseGrainedExecutorBackend: Driver 192.168.1.1:42777 disassociated! Shutting down.
17/02/08 09:51:04 INFO util.ShutdownHookManager: Shutdown hook called
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk8/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-a8167f0b-f3c3-458f-ad51-8a0f4bcda4f3
17/02/08 09:51:04 INFO remote.RemoteActorRefProvider$RemotingTerminator: Shutting down remote daemon.
17/02/08 09:51:04 INFO util.ShutdownHookManager: Deleting directory /mnt/disk1/yarn/nm/usercache/root/appcache/application_1486453422616_0150/spark-26cba445-66d2-4b78-a428-17881c92f0f6
17/02/08 09:51:04 INFO remote.RemoteActorRefProvider$RemotingTerminator: Remote daemon shut down; proceeding with flushing remote transports.
17/02/08 09:51:04 INFO remote.RemoteActorRefProvider$RemotingTerminator: Remoting shut down.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this error occurs when several queries run at the same time with large data scale, in fact it would not occur when running the query separately, but it can frequently occur when running together again.&lt;/p&gt;</description>
                <environment>&lt;p&gt;hadoop2.7.1&lt;br/&gt;
spark1.6.2&lt;br/&gt;
hive2.2&lt;/p&gt;</environment>
        <key id="13041660">HIVE-15859</key>
            <summary>HoS: Write RPC messages in event loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="KaiXu">KaiXu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 10:43:13 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:08 +0000</updated>
                            <resolved>Mon, 27 Feb 2017 05:34:50 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Hive</component>
                    <component>Spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="15863622" author="lirui" created="Mon, 13 Feb 2017 13:00:44 +0000"  >&lt;p&gt;I noticed writing to the channel is protected by channelLock in &lt;tt&gt;Rpc::call&lt;/tt&gt;. However there&apos;s no synchronization for writing in &lt;tt&gt;RpcDispatcher::handleCall&lt;/tt&gt;. Not sure whether that can be a problem.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;Marcelo Vanzin&lt;/a&gt; would you mind share your thoughts on this? Thanks.&lt;/p&gt;</comment>
                            <comment id="15864063" author="vanzin" created="Mon, 13 Feb 2017 17:45:17 +0000"  >&lt;p&gt;&lt;tt&gt;RpcDispatcher::handleCall&lt;/tt&gt; is on the read side, which is single-threaded in netty. So there&apos;s no need for synchronization there. The write side is multi-threaded so it needs to be thread-safe, maybe there&apos;s a problem there.&lt;/p&gt;

&lt;p&gt;I&apos;d take a look at this: &lt;a href=&quot;https://github.com/cloudera/livy/pull/274&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/cloudera/livy/pull/274&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Maybe the same problem exists in Hive code.&lt;/p&gt;</comment>
                            <comment id="15865239" author="lirui" created="Tue, 14 Feb 2017 07:11:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;Marcelo Vanzin&lt;/a&gt;, thanks for providing the Livy PR. That&apos;s exactly the same issue I meant in my last comment. I&apos;m wondering, if the message order gets messed like the PR mentioned:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Send call header&lt;/li&gt;
	&lt;li&gt;Send reply header&lt;/li&gt;
	&lt;li&gt;Send reply payload&lt;/li&gt;
	&lt;li&gt;Send call payload&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It means the receiver will receive two successive message headers. And it should happen before we hit the issue here. Not sure why it doesn&apos;t cause any trouble.&lt;br/&gt;
Anyway I think Hive needs the same fix, and we can test if it fixes this one.&lt;/p&gt;</comment>
                            <comment id="15865314" author="lirui" created="Tue, 14 Feb 2017 07:57:57 +0000"  >&lt;p&gt;Patch v1 based on the Livy PR.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KaiXu&quot; class=&quot;user-hover&quot; rel=&quot;KaiXu&quot;&gt;KaiXu&lt;/a&gt;, could you test if the patch fixes your problem? Thanks.&lt;/p&gt;</comment>
                            <comment id="15865680" author="hiveqa" created="Tue, 14 Feb 2017 12:18:19 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852521/HIVE-15859.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852521/HIVE-15859.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_acid_part_update] (batchId=151)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.spark.client.rpc.TestRpc.testRpcDispatcher (batchId=274)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3536/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3536/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3536/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3536/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3536/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3536/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852521 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15865696" author="kaixu" created="Tue, 14 Feb 2017 12:28:59 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt; for your work,  I found a similar issue and log on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15912&quot; title=&quot;Executor kill task and Failed to get spark memory/core info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15912&quot;&gt;HIVE-15912&lt;/a&gt;, can you help to review? I will have a test after that.&lt;/p&gt;</comment>
                            <comment id="15867428" author="lirui" created="Wed, 15 Feb 2017 08:05:31 +0000"  >&lt;p&gt;Fix test.&lt;/p&gt;</comment>
                            <comment id="15867735" author="hiveqa" created="Wed, 15 Feb 2017 12:31:45 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852760/HIVE-15859.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852760/HIVE-15859.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10219 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=160)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3566/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3566/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3566/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3566/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3566/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3566/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852760 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15876485" author="xuefuz" created="Tue, 21 Feb 2017 18:59:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KaiXu&quot; class=&quot;user-hover&quot; rel=&quot;KaiXu&quot;&gt;KaiXu&lt;/a&gt;, please confirm if the patch here fixes your problem reported here. Thanks.&lt;/p&gt;</comment>
                            <comment id="15877560" author="kaixu" created="Wed, 22 Feb 2017 06:23:44 +0000"  >&lt;p&gt;Thanks all for the efforts, I will try the patch.&lt;/p&gt;</comment>
                            <comment id="15878013" author="lirui" created="Wed, 22 Feb 2017 11:11:29 +0000"  >&lt;p&gt;Another way to fix (and also mentioned in the Livy PR) is to combine the message header with the payload. I think can have some class like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;RpcMessage {
  MessageHeader header;
  &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; payload;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so that we can send/receive the header and payload as a whole. It may be a more thorough way to avoid potential race conditions.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;Marcelo Vanzin&lt;/a&gt; what do you think about it?&lt;/p&gt;</comment>
                            <comment id="15879467" author="xuefuz" created="Wed, 22 Feb 2017 23:31:24 +0000"  >&lt;p&gt;It seems to me that option #2 can be on top of option #1 because we may want to let all messages go thru the event loop. If that&apos;s case, we can further implement option #2 as a followup. Thoughts?&lt;/p&gt;

&lt;p&gt;In the meantime, I&apos;m very eager to know if this has addressed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KaiXu&quot; class=&quot;user-hover&quot; rel=&quot;KaiXu&quot;&gt;KaiXu&lt;/a&gt;&apos;s problem.&lt;/p&gt;</comment>
                            <comment id="15879995" author="lirui" created="Thu, 23 Feb 2017 06:47:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, netty&apos;s channel is thread safe. We can write to it concurrently in multiple threads. The problem is we divide each message into header and payload and write them to the channel separately. And thus the order can be messed up on receiver side. If we combine them into one message, I think we don&apos;t need to force all the writes thru event loop. I suppose we can try this way if the current approach doesn&apos;t solve the issue.&lt;/p&gt;</comment>
                            <comment id="15880098" author="lirui" created="Thu, 23 Feb 2017 08:23:05 +0000"  >&lt;p&gt;I think I have managed to reproduce the issue by introducing some sleep between the message header and payload, and the issue happens consistently:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (channelLock) {
        channel.write(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MessageHeader(id, Rpc.MessageType.CALL)).addListener(listener);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);
        channel.writeAndFlush(msg).addListener(listener);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also answering my own question in the previous &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15859?focusedCommentId=15865239&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15865239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment&lt;/a&gt;. The two successive message headers do cause trouble. However, we didn&apos;t log the full stack trace of the error &lt;a href=&quot;https://github.com/apache/hive/blob/master/spark-client/src/main/java/org/apache/hive/spark/client/rpc/RpcDispatcher.java#L158&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;. I modified that and found the actual error is a &lt;tt&gt;java.lang.NoSuchMethodException&lt;/tt&gt;. This makes sense because we don&apos;t have a handle method for message header (we&apos;re expecting a payload).&lt;/p&gt;

&lt;p&gt;To conclude: the receiver receives two successive headers, hit the NoSuchMethodException, and then receives two successive payload and log the warning &lt;tt&gt;Expected RPC header, got XXX instead&lt;/tt&gt;. This is inline with the hive log in the description.&lt;/p&gt;

&lt;p&gt;I verified the patch here can solve the issue (with the extra sleep).&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KaiXu&quot; class=&quot;user-hover&quot; rel=&quot;KaiXu&quot;&gt;KaiXu&lt;/a&gt; it&apos;d be great if you can help verify it too. Thanks.&lt;/p&gt;</comment>
                            <comment id="15885007" author="kaixu" created="Mon, 27 Feb 2017 01:35:40 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, I have tried to run 3 times with the patch, currently the issue not occurred any more, though it&apos;s random previously, but can frequently reproduce. So I think the patch solved the issue, Thanks for all your efforts!&lt;/p&gt;</comment>
                            <comment id="15885048" author="lirui" created="Mon, 27 Feb 2017 02:23:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KaiXu&quot; class=&quot;user-hover&quot; rel=&quot;KaiXu&quot;&gt;KaiXu&lt;/a&gt; for the clarifications. Update patch v3 to make sure we log the exception caught in the pipeline.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;Marcelo Vanzin&lt;/a&gt; could you please take a look? Thanks!&lt;/p&gt;</comment>
                            <comment id="15885092" author="hiveqa" created="Mon, 27 Feb 2017 03:48:04 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854804/HIVE-15859.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854804/HIVE-15859.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 10266 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3801/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3801/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3801/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3801/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3801/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3801/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854804 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15885126" author="xuefuz" created="Mon, 27 Feb 2017 04:51:22 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15885164" author="lirui" created="Mon, 27 Feb 2017 05:34:50 +0000"  >&lt;p&gt;Committed to master. Thanks Xuefu for the review.&lt;/p&gt;</comment>
                            <comment id="15980721" author="yiyao" created="Mon, 24 Apr 2017 04:39:06 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;. I encountered the same issue in hive 1. It would be great that community could back-port the patch to hive 1.&lt;/p&gt;</comment>
                            <comment id="15992299" author="lirui" created="Tue, 2 May 2017 03:56:02 +0000"  >&lt;p&gt;Pushed to branch-1. Sorry about the delay.&lt;/p&gt;</comment>
                            <comment id="15992302" author="yiyao" created="Tue, 2 May 2017 03:59:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, thanks for your support! &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852521" name="HIVE-15859.1.patch" size="2568" author="lirui" created="Tue, 14 Feb 2017 07:57:57 +0000"/>
                            <attachment id="12852760" name="HIVE-15859.2.patch" size="3324" author="lirui" created="Wed, 15 Feb 2017 08:05:30 +0000"/>
                            <attachment id="12854804" name="HIVE-15859.3.patch" size="4391" author="lirui" created="Mon, 27 Feb 2017 02:23:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2017 13:00:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39u8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15860] RemoteSparkJobMonitor may hang when RemoteDriver exits abnormally</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15860</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It happens when RemoteDriver crashes between &lt;tt&gt;JobStarted&lt;/tt&gt; and &lt;tt&gt;JobSubmitted&lt;/tt&gt;, e.g. killed by &lt;tt&gt;kill -9&lt;/tt&gt;. RemoteSparkJobMonitor will consider the job has started, however it can&apos;t get the job info because it hasn&apos;t received the JobId. Then the monitor will loop forever.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041667">HIVE-15860</key>
            <summary>RemoteSparkJobMonitor may hang when RemoteDriver exits abnormally</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="lirui">Rui Li</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 11:29:07 +0000</created>
                <updated>Tue, 10 Oct 2017 09:45:39 +0000</updated>
                            <resolved>Mon, 13 Feb 2017 05:34:21 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15859410" author="lirui" created="Thu, 9 Feb 2017 12:01:15 +0000"  >&lt;p&gt;We cannot simply extend the monitor timeout to cover &lt;tt&gt;JobSubmitted&lt;/tt&gt;, otherwise we&apos;ll hit &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9370&quot; title=&quot;SparkJobMonitor timeout as sortByKey would launch extra Spark job before original job get submitted [Spark Branch]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9370&quot;&gt;&lt;del&gt;HIVE-9370&lt;/del&gt;&lt;/a&gt; again.&lt;/p&gt;</comment>
                            <comment id="15860936" author="lirui" created="Fri, 10 Feb 2017 08:50:18 +0000"  >&lt;p&gt;Actually Rpc&apos;s listener can detect the remote end becomes inactive and mark SparkClient as dead accordingly. However, since we haven&apos;t received the JobId on Hive side, RemoteSparkJobStatus won&apos;t contact the remote driver for job info and simply return null for the monitor. And thus it never finds out the Rpc channel has already closed.&lt;br/&gt;
The patch adds a check every time the monitor runs, to make sure the remote context is still alive. The fix is for remote mode only, because I don&apos;t think the issue exists for local mode.&lt;/p&gt;</comment>
                            <comment id="15860967" author="xuefuz" created="Fri, 10 Feb 2017 09:25:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, thanks for working on this. Just to clarify, does the monitor loop forever in the case? It seems that it does even though the broken connection is already detected at RPC layer. As a result, the user session will hang forever w/o making any progress.&lt;/p&gt;</comment>
                            <comment id="15861020" author="lirui" created="Fri, 10 Feb 2017 09:57:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; - yeah the monitor loops forever in that case. For the monitor, the job has started because we have received JobStarted event. So it goes to this switch branch every time it wakes up:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; STARTED:
          JobExecutionStatus sparkJobState = sparkJobStatus.getState();
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sparkJobState == JobExecutionStatus.RUNNING) {
            Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, SparkStageProgress&amp;gt; progressMap = sparkJobStatus.getSparkStageProgress();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!running) {
              perfLogger.PerfLogEnd(CLASS_NAME, PerfLogger.SPARK_SUBMIT_TO_RUNNING);
              printAppInfo();
              &lt;span class=&quot;code-comment&quot;&gt;// print job stages.
&lt;/span&gt;              console.printInfo(&lt;span class=&quot;code-quote&quot;&gt;&quot;\nQuery Hive on Spark job[&quot;&lt;/span&gt; + sparkJobStatus.getJobId() +
                  &lt;span class=&quot;code-quote&quot;&gt;&quot;] stages: &quot;&lt;/span&gt; + Arrays.toString(sparkJobStatus.getStageIds()));

              console.printInfo(&lt;span class=&quot;code-quote&quot;&gt;&quot;\nStatus: Running (Hive on Spark job[&quot;&lt;/span&gt;
                + sparkJobStatus.getJobId() + &lt;span class=&quot;code-quote&quot;&gt;&quot;])&quot;&lt;/span&gt;);
              running = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

              &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; format = &lt;span class=&quot;code-quote&quot;&gt;&quot;Job Progress Format\nCurrentTime StageId_StageAttemptId: &quot;&lt;/span&gt;
                  + &lt;span class=&quot;code-quote&quot;&gt;&quot;SucceededTasksCount(+RunningTasksCount-FailedTasksCount)/TotalTasksCount&quot;&lt;/span&gt;;
              &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!inPlaceUpdate) {
                console.printInfo(format);
              } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                console.logInfo(format);
              }
            }

            printStatus(progressMap, lastProgressMap);
            lastProgressMap = progressMap;
          }
          &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, &lt;tt&gt;sparkJobStatus.getState()&lt;/tt&gt; always returns null because we haven&apos;t received the JobSubmitted event which carries the JobId. At this point, we need a way to tell whether the connect has broken, or there&apos;s just a big gap between JobStarted and JobSubmitted, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9370&quot; title=&quot;SparkJobMonitor timeout as sortByKey would launch extra Spark job before original job get submitted [Spark Branch]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9370&quot;&gt;&lt;del&gt;HIVE-9370&lt;/del&gt;&lt;/a&gt;. So I added the check to see if the client is still alive.&lt;/p&gt;</comment>
                            <comment id="15861036" author="lirui" created="Fri, 10 Feb 2017 10:06:46 +0000"  >&lt;p&gt;A more specific way to fix it is just add the check when job has started and &lt;tt&gt;sparkJobStatus.getState()&lt;/tt&gt; returns null. The SENT and QUEUED branches are covered by the monitor timeout. The SUCCEEDED and FAILED branch will break the loop themselves. So we only need to worry about the STARTED branch.&lt;/p&gt;</comment>
                            <comment id="15861037" author="hiveqa" created="Fri, 10 Feb 2017 10:07:06 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852020/HIVE-15860.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852020/HIVE-15860.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10244 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[index_auto_partitioned] (batchId=10)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3485/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3485/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3485/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3485/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3485/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3485/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852020 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15861140" author="lirui" created="Fri, 10 Feb 2017 11:22:41 +0000"  >&lt;p&gt;Patch v2 adds the check only when job is in STARTED state and we can&apos;t get the job info. I think it&apos;s better because it avoids checking the remote context every time the monitor runs.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt; what do you think?&lt;/p&gt;</comment>
                            <comment id="15861205" author="xuefuz" created="Fri, 10 Feb 2017 12:33:33 +0000"  >&lt;p&gt;+1. Patch #2 looks good to me. Thanks for fixing this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15861218" author="hiveqa" created="Fri, 10 Feb 2017 12:54:15 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852041/HIVE-15860.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852041/HIVE-15860.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10227 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=162)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3488/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3488/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3488/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3488/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3488/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3488/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852041 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15863159" author="hiveqa" created="Mon, 13 Feb 2017 03:19:29 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852277/HIVE-15860.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852277/HIVE-15860.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10236 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery (batchId=217)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3510/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3510/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3510/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3510/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3510/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3510/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852277 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15863228" author="lirui" created="Mon, 13 Feb 2017 05:29:08 +0000"  >&lt;p&gt;Latest failure not related.&lt;/p&gt;</comment>
                            <comment id="15863234" author="lirui" created="Mon, 13 Feb 2017 05:34:21 +0000"  >&lt;p&gt;Committed to master. Thanks Xuefu for the review!&lt;/p&gt;</comment>
                            <comment id="16195943" author="stakiar" created="Sat, 7 Oct 2017 23:47:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, is there a real perf issue with running &lt;tt&gt;Preconditions.checkState(sparkJobStatus.isRemoteActive()&lt;/tt&gt; during each iteration of the &lt;tt&gt;while&lt;/tt&gt; loop? There shouldn&apos;t be much overhead, the check just checks the value of a &lt;tt&gt;boolean&lt;/tt&gt; and if a connection is open or closed (which is also done for every RPC call made too).&lt;/p&gt;

&lt;p&gt;I think the benefit is that it is safer, in case there are other edge cases we aren&apos;t considering, and it allows us to fail faster in the case where the &lt;tt&gt;RemoteSparkJobMonitor&lt;/tt&gt; is in the &lt;tt&gt;QUEUED&lt;/tt&gt; / &lt;tt&gt;SENT&lt;/tt&gt; state. If its stuck in that state, it won&apos;t fail until it hits the monitor timeout (by default 1 minute), even though we already know the connection has died. The error message that is thrown is also a little imprecise, it says there could be queue contention, even though we know the real reason is that the connection was lost.&lt;/p&gt;

&lt;p&gt;What do you think? If you agree, I can make the change in a follow up JIRA.&lt;/p&gt;</comment>
                            <comment id="16198434" author="lirui" created="Tue, 10 Oct 2017 09:45:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt;, I agree it&apos;s good to make QUEUED/SENT fail faster. But I still want to avoid the check in &quot;normal&quot; cases because as you said, each RPC call is doing the check already. Anyway, please feel free to open the JIRA.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852020" name="HIVE-15860.1.patch" size="2301" author="lirui" created="Fri, 10 Feb 2017 08:50:18 +0000"/>
                            <attachment id="12852277" name="HIVE-15860.2.patch" size="2491" author="lirui" created="Mon, 13 Feb 2017 02:11:15 +0000"/>
                            <attachment id="12852041" name="HIVE-15860.2.patch" size="2491" author="lirui" created="Fri, 10 Feb 2017 11:22:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 09:25:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39ua7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15861] from table insert overwrtie table 1 insert into table 2 has bug</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15861</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;when i use from table insert overwrite table tb1 insert into table tb2 statement:&lt;/p&gt;

&lt;p&gt;data hoped to insert overwrite table tb1 will be appended to the table,not replace it&lt;/p&gt;

&lt;p&gt;insert into table tb2 worked well&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041668">HIVE-15861</key>
            <summary>from table insert overwrtie table 1 insert into table 2 has bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fire7856">kai zhang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 11:35:34 +0000</created>
                <updated>Thu, 9 Feb 2017 11:35:34 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39uaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15862] beeline always have a warning &quot;Hive does not support autoCommit=false&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15862</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When we use beeline, there is always a warning::&quot;Request to set autoCommit to false; Hive does not support autoCommit=false&quot;,&lt;br/&gt;
For example, we use beeline excute a sql:&lt;br/&gt;
beeline -u &quot;jdbc:hive2://localhost:10000/default&quot; -n mr -e  &quot;show tables&quot; --hivevar taskNO=10111, we got this warning:&lt;br/&gt;
.................................................................................&lt;br/&gt;
Connecting to jdbc:hive2://localhost:10000/default&lt;br/&gt;
Connected to: Apache Hive (version 2.1.0-zdh2.7.3)&lt;br/&gt;
Driver: Hive JDBC (version 2.1.0-zdh2.7.3)&lt;br/&gt;
17/02/10 15:10:10 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: WARN jdbc.HiveConnection: Request to set autoCommit to false; Hive does not support autoCommit=false.&lt;/p&gt;

&lt;p&gt;When I looked at the hive source code, I found the BeeLineOpts set the  autoCommit default value to false, It always triggers an alarm when beeline connect to the hiveserver2 in DatabaseConnection.connect:&lt;br/&gt;
 getConnection().setAutoCommit(beeLine.getOpts().getAutoCommit());&lt;/p&gt;</description>
                <environment>&lt;p&gt;hive2.1.0&lt;/p&gt;</environment>
        <key id="13041692">HIVE-15862</key>
            <summary>beeline always have a warning &quot;Hive does not support autoCommit=false&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yangfang">yangfang</assignee>
                                    <reporter username="yangfang">yangfang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 13:00:08 +0000</created>
                <updated>Tue, 14 Nov 2017 21:55:07 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 21:55:07 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Beeline</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15859468" author="yangfang" created="Thu, 9 Feb 2017 13:08:20 +0000"  >&lt;p&gt;This change will eliminate this alarm.&lt;/p&gt;</comment>
                            <comment id="15860060" author="hiveqa" created="Thu, 9 Feb 2017 19:38:44 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851856/HIVE-15862.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851856/HIVE-15862.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3469/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3469/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3469/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3469/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3469/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3469/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-09 19:38:42.637
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-3469/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-09 19:38:42.640
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 36ff484 HIVE-15851 CompactorMR.launchCompactionJob() should use JobClient.submitJob() not runJob (Eugene Koifman, reviewed by Wei Zheng)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 36ff484 HIVE-15851 CompactorMR.launchCompactionJob() should use JobClient.submitJob() not runJob (Eugene Koifman, reviewed by Wei Zheng)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-09 19:38:43.878
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: patch failed: beeline/src/java/org/apache/hive/beeline/BeeLineOpts.java:71
error: beeline/src/java/org/apache/hive/beeline/BeeLineOpts.java: patch does not apply
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851856 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13015252">HIVE-15060</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12851856" name="HIVE-15862.1.patch" size="605" author="yangfang" created="Thu, 9 Feb 2017 13:08:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 19:38:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39ufr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>set the autoCommit default value to true in BeeLineOpts</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12334255</customfieldvalue>
    <customfieldvalue>12335838</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15863] Calendar inside DATE, TIME and TIMESTAMP literals for Calcite should have UTC timezone</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15863</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-1623&quot; title=&quot;Make sure the Calendar inside DATE, TIME and TIMESTAMP literals has timezone UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-1623&quot;&gt;&lt;del&gt;CALCITE-1623&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;At query preparation time, Calcite uses a Calendar to hold the value of DATE, TIME, TIMESTAMP literals. It assumes that Calendar has a UTC (GMT) time zone, and bad things might happen if it does not. Currently, we pass the Calendar object with user timezone from Hive. We need to pass it with UTC timezone and make the inverse conversion when we go back from Calcite to Hive.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041703">HIVE-15863</key>
            <summary>Calendar inside DATE, TIME and TIMESTAMP literals for Calcite should have UTC timezone</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="jcamachorodriguez">Jesus Camacho Rodriguez</assignee>
                                    <reporter username="jcamachorodriguez">Jesus Camacho Rodriguez</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 13:31:58 +0000</created>
                <updated>Thu, 27 Jul 2017 18:25:46 +0000</updated>
                            <resolved>Thu, 27 Jul 2017 18:25:46 +0000</resolved>
                                    <version>2.2.0</version>
                                                    <component>CBO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39ui7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12340268</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15864] Fix typo introduced in HIVE-14754</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15864</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hs2_suceeded_queries needs another &quot;c&quot;: hs2_succeeded_queries.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041753">HIVE-15864</key>
            <summary>Fix typo introduced in HIVE-14754</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13004860">HIVE-14752</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zsombor.klara">Barna Zsombor Klara</assignee>
                                    <reporter username="zsombor.klara">Barna Zsombor Klara</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 16:05:08 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:15 +0000</updated>
                            <resolved>Fri, 3 Mar 2017 14:30:35 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Hive</component>
                    <component>HiveServer2</component>
                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15860242" author="hiveqa" created="Thu, 9 Feb 2017 21:35:10 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851909/HIVE-15864.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851909/HIVE-15864.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10227 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=112)
	[enforce_order.q,smb_mapjoin_21.q,load_dyn_part15.q,udf_min.q,groupby_resolution.q,mapjoin_memcheck.q,subquery_exists.q,groupby5.q,join27.q,alter_merge_stats_orc.q,union_remove_2.q,vector_orderby_5.q,groupby6_map_skew.q,join12.q,union9.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3472/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3472/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3472/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3472/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3472/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3472/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851909 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860909" author="zsombor.klara" created="Fri, 10 Feb 2017 08:26:22 +0000"  >&lt;p&gt;Failures are well known flaky/failing tests:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15744&quot; title=&quot;Flaky test: TestPerfCliDriver.query23, query14&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15744&quot;&gt;&lt;del&gt;HIVE-15744&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15696&quot; title=&quot;TestEncryptedHDFSCliDriver encryption_join_with_different_encryption_keys.q is failing on master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15696&quot;&gt;&lt;del&gt;HIVE-15696&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Should not be related.&lt;/p&gt;</comment>
                            <comment id="15892583" author="ychena" created="Thu, 2 Mar 2017 16:46:40 +0000"  >&lt;p&gt;The patch LGTM +1&lt;/p&gt;</comment>
                            <comment id="15894467" author="ychena" created="Fri, 3 Mar 2017 14:30:35 +0000"  >&lt;p&gt;Push the fix into master.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zsombor.klara&quot; class=&quot;user-hover&quot; rel=&quot;zsombor.klara&quot;&gt;Barna Zsombor Klara&lt;/a&gt; for your contribution. &lt;/p&gt;</comment>
                            <comment id="15896136" author="lefty@hortonworks.com" created="Sun, 5 Mar 2017 09:38:15 +0000"  >&lt;p&gt;The wiki has been updated for this fix:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+Metrics&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Hive Metrics &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851909" name="HIVE-15864.patch" size="3756" author="zsombor.klara" created="Thu, 9 Feb 2017 17:57:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 21:35:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39utb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15865] Improvements to hive --service llapstatus </title>
                <link>https://issues.apache.org/jira/browse/HIVE-15865</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Integrate with additional slider changes&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Sort container list by completed time&lt;/li&gt;
	&lt;li&gt;Handle additional reasons like OS launch failed&lt;/li&gt;
	&lt;li&gt;Information about pending requests, last allocation time&lt;/li&gt;
	&lt;li&gt;Information from failed containers.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Maybe add the YARN URL for the app (HA is where this is problematic)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041819">HIVE-15865</key>
            <summary>Improvements to hive --service llapstatus </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 19:35:01 +0000</created>
                <updated>Sat, 25 Mar 2017 20:30:09 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15941944" author="pxiong" created="Sat, 25 Mar 2017 20:30:09 +0000"  >&lt;p&gt;I am deferring this to Hive 3.0 as we are going to cut the first RC and it is not marked as blocker. Please feel free to commit to the branch if this can be resolved before the release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Mar 2017 20:30:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39v7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12340268</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>


<item>
            <title>[HIVE-15866] LazySimpleDeserializeRead doesn&apos;t recognized lower case &apos;true&apos; properly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15866</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The if stmt looks at the wrong index for the lower case variant...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041843">HIVE-15866</key>
            <summary>LazySimpleDeserializeRead doesn&apos;t recognized lower case &apos;true&apos; properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mmccline">Matt McCline</assignee>
                                    <reporter username="mmccline">Matt McCline</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 20:45:55 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:27 +0000</updated>
                            <resolved>Fri, 10 Feb 2017 18:21:10 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15860211" author="hagleitn" created="Thu, 9 Feb 2017 21:18:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15860497" author="hiveqa" created="Fri, 10 Feb 2017 01:18:59 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851941/HIVE--15866.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851941/HIVE--15866.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10244 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_part_all_primitive] (batchId=150)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3476/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3476/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3476/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3476/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3476/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3476/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851941 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15861620" author="mmccline" created="Fri, 10 Feb 2017 18:12:19 +0000"  >&lt;p&gt;Update golden file.&lt;/p&gt;</comment>
                            <comment id="15861632" author="mmccline" created="Fri, 10 Feb 2017 18:20:47 +0000"  >&lt;p&gt;Committed to master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851941" name="HIVE--15866.01.patch" size="887" author="mmccline" created="Thu, 9 Feb 2017 20:55:45 +0000"/>
                            <attachment id="12852097" name="HIVE--15866.02.patch" size="25743" author="mmccline" created="Fri, 10 Feb 2017 18:12:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2017 21:18:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15867] Add blobstore tests for import/export</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15867</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This patch covers ten separate tests testing import and export operations running against blobstore filesystems:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Import addpartition
	&lt;ul&gt;
		&lt;li&gt;blobstore -&amp;gt; file&lt;/li&gt;
		&lt;li&gt;file -&amp;gt; blobstore&lt;/li&gt;
		&lt;li&gt;blobstore -&amp;gt; blobstore&lt;/li&gt;
		&lt;li&gt;blobstore -&amp;gt; hdfs&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;import/export
	&lt;ul&gt;
		&lt;li&gt;blobstore -&amp;gt; file&lt;/li&gt;
		&lt;li&gt;file -&amp;gt; blobstore&lt;/li&gt;
		&lt;li&gt;blobstore -&amp;gt; blobstore (partitioned and non-partitioned)&lt;/li&gt;
		&lt;li&gt;blobstore -&amp;gt; HDFS (partitioned and non-partitioned)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13041866">HIVE-15867</key>
            <summary>Add blobstore tests for import/export</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juanrh">Juan Rodr&#237;guez Hortal&#225;</assignee>
                                    <reporter username="poeppt">Thomas Poepping</reporter>
                        <labels>
                            <label>TODOC2.2</label>
                            <label>patch</label>
                            <label>test</label>
                    </labels>
                <created>Thu, 9 Feb 2017 22:31:48 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:07 +0000</updated>
                            <resolved>Wed, 22 Mar 2017 22:32:51 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15876650" author="stakiar" created="Tue, 21 Feb 2017 20:29:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; is this still on your radar? If not I&apos;m happy to help out.&lt;/p&gt;</comment>
                            <comment id="15876786" author="poeppt" created="Tue, 21 Feb 2017 21:48:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt;, yes, still on the radar. My colleague is working on a patch now, once it passes our internal review he&apos;ll attach it here. Sorry for the wait&lt;/p&gt;</comment>
                            <comment id="15876820" author="stakiar" created="Tue, 21 Feb 2017 21:59:38 +0000"  >&lt;p&gt;No worries, just checking in, thanks for the update!&lt;/p&gt;</comment>
                            <comment id="15903536" author="juanrh" created="Thu, 9 Mar 2017 18:16:23 +0000"  >&lt;p&gt;I have opened &lt;a href=&quot;https://reviews.apache.org/r/57471/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/57471/&lt;/a&gt; for the review of the patch&lt;/p&gt;</comment>
                            <comment id="15906445" author="stakiar" created="Sun, 12 Mar 2017 07:28:03 +0000"  >&lt;p&gt;+1 (non-binding, still need a committer to take a look)&lt;/p&gt;</comment>
                            <comment id="15924324" author="spena" created="Tue, 14 Mar 2017 14:34:29 +0000"  >&lt;p&gt;The tests look very good.&lt;br/&gt;
+1&lt;/p&gt;

&lt;p&gt;I just left a minor comment on the RB. Once that&apos;s addressed, I will commit the patch.&lt;/p&gt;</comment>
                            <comment id="15924684" author="juanrh" created="Tue, 14 Mar 2017 17:51:44 +0000"  >&lt;p&gt;Updated patch file&lt;/p&gt;</comment>
                            <comment id="15928248" author="spena" created="Thu, 16 Mar 2017 15:12:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=juanrh&quot; class=&quot;user-hover&quot; rel=&quot;juanrh&quot;&gt;Juan Rodr&#237;guez Hortal&#225;&lt;/a&gt; Seems the tests weren&apos;t executed. Could you re-submit the patch to trigger HiveQA?&lt;/p&gt;</comment>
                            <comment id="15928358" author="juanrh" created="Thu, 16 Mar 2017 16:21:11 +0000"  >&lt;p&gt;re-submitting the patch to trigger HiveQA&lt;/p&gt;</comment>
                            <comment id="15928379" author="juanrh" created="Thu, 16 Mar 2017 16:30:28 +0000"  >&lt;p&gt;re-attaching patch to trigger Hive QA&lt;/p&gt;</comment>
                            <comment id="15936697" author="juanrh" created="Wed, 22 Mar 2017 17:08:14 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;, do you need any other change before pushing the code? Thanks!&lt;/p&gt;</comment>
                            <comment id="15936755" author="spena" created="Wed, 22 Mar 2017 17:34:22 +0000"  >&lt;p&gt;Ah, sorry. I was waiting for HieQA to notify me about the results. I think there were some errors on Jenkins last week. It should be fixed now, could you re-submit the patch again?&lt;/p&gt;</comment>
                            <comment id="15936777" author="juanrh" created="Wed, 22 Mar 2017 17:46:22 +0000"  >&lt;p&gt;yes, no problem&lt;/p&gt;</comment>
                            <comment id="15936779" author="juanrh" created="Wed, 22 Mar 2017 17:47:05 +0000"  >&lt;p&gt;resubmitting&lt;/p&gt;</comment>
                            <comment id="15936782" author="spena" created="Wed, 22 Mar 2017 17:48:12 +0000"  >&lt;p&gt;Please monitor the Jenkins job that will run these tests. If it does not post the test results, then add the results and the job linkmanually as a comment.&lt;/p&gt;</comment>
                            <comment id="15936783" author="juanrh" created="Wed, 22 Mar 2017 17:48:43 +0000"  >&lt;p&gt;Ok, thanks for the tip&lt;/p&gt;</comment>
                            <comment id="15936785" author="juanrh" created="Wed, 22 Mar 2017 17:50:46 +0000"  >&lt;p&gt;patch file doesn&apos;t follow convention described in &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-CreatingaPatch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-CreatingaPatch&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15937051" author="hiveqa" created="Wed, 22 Mar 2017 20:16:45 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12859974/HIVE-15867.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12859974/HIVE-15867.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 10 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 10507 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=141)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4294/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4294/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4294/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4294/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4294/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4294/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12859974 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15937291" author="spena" created="Wed, 22 Mar 2017 22:32:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=juanrh&quot; class=&quot;user-hover&quot; rel=&quot;juanrh&quot;&gt;Juan Rodr&#237;guez Hortal&#225;&lt;/a&gt;. I committed this to master.&lt;/p&gt;</comment>
                            <comment id="15937975" author="lefty@hortonworks.com" created="Thu, 23 Mar 2017 09:19:54 +0000"  >&lt;p&gt;Doc note:  This appends &quot;,s3,s3a&quot; to the default value of &lt;b&gt;hive.exim.uri.scheme.whitelist&lt;/b&gt; so the wiki needs to be updated again.  (It already has a 2.2.0 update for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15151&quot; title=&quot;Bootstrap support for replv2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15151&quot;&gt;&lt;del&gt;HIVE-15151&lt;/del&gt;&lt;/a&gt;.)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.exim.uri.scheme.whitelist&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; hive.exim.uri.scheme.whitelist &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;formatting example using bullet list: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.mapred.mode&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hive.mapred.mode &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added a TODOC2.2 label.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13041563">HIVE-15856</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12859974" name="HIVE-15867.patch" size="100280" author="juanrh" created="Wed, 22 Mar 2017 17:57:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Feb 2017 20:29:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335838</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15868] Preauthenticated subject doesn&apos;t work for HiveServer2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15868</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The feature was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6486&quot; title=&quot;Support secure Subject.doAs() in HiveServer2 JDBC client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6486&quot;&gt;&lt;del&gt;HIVE-6486&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8705&quot; title=&quot;Support using pre-authenticated subject in kerberized HiveServer2 HTTP mode &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8705&quot;&gt;&lt;del&gt;HIVE-8705&lt;/del&gt;&lt;/a&gt; but I tested recently and doesn&apos;t seem to work as expected. I&apos;ll attach the test case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041878">HIVE-15868</key>
            <summary>Preauthenticated subject doesn&apos;t work for HiveServer2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="vgumashta">Vaibhav Gumashta</assignee>
                                    <reporter username="vgumashta">Vaibhav Gumashta</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 23:09:07 +0000</created>
                <updated>Thu, 13 Sep 2018 21:40:08 +0000</updated>
                            <resolved>Thu, 13 Sep 2018 21:40:08 +0000</resolved>
                                                                    <component>HiveServer2</component>
                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16614094" author="vgumashta" created="Thu, 13 Sep 2018 21:40:08 +0000"  >&lt;p&gt;Tested recently, it works as designed. There is a bug for http transport though, for which I&apos;ll open a new jira&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15869] LLAP: move metadata cache off-heap</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15869</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13041901">HIVE-15869</key>
            <summary>LLAP: move metadata cache off-heap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 01:09:39 +0000</created>
                <updated>Fri, 10 Feb 2017 01:36:23 +0000</updated>
                            <resolved>Fri, 10 Feb 2017 01:36:23 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15860517" author="rajesh.balamohan" created="Fri, 10 Feb 2017 01:33:26 +0000"  >&lt;p&gt;Would this be on similar lines like &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15665&quot; title=&quot;LLAP: OrcFileMetadata objects in cache can impact heap usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15665&quot;&gt;&lt;del&gt;HIVE-15665&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15860521" author="sershe" created="Fri, 10 Feb 2017 01:36:23 +0000"  >&lt;p&gt;Yeah, duplicate of that. I cannot find the original jira&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 01:33:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15870] MM tables - parquet_join test fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15870</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;All the selects produce results, except for the last query.&lt;br/&gt;
Looking at MM logs, it looks like the inputs are read correctly. Must be something parquet-specific w.r.t. multiple files in a table.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;set hive.optimize.index.filter = true;
set hive.auto.convert.join=false;

CREATE TABLE tbl1(id INT) STORED AS PARQUET;
INSERT INTO tbl1 VALUES(1), (2);

CREATE TABLE tbl2(id INT, value STRING) STORED AS PARQUET;
INSERT INTO tbl2 VALUES(1, &apos;value1&apos;);
INSERT INTO tbl2 VALUES(1, &apos;value2&apos;);

select tbl1.id, t1.value
FROM tbl1
JOIN (SELECT * FROM tbl2 WHERE value=&apos;value2&apos;) t1 ON tbl1.id=t1.id;
select tbl1.id, t1.value
FROM tbl1
JOIN (SELECT * FROM tbl2 WHERE value=&apos;value1&apos;) t1 ON tbl1.id=t1.id;

select tbl1.id, t1.value, t2.value
FROM tbl1
JOIN tbl2 t1 ON tbl1.id=t1.id
JOIN tbl2 t2 ON tbl1.id=t2.id

select tbl1.id, t1.value, t2.value
FROM tbl1
JOIN (SELECT * FROM tbl2 WHERE value=&apos;value1&apos;) t1 ON tbl1.id=t1.id
JOIN (SELECT * FROM tbl2 WHERE value=&apos;value2&apos;) t2 ON tbl1.id=t2.id;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13041903">HIVE-15870</key>
            <summary>MM tables - parquet_join test fails</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12997110">HIVE-14535</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 01:16:24 +0000</created>
                <updated>Thu, 2 Mar 2017 02:58:15 +0000</updated>
                            <resolved>Thu, 2 Mar 2017 02:58:15 +0000</resolved>
                                                    <fixVersion>hive-14535</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15891397" author="sershe" created="Thu, 2 Mar 2017 01:13:49 +0000"  >&lt;p&gt;Related to predicate pushdown. The logs for mm and non-mm are pretty much the same if merging map job files is disabled and IF is set to HiveInputFormat.&lt;br/&gt;
There is only one scan of tbl2, and both times Hive reports reading 2 files of the same sizes pairwise, except that in mm case they are in separate directories (corresponding to separate inserts).&lt;br/&gt;
However, in mm case, one of the files is entirely filtered out. Since the joins rely on both rows, that means no result for mm query.&lt;br/&gt;
Looks like the PPD generated for the mm query is incorrect - only accounts for one side of the join. Need to see why... should be no different&lt;/p&gt;</comment>
                            <comment id="15891533" author="sershe" created="Thu, 2 Mar 2017 02:58:15 +0000"  >&lt;p&gt;Fixed... turned out to be incorrect assumptions in path-to-alias mapping. I suspect that recursive paths on normal Hive would break too.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15871] Cannot insert into target table because column number/types are different with hive.merge.cardinality.check=false </title>
                <link>https://issues.apache.org/jira/browse/HIVE-15871</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Merge statement with WHEN MATCHED and hive.merge.cardinality.check=false&lt;br/&gt;
causes errors like&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;FAILED: SemanticException [Error 10044]: Line 11:12 Cannot insert into target table because column number/types are different &apos;part_0&apos;: Table insclause-0 has 3 columns, but query has 4 columns.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13041914">HIVE-15871</key>
            <summary>Cannot insert into target table because column number/types are different with hive.merge.cardinality.check=false </summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12835256">HIVE-10924</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 02:02:28 +0000</created>
                <updated>Tue, 25 Jul 2017 20:04:44 +0000</updated>
                            <resolved>Fri, 10 Feb 2017 17:31:49 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15860604" author="ekoifman" created="Fri, 10 Feb 2017 03:09:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzheng&quot; class=&quot;user-hover&quot; rel=&quot;wzheng&quot;&gt;Wei Zheng&lt;/a&gt;, could you review please&lt;/p&gt;</comment>
                            <comment id="15860685" author="hiveqa" created="Fri, 10 Feb 2017 04:27:12 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851973/HIVE-15871.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851973/HIVE-15871.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 41 failed/errored test(s), 10230 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=122)
	[auto_sortmerge_join_13.q,join4.q,join35.q,udf_percentile.q,join_reorder3.q,subquery_in.q,auto_join19.q,stats14.q,vectorization_15.q,union7.q,vectorization_nested_udf.q,vector_groupby_3.q,vectorized_ptf.q,auto_join2.q,groupby1_map_skew.q]
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_subquery] (batchId=36)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_llap_counters] (batchId=137)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeDeleteUpdate (batchId=269)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeOnTezEdges (batchId=269)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeType2SCD01 (batchId=269)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeType2SCD02 (batchId=269)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeUpdateDelete (batchId=269)
org.apache.hadoop.hive.ql.TestTxnCommands.testQuotedIdentifier (batchId=269)
org.apache.hadoop.hive.ql.TestTxnCommands.testQuotedIdentifier2 (batchId=269)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge (batchId=257)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge2 (batchId=257)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge (batchId=257)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge2 (batchId=257)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge3 (batchId=257)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMergeWithPredicate (batchId=257)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDynamicPartitionsMerge (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDynamicPartitionsMerge2 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge2 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge3 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMergeWithPredicate (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge2 (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge2 (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge3 (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMergeWithPredicate (batchId=266)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMerge3Way01 (batchId=270)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMerge3Way02 (batchId=270)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergePartitioned01 (batchId=270)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergePartitioned02 (batchId=270)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergeUnpartitioned01 (batchId=270)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergeUnpartitioned02 (batchId=270)
org.apache.hive.hcatalog.pig.TestHCatLoaderComplexSchema.testTupleInBagInTupleInBag[0] (batchId=173)
org.apache.hive.hcatalog.pig.TestTextFileHCatStorer.testWriteChar (batchId=173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3479/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3479/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3479/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3479/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3479/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3479/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 41 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851973 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860956" author="hiveqa" created="Fri, 10 Feb 2017 09:13:56 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851986/HIVE-15871.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851986/HIVE-15871.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10230 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=123)
	[groupby3_map.q,union26.q,mapreduce1.q,mapjoin_addjar.q,bucket_map_join_spark1.q,udf_example_add.q,multi_insert_with_join.q,sample7.q,auto_join_nulls.q,ppd_outer_join4.q,load_dyn_part8.q,alter_merge_orc.q,sample6.q,bucket_map_join_1.q,auto_sortmerge_join_9.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3484/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3484/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3484/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3484/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3484/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3484/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851986 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15861462" author="ekoifman" created="Fri, 10 Feb 2017 16:08:43 +0000"  >&lt;p&gt;all failures have age &amp;gt; 1&lt;/p&gt;</comment>
                            <comment id="15861537" author="wzheng" created="Fri, 10 Feb 2017 16:59:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15861570" author="ekoifman" created="Fri, 10 Feb 2017 17:31:49 +0000"  >&lt;p&gt;committed to master&lt;br/&gt;
thanks Wei for the review&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13041110">HIVE-15839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13012102">HIVE-14949</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12851973" name="HIVE-15871.02.patch" size="4731" author="ekoifman" created="Fri, 10 Feb 2017 02:38:57 +0000"/>
                            <attachment id="12851986" name="HIVE-15871.03.patch" size="4730" author="ekoifman" created="Fri, 10 Feb 2017 04:32:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 04:27:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15872] The PERCENTILE_APPROX UDAF does not work with empty set</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15872</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;1. Original SQL:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select
    percentile_approx(
        column0,
        array(0.50, 0.70, 0.90, 0.95, 0.99)
    )
from
    my_table
where
    date = &lt;span class=&quot;code-quote&quot;&gt;&apos;20170207&apos;&lt;/span&gt;
    and column1 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value1&apos;&lt;/span&gt;
    and column2 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value2&apos;&lt;/span&gt;
    and column3 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value3&apos;&lt;/span&gt;
    and column4 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value4&apos;&lt;/span&gt;
    and column5 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value5&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. Exception StackTrace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error: java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing row (tag=0) {&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:{},&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;:[0.0,10000.0]}} at org.apache.hadoop.hive.ql.exec.mr.ExecReducer.reduce(ExecReducer.java:256) at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:453) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:401) at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:163) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:422) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1671) at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158) Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing row (tag=0) {&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:{},&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;:[0.0,10000.0]}} at org.apache.hadoop.hive.ql.exec.mr.ExecReducer.reduce(ExecReducer.java:244) ... 7 more Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.IndexOutOfBoundsException: Index: 2, Size: 2 at org.apache.hadoop.hive.ql.exec.GroupByOperator.process(GroupByOperator.java:766) at org.apache.hadoop.hive.ql.exec.mr.ExecReducer.reduce(ExecReducer.java:235) ... 7 more Caused by: java.lang.IndexOutOfBoundsException: Index: 2, Size: 2 at java.util.ArrayList.rangeCheck(ArrayList.java:653) at java.util.ArrayList.get(ArrayList.java:429) at org.apache.hadoop.hive.ql.udf.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.NumericHistogram.merge(NumericHistogram.java:134) at org.apache.hadoop.hive.ql.udf.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericUDAFPercentileApprox$GenericUDAFPercentileApproxEvaluator.merge(GenericUDAFPercentileApprox.java:318) at org.apache.hadoop.hive.ql.udf.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericUDAFEvaluator.aggregate(GenericUDAFEvaluator.java:188) at org.apache.hadoop.hive.ql.exec.GroupByOperator.updateAggregations(GroupByOperator.java:612) at org.apache.hadoop.hive.ql.exec.GroupByOperator.processAggr(GroupByOperator.java:851) at org.apache.hadoop.hive.ql.exec.GroupByOperator.processKey(GroupByOperator.java:695) at org.apache.hadoop.hive.ql.exec.GroupByOperator.process(GroupByOperator.java:761) ... 8 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3. review data:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select
    column0
from
    my_table
where
    date = &lt;span class=&quot;code-quote&quot;&gt;&apos;20170207&apos;&lt;/span&gt;
    and column1 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value1&apos;&lt;/span&gt;
    and column2 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value2&apos;&lt;/span&gt;
    and column3 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value3&apos;&lt;/span&gt;
    and column4 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value4&apos;&lt;/span&gt;
    and column5 = &lt;span class=&quot;code-quote&quot;&gt;&apos;value5&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After run this sql, we found the result is NULL.&lt;/p&gt;

&lt;p&gt;4. what&apos;s the meaning of &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0, 10000.0&amp;#93;&lt;/span&gt; in stacktrace?&lt;/p&gt;

&lt;p&gt;In GenericUDAFPercentileApproxEvaluator, the method `merge` should process an ArrayList which name is partialHistogram. Normally, the basic structure of partialHistogram is &lt;span class=&quot;error&quot;&gt;&amp;#91;npercentiles, percentile0, percentile1..., nbins, bin0.x, bin0.y, bin1.x, bin1.y,...&amp;#93;&lt;/span&gt;. However, if we process NULL(empty set) column values, the partialHistoram will only contains &lt;span class=&quot;error&quot;&gt;&amp;#91;npercentiles(0), nbins(10000)&amp;#93;&lt;/span&gt;. That&apos;s the reason why the stacktrace shows a strange row data: {&quot;key&quot;:{},&quot;value&quot;:{&quot;_col0&quot;:&lt;span class=&quot;error&quot;&gt;&amp;#91;0.0,10000.0&amp;#93;&lt;/span&gt;}}&lt;/p&gt;

&lt;p&gt;Before we call histogram#merge (on-line hisgoram algorithm from paper: &lt;a href=&quot;http://www.jmlr.org/papers/volume11/ben-haim10a/ben-haim10a.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.jmlr.org/papers/volume11/ben-haim10a/ben-haim10a.pdf&lt;/a&gt; ), the partialHistogram should remove elements which store percentiles like `partialHistogram.subList(0, nquantiles+1).clear();`. In the case of empty set, GenericUDAFPercentileApproxEvaluator will not remove percentiles. Consequently, NumericHistogram will merge a list which contains only 2 elements(&lt;span class=&quot;error&quot;&gt;&amp;#91;0, 10000.0&amp;#93;&lt;/span&gt;) and throws IndexOutOfBoundsException. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13041917">HIVE-15872</key>
            <summary>The PERCENTILE_APPROX UDAF does not work with empty set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="debugger87">Chaozhong Yang</assignee>
                                    <reporter username="debugger87">Chaozhong Yang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 02:20:57 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:00 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 00:19:54 +0000</resolved>
                                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15860755" author="hiveqa" created="Fri, 10 Feb 2017 05:32:34 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851972/HIVE-15872.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851972/HIVE-15872.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10229 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=113)
	[vectorization_16.q,join_casesensitive.q,transform_ppr2.q,join23.q,groupby7_map_skew.q,ppd_join2.q,ppd_outer_join5.q,create_merge_compressed.q,louter_join_ppr.q,sample9.q,smb_mapjoin_16.q,vectorization_not.q,having.q,ppd_outer_join1.q,union_remove_12.q]
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3480/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3480/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3480/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3480/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3480/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3480/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851972 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860908" author="debugger87" created="Fri, 10 Feb 2017 08:24:59 +0000"  >&lt;p&gt;According to SQL-standard, percentile_approx should return null for zero elements rather than throws IndexOutOfBoundsException in reducer.&lt;/p&gt;</comment>
                            <comment id="15861898" author="wzheng" created="Fri, 10 Feb 2017 21:59:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=debugger87&quot; class=&quot;user-hover&quot; rel=&quot;debugger87&quot;&gt;Chaozhong Yang&lt;/a&gt; Thanks for the patch. The fix looks good. Can you add a unit test for the failing case?&lt;/p&gt;</comment>
                            <comment id="15863175" author="debugger87" created="Mon, 13 Feb 2017 03:40:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzheng&quot; class=&quot;user-hover&quot; rel=&quot;wzheng&quot;&gt;Wei Zheng&lt;/a&gt; I just added query test case for `zero elements for percentile_approx`. Could you help me to review this patch&#65311;&lt;/p&gt;</comment>
                            <comment id="15863198" author="hiveqa" created="Mon, 13 Feb 2017 04:36:29 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852288/HIVE-15872.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852288/HIVE-15872.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10236 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udaf_percentile_approx_23] (batchId=31)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3511/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3511/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3511/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3511/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3511/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3511/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852288 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15863239" author="hiveqa" created="Mon, 13 Feb 2017 05:37:11 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852289/HIVE-15872.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852289/HIVE-15872.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10237 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udaf_percentile_approx_23] (batchId=31)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3512/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3512/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3512/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3512/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3512/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3512/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852289 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15863337" author="hiveqa" created="Mon, 13 Feb 2017 08:47:08 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852309/HIVE-15872.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852309/HIVE-15872.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10223 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udaf_percentile_approx_23] (batchId=31)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=125)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3515/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3515/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3515/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3515/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3515/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3515/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852309 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15864745" author="wzheng" created="Tue, 14 Feb 2017 00:19:54 +0000"  >&lt;p&gt;Committed to master and branch-2.1.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=debugger87&quot; class=&quot;user-hover&quot; rel=&quot;debugger87&quot;&gt;Chaozhong Yang&lt;/a&gt; for the contribution!&lt;/p&gt;</comment>
                            <comment id="15864885" author="debugger87" created="Tue, 14 Feb 2017 02:09:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzheng&quot; class=&quot;user-hover&quot; rel=&quot;wzheng&quot;&gt;Wei Zheng&lt;/a&gt; for your review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852288" name="HIVE-15872.2.patch" size="1499" author="debugger87" created="Mon, 13 Feb 2017 03:38:24 +0000"/>
                            <attachment id="12852289" name="HIVE-15872.3.patch" size="2222" author="debugger87" created="Mon, 13 Feb 2017 04:46:58 +0000"/>
                            <attachment id="12852309" name="HIVE-15872.4.patch" size="2336" author="debugger87" created="Mon, 13 Feb 2017 07:37:54 +0000"/>
                            <attachment id="12851972" name="HIVE-15872.patch" size="723" author="debugger87" created="Fri, 10 Feb 2017 02:27:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 05:32:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15873] Remove Windows-specific code</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15873</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I know a lot of work has gone initially into supporting UT, runtime, etc on Windows, but this code seems to have been rotting. &lt;/p&gt;

&lt;p&gt;There have been no updates to the windows specific test files, or any new code to keep the new features compatible.&lt;/p&gt;

&lt;p&gt;We&apos;re also not running the tests or builds on windows. That is really an impediment to keepting that code healthy.&lt;/p&gt;

&lt;p&gt;The code is sprinkled all over the codebase. Makes it hard to maintain. I think we&apos;re better off removing it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041923">HIVE-15873</key>
            <summary>Remove Windows-specific code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 02:51:19 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:00 +0000</updated>
                            <resolved>Sat, 11 Feb 2017 21:00:08 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15860808" author="hiveqa" created="Fri, 10 Feb 2017 06:24:29 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851976/HIVE-15873.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12851976/HIVE-15873.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 28 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10232 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.metastore.TestHiveMetaStoreGetMetaConf.testGetMetaConfDefault (batchId=188)
org.apache.hadoop.hive.metastore.TestHiveMetaStoreGetMetaConf.testGetMetaConfDefaultEmptyString (batchId=188)
org.apache.hadoop.hive.metastore.TestHiveMetaStoreGetMetaConf.testGetMetaConfOverridden (batchId=188)
org.apache.hadoop.hive.metastore.TestHiveMetaStoreGetMetaConf.testGetMetaConfUnknownPreperty (batchId=188)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3481/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3481/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3481/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3481/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3481/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3481/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12851976 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15860878" author="hagleitn" created="Fri, 10 Feb 2017 07:46:16 +0000"  >&lt;p&gt;Tests pass for me. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; thoughts?&lt;/p&gt;</comment>
                            <comment id="15862060" author="ashutoshc" created="Sat, 11 Feb 2017 00:17:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15862531" author="hagleitn" created="Sat, 11 Feb 2017 21:00:08 +0000"  >&lt;p&gt;Committed to master.&lt;/p&gt;</comment>
                            <comment id="15862637" author="ashutoshc" created="Sun, 12 Feb 2017 04:10:30 +0000"  >&lt;p&gt;This indeed is pretty useful. Removing dead code is necessary to keep project healthy. &lt;br/&gt;
Since its not most interesting bit of project, refactoring like these doesn&apos;t always happen on time. Thanks a lot for taking time to do this and helping in moving project forward leaving behind dead weight.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851974" name="HIVE-15873.1.patch" size="434724" author="hagleitn" created="Fri, 10 Feb 2017 02:53:01 +0000"/>
                            <attachment id="12851976" name="HIVE-15873.2.patch" size="488559" author="hagleitn" created="Fri, 10 Feb 2017 02:55:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 06:24:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15874] Invalid position alias in Group By when CBO failed </title>
                <link>https://issues.apache.org/jira/browse/HIVE-15874</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;for example&#65306;&lt;br/&gt;
create table alias_test_01(a INT, b STRING) ;&lt;br/&gt;
create table alias_test_02(a INT, b STRING) ;&lt;br/&gt;
create table alias_test_03(a INT, b STRING) ;&lt;/p&gt;

&lt;p&gt;set hive.groupby.position.alias = true;&lt;br/&gt;
set hive.cbo.enable=true;&lt;/p&gt;

&lt;p&gt;explain &lt;br/&gt;
select * from &lt;br/&gt;
alias_test_01 alias01 &lt;br/&gt;
left join &lt;br/&gt;
(&lt;br/&gt;
select 2017 as a, b from alias_test_02 group by 1, 2&lt;br/&gt;
) alias02 &lt;br/&gt;
on alias01.a = alias02.a &lt;br/&gt;
left join &lt;br/&gt;
alias_test_03 alias03&lt;br/&gt;
on alias01.a = alias03.a;&lt;/p&gt;

&lt;p&gt;error info:&lt;br/&gt;
FAILED: SemanticException &lt;span class=&quot;error&quot;&gt;&amp;#91;Error 10220&amp;#93;&lt;/span&gt;: Invalid position alias in Group By&lt;br/&gt;
Position alias: 2017 does not exist&lt;br/&gt;
The Select List is indexed from 1 to 2&lt;/p&gt;

&lt;p&gt;the first process Position Alias result:&lt;br/&gt;
when CBO optimize failed and reAnalyzeAST is true, position alias will be processed twice.&lt;br/&gt;
1.   &apos;group by 1, 2&apos; convert to &apos;group by 2017, b&apos;&lt;br/&gt;
2.   &apos;group by 2017, b&apos;  2017 column does not exist&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041932">HIVE-15874</key>
            <summary>Invalid position alias in Group By when CBO failed </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pxiong">Pengcheng Xiong</assignee>
                                    <reporter username="Walter Wu">Walter Wu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 03:43:37 +0000</created>
                <updated>Tue, 25 Jul 2017 20:04:57 +0000</updated>
                            <resolved>Tue, 21 Feb 2017 02:26:32 +0000</resolved>
                                    <version>1.2.1</version>
                    <version>2.1.1</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>CBO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15874116" author="walter wu" created="Mon, 20 Feb 2017 06:37:51 +0000"  >&lt;p&gt;Use MR engine. &lt;br/&gt;
Before CBO optimize, processPositionAlias will be called once. &apos;select 2017 as a, b from alias_test_02 group by 1, 2&apos; will be transformed into  &apos;select 2017 as a, b from alias_test_02 group by 2017, b&apos;.&lt;br/&gt;
When CBO optimize failed and reAnalyzeAST is set to true, processPositionAlias will be called twice. &apos;2017&apos; will be considered to column alias. Error : &apos;Invalid position alias in Group By&apos; will occur.&lt;br/&gt;
Obviously, we just need process position alias one time. So the most intuitive and effective way is stepping processPositionAlias out of genResolvedParseTree.&lt;/p&gt;</comment>
                            <comment id="15874166" author="pxiong" created="Mon, 20 Feb 2017 07:58:13 +0000"  >&lt;p&gt;LGTM +1&lt;/p&gt;</comment>
                            <comment id="15874380" author="hiveqa" created="Mon, 20 Feb 2017 11:11:00 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853541/HIVE-15874.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853541/HIVE-15874.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10250 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3655/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3655/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3655/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3655/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3655/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3655/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853541 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15875032" author="pxiong" created="Mon, 20 Feb 2017 20:35:49 +0000"  >&lt;p&gt;pushed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Walter+Wu&quot; class=&quot;user-hover&quot; rel=&quot;Walter Wu&quot;&gt;Walter Wu&lt;/a&gt; for the patch.&lt;/p&gt;</comment>
                            <comment id="15875249" author="walter wu" created="Tue, 21 Feb 2017 02:22:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pxiong&quot; class=&quot;user-hover&quot; rel=&quot;pxiong&quot;&gt;Pengcheng Xiong&lt;/a&gt; for review. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12853541" name="HIVE-15874.patch" size="10810" author="Walter Wu" created="Mon, 20 Feb 2017 10:00:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Feb 2017 07:58:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15875] LLAP UI: Rename Executors &quot;used&quot; --&gt; &quot;used (wait queue + executors)&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15875</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;At times in LLAP, executors &quot;used&quot; value would be higher than &quot;number of executors&quot;.   It would be good to rename &quot;used&quot; to &quot;used (wait queue + executors)&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041944">HIVE-15875</key>
            <summary>LLAP UI: Rename Executors &quot;used&quot; --&gt; &quot;used (wait queue + executors)&quot;</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rajesh.balamohan">Rajesh Balamohan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 04:44:28 +0000</created>
                <updated>Fri, 10 Feb 2017 04:45:34 +0000</updated>
                                                                            <component>llap</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                            <attachment id="12851987" name="Llap_ui.png" size="127851" author="rajesh.balamohan" created="Fri, 10 Feb 2017 04:45:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39vzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15876] Add the ability to define composed functions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15876</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I&apos;m not entirely sure the solution implied by the subject is the best one, but it&apos;s a useful shorthand for addressing the problem I&apos;m seeing.&lt;/p&gt;

&lt;p&gt;I have a use case for wanting to see if a given unix timestamp (with milliseconds) falls within a date range expressed by a start_date and an end_date in &apos;yyyy-MM-dd&apos; format. Without any UDFs, it would look something like this:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
WHERE&lt;br/&gt;
time &amp;gt;= unix_timestamp(&apos;${start_date}&apos;,&apos;yyyy-MM-dd&apos;)*1000&lt;br/&gt;
AND time &amp;lt; unix_timestamp(date_add(&apos;${end_date}&apos;, 1),&apos;yyyy-MM-dd&apos;)*1000&lt;/p&gt;

&lt;p&gt;This condition is obviously quite a pain to read and write, and one that&apos;s easy to get wrong when trying to reproduce. I would like to simplify to something like:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
WHERE time_in_range(time, &apos;${start_date}&apos;,&apos;${end_date}&apos;)&lt;/p&gt;

&lt;p&gt;I was able to write a UDF for the above relatively easily, but when testing it, it performed notably worse than the first example. The reason for that quickly became clear. Even though both functions are deterministic, that is largely irrelevant in the latter example, because the &apos;time&apos; variable is not static. The query optimizer can do nothing with it, and must do the full function evaluation on each row. Whereas in the first example the optimizer can see that the &quot;sub-functions&quot; of unix_timestamp and date_add are both deterministic and have static inputs, and will only evaluate them once for the whole query.&lt;/p&gt;

&lt;p&gt;I would like a way to define a single function that maintains the ability for the optimizer to see which of its constituent parts only need be evaluated once. Whether that is some syntax in the CREATE FUNCTION DDL or some annotations within scala; either would be incredibly useful.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041967">HIVE-15876</key>
            <summary>Add the ability to define composed functions</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peter@scopely.com">Peter Attardo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 06:01:14 +0000</created>
                <updated>Fri, 10 Feb 2017 19:20:16 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39w4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15877] Upload dependency jars for druid storage handler</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15877</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Upload dependency jars for druid storage handler&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042152">HIVE-15877</key>
            <summary>Upload dependency jars for druid storage handler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bslim">slim bouguerra</assignee>
                                    <reporter username="bslim">slim bouguerra</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 19:00:07 +0000</created>
                <updated>Tue, 25 Jul 2017 20:04:52 +0000</updated>
                            <resolved>Fri, 17 Feb 2017 01:13:37 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Druid integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15861722" author="bslim" created="Fri, 10 Feb 2017 19:23:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; can you please review this ? &lt;/p&gt;</comment>
                            <comment id="15861806" author="hiveqa" created="Fri, 10 Feb 2017 20:16:30 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852110/HIVE-15877.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852110/HIVE-15877.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10246 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testConnection (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testIsValid (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testIsValidNeg (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testNegativeProxyAuth (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testNegativeTokenAuth (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testProxyAuth (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testTokenAuth (batchId=229)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3494/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3494/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3494/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3494/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3494/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3494/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852110 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15868953" author="ashutoshc" created="Thu, 16 Feb 2017 01:40:39 +0000"  >&lt;ul&gt;
	&lt;li&gt;Instead of apache commons logger, use slf4j Logger.&lt;/li&gt;
	&lt;li&gt;Much of this code already exists in Utilities::jarFinderGetJar() which is called by LlapServiceDriver::localizeJarForClass() for same purposes. Perhaps, you can reuse that instead of repeated logic here.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15870623" author="bslim" created="Thu, 16 Feb 2017 20:10:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Thanks i have used the suggested method &lt;/p&gt;</comment>
                            <comment id="15870692" author="ashutoshc" created="Thu, 16 Feb 2017 21:04:45 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15870711" author="hiveqa" created="Thu, 16 Feb 2017 21:20:58 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853121/HIVE-15877.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853121/HIVE-15877.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 31 failed/errored test(s), 10243 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_external_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_not_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure1] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure2] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[external1] (batchId=85)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testAlterTable (batchId=194)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testTransactionalValidation (batchId=194)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterTable (batchId=197)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTransactionalValidation (batchId=197)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterTable (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTransactionalValidation (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterTable (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTransactionalValidation (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterTable (batchId=202)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTransactionalValidation (batchId=202)
org.apache.hadoop.hive.ql.security.TestMetastoreAuthorizationProvider.testSimplePrivileges (batchId=210)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProvider.testSimplePrivileges (batchId=208)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProviderWithACL.testSimplePrivileges (batchId=220)
org.apache.hive.hcatalog.api.TestHCatClient.testBasicDDLCommands (batchId=170)
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=170)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.createTable (batchId=221)
org.apache.hive.service.cli.TestEmbeddedThriftBinaryCLIService.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithBinary.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithHttp.testExecuteStatementAsync (batchId=213)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3607/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3607/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3607/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3607/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3607/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3607/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 31 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853121 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15870987" author="ashutoshc" created="Fri, 17 Feb 2017 01:13:37 +0000"  >&lt;p&gt;Pushed to master. Thanks, Slim!&lt;/p&gt;</comment>
                            <comment id="15872303" author="thejas" created="Fri, 17 Feb 2017 18:59:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;slim bouguerra&lt;/a&gt;&lt;br/&gt;
Looks like the additional failures in the unit tests seen here are related to this patch. I will create a new jira. Is that change needed ?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--- metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java
+++ metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java
@@ -739,7 +739,10 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void createTable(Table tbl, EnvironmentContext envContext) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Already
         hook.commitCreateTable(tbl);
       }
       success = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
-    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e){
+      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Got exception from createTable&quot;&lt;/span&gt;, e);
+    }
+    &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!success &amp;amp;&amp;amp; (hook != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)) {
         hook.rollbackCreateTable(tbl);
       }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15872317" author="thejas" created="Fri, 17 Feb 2017 19:04:49 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15969&quot; title=&quot;Failures in TestRemoteHiveMetaStore, TestSetUGIOnOnlyServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15969&quot;&gt;&lt;del&gt;HIVE-15969&lt;/del&gt;&lt;/a&gt; for UT failure.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;slim bouguerra&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Can one of you address it ?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13044071">HIVE-15969</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12853121" name="HIVE-15877.2.patch" size="8380" author="bslim" created="Thu, 16 Feb 2017 20:10:04 +0000"/>
                            <attachment id="12852110" name="HIVE-15877.patch" size="10492" author="bslim" created="Fri, 10 Feb 2017 19:23:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 20:16:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39x9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15878] LLAP text cache: bug in last merge</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15878</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;While rebasing the last patch, a bug was introduced.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042180">HIVE-15878</key>
            <summary>LLAP text cache: bug in last merge</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="gopalv">Gopal V</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 21:21:52 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:10 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 03:07:51 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15861868" author="sershe" created="Fri, 10 Feb 2017 21:23:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt; can you take a look?&lt;br/&gt;
Note the comment that also made it into the patch. Before &lt;a href=&quot;https://issues.apache.org/jira/browse/ORC-141&quot; title=&quot;inconsistent memorymanager usage after PhysicalWriter patch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ORC-141&quot;&gt;&lt;del&gt;ORC-141&lt;/del&gt;&lt;/a&gt;, the memory manager may potentially cause issues with large files.&lt;/p&gt;</comment>
                            <comment id="15861922" author="hiveqa" created="Fri, 10 Feb 2017 22:17:22 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852125/HIVE-15878.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852125/HIVE-15878.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10246 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3497/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3497/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3497/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3497/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3497/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3497/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852125 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15862154" author="gopalv" created="Sat, 11 Feb 2017 02:05:39 +0000"  >&lt;p&gt;LGTM - +1.&lt;/p&gt;

&lt;p&gt;Seeing hit-rates again now.&lt;/p&gt;</comment>
                            <comment id="15864946" author="sershe" created="Tue, 14 Feb 2017 03:07:51 +0000"  >&lt;p&gt;Committed to master&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852125" name="HIVE-15878.patch" size="981" author="sershe" created="Fri, 10 Feb 2017 21:23:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 21:23:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39xg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15879] Fix HiveMetaStoreChecker.checkPartitionDirs method</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15879</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15803&quot; title=&quot;msck can hang when nested partitions are present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15803&quot;&gt;&lt;del&gt;HIVE-15803&lt;/del&gt;&lt;/a&gt; fixes the msck hang issue in HiveMetaStoreChecker.checkPartitionDirs method by adding a check to see if the Threadpool has any spare threads. If not it uses single threaded listing of the files.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    if (pool != null) {
      synchronized (pool) {
        // In case of recursive calls, it is possible to deadlock with TP. Check TP usage here.
        if (pool.getActiveCount() &amp;lt; pool.getMaximumPoolSize()) {
          useThreadPool = true;
        }

        if (!useThreadPool) {
          if (LOG.isDebugEnabled()) {
            LOG.debug(&quot;Not using threadPool as active count:&quot; + pool.getActiveCount()
                + &quot;, max:&quot; + pool.getMaximumPoolSize());
          }
        }
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Based on the java doc of getActiveCount() below &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Returns the approximate number of threads that are actively executing tasks.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;it returns only approximate number of threads and it cannot be guaranteed that it always returns the exact number of active threads. This still exposes the method implementation to the msck hang bug in rare corner cases.&lt;/p&gt;

&lt;p&gt;We could either:&lt;br/&gt;
1. Use a atomic counter to track exactly how many threads are actively running&lt;br/&gt;
2. Relook at the method itself to make it much simpler. Like eg, look into the possibility of changing the recursive implementation to an iterative implementation where worker threads pick tasks from a queue until the queue is empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042190">HIVE-15879</key>
            <summary>Fix HiveMetaStoreChecker.checkPartitionDirs method</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vihangk1">Vihang Karajgaonkar</assignee>
                                    <reporter username="vihangk1">Vihang Karajgaonkar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 21:53:59 +0000</created>
                <updated>Wed, 4 Oct 2017 20:01:28 +0000</updated>
                            <resolved>Tue, 28 Feb 2017 17:54:47 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15881146" author="vihangk1" created="Thu, 23 Feb 2017 20:15:27 +0000"  >&lt;p&gt;Created a review board link as well&lt;/p&gt;</comment>
                            <comment id="15881740" author="ashutoshc" created="Fri, 24 Feb 2017 01:36:01 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajesh.balamohan&quot; class=&quot;user-hover&quot; rel=&quot;rajesh.balamohan&quot;&gt;Rajesh Balamohan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pxiong&quot; class=&quot;user-hover&quot; rel=&quot;pxiong&quot;&gt;Pengcheng Xiong&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15881827" author="rajesh.balamohan" created="Fri, 24 Feb 2017 02:48:07 +0000"  >&lt;p&gt;Thanks for sharing the details &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt;. I have a different point of view here.&lt;/p&gt;

&lt;p&gt;I agree that ThreadPoolExecutor.getActiveCount() is approximate. It is approximate because,  by the time &lt;tt&gt;getActiveCount()&lt;/tt&gt; iterates over the running threads in the worker list, it is possible that some of the threads which were executing are complete. &lt;a href=&quot;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ThreadPoolExecutor.java#l1818&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ThreadPoolExecutor.java#l1818&lt;/a&gt;. So the reported numbers could be slightly higher than the actually running threads. But it would never be less, as new Worker in ThreadPoolExecutor is added with &lt;tt&gt;mainLock&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;In the context of MSCK logic, this approximation should not be a problem. &lt;/p&gt;

&lt;p&gt;This is due to the check of &quot;(pool.getActiveCount() &amp;lt; pool.getMaximumPoolSize())&quot;. In case threadpool executor reports approximate value (i.e higher than the actual number of threads), thread pool would not be used as per current logic. So in corner cases there can be instances where in threadpool executor could have been used, but failed due to the approximate (higher values)  reported by ThreadPoolExecutor. &lt;/p&gt;</comment>
                            <comment id="15881994" author="hiveqa" created="Fri, 24 Feb 2017 05:29:35 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854272/HIVE-15879.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854272/HIVE-15879.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 12 failed/errored test(s), 10194 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestContext - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestHiveCopyFiles - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestHiveCredentialProviders - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestHiveMetaStoreChecker - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestLog4j2Appenders - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestOperators - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestTableIterable - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestTxnCommands2 - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3741/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3741/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3741/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3741/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3741/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3741/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854272 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15882294" author="vihangk1" created="Fri, 24 Feb 2017 09:19:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajesh.balamohan&quot; class=&quot;user-hover&quot; rel=&quot;rajesh.balamohan&quot;&gt;Rajesh Balamohan&lt;/a&gt; for taking time to look into this. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I agree that ThreadPoolExecutor.getActiveCount() is approximate. It is approximate because, by the time getActiveCount() iterates over the running threads in the worker list, it is possible that some of the threads which were executing are complete. &lt;a href=&quot;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ThreadPoolExecutor.java#l1818&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ThreadPoolExecutor.java#l1818&lt;/a&gt;. So the reported numbers could be slightly higher than the actually running threads. But it would never be less, as new Worker in ThreadPoolExecutor is added with mainLock.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Isn&apos;t this a implementation detail of ThreadPoolExecutor? Should we rely on this implementation which can change in future versions of java? &lt;/p&gt;

&lt;p&gt;Even if we agree that this still okay to rely on, iterative parallel BFS is still much faster than the current implementation. In order to prove this I created a benchmark to investigate the performance of msck before and after the patch. One of the issues in benchmarking this performance is that the min pool size is determined by &lt;tt&gt;Runtime.getRuntime().availableProcessors() * 2&lt;/tt&gt; which on my machine is 20. I wanted to test the performance of existing implementation when the pool size is &amp;lt;= nested level of directories. In order to make it easier to test I commented out &lt;tt&gt;poolSize = poolSize == 0 ? poolSize : Math.max(poolSize, Runtime.getRuntime().availableProcessors() * 2);&lt;/tt&gt; and relied only on the config value &lt;tt&gt;hive.mv.files.thread&lt;/tt&gt; for the poolsize. This is just to make it easy to test and I am sure that problem will be reproducible when nested levels is greater than pool size.&lt;/p&gt;

&lt;p&gt;Here are the results:&lt;br/&gt;
Table specifications : 3 level nested directory structure, each directory contains 5 sub-directories. So 5*5*5 = 125 partitions on S3&lt;br/&gt;
Table schema : msck_test(col1 string) partitioned by (part1 string, part2 string, part3 string)&lt;br/&gt;
Ran &lt;tt&gt;msck repair table msck_test&lt;/tt&gt; and noted the execution times.&lt;/p&gt;

&lt;p&gt;Current implementation:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Pool size &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 0 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 2 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 3  &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 4 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 8 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 15 (default)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Time taken (sec) &lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;446&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1161&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;855&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;636&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;375&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;217&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;With the patch:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Pool size &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 0 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 2 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 4 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 8 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 15 (default)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Time taken (sec) &lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;470&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;So just a pool size of 2 is better than default pool size of 15 with the patch. WIth default configs this patch improves performance by  ~22x. The reason this happens is because iterative implementation uses the threadpool optimally since no threads are blocked on other threads. In recursive implementation one thread blocks on other thread while working on sub-directories. With the additional overhead of locking you can see that there is actually a performance degradation when nested levels is more than pool size compared to even single-threaded implementation.&lt;/p&gt;

&lt;p&gt;I am open to suggestions but in my opinion this is still a good approach unless there is something which I am missing completely. Please let me know what you think? Thanks!&lt;/p&gt;</comment>
                            <comment id="15882296" author="vihangk1" created="Fri, 24 Feb 2017 09:21:17 +0000"  >&lt;p&gt;I looked at the test results. All the tests from the same batch timed out. It may be a issue with my new tests of some other test in the same batch. Uploading the patch again to trigger one more run of pre-commit while I look into test cases again.&lt;/p&gt;</comment>
                            <comment id="15882640" author="rajesh.balamohan" created="Fri, 24 Feb 2017 13:12:49 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;&amp;gt;&lt;br/&gt;
it returns only approximate number of threads and it cannot be guaranteed that it always returns the exact number of active threads. This still exposes the method implementation to the msck hang bug in rare corner cases.&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt;&lt;br/&gt;
My comment on ThreadPoolExecutor.getActiveCount was for the msck-hang bug. That bug should not surface with master branch. &lt;/p&gt;

&lt;p&gt;Proposed change should not impact the single partition use case (e.g single partition column having 10K partitions would not be impacted with this). However, if there are multiple partition columns, iterative approach would be better than the recursive approach. In recursive model, it gets blocked with in higher level and proceeds in single threaded approach. &lt;/p&gt;</comment>
                            <comment id="15883045" author="hiveqa" created="Fri, 24 Feb 2017 16:39:10 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854416/HIVE-15879.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854416/HIVE-15879.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 10195 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestContext - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestHiveCopyFiles - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestHiveCredentialProviders - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestHiveMetaStoreChecker - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestLog4j2Appenders - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestOperators - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestTableIterable - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
TestTxnCommands2 - did not produce a TEST-*.xml file (likely timed out) (batchId=258)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3757/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3757/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3757/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3757/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3757/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3757/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854416 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15883066" author="vihangk1" created="Fri, 24 Feb 2017 16:46:23 +0000"  >&lt;p&gt;One of the test cases which I added for testing deeply nested partitions was using real poolSize (numProcessors*2) which is very high (~20). The single threaded implementation of the testcase took too much time most likely leading to the time-out for that batch. Fixed the test case to use a smaller poolSize using mockito. Local test runs are taking around ~14 sec now. Hopefully this should work with pre-commit now.&lt;/p&gt;</comment>
                            <comment id="15883338" author="vihangk1" created="Fri, 24 Feb 2017 19:04:13 +0000"  >&lt;p&gt;I agree that the patch does not improve the case of have 1 level of partition. It performs similar to existing approach. Did a simple test with single partitioned key table with ~1800 partitions on S3. Both the implementations take about the same time ~60 sec. But we quickly start seeing the benefits of this approach as soon as the number of partition keys increase.&lt;/p&gt;

&lt;p&gt;Repeated the test above with a 2 partition keys with 10*10 = 100 partitions. Results shown below show significant performance gain with the default configs.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Default pool size &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;  Before &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; After &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Time taken (sec) &lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 19.8 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 3.27 &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajesh.balamohan&quot; class=&quot;user-hover&quot; rel=&quot;rajesh.balamohan&quot;&gt;Rajesh Balamohan&lt;/a&gt; I can change the JIRA description and category to &quot;Improvement&quot; if you think that is more appropriate. Thanks!&lt;/p&gt;

&lt;p&gt;Also updating the review board with patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15879&quot; title=&quot;Fix HiveMetaStoreChecker.checkPartitionDirs method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15879&quot;&gt;&lt;del&gt;HIVE-15879&lt;/del&gt;&lt;/a&gt;.03.patch&lt;/p&gt;</comment>
                            <comment id="15883803" author="hiveqa" created="Sat, 25 Feb 2017 00:10:36 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854556/HIVE-15879.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854556/HIVE-15879.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10251 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=99)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3765/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3765/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3765/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3765/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3765/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3765/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854556 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15884045" author="hiveqa" created="Sat, 25 Feb 2017 05:38:59 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854556/HIVE-15879.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854556/HIVE-15879.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10265 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3771/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3771/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3771/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3771/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3771/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3771/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854556 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15888557" author="spena" created="Tue, 28 Feb 2017 17:54:47 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; for your contribution. I committed this to master.&lt;/p&gt;</comment>
                            <comment id="15888598" author="vihangk1" created="Tue, 28 Feb 2017 18:25:48 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; The last patch did not have one of the minor comments from Sahil. I have updated the patch file again. It changes the type of the variable &lt;tt&gt;pendingPaths&lt;/tt&gt; in &lt;tt&gt;PathDepthInfoCallable&lt;/tt&gt; class from &lt;tt&gt;ConcurrentLinkedQueue&amp;lt;PathDepthInfo&amp;gt;&lt;/tt&gt; to a more generic &lt;tt&gt;Queue&amp;lt;PathDepthInfo&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;It is simple one line change. Can you please add a addendum for this? Thanks!&lt;/p&gt;</comment>
                            <comment id="15888651" author="spena" created="Tue, 28 Feb 2017 18:49:15 +0000"  >&lt;p&gt;Could you create another JIRA instead?&lt;/p&gt;</comment>
                            <comment id="15888910" author="vihangk1" created="Tue, 28 Feb 2017 21:39:03 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16059&quot; title=&quot;Addendum to HIVE-15879&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-16059&quot;&gt;HIVE-16059&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13047063">HIVE-16059</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12854272" name="HIVE-15879.01.patch" size="28009" author="vihangk1" created="Thu, 23 Feb 2017 20:15:27 +0000"/>
                            <attachment id="12854416" name="HIVE-15879.02.patch" size="28009" author="vihangk1" created="Fri, 24 Feb 2017 09:23:47 +0000"/>
                            <attachment id="12854508" name="HIVE-15879.03.patch" size="29094" author="vihangk1" created="Fri, 24 Feb 2017 16:46:23 +0000"/>
                            <attachment id="12854556" name="HIVE-15879.04.patch" size="28689" author="vihangk1" created="Fri, 24 Feb 2017 19:22:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Feb 2017 01:36:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39xif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15880] Allow insert overwrite and truncate table query to use auto.purge table property</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15880</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It seems inconsistent that auto.purge property is not considered when we do a INSERT OVERWRITE while it is when we do a DROP TABLE&lt;/p&gt;

&lt;p&gt;Drop table doesn&apos;t move table data to Trash when auto.purge is set to true&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; create table temp(col1 string, col2 string);
No rows affected (0.064 seconds)
&amp;gt; alter table temp set tblproperties(&apos;auto.purge&apos;=&apos;true&apos;);
No rows affected (0.083 seconds)
&amp;gt; insert into temp values (&apos;test&apos;, &apos;test&apos;), (&apos;test2&apos;, &apos;test2&apos;);
No rows affected (25.473 seconds)

# hdfs dfs -ls /user/hive/warehouse/temp
Found 1 items
-rwxrwxrwt   3 hive hive         22 2017-02-09 13:03 /user/hive/warehouse/temp/000000_0
#

&amp;gt; drop table temp;
No rows affected (0.242 seconds)

# hdfs dfs -ls /user/hive/warehouse/temp
ls: `/user/hive/warehouse/temp&apos;: No such file or directory
#
# sudo -u hive hdfs dfs -ls /user/hive/.Trash/Current/user/hive/warehouse
#
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;INSERT OVERWRITE query moves the table data to Trash even when auto.purge is set to true&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; create table temp(col1 string, col2 string);
&amp;gt; alter table temp set tblproperties(&apos;auto.purge&apos;=&apos;true&apos;);
&amp;gt; insert into temp values (&apos;test&apos;, &apos;test&apos;), (&apos;test2&apos;, &apos;test2&apos;);

# hdfs dfs -ls /user/hive/warehouse/temp
Found 1 items
-rwxrwxrwt   3 hive hive         22 2017-02-09 13:07 /user/hive/warehouse/temp/000000_0
#

&amp;gt; insert overwrite table temp select * from dummy;

# hdfs dfs -ls /user/hive/warehouse/temp
Found 1 items
-rwxrwxrwt   3 hive hive         26 2017-02-09 13:08 /user/hive/warehouse/temp/000000_0
# sudo -u hive hdfs dfs -ls /user/hive/.Trash/Current/user/hive/warehouse
Found 1 items
drwx------   - hive hive          0 2017-02-09 13:08 /user/hive/.Trash/Current/user/hive/warehouse/temp
#
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While move operations are not very costly on HDFS it could be significant overhead on slow FileSystems like S3. This could improve the performance of &lt;tt&gt;INSERT OVERWRITE TABLE&lt;/tt&gt; queries especially when there are large number of partitions on tables located on S3 should the user wish to set auto.purge property to true&lt;/p&gt;

&lt;p&gt;Similarly &lt;tt&gt;TRUNCATE TABLE&lt;/tt&gt; query on a table with &lt;tt&gt;auto.purge&lt;/tt&gt; property set true should not move the data to Trash&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042192">HIVE-15880</key>
            <summary>Allow insert overwrite and truncate table query to use auto.purge table property</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vihangk1">Vihang Karajgaonkar</assignee>
                                    <reporter username="vihangk1">Vihang Karajgaonkar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 22:10:15 +0000</created>
                <updated>Tue, 22 May 2018 23:58:28 +0000</updated>
                            <resolved>Sat, 1 Apr 2017 17:27:36 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15862096" author="vihangk1" created="Sat, 11 Feb 2017 00:54:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; Just wanted to get your opinion on this. Is this something that you think will be useful/consistent or if you see any issues if we decide to implement this?&lt;/p&gt;</comment>
                            <comment id="15863860" author="spena" created="Mon, 13 Feb 2017 15:54:31 +0000"  >&lt;p&gt;I didn&apos;t know the auto.purge exists. The property sounds pretty useful for avoiding sending files to trash in some tables. If this already works for DROP, then I think it should be consistent with INSERT OVERWRITE as well. Although I don&apos;t know if users would get confused that &apos;auto.purge&apos; is related only to DROP ... PURGE.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt; What do you guys think about this?&lt;/p&gt;</comment>
                            <comment id="15877069" author="vihangk1" created="Wed, 22 Feb 2017 00:16:07 +0000"  >&lt;p&gt;Adding the first version of the patch to trigger the pre-commit. Will be submitting second version with additional test cases&lt;/p&gt;</comment>
                            <comment id="15877528" author="hiveqa" created="Wed, 22 Feb 2017 05:48:27 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853833/HIVE-15880.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853833/HIVE-15880.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10252 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgress (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3683/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3683/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3683/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3683/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3683/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3683/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853833 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15939445" author="vihangk1" created="Thu, 23 Mar 2017 23:40:18 +0000"  >&lt;p&gt;Attaching the second version of the patch which includes test cases&lt;/p&gt;</comment>
                            <comment id="15939745" author="hiveqa" created="Fri, 24 Mar 2017 03:43:53 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12860246/HIVE-15880.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12860246/HIVE-15880.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10519 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=141)
org.apache.hadoop.hive.ql.TestAutoPurgeTables.testPartitionedExternalNoAutoPurge (batchId=211)
org.apache.hadoop.hive.ql.TestAutoPurgeTables.testPartitionedNoAutoPurge (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4329/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4329/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4329/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4329/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4329/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4329/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12860246 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15939884" author="vihangk1" created="Fri, 24 Mar 2017 06:08:36 +0000"  >&lt;p&gt;The tests were working for me locally. Changed the implementation of the tests to make it more robust. Also, added more logs in the test case to help debugging in case it fails again. Added couple of more tests&lt;/p&gt;</comment>
                            <comment id="15939946" author="hiveqa" created="Fri, 24 Mar 2017 07:29:49 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12860290/HIVE-15880.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12860290/HIVE-15880.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 10521 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4335/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4335/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4335/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4335/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4335/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4335/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12860290 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15940701" author="vihangk1" created="Fri, 24 Mar 2017 16:47:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt; Can you please review? Thanks!&lt;/p&gt;</comment>
                            <comment id="15941095" author="vihangk1" created="Fri, 24 Mar 2017 20:39:05 +0000"  >&lt;p&gt;Added more tests for covering &lt;tt&gt;truncate table&lt;/tt&gt; queries as well&lt;/p&gt;</comment>
                            <comment id="15941196" author="hiveqa" created="Fri, 24 Mar 2017 21:41:23 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12860446/HIVE-15880.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12860446/HIVE-15880.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 10530 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4346/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4346/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4346/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4346/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4346/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4346/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12860446 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15941218" author="vihangk1" created="Fri, 24 Mar 2017 21:55:17 +0000"  >&lt;p&gt;Test failure is flaky and has been already reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-16256&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15942414" author="ctang.ma" created="Sun, 26 Mar 2017 19:22:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; Thanks for the patch. I think the method in HiveMetaStoreFsImpl.deleteDir has the similar logic as you would like to change in FileUtils.moveToTrash, could we combine or reuse these methods? Also could you add a qtest for insert overwrite a table with encryption zone and enabled trash? I think the test should fail without this patch.&lt;/p&gt;</comment>
                            <comment id="15946351" author="vihangk1" created="Wed, 29 Mar 2017 01:18:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt; Thanks for the review. I changed the implementation of &lt;tt&gt;HiveMetaStoreFsImpl.deleteDir&lt;/tt&gt; so that it reuses FileUtils.moveToTrash method like you suggested.&lt;/p&gt;

&lt;p&gt;Also investigated encrypted tables, I realized that in case of encrypted table the &lt;tt&gt;INSERT OVERWRITE TABLE encrypted_table ...&lt;/tt&gt; command was anyways ignoring the error thrown when old data was moved to Trash. It logs a warning and then deletes the data when moving to Trash to fails. With my patch there would be no behavioral change with respect to encrypted tables. With the patch, if the table is encrypted and auto.purge is true, then it doesn&apos;t attempt to move the data to trash in the first place, so the warning would not be logged as well.&lt;/p&gt;

&lt;p&gt;Similarly, for truncate table. Both the commands use FileUtils.moveToTrash in the backend to delete the data which catches the exception when table is encrypted and simply logs the warning. So with the patch both there would not be any change with respect to encrypted tables for both INSERT OVERWRITE and TRUNCATE commands since they were already ignoring the Trash.&lt;/p&gt;

&lt;p&gt;This would still be more efficient when the tables are located on S3 since the code does not attempt to move them to trash as well.&lt;/p&gt;

&lt;p&gt;Also, found another unrelated bug during this investigation regarding the inconsistency with respect to &quot;EXTERNAL&quot; property and EXTERNAL table. Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16324&quot; title=&quot;Truncate table should not work when EXTERNAL property of table is true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-16324&quot;&gt;&lt;del&gt;HIVE-16324&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;Updating the patch which includes additional q file test and modifies the existing truncate table tests to work around &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16324&quot; title=&quot;Truncate table should not work when EXTERNAL property of table is true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-16324&quot;&gt;&lt;del&gt;HIVE-16324&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15946808" author="hiveqa" created="Wed, 29 Mar 2017 09:30:12 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12860975/HIVE-15880.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12860975/HIVE-15880.05.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10511 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestSSL - did not produce a TEST-*.xml file (likely timed out) (batchId=217)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[encryption_auto_purge_tables] (batchId=20)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=141)
org.apache.hadoop.hive.ql.TestAutoPurgeTables.org.apache.hadoop.hive.ql.TestAutoPurgeTables (batchId=211)
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=172)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4435/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4435/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4435/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4435/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4435/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4435/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12860975 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15947740" author="vihangk1" created="Wed, 29 Mar 2017 19:20:24 +0000"  >&lt;p&gt;encryption_auto_purge_tables.q should be run using TestEncryptedHDFSCliDriver. Fixed the unit test failure&lt;/p&gt;</comment>
                            <comment id="15948102" author="hiveqa" created="Wed, 29 Mar 2017 23:42:51 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12861084/HIVE-15880.06.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12861084/HIVE-15880.06.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10560 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[transform_acid] (batchId=18)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_count_distinct] (batchId=107)
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4453/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4453/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4453/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4453/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4453/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4453/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12861084 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15949540" author="vihangk1" created="Thu, 30 Mar 2017 18:22:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;Chaoyu Tang&lt;/a&gt; Can you please review? Thanks!&lt;/p&gt;</comment>
                            <comment id="15950182" author="ctang.ma" created="Fri, 31 Mar 2017 02:05:28 +0000"  >&lt;p&gt;The patch looks good to me, +1.&lt;/p&gt;</comment>
                            <comment id="15952311" author="ctang.ma" created="Sat, 1 Apr 2017 17:27:36 +0000"  >&lt;p&gt;Committed to 2.3.0 &amp;amp; 3.0.0. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;Vihang Karajgaonkar&lt;/a&gt; for the patch.&lt;/p&gt;</comment>
                            <comment id="15952549" author="lefty@hortonworks.com" created="Sun, 2 Apr 2017 06:06:59 +0000"  >&lt;p&gt;Doc note:  This needs to be documented, with version information, in the DML and DDL docs.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Synopsis.1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DML &amp;#8211; Inserting data into Hive Tables from queries &amp;#8211; Synopsis &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Synopsis.2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DML &amp;#8211; Writing data into the filesystem from queries &amp;#8211; Synopsis &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-TruncateTable&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DDL &amp;#8211; Truncate Table &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;See Drop Table for an example of how to document this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-DropTable&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DDL &amp;#8211; Drop Table &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added a TODOC2.3 label.&lt;/p&gt;</comment>
                            <comment id="15954149" author="vihangk1" created="Mon, 3 Apr 2017 20:52:21 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; for the links. I have updated the DML and DDL language guide for this in the INSERT OVERWRITE and TRUNCATE table section. This patch does not affect the &quot;DML &#8211; Writing data into the filesystem from queries &#8211; Synopsis&quot; link you gave above. Please let me know if you need any further changes with the text and I will be happy to help.&lt;/p&gt;</comment>
                            <comment id="16093316" author="vihangk1" created="Wed, 19 Jul 2017 15:56:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; Isnt the documentation provided above sufficient? I saw my name on you email on the dev-list regarding 2.3.0 release. May be I had to remove the TODOC label?&lt;/p&gt;</comment>
                            <comment id="16093903" author="lefty@hortonworks.com" created="Wed, 19 Jul 2017 22:27:30 +0000"  >&lt;p&gt;(Blush.)  My bad &amp;#8211; I meant to review your docs, then remove the TODOC label.  But my backlog kept growing and I fell behind, sorry.&lt;/p&gt;

&lt;p&gt;So I&apos;ll remove the label right now and review the docs later tonight.&lt;/p&gt;

&lt;p&gt;Congrats &amp;#8211; you&apos;re ahead of the peloton!&lt;/p&gt;</comment>
                            <comment id="16094248" author="lefty@hortonworks.com" created="Thu, 20 Jul 2017 06:10:19 +0000"  >&lt;p&gt;Good docs Vihang, thanks.&lt;/p&gt;

&lt;p&gt;I added some links from auto.purge in the list of table properties:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-listTableProperties&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DDL &amp;#8211; TBLPROPERTIES &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16485964" author="vgarg" created="Tue, 22 May 2018 23:58:28 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12761955">HIVE-9118</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12853833" name="HIVE-15880.01.patch" size="7229" author="vihangk1" created="Wed, 22 Feb 2017 00:16:07 +0000"/>
                            <attachment id="12860246" name="HIVE-15880.02.patch" size="22783" author="vihangk1" created="Thu, 23 Mar 2017 23:40:18 +0000"/>
                            <attachment id="12860290" name="HIVE-15880.03.patch" size="25230" author="vihangk1" created="Fri, 24 Mar 2017 06:08:36 +0000"/>
                            <attachment id="12860446" name="HIVE-15880.04.patch" size="23940" author="vihangk1" created="Fri, 24 Mar 2017 20:39:05 +0000"/>
                            <attachment id="12860975" name="HIVE-15880.05.patch" size="36292" author="vihangk1" created="Wed, 29 Mar 2017 01:15:22 +0000"/>
                            <attachment id="12861084" name="HIVE-15880.06.patch" size="36943" author="vihangk1" created="Wed, 29 Mar 2017 19:20:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2017 15:54:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39xiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15881] Use hive.exec.input.listing.max.threads variable name instead of mapred.dfsclient.parallelism.max</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15881</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The Utilities class has two methods, &lt;tt&gt;getInputSummary&lt;/tt&gt; and &lt;tt&gt;getInputPaths&lt;/tt&gt;, that use the variable &lt;tt&gt;mapred.dfsclient.parallelism.max&lt;/tt&gt; to get the summary of a list of input locations in parallel. These methods are Hive related, but the variable name does not look it is specific for Hive.&lt;/p&gt;

&lt;p&gt;Also, the above variable is not on HiveConf nor used anywhere else. I just found a reference on the Hadoop MR1 code.&lt;/p&gt;

&lt;p&gt;I&apos;d like to propose the deprecation of &lt;tt&gt;mapred.dfsclient.parallelism.max&lt;/tt&gt;, and use a different variable name, such as &lt;tt&gt;hive.get.input.listing.num.threads&lt;/tt&gt;, that reflects the intention of the variable. The removal of the old variable might happen on Hive 3.x&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042200">HIVE-15881</key>
            <summary>Use hive.exec.input.listing.max.threads variable name instead of mapred.dfsclient.parallelism.max</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spena">Sergio Pe&#241;a</assignee>
                                    <reporter username="spena">Sergio Pe&#241;a</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2017 22:34:55 +0000</created>
                <updated>Fri, 21 Jul 2017 18:36:15 +0000</updated>
                            <resolved>Mon, 27 Feb 2017 16:15:06 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Query Planning</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15861943" author="spena" created="Fri, 10 Feb 2017 22:39:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt; What do you think about this change? We have found this variable name a little confusing because it is a Hadoop-specific variable, and the Utilities is used just for Hive. The new and old variable will do the same thing during Hive 2.x.&lt;/p&gt;</comment>
                            <comment id="15861995" author="poeppt" created="Fri, 10 Feb 2017 23:21:33 +0000"  >&lt;p&gt;From what I can tell, saying&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;These methods are Hive related&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;isn&apos;t exactly true. &lt;/p&gt;

&lt;p&gt;I agree that the configuration value name is confusing, mainly because of the inclusion of &lt;tt&gt;mapred&lt;/tt&gt; (we support Tez too, right? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ). But it seems like the dfsclient (HDFS, S3a, etc) should actually have some level of control over the number of threads being used to access it. What if we have some &lt;tt&gt;FileSystem&lt;/tt&gt; implementation that, for some reason, is non-threadsafe? It should be able to limit threads. Renaming the config to something like &lt;tt&gt;hive.get.input.listing.num.threads&lt;/tt&gt; can hide what&apos;s &lt;em&gt;really&lt;/em&gt; happening here, which would be the dfsclient controlling its maximum allowable number of parallel accessors on its own.&lt;/p&gt;

&lt;p&gt;That being said, I can&apos;t find a link in open source Hadoop to this configuration value. Can you link it here? If it is actually only used by Hive across the entire Hadoop ecosystem, then I have no problem doing what you suggest. I just have a hard time believing that&apos;s the case.&lt;/p&gt;</comment>
                            <comment id="15862099" author="stakiar" created="Sat, 11 Feb 2017 00:57:05 +0000"  >&lt;p&gt;As far as I can tell, this config &lt;b&gt;is only used by Hive&lt;/b&gt; across the entire Hadoop ecosystem.&lt;/p&gt;

&lt;p&gt;The only reference I have found to it is here: &lt;a href=&quot;https://github.com/facebookarchive/hadoop-20/blob/master/src/mapred/org/apache/hadoop/mapred/FileInputFormat.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/facebookarchive/hadoop-20/blob/master/src/mapred/org/apache/hadoop/mapred/FileInputFormat.java&lt;/a&gt; - but this seems to be an archived version of a Facebook specific version of Hadoop. I&apos;ve checked Hadoop trunk a few times and have found no reference to this config. Even in old commits to trunk, I see no reference to this config.&lt;/p&gt;

&lt;p&gt;It was originally added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2051&quot; title=&quot;getInputSummary() to call FileSystem.getContentSummary() in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2051&quot;&gt;&lt;del&gt;HIVE-2051&lt;/del&gt;&lt;/a&gt; by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sdong&quot; class=&quot;user-hover&quot; rel=&quot;sdong&quot;&gt;Siying Dong&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15864325" author="poeppt" created="Mon, 13 Feb 2017 19:59:34 +0000"  >&lt;p&gt;Spent a little more time looking into this, found the same thing as Sahil. I would like to suggest some edits:&lt;/p&gt;

&lt;p&gt;I would change the naming of the variable. As I said above, &lt;tt&gt;hive.get.input.listing.num.threads&lt;/tt&gt; isn&apos;t exactly clear, and because this is used for two things (&lt;tt&gt;getInputSummary&lt;/tt&gt; and &lt;tt&gt;getInputPaths&lt;/tt&gt;) I would like to propose a different way of doing this.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Two configuration values, one for each usage:
	&lt;ul&gt;
		&lt;li&gt;&lt;tt&gt;hive.exec.input.paths.num.threads&lt;/tt&gt; for &lt;tt&gt;getInputPaths&lt;/tt&gt;&lt;/li&gt;
		&lt;li&gt;&lt;tt&gt;hive.exec.input.summary.num.threads&lt;/tt&gt; for &lt;tt&gt;getInputSummary&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Bonus is that these follow existing &lt;tt&gt;HiveConf&lt;/tt&gt; patterns&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Other questions that should be asked:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;what is the default value?
	&lt;ul&gt;
		&lt;li&gt;I&apos;m looking through &lt;tt&gt;HiveConf&lt;/tt&gt;, but not seeing any other config value that might suffice. Maybe we just use 1?&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, I&apos;m a fan of &apos;0&apos; meaning &apos;maximum number allowable&apos; with these types of config values, but that can be up for discussion. We would need a way to figure out what &quot;max allowable&quot; actually &lt;em&gt;means&lt;/em&gt;, either through another configuration value or based on the OS structure? I don&apos;t know.&lt;/p&gt;</comment>
                            <comment id="15864477" author="yalovyyi" created="Mon, 13 Feb 2017 21:27:01 +0000"  >&lt;p&gt;I think for Utilities#getInputSummary the property name should be &quot;hive.exec.input.summary.max.threads&quot;, to be consistent with other properties in HiveConf. This value is not used as is to create a thread pool, it is only an upper limit for the thread pool size. If number of input paths is less than hive.exec.input.summary.max.threads it will be used instead. It means the actual number of threads will be &amp;lt;= hive.exec.input.summary.max.threads.&lt;/p&gt;</comment>
                            <comment id="15864696" author="spena" created="Mon, 13 Feb 2017 23:44:39 +0000"  >&lt;p&gt;Thanks guys for giving more ideas. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=etf&quot; class=&quot;user-hover&quot; rel=&quot;etf&quot;&gt;Illya Yalovyy&lt;/a&gt; I like that idea of the &quot;max.threads&quot; option. I will implement it in that way to avoid creating a threadpool with more threads than the number of input locations.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; I like those names better. I wonder if we should have 1 variable config for both instead of one per method. Don&apos;t you guys get messy with too many configurations variables for the number of threads?&lt;/p&gt;</comment>
                            <comment id="15864718" author="poeppt" created="Mon, 13 Feb 2017 23:55:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; Good point. To take into account everyone&apos;s ideas, maybe something like &lt;tt&gt;hive.exec.input.listing.max.threads&lt;/tt&gt;? It&apos;s tough, but I&apos;m not sure there will be one obvious best answer, I think each one will have pros and cons compared to any other. &lt;/p&gt;

&lt;p&gt;Agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt;&apos;s suggestion as well. What would we want default to be? Looking through &lt;tt&gt;HiveConf&lt;/tt&gt;, the different &lt;tt&gt;*.max.threads&lt;/tt&gt; values are:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;METASTORESERVERMAXTHREADS(&quot;hive.metastore.server.max.threads&quot;, 1000,&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;HIVE_SERVER2_WEBUI_MAX_THREADS(&quot;hive.server2.webui.max.threads&quot;, 50, &quot;The max HiveServer2 WebUI threads&quot;),&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;LLAP_DAEMON_AM_REPORTER_MAX_THREADS(&quot;hive.llap.daemon.am-reporter.max.threads&quot;, 4,&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So.. all over the place. How would we decide on a suitable default? Or maybe, the default is &quot;as many as possible&quot; and it can be lowered by users themselves?&lt;/p&gt;</comment>
                            <comment id="15866824" author="spena" created="Tue, 14 Feb 2017 22:21:06 +0000"  >&lt;p&gt;Great, thanks for the suggestions. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; Although I like your idea of the &apos;maximum number allowable&apos; using 0, I think we should continue using the 0 as using only one thread for the work. The rest of the configuration variables for threads use 0 to disable the use of threads. Let&apos;s keep it consistent.&lt;/p&gt;

&lt;p&gt;I will submit a patch with the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;New variable name &lt;tt&gt;hive.exec.input.listing.max.threads&lt;/tt&gt; for getInputSummary and getInputPaths&lt;/li&gt;
	&lt;li&gt;Mark &lt;tt&gt;mapred.dfsclient.parallelism.max&lt;/tt&gt; as deprecated, but continue using it.&lt;/li&gt;
	&lt;li&gt;Default the value for &lt;tt&gt;hive.exec.input.listing.max.threads&lt;/tt&gt; to 0 (no threads or just one thread). I think we should keep it disable because&lt;br/&gt;
  on HDFS there&apos;s no benefit of using threads, and we can multiple RPC connections with the namenode.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15866886" author="spena" created="Tue, 14 Feb 2017 22:59:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=etf&quot; class=&quot;user-hover&quot; rel=&quot;etf&quot;&gt;Illya Yalovyy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Coul you review the patch?&lt;/p&gt;</comment>
                            <comment id="15867321" author="hiveqa" created="Wed, 15 Feb 2017 06:17:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852686/HIVE-15881.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852686/HIVE-15881.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3558/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3558/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3558/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3558/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3558/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852686 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15876708" author="spena" created="Tue, 21 Feb 2017 21:02:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; I attached a new patch here and on RB addressing your comments.&lt;/p&gt;</comment>
                            <comment id="15876900" author="poeppt" created="Tue, 21 Feb 2017 22:42:18 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;, updated the RB. Just one question, otherwise non-binding +1 pending QA &lt;/p&gt;</comment>
                            <comment id="15877112" author="hiveqa" created="Wed, 22 Feb 2017 00:43:19 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853804/HIVE-15881.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853804/HIVE-15881.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 16 failed/errored test(s), 10252 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_14] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_15] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucket_map_join_tez2] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucketmapjoin8] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby5_map_skew] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join_reorder] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[sample1] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[skewjoinopt4] (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union10] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union34] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_count_distinct] (batchId=106)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgress (batchId=211)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3677/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3677/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3677/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3677/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3677/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3677/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 16 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853804 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15879208" author="hiveqa" created="Wed, 22 Feb 2017 20:50:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853997/HIVE-15881.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853997/HIVE-15881.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10253 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgress (batchId=211)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3698/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3698/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3698/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3698/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3698/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3698/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853997 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15879459" author="ychena" created="Wed, 22 Feb 2017 23:24:39 +0000"  >&lt;p&gt;PATCH 3 looks good.  +1&lt;br/&gt;
Please make sure the test failures are not related.&lt;/p&gt;</comment>
                            <comment id="15881120" author="spena" created="Thu, 23 Feb 2017 19:58:00 +0000"  >&lt;p&gt;New patch that added a new unit tests &amp;amp; use SizeValidator on the HiveConf variable to limit the number of threads (min: 0, max: 1024)&lt;/p&gt;</comment>
                            <comment id="15884127" author="hiveqa" created="Sat, 25 Feb 2017 07:26:33 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854267/HIVE-15881.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854267/HIVE-15881.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3774/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3774/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3774/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3774/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3774/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3774/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-25 07:26:29.532
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-3774/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-25 07:26:29.534
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 2f6f6bd HIVE-15951 : Make sure base persist directory is unique and deleted (Slim Bouguerra via Ashutosh Chauhan)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 2f6f6bd HIVE-15951 : Make sure base persist directory is unique and deleted (Slim Bouguerra via Ashutosh Chauhan)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-02-25 07:26:33.301
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java: No such file or directory
error: a/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java: No such file or directory
error: a/ql/src/test/org/apache/hadoop/hive/ql/exec/TestUtilities.java: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854267 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15885117" author="spena" created="Mon, 27 Feb 2017 04:23:02 +0000"  >&lt;p&gt;Patch rebased.&lt;/p&gt;</comment>
                            <comment id="15885178" author="hiveqa" created="Mon, 27 Feb 2017 05:47:57 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854812/HIVE-15881.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854812/HIVE-15881.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10268 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgress (batchId=211)
org.apache.hive.jdbc.TestJdbcDriver2.testSelectExecAsync2 (batchId=215)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3803/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3803/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3803/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3803/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3803/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3803/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854812 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15886041" author="spena" created="Mon, 27 Feb 2017 16:15:06 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yalovyyi&quot; class=&quot;user-hover&quot; rel=&quot;yalovyyi&quot;&gt;Illya Yalovyy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;Sahil Takiar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ychena&quot; class=&quot;user-hover&quot; rel=&quot;ychena&quot;&gt;Yongzhi Chen&lt;/a&gt; for your review. I committed this to master. Tests are not related and they are already reported as flaky.&lt;/p&gt;</comment>
                            <comment id="15887470" author="lefty@hortonworks.com" created="Tue, 28 Feb 2017 07:31:13 +0000"  >&lt;p&gt;Doc note:  This adds &lt;b&gt;hive.exec.input.listing.max.threads&lt;/b&gt; to HiveConf.java, so it needs to be documented in the wiki.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14270&quot; title=&quot;Write temporary data to HDFS when doing inserts on tables located on S3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14270&quot;&gt;&lt;del&gt;HIVE-14270&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15121&quot; title=&quot;Last MR job in Hive should be able to write to a different scratch directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15121&quot;&gt;HIVE-15121&lt;/a&gt; for other blobstore configs.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Hive Configuration Properties &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added a TODOC2.2 label.&lt;/p&gt;</comment>
                            <comment id="15888510" author="spena" created="Tue, 28 Feb 2017 17:31:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt; I added a few configurations on the wiki used for blobstore.&lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Blobstore(i.e.AmazonS3)&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Blobstore(i.e.AmazonS3)&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15899208" author="lefty@hortonworks.com" created="Tue, 7 Mar 2017 10:41:56 +0000"  >&lt;p&gt;Thanks for the documentation, Sergio.  Here&apos;s a link to &lt;b&gt;hive.exec.input.listing.max.threads&lt;/b&gt;:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.exec.input.listing.max.threads&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; hive.exec.input.listing.max.threads &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Removing the TODOC2.2 label.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852686" name="HIVE-15881.1.patch" size="8214" author="spena" created="Tue, 14 Feb 2017 22:56:18 +0000"/>
                            <attachment id="12853804" name="HIVE-15881.2.patch" size="15754" author="spena" created="Tue, 21 Feb 2017 21:02:13 +0000"/>
                            <attachment id="12853997" name="HIVE-15881.3.patch" size="15756" author="spena" created="Wed, 22 Feb 2017 16:28:52 +0000"/>
                            <attachment id="12854264" name="HIVE-15881.4.patch" size="20245" author="spena" created="Thu, 23 Feb 2017 19:37:23 +0000"/>
                            <attachment id="12854267" name="HIVE-15881.5.patch" size="20288" author="spena" created="Thu, 23 Feb 2017 19:58:00 +0000"/>
                            <attachment id="12854812" name="HIVE-15881.6.patch" size="19957" author="spena" created="Mon, 27 Feb 2017 04:23:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2017 23:21:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39xkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15882] HS2 generating high memory pressure with many partitions and concurrent queries</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15882</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I&apos;ve created a Hive table with 2000 partitions, each backed by two files, with one row in each file. When I execute some number of concurrent queries against this table, e.g. as follows&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; i in `seq 1 50`; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000 -n admin -p admin -e &lt;span class=&quot;code-quote&quot;&gt;&quot;select count(i_f_1) from misha_table;&quot;&lt;/span&gt; &amp;amp; done&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it results in a big memory spike. With 20 queries I caused an OOM in a HS2 server with -Xmx200m and with 50 queries - in the one with -Xmx500m.&lt;/p&gt;

&lt;p&gt;I am attaching the results of jxray (www.jxray.com) analysis of a heap dump that was generated in the 50queries/500m heap scenario. It suggests that there are several opportunities to reduce memory pressure with not very invasive changes to the code:&lt;/p&gt;

&lt;p&gt;1. 24.5% of memory is wasted by duplicate strings (see section 6). With String.intern() calls added in the ~10 relevant places in the code, this overhead can be highly reduced.&lt;/p&gt;

&lt;p&gt;2. Almost 20% of memory is wasted due to various suboptimally used collections (see section 8). There are many maps and lists that are either empty or have just 1 element. By modifying the code that creates and populates these collections, we may likely save 5-10% of memory.&lt;/p&gt;

&lt;p&gt;3. Almost 20% of memory is used by instances of java.util.Properties. It looks like these objects are highly duplicate, since for each Partition each concurrently running query creates its own copy of Partion, PartitionDesc and Properties. Thus we have nearly 100,000 (50 queries * 2,000 partitions) Properties in memory. By interning/deduplicating these objects we may be able to save perhaps 15% of memory.&lt;/p&gt;

&lt;p&gt;So overall, I think there is a good chance to reduce HS2 memory consumption in this scenario by ~40%.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042255">HIVE-15882</key>
            <summary>HS2 generating high memory pressure with many partitions and concurrent queries</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="misha@cloudera.com">Misha Dmitriev</assignee>
                                    <reporter username="misha@cloudera.com">Misha Dmitriev</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Feb 2017 04:19:12 +0000</created>
                <updated>Wed, 11 Oct 2017 13:31:10 +0000</updated>
                            <resolved>Thu, 2 Mar 2017 05:29:25 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="15866817" author="misha@cloudera.com" created="Tue, 14 Feb 2017 22:17:12 +0000"  >&lt;p&gt;The supplied patch de-dupes most of the duplicate strings.&lt;/p&gt;</comment>
                            <comment id="15866879" author="misha@cloudera.com" created="Tue, 14 Feb 2017 22:56:18 +0000"  >&lt;p&gt;For convenience, I&apos;ve created a code review here: &lt;a href=&quot;https://reviews.apache.org/r/56687/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/56687/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15867157" author="hiveqa" created="Wed, 15 Feb 2017 03:38:34 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852678/HIVE-15882.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852678/HIVE-15882.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3554/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3554/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3554/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3554/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3554/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3554/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852678 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15868357" author="misha@cloudera.com" created="Wed, 15 Feb 2017 18:55:49 +0000"  >&lt;p&gt;I&apos;ve checked the failed tests. They either pass for me locally, or fail in master without any changes: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3569/#showFailuresLink&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3569/#showFailuresLink&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15871561" author="lirui" created="Fri, 17 Feb 2017 09:53:49 +0000"  >&lt;p&gt;I also noticed lots of duplicated Strings in &lt;tt&gt;ListSinkOperator::res&lt;/tt&gt; when looking into an OOM issue. I guess it happens when there&apos;re lots of concurrent connections to the HS2 and lots of the query results are duplicated.&lt;/p&gt;</comment>
                            <comment id="15879174" author="alangates" created="Wed, 22 Feb 2017 20:35:56 +0000"  >&lt;p&gt;Have you had a chance to rerun jxray tool with the patch applied?  It would be interesting to see how much total memory is saved by these changes and what the next set of Strings, properties, and collections are that need tackled.&lt;/p&gt;</comment>
                            <comment id="15879349" author="misha@cloudera.com" created="Wed, 22 Feb 2017 22:09:29 +0000"  >&lt;p&gt;Yes, I did take a heap dump and rerun the tool after applying the patch (actually, two patches: the one mentioned in this ticket so far and another one, that interns some data within PartitionDesc objects). The results are predictable: the sources of memory waste that I fixed went away, though some other remain.&lt;/p&gt;

&lt;p&gt;As for how much memory is saved: this question is more tricky than it sounds. In general, the more memory you give to the Java app (the higher is -Xmx), the more it would use (it would just run the GC less frequently). So you have to measure the size of &quot;live set&quot; (what remains after full GC), but this is more difficult. In my benchmark, with its high concurrency, I suspect it&apos;s further complicated by the fact that higher -Xmx will allow more concurrency, and thus even the live set will probably grow. So far I think that the metric that would be reasonably accurate is how many more concurrent requests I will be able to run in this benchmark before OOMing its again. Any other suggestions are welcome.&lt;/p&gt;</comment>
                            <comment id="15879917" author="lirui" created="Thu, 23 Feb 2017 05:50:27 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misha%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;misha@cloudera.com&quot;&gt;Misha Dmitriev&lt;/a&gt;, I guess one possible issue of String::intern is it takes extra time to search the string pool. And I found some blogs suggesting a bigger value for -XX:StringTableSize to mitigate it. I&apos;m wondering if there&apos;s any other drawbacks you can think of for the intensive use of String::intern? Have you done any benchmark to measure performance in term of query time?&lt;/p&gt;</comment>
                            <comment id="15879949" author="misha@cloudera.com" created="Thu, 23 Feb 2017 06:14:18 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, this is a legitimate concern. Regarding the performance of String::intern, I suggest to check this article: &lt;a href=&quot;http://java-performance.info/string-intern-in-java-6-7-8/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java-performance.info/string-intern-in-java-6-7-8/&lt;/a&gt; In summary, looks like the default size of the internal string table (~60,000) is sufficient for any reasonable application (one that uses strings to represent some sensible, &quot;human words&quot; data, as opposed to say each separate integer number in the 0..2^31 range). And its performance looks very reasonable. So far I haven&apos;t measure its impact in the context of Hive. But based on what I see Hive (and Hadoop) is doing internally, like tons of serialization/deserialization, disk read/write and other time-consuming operations - my impression is that the CPU overhead of string interning should be negligible compared to that. Also, without string interning, queries may generate tons of garbage, and collecting it may slow down the application to near-zero speed - as it happens in my own benchmark.&lt;/p&gt;

&lt;p&gt;Still I guess it would make sense to try my benchmark with much bigger heap, when GC doesn&apos;t kill it, and see if by any chance string interning affects performance negatively. I&apos;ll do that and will publish the results here.&lt;/p&gt;</comment>
                            <comment id="15881203" author="stakiar" created="Thu, 23 Feb 2017 20:29:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misha%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;misha@cloudera.com&quot;&gt;Misha Dmitriev&lt;/a&gt; you mentioned this earlier, but it would be good to see how many more concurrent requests can be supported before vs. after these changes, for a fixed size heap.&lt;/p&gt;</comment>
                            <comment id="15881244" author="misha@cloudera.com" created="Thu, 23 Feb 2017 20:58:08 +0000"  >&lt;p&gt;I&apos;ve measured how much memory is saved with my change. It turned out that it&apos;s actually more difficult/time-consuming to obtain the &quot;threshold&quot; number of concurrent requests that my benchmark can sustain with the same small heap (500M). So I switched to a different approach. I set the heap size to a high number (3G), sufficient for my benchmark to pass without any GC issues with or without my changes. Then I ran it first without, then with my changes, measuring the live set of the heap size every 4 sec. That is, the size of live objects immediately after full GC. I&apos;ve done it using the following script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PID=$1
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; [ &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; ] ; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
  # Force full GC 
  sudo -u hive jmap -histo:live $PID &amp;gt; /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  # Get the total amount of memory used
  sudo -u hive jstat -gc $PID | tail -n 1 | awk &lt;span class=&quot;code-quote&quot;&gt;&apos;{split($0,a,&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;); sum=a[3]+a[4]+a[6]+a[8]; print sum}&apos;&lt;/span&gt;
  sleep 4
done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then I checked the highest number printed by this script, i.e. the biggest live heap size when running my benchmark. I ended up with:&lt;/p&gt;

&lt;p&gt;1173M - without my changes&lt;br/&gt;
743M - with my changes&lt;/p&gt;

&lt;p&gt;That means that my changes (String interning plus interning Properties objects in PartitionDesc, which will be posted in a separate patch) collectively save 37% of memory.&lt;/p&gt;</comment>
                            <comment id="15881337" author="vihangk1" created="Thu, 23 Feb 2017 21:46:14 +0000"  >&lt;p&gt;37% is a great improvement &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misha%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;misha@cloudera.com&quot;&gt;Misha Dmitriev&lt;/a&gt;. Have you already created another upstream JIRA for the other patch as well?&lt;/p&gt;</comment>
                            <comment id="15881399" author="misha@cloudera.com" created="Thu, 23 Feb 2017 22:17:25 +0000"  >&lt;p&gt;I&apos;ve just measured the CPU performance impact of my changes using the same benchmark with the same high heap size (-Xmx3g) to exclude effects of excessive GC. I&apos;ve measured the total time spent in all beeline clients. To do that, I ran beeline clients with /usr/bin/time as&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; i in `seq 1 50`; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; /usr/bin/time -p -o hive-timings-withchanges.txt --append beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000 -n admin -p admin -e &lt;span class=&quot;code-quote&quot;&gt;&quot;select count(i_f_1) from misha_table;&quot;&lt;/span&gt; &amp;amp; done&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I then calculated the sum of all timings in the file with another fun bash script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sum=0; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; s in `grep real hive-timings-withchanges.txt`; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; t=${s/real/}; t=${t/\.*/}; echo $t; sum=$((sum+t)); done; echo $sum
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;before my changes: 17401s&lt;/li&gt;
	&lt;li&gt;after my changes: 17012s&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, my changes have no negative CPU impact, and may even result in 1-2% CPU time improvement. This is not surprising given that my changes reduce the number of objects in memory, and thus ultimately reduce GC time.&lt;/p&gt;

&lt;p&gt;Do I really need another JIRA ticket to post a patch that covers my other change (interning Properties objects in PartitionDesc)?&lt;/p&gt;</comment>
                            <comment id="15881733" author="lirui" created="Fri, 24 Feb 2017 01:31:18 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misha%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;misha@cloudera.com&quot;&gt;Misha Dmitriev&lt;/a&gt; for the benchmark results. It looks promising. Would you mind create an RB entry for your patch? You can update to combine your other patch if you&apos;d like to have it in this JIRA.&lt;/p&gt;</comment>
                            <comment id="15881788" author="misha@cloudera.com" created="Fri, 24 Feb 2017 02:00:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt; sure - the RB for the first change (string interning), that matches this patch, has already been created. See &lt;a href=&quot;https://reviews.apache.org/r/56687/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/56687/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15882157" author="lirui" created="Fri, 24 Feb 2017 07:45:04 +0000"  >&lt;p&gt;The patch looks good to me overall. I left some minor comments on the RB.&lt;/p&gt;</comment>
                            <comment id="15883755" author="misha@cloudera.com" created="Fri, 24 Feb 2017 23:36:00 +0000"  >&lt;p&gt;Uploaded the second version of the patch, with comments made in reviewboard addressed.&lt;/p&gt;</comment>
                            <comment id="15884175" author="hiveqa" created="Sat, 25 Feb 2017 10:04:07 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854614/HIVE-15882.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854614/HIVE-15882.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10259 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3777/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3777/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3777/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3777/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3777/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854614 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15886394" author="misha@cloudera.com" created="Mon, 27 Feb 2017 19:44:03 +0000"  >&lt;p&gt;Attaching the 3rd version of the patch, addressing the recent minor review comments.&lt;/p&gt;</comment>
                            <comment id="15886625" author="hiveqa" created="Mon, 27 Feb 2017 22:07:22 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12854956/HIVE-15882.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12854956/HIVE-15882.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10273 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3818/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3818/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3818/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3818/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3818/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3818/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12854956 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15886651" author="misha@cloudera.com" created="Mon, 27 Feb 2017 22:26:11 +0000"  >&lt;p&gt;The same tests fail in other builds, so they are not due to my changes.&lt;/p&gt;</comment>
                            <comment id="15888799" author="misha@cloudera.com" created="Tue, 28 Feb 2017 20:16:42 +0000"  >&lt;p&gt;Addressed the most recent Rui&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="15888841" author="misha@cloudera.com" created="Tue, 28 Feb 2017 20:49:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt; thank you for your constructive feedback, I hope I&apos;ve addressed all of it. When you have time, can I get a +1 from you?&lt;/p&gt;</comment>
                            <comment id="15888883" author="hiveqa" created="Tue, 28 Feb 2017 21:20:13 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855209/HIVE-15882.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855209/HIVE-15882.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10297 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgress (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3846/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3846/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3846/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3846/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3846/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3846/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855209 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15889345" author="lirui" created="Wed, 1 Mar 2017 02:15:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misha%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;misha@cloudera.com&quot;&gt;Misha Dmitriev&lt;/a&gt; for the update. +1&lt;/p&gt;</comment>
                            <comment id="15891439" author="lirui" created="Thu, 2 Mar 2017 01:46:26 +0000"  >&lt;p&gt;I&apos;ll commit shortly if there&apos;s no further comments.&lt;/p&gt;</comment>
                            <comment id="15891656" author="lirui" created="Thu, 2 Mar 2017 05:29:25 +0000"  >&lt;p&gt;Committed to master. Thanks Misha for the contribution!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13049826">HIVE-16166</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13047446">HIVE-16079</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12852678" name="HIVE-15882.01.patch" size="33505" author="misha@cloudera.com" created="Tue, 14 Feb 2017 22:15:38 +0000"/>
                            <attachment id="12854614" name="HIVE-15882.02.patch" size="34301" author="misha@cloudera.com" created="Fri, 24 Feb 2017 23:36:00 +0000"/>
                            <attachment id="12854956" name="HIVE-15882.03.patch" size="34157" author="misha@cloudera.com" created="Mon, 27 Feb 2017 19:44:03 +0000"/>
                            <attachment id="12855209" name="HIVE-15882.04.patch" size="34601" author="misha@cloudera.com" created="Tue, 28 Feb 2017 20:16:42 +0000"/>
                            <attachment id="12852179" name="hs2-crash-2000p-500m-50q.txt" size="66694" author="misha@cloudera.com" created="Sat, 11 Feb 2017 04:20:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Feb 2017 03:38:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39xwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15883] HBase mapped table in Hive insert fail for decimal</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15883</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;CREATE TABLE hbase_table (&lt;br/&gt;
id int,&lt;br/&gt;
balance decimal(15,2))&lt;br/&gt;
ROW FORMAT DELIMITED&lt;br/&gt;
COLLECTION ITEMS TERMINATED BY &apos;~&apos;&lt;br/&gt;
STORED BY &apos;org.apache.hadoop.hive.hbase.HBaseStorageHandler&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
&quot;hbase.columns.mapping&quot;=&quot;:key,cf:balance#b&quot;);&lt;/p&gt;

&lt;p&gt;insert into hbase_table values (1,1);&lt;/p&gt;


&lt;hr /&gt;
&lt;p&gt;Diagnostic Messages for this Task:&lt;br/&gt;
Error: java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;tmp_values_col1&quot;:&quot;1&quot;,&quot;tmp_values_col2&quot;:&quot;1&quot;}
&lt;p&gt;        at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.map(ExecMapper.java:179)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:54)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:453)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)&lt;br/&gt;
        at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:164)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1783)&lt;br/&gt;
        at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;tmp_values_col1&quot;:&quot;1&quot;,&quot;tmp_values_col2&quot;:&quot;1&quot;}
&lt;p&gt;        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:507)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.map(ExecMapper.java:170)&lt;br/&gt;
        ... 8 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: org.apache.hadoop.hive.serde2.SerDeException: java.lang.RuntimeException: Hive internal error.&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.processOp(FileSinkOperator.java:733)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:815)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:815)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:97)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapOperator$MapOpCtx.forward(MapOperator.java:157)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:497)&lt;br/&gt;
        ... 9 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.serde2.SerDeException: java.lang.RuntimeException: Hive internal error.&lt;br/&gt;
        at org.apache.hadoop.hive.hbase.HBaseSerDe.serialize(HBaseSerDe.java:286)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.processOp(FileSinkOperator.java:668)&lt;br/&gt;
        ... 15 more&lt;br/&gt;
Caused by: java.lang.RuntimeException: Hive internal error.&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.lazy.LazyUtils.writePrimitive(LazyUtils.java:328)&lt;br/&gt;
        at org.apache.hadoop.hive.hbase.HBaseRowSerializer.serialize(HBaseRowSerializer.java:220)&lt;br/&gt;
        at org.apache.hadoop.hive.hbase.HBaseRowSerializer.serializeField(HBaseRowSerializer.java:194)&lt;br/&gt;
        at org.apache.hadoop.hive.hbase.HBaseRowSerializer.serialize(HBaseRowSerializer.java:118)&lt;br/&gt;
        at org.apache.hadoop.hive.hbase.HBaseSerDe.serialize(HBaseSerDe.java:282)&lt;br/&gt;
        ... 16 more &lt;/p&gt;</description>
                <environment></environment>
        <key id="13042256">HIVE-15883</key>
            <summary>HBase mapped table in Hive insert fail for decimal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ngangam">Naveen Gangam</assignee>
                                    <reporter username="ngangam">Naveen Gangam</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Feb 2017 04:20:49 +0000</created>
                <updated>Tue, 22 May 2018 23:57:55 +0000</updated>
                            <resolved>Tue, 12 Dec 2017 22:16:57 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Hive</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15862224" author="ngangam" created="Sat, 11 Feb 2017 05:21:56 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; insert into hbase_table values (2,2);
Query ID = hive_20170210142121_a966b2a7-e371-4cba-a9e9-dae2554cec42
Total jobs = 1
Launching Job 1 out of 1
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of reduce tasks is set to 0 since there&apos;s no reduce &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;
Starting Job = job_1486734052415_0010, Tracking URL = &amp;lt;snip&amp;gt;
Hadoop job information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Stage-0: number of mappers: 1; number of reducers: 0
2017-02-10 14:21:54,959 Stage-0 map = 0%,  reduce = 0%
2017-02-10 14:22:05,579 Stage-0 map = 100%,  reduce = 0%, Cumulative CPU 3.87 sec
MapReduce Total cumulative CPU time: 3 seconds 870 msec
Ended Job = job_1486734052415_0010
MapReduce Jobs Launched: 
Stage-Stage-0: Map: 1   Cumulative CPU: 3.87 sec   HDFS Read: 4065 HDFS Write: 0 SUCCESS
Total MapReduce CPU Time Spent: 3 seconds 870 msec
OK
Time taken: 24.433 seconds
select * from hbase_table;
OK
1	1
2	2
Time taken: 2.426 seconds, Fetched: 2 row(s)
hive&amp;gt; insert into hbase_decimalbinary values (11, 11.11);
Query ID = hive_20170210200404_6e0a62ed-a587-4cd5-a105-524f3838f4a9
Total jobs = 1
Launching Job 1 out of 1
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of reduce tasks is set to 0 since there&apos;s no reduce &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;
Starting Job = job_1486734052415_0032, Tracking URL = &amp;lt;snip&amp;gt;
Hadoop job information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Stage-0: number of mappers: 1; number of reducers: 0
2017-02-10 20:04:29,894 Stage-0 map = 0%,  reduce = 0%
2017-02-10 20:04:42,333 Stage-0 map = 100%,  reduce = 0%, Cumulative CPU 3.68 sec
MapReduce Total cumulative CPU time: 3 seconds 680 msec
Ended Job = job_1486734052415_0032
MapReduce Jobs Launched: 
Stage-Stage-0: Map: 1   Cumulative CPU: 3.68 sec   HDFS Read: 4070 HDFS Write: 0 SUCCESS
Total MapReduce CPU Time Spent: 3 seconds 680 msec
OK
Time taken: 25.385 seconds
hive&amp;gt; select * from hbase_table;
OK
1	1
11	11.11
2	2
Time taken: 0.394 seconds, Fetched: 3 row(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15862274" author="hiveqa" created="Sat, 11 Feb 2017 07:09:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852182/HIVE-15883.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852182/HIVE-15883.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10246 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3501/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3501/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3501/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3501/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3501/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3501/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852182 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15868501" author="ngangam" created="Wed, 15 Feb 2017 20:19:51 +0000"  >&lt;p&gt;the test failures do not appear to be related the proposed patch.&lt;/p&gt;</comment>
                            <comment id="15868504" author="aihuaxu" created="Wed, 15 Feb 2017 20:21:42 +0000"  >&lt;p&gt;The change looks good to me. Can we add a unit test to cover this?&lt;/p&gt;</comment>
                            <comment id="16072145" author="arturt" created="Mon, 3 Jul 2017 09:06:46 +0000"  >&lt;p&gt;Possibly related issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17002&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-17002&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16072211" author="hiveqa" created="Mon, 3 Jul 2017 10:03:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852182/HIVE-15883.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852182/HIVE-15883.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10830 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=99)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5871/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5871/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5871/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5871/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5871/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5871/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852182 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16250871" author="ashutoshc" created="Tue, 14 Nov 2017 05:07:07 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16251617" author="ngangam" created="Tue, 14 Nov 2017 16:09:18 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;. I will rebase the patch. Do you know if it is possible to add a testcase for this as it would need HBase for it as well? Thanks&lt;/p&gt;</comment>
                            <comment id="16251776" author="ashutoshc" created="Tue, 14 Nov 2017 17:25:38 +0000"  >&lt;p&gt;We have tests for hbase-handler. Both junit as well qfile. You may use either.&lt;/p&gt;</comment>
                            <comment id="16282567" author="ngangam" created="Thu, 7 Dec 2017 21:32:43 +0000"  >&lt;p&gt;Will upload new one today.&lt;/p&gt;</comment>
                            <comment id="16282568" author="ngangam" created="Thu, 7 Dec 2017 21:33:36 +0000"  >&lt;p&gt;Attaching a new patch. a) rebased to latest source b) Adding qtest for the hbase CLI driver.&lt;/p&gt;</comment>
                            <comment id="16282569" author="ngangam" created="Thu, 7 Dec 2017 21:34:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; Can you please re-review the patch? I just added a test case. No other code changes. Thanks&lt;/p&gt;</comment>
                            <comment id="16282821" author="aihuaxu" created="Fri, 8 Dec 2017 00:44:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;Naveen Gangam&lt;/a&gt; I will wait for the test to pass. I remember we need to specify hbase.mapreduce.hfileoutputformat.table.name for hbase table now.&lt;/p&gt;</comment>
                            <comment id="16283680" author="ngangam" created="Fri, 8 Dec 2017 14:52:39 +0000"  >&lt;p&gt;Patch has not been picked by pre-commit probably because of the ptest issues yesterday. Will re-submit.&lt;/p&gt;</comment>
                            <comment id="16283805" author="hiveqa" created="Fri, 8 Dec 2017 16:34:05 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; findbugs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Findbugs executables are not available. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; mvndep &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  1m 21s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Maven dependency ordering for branch &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  5m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 21s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 26s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; mvndep &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;  0m 21s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Maven dependency ordering for patch &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 38s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m 13s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; serde: The patch generated 1 new + 0 unchanged - 0 fixed = 1 total (was 0) &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 26s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; asflicense &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 12s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not generate ASF License warnings. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 11m 13s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  asflicense  javac  javadoc  findbugs  checkstyle  compile  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; maven &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /data/hiveptest/working/yetus/dev-support/hive-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 36f0d89 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_111 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; checkstyle &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-8144/yetus/diff-checkstyle-serde.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-8144/yetus/diff-checkstyle-serde.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: serde hbase-handler U: . &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://104.198.109.242/logs//PreCommit-HIVE-Build-8144/yetus.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs//PreCommit-HIVE-Build-8144/yetus.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus    &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16283874" author="hiveqa" created="Fri, 8 Dec 2017 17:24:59 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12901246/HIVE-15883.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12901246/HIVE-15883.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 11515 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union36] (batchId=88)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[hybridgrace_hashjoin_2] (batchId=157)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=165)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sysdb] (batchId=160)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[subquery_multi] (batchId=113)
org.apache.hadoop.hive.ql.parse.TestReplicationScenarios.testConstraints (batchId=226)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/8144/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/8144/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/8144/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/8144/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-8144/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-8144/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12901246 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16286139" author="ngangam" created="Mon, 11 Dec 2017 16:26:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt; The test failures do no appear related to the fix.&lt;br/&gt;
The new test added as part of this fix seems to have passed as well. &lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/8144/testReport/org.apache.hadoop.hive.cli/TestHBaseCliDriver/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/8144/testReport/org.apache.hadoop.hive.cli/TestHBaseCliDriver/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16286368" author="aihuaxu" created="Mon, 11 Dec 2017 18:07:20 +0000"  >&lt;p&gt;Yeah. The test passes. I will use &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-18202&quot; title=&quot;Automatically migrate hbase.table.name to hbase.mapreduce.hfileoutputformat.table.name for hbase-based table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-18202&quot;&gt;&lt;del&gt;HIVE-18202&lt;/del&gt;&lt;/a&gt; to find why you don&apos;t need to specify hbase.mapreduce.hfileoutputformat.table.name. &lt;/p&gt;

&lt;p&gt;But your change looks good. +1.&lt;/p&gt;</comment>
                            <comment id="16288366" author="ngangam" created="Tue, 12 Dec 2017 22:16:44 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;Aihua Xu&lt;/a&gt;. Fix has been pushed to master.&lt;/p&gt;</comment>
                            <comment id="16485848" author="vgarg" created="Tue, 22 May 2018 23:57:55 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13083808">HIVE-17002</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12901246" name="HIVE-15883.1.patch" size="7207" author="ngangam" created="Fri, 8 Dec 2017 14:52:57 +0000"/>
                            <attachment id="12901138" name="HIVE-15883.1.patch" size="7207" author="ngangam" created="Thu, 7 Dec 2017 21:32:57 +0000"/>
                            <attachment id="12852182" name="HIVE-15883.patch" size="4543" author="ngangam" created="Sat, 11 Feb 2017 05:21:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 11 Feb 2017 07:09:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39xx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15884] Optimize not between for vectorization</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15884</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13042320">HIVE-15884</key>
            <summary>Optimize not between for vectorization</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13026641">HIVE-15388</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pxiong">Pengcheng Xiong</assignee>
                                    <reporter username="pxiong">Pengcheng Xiong</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Feb 2017 20:38:27 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:12 +0000</updated>
                            <resolved>Wed, 1 Mar 2017 21:18:50 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15889531" author="pxiong" created="Wed, 1 Mar 2017 05:29:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, could u take a look? Thanks.&lt;/p&gt;</comment>
                            <comment id="15889777" author="hiveqa" created="Wed, 1 Mar 2017 08:42:24 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855293/HIVE-15884.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855293/HIVE-15884.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10298 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_between_in] (batchId=119)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgress (batchId=211)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3861/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3861/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3861/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3861/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3861/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3861/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855293 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15890758" author="ashutoshc" created="Wed, 1 Mar 2017 18:33:59 +0000"  >&lt;p&gt;+1 &lt;/p&gt;</comment>
                            <comment id="15891092" author="pxiong" created="Wed, 1 Mar 2017 21:31:09 +0000"  >&lt;p&gt;pushed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; for the review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12855293" name="HIVE-15884.01.patch" size="7062" author="pxiong" created="Wed, 1 Mar 2017 05:28:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Mar 2017 08:42:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39ybb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15885] make compaction report progress, stats</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15885</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13042325">HIVE-15885</key>
            <summary>make compaction report progress, stats</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Feb 2017 21:56:44 +0000</created>
                <updated>Sat, 11 Feb 2017 21:56:44 +0000</updated>
                                                                            <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39ycf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15886] LLAP: Provide logs URL for in-progress and completed task attemtps</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15886</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;YARN provides a webservice to access logs with &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-6011&quot; title=&quot;Add a new web service to list the files on a container in AHSWebService&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-6011&quot;&gt;&lt;del&gt;YARN-6011&lt;/del&gt;&lt;/a&gt;. This can be used to populate the in-progress and completed task attempts logs. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13042356">HIVE-15886</key>
            <summary>LLAP: Provide logs URL for in-progress and completed task attemtps</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasanth_j">Prasanth Jayachandran</assignee>
                                    <reporter username="prasanth_j">Prasanth Jayachandran</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Feb 2017 04:54:57 +0000</created>
                <updated>Tue, 25 Jul 2017 20:04:46 +0000</updated>
                            <resolved>Wed, 15 Feb 2017 19:14:33 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>llap</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15862664" author="hiveqa" created="Sun, 12 Feb 2017 05:59:16 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852234/HIVE-15886.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852234/HIVE-15886.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10236 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3508/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3508/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3508/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3508/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3508/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3508/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852234 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15867153" author="sseth" created="Wed, 15 Feb 2017 03:34:22 +0000"  >&lt;p&gt;+1. Ideally we should check for nulls during taskAttempt to containerId conversion. However, Tez does not fail queries if there is an exception while constructing the log URL&lt;/p&gt;</comment>
                            <comment id="15868369" author="prasanth_j" created="Wed, 15 Feb 2017 19:04:01 +0000"  >&lt;p&gt;Added null check for containerId&lt;/p&gt;</comment>
                            <comment id="15868399" author="prasanth_j" created="Wed, 15 Feb 2017 19:14:33 +0000"  >&lt;p&gt;Committed to master. Thanks for the review!&lt;/p&gt;</comment>
                            <comment id="15869557" author="lefty@hortonworks.com" created="Thu, 16 Feb 2017 08:55:27 +0000"  >&lt;p&gt;Does this need to be documented in the wiki?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LLAP&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LLAP &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15870596" author="prasanth_j" created="Thu, 16 Feb 2017 19:46:46 +0000"  >&lt;p&gt;This is not a user facing change. These log URLs are currently only consumed by tez UI. I don&apos;t think we need to document this. &lt;/p&gt;</comment>
                            <comment id="15870822" author="lefty@hortonworks.com" created="Thu, 16 Feb 2017 22:55:01 +0000"  >&lt;p&gt;Okay, thanks Prasanth.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852234" name="HIVE-15886.1.patch" size="5081" author="prasanth_j" created="Sun, 12 Feb 2017 04:56:39 +0000"/>
                            <attachment id="12852888" name="HIVE-15886.2.patch" size="5187" author="prasanth_j" created="Wed, 15 Feb 2017 19:04:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 12 Feb 2017 05:59:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39yj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15887] could not get APP ID and cause failed to connect to spark driver on yarn-client mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15887</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;when I run Hive queries on Spark, got below error in the console, after check the container&apos;s log, found it failed to connected to spark driver. I have set  hive.spark.job.monitor.timeout=3600s, so the log said &apos;Job hasn&apos;t been submitted after 3601s&apos;, actually during this long-time period it&apos;s impossible no available resource, and also did not see any issue related to the network, so the cause is not clear from the message &quot;Possible reasons include network issues, errors in remote driver or the cluster has no available resources, etc.&quot;.&lt;br/&gt;
From Hive&apos;s log, failed to get APP ID, so this might be the cause why the driver did not start up.&lt;/p&gt;

&lt;p&gt;console log:&lt;br/&gt;
Starting Spark Job = e9ce42c8-ff20-4ac8-803f-7668678c2a00&lt;br/&gt;
Job hasn&apos;t been submitted after 3601s. Aborting it.&lt;br/&gt;
Possible reasons include network issues, errors in remote driver or the cluster has no available resources, etc.&lt;br/&gt;
Please check YARN or Spark driver&apos;s logs for further information.&lt;br/&gt;
Status: SENT&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.spark.SparkTask&lt;/p&gt;

&lt;p&gt;container&apos;s log:&lt;/p&gt;

&lt;p&gt;17/02/13 05:05:54 INFO yarn.ApplicationMaster: Preparing Local resources&lt;br/&gt;
17/02/13 05:05:54 INFO yarn.ApplicationMaster: Prepared Local resources Map(_&lt;em&gt;spark_libs&lt;/em&gt;_ -&amp;gt; resource &lt;/p&gt;
{ scheme: &quot;hdfs&quot; host: &quot;hsx-node1&quot; port: 8020 file: &quot;/user/root/.sparkStaging/application_1486905599813_0046/__spark_libs__6842484649003444330.zip&quot; }
&lt;p&gt; size: 153484072 timestamp: 1486926551130 type: ARCHIVE visibility: PRIVATE, _&lt;em&gt;spark_conf&lt;/em&gt;_ -&amp;gt; resource &lt;/p&gt;
{ scheme: &quot;hdfs&quot; host: &quot;hsx-node1&quot; port: 8020 file: &quot;/user/root/.sparkStaging/application_1486905599813_0046/__spark_conf__.zip&quot; }
&lt;p&gt; size: 116245 timestamp: 1486926551318 type: ARCHIVE visibility: PRIVATE)&lt;br/&gt;
17/02/13 05:05:54 INFO yarn.ApplicationMaster: ApplicationAttemptId: appattempt_1486905599813_0046_000002&lt;br/&gt;
17/02/13 05:05:54 INFO spark.SecurityManager: Changing view acls to: root&lt;br/&gt;
17/02/13 05:05:54 INFO spark.SecurityManager: Changing modify acls to: root&lt;br/&gt;
17/02/13 05:05:54 INFO spark.SecurityManager: Changing view acls groups to: &lt;br/&gt;
17/02/13 05:05:54 INFO spark.SecurityManager: Changing modify acls groups to: &lt;br/&gt;
17/02/13 05:05:54 INFO spark.SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(root); groups with view permissions: Set(); users  with modify permissions: Set(root); groups with modify permissions: Set()&lt;br/&gt;
17/02/13 05:05:54 INFO yarn.ApplicationMaster: Waiting for Spark driver to be reachable.&lt;br/&gt;
17/02/13 05:05:54 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:54 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:54 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:55 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:56 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:57 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:05:57 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;/p&gt;

&lt;p&gt;17/02/13 05:07:34 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:07:34 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:07:34 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:07:34 ERROR yarn.ApplicationMaster: Failed to connect to driver at 192.168.1.1:43656, retrying ...&lt;br/&gt;
17/02/13 05:07:34 ERROR yarn.ApplicationMaster: Uncaught exception: &lt;br/&gt;
org.apache.spark.SparkException: Failed to connect to driver!&lt;br/&gt;
	at org.apache.spark.deploy.yarn.ApplicationMaster.waitForSparkDriver(ApplicationMaster.scala:569)&lt;br/&gt;
	at org.apache.spark.deploy.yarn.ApplicationMaster.runExecutorLauncher(ApplicationMaster.scala:405)&lt;br/&gt;
	at org.apache.spark.deploy.yarn.ApplicationMaster.run(ApplicationMaster.scala:247)&lt;br/&gt;
	at org.apache.spark.deploy.yarn.ApplicationMaster$$anonfun$main$1.apply$mcV$sp(ApplicationMaster.scala:749)&lt;br/&gt;
	at org.apache.spark.deploy.SparkHadoopUtil$$anon$1.run(SparkHadoopUtil.scala:71)&lt;br/&gt;
	at org.apache.spark.deploy.SparkHadoopUtil$$anon$1.run(SparkHadoopUtil.scala:70)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:422)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657)&lt;br/&gt;
	at org.apache.spark.deploy.SparkHadoopUtil.runAsSparkUser(SparkHadoopUtil.scala:70)&lt;br/&gt;
	at org.apache.spark.deploy.yarn.ApplicationMaster$.main(ApplicationMaster.scala:747)&lt;br/&gt;
	at org.apache.spark.deploy.yarn.ExecutorLauncher$.main(ApplicationMaster.scala:774)&lt;br/&gt;
	at org.apache.spark.deploy.yarn.ExecutorLauncher.main(ApplicationMaster.scala)&lt;br/&gt;
17/02/13 05:07:34 INFO yarn.ApplicationMaster: Final app status: FAILED, exitCode: 10, (reason: Uncaught exception: org.apache.spark.SparkException: Failed to connect to driver!)&lt;br/&gt;
17/02/13 05:07:34 INFO yarn.ApplicationMaster: Unregistering ApplicationMaster with FAILED (diag message: Uncaught exception: org.apache.spark.SparkException: Failed to connect to driver!)&lt;br/&gt;
17/02/13 05:07:34 INFO yarn.ApplicationMaster: Deleting staging directory hdfs://hsx-node1:8020/user/root/.sparkStaging/application_1486905599813_0046&lt;br/&gt;
17/02/13 05:07:34 INFO util.ShutdownHookManager: Shutdown hook called&lt;/p&gt;

&lt;p&gt;hive&apos;s log:&lt;/p&gt;

&lt;p&gt;2017-02-13T03:10:01,639  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr-redir-1&amp;#93;&lt;/span&gt; client.SparkClientImpl: 17/02/13 03:10:01 INFO yarn.Client: Application report for application_1486905599813_0046 (state: ACCEPTED)&lt;br/&gt;
2017-02-13T03:10:06,640  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr-redir-1&amp;#93;&lt;/span&gt; client.SparkClientImpl: 17/02/13 03:10:06 INFO yarn.Client: Application report for application_1486905599813_0046 (state: ACCEPTED)&lt;br/&gt;
2017-02-13T03:10:08,176  WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;c807cf48-301a-47b4-96df-495b2827d6ba main&amp;#93;&lt;/span&gt; impl.RemoteSparkJobStatus: Failed to get APP ID.&lt;br/&gt;
java.util.concurrent.TimeoutException&lt;br/&gt;
        at io.netty.util.concurrent.AbstractFuture.get(AbstractFuture.java:49) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.29.Final.jar:4.0.29.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.spark.status.impl.RemoteSparkJobStatus.getAppID(RemoteSparkJobStatus.java:65) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.spark.SparkTask.execute(SparkTask.java:114) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:199) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:100) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:2168) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1824) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1222) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1212) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:233) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:184) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:400) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:336) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processReader(CliDriver.java:430) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processFile(CliDriver.java:446) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:749) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:715) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:642) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:497) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.run(RunJar.java:221) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop-common-2.7.1.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:136) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop-common-2.7.1.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2017-02-13T03:10:11,641  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr-redir-1&amp;#93;&lt;/span&gt; client.SparkClientImpl: 17/02/13 03:10:11 INFO yarn.Client: Application report for application_1486905599813_0046 (state: ACCEPTED)&lt;br/&gt;
2017-02-13T03:10:16,643  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr-redir-1&amp;#93;&lt;/span&gt; client.SparkClientImpl: 17/02/13 03:10:16 INFO yarn.Client: Application report for application_1486905599813_0046 (state: ACCEPTED)&lt;/p&gt;


&lt;p&gt;2017-02-13T04:11:07,354  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr-redir-1&amp;#93;&lt;/span&gt; client.SparkClientImpl: 17/02/13 04:11:07 INFO yarn.Client: Application report for application_1486905599813_0046 (state: ACCEPTED)&lt;br/&gt;
2017-02-13T04:11:09,706  WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;c807cf48-301a-47b4-96df-495b2827d6ba main&amp;#93;&lt;/span&gt; impl.RemoteSparkJobStatus: Failed to get APP ID.&lt;br/&gt;
java.util.concurrent.TimeoutException&lt;br/&gt;
        at io.netty.util.concurrent.AbstractFuture.get(AbstractFuture.java:49) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.29.Final.jar:4.0.29.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.spark.status.impl.RemoteSparkJobStatus.getAppID(RemoteSparkJobStatus.java:65) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.spark.SparkTask.execute(SparkTask.java:132) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:199) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:100) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:2168) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1824) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1222) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1212) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-exec-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:233) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:184) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:400) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:336) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processReader(CliDriver.java:430) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processFile(CliDriver.java:446) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:749) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:715) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:642) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hive-cli-2.2.0-SNAPSHOT.jar:2.2.0-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:497) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:1.8.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.run(RunJar.java:221) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop-common-2.7.1.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:136) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;hadoop-common-2.7.1.jar:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2017-02-13T04:11:09,719 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;c807cf48-301a-47b4-96df-495b2827d6ba main&amp;#93;&lt;/span&gt; ql.Driver: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.spark.SparkTask&lt;br/&gt;
2017-02-13T04:11:09,720  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;c807cf48-301a-47b4-96df-495b2827d6ba main&amp;#93;&lt;/span&gt; ql.Driver: Completed executing command(queryId=root_20170213030905_947e7eca-a134-4652-883c-10bded3c6218); Time taken: 3723.688 seconds&lt;br/&gt;
2017-02-13T04:11:09,800  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;c807cf48-301a-47b4-96df-495b2827d6ba main&amp;#93;&lt;/span&gt; conf.HiveConf: Using the default value passed in for log id: c807cf48-301a-47b4-96df-495b2827d6ba&lt;br/&gt;
2017-02-13T04:11:09,800  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;c807cf48-301a-47b4-96df-495b2827d6ba main&amp;#93;&lt;/span&gt; session.SessionState: Resetting thread name to  main&lt;br/&gt;
2017-02-13T04:11:09,800  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.HiveConf: Using the default value passed in for log id: c807cf48-301a-47b4-96df-495b2827d6ba&lt;br/&gt;
2017-02-13T04:11:12,355  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr-redir-1&amp;#93;&lt;/span&gt; client.SparkClientImpl: 17/02/13 04:11:12 INFO yarn.Client: Application report for application_1486905599813_0046 (state: ACCEPTED)&lt;br/&gt;
2017-02-13T04:11:17,356  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr-redir-1&amp;#93;&lt;/span&gt; client.SparkClientImpl: 17/02/13 04:11:17 INFO yarn.Client: Application report for application_1486905599813_0046 (state: ACCEPTED)&lt;br/&gt;
2017-02-13T04:11:19,811  WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;c807cf48-301a-47b4-96df-495b2827d6ba main&amp;#93;&lt;/span&gt; client.SparkClientImpl: Timed out shutting down remote driver, interrupting...&lt;br/&gt;
2017-02-13T04:11:19,811  WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;Driver&amp;#93;&lt;/span&gt; client.SparkClientImpl: Waiting thread interrupted, killing child process.&lt;br/&gt;
2017-02-13T04:11:19,839  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; session.SessionState: Deleted directory: /tmp/hive/root/c807cf48-301a-47b4-96df-495b2827d6ba on fs with scheme hdfs&lt;br/&gt;
2017-02-13T04:11:19,839  INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; session.SessionState: Deleted directory: /tmp/root/c807cf48-301a-47b4-96df-495b2827d6ba on fs with scheme file&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hive2.2&lt;br/&gt;
Spark2.0.2&lt;br/&gt;
hadoop2.7.1&lt;/p&gt;</environment>
        <key id="13042454">HIVE-15887</key>
            <summary>could not get APP ID and cause failed to connect to spark driver on yarn-client mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="KaiXu">KaiXu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 02:38:48 +0000</created>
                <updated>Wed, 15 Feb 2017 03:30:39 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>Hive</component>
                    <component>Spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15863160" author="lirui" created="Mon, 13 Feb 2017 03:19:38 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KaiXu&quot; class=&quot;user-hover&quot; rel=&quot;KaiXu&quot;&gt;KaiXu&lt;/a&gt;, the failure is just a warning and it shouldn&apos;t make the query fail:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getAppID() {
    Future&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getAppID = sparkClient.run(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GetAppIDJob());
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getAppID.get(sparkClientTimeoutInSeconds, TimeUnit.SECONDS);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to get APP ID.&quot;&lt;/span&gt;, e);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please check your log again to find the real cause of the failure. Btw this has nothing to do with Spark and you don&apos;t need to log a Spark JIRA.&lt;/p&gt;</comment>
                            <comment id="15863605" author="kaixu" created="Mon, 13 Feb 2017 12:41:41 +0000"  >&lt;p&gt;Thanks Rui Li for the information, the JIRA was first loged on Spark by mistake I have changed it to Hive.&lt;/p&gt;</comment>
                            <comment id="15863645" author="lirui" created="Mon, 13 Feb 2017 13:17:01 +0000"  >&lt;p&gt;Seems the application is ACCEPTED but didn&apos;t reach RUNNING. YARN log may be helpful to find out why the app hasn&apos;t launched.&lt;/p&gt;</comment>
                            <comment id="15864837" author="kaixu" created="Tue, 14 Feb 2017 01:27:34 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, above container log is the yarn application log, the middle has been cut off for they&apos;re repeated &quot;Failed to connect to driver at 192.168.1.1:43656, retrying&quot;.&lt;/p&gt;</comment>
                            <comment id="15864877" author="kaixu" created="Tue, 14 Feb 2017 02:01:47 +0000"  >&lt;p&gt;From nodemanager log, can only see container transitioned from LOCALIZED to RUNNING, then failed with exitCode=10.&lt;/p&gt;

&lt;p&gt;2017-02-13 05:04:00,536 INFO org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.LocalizedResource: Resource hdfs://hsx-node1:8020/user/root/.sparkStaging/application_1486905599813_0046/_&lt;em&gt;spark_libs&lt;/em&gt;&lt;em&gt;6842484649003444330.zip(-&amp;gt;/mnt/disk6/yarn/nm/usercache/root/filecache/94/&lt;/em&gt;&lt;em&gt;spark_libs&lt;/em&gt;_6842484649003444330.zip) transitioned from DOWNLOADING to LOCALIZED&lt;br/&gt;
2017-02-13 05:04:00,641 INFO org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.LocalizedResource: Resource hdfs://hsx-node1:8020/user/root/.sparkStaging/application_1486905599813_0046/_&lt;em&gt;spark_conf&lt;/em&gt;&lt;em&gt;.zip(-&amp;gt;/mnt/disk7/yarn/nm/usercache/root/filecache/95/&lt;/em&gt;&lt;em&gt;spark_conf&lt;/em&gt;_.zip) transitioned from DOWNLOADING to LOCALIZED&lt;br/&gt;
2017-02-13 05:04:00,641 INFO org.apache.hadoop.yarn.server.nodemanager.containermanager.container.ContainerImpl: Container container_1486905599813_0046_01_000001 transitioned from LOCALIZING to LOCALIZED&lt;br/&gt;
2017-02-13 05:04:00,661 INFO org.apache.hadoop.yarn.server.nodemanager.containermanager.container.ContainerImpl: Container container_1486905599813_0046_01_000001 transitioned from LOCALIZED to RUNNING&lt;br/&gt;
2017-02-13 05:04:00,661 INFO org.apache.hadoop.yarn.server.nodemanager.containermanager.monitor.ContainersMonitorImpl: Neither virutal-memory nor physical-memory monitoring is needed. Not running the monitor-thread&lt;br/&gt;
2017-02-13 05:04:00,717 INFO org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor: launchContainer: &lt;span class=&quot;error&quot;&gt;&amp;#91;bash, /mnt/disk2/yarn/nm/usercache/root/appcache/application_1486905599813_0046/container_1486905599813_0046_01_000001/default_container_executor.sh&amp;#93;&lt;/span&gt;&lt;br/&gt;
2017-02-13 05:04:03,304 INFO SecurityLogger.org.apache.hadoop.ipc.Server: Auth successful for appattempt_1486905599813_0047_000001 (auth:SIMPLE)&lt;/p&gt;

&lt;p&gt;2017-02-13 05:05:42,694 WARN org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor: Exit code from container container_1486905599813_0046_01_000001 is : 10&lt;br/&gt;
2017-02-13 05:05:42,695 WARN org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor: Exception from container-launch with container ID: container_1486905599813_0046_01_000001 and exit code: 10&lt;br/&gt;
ExitCodeException exitCode=10:&lt;br/&gt;
        at org.apache.hadoop.util.Shell.runCommand(Shell.java:545)&lt;br/&gt;
        at org.apache.hadoop.util.Shell.run(Shell.java:456)&lt;br/&gt;
        at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:722)&lt;br/&gt;
        at org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:211)&lt;br/&gt;
        at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:302)&lt;br/&gt;
        at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:82)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
2017-02-13 05:05:42,699 INFO org.apache.hadoop.yarn.server.nodemanager.ContainerExecutor: Exception from container-launch.&lt;br/&gt;
2017-02-13 05:05:42,699 INFO org.apache.hadoop.yarn.server.nodemanager.ContainerExecutor: Container id: container_1486905599813_0046_01_000001&lt;br/&gt;
2017-02-13 05:05:42,699 INFO org.apache.hadoop.yarn.server.nodemanager.ContainerExecutor: Exit code: 10&lt;/p&gt;</comment>
                            <comment id="15864894" author="kaixu" created="Tue, 14 Feb 2017 02:20:21 +0000"  >&lt;p&gt;this issue occurred again yesterday, to be notable, this issue occurred when dynamic allocation is as default(disabled).&lt;/p&gt;</comment>
                            <comment id="15865384" author="lirui" created="Tue, 14 Feb 2017 08:55:11 +0000"  >&lt;p&gt;In the AM log, the &quot;failure to connect to driver&quot; happened around 5:05. According to Hive log, the query failed around 4:11 and the remote diver was killed. Does this mean the app runs after the job has failed on Hive side?&lt;/p&gt;</comment>
                            <comment id="15865627" author="kaixu" created="Tue, 14 Feb 2017 11:41:02 +0000"  >&lt;p&gt;it seems like that, Hive side timeout after hive.spark.job.monitor.timeout, after that time yarn still tried to run the query but failed.&lt;/p&gt;</comment>
                            <comment id="15867150" author="lirui" created="Wed, 15 Feb 2017 03:30:39 +0000"  >&lt;p&gt;The symptom is quite similar to that of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12650&quot; title=&quot;Improve error messages for Hive on Spark in case the cluster has no resources available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12650&quot;&gt;&lt;del&gt;HIVE-12650&lt;/del&gt;&lt;/a&gt;. Is this a busy cluster?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2017 03:19:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39z4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15888] constant propagation optimizer failed when query has the same alias with subquery</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15888</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Example  :&lt;br/&gt;
select * &lt;br/&gt;
from dpdim_employee_org_d c &lt;br/&gt;
join &lt;br/&gt;
(&lt;br/&gt;
select a.* from dpmid_md_organization a&lt;br/&gt;
left outer join dpmid_md_organization b &lt;br/&gt;
on a.organizationid = b.superiororganizationid and b.hisdate = &apos;2016-10-05&apos;&lt;br/&gt;
where a.hisdate = &apos;2016-09-05&apos;&lt;br/&gt;
and b.organizationid is null &lt;br/&gt;
) b &lt;br/&gt;
on c.org_id = b.organizationid &lt;br/&gt;
and c.hp_cal_dt = &apos;2016-09-05&apos; limit 10;&lt;/p&gt;

&lt;p&gt;Description:&lt;br/&gt;
when ppd optimize is enabled this query has empty result . If we unenabled constant propagation optimize or we replace the subquery alias &apos;b&apos; with &apos;b1&apos; , this query will work correctly.&lt;br/&gt;
I explain this query and find that after ppd optimize Filter Operator predicate conf changed from &apos;predicate: superiororganizationid is not null (type: boolean)&apos; to &apos;predicate: false (type: boolean)&apos;.&lt;br/&gt;
The subquery has a filter predicate conf &apos;b.organizationid is null&apos;,&apos;b.organizationid&apos; should equal to &apos;b:b.organizationid&apos; . The outer query has a filter predicate conf &apos;b.organizationid is not null&apos;, &apos;b.organizationid&apos; should equal to &apos;b:a.organizationid&apos;. While rowSchema get Column Info on tabAlias:&apos;b&apos; and alias:&apos;organizationid&apos;. constant propagation optimize combine &apos;b.organizationid is not null&apos; and  &apos;b.organizationid is null&apos; to &apos;constant false&apos; . &lt;/p&gt;</description>
                <environment></environment>
        <key id="13042462">HIVE-15888</key>
            <summary>constant propagation optimizer failed when query has the same alias with subquery</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Walter Wu">Walter Wu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 03:04:49 +0000</created>
                <updated>Tue, 14 Feb 2017 02:56:12 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 02:56:12 +0000</resolved>
                                    <version>1.2.1</version>
                                                    <component>Logical Optimizer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15864935" author="walter wu" created="Tue, 14 Feb 2017 02:53:08 +0000"  >&lt;p&gt;I find it has been fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13602&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-13602&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13002760">HIVE-14705</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12967324">HIVE-13733</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13029997">HIVE-15495</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12962139">HIVE-13602</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39z6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15889] LLAP: Some tasks still run after hive cli is shutdown</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15889</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;E.g: In cross product case, the tight loop in merge join operator ignores any interrupt or abort flag checks, causing the tasks to be in running state even when the client cli is quit.&lt;/p&gt;

&lt;p&gt;intensionally written cross product query to simulate this.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select count(1) from lineitem, orders;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even when the cli is quit, LLAP would continue executing the task for quite sometime. E.g stack trace&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;TezTaskRunner&quot; #1945 daemon prio=5 os_prio=0 tid=0x00007fe9e43a5000 nid=0x4c8 runnable [0x00007fc8d881b000]
   java.lang.Thread.State: RUNNABLE
	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.copyToStandardObject(ObjectInspectorUtils.java:453)
	at org.apache.hadoop.hive.ql.exec.CommonMergeJoinOperator.mergeJoinComputeKeys(CommonMergeJoinOperator.java:603)
	at org.apache.hadoop.hive.ql.exec.CommonMergeJoinOperator.process(CommonMergeJoinOperator.java:207)
	at org.apache.hadoop.hive.ql.exec.tez.ReduceRecordSource$GroupIterator.next(ReduceRecordSource.java:351)
	at org.apache.hadoop.hive.ql.exec.tez.ReduceRecordSource.pushRecord(ReduceRecordSource.java:282)
	at org.apache.hadoop.hive.ql.exec.CommonMergeJoinOperator.fetchOneRow(CommonMergeJoinOperator.java:410)
	at org.apache.hadoop.hive.ql.exec.CommonMergeJoinOperator.fetchNextGroup(CommonMergeJoinOperator.java:381)
	at org.apache.hadoop.hive.ql.exec.CommonMergeJoinOperator.doFirstFetchIfNeeded(CommonMergeJoinOperator.java:491)
	at org.apache.hadoop.hive.ql.exec.CommonMergeJoinOperator.process(CommonMergeJoinOperator.java:209)
	at org.apache.hadoop.hive.ql.exec.tez.ReduceRecordSource$GroupIterator.next(ReduceRecordSource.java:351)
	at org.apache.hadoop.hive.ql.exec.tez.ReduceRecordSource.pushRecord(ReduceRecordSource.java:282)
	at org.apache.hadoop.hive.ql.exec.tez.ReduceRecordProcessor.run(ReduceRecordProcessor.java:319)
	at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:185)
	at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:168)
	at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:370)
	at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:73)
	at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:61)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:422)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13042487">HIVE-15889</key>
            <summary>LLAP: Some tasks still run after hive cli is shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh.balamohan">Rajesh Balamohan</assignee>
                                    <reporter username="rajesh.balamohan">Rajesh Balamohan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 06:36:17 +0000</created>
                <updated>Tue, 25 Jul 2017 20:04:52 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 03:33:03 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15863255" author="rajesh.balamohan" created="Mon, 13 Feb 2017 06:37:20 +0000"  >&lt;p&gt;originally reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15863304" author="hiveqa" created="Mon, 13 Feb 2017 07:58:02 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852299/HIVE-15889.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852299/HIVE-15889.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10237 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3514/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3514/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3514/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3514/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3514/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3514/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852299 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15863379" author="rajesh.balamohan" created="Mon, 13 Feb 2017 09:25:03 +0000"  >&lt;p&gt;Attaching .2 version of the patch.&lt;/p&gt;

&lt;p&gt; &lt;tt&gt;TezJobMonitor::killRunningJobs&lt;/tt&gt; was not getting invoked as its visibility got changed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15473&quot; title=&quot;Progress Bar on Beeline client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15473&quot;&gt;&lt;del&gt;HIVE-15473&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;This caused &quot;java.lang.NoSuchMethodException: org.apache.hadoop.hive.ql.exec.tez.monitoring.TezJobMonitor.killRunningJobs()&quot; in &lt;tt&gt;TezJobExecHelper::killRunningJobs&lt;/tt&gt; and tasks were not killed properly.&lt;/p&gt;


</comment>
                            <comment id="15863436" author="hiveqa" created="Mon, 13 Feb 2017 10:29:00 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852318/HIVE-15889.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852318/HIVE-15889.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10237 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3516/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3516/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3516/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3516/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3516/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3516/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852318 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15864345" author="sershe" created="Mon, 13 Feb 2017 20:16:52 +0000"  >&lt;p&gt;Should TezJobExecHelper use setAccessible to avoid being affected by this? Also why does it have to use reflection? Also should it cache the method statically.. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15864735" author="rajesh.balamohan" created="Tue, 14 Feb 2017 00:11:15 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;. Attaching .3 patch to address review comments. Used setAccessible and also caching it statically.&lt;/p&gt;

&lt;p&gt;Reflection is used since there is an option to have tez optionally in earlier clusters.  Not sure this is still valid given it is the default engine now. But didn&apos;t want to change that code for backward compatibility. &lt;/p&gt;</comment>
                            <comment id="15864875" author="hiveqa" created="Tue, 14 Feb 2017 02:01:42 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852443/HIVE-15889.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852443/HIVE-15889.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3525/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3525/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3525/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3525/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3525/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3525/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852443 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15864924" author="sershe" created="Tue, 14 Feb 2017 02:45:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15864965" author="rajesh.balamohan" created="Tue, 14 Feb 2017 03:33:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;. Committed to master.&lt;/p&gt;</comment>
                            <comment id="15865108" author="thejas" created="Tue, 14 Feb 2017 05:40:26 +0000"  >&lt;p&gt;Why are we having to use reflection here ? &lt;br/&gt;
(I could be missing something that should be obvious, looks like was introduced long ago in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8393&quot; title=&quot;Handle SIGINT on Tez&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8393&quot;&gt;&lt;del&gt;HIVE-8393&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852299" name="HIVE-15889.1.patch" size="2982" author="rajesh.balamohan" created="Mon, 13 Feb 2017 06:37:59 +0000"/>
                            <attachment id="12852318" name="HIVE-15889.2.patch" size="1468" author="rajesh.balamohan" created="Mon, 13 Feb 2017 09:25:03 +0000"/>
                            <attachment id="12852443" name="HIVE-15889.3.patch" size="2610" author="rajesh.balamohan" created="Tue, 14 Feb 2017 00:11:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2017 07:58:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39zc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15890] hive permission problem</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15890</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hello&lt;br/&gt;
While trying to config hive with ldap authorization, I found a strange issue.&lt;/p&gt;

&lt;p&gt;I created users hadoop and hadoop_ro. Second one is absent DROP TABLE privilege:&lt;/p&gt;

&lt;p&gt;EXPLAIN  AUTHORIZATION  drop table test;&lt;/p&gt;

&lt;p&gt; Permission denied: Principal &lt;span class=&quot;error&quot;&gt;&amp;#91;name=hadoop_ro, type=USER&amp;#93;&lt;/span&gt; does not have following privileges for operation DROPTABLE [&lt;span class=&quot;error&quot;&gt;&amp;#91;OBJECT OWNERSHIP&amp;#93;&lt;/span&gt; on Object &lt;span class=&quot;error&quot;&gt;&amp;#91;type=TABLE_OR_VIEW, name=greenh.test&amp;#93;&lt;/span&gt;]  |&lt;/p&gt;

&lt;p&gt;Test database is called greenh and created using hadoop user creds.&lt;br/&gt;
But I can drop that table with hadoop_ro creds.&lt;br/&gt;
&amp;gt; show tables;&lt;br/&gt;
&lt;ins&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
 tab_name  &lt;br/&gt;
&lt;ins&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
 test      &lt;br/&gt;
&lt;ins&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;

&lt;p&gt;&amp;gt; drop table test;&lt;br/&gt;
No rows affected (0.203 seconds)&lt;br/&gt;
&amp;gt; show tables;&lt;br/&gt;
&lt;ins&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
 tab_name  &lt;br/&gt;
&lt;ins&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;br/&gt;
&lt;ins&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;-+&lt;/p&gt;


&lt;p&gt;Is this a bug, or I missed something?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13042587">HIVE-15890</key>
            <summary>hive permission problem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="hiveqa">Hive QA</assignee>
                                    <reporter username="greenh">Vladimir Tselm</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 14:51:10 +0000</created>
                <updated>Wed, 15 Feb 2017 15:24:59 +0000</updated>
                                            <version>2.1.1</version>
                                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39zyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15891] Detect query rewrite scenario for UPDATE/DELETE/MERGE and fail fast</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15891</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently ACID UpdateDeleteSemanticAnalyzer directly manipulates the AST tree but it&apos;s different from the general approach of modifying the token stream and thus will cause AST tree mismatch if there is any rewrite happening after UpdateDeleteSemanticAnalyzer.&lt;/p&gt;

&lt;p&gt;The long term solution will be to rewrite the AST handling logic in UpdateDeleteSemanticAnalyzer, to make it consistent with the general approach.&lt;/p&gt;

&lt;p&gt;This ticket will for now detect the error prone cases and fail early. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13042642">HIVE-15891</key>
            <summary>Detect query rewrite scenario for UPDATE/DELETE/MERGE and fail fast</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wzheng">Wei Zheng</assignee>
                                    <reporter username="wzheng">Wei Zheng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 18:52:31 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:37 +0000</updated>
                            <resolved>Mon, 20 Feb 2017 02:17:57 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15864813" author="hiveqa" created="Tue, 14 Feb 2017 01:13:40 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852440/HIVE-15891.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852440/HIVE-15891.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 3 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 41 failed/errored test(s), 10241 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_subquery] (batchId=36)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=153)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.ql.TestTxnCommands.testDeleteIn (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeDeleteUpdate (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeOnTezEdges (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeType2SCD01 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeType2SCD02 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeUpdateDelete (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands.testQuotedIdentifier (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands.testQuotedIdentifier2 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDeleteIn (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge2 (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge2 (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge3 (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMergeWithPredicate (batchId=258)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDeleteIn (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDynamicPartitionsMerge (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDynamicPartitionsMerge2 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge2 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge3 (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMergeWithPredicate (batchId=268)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDeleteIn (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge2 (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge2 (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge3 (batchId=266)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMergeWithPredicate (batchId=266)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testLocksInSubquery (batchId=269)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMerge3Way01 (batchId=269)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMerge3Way02 (batchId=269)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergePartitioned01 (batchId=269)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergePartitioned02 (batchId=269)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergeUnpartitioned01 (batchId=269)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testMergeUnpartitioned02 (batchId=269)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3524/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3524/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3524/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3524/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3524/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3524/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 41 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852440 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15867361" author="hiveqa" created="Wed, 15 Feb 2017 07:10:26 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852720/HIVE-15891.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852720/HIVE-15891.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 3 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 16 failed/errored test(s), 10237 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[auto_sortmerge_join_16] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[bucketizedhiveinputformat] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[external_table_with_space_in_location_path] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[index_bitmap3] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[infer_bucket_sort_map_operators] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[parallel_orderby] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[remote_script] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[schemeAuthority] (batchId=161)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=230)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3559/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3559/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3559/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3559/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3559/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3559/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 16 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852720 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15868254" author="wzheng" created="Wed, 15 Feb 2017 17:56:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; Can you take a look please?&lt;/p&gt;</comment>
                            <comment id="15868523" author="ekoifman" created="Wed, 15 Feb 2017 20:38:30 +0000"  >&lt;p&gt;could you use qpb.getIsSubQ() and pass that to ctx.getDestNamePrefix() to restore&lt;br/&gt;
if (getIsUpdateDeleteMerge()) { check at the end of the loop?&lt;/p&gt;</comment>
                            <comment id="15868906" author="wzheng" created="Thu, 16 Feb 2017 00:55:02 +0000"  >&lt;p&gt;I tried that, and it works for existing tests that contain subquery. But this check will fail MERGE statement.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!hasSubQuery) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;A matching node should have been found, otherwise it means &quot;&lt;/span&gt; +
          &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is an UPDATE/DELETE/MERGE query but the AST got modified!&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Do we want to add another condition to rule out MERGE?&lt;/p&gt;</comment>
                            <comment id="15868933" author="ekoifman" created="Thu, 16 Feb 2017 01:21:13 +0000"  >&lt;p&gt;does it fail any Merge or some specific one?&lt;/p&gt;</comment>
                            <comment id="15869118" author="wzheng" created="Thu, 16 Feb 2017 04:01:52 +0000"  >&lt;p&gt;It fails for all merge queries&lt;/p&gt;</comment>
                            <comment id="15871132" author="hiveqa" created="Fri, 17 Feb 2017 03:53:41 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853161/HIVE-15891.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853161/HIVE-15891.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 3 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 32 failed/errored test(s), 10247 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_external_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_not_acid] (batchId=86)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure1] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[create_view_failure2] (batchId=85)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[external1] (batchId=85)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testAlterTable (batchId=194)
org.apache.hadoop.hive.metastore.TestEmbeddedHiveMetaStore.testTransactionalValidation (batchId=194)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterTable (batchId=197)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTransactionalValidation (batchId=197)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterTable (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTransactionalValidation (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterTable (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTransactionalValidation (batchId=191)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterTable (batchId=202)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTransactionalValidation (batchId=202)
org.apache.hadoop.hive.ql.security.TestMetastoreAuthorizationProvider.testSimplePrivileges (batchId=210)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProvider.testSimplePrivileges (batchId=208)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProviderWithACL.testSimplePrivileges (batchId=220)
org.apache.hive.hcatalog.api.TestHCatClient.testBasicDDLCommands (batchId=170)
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=170)
org.apache.hive.hcatalog.listener.TestDbNotificationListener.createTable (batchId=221)
org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery (batchId=217)
org.apache.hive.service.cli.TestEmbeddedThriftBinaryCLIService.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithBinary.testExecuteStatementAsync (batchId=213)
org.apache.hive.service.cli.thrift.TestThriftCLIServiceWithHttp.testExecuteStatementAsync (batchId=213)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3613/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3613/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3613/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3613/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3613/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3613/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 32 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853161 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15872237" author="wzheng" created="Fri, 17 Feb 2017 18:18:39 +0000"  >&lt;p&gt;Test failures not related. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; Can you take a look please?&lt;/p&gt;</comment>
                            <comment id="15872258" author="ekoifman" created="Fri, 17 Feb 2017 18:28:49 +0000"  >&lt;p&gt;delete from acidTable where acidTable.t in (select a from nonAcidTable).&lt;/p&gt;

&lt;p&gt;suppose there is column masking or row-filtering on nonAcidTable but not on acidTable - will you still throw?&lt;/p&gt;</comment>
                            <comment id="15872330" author="wzheng" created="Fri, 17 Feb 2017 19:11:31 +0000"  >&lt;p&gt;Yes it will. I can add another test for that.&lt;/p&gt;</comment>
                            <comment id="15872334" author="ekoifman" created="Fri, 17 Feb 2017 19:12:55 +0000"  >&lt;p&gt;I would argue that it should not...&lt;/p&gt;</comment>
                            <comment id="15872349" author="wzheng" created="Fri, 17 Feb 2017 19:19:37 +0000"  >&lt;p&gt;I think it should, because as long as query involves update operations on acid table we have no guarantee how the AST will be after the rewrite. So we should throw the error. Current row filtering implementation has a vague distinction of &quot;not supporting acid&quot;. I think this should fall in the &quot;unsupported&quot; category for now, until the AST manipulation is consistent.&lt;/p&gt;</comment>
                            <comment id="15872851" author="ekoifman" created="Sat, 18 Feb 2017 01:31:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15873928" author="hiveqa" created="Mon, 20 Feb 2017 01:21:45 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12853503/HIVE-15891.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12853503/HIVE-15891.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 3 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10249 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[interval_arithmetic] (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3653/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3653/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3653/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3653/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3653/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3653/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12853503 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15873956" author="wzheng" created="Mon, 20 Feb 2017 02:17:57 +0000"  >&lt;p&gt;Committed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; for the review!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13044089">HIVE-15970</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13045726">HIVE-16028</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12852440" name="HIVE-15891.1.patch" size="10182" author="wzheng" created="Mon, 13 Feb 2017 23:39:06 +0000"/>
                            <attachment id="12852720" name="HIVE-15891.2.patch" size="9770" author="wzheng" created="Wed, 15 Feb 2017 01:49:16 +0000"/>
                            <attachment id="12853161" name="HIVE-15891.3.patch" size="9290" author="wzheng" created="Thu, 16 Feb 2017 23:25:45 +0000"/>
                            <attachment id="12853503" name="HIVE-15891.4.patch" size="9290" author="wzheng" created="Mon, 20 Feb 2017 00:09:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Feb 2017 01:13:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15892] Vectorization: Fast Hash tables need to do bounds checking during expand</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15892</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;VectorMapJoinFastLongHashTable line 165 gets NegativeArraySizeException:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;[] newSlotPairs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;[newSlotPairArraySize];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We need to add a size check... Java math for this wrapped around to negative:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; newSlotPairArraySize = newLogicalHashBucketCount * 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13042649">HIVE-15892</key>
            <summary>Vectorization: Fast Hash tables need to do bounds checking during expand</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mmccline">Matt McCline</assignee>
                                    <reporter username="mmccline">Matt McCline</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 19:18:45 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:12 +0000</updated>
                            <resolved>Thu, 16 Feb 2017 00:23:56 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15865101" author="mmccline" created="Tue, 14 Feb 2017 05:35:51 +0000"  >&lt;p&gt;New error message needs work &amp;#8211; it doesn&apos;t prescribe a solution.&lt;/p&gt;

&lt;p&gt;Add test?&lt;/p&gt;

&lt;p&gt;Also add code for BytesBytesMultiHashMap, too?&lt;/p&gt;

&lt;p&gt;Files of interest: &lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/exec/vector/mapjoin/fast/VectorMapJoinFastHashTable.java&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/exec/vector/mapjoin/fast/VectorMapJoinFastBytesHashTable.java&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/exec/vector/mapjoin/fast/VectorMapJoinFastLongHashTable.java&lt;/p&gt;</comment>
                            <comment id="15865326" author="hiveqa" created="Tue, 14 Feb 2017 08:08:05 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852498/HIVE-15892.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852498/HIVE-15892.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 7 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=140)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3531/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3531/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3531/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3531/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3531/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3531/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852498 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15866623" author="mmccline" created="Tue, 14 Feb 2017 20:41:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;Jason Dere&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt; Can one of you review please.  I tried writing a test but either it takes too long or runs out of memory...&lt;/p&gt;</comment>
                            <comment id="15867032" author="jdere" created="Wed, 15 Feb 2017 01:02:46 +0000"  >&lt;p&gt;Looks like this throws a more user-friendly error message - but this condition will still fail the query? Is there a way to get the query to not fail? Or is it that this table should not have been selected for hash join in the first place?&lt;/p&gt;</comment>
                            <comment id="15867264" author="mmccline" created="Wed, 15 Feb 2017 04:57:19 +0000"  >&lt;p&gt;Yes, it will fail the query.  I had a long conversation with Gopal and we think this is the best thing in the short/medium term.  Very large hash tables are not very efficient.  We need to encourage people to have smaller hash tables though a runtime error is obviously not ideal.&lt;/p&gt;</comment>
                            <comment id="15868291" author="jdere" created="Wed, 15 Feb 2017 18:15:08 +0000"  >&lt;p&gt;ok, thanks for the explanation.&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="15868871" author="mmccline" created="Thu, 16 Feb 2017 00:23:11 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;Jason Dere&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt; for your help.&lt;br/&gt;
Committed to master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852498" name="HIVE-15892.01.patch" size="55393" author="mmccline" created="Tue, 14 Feb 2017 05:41:40 +0000"/>
                            <attachment id="12852653" name="HIVE-15892.02.patch" size="59890" author="mmccline" created="Tue, 14 Feb 2017 20:41:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Feb 2017 08:08:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12335837</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15893] Followup on HIVE-15671</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15893</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15671&quot; title=&quot;RPCServer.registerClient() erroneously uses server/client handshake timeout for connection timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15671&quot;&gt;&lt;del&gt;HIVE-15671&lt;/del&gt;&lt;/a&gt;, we fixed a type where server.connect.timeout is used in the place of client.connect.timeout. This might solve some potential problems, but the original problem reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15671&quot; title=&quot;RPCServer.registerClient() erroneously uses server/client handshake timeout for connection timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15671&quot;&gt;&lt;del&gt;HIVE-15671&lt;/del&gt;&lt;/a&gt; might still exist. (Not sure if &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15860&quot; title=&quot;RemoteSparkJobMonitor may hang when RemoteDriver exits abnormally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15860&quot;&gt;&lt;del&gt;HIVE-15860&lt;/del&gt;&lt;/a&gt; helps). Here is the proposal suggested by Marcelo:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;bq: server detecting a driver problem after it has connected back to the server.&lt;/p&gt;

&lt;p&gt;Hmm. That is definitely not any of the &quot;connect&quot; timeouts, which probably means it isn&apos;t configured and is just using netty&apos;s default (which is probably no timeout?). Would probably need something using io.netty.handler.timeout.IdleStateHandler, and also some periodic &quot;ping&quot; so that the connection isn&apos;t torn down without reason.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We will use this JIRA to track the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042651">HIVE-15893</key>
            <summary>Followup on HIVE-15671</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="xuefuz">Xuefu Zhang</assignee>
                                    <reporter username="xuefuz">Xuefu Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 19:20:13 +0000</created>
                <updated>Mon, 20 Feb 2017 15:12:11 +0000</updated>
                                            <version>2.2.0</version>
                                                    <component>Spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15864892" author="lirui" created="Tue, 14 Feb 2017 02:18:52 +0000"  >&lt;p&gt;My hunch is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15860&quot; title=&quot;RemoteSparkJobMonitor may hang when RemoteDriver exits abnormally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15860&quot;&gt;&lt;del&gt;HIVE-15860&lt;/del&gt;&lt;/a&gt; doesn&apos;t help here. It&apos;s only intended for RSC crashing between JobStarted and JobSubmitted. While the problem here is to detect broken connection during query execution right?&lt;/p&gt;</comment>
                            <comment id="15866506" author="xuefuz" created="Tue, 14 Feb 2017 19:51:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;Rui Li&lt;/a&gt;, I didn&apos;t mean &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15860&quot; title=&quot;RemoteSparkJobMonitor may hang when RemoteDriver exits abnormally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15860&quot;&gt;&lt;del&gt;HIVE-15860&lt;/del&gt;&lt;/a&gt; will provide a solution that solves the problem described here, which is about detecting issues in the driver. I was saying that with the job monitoring thread monitor jobs submitted to the driver and the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15860&quot; title=&quot;RemoteSparkJobMonitor may hang when RemoteDriver exits abnormally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15860&quot;&gt;&lt;del&gt;HIVE-15860&lt;/del&gt;&lt;/a&gt;, maybe the problem is mitigated or avoided. If this is true, then we might not need the proposal here. This needs further investigation though.&lt;/p&gt;</comment>
                            <comment id="15874676" author="lirui" created="Mon, 20 Feb 2017 15:12:11 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;Xuefu Zhang&lt;/a&gt;, our RPC channel has a handler that monitors the channel inactive event: &lt;a href=&quot;https://github.com/apache/hive/blob/master/spark-client/src/main/java/org/apache/hive/spark/client/rpc/Rpc.java#L240&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/master/spark-client/src/main/java/org/apache/hive/spark/client/rpc/Rpc.java#L240&lt;/a&gt;&lt;br/&gt;
When the channel is closed abnormally this handler closes the RPC and print a warning:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hive/blob/master/spark-client/src/main/java/org/apache/hive/spark/client/SparkClientImpl.java#L131&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/master/spark-client/src/main/java/org/apache/hive/spark/client/SparkClientImpl.java#L131&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;My understanding is the time needed to detect the broken connection is up to netty. When I worked on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15860&quot; title=&quot;RemoteSparkJobMonitor may hang when RemoteDriver exits abnormally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15860&quot;&gt;&lt;del&gt;HIVE-15860&lt;/del&gt;&lt;/a&gt; it&apos;s immediately detected.&lt;br/&gt;
So I think you can check your log to look for the warning message. If the message is printed, it means the error is detected and Hive is probably hanging somewhere else.&lt;br/&gt;
Besides, you may want to check whether you increased this property &lt;tt&gt;hive.spark.client.future.timeout&lt;/tt&gt;. It&apos;s one possible reason that can make the client wait.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13036412">HIVE-15671</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Feb 2017 02:18:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-15894] Add logical semijoin config in sqlstd safe list </title>
                <link>https://issues.apache.org/jira/browse/HIVE-15894</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13042665">HIVE-15894</key>
            <summary>Add logical semijoin config in sqlstd safe list </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                            <label>TODOC2.2</label>
                    </labels>
                <created>Mon, 13 Feb 2017 20:09:52 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:01 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 21:43:10 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Configuration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15864468" author="hiveqa" created="Mon, 13 Feb 2017 21:20:44 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852410/HIVE-15894.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852410/HIVE-15894.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10234 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestHS2AuthzContext - did not produce a TEST-*.xml file (likely timed out) (batchId=218)
TestServiceDiscoveryWithMiniHS2 - did not produce a TEST-*.xml file (likely timed out) (batchId=218)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.hcatalog.pig.TestRCFileHCatStorer.testWriteDecimalXY (batchId=173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3521/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3521/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3521/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3521/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3521/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3521/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852410 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15864474" author="ashutoshc" created="Mon, 13 Feb 2017 21:25:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; Can you take a look?&lt;/p&gt;</comment>
                            <comment id="15864520" author="thejas" created="Mon, 13 Feb 2017 21:50:46 +0000"  >&lt;p&gt;It would be better to rename this variable with a &quot;hive.optimize.&quot; prefix . That would be following existing naming convention for this property more closely. It would also automatically get included in the safe variable list as that prefix is included in HiveConf.sqlStdAuthSafeVarNameRegexes&lt;/p&gt;</comment>
                            <comment id="15864691" author="ashutoshc" created="Mon, 13 Feb 2017 23:41:19 +0000"  >&lt;p&gt;Sure. Updated patch with the feedback.&lt;/p&gt;</comment>
                            <comment id="15864695" author="thejas" created="Mon, 13 Feb 2017 23:43:51 +0000"  >&lt;p&gt;+1 pending tests&lt;/p&gt;</comment>
                            <comment id="15866756" author="ashutoshc" created="Tue, 14 Feb 2017 21:43:10 +0000"  >&lt;p&gt;Pushed to master.&lt;/p&gt;</comment>
                            <comment id="15869521" author="lefty@hortonworks.com" created="Thu, 16 Feb 2017 08:36:24 +0000"  >&lt;p&gt;Doc note:  This changes the name of a configuration parameter created by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15227&quot; title=&quot;Optimize join + gby into semijoin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15227&quot;&gt;&lt;del&gt;HIVE-15227&lt;/del&gt;&lt;/a&gt; from &lt;b&gt;hive.enable.semijoin.conversion&lt;/b&gt; to &lt;b&gt;hive.optimize.semijoin.conversion&lt;/b&gt; (both issues committed for release 2.2.0).&lt;/p&gt;

&lt;p&gt;Added a TODOC2.2 label.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13043730">HIVE-15948</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13021329">HIVE-15227</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12852442" name="HIVE-15894.2.patch" size="2143" author="ashutoshc" created="Mon, 13 Feb 2017 23:41:19 +0000"/>
                            <attachment id="12852410" name="HIVE-15894.patch" size="1667" author="ashutoshc" created="Mon, 13 Feb 2017 20:11:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2017 21:20:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15895] Use HDFS for stats collection temp dir on blob storage</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15895</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13042677">HIVE-15895</key>
            <summary>Use HDFS for stats collection temp dir on blob storage</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 20:49:32 +0000</created>
                <updated>Tue, 25 Jul 2017 20:04:43 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 21:32:50 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Configuration</component>
                    <component>Statistics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15864399" author="ashutoshc" created="Mon, 13 Feb 2017 20:53:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt; Can you take a look?&lt;/p&gt;</comment>
                            <comment id="15864560" author="hiveqa" created="Mon, 13 Feb 2017 22:12:43 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852417/HIVE-15895.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852417/HIVE-15895.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hive.service.server.TestHS2HttpServer.testContextRootUrlRewrite (batchId=186)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3522/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3522/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3522/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3522/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3522/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3522/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852417 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15864561" author="poeppt" created="Mon, 13 Feb 2017 22:13:50 +0000"  >&lt;p&gt;It looks like a similar external tmp path is used in &lt;tt&gt;getMetadata&lt;/tt&gt; in the &lt;tt&gt;SemanticAnalyzer&lt;/tt&gt;. Just from briefly looking, I can&apos;t find any reason why we wouldn&apos;t also want to have the tmp path be on HDFS for this as well. Do we want to change this?&lt;/p&gt;</comment>
                            <comment id="15864685" author="spena" created="Mon, 13 Feb 2017 23:37:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poeppt&quot; class=&quot;user-hover&quot; rel=&quot;poeppt&quot;&gt;Thomas Poepping&lt;/a&gt; The &lt;tt&gt;getTempDirForPath()&lt;/tt&gt; will return a temporary directory on HDFS if the path passed as parameter is on a blob storage and &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/Context.java#L410&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/Context.java#L410&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15864703" author="poeppt" created="Mon, 13 Feb 2017 23:48:17 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;Sergio Pe&#241;a&lt;/a&gt;, but I specifically was talking about another use of &lt;tt&gt;getExtTmpPathRelTo()&lt;/tt&gt; in &lt;tt&gt;SemanticAnalyzer&lt;/tt&gt;, &lt;a href=&quot;https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java#L2207&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java#L2207&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Happy to have that be addressed elsewhere though, as it could be considered out of scope for this JIRA. &lt;/p&gt;

&lt;p&gt;+1 from me as well&lt;/p&gt;</comment>
                            <comment id="15866731" author="ashutoshc" created="Tue, 14 Feb 2017 21:32:50 +0000"  >&lt;p&gt;Pushed to master. Thanks, Sergio &amp;amp; Tom for review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852417" name="HIVE-15895.patch" size="1249" author="ashutoshc" created="Mon, 13 Feb 2017 20:52:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2017 22:12:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15896] LLAP: improved failures when security is set up incorrectly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15896</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Right now LLAP may fail in ZK ACL check when the ACLs are invalid. We can try to fail earlier, and also improve the message.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042688">HIVE-15896</key>
            <summary>LLAP: improved failures when security is set up incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 21:43:25 +0000</created>
                <updated>Tue, 25 Jul 2017 20:04:55 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 03:07:39 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15864517" author="sershe" created="Mon, 13 Feb 2017 21:48:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;Jason Dere&lt;/a&gt; can you take a look? A small patch.&lt;/p&gt;</comment>
                            <comment id="15864540" author="jdere" created="Mon, 13 Feb 2017 22:01:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15864630" author="hiveqa" created="Mon, 13 Feb 2017 23:02:02 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852426/HIVE-15896.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852426/HIVE-15896.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10224 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=104)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3523/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3523/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3523/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3523/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3523/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3523/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852426 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15864945" author="sershe" created="Tue, 14 Feb 2017 03:07:39 +0000"  >&lt;p&gt;Committed to master&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852426" name="HIVE-15896.patch" size="2380" author="sershe" created="Mon, 13 Feb 2017 21:47:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2017 22:01:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0kv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15897] Add tests for partitioned acid tables with schema evolution to UTs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15897</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13042701">HIVE-15897</key>
            <summary>Add tests for partitioned acid tables with schema evolution to UTs</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 22:34:38 +0000</created>
                <updated>Sat, 25 Mar 2017 21:43:56 +0000</updated>
                                                                            <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13044051">HIVE-15967</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12340268</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>


<item>
            <title>[HIVE-15898] add Type2 SCD merge tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15898</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="13042702">HIVE-15898</key>
            <summary>add Type2 SCD merge tests</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 22:36:57 +0000</created>
                <updated>Tue, 17 Oct 2017 18:38:34 +0000</updated>
                                                                            <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15864979" author="hiveqa" created="Tue, 14 Feb 2017 03:41:20 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852459/HIVE-15898.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852459/HIVE-15898.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10222 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=162)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3527/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3527/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3527/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3527/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3527/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3527/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852459 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15865164" author="hiveqa" created="Tue, 14 Feb 2017 06:28:11 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852490/HIVE-15898.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852490/HIVE-15898.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10225 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=139)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=128)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3529/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3529/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3529/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3529/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3529/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852490 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15889473" author="hiveqa" created="Wed, 1 Mar 2017 04:14:35 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12855271/HIVE-15898.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12855271/HIVE-15898.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10299 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=139)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=211)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3855/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3855/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3855/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3855/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3855/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3855/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12855271 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16081457" author="hiveqa" created="Tue, 11 Jul 2017 01:07:45 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12876527/HIVE-15898.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12876527/HIVE-15898.05.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 12 failed/errored test(s), 10835 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=99)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.llap.security.TestLlapSignerImpl.testSigning (batchId=289)
org.apache.hadoop.hive.thrift.TestHadoopAuthBridge23.testDelegationTokenSharedStore (batchId=229)
org.apache.hive.beeline.TestBeeLineWithArgs.testQueryProgressParallel (batchId=220)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5944/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5944/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5944/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5944/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5944/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12876527 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16081766" author="hiveqa" created="Tue, 11 Jul 2017 06:53:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12876558/HIVE-15898.06.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12876558/HIVE-15898.06.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10835 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestJdbcWithMiniLlap - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5951/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5951/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5951/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5951/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5951/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5951/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12876558 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16082387" author="hiveqa" created="Tue, 11 Jul 2017 15:31:27 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12876624/HIVE-15898.07.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12876624/HIVE-15898.07.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 10839 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBlobstoreCliDriver.testCliDriver[zero_rows_blobstore] (batchId=240)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5956/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5956/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5956/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5956/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5956/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5956/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12876624 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16085275" author="hiveqa" created="Thu, 13 Jul 2017 06:50:18 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877014/HIVE-15898.08.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877014/HIVE-15898.08.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10890 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testHttpRetryOnServerIdleTimeout (batchId=226)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6001/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6001/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6001/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6001/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6001/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6001/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12877014 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16086109" author="hiveqa" created="Thu, 13 Jul 2017 17:56:30 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877091/HIVE-15898.09.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877091/HIVE-15898.09.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 13 failed/errored test(s), 10890 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_queries] (batchId=228)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=99)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6011/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6011/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6011/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6011/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6011/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6011/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 13 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12877091 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16086569" author="hiveqa" created="Thu, 13 Jul 2017 23:02:24 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877148/HIVE-15898.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877148/HIVE-15898.10.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10892 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6017/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6017/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6017/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6017/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6017/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6017/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12877148 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16086939" author="hiveqa" created="Fri, 14 Jul 2017 06:50:38 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877185/HIVE-15898.11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877185/HIVE-15898.11.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 10 failed/errored test(s), 10892 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[partition_wise_fileformat6] (batchId=7)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6026/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6026/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6026/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6026/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6026/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6026/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12877185 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16087870" author="hiveqa" created="Fri, 14 Jul 2017 19:34:28 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877353/HIVE-15898.12.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877353/HIVE-15898.12.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 16 failed/errored test(s), 10899 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite] (batchId=238)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[orc_merge_diff_fs] (batchId=1)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning_2] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=168)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_op_stats] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_ts_stats_for_mapjoin] (batchId=168)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=167)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=233)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=240)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6037/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6037/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6037/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6037/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6037/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6037/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 16 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12877353 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16087903" author="stakiar" created="Fri, 14 Jul 2017 19:41:25 +0000"  >&lt;p&gt;You can ignore the spark failures, they are due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17099&quot; title=&quot;Update golden files for spark.only.query.files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17099&quot;&gt;&lt;del&gt;HIVE-17099&lt;/del&gt;&lt;/a&gt; - which I&apos;m working on fixing.&lt;/p&gt;</comment>
                            <comment id="16088048" author="hiveqa" created="Fri, 14 Jul 2017 20:57:57 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12877380/HIVE-15898.13.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12877380/HIVE-15898.13.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 19 failed/errored test(s), 10908 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=238)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ppd_windowing2] (batchId=10)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge_type2_scd] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning_2] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=168)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_op_stats] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_ts_stats_for_mapjoin] (batchId=168)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=99)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=233)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)
org.apache.hive.hcatalog.pig.TestTextFileHCatStorer.testWriteDecimalX (batchId=181)
org.apache.hive.hcatalog.pig.TestTextFileHCatStorer.testWriteTimestamp (batchId=181)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testHttpRetryOnServerIdleTimeout (batchId=227)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6039/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6039/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6039/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6039/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6039/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6039/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 19 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12877380 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13086322">HIVE-17075</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12835256">HIVE-10924</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12852459" name="HIVE-15898.01.patch" size="65532" author="ekoifman" created="Tue, 14 Feb 2017 01:53:07 +0000"/>
                            <attachment id="12852490" name="HIVE-15898.02.patch" size="65532" author="ekoifman" created="Tue, 14 Feb 2017 04:57:37 +0000"/>
                            <attachment id="12855220" name="HIVE-15898.03.patch" size="65351" author="ekoifman" created="Tue, 28 Feb 2017 21:11:44 +0000"/>
                            <attachment id="12855271" name="HIVE-15898.04.patch" size="65351" author="ekoifman" created="Wed, 1 Mar 2017 01:10:24 +0000"/>
                            <attachment id="12876527" name="HIVE-15898.05.patch" size="65351" author="ekoifman" created="Mon, 10 Jul 2017 23:06:21 +0000"/>
                            <attachment id="12876558" name="HIVE-15898.06.patch" size="65171" author="ekoifman" created="Tue, 11 Jul 2017 04:23:28 +0000"/>
                            <attachment id="12876624" name="HIVE-15898.07.patch" size="65687" author="ekoifman" created="Tue, 11 Jul 2017 13:53:35 +0000"/>
                            <attachment id="12877014" name="HIVE-15898.08.patch" size="69332" author="ekoifman" created="Thu, 13 Jul 2017 04:18:01 +0000"/>
                            <attachment id="12877091" name="HIVE-15898.09.patch" size="69296" author="ekoifman" created="Thu, 13 Jul 2017 14:55:44 +0000"/>
                            <attachment id="12877148" name="HIVE-15898.10.patch" size="70908" author="ekoifman" created="Thu, 13 Jul 2017 19:49:36 +0000"/>
                            <attachment id="12877185" name="HIVE-15898.11.patch" size="70908" author="ekoifman" created="Thu, 13 Jul 2017 23:10:48 +0000"/>
                            <attachment id="12877353" name="HIVE-15898.12.patch" size="70949" author="ekoifman" created="Fri, 14 Jul 2017 18:10:36 +0000"/>
                            <attachment id="12877380" name="HIVE-15898.13.patch" size="70949" author="ekoifman" created="Fri, 14 Jul 2017 19:53:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Feb 2017 03:41:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12340268</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>


<item>
            <title>[HIVE-15899] Make CTAS with acid target table and insert into acid_tbl select ... union all ... work</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15899</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Consider:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create table T stored as ORC TBLPROPERTIES(&apos;transactional&apos;=&apos;true&apos;) as
      select a, b from A where a &amp;lt;= 5 union all select a, b from B where a &amp;gt;= 5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create table T (a int, b int) stored as ORC  TBLPROPERTIES (&apos;transactional&apos;=&apos;false&apos;;
insert into T(a,b) select a, b from T where a between 1 and 3 group by a, b union all select a, b from A where a between 5 and 7 union all select a, b from B where a &amp;gt;= 9
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On Tez, there is an optimization that removes Union All operator writes the data into&lt;br/&gt;
subdirectories of T (in this case T is unpartitioned).&lt;/p&gt;

&lt;p&gt;This also happens on MR but requires &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hiveConf.setBoolVar(HiveConf.ConfVars.HIVE_OPTIMIZE_UNION_REMOVE, true);
hiveConf.setVar(HiveConf.ConfVars.HIVEFETCHTASKCONVERSION, &quot;none&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Need to ensure that when target table is Acid, we generate unique ROW__IDs&lt;br/&gt;
When target is not acid, that we can convert it to Acid via Alter Table even when data layout includes subdirectories.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042705">HIVE-15899</key>
            <summary>Make CTAS with acid target table and insert into acid_tbl select ... union all ... work</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="13090938">HIVE-17204</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 22:38:51 +0000</created>
                <updated>Tue, 22 May 2018 23:59:56 +0000</updated>
                            <resolved>Wed, 20 Sep 2017 17:48:04 +0000</resolved>
                                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Transactions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15941955" author="pxiong" created="Sat, 25 Mar 2017 20:36:47 +0000"  >&lt;p&gt;Could u add some description here? &lt;/p&gt;</comment>
                            <comment id="15997547" author="ekoifman" created="Thu, 4 May 2017 22:36:10 +0000"  >&lt;p&gt;CTAS doesn&apos;t support bucketed or partitioned tables.  ErrorMsgs.CTAS_PARCOL_COEXISTENCE.&lt;br/&gt;
Bucketing is currently required for Acid.&lt;/p&gt;

&lt;p&gt;in TestAcidOnTez&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  public void testUnion() throws Exception {
    runStatementOnDriver(&quot;create temporary table if not exists data1 (x int)&quot;);
    runStatementOnDriver(&quot;create temporary table if not exists data2 (x int)&quot;);

    runStatementOnDriver(&quot;insert into data1 values (1),(2),(3)&quot;);
    runStatementOnDriver(&quot;insert into data2 values (4),(5),(6)&quot;);
    d.destroy();
    HiveConf hc = new HiveConf(hiveConf);
    setupTez(hc);
    hc.setVar(HiveConf.ConfVars.DYNAMICPARTITIONINGMODE, &quot;nonstrict&quot;);
    hc.setBoolVar(HiveConf.ConfVars.HIVE_EXPLAIN_USER, false);
    d = new Driver(hc);
    r = runStatementOnDriver(&quot;create table srcpart3 stored as orc as select x, 1, 2 from data1 union all select x, 3, 4 from data2&quot;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This creates a file system layout with 2 subfolders&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ekoifman:apache-hive-3.0.0-SNAPSHOT-bin ekoifman$ ./bin/hive --orcfiledump -j -p -d /Users/ekoifman/dev/hiverwgit/itests/hive-unit/target/tmp/org.apache.hadoop.hive.ql.TestAcidOnTez-1493936793357/warehouse/srcpart3/
Processing data file file:/Users/ekoifman/dev/hiverwgit/itests/hive-unit/target/tmp/org.apache.hadoop.hive.ql.TestAcidOnTez-1493936793357/warehouse/srcpart3/1/000000_0 [length: 291]
{&quot;x&quot;:1,&quot;_c1&quot;:1,&quot;_c2&quot;:2}
{&quot;x&quot;:2,&quot;_c1&quot;:1,&quot;_c2&quot;:2}
{&quot;x&quot;:3,&quot;_c1&quot;:1,&quot;_c2&quot;:2}
________________________________________________________________________________________________________________________

Processing data file file:/Users/ekoifman/dev/hiverwgit/itests/hive-unit/target/tmp/org.apache.hadoop.hive.ql.TestAcidOnTez-1493936793357/warehouse/srcpart3/2/000000_0 [length: 295]
{&quot;x&quot;:4,&quot;_c1&quot;:3,&quot;_c2&quot;:4}
{&quot;x&quot;:5,&quot;_c1&quot;:3,&quot;_c2&quot;:4}
{&quot;x&quot;:6,&quot;_c1&quot;:3,&quot;_c2&quot;:4}
________________________________________________________________________________________________________________________

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16013166" author="ekoifman" created="Tue, 16 May 2017 21:48:06 +0000"  >&lt;p&gt;When bucketing requirement is relaxed, CTAS can be successful.  How will acid write look like?&lt;br/&gt;
It cannot retain 1/ and 2/ subdirectories.  Should each leg rely on writerId to create a set of unique tranche files across all subdirs so that acid &quot;move&quot; can put all of them into a delta?  &lt;br/&gt;
Then how do we later remove the &quot;move&quot; for S3?&lt;/p&gt;

&lt;p&gt;perhaps it should rely on statementId and create delta_x_x_0, delta_x_x_1, etc &lt;/p&gt;</comment>
                            <comment id="16139458" author="ekoifman" created="Thu, 24 Aug 2017 01:52:50 +0000"  >&lt;p&gt;look for QB.isCTAS() and CreateTableDesc() in SemanticAnalyzer&lt;br/&gt;
TestTxnNoBuckets.testCTAS()&lt;br/&gt;
TestAcidOnTez.*&lt;/p&gt;</comment>
                            <comment id="16140919" author="ekoifman" created="Thu, 24 Aug 2017 23:23:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17205&quot; title=&quot;add functional support for unbucketed tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17205&quot;&gt;&lt;del&gt;HIVE-17205&lt;/del&gt;&lt;/a&gt; makes CTAS work with unbucketed acid table but could be optimized&lt;br/&gt;
in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17205&quot; title=&quot;add functional support for unbucketed tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17205&quot;&gt;&lt;del&gt;HIVE-17205&lt;/del&gt;&lt;/a&gt; CTAS creates an acid table but writes files w/o ROW__IDs.  Then on read they are treated like non-acid to acid conversion.&lt;/p&gt;</comment>
                            <comment id="16160043" author="hiveqa" created="Sat, 9 Sep 2017 18:34:31 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12886264/HIVE-15899.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12886264/HIVE-15899.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 32 failed/errored test(s), 11034 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[skewjoin_union_remove_1] (batchId=82)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[skewjoin_union_remove_2] (batchId=27)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_10] (batchId=23)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_12] (batchId=42)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_13] (batchId=83)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_14] (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_15] (batchId=82)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_16] (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_18] (batchId=7)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_19] (batchId=19)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_1] (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_20] (batchId=81)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_21] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_22] (batchId=74)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_23] (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_24] (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_25] (batchId=85)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_2] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_4] (batchId=7)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_5] (batchId=58)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_7] (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_8] (batchId=48)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union_remove_9] (batchId=70)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_remove_26] (batchId=156)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.ql.TestAcidOnTez.testNonStandardConversion02 (batchId=215)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarDataNucleusUnCaching (batchId=227)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testConcurrentStatements (batchId=227)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testTempTable (batchId=227)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6752/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6752/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6752/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6752/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6752/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6752/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 32 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12886264 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16161560" author="hiveqa" created="Mon, 11 Sep 2017 16:50:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12886434/HIVE-15899.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12886434/HIVE-15899.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 11034 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=61)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=143)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.ql.TestAcidOnTez.testNonStandardConversion02 (batchId=215)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6768/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6768/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6768/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6768/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6768/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6768/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12886434 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16163211" author="hiveqa" created="Tue, 12 Sep 2017 16:29:28 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12886563/HIVE-15899.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12886563/HIVE-15899.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 10 failed/errored test(s), 11041 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[create_view] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=61)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[drop_table_failure2] (batchId=89)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=234)
org.apache.hadoop.hive.ql.TestAcidOnTez.testCtasTezUnion (batchId=215)
org.apache.hadoop.hive.ql.TestAcidOnTez.testNonStandardConversion02 (batchId=215)
org.apache.hadoop.hive.ql.TestAcidOnTez.testToAcidConversionMultiBucket (batchId=215)
org.apache.hadoop.hive.ql.TestAcidOnTez.testUnionRemove (batchId=215)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6785/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6785/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6785/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6785/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6785/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6785/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12886563 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16168525" author="hiveqa" created="Fri, 15 Sep 2017 21:09:12 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887251/HIVE-15899.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12887251/HIVE-15899.05.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 202 failed/errored test(s), 6763 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=1)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=10)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=13)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=16)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=17)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=18)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=19)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=2)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=20)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=21)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=23)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=24)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=25)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=27)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=28)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=29)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=30)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=32)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=33)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=34)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=36)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=37)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=38)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=40)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=41)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=42)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=46)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=48)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=49)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=50)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=51)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=52)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=53)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=54)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=55)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=56)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=57)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=58)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=59)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=6)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=62)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=63)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=64)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=65)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=66)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=67)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=68)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=69)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=7)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=72)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=73)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=74)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=75)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=76)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=77)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=79)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=8)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=80)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=81)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=82)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=83)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=84)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=85)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=86)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=9)
org.apache.hadoop.hive.cli.TestCompareCliDriver.org.apache.hadoop.hive.cli.TestCompareCliDriver (batchId=235)
org.apache.hadoop.hive.cli.TestContribNegativeCliDriver.org.apache.hadoop.hive.cli.TestContribNegativeCliDriver (batchId=236)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=93)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=94)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=95)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=96)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=97)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=98)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[cascade_dbdrop] (batchId=237)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[generatehfiles_require_family_path] (batchId=237)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[hbase_ddl] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=142)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=156)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=157)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=158)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=162)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=163)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=169)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=170)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=171)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=172)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=100)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=99)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=89)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=90)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=91)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=102)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=104)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=105)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=107)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=108)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=109)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=110)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=111)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=112)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=113)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=114)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=116)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=117)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=118)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=120)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=122)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=123)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=124)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=125)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=126)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=127)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=128)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=129)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=130)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=131)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=132)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=133)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=134)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=135)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=136)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=137)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=138)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=139)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=140)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=241)
org.apache.hadoop.hive.ql.TestAcidOnTez.testNonStandardConversion02 (batchId=215)
org.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testWriteSetTracking1 (batchId=282)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[ambiguous_join_col] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[duplicate_alias] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[garbage] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[insert_wrong_number_columns] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_create_table] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_dot] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_function_param2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_index] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_select] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[macro_reserved_word] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[missing_overwrite] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[nonkey_groupby] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[quoted_string] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column3] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column4] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column5] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column6] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function3] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function4] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct2] (batchId=238)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6831/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6831/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6831/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6831/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6831/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6831/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 202 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12887251 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16168992" author="hiveqa" created="Sat, 16 Sep 2017 17:32:26 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887493/HIVE-15899.08.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12887493/HIVE-15899.08.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 203 failed/errored test(s), 6763 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDFSErrorHandling - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=1)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=10)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=13)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=16)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=17)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=18)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=19)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=2)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=20)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=21)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=23)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=24)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=25)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=27)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=28)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=29)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=30)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=32)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=33)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=34)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=36)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=37)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=38)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=40)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=41)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=42)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=46)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=48)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=49)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=50)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=51)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=52)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=53)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=54)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=55)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=56)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=57)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=58)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=59)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=6)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=62)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=63)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=64)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=65)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=66)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=67)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=68)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=69)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=7)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=72)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=73)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=74)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=75)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=76)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=77)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=79)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=8)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=80)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=81)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=82)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=83)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=84)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=85)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=86)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=9)
org.apache.hadoop.hive.cli.TestCompareCliDriver.org.apache.hadoop.hive.cli.TestCompareCliDriver (batchId=235)
org.apache.hadoop.hive.cli.TestContribNegativeCliDriver.org.apache.hadoop.hive.cli.TestContribNegativeCliDriver (batchId=236)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=93)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=94)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=95)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=96)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=97)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.org.apache.hadoop.hive.cli.TestHBaseCliDriver (batchId=98)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[cascade_dbdrop] (batchId=237)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[generatehfiles_require_family_path] (batchId=237)
org.apache.hadoop.hive.cli.TestHBaseNegativeCliDriver.testCliDriver[hbase_ddl] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=142)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=156)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=157)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=158)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=162)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=163)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=169)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=170)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=171)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=172)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=100)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=99)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=89)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=90)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=91)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=234)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=102)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=104)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=105)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=107)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=108)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=109)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=110)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=111)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=112)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=113)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=114)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=116)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=117)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=118)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=120)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=122)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=123)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=124)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=125)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=126)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=127)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=128)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=129)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=130)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=131)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=132)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=133)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=134)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=135)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=136)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=137)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=138)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=139)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=140)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=241)
org.apache.hadoop.hive.ql.TestAcidOnTez.testNonStandardConversion02 (batchId=215)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[ambiguous_join_col] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[duplicate_alias] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[garbage] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[insert_wrong_number_columns] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_create_table] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_dot] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_function_param2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_index] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_select] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[macro_reserved_word] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[missing_overwrite] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[nonkey_groupby] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[quoted_string] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column3] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column4] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column5] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column6] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function3] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function4] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table2] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct1] (batchId=238)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct2] (batchId=238)
org.apache.hive.jdbc.TestJdbcDriver2.testSelectExecAsync2 (batchId=225)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6837/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6837/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6837/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6837/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6837/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6837/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 203 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12887493 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16169019" author="ekoifman" created="Sat, 16 Sep 2017 18:46:13 +0000"  >&lt;p&gt;FAILED: IllegalArgumentException Unexpected Work object: class org.apache.hadoop.hive.ql.plan.StatsNoJobWork&lt;br/&gt;
FAILED: IllegalArgumentException Unexpected Work object: class org.apache.hadoop.hive.ql.plan.DDLWork&lt;/p&gt;
</comment>
                            <comment id="16169075" author="hiveqa" created="Sat, 16 Sep 2017 22:19:05 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887512/HIVE-15899.09.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12887512/HIVE-15899.09.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 30 failed/errored test(s), 11047 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_join25] (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_join_stats] (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_join_without_localtask] (batchId=1)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_14] (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_15] (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_1] (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_2] (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_3] (batchId=1)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_4] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_5] (batchId=84)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_7] (batchId=86)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[bucketsortoptimize_insert_4] (batchId=24)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[bucketsortoptimize_insert_5] (batchId=56)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[bucketsortoptimize_insert_8] (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[create_view] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[infer_bucket_sort_convert_join] (batchId=52)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mapjoin_hook] (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[runtime_skewjoin_mapjoin_spark] (batchId=53)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[tez_join_hash] (batchId=50)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udf_mask_hash] (batchId=28)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[union22] (batchId=13)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=156)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=100)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[drop_table_failure2] (batchId=89)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.ql.TestAcidOnTez.testNonStandardConversion02 (batchId=215)
org.apache.hadoop.hive.ql.security.TestMultiAuthorizationPreEventListener.org.apache.hadoop.hive.ql.security.TestMultiAuthorizationPreEventListener (batchId=220)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6839/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6839/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6839/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6839/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6839/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6839/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 30 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12887512 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16169243" author="hiveqa" created="Sun, 17 Sep 2017 09:22:30 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887533/HIVE-15899.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12887533/HIVE-15899.10.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 11048 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[create_view] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udf_mask_hash] (batchId=28)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=156)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=100)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[drop_table_failure2] (batchId=89)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=234)
org.apache.hadoop.hive.ql.TestAcidOnTez.testNonStandardConversion02 (batchId=215)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6847/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6847/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6847/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6847/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6847/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6847/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12887533 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16171785" author="hiveqa" created="Tue, 19 Sep 2017 14:24:47 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887792/HIVE-15899.11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12887792/HIVE-15899.11.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 14 failed/errored test(s), 11048 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[autoColumnStats_4] (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[create_view] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udf_mask_hash] (batchId=28)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[acid_no_buckets] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynamic_semijoin_reduction_3] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization_acid] (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sqlmerge] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=156)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=170)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[drop_table_failure2] (batchId=89)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=234)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6883/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6883/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6883/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6883/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6883/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6883/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 14 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12887792 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16171951" author="ekoifman" created="Tue, 19 Sep 2017 16:07:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; could you review please (patch 12)&lt;/p&gt;</comment>
                            <comment id="16172475" author="ekoifman" created="Tue, 19 Sep 2017 22:52:08 +0000"  >&lt;p&gt;patch13 updates the comments per RB&lt;/p&gt;</comment>
                            <comment id="16172654" author="hiveqa" created="Wed, 20 Sep 2017 03:00:32 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887985/HIVE-15899.13.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12887985/HIVE-15899.13.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 11049 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[create_view] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udf_mask_hash] (batchId=28)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=156)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=170)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[drop_table_failure2] (batchId=89)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6892/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6892/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6892/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6892/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6892/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6892/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12887985 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16172969" author="hiveqa" created="Wed, 20 Sep 2017 10:03:08 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12887985/HIVE-15899.13.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12887985/HIVE-15899.13.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 12 failed/errored test(s), 11049 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[create_view] (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[udf_mask_hash] (batchId=28)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=156)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=170)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=100)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[drop_table_failure2] (batchId=89)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=234)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6899/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6899/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6899/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6899/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6899/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6899/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12887985 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16173321" author="ekoifman" created="Wed, 20 Sep 2017 15:14:00 +0000"  >&lt;p&gt;no related failures for patch 13.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, I updated the patch per RB&lt;/p&gt;</comment>
                            <comment id="16173332" author="ashutoshc" created="Wed, 20 Sep 2017 15:23:04 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16173571" author="ekoifman" created="Wed, 20 Sep 2017 17:47:51 +0000"  >&lt;p&gt;Patch 13 committed to master (3.0)&lt;br/&gt;
Thanks Ashutosh for the review&lt;/p&gt;</comment>
                            <comment id="16174096" author="lefty@hortonworks.com" created="Thu, 21 Sep 2017 01:26:36 +0000"  >&lt;p&gt;Should this be documented in the wiki?&lt;/p&gt;

&lt;p&gt;(Also, please set the fix version to 3.0.0.)&lt;/p&gt;</comment>
                            <comment id="16174098" author="ekoifman" created="Thu, 21 Sep 2017 01:31:59 +0000"  >&lt;p&gt;I don&apos;t think this needs any additional doc.  It&apos;s an existing feature that now works properly.&lt;/p&gt;</comment>
                            <comment id="16174102" author="lefty@hortonworks.com" created="Thu, 21 Sep 2017 01:37:58 +0000"  >&lt;p&gt;Okay, thanks Eugene.&lt;/p&gt;</comment>
                            <comment id="16191700" author="steveyeom2017" created="Wed, 4 Oct 2017 17:50:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steveyeom2017&quot; class=&quot;user-hover&quot; rel=&quot;steveyeom2017&quot;&gt;Steve Yeom&lt;/a&gt; please look at this jira&lt;/p&gt;</comment>
                            <comment id="16486276" author="vgarg" created="Tue, 22 May 2018 23:59:56 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13090938">HIVE-17204</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13117088">HIVE-18021</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13050138">HIVE-16177</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12886216" name="HIVE-15899.01.patch" size="30246" author="ekoifman" created="Sat, 9 Sep 2017 02:46:02 +0000"/>
                            <attachment id="12886264" name="HIVE-15899.02.patch" size="30246" author="ekoifman" created="Sat, 9 Sep 2017 16:02:44 +0000"/>
                            <attachment id="12886434" name="HIVE-15899.03.patch" size="30368" author="ekoifman" created="Mon, 11 Sep 2017 14:23:07 +0000"/>
                            <attachment id="12886563" name="HIVE-15899.04.patch" size="44367" author="ekoifman" created="Tue, 12 Sep 2017 02:26:47 +0000"/>
                            <attachment id="12887251" name="HIVE-15899.05.patch" size="56155" author="ekoifman" created="Fri, 15 Sep 2017 03:33:12 +0000"/>
                            <attachment id="12887463" name="HIVE-15899.07.patch" size="69262" author="ekoifman" created="Sat, 16 Sep 2017 00:33:01 +0000"/>
                            <attachment id="12887493" name="HIVE-15899.08.patch" size="69262" author="ekoifman" created="Sat, 16 Sep 2017 16:10:41 +0000"/>
                            <attachment id="12887512" name="HIVE-15899.09.patch" size="70551" author="ekoifman" created="Sat, 16 Sep 2017 19:22:52 +0000"/>
                            <attachment id="12887533" name="HIVE-15899.10.patch" size="74160" author="ekoifman" created="Sun, 17 Sep 2017 04:06:02 +0000"/>
                            <attachment id="12887792" name="HIVE-15899.11.patch" size="81900" author="ekoifman" created="Tue, 19 Sep 2017 00:33:51 +0000"/>
                            <attachment id="12887921" name="HIVE-15899.12.patch" size="92867" author="ekoifman" created="Tue, 19 Sep 2017 16:07:43 +0000"/>
                            <attachment id="12887985" name="HIVE-15899.13.patch" size="92925" author="ekoifman" created="Tue, 19 Sep 2017 22:51:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Mar 2017 20:36:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue>12340268</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-15900] Beeline prints tez job progress in stdout instead of stderr</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15900</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Tez job progress messages are getting updated to stdout instead of stderr&lt;/p&gt;

&lt;p&gt;Attaching output file for below command, with the tez job status printed&lt;br/&gt;
$HIVE_HOME/bin/beeline -n &amp;lt;username&amp;gt; -p &amp;lt;password&amp;gt; -u &quot;&amp;lt;jdbc-connection-url&quot; --outputformat=tsv -e &quot;analyze table studenttab10k compute statistics;&quot; &amp;gt; stdout&lt;/p&gt;</description>
                <environment></environment>
        <key id="13042708">HIVE-15900</key>
            <summary>Beeline prints tez job progress in stdout instead of stderr</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas M Nair</assignee>
                                    <reporter username="asreekumar">Aswathy Chellammal Sreekumar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2017 22:40:39 +0000</created>
                <updated>Tue, 25 Jul 2017 20:05:10 +0000</updated>
                            <resolved>Thu, 16 Feb 2017 19:44:20 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15867158" author="githubbot" created="Wed, 15 Feb 2017 03:39:41 +0000"  >&lt;p&gt;GitHub user thejasmn opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/148&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/148&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15900&quot; title=&quot;Beeline prints tez job progress in stdout instead of stderr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15900&quot;&gt;&lt;del&gt;HIVE-15900&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/thejasmn/hive&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/thejasmn/hive&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15900&quot; title=&quot;Beeline prints tez job progress in stdout instead of stderr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15900&quot;&gt;&lt;del&gt;HIVE-15900&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/hive/pull/148.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hive/pull/148.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #148&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 73a2b4be8e30d3dfa8c5f974540f6c8a43da4327&lt;br/&gt;
Author: Thejas M Nair &amp;lt;thejas@hortonworks.com&amp;gt;&lt;br/&gt;
Date:   2017-02-14T06:43:50Z&lt;/p&gt;

&lt;p&gt;    refactor tests to specifically test stdout/stderr&lt;/p&gt;

&lt;p&gt;commit 45f7b9347fedf9b5f0c213c493f0a4d2e729e5c9&lt;br/&gt;
Author: Thejas M Nair &amp;lt;thejas@hortonworks.com&amp;gt;&lt;br/&gt;
Date:   2017-02-14T19:45:45Z&lt;/p&gt;

&lt;p&gt;    improve minihs2 tez type usage&lt;/p&gt;

&lt;p&gt;commit 06751edf48c2c81f04a479ad0f000c5d6b370d32&lt;br/&gt;
Author: Thejas M Nair &amp;lt;thejas@hortonworks.com&amp;gt;&lt;br/&gt;
Date:   2017-02-15T03:38:12Z&lt;/p&gt;

&lt;p&gt;    the beeline fix and test updates&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15867159" author="thejas" created="Wed, 15 Feb 2017 03:40:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anishek&quot; class=&quot;user-hover&quot; rel=&quot;anishek&quot;&gt;anishek&lt;/a&gt; Can you please review ?&lt;/p&gt;</comment>
                            <comment id="15867165" author="thejas" created="Wed, 15 Feb 2017 03:44:10 +0000"  >&lt;p&gt;As part of the adding test for the fix, I also refactored TestBeeLineWithArgs.java  so that it checks for the expected strings in a specific output stream (stdout vs stderr).&lt;/p&gt;</comment>
                            <comment id="15867545" author="thejas" created="Wed, 15 Feb 2017 09:42:04 +0000"  >&lt;p&gt;Updated patch to address review comments&lt;/p&gt;</comment>
                            <comment id="15868477" author="thejas" created="Wed, 15 Feb 2017 19:58:53 +0000"  >&lt;p&gt;Attached 3.patch addressing review comments and fixing a test case (testShowDbInPrompt).&lt;/p&gt;</comment>
                            <comment id="15868496" author="daijy" created="Wed, 15 Feb 2017 20:16:25 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15868833" author="hiveqa" created="Wed, 15 Feb 2017 23:56:39 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852894/HIVE-15900.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852894/HIVE-15900.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 20 failed/errored test(s), 10224 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_4] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby10] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby3_noskew_multi_distinct] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby_multi_single_reducer] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[limit_partition_metadataonly] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[load_dyn_part4] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[mapjoin_filter_on_outerjoin] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[smb_mapjoin_14] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[stats18] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union3] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union_remove_21] (batchId=121)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3577/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3577/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3577/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3577/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3577/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3577/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 20 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852894 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15869119" author="thejas" created="Thu, 16 Feb 2017 04:02:13 +0000"  >&lt;p&gt;Attaching same file again, many of the failed test pass locally.&lt;/p&gt;</comment>
                            <comment id="15869203" author="anishek" created="Thu, 16 Feb 2017 05:09:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15869706" author="hiveqa" created="Thu, 16 Feb 2017 10:39:39 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12852970/HIVE-15900.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12852970/HIVE-15900.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10224 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cbo_rp_auto_join1] (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[join31] (batchId=81)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multiMapJoin2] (batchId=152)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=123)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join31] (batchId=133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3593/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3593/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/3593/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/3593/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-3593/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-3593/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12852970 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15870588" author="thejas" created="Thu, 16 Feb 2017 19:44:20 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anishek&quot; class=&quot;user-hover&quot; rel=&quot;anishek&quot;&gt;anishek&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15870592" author="thejas" created="Thu, 16 Feb 2017 19:45:41 +0000"  >&lt;p&gt;Created new jiras under &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15058&quot; title=&quot;[Umbrella] Current Flaky Tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15058&quot;&gt;HIVE-15058&lt;/a&gt; to track failures unrelated to this change (seem to be happening since Feb 14).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13029374">HIVE-15473</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12852728" name="HIVE-15900.1.patch" size="22057" author="thejas" created="Wed, 15 Feb 2017 03:41:53 +0000"/>
                            <attachment id="12852781" name="HIVE-15900.2.patch" size="21980" author="thejas" created="Wed, 15 Feb 2017 09:42:04 +0000"/>
                            <attachment id="12852970" name="HIVE-15900.3.patch" size="23655" author="thejas" created="Thu, 16 Feb 2017 04:01:32 +0000"/>
                            <attachment id="12852894" name="HIVE-15900.3.patch" size="23655" author="thejas" created="Wed, 15 Feb 2017 19:57:33 +0000"/>
                            <attachment id="12852437" name="std_out" size="1218" author="asreekumar" created="Mon, 13 Feb 2017 23:19:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Feb 2017 03:39:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a0pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
