<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:18:39 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2011-7-27+AND+created+%3C%3D+2011-8-3+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="24" total="24"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2313] RPM/DEB package integration with Hadoop</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2313</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In the past Hadoop related projects are self organized to have file layout look like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$PROJECT_HOME/bin
             /conf/$PROJECT-env.sh
             /lib/*.jar
             /docs
             /src
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Software are deployed in isolated directory, and dependent projects are using environment variables to reference each other.  This approach works fine for tarball and small software stack.  In order to scale the Hadoop stack of software, and there is a proposal in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6255&quot; title=&quot;Create an rpm integration project&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6255&quot;&gt;&lt;del&gt;HADOOP-6255&lt;/del&gt;&lt;/a&gt; to improve the file system layout as a merged system.  Hadoop related projects are recommended to use this new layout:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$PROJECT_PREFIX/bin
               /etc/$PROJECT
               /lib (native C libraries)
               /share/$PROJECT (jar files)
               /share/$PROJECT/lib (third party dependent jar files)
               /share/doc/$PROJECT
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Where PROJECT_PREFIX is by default /usr.  Hive can locate hadoop jar files by referencing to $PROJECT_PREFIX/share/hadoop/common/hadoop-*-core.jar.  The system can operate by untar the tarball or install RPM packages to the same PREFIX location.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 6, Linux&lt;/p&gt;</environment>
        <key id="12515474">HIVE-2313</key>
            <summary>RPM/DEB package integration with Hadoop</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eyang">Eric Yang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2011 01:07:53 +0000</created>
                <updated>Tue, 13 Sep 2011 21:09:33 +0000</updated>
                                            <version>0.8.0</version>
                                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2314] JDBC HiveConnection.close() throws an exception: Error while cleaning up the server resources, caused by: org.apache.thrift.TApplicationException: Invalid method name: &apos;clean&apos;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2314</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;From time to time, when calling JDBC HiveConnection.close() an exception is thrown:&lt;/p&gt;

&lt;p&gt;Connection.close()&lt;br/&gt;
java.sql.SQLException: Error while cleaning up the server resources&lt;br/&gt;
      at org.apache.hadoop.hive.jdbc.HiveConnection.close(HiveConnection.java:134)&lt;br/&gt;
      at net.sf.log4jdbc.ConnectionSpy.close(ConnectionSpy.java:896)&lt;br/&gt;
      at org.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection(DataSourceUtils.java:313)&lt;br/&gt;
      at org.springframework.jdbc.datasource.DataSourceUtils.releaseConnection(DataSourceUtils.java:274)&lt;br/&gt;
      at org.springframework.jdbc.datasource.DataSourceUtils$ConnectionSynchronization.beforeCompletion(DataSourceUtils.java:428)&lt;br/&gt;
      at org.springframework.transaction.support.TransactionSynchronizationUtils.triggerBeforeCompletion(TransactionSynchronizationUtils.java:84)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.thrift.TApplicationException: Invalid method name: &apos;clean&apos;&lt;br/&gt;
      at org.apache.thrift.TApplicationException.read(TApplicationException.java:108)&lt;br/&gt;
      at org.apache.hadoop.hive.service.ThriftHive$Client.recv_clean(ThriftHive.java:418)&lt;br/&gt;
      at org.apache.hadoop.hive.service.ThriftHive$Client.clean(ThriftHive.java:402)&lt;br/&gt;
      at org.apache.hadoop.hive.jdbc.HiveConnection.close(HiveConnection.java:132)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12515516">HIVE-2314</key>
            <summary>JDBC HiveConnection.close() throws an exception: Error while cleaning up the server resources, caused by: org.apache.thrift.TApplicationException: Invalid method name: &apos;clean&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ihadanny">Ido Hadanny</reporter>
                        <labels>
                            <label>jdbc</label>
                    </labels>
                <created>Wed, 27 Jul 2011 11:24:28 +0000</created>
                <updated>Mon, 4 Aug 2014 09:25:58 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13126458" author="chinnalalam" created="Thu, 13 Oct 2011 09:29:23 +0000"  >&lt;p&gt;Hi Ido Hadanny,&lt;/p&gt;

&lt;p&gt;Can u update what is the scenario.  &lt;/p&gt;

&lt;p&gt;Create connection and close that connection not throwing any exception and same thing is automated in this test case &quot;org.apache.hadoop.hive.jdbc.TestJdbcDriver&quot;.&lt;/p&gt;</comment>
                            <comment id="14084464" author="4d1in3" created="Mon, 4 Aug 2014 09:25:58 +0000"  >&lt;p&gt;This issue occurs when hive connection is used in threads. When one thread using hive connection is executing a query while another thread is trying close the same hive connection&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Oct 2011 09:29:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42176</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2315] DatabaseMetadata.getColumns() does not return partition column names for a table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2315</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;getColumns() method of DatabaseMetadata for HIVE JDBC Driver does not return the partition column names. Where as from HIVE CLI, if you do a &apos;describe tablename&apos; you get all columns including the partition columns. It would be nice if getColumns() method returns all columns.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515548">HIVE-2315</key>
            <summary>DatabaseMetadata.getColumns() does not return partition column names for a table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="mgk.424@gmail.com">Mythili Gopalakrishnan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2011 16:46:38 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:28 +0000</updated>
                            <resolved>Thu, 18 Aug 2011 21:39:27 +0000</resolved>
                                    <version>0.7.1</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13080127" author="phunt" created="Fri, 5 Aug 2011 18:27:22 +0000"  >&lt;p&gt;use get_schema rather than get_fields. Verified via unit test as well as via squirrel.&lt;/p&gt;</comment>
                            <comment id="13080900" author="mgk.424@gmail.com" created="Mon, 8 Aug 2011 11:17:53 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I applied this patch and confirm that it fixes this issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2315&quot; title=&quot;DatabaseMetadata.getColumns() does not return partition column names for a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2315&quot;&gt;&lt;del&gt;HIVE-2315&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;However it does NOT fix issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1573&quot; title=&quot;select * from partitioned table via JDBC does not return partition columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1573&quot;&gt;&lt;del&gt;HIVE-1573&lt;/del&gt;&lt;/a&gt;. When I do a select * from a partitioned column, I don&apos;t see the partition columns as part of the resultset.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13081056" author="phunt" created="Mon, 8 Aug 2011 16:57:23 +0000"  >&lt;p&gt;Hi Mythili can you give an example of the query you are running? i.e. steps how to reproduce.&lt;/p&gt;

&lt;p&gt;When I run the following from hive:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create table foo2 (a string, b string, c string) partitioned by (dt string) row format delimited fields terminated by &apos;\t&apos;;
load data local inpath &apos;./data.txt&apos; overwrite into table foo2 partition (dt=&apos;8&apos;);
load data local inpath &apos;./data.txt&apos; overwrite into table foo2 partition (dt=&apos;9&apos;);
select * from foo2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I see dt in the output (hive cli). &lt;/p&gt;

&lt;p&gt;When I run &quot;select * from foo2&quot; from Squirrel I also see dt in the output after applying this patch (I also see dt in the metadata reported by Squirrel for the table).&lt;/p&gt;</comment>
                            <comment id="13081063" author="phunt" created="Mon, 8 Aug 2011 17:15:57 +0000"  >&lt;p&gt;waiting for feedback from Mythili.&lt;/p&gt;</comment>
                            <comment id="13081067" author="mgk.424@gmail.com" created="Mon, 8 Aug 2011 17:17:38 +0000"  >&lt;p&gt;Patrick&lt;/p&gt;

&lt;p&gt;This is exactly what I have done as well. I use a tool called DBVizualizer, very similar to Squirrel. When I click on foo2, I see the partition columns, but when I do a select *, I don&apos;t see the partition columns.&lt;/p&gt;

&lt;p&gt;One thing I noticed (please pardon my ignorance as I have not had a chance to look deep into the HIVE JDBC driver source code) is that the patch listed only 2 files to patch, HiveDatabaseMetaData.java and TestJdbcDriver.java. Is it missing some other file that would have included the changes for the query part?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Mythili &lt;/p&gt;</comment>
                            <comment id="13081115" author="phunt" created="Mon, 8 Aug 2011 18:34:56 +0000"  >&lt;p&gt;Updated test to explicitly verify that JDBC result set contains the partition column on a &quot;select * from t&quot;. Otw the code is unchanged.&lt;/p&gt;</comment>
                            <comment id="13081117" author="phunt" created="Mon, 8 Aug 2011 18:41:50 +0000"  >&lt;p&gt;Mythili, please take a look at the &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2315&quot; title=&quot;DatabaseMetadata.getColumns() does not return partition column names for a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2315&quot;&gt;&lt;del&gt;HIVE-2315&lt;/del&gt;&lt;/a&gt;_part2.patch file I just attached to this jira. The existing tests were not strongly verifying that &quot;select * from table&quot; was returning the partition column as part of the result set. I updated the test to do so. However subsequently the test is still passing (I verified in the debugger that this code is being executed).&lt;/p&gt;

&lt;p&gt;Please take a look at this test:&lt;br/&gt;
org.apache.hadoop.hive.jdbc.TestJdbcDriver.doTestSelectAll(String, int, int)&lt;br/&gt;
called from here:&lt;br/&gt;
org.apache.hadoop.hive.jdbc.TestJdbcDriver.testSelectAllPartioned()&lt;/p&gt;

&lt;p&gt;So, afaict, we are returning the partition column as part of the result set. (I&apos;m also seeing this in squirrel as I mentioned).&lt;/p&gt;

&lt;p&gt;Can you take a look at your setup again? Perhaps there is another issue somewhere in the Hive JDBC driver that&apos;s causing DBVizualizer to display this problem while Squirrel is fine?&lt;/p&gt;
</comment>
                            <comment id="13082973" author="mgk.424@gmail.com" created="Thu, 11 Aug 2011 07:08:38 +0000"  >&lt;p&gt;Patrick, it is my fault, I forgot to update the jars on the server side. Once I did that, I see the partition columns when I do a select * from foo2. This issue is fixed.&lt;/p&gt;</comment>
                            <comment id="13083250" author="phunt" created="Thu, 11 Aug 2011 17:28:41 +0000"  >&lt;p&gt;Updated to a single patch with fix and both sets of tests.&lt;/p&gt;</comment>
                            <comment id="13083257" author="jiraposter@reviews.apache.org" created="Thu, 11 Aug 2011 17:32:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1468/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1468/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch fixes the problem and adds a couple of tests.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2315&quot; title=&quot;DatabaseMetadata.getColumns() does not return partition column names for a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2315&quot;&gt;&lt;del&gt;HIVE-2315&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2315&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2315&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java d570fca &lt;br/&gt;
  jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java d72cf43 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1468/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1468/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;units pass, a user also verified it fixed the issue they were seeing.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Patrick&lt;/p&gt;
</comment>
                            <comment id="13086019" author="cwsteinbach" created="Tue, 16 Aug 2011 22:17:06 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13087316" author="cwsteinbach" created="Thu, 18 Aug 2011 21:39:27 +0000"  >&lt;p&gt;Committed to trunk. Thanks Patrick!&lt;/p&gt;</comment>
                            <comment id="13087473" author="hudson" created="Fri, 19 Aug 2011 03:01:53 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #903 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/903/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/903/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2315&quot; title=&quot;DatabaseMetadata.getColumns() does not return partition column names for a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2315&quot;&gt;&lt;del&gt;HIVE-2315&lt;/del&gt;&lt;/a&gt;. DatabaseMetadata.getColumns() does not return partition column names for a table (Patrick Hunt via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159423&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159423&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDatabaseMetaData.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hadoop/hive/jdbc/TestJdbcDriver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13149933" author="dougsedlak" created="Mon, 14 Nov 2011 21:23:40 +0000"  >&lt;p&gt;For an &apos;int&apos; partition column, the &apos;getColumnTypeName&apos; metadata call is returning type &apos;string&apos;.  However, a DESCRIBE correctly returns type &apos;int&apos;.  Seems like a bug if it replicates for others?  I have the patched code in place on both client and server.  Thanks!&lt;/p&gt;

&lt;p&gt;Sample table is:&lt;br/&gt;
create EXTERNAL table partition_by_int (str_val string) PARTITIONED BY (int_col INT) ROW FORMAT delimited fields terminated by &apos;,&apos; STORED AS TEXTFILE;&lt;/p&gt;

&lt;p&gt;And (shortened) JDBC code is:&lt;br/&gt;
  res = stmt.executeQuery(&quot;select * from partition_by_int&quot;);&lt;br/&gt;
  ResultSetMetaData metaData = res.getMetaData();&lt;br/&gt;
  for (int i = 0; i &amp;lt; metaData.getColumnCount(); i++) &lt;/p&gt;
{
     System.out.print(metaData.getColumnName(i + 1) + &quot;  \t&quot;);
     System.out.print(metaData.getColumnDisplaySize(i + 1) + &quot;\t&quot;);
     System.out.println(metaData.getColumnTypeName(i + 1));
  }
&lt;p&gt;With output:&lt;br/&gt;
str_val         2147483647      string&lt;br/&gt;
int_col         2147483647      string&lt;/p&gt;

&lt;p&gt;In contrast, DESCRIBE partition_by_int generates:&lt;br/&gt;
str_val string&lt;br/&gt;
int_col int&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12472052">HIVE-1573</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12472052">HIVE-1573</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12472052">HIVE-1573</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490134" name="HIVE-2315.patch" size="4499" author="phunt" created="Thu, 11 Aug 2011 17:28:41 +0000"/>
                            <attachment id="12489509" name="HIVE-2315.patch" size="3026" author="phunt" created="Fri, 5 Aug 2011 18:27:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Aug 2011 18:27:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37472</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ikn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30106</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2316] MapJoin optimizer can make the wrong decision on compressed tables</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2316</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With hive.auto.convert.join = true, it appears that when the small tables are compressed, the optimizer cannot properly guess the size of the in-memory tables. It proceeds with a MapJoin based on the compressed size, instead of falling back to a CommonJoin.&lt;/p&gt;

&lt;p&gt;This can sometimes result in a OOME from the map tasks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515560">HIVE-2316</key>
            <summary>MapJoin optimizer can make the wrong decision on compressed tables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="patrickangeles">Patrick Angeles</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2011 18:56:58 +0000</created>
                <updated>Thu, 2 May 2013 02:29:52 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12512486">HIVE-2250</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42175</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2317] Create a tool to MAP a function across an array.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2317</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Request: A function, say FUNCTION_MAP, that will map a function (udf or native) across an array, returning the result. Desired syntax:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;bar:
arr      foo
[1,2,3]  3
[4,5,2]  2
[7,7,6]  1

SELECT FUNCTION_MAP(arr, &lt;span class=&quot;code-quote&quot;&gt;&apos;LOG2&apos;&lt;/span&gt;) FROM bar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...should then return&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[0, 0.301, 0.477]
[0.602, 0.699, 0.301]
[0.778, 0.778, 0.845]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...ideally, FUNCTION_MAP would take additional arguments which would be passed to the function.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515567">HIVE-2317</key>
            <summary>Create a tool to MAP a function across an array.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2011 19:53:56 +0000</created>
                <updated>Wed, 27 Jul 2011 19:53:56 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42174</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2318] Support multiple file systems</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2318</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently some of the Hive tasks like MoveTask, ConditionalMergeResolver assume that the data is being copied or moved on the same file system.&lt;/p&gt;

&lt;p&gt;These operators file if the source table is in one filesystem (like HDFS) and destination table is in another file system (like s3).&lt;/p&gt;

&lt;p&gt;This patch aims at:&lt;/p&gt;

&lt;p&gt;1. Support moving data between different file systems.&lt;br/&gt;
2. Add support for file systems which do not support &apos;move&apos; operation like s3.&lt;br/&gt;
3. Remove redundant operations like moving data from and to the same location.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515577">HIVE-2318</key>
            <summary>Support multiple file systems</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="vaggarw">Vaibhav Aggarwal</assignee>
                                    <reporter username="vaggarw">Vaibhav Aggarwal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2011 21:17:19 +0000</created>
                <updated>Mon, 15 Aug 2011 21:57:43 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13072036" author="jiraposter@reviews.apache.org" created="Wed, 27 Jul 2011 21:37:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1210/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1210/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Support multiple file systems&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2318&quot; title=&quot;Support multiple file systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2318&quot;&gt;HIVE-2318&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2318&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2318&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/Context.java 1a1ffc5 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java c031f40 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java c9e61a1 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java c6f6755 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java a57f9cf &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java 092a5cd &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 337a8eb &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ImportSemanticAnalyzer.java 3001575 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/LoadSemanticAnalyzer.java 6f311c6 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java e1febc3 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ConditionalResolverMergeFiles.java 5c09789 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/DynamicPartitionCtx.java 29cfe9d &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1210/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1210/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Vaibhav&lt;/p&gt;
</comment>
                            <comment id="13072544" author="cwsteinbach" created="Thu, 28 Jul 2011 21:35:01 +0000"  >&lt;p&gt;@Vaibav: Is this patch ready for review? If so, please attach the patch to this ticket and click &quot;Submit Patch&quot;. Thanks.&lt;/p&gt;</comment>
                            <comment id="13079233" author="cwsteinbach" created="Thu, 4 Aug 2011 05:41:35 +0000"  >&lt;p&gt;@Vaibhav: It&apos;s going to take me a while to review this patch. In the meantime I think the biggest problem is that there are no test cases. I understand that adding test coverage for this particular feature is hard, but without tests I&apos;m worried that it&apos;s going to be impossible to maintain this feature due to the significant differences in behavior between S3 and HDFS. Can you think of a way that we can run test queries against an S3 filesystem? Maybe we should think about adding a MockS3FileSystem? Does anything like that already exist at Amazon?&lt;/p&gt;</comment>
                            <comment id="13079234" author="cwsteinbach" created="Thu, 4 Aug 2011 05:44:06 +0000"  >&lt;p&gt;Should the title of this ticket be changed to &quot;Support S3 Filesystem&quot;?&lt;/p&gt;</comment>
                            <comment id="13079604" author="vaggarw" created="Thu, 4 Aug 2011 21:23:29 +0000"  >&lt;p&gt;@Carl&lt;br/&gt;
You would notice that 70% of the code deals with &lt;/p&gt;

&lt;p&gt;1. Supporting reading with one file system and writing to another in the same query.&lt;br/&gt;
2. Writing directly to result directory if the file system does not support move.&lt;/p&gt;

&lt;p&gt;S3FileSystem serves as a specific example in this case because of which I choose this title.&lt;/p&gt;</comment>
                            <comment id="13079606" author="vaggarw" created="Thu, 4 Aug 2011 21:25:27 +0000"  >&lt;p&gt;I am thinking of writing some unit tests testing individual methods in order to simplify testing.&lt;br/&gt;
What do you think?&lt;/p&gt;</comment>
                            <comment id="13079694" author="jvs" created="Fri, 5 Aug 2011 00:11:21 +0000"  >&lt;p&gt;Besides mock-based unit tests, it would also be useful to have a way to configure test runs against a real S3 filesystem.  (By default that configuration would be disabled for running Hive unit tests.)  That way, if we want to say that a particular Hive release has working S3 support, we would make that one of the release criteria and perform the system testing on release candidates.&lt;/p&gt;</comment>
                            <comment id="13085357" author="cwsteinbach" created="Mon, 15 Aug 2011 21:53:10 +0000"  >&lt;p&gt;The patch causes several test failures:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;TestContribCliDriver  fileformat_base64.q&lt;/li&gt;
	&lt;li&gt;TestCliDriver  escape1.q&lt;/li&gt;
	&lt;li&gt;TestNegativeCliDriver  fileformat_void_input.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13085362" author="cwsteinbach" created="Mon, 15 Aug 2011 21:57:43 +0000"  >&lt;p&gt;@Vaibhav: I think John&apos;s suggestion for testing is the way to go. Can you please add this to the next version of the patch?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488137" name="HIVE-2318.patch" size="33132" author="vaggarw" created="Thu, 28 Jul 2011 21:41:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Jul 2011 21:37:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2319] Calling alter_table after changing partition comment throws an exception</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2319</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Altering a table&apos;s partition key comments raises an InvalidOperationException.  The partition key name and type should not be mutable, but the comment should be able to get changed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515608">HIVE-2319</key>
            <summary>Calling alter_table after changing partition comment throws an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sohanjain">Sohan Jain</assignee>
                                    <reporter username="sohanjain">Sohan Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2011 06:23:17 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:01 +0000</updated>
                            <resolved>Mon, 8 Aug 2011 18:43:00 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13072215" author="jiraposter@reviews.apache.org" created="Thu, 28 Jul 2011 06:55:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1213/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Altering a table&apos;s partition key comments raises an InvalidOperationException. The partition key name and type should not be mutable, but the comment should be able to get changed.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; title=&quot;Calling alter_table after changing partition comment throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2319&quot;&gt;&lt;del&gt;HIVE-2319&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2319&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1151219 &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java 1151219 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1213/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added some test cases to HiveMetaStore that pass.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13072219" author="jiraposter@reviews.apache.org" created="Thu, 28 Jul 2011 07:07:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1213/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-07-28 07:06:24.236980)&lt;/p&gt;


&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fixed some of the test case logic.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Altering a table&apos;s partition key comments raises an InvalidOperationException. The partition key name and type should not be mutable, but the comment should be able to get changed.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; title=&quot;Calling alter_table after changing partition comment throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2319&quot;&gt;&lt;del&gt;HIVE-2319&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2319&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1151219 &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java 1151219 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1213/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added some test cases to HiveMetaStore that pass.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13072552" author="jiraposter@reviews.apache.org" created="Thu, 28 Jul 2011 21:52:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1213/#review1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/#review1215&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1213/#comment2712&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/#comment2712&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Actually, we can&apos;t allow for a different ordering because that would imply a different directory structure. We should just make sure that everything but the comments are equal.&lt;/p&gt;



&lt;p&gt;trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1213/#comment2713&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/#comment2713&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Message should say - it was able to change when it shouldn&apos;t have?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Paul&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-07-28 07:06:24, Sohan Jain wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1213/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-07-28 07:06:24)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Altering a table&apos;s partition key comments raises an InvalidOperationException. The partition key name and type should not be mutable, but the comment should be able to get changed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; title=&quot;Calling alter_table after changing partition comment throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2319&quot;&gt;&lt;del&gt;HIVE-2319&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2319&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1151219 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java 1151219 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1213/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added some test cases to HiveMetaStore that pass.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Sohan&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13072597" author="jiraposter@reviews.apache.org" created="Thu, 28 Jul 2011 23:26:09 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-07-28 21:51:59, Paul Yang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java, lines 232-233&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1213/diff/2/?file=28094#file28094line232&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff/2/?file=28094#file28094line232&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Actually, we can&apos;t allow for a different ordering because that would imply a different directory structure. We should just make sure that everything but the comments are equal.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok cool, that cleans up the code quite a bit.  The previous implementation only checked if the partition key lists were of the same size, and one contained all elements of the other.  That is, it did not ensure ordering.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-07-28 21:51:59, Paul Yang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java, line 1036&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1213/diff/2/?file=28095#file28095line1036&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff/2/?file=28095#file28095line1036&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Message should say - it was able to change when it shouldn&apos;t have?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Sohan&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1213/#review1215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/#review1215&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-07-28 07:06:24, Sohan Jain wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1213/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-07-28 07:06:24)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Altering a table&apos;s partition key comments raises an InvalidOperationException. The partition key name and type should not be mutable, but the comment should be able to get changed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; title=&quot;Calling alter_table after changing partition comment throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2319&quot;&gt;&lt;del&gt;HIVE-2319&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2319&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1151219 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java 1151219 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1213/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added some test cases to HiveMetaStore that pass.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Sohan&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13072598" author="jiraposter@reviews.apache.org" created="Thu, 28 Jul 2011 23:28:10 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1213/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-07-28 23:26:15.868719)&lt;/p&gt;


&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;-made changes based on Paul&apos;s comments&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Altering a table&apos;s partition key comments raises an InvalidOperationException. The partition key name and type should not be mutable, but the comment should be able to get changed.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; title=&quot;Calling alter_table after changing partition comment throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2319&quot;&gt;&lt;del&gt;HIVE-2319&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2319&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1152020 &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java 1152020 &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java 1152020 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1213/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added some test cases to HiveMetaStore that pass.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13079470" author="jiraposter@reviews.apache.org" created="Thu, 4 Aug 2011 17:06:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1213/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-04 17:05:08.413032)&lt;/p&gt;


&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Removed a change in TestMetaStoreEventListener.java that somehow snuck in this diff.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Altering a table&apos;s partition key comments raises an InvalidOperationException. The partition key name and type should not be mutable, but the comment should be able to get changed.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; title=&quot;Calling alter_table after changing partition comment throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2319&quot;&gt;&lt;del&gt;HIVE-2319&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2319&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java 1153927 &lt;br/&gt;
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java 1153927 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1213/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1213/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added some test cases to HiveMetaStore that pass.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13079505" author="pauly" created="Thu, 4 Aug 2011 17:58:27 +0000"  >&lt;p&gt;+1 Will test and commit&lt;/p&gt;</comment>
                            <comment id="13081113" author="he yongqiang" created="Mon, 8 Aug 2011 18:30:27 +0000"  >&lt;p&gt;tests passed for me (except a few SIGSEGV errors, should be fine)&lt;/p&gt;</comment>
                            <comment id="13081119" author="pauly" created="Mon, 8 Aug 2011 18:43:00 +0000"  >&lt;p&gt;Committed. Thanks Sohan!&lt;/p&gt;</comment>
                            <comment id="13081176" author="nzhang" created="Mon, 8 Aug 2011 20:39:20 +0000"  >&lt;p&gt;Yongqiang, can you elaborate on why you got SIGSEGV and they are fine? &lt;/p&gt;</comment>
                            <comment id="13081327" author="hudson" created="Tue, 9 Aug 2011 00:20:10 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #881 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/881/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/881/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2319&quot; title=&quot;Calling alter_table after changing partition comment throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2319&quot;&gt;&lt;del&gt;HIVE-2319&lt;/del&gt;&lt;/a&gt;. Calling alter_table after changing partition comment throws an exception (Sohan Jain via pauly)&lt;/p&gt;

&lt;p&gt;pauly : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1155052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1155052&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488071" name="HIVE-2319.2.patch" size="4851" author="sohanjain" created="Thu, 28 Jul 2011 07:07:45 +0000"/>
                            <attachment id="12488152" name="HIVE-2319.3.patch" size="5913" author="sohanjain" created="Thu, 28 Jul 2011 23:26:23 +0000"/>
                            <attachment id="12489365" name="HIVE-2319.4.patch" size="4610" author="sohanjain" created="Thu, 4 Aug 2011 17:06:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Jul 2011 06:55:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2320] Implement setCatalog() and allow setting active database to a database other than &quot;default&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2320</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, the JDBC driver always use &quot;default&quot; as the schema/database. We should allow setting the active schema to another schema.&lt;/p&gt;

&lt;p&gt;1. implement the setCatalog() method&lt;br/&gt;
2. modify HiveConnection constructor to take the schema from the URL and call setCatalog&lt;br/&gt;
3. change configureConnection() and execute &quot;use &amp;lt;schema&amp;gt;;&quot; statement &lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-675&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-675&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515616">HIVE-2320</key>
            <summary>Implement setCatalog() and allow setting active database to a database other than &quot;default&quot;</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12428762">HIVE-576</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="orenlederman">Oren Lederman</reporter>
                        <labels>
                            <label>jdbc</label>
                    </labels>
                <created>Thu, 28 Jul 2011 08:40:05 +0000</created>
                <updated>Wed, 27 Nov 2013 17:12:47 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13076176" author="orenlederman" created="Tue, 2 Aug 2011 12:54:05 +0000"  >&lt;p&gt;I considered two alternatives:&lt;br/&gt;
1. The one I used in the patch above - setting a local database variable in the constructor calling setCatalog() after calling configureConnection().&lt;br/&gt;
2. Setting a global database variable and calling setCatalog() from configureConnection()&lt;/p&gt;</comment>
                            <comment id="13087492" author="cwsteinbach" created="Fri, 19 Aug 2011 03:27:03 +0000"  >&lt;p&gt;@Oren: Can you please submit the patch again and this time check the &quot;Grant license to ASF for inclusion in ASF works&quot; box at the bottom? We can&apos;t include the patch in Hive until you do this. Thanks!&lt;/p&gt;</comment>
                            <comment id="13104458" author="orenlederman" created="Wed, 14 Sep 2011 12:27:49 +0000"  >&lt;p&gt;Patch for fixing the issue. This time with the grant license to ASF option&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12530804">HIVE-2564</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12681614">HIVE-5904</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12494436" name="HIVE-2320.Implement-setCatalog-and-allow-setting-active-database-to-a-database-other-than-default.1.patch" size="2150" author="orenlederman" created="Wed, 14 Sep 2011 12:27:49 +0000"/>
                            <attachment id="12488884" name="HIVE-2320.Implement-setCatalog-and-allow-setting-active-database-to-a-database-other-than-default.1.patch" size="2150" author="orenlederman" created="Tue, 2 Aug 2011 12:51:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 03:27:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2321] Jobs fail due to issues in regexp() based UDFs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2321</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;regexp_extract() fails when its not possible to extract the string. Its better to return NULL/empty string than to fail.&lt;/p&gt;

&lt;p&gt;Will also peek into similar UDFs if possible and fix/at-least enhance tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515625">HIVE-2321</key>
            <summary>Jobs fail due to issues in regexp() based UDFs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="thiruvel">Thiruvel Thirumoolan</assignee>
                                    <reporter username="thiruvel">Thiruvel Thirumoolan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2011 10:20:15 +0000</created>
                <updated>Tue, 13 Sep 2011 21:09:33 +0000</updated>
                                            <version>0.8.0</version>
                                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13072283" author="thiruvel" created="Thu, 28 Jul 2011 10:21:15 +0000"  >&lt;p&gt;Prelim patch for regexp_extract(), no test cases.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488082" name="RegexpExtractBug.patch" size="842" author="thiruvel" created="Thu, 28 Jul 2011 10:21:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123804</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2322] Add ColumnarSerDe to the list of native SerDes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2322</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We store metadata about ColumnarSerDes in the metastore, so it should be considered a native SerDe.  Then, column information can be retrieved from the metastore instead of from deserialization.&lt;/p&gt;

&lt;p&gt;Currently, for non-native SerDes, column comments are only shown as &quot;from deserializer&quot;.  Adding ColumnarSerDe to the list of native SerDes will persist column comments.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt; for persisting the column comments of custom SerDes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515705">HIVE-2322</key>
            <summary>Add ColumnarSerDe to the list of native SerDes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sohanjain">Sohan Jain</assignee>
                                    <reporter username="sohanjain">Sohan Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2011 21:01:08 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:24 +0000</updated>
                            <resolved>Mon, 29 Aug 2011 19:12:09 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Metastore</component>
                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13072534" author="jiraposter@reviews.apache.org" created="Thu, 28 Jul 2011 21:18:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1215/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1215/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;We store metadata about ColumnarSerDes in the metastore, so it should be considered a native SerDe. Then, column information can be retrieved from the metastore instead of from deserialization.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2322&quot; title=&quot;Add ColumnarSerDe to the list of native SerDes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2322&quot;&gt;&lt;del&gt;HIVE-2322&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2322&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2322&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1151219 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1215/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1215/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;describe formatted tmp_tbl_name;&lt;/p&gt;

&lt;p&gt;now returns the column&apos;s comments instead of &quot;from deserializer&quot;&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13072565" author="pauly" created="Thu, 28 Jul 2011 22:19:46 +0000"  >&lt;p&gt;+1 Will test and commit&lt;/p&gt;</comment>
                            <comment id="13079009" author="jiraposter@reviews.apache.org" created="Wed, 3 Aug 2011 20:49:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1215/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1215/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-03 20:47:48.616906)&lt;/p&gt;


&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated the query test results, which don&apos;t say &quot;from deserializer&quot; anymore.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;We store metadata about ColumnarSerDes in the metastore, so it should be considered a native SerDe. Then, column information can be retrieved from the metastore instead of from deserialization.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2322&quot; title=&quot;Add ColumnarSerDe to the list of native SerDes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2322&quot;&gt;&lt;del&gt;HIVE-2322&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2322&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2322&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/ql/src/test/results/clientpositive/alter_merge_stats.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/alter_partition_format_loc.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/columnarserde_create_shortcut.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/combine3.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/create_1.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_bitmap_rc.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_2.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_compact_3.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/index_creation.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/rcfile_bigdata.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/rcfile_columnar.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/rcfile_default_format.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/rcfile_merge4.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/sample_islocalmode_hook.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/smb_mapjoin_6.q.out 1152020 &lt;br/&gt;
  trunk/ql/src/test/results/clientpositive/smb_mapjoin_8.q.out 1152020 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 1152020 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1215/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1215/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;describe formatted tmp_tbl_name;&lt;/p&gt;

&lt;p&gt;now returns the column&apos;s comments instead of &quot;from deserializer&quot;&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13079013" author="sohanjain" created="Wed, 3 Aug 2011 20:54:21 +0000"  >&lt;p&gt;Including the updated test query results in this patch.&lt;/p&gt;</comment>
                            <comment id="13079500" author="pauly" created="Thu, 4 Aug 2011 17:47:12 +0000"  >&lt;p&gt;Can you regenerate this patch? I&apos;m getting some patch failures.&lt;/p&gt;</comment>
                            <comment id="13079537" author="sohanjain" created="Thu, 4 Aug 2011 19:14:46 +0000"  >&lt;p&gt;Yes, looks like some of the output.q files were updated and now conflicting.  I&apos;ve been re-running the test suite and re-generating them.&lt;/p&gt;</comment>
                            <comment id="13079614" author="sohanjain" created="Thu, 4 Aug 2011 21:33:07 +0000"  >&lt;p&gt;Rebuilt patch&lt;/p&gt;</comment>
                            <comment id="13080322" author="sohanjain" created="Sat, 6 Aug 2011 01:11:57 +0000"  >&lt;p&gt;fixed the broken test cases&lt;/p&gt;</comment>
                            <comment id="13080329" author="sohanjain" created="Sat, 6 Aug 2011 01:50:08 +0000"  >&lt;p&gt;Ah I apologize for this; including the patched query as well.&lt;/p&gt;</comment>
                            <comment id="13083854" author="pauly" created="Fri, 12 Aug 2011 01:00:14 +0000"  >&lt;p&gt;+1. Tested and will commit.&lt;/p&gt;</comment>
                            <comment id="13083865" author="pauly" created="Fri, 12 Aug 2011 01:27:33 +0000"  >&lt;p&gt;Committed. Thanks Sohan!&lt;/p&gt;</comment>
                            <comment id="13083954" author="hudson" created="Fri, 12 Aug 2011 05:45:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #890 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/890/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/890/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2322&quot; title=&quot;Add ColumnarSerDe to the list of native SerDes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2322&quot;&gt;&lt;del&gt;HIVE-2322&lt;/del&gt;&lt;/a&gt;. Add ColumnarSerDe to the list of native SerDes (Sohan Jain via pauly)&lt;/p&gt;

&lt;p&gt;pauly : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1156931&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1156931&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin_6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/combine3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_default_format.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin_8.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_partition_format_loc.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_bigdata.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compact_3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_merge4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/alter_merge_stats.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/sample_islocalmode_hook.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_rc.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/rcfile_columnar.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_creation.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/create_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/sample_islocalmode_hook.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/columnarserde_create_shortcut.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13093106" author="cwsteinbach" created="Mon, 29 Aug 2011 19:12:09 +0000"  >&lt;p&gt;Committed to trunk. Thanks Sohan!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488131" name="HIVE-2322.1.patch" size="672" author="sohanjain" created="Thu, 28 Jul 2011 21:14:54 +0000"/>
                            <attachment id="12489249" name="HIVE-2322.2.patch" size="1169382" author="sohanjain" created="Wed, 3 Aug 2011 20:54:21 +0000"/>
                            <attachment id="12489409" name="HIVE-2322.3.patch" size="906123" author="sohanjain" created="Thu, 4 Aug 2011 21:33:07 +0000"/>
                            <attachment id="12489557" name="HIVE-2322.4.patch" size="1155143" author="sohanjain" created="Sat, 6 Aug 2011 01:11:57 +0000"/>
                            <attachment id="12489559" name="HIVE-2322.5.patch" size="1156125" author="sohanjain" created="Sat, 6 Aug 2011 01:50:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Jul 2011 21:18:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123805</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2323] &quot;create table target_table  as select  * from source_table&quot;  the source_table&apos;s partitions are handled as columns in the target_table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2323</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;CREATE TABLE  user (userid INT, username STRING, age INT, country STRING) &lt;br/&gt;
PARTITIONED BY (day STRING, hour STRING);&lt;/p&gt;

&lt;p&gt;CREATE TABLE user_bak AS SELECT * FROM user;&lt;/p&gt;

&lt;p&gt;day and hour are partitions in table user;&lt;br/&gt;
but in the new table user_bak , day and hour are handled as two columns.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12515743">HIVE-2323</key>
            <summary>&quot;create table target_table  as select  * from source_table&quot;  the source_table&apos;s partitions are handled as columns in the target_table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="caofangkun">caofangkun</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2011 06:46:20 +0000</created>
                <updated>Fri, 29 Jul 2011 06:46:20 +0000</updated>
                                            <version>0.7.0</version>
                                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="1209600">336h</timeoriginalestimate>
                            <timeestimate seconds="1209600">336h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42171</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123806</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2324] Enhancing local mode execution with non-HDFS related queries </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2324</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Local mode execution are decided based on the input size. There are queries that do not involve data resides in HDFS at all. We should enhance local mode execution with these types of queries:&lt;/p&gt;

&lt;p&gt;1) metadata only queries (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-178&quot; title=&quot;SELECT without FROM should assume a one-row table with no columns.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-178&quot;&gt;&lt;del&gt;HIVE-178&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1003&quot; title=&quot;optimize metadata only queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1003&quot;&gt;&lt;del&gt;HIVE-1003&lt;/del&gt;&lt;/a&gt;). eg.,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  SELECT max(ds) From T WHERE ts = &lt;span class=&quot;code-quote&quot;&gt;&apos;some_partition&apos;&lt;/span&gt;;  -- both ds and ts are partition columns
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2) DUAL table (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1558&quot; title=&quot;introducing the &amp;quot;dual&amp;quot; table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1558&quot;&gt;HIVE-1558&lt;/a&gt;):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  SELECT MYUDF(&lt;span class=&quot;code-quote&quot;&gt;&apos;constant1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;constant2&apos;&lt;/span&gt;) FROM DUAL;
  SELECT MYUDAF(...) FROM ( SELECT &lt;span class=&quot;code-quote&quot;&gt;&apos;const1&apos;&lt;/span&gt; col1, &lt;span class=&quot;code-quote&quot;&gt;&apos;const2&apos;&lt;/span&gt; col2 FROM DUAL ) A GROUP BY col1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12515796">HIVE-2324</key>
            <summary>Enhancing local mode execution with non-HDFS related queries </summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nzhang">Ning Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2011 18:01:34 +0000</created>
                <updated>Fri, 29 Jul 2011 18:50:33 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13072970" author="jvs" created="Fri, 29 Jul 2011 18:50:33 +0000"  >&lt;p&gt;Currently the HBase handler returns 0 from its splits&apos; getLength(), because that&apos;s what the underlying HBase TableSplit implementation does, so it&apos;s in this category too.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jul 2011 18:50:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2325] Left semi join does not allow filter on right table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2325</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Given&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create table invites (foo int, bar string) partitioned by (ds string);
create table invites2 (foo int, bar string) partitioned by (ds string);
explain select * from invites left semi join invites2 on invites.ds=invites2.ds where invites2.ds=&apos;2011-01-01&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;an error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;FAILED: Error in semantic analysis: Line 1:86 Invalid table alias or column reference &apos;invites2&apos;: (possible column names are: _col0, _col1, _col2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is returned.&lt;/p&gt;

&lt;p&gt;Presumably the groupby operation in the semi join doesn&apos;t preserve the column names?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515797">HIVE-2325</key>
            <summary>Left semi join does not allow filter on right table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="charleschen">Charles Chen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2011 18:05:31 +0000</created>
                <updated>Mon, 1 Aug 2011 22:15:02 +0000</updated>
                            <resolved>Mon, 1 Aug 2011 22:15:02 +0000</resolved>
                                    <version>0.7.1</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13073825" author="charleschen" created="Mon, 1 Aug 2011 22:15:02 +0000"  >&lt;p&gt;Wiki states &quot;The restrictions of using LEFT SEMI JOIN is that the right-hand-side table should only be referenced in the join condition (ON-clause), but not in WHERE- or SELECT-clauses etc.&quot;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2326] Turn off bitmap indexing when map-side aggregation is turned off</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2326</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Simply adding the CLUSTER BY clause on the ROW_OFFSET does not work with a GROUP BY clause, causing a SemanticException when trying to compile the the index builder task. Based on conversation with John Sichi, for now we will just turn off this feature.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515857">HIVE-2326</key>
            <summary>Turn off bitmap indexing when map-side aggregation is turned off</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="salbiz">Syed S. Albiz</assignee>
                                    <reporter username="salbiz">Syed S. Albiz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 Jul 2011 00:20:37 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:23 +0000</updated>
                            <resolved>Tue, 2 Aug 2011 04:25:29 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13073270" author="salbiz" created="Sun, 31 Jul 2011 00:22:44 +0000"  >&lt;p&gt;fix&lt;/p&gt;</comment>
                            <comment id="13073271" author="jiraposter@reviews.apache.org" created="Sun, 31 Jul 2011 00:28:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1232/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, John Sichi and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;sets the correct object inspector for PARTIAL2, COMPLETE UDAF modes&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; title=&quot;Turn off bitmap indexing when map-side aggregation is turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2326&quot;&gt;&lt;del&gt;HIVE-2326&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2326&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/index/TableBasedIndexHandler.java 02ab78c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java 61bbbf5 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFEWAHBitmap.java 0a3df09 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1232/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13073668" author="jvs" created="Mon, 1 Aug 2011 19:13:09 +0000"  >&lt;p&gt;Can you add a negative testcase?&lt;/p&gt;</comment>
                            <comment id="13073669" author="jiraposter@reviews.apache.org" created="Mon, 1 Aug 2011 19:13:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1232/#review1251&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/#review1251&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1232/#comment2863&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/#comment2863&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Typo:  wihtout&lt;/p&gt;



&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1232/#comment2864&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/#comment2864&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Throw the exception here instead of returning null.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-07-31 00:26:44, Syed Albiz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1232/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-07-31 00:26:44)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive, John Sichi and Ning Zhang.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;sets the correct object inspector for PARTIAL2, COMPLETE UDAF modes&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; title=&quot;Turn off bitmap indexing when map-side aggregation is turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2326&quot;&gt;&lt;del&gt;HIVE-2326&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2326&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/TableBasedIndexHandler.java 02ab78c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java 61bbbf5 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFEWAHBitmap.java 0a3df09 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1232/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Syed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13073688" author="salbiz" created="Mon, 1 Aug 2011 20:05:51 +0000"  >&lt;p&gt;add negative testcase &amp;amp; address comments&lt;/p&gt;</comment>
                            <comment id="13073690" author="jiraposter@reviews.apache.org" created="Mon, 1 Aug 2011 20:07:09 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1232/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-01 20:06:37.125396)&lt;/p&gt;


&lt;p&gt;Review request for hive, John Sichi and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;add negative testcase and address comments&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;sets the correct object inspector for PARTIAL2, COMPLETE UDAF modes&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; title=&quot;Turn off bitmap indexing when map-side aggregation is turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2326&quot;&gt;&lt;del&gt;HIVE-2326&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2326&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/index/TableBasedIndexHandler.java 02ab78c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java 61bbbf5 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 7c91946 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFEWAHBitmap.java 0a3df09 &lt;br/&gt;
  ql/src/test/queries/clientnegative/index_bitmap_no_map_aggr.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_bitmap_auto_no_map_aggr.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1232/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13073794" author="salbiz" created="Mon, 1 Aug 2011 21:26:11 +0000"  >&lt;p&gt;removed unnecessary file from patch&lt;/p&gt;</comment>
                            <comment id="13073796" author="jiraposter@reviews.apache.org" created="Mon, 1 Aug 2011 21:28:48 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1232/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-01 21:27:24.460533)&lt;/p&gt;


&lt;p&gt;Review request for hive, John Sichi and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;removed index_bitmap_auto_no_map_aggr.q from the clientpositive suite&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;sets the correct object inspector for PARTIAL2, COMPLETE UDAF modes&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; title=&quot;Turn off bitmap indexing when map-side aggregation is turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2326&quot;&gt;&lt;del&gt;HIVE-2326&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2326&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/index/TableBasedIndexHandler.java 02ab78c &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java 61bbbf5 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 7c91946 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFEWAHBitmap.java 0a3df09 &lt;br/&gt;
  ql/src/test/queries/clientnegative/index_bitmap_no_map_aggr.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1232/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1232/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13073823" author="jvs" created="Mon, 1 Aug 2011 22:09:10 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13076026" author="jvs" created="Tue, 2 Aug 2011 04:25:29 +0000"  >&lt;p&gt;Committed.  Thanks Syed!&lt;/p&gt;</comment>
                            <comment id="13076109" author="hudson" created="Tue, 2 Aug 2011 09:25:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #866 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/866/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/866/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2326&quot; title=&quot;Turn off bitmap indexing when map-side aggregation is turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2326&quot;&gt;&lt;del&gt;HIVE-2326&lt;/del&gt;&lt;/a&gt;. Turn off bitmap indexing when map-side aggregation is turned off&lt;br/&gt;
(Syed Albiz via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153022&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153022&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/TableBasedIndexHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFEWAHBitmap.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/index_bitmap_no_map_aggr.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/index_bitmap_no_map_aggr.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488328" name="HIVE-2326.1.patch" size="4061" author="salbiz" created="Sun, 31 Jul 2011 00:22:44 +0000"/>
                            <attachment id="12488435" name="HIVE-2326.2.patch" size="9578" author="salbiz" created="Mon, 1 Aug 2011 20:05:51 +0000"/>
                            <attachment id="12488467" name="HIVE-2326.3.patch" size="6987" author="salbiz" created="Mon, 1 Aug 2011 21:26:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 31 Jul 2011 00:28:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43503</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123809</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2327] Optimize REGEX UDFs with constant parameter information</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2327</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are a lot of UDFs which would show major performance differences if one assumes that some of its arguments are constant.&lt;/p&gt;

&lt;p&gt;Consider, for example, any UDF that takes a regular expression as input: This can be complied once (fast) if it&apos;s a constant, or once per row (wicked slow) if it&apos;s not a constant.&lt;/p&gt;

&lt;p&gt;Or, consider any UDF that reads from a file and/or takes a filename as input; it would have to re-read the whole file if the filename changes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515881">HIVE-2327</key>
            <summary>Optimize REGEX UDFs with constant parameter information</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apivovarov">Alexander Pivovarov</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 Jul 2011 22:51:25 +0000</created>
                <updated>Tue, 16 Feb 2016 23:53:00 +0000</updated>
                            <resolved>Tue, 19 May 2015 22:31:16 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13073655" author="jvs" created="Mon, 1 Aug 2011 18:44:47 +0000"  >&lt;p&gt;Is this different from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13103141" author="cwsteinbach" created="Mon, 12 Sep 2011 22:39:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1360&quot; title=&quot;Allow UDFs to access constant parameter values at compile time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1360&quot;&gt;&lt;del&gt;HIVE-1360&lt;/del&gt;&lt;/a&gt; made it possible for UDFs to detect constant parameters, but it didn&apos;t update any of the regex UDFs to take advantage of this feature.&lt;/p&gt;</comment>
                            <comment id="13103150" author="jvs" created="Mon, 12 Sep 2011 22:46:32 +0000"  >&lt;p&gt;OK, then I guess this issue should be renamed?&lt;/p&gt;</comment>
                            <comment id="14394091" author="apivovarov" created="Fri, 3 Apr 2015 05:41:09 +0000"  >&lt;p&gt;patch #01&lt;br/&gt;
Refactor UDF to derive from GenericUDF which supports constant arguments&lt;/p&gt;</comment>
                            <comment id="14395139" author="hiveqa" created="Fri, 3 Apr 2015 21:55:40 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12709172/HIVE-2327.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12709172/HIVE-2327.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 8704 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMinimrCliDriver-smb_mapjoin_8.q - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorization_short_regress
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_short_regress
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_short_regress
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3274/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3274/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3274/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3274/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3274/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3274/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12709172 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14542735" author="ashutoshc" created="Wed, 13 May 2015 21:12:46 +0000"  >&lt;p&gt;Vectorization failure looks relevant.&lt;/p&gt;</comment>
                            <comment id="14543059" author="apivovarov" created="Thu, 14 May 2015 01:49:36 +0000"  >&lt;p&gt;I run vectorization_short_regress.q test locally and noticed couple changes in q.out file&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rlike is replaced with regexp   (they are synonyms)&lt;/li&gt;
	&lt;li&gt;parentesises around &quot;(a regexp b)&quot; are removed in explain query output.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I also noticed that old UDFRegExp registration set isOperator=true&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;system.registerUDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;rlike&quot;&lt;/span&gt;, UDFRegExp.class, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
system.registerUDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;regexp&quot;&lt;/span&gt;, UDFRegExp.class, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But new implementation extends GenericUDF.  Generic UDF registration does not have isOperator parameter. Can it cause any issues?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;system.registerGenericUDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;rlike&quot;&lt;/span&gt;, GenericUDFRegExp.class);
system.registerGenericUDF(&lt;span class=&quot;code-quote&quot;&gt;&quot;regexp&quot;&lt;/span&gt;, GenericUDFRegExp.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14543068" author="apivovarov" created="Thu, 14 May 2015 01:58:33 +0000"  >&lt;p&gt;I found the reason for diff in q.out files and the place where isOperator is used.&lt;/p&gt;

&lt;p&gt;1. GenericUDFBridge.isOperator is only used in getDisplayString method&lt;br/&gt;
This method adds parenthesis around &quot;(a regexp b)&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isOperator) {
  ...
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt; + children[0] + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + udfName + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + children[1] + &lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I do not think we need parenthesis in getDisplayString output. This is why new GenericUDFRegExp.getDisplayString() returns just&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getDisplayString(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] children) {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; children[0] + &lt;span class=&quot;code-quote&quot;&gt;&quot; regexp &quot;&lt;/span&gt; + children[1];
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. The reason why rlike is replaced with regexp in query plan is because GenericUDFRegExp.getFuncName returns &quot;regexp&quot; (because it&apos;s primary name for the function)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getFuncName() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;regexp&quot;&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll update q.out files soon&lt;/p&gt;</comment>
                            <comment id="14543106" author="apivovarov" created="Thu, 14 May 2015 02:44:47 +0000"  >&lt;p&gt;patch #2:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;updated q.out files&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14543373" author="hiveqa" created="Thu, 14 May 2015 08:23:34 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12732752/HIVE-2327.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12732752/HIVE-2327.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 8882 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMiniSparkOnYarnCliDriver - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_partitioned
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_static
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3888/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3888/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3888/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3888/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3888/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3888/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12732752 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14544053" author="apivovarov" created="Thu, 14 May 2015 17:22:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt;, tests look good now. I do not think two failed partition tests relate to patch #2 &lt;/p&gt;</comment>
                            <comment id="14544130" author="ashutoshc" created="Thu, 14 May 2015 18:12:05 +0000"  >&lt;p&gt;This patch ports regex udf to GenericUDF framework, which in itself is a good enough reason to commit this, since we want all our udfs to move to that eventually. But I am skeptical that whether it will actually regress in terms of performance. Reason being said optimization of not repeatedly compiling regex is already there in previous version. New version introduces additional branches, virtual function calls and actual logic computation in evaluate()&lt;br/&gt;
Can you do before and after perf comparison for this change ?&lt;/p&gt;</comment>
                            <comment id="14544440" author="apivovarov" created="Thu, 14 May 2015 22:00:33 +0000"  >&lt;p&gt;Is there a standard approach to do UDF performance test in hive?&lt;br/&gt;
Is there any tables which are usually used for UDF performance tests in hive?&lt;/p&gt;

&lt;p&gt;If not then I can create 1 Mil rows table with string column t1 containing random strings 100 chars each.&lt;br/&gt;
Then I run smth like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select count(*) from t where t.t1 regexp &lt;span class=&quot;code-quote&quot;&gt;&apos;.*abc.*&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14544825" author="ashutoshc" created="Fri, 15 May 2015 02:50:26 +0000"  >&lt;p&gt;No there is no standard approach. Your test sounds good. I will modify the query to have a map-only query, so that other overheads don&apos;t come in play, something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select t1 from t where t.t1 regexp &lt;span class=&quot;code-quote&quot;&gt;&apos;.*abc.*&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14548626" author="apivovarov" created="Mon, 18 May 2015 19:44:45 +0000"  >&lt;p&gt;I checked old and new regexp UDF performance. New implementation is 1% faster.&lt;/p&gt;

&lt;p&gt;table files generator&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileNotFoundException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.PrintWriter;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.math.BigInteger;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.security.SecureRandom;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;RandomStringGenerator {
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; SecureRandom random = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SecureRandom();

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; nextSessionId() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BigInteger(130, random).toString(32);
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileNotFoundException {
    RandomStringGenerator g = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RandomStringGenerator();

    &lt;span class=&quot;code-comment&quot;&gt;// lets generate 10 files 10Mil rows each
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; 10; j++) {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;start file &quot;&lt;/span&gt; + j);
      PrintWriter pw = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PrintWriter(&lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/rexexp_test/00000&quot;&lt;/span&gt; + j + &lt;span class=&quot;code-quote&quot;&gt;&quot;_0&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 1000000; i++) {
          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id = g.nextSessionId();
          pw.println(id);
        }
      } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
        pw.close();
      }
    }
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;All Done&quot;&lt;/span&gt;);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;create table&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hadoop fs -put -f /tmp/regexp_test /tmp

create table regexp_test (
  a string
)
stored as textfile
location &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/regexp_test&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;test queries&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--1
time bin/hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;select * from regexp_test where regexp(a, &lt;span class=&quot;code-quote&quot;&gt;&apos;.*abcd.*&apos;&lt;/span&gt;)&quot;&lt;/span&gt;
--2
time bin/hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;select * from regexp_test where regexp(a, &lt;span class=&quot;code-quote&quot;&gt;&apos;.*efgh.*&apos;&lt;/span&gt;)&quot;&lt;/span&gt;
--3
time bin/hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;select * from regexp_test where regexp(a, &lt;span class=&quot;code-quote&quot;&gt;&apos;.*ijkl.*&apos;&lt;/span&gt;)&quot;&lt;/span&gt;
--4
time bin/hive -e &lt;span class=&quot;code-quote&quot;&gt;&quot;select a from regexp_test where regexp(a, &lt;span class=&quot;code-quote&quot;&gt;&apos;.*mnop.*&apos;&lt;/span&gt;)&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;old regexp implementation&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--1  233 rows
real	1m6.881s
user	1m10.582s
sys	0m1.652s

--2  247 rows
real	1m6.520s
user	1m10.082s
sys	0m1.534s

--3  224 rows
real	1m8.037s
user	1m11.718s
sys	0m1.608s

--4   rows 232
real	1m6.698s
user	1m10.378s
sys	0m1.499s

--AVG 67.034
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;new regexp implementation&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--1  233 rows
real	1m6.762s
user	1m10.517s
sys	0m1.471s

--2  247 rows
real	1m6.362s
user	1m9.961s
sys	0m1.558s

--3  224 rows
real	1m5.854s
user	1m9.534s
sys	0m1.452s

--4  232 rows
real	1m6.435s
user	1m10.816s
sys	0m1.571s

--AVG 66.35325
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;delta = AVG2 - AVG1 = 0.68075 sec&lt;br/&gt;
new implementation is 1% faster  (delta / max(AVG1, AVG2))&lt;/p&gt;</comment>
                            <comment id="14549190" author="ashutoshc" created="Mon, 18 May 2015 20:45:41 +0000"  >&lt;p&gt;Sounds good. +1&lt;/p&gt;</comment>
                            <comment id="14551368" author="apivovarov" created="Tue, 19 May 2015 22:31:16 +0000"  >&lt;p&gt;Committed to trunk. Thank you Ashutosh for your review!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12465154">HIVE-1360</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12709172" name="HIVE-2327.01.patch" size="16961" author="apivovarov" created="Fri, 3 Apr 2015 05:41:09 +0000"/>
                            <attachment id="12732752" name="HIVE-2327.2.patch" size="34636" author="apivovarov" created="Thu, 14 May 2015 02:44:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 1 Aug 2011 18:44:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08obr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2328] hive.zookeeper.session.timeout is set to null in hive-default.xml</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2328</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12515887">HIVE-2328</key>
            <summary>hive.zookeeper.session.timeout is set to null in hive-default.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Aug 2011 05:17:29 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:38 +0000</updated>
                            <resolved>Tue, 2 Aug 2011 04:17:53 +0000</resolved>
                                    <version>0.7.0</version>
                    <version>0.7.1</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Configuration</component>
                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13073439" author="cwsteinbach" created="Mon, 1 Aug 2011 05:24:16 +0000"  >&lt;p&gt;In HiveConf.java:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    HIVE_ZOOKEEPER_SESSION_TIMEOUT(&quot;hive.zookeeper.session.timeout&quot;, 600*1000),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In hive-default.xml:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;hive.zookeeper.session.timeout&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;Zookeeper client&apos;s session timeout. The client is disconnected, 
               and as a result, all locks released, if a heartbeat is not sent
               in the timeout.
  &amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It looks like the empty value in hive-default.xml effectively undefines this property:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;% hive -e &quot;set -v;&quot; | grep &apos;hive.zookeeper&apos;
hive.zookeeper.clean.extra.nodes=false
hive.zookeeper.client.port=2181
hive.zookeeper.namespace=hive_zookeeper_namespace
%
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13076023" author="amareshwari" created="Tue, 2 Aug 2011 04:17:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;All tests passed with the patch. I just committed this.&lt;/p&gt;</comment>
                            <comment id="13076030" author="amareshwari" created="Tue, 2 Aug 2011 04:30:20 +0000"  >&lt;p&gt;Thanks Carl !&lt;/p&gt;</comment>
                            <comment id="13076110" author="hudson" created="Tue, 2 Aug 2011 09:25:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #866 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/866/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/866/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2328&quot; title=&quot;hive.zookeeper.session.timeout is set to null in hive-default.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2328&quot;&gt;&lt;del&gt;HIVE-2328&lt;/del&gt;&lt;/a&gt;. Sets hive.zookeeper.session.timeout value to 600000 in hive-default.xml. Contributedby Carl Steinbach&lt;/p&gt;

&lt;p&gt;amareshwari : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153020&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153020&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488371" name="HIVE-2328.1.patch.txt" size="451" author="cwsteinbach" created="Mon, 1 Aug 2011 05:30:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Aug 2011 04:17:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43502</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lji7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123810</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2329] Not using map aggregation, fails to execute group-by after cluster-by with same key</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2329</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive.map.aggr=false&lt;br/&gt;
select Q1.key_int1, sum(Q1.key_int1), sum(distinct Q1.key_int1) from (select * from t1 cluster by key_int1) Q1 group by Q1.key_int1&lt;/p&gt;

&lt;p&gt;resulted..&lt;/p&gt;

&lt;p&gt;FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;from hadoop logs..&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.RuntimeException: cannot find field key from []&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.getStandardStructFieldRef(ObjectInspectorUtils.java:321)&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector.getStructFieldRef(StandardStructObjectInspector.java:119)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExprNodeColumnEvaluator.initialize(ExprNodeColumnEvaluator.java:82)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.initializeOp(GroupByOperator.java:198)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:357)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:433)&lt;br/&gt;
........&lt;/p&gt;

&lt;p&gt;I think the problem is caused by ReduceSinkDeDuplication, removing RS which was providing rs.key for GBY operation. If child of child RS is a GBY, we should bypass the optimization.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515895">HIVE-2329</key>
            <summary>Not using map aggregation, fails to execute group-by after cluster-by with same key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Aug 2011 08:48:14 +0000</created>
                <updated>Mon, 30 Apr 2012 21:11:35 +0000</updated>
                            <resolved>Fri, 9 Dec 2011 17:58:45 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13073465" author="navis" created="Mon, 1 Aug 2011 08:53:16 +0000"  >&lt;p&gt;simple walk-around&lt;/p&gt;</comment>
                            <comment id="13078333" author="jvs" created="Tue, 2 Aug 2011 18:16:25 +0000"  >&lt;p&gt;Good catch.  Can you submit an updated patch which includes a testcase (.q and .q.out) files, and then create a Review Board entry?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-ReviewProcess&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-ReviewProcess&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13080779" author="jiraposter@reviews.apache.org" created="Mon, 8 Aug 2011 06:54:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1313/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1313/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If map aggregation is set to false, DISTRIBUTED BY followed by GROUP BY with same key fails in runtime. ReduceSinkDeDuplication optimization should be avoid if child of child RS is GBY. &lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; title=&quot;Not using map aggregation, fails to execute group-by after cluster-by with same key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2329&quot;&gt;&lt;del&gt;HIVE-2329&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2329&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/test/queries/clientpositive/reduce_deduplicate_exclude_gby.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/reduce_deduplicate_exclude_gby.q.out PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ReduceSinkDeDuplication.java e91b4d5 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1313/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1313/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13155456" author="cwsteinbach" created="Tue, 22 Nov 2011 21:38:05 +0000"  >&lt;p&gt;Please change the status to Patch Available if this is ready for review. Thanks.&lt;/p&gt;</comment>
                            <comment id="13164232" author="navis" created="Wed, 7 Dec 2011 08:13:44 +0000"  >&lt;p&gt;rebased to trunk&lt;/p&gt;</comment>
                            <comment id="13164233" author="jiraposter@reviews.apache.org" created="Wed, 7 Dec 2011 08:16:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1313/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1313/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-07 08:15:06.858543)&lt;/p&gt;


&lt;p&gt;Review request for hive, John Sichi and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;rebased to trunk&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If map aggregation is set to false, DISTRIBUTED BY followed by GROUP BY with same key fails in runtime. ReduceSinkDeDuplication optimization should be avoid if child of child RS is GBY. &lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; title=&quot;Not using map aggregation, fails to execute group-by after cluster-by with same key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2329&quot;&gt;&lt;del&gt;HIVE-2329&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2329&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ReduceSinkDeDuplication.java e91b4d5 &lt;br/&gt;
  ql/src/test/queries/clientpositive/reduce_deduplicate_exclude_gby.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/reduce_deduplicate_exclude_gby.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1313/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1313/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;test added : reduce_deduplicate_exclude_gby.q&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13165369" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 17:59:41 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; title=&quot;Not using map aggregation, fails to execute group-by after cluster-by with same key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2329&quot;&gt;&lt;del&gt;HIVE-2329&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Not using map aggregation, fails to execute group-by after cluster-by with same key&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; title=&quot;Not using map aggregation, fails to execute group-by after cluster-by with same key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2329&quot;&gt;&lt;del&gt;HIVE-2329&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  hive.map.aggr=false&lt;br/&gt;
  select Q1.key_int1, sum(Q1.key_int1), sum(distinct Q1.key_int1) from (select * from t1 cluster by key_int1) Q1 group by Q1.key_int1&lt;/p&gt;

&lt;p&gt;  resulted..&lt;/p&gt;

&lt;p&gt;  FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;  from hadoop logs..&lt;/p&gt;

&lt;p&gt;  Caused by: java.lang.RuntimeException: cannot find field key from []&lt;br/&gt;
  	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.getStandardStructFieldRef(ObjectInspectorUtils.java:321)&lt;br/&gt;
  	at org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector.getStructFieldRef(StandardStructObjectInspector.java:119)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.ExprNodeColumnEvaluator.initialize(ExprNodeColumnEvaluator.java:82)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.GroupByOperator.initializeOp(GroupByOperator.java:198)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:357)&lt;br/&gt;
  	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:433)&lt;br/&gt;
  ........&lt;/p&gt;

&lt;p&gt;  I think the problem is caused by ReduceSinkDeDuplication, removing RS which was providing rs.key for GBY operation. If child of child RS is a GBY, we should bypass the optimization.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D657&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D657&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/reduce_deduplicate_exclude_gby.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/reduce_deduplicate_exclude_gby.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ReduceSinkDeDuplication.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1467/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1467/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13165871" author="namit" created="Fri, 9 Dec 2011 06:04:24 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13166370" author="namit" created="Fri, 9 Dec 2011 17:58:45 +0000"  >&lt;p&gt;Committed. Thanks Navis&lt;/p&gt;</comment>
                            <comment id="13166472" author="hudson" created="Fri, 9 Dec 2011 19:24:08 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.23.0 #12 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.23.0/12/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.23.0/12/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; title=&quot;Not using map aggregation, fails to execute group-by after cluster-by with same key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2329&quot;&gt;&lt;del&gt;HIVE-2329&lt;/del&gt;&lt;/a&gt; Not using map aggregation, fails to execute group-by after&lt;br/&gt;
cluster-by with same key (Navis via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1212551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1212551&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ReduceSinkDeDuplication.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/reduce_deduplicate_exclude_gby.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/reduce_deduplicate_exclude_gby.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13166881" author="hudson" created="Sat, 10 Dec 2011 15:05:07 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1137 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1137/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1137/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; title=&quot;Not using map aggregation, fails to execute group-by after cluster-by with same key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2329&quot;&gt;&lt;del&gt;HIVE-2329&lt;/del&gt;&lt;/a&gt; Not using map aggregation, fails to execute group-by after&lt;br/&gt;
cluster-by with same key (Navis via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1212551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1212551&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ReduceSinkDeDuplication.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/reduce_deduplicate_exclude_gby.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/reduce_deduplicate_exclude_gby.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13167391" author="phabricator@reviews.facebook.net" created="Mon, 12 Dec 2011 07:26:30 +0000"  >&lt;p&gt;test123 has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2329&quot; title=&quot;Not using map aggregation, fails to execute group-by after cluster-by with same key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2329&quot;&gt;&lt;del&gt;HIVE-2329&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Not using map aggregation, fails to execute group-by after cluster-by with same key&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D657&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D657&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13265296" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:35 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12539233">HIVE-2732</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12506629" name="ASF.LICENSE.NOT.GRANTED--HIVE-2329.D657.1.patch" size="11363" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 17:59:42 +0000"/>
                            <attachment id="12506414" name="HIVE-2329.1.patch.txt" size="3331" author="navis" created="Wed, 7 Dec 2011 08:13:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Aug 2011 18:16:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42168</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2330] Allow tables to warn on querying</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2330</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be excellent if I could set a TBLPROPERTY like &quot;motd&quot; or &quot;motq&quot; that means &quot;message of the query.&quot; This message would then actually print to the CLI or stderr whenever the table was queried.&lt;/p&gt;

&lt;p&gt;Use cases: Warning people that they are querying a deprecated table, or warning people that the table they are querying has sensitive information, or that it is probably already aggregated somewhere.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515948">HIVE-2330</key>
            <summary>Allow tables to warn on querying</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Aug 2011 19:20:51 +0000</created>
                <updated>Mon, 1 Aug 2011 19:23:11 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13073675" author="jvs" created="Mon, 1 Aug 2011 19:23:11 +0000"  >&lt;p&gt;It might be possible to write a hook to accomplish this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 1 Aug 2011 19:23:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42167</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2331] Turn off compression when generating index intermediate results</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2331</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HiveIndexResult is not compression-aware, so for any index to work (regardless of compact/bitmap) we need to not compress the index intermediate file when we generate it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12516853">HIVE-2331</key>
            <summary>Turn off compression when generating index intermediate results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="salbiz">Syed S. Albiz</assignee>
                                    <reporter username="salbiz">Syed S. Albiz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2011 00:39:05 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:32 +0000</updated>
                            <resolved>Wed, 3 Aug 2011 16:34:53 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13075981" author="salbiz" created="Tue, 2 Aug 2011 00:43:31 +0000"  >&lt;p&gt;fix + testcases&lt;/p&gt;</comment>
                            <comment id="13075986" author="jiraposter@reviews.apache.org" created="Tue, 2 Aug 2011 00:56:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1254/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1254/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;add a parameter to the hiveConf when generating the index query to ensure that the output is uncompressed&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2331&quot; title=&quot;Turn off compression when generating index intermediate results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2331&quot;&gt;&lt;del&gt;HIVE-2331&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2331&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java 8f185be &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java ff9c4cc &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_bitmap_compression.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_compression.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_compression.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_compression.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1254/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1254/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;added index_compression.q and index_bitmap_compression.q to test both index handlers for this case.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13076038" author="jvs" created="Tue, 2 Aug 2011 05:20:05 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13076290" author="jvs" created="Tue, 2 Aug 2011 16:10:14 +0000"  >&lt;p&gt;Syed, you mixed up the .q.out files for bitmap vs compact (I got corresponding test failures).&lt;/p&gt;</comment>
                            <comment id="13078366" author="jiraposter@reviews.apache.org" created="Tue, 2 Aug 2011 19:00:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1254/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1254/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-02 18:58:32.937434)&lt;/p&gt;


&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Regenerated the testcase outputs since they were mixed up previously.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;add a parameter to the hiveConf when generating the index query to ensure that the output is uncompressed&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2331&quot; title=&quot;Turn off compression when generating index intermediate results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2331&quot;&gt;&lt;del&gt;HIVE-2331&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2331&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java c93c852 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java f4b7c15 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_bitmap_compression.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_compression.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_bitmap_compression.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_compression.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1254/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1254/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;added index_compression.q and index_bitmap_compression.q to test both index handlers for this case.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13078828" author="jvs" created="Wed, 3 Aug 2011 16:34:53 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Syed!&lt;/p&gt;</comment>
                            <comment id="13079169" author="hudson" created="Thu, 4 Aug 2011 01:36:55 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #870 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/870/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/870/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2331&quot; title=&quot;Turn off compression when generating index intermediate results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2331&quot;&gt;&lt;del&gt;HIVE-2331&lt;/del&gt;&lt;/a&gt;. Turn off compression when generating index intermediate results&lt;br/&gt;
(Syed Albiz via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153569&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/index_compression.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_compression.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/bitmap/BitmapIndexHandler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/index_bitmap_compression.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_bitmap_compression.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488845" name="HIVE-2331.1.patch" size="21047" author="salbiz" created="Tue, 2 Aug 2011 00:43:30 +0000"/>
                            <attachment id="12489101" name="HIVE-2331.2.patch" size="21049" author="salbiz" created="Tue, 2 Aug 2011 18:56:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Aug 2011 00:56:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43501</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2332] If all of the parameters of distinct functions are exists in group by columns, query fails in runtime</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2332</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;select sum(key_int1), sum(distinct key_int1) from t1 group by key_int1;&lt;/p&gt;

&lt;p&gt;fails with message..&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FAILED: Execution Error, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hadoop says..&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
	at java.util.ArrayList.RangeCheck(ArrayList.java:547)
	at java.util.ArrayList.get(ArrayList.java:322)
	at org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector.init(StandardStructObjectInspector.java:95)
	at org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector.(StandardStructObjectInspector.java:86)
	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorFactory.getStandardStructObjectInspector(ObjectInspectorFactory.java:252)
	at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.initEvaluatorsAndReturnStruct(ReduceSinkOperator.java:188)
	at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.processOp(ReduceSinkOperator.java:197)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)
	at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:85)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:532)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the deficient number of key expression, compared to number of key column, is the problem, which should be equal or more. &lt;br/&gt;
Would it be solved if add some key expression? I&apos;ll try.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12516864">HIVE-2332</key>
            <summary>If all of the parameters of distinct functions are exists in group by columns, query fails in runtime</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2011 05:58:18 +0000</created>
                <updated>Thu, 16 May 2013 21:10:09 +0000</updated>
                            <resolved>Sun, 20 Jan 2013 07:10:58 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13076070" author="navis" created="Tue, 2 Aug 2011 06:45:25 +0000"  >&lt;p&gt;Simple bypass.&lt;/p&gt;

&lt;p&gt;Removing not-used output key column made problems in following operations(GBY). So I&apos;ve added dummy ExprNodeNullDesc for key expression and query has succeeded.&lt;/p&gt;</comment>
                            <comment id="13078306" author="jvs" created="Tue, 2 Aug 2011 17:50:25 +0000"  >&lt;p&gt;Good catch.  Can you submit an updated patch which includes the test case (.q and .q.out)?&lt;/p&gt;</comment>
                            <comment id="13078328" author="jvs" created="Tue, 2 Aug 2011 18:11:50 +0000"  >&lt;p&gt;Once you have the patch ready, also please create a Review Board entry:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-ReviewProcess&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-ReviewProcess&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13079170" author="navis" created="Thu, 4 Aug 2011 01:37:24 +0000"  >&lt;p&gt;1. Add deficient columns lastly to avoid index mismatch with RR of HASH GBY&lt;br/&gt;
2. ExprNodeNullDesc to ExprNodeFieldDesc to avoid NPE&lt;/p&gt;</comment>
                            <comment id="13080791" author="navis" created="Mon, 8 Aug 2011 07:20:06 +0000"  >&lt;p&gt;add test case &lt;/p&gt;</comment>
                            <comment id="13080794" author="jiraposter@reviews.apache.org" created="Mon, 8 Aug 2011 07:27:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1314/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1314/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If all of the distinct params are in group by keys, union column reserved for distinct params would not be added, which making problems initializing RS operator.&lt;/p&gt;

&lt;p&gt;This patch is just a simple bypass adding dummy expression for the union column. Someone would know better way to resolve the problem.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2332&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java dc9ab1b &lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_distinct_samekey.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1314/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1314/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13128460" author="ashutoshc" created="Sun, 16 Oct 2011 17:40:32 +0000"  >&lt;p&gt;Assigning to Navis. Navis, also mark the issue as Patch Available if its ready for review.&lt;/p&gt;</comment>
                            <comment id="13150313" author="jiraposter@reviews.apache.org" created="Tue, 15 Nov 2011 08:57:51 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1314/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1314/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-15 08:56:07.599798)&lt;/p&gt;


&lt;p&gt;Review request for hive and Ashutosh Chauhan.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Rebased to trunk.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If all of the distinct params are in group by keys, union column reserved for distinct params would not be added, which making problems initializing RS operator.&lt;/p&gt;

&lt;p&gt;This patch is just a simple bypass adding dummy expression for the union column. Someone would know better way to resolve the problem.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2332&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java d60ba09 &lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_distinct_samekey.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1314/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1314/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;added clientpositive/groupby_distinct_samekey.q&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13155454" author="cwsteinbach" created="Tue, 22 Nov 2011 21:37:13 +0000"  >&lt;p&gt;Is this patch ready for review? Is so, please change the status to Patch Available. Thanks.&lt;/p&gt;</comment>
                            <comment id="13164193" author="jiraposter@reviews.apache.org" created="Wed, 7 Dec 2011 07:02:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1314/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1314/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-07 07:01:30.547976)&lt;/p&gt;


&lt;p&gt;Review request for hive, John Sichi and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adding null keys induced confusions especially for optimizers. This patch just modifies key-order minimizing side effects.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;If all of the distinct params are in group by keys, union column reserved for distinct params would not be added, which making problems initializing RS operator.&lt;/p&gt;

&lt;p&gt;This patch is just a simple bypass adding dummy expression for the union column. Someone would know better way to resolve the problem.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2332&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/exec/ReduceSinkOperator.java 732a5aa &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java c6ae55d &lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_distinct_samekey.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1314/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1314/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;added clientpositive/groupby_distinct_samekey.q&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Navis&lt;/p&gt;
</comment>
                            <comment id="13164195" author="navis" created="Wed, 7 Dec 2011 07:05:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1314/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1314/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13165372" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 18:01:39 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  select sum(key_int1), sum(distinct key_int1) from t1 group by key_int1;&lt;/p&gt;

&lt;p&gt;  fails with message..  &amp;lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&amp;gt;&amp;lt;div class=&quot;codeContent panelContent&quot;&amp;gt; &amp;lt;pre class=&quot;code-java&quot;&amp;gt;FAILED: Execution Error, &amp;lt;span class=&quot;code-keyword&quot;&amp;gt;return&amp;lt;/span&amp;gt; code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&amp;lt;/pre&amp;gt; &amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;  hadoop says..  &amp;lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&amp;gt;&amp;lt;div class=&quot;codeContent panelContent&quot;&amp;gt; &amp;lt;pre class=&quot;code-java&quot;&amp;gt;Caused by: java.lang.IndexOutOfBoundsException: Index: 1, Size: 1 	at java.util.ArrayList.RangeCheck(ArrayList.java:547) 	at java.util.ArrayList.get(ArrayList.java:322) 	at org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector.init(StandardStructObjectInspector.java:95) 	at org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector.(StandardStructObjectInspector.java:86) 	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorFactory.getStandardStructObjectInspector(ObjectInspectorFactory.java:252) 	at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.initEvaluatorsAndReturnStruct(ReduceSinkOperator.java:188) 	at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.processOp(ReduceSinkOperator.java:197) 	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471) 	at org.apache.hadoop.hive.ql.e&lt;br/&gt;
 xec.Operator.forward(Operator.java:744) 	at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:85) 	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471) 	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744) 	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:532)&amp;lt;/pre&amp;gt; &amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;  I think the deficient number of key expression, compared to number of key column, is the problem, which should be equal or more.&lt;br/&gt;
  Would it be solved if add some key expression? I&apos;ll try.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D663&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D663&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_distinct_samekey.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/ReduceSinkOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1473/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1473/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13165374" author="namit" created="Thu, 8 Dec 2011 18:02:04 +0000"  >&lt;p&gt;Navis, please use the following instructions in future for patches &lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/Hive/phabricatorcodereview.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/Hive/phabricatorcodereview.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We are planning to move to phabricator from review board.&lt;/p&gt;

&lt;p&gt;I have already done this for this jira.&lt;br/&gt;
Will review it soon.&lt;/p&gt;</comment>
                            <comment id="13244939" author="ashutoshc" created="Tue, 3 Apr 2012 03:36:25 +0000"  >&lt;p&gt;Canceling patch as it first needs to address Namit&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13244945" author="navis" created="Tue, 3 Apr 2012 03:42:32 +0000"  >&lt;p&gt;It&apos;s already on phabricator by Namit.&lt;/p&gt;</comment>
                            <comment id="13244951" author="ashutoshc" created="Tue, 3 Apr 2012 03:50:57 +0000"  >&lt;p&gt;Oh, I missed it. Marking Patch Available then.&lt;/p&gt;</comment>
                            <comment id="13258486" author="ashutoshc" created="Fri, 20 Apr 2012 19:17:31 +0000"  >&lt;p&gt;Unlinking from 0.9&lt;/p&gt;</comment>
                            <comment id="13558074" author="ashutoshc" created="Sat, 19 Jan 2013 19:22:22 +0000"  >&lt;p&gt;Verified that bug still exists in trunk. Patch looks good. +1 Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13558180" author="ashutoshc" created="Sun, 20 Jan 2013 07:10:58 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13558201" author="hudson" created="Sun, 20 Jan 2013 08:16:31 +0000"  >&lt;p&gt;Integrated in hive-trunk-hadoop1 #31 (See &lt;a href=&quot;https://builds.apache.org/job/hive-trunk-hadoop1/31/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hive-trunk-hadoop1/31/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt; : If all of the parameters of distinct functions are exists in group by columns, query fails in runtime (Navis via Ashutosh Chauhan) (Revision 1435790)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1435790&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1435790&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ReduceSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_distinct_samekey.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13558342" author="hudson" created="Sun, 20 Jan 2013 18:47:54 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1926 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1926/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1926/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt; : If all of the parameters of distinct functions are exists in group by columns, query fails in runtime (Navis via Ashutosh Chauhan) (Revision 1435790)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1435790&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1435790&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ReduceSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_distinct_samekey.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13558389" author="hudson" created="Sun, 20 Jan 2013 21:09:13 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #77 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/77/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/77/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt; : If all of the parameters of distinct functions are exists in group by columns, query fails in runtime (Navis via Ashutosh Chauhan) (Revision 1435790)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1435790&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1435790&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ReduceSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/PlanUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_distinct_samekey.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13558556" author="hudson" created="Mon, 21 Jan 2013 06:11:57 +0000"  >&lt;p&gt;Integrated in hive-trunk-hadoop1 #33 (See &lt;a href=&quot;https://builds.apache.org/job/hive-trunk-hadoop1/33/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hive-trunk-hadoop1/33/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3920&quot; title=&quot;Change test for HIVE-2332&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3920&quot;&gt;&lt;del&gt;HIVE-3920&lt;/del&gt;&lt;/a&gt; Change test for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
(Ashutosh Chauhan and Navis via namit) (Revision 1436199)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1436199&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1436199&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_distinct_samekey.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13558709" author="hudson" created="Mon, 21 Jan 2013 11:50:47 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1928 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1928/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1928/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3920&quot; title=&quot;Change test for HIVE-2332&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3920&quot;&gt;&lt;del&gt;HIVE-3920&lt;/del&gt;&lt;/a&gt; Change test for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
(Ashutosh Chauhan and Navis via namit) (Revision 1436199)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1436199&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1436199&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_distinct_samekey.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13558989" author="hudson" created="Mon, 21 Jan 2013 19:04:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #79 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/79/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/79/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3920&quot; title=&quot;Change test for HIVE-2332&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3920&quot;&gt;&lt;del&gt;HIVE-3920&lt;/del&gt;&lt;/a&gt; Change test for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2332&quot; title=&quot;If all of the parameters of distinct functions are exists in group by columns, query fails in runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2332&quot;&gt;&lt;del&gt;HIVE-2332&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
(Ashutosh Chauhan and Navis via namit) (Revision 1436199)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1436199&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1436199&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_distinct_samekey.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_distinct_samekey.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506630" name="ASF.LICENSE.NOT.GRANTED--HIVE-2332.D663.1.patch" size="11128" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 18:01:40 +0000"/>
                            <attachment id="12505306" name="HIVE-2332.1.patch.txt" size="3149" author="navis" created="Mon, 28 Nov 2011 07:54:11 +0000"/>
                            <attachment id="12506408" name="HIVE-2332.2.patch.txt" size="11436" author="navis" created="Wed, 7 Dec 2011 07:05:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Aug 2011 17:50:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2333] LazySimpleSerDe does not properly handle arrays / escape control characters</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2333</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;LazySimpleSerDe, the default SerDe for Hive is severely broken:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Empty arrays are serialized as an empty string. Hence an array(array()) is indistinguishable from array(array(array())) from array().&lt;/li&gt;
	&lt;li&gt;Similarly, empty strings are serialized as an empty string. Hence array(&apos;&apos;) is also indistinguishable from an empty array.&lt;/li&gt;
	&lt;li&gt;if the serialized string equals the null sequence, then it is ambiguous as to whether it is an array with a single null element or a null array.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It also does not do well with control characters:&lt;/p&gt;

&lt;p&gt;&amp;gt; select array(&apos;foo\002bar&apos;) from tmp;&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;foo&amp;quot;,&amp;quot;bar&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt; select array(&apos;foo\001bar&apos;) from tmp;&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;foo&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12517686">HIVE-2333</key>
            <summary>LazySimpleSerDe does not properly handle arrays / escape control characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jonchang">Jonathan Chang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2011 19:28:58 +0000</created>
                <updated>Mon, 8 Jul 2013 23:38:05 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13078642" author="amareshwari" created="Wed, 3 Aug 2011 08:26:55 +0000"  >&lt;p&gt;Seems related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2303&quot; title=&quot;files with control-A,B are not delimited correctly.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2303&quot;&gt;&lt;del&gt;HIVE-2303&lt;/del&gt;&lt;/a&gt;. I propose we should escape the delimiters always, irrespective of whether it is configured or not.&lt;/p&gt;</comment>
                            <comment id="13700215" author="appodictic" created="Thu, 4 Jul 2013 17:00:30 +0000"  >&lt;p&gt;Interesting. I am not sure what the semantics should be. Protobuf for example does not support null arrays and null arrays are empty. What serde&apos; support what complex types is an interesting question I do not know the answerto. It would be great to have a table of Lazy, thrift, avro, ocr, rcfile and determine exactly what is supported by each.&lt;/p&gt;</comment>
                            <comment id="13701158" author="jonchang" created="Fri, 5 Jul 2013 22:37:24 +0000"  >&lt;p&gt;The key difference to protobuf is that the serdes should satisfy the Hive contract.  I&apos;m not sure what the best way to express the contract is but certainly if a serde does not support a certain condition, at the very least, a warning needs to be shown.&lt;/p&gt;
</comment>
                            <comment id="13701362" author="appodictic" created="Sat, 6 Jul 2013 14:50:45 +0000"  >&lt;blockquote&gt;
&lt;p&gt; I&apos;m not sure what the best way to express the contract is but certainly if a serde does not support a certain condition, at the very least, a &lt;br/&gt;
warning needs to be shown.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree. We also need to be clear what the contract is and draw a matrix of what the current serde&apos;s do.&lt;/p&gt;

&lt;p&gt;The lazy simple is the standard serde and it has been around for a long time. Unless it has broken recently we might be best making a new serde and letting that be the default for new tables. I suggest this because someone is likely dependent on the current behaviour. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I propose we should escape the delimiters always, irrespective of whether it is configured or not.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So if you escape the delimiter does it abide by the contract?&lt;/p&gt;</comment>
                            <comment id="13702630" author="jonchang" created="Mon, 8 Jul 2013 23:38:05 +0000"  >&lt;p&gt;Fair enough.  I&apos;d argue putting together a deprecation plan for lazy simple though since IMO the default serde should just work.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12515255">HIVE-2303</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Aug 2011 08:26:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42166</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2334] DESCRIBE TABLE causes NPE when hive.cli.print.header=true</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2334</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12517708">HIVE-2334</key>
            <summary>DESCRIBE TABLE causes NPE when hive.cli.print.header=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jghoman">Jakob Homan</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2011 21:57:29 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:13 +0000</updated>
                            <resolved>Fri, 19 Aug 2011 18:55:57 +0000</resolved>
                                    <version>0.7.1</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>CLI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13078460" author="cwsteinbach" created="Tue, 2 Aug 2011 21:58:44 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; use default;
OK
hive&amp;gt; set hive.cli.print.header=true;
OK
hive&amp;gt; use default;
11/08/02 14:52:29 INFO ql.Driver: OK
Exception in thread &quot;main&quot; java.lang.NullPointerException
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:176)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:241)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:456)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
%
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13079721" author="jghoman" created="Fri, 5 Aug 2011 01:16:26 +0000"  >&lt;p&gt;Patch to fix issue.  The problem was that some commands, such as &lt;tt&gt;use default&lt;/tt&gt; do not have an associated schema with them from the query processor, but this is expected in the header printing code.  It&apos;s questionable if the QP should return a schema object with two null fields, but that should be addressed in another issue.&lt;/p&gt;

&lt;p&gt;After patch:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; use default;
OK
Time taken: 4.013 seconds
hive&amp;gt; set hive.cli.print.header=true;
hive&amp;gt; use default;
OK
Time taken: 0.0090 seconds
hive&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The actual fix is simple, but a bit of refactoring was necessary to test it.  I normally wouldn&apos;t want to include such refactoring in a bug fix, but this class is ripe for it and the refactorings are a good first step.  The check this via an actual unit test, mockito is introduced, as was also the case in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt;; whichever goes in last will need to be updated to remove the new library.&lt;/p&gt;

&lt;p&gt;The patch is on trunk.  I can generate one for 7.1 if requested.&lt;/p&gt;</comment>
                            <comment id="13079728" author="jiraposter@reviews.apache.org" created="Fri, 5 Aug 2011 01:22:26 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1300/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Commands that don&apos;t return a schema cause NPE when print headers is on.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2334&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 9fa7bc6 &lt;br/&gt;
  cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java PRE-CREATION &lt;br/&gt;
  ivy/libraries.properties af856bd &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1300/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;New unit tests (both positive and negative) and verification on manual cluster.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jakob&lt;/p&gt;
</comment>
                            <comment id="13080175" author="jghoman" created="Fri, 5 Aug 2011 19:46:18 +0000"  >&lt;p&gt;Ran full test suite.  All pass (two failures in full suite, but can&apos;t reproduce after repeated runs - one in TestHBaseCliDriver and one for skewjoin.q).  Patch is ready for review.&lt;/p&gt;</comment>
                            <comment id="13080205" author="jiraposter@reviews.apache.org" created="Fri, 5 Aug 2011 20:38:29 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1300/#review1308&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#review1308&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/#comment2967&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#comment2967&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Might want to consider using StringTokenizer or StreamTokenizer here.&lt;/p&gt;



&lt;p&gt;cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/#comment2963&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#comment2963&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    cli/build.xml overrides the ant test target with a no-op, so this test is actually not getting run.&lt;/p&gt;



&lt;p&gt;cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/#comment2964&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#comment2964&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Wildcard imports violate the checkstyle guidelines.&lt;/p&gt;



&lt;p&gt;cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/#comment2965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#comment2965&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    There&apos;s already some very limited test coverage for the hive.cli.print.header feature in print_header.q. Why not extend this testcase instead of adding a new unit test?&lt;/p&gt;



&lt;p&gt;ivy/libraries.properties&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/#comment2966&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#comment2966&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We need to manage this dependency with Ivy. The Hive build currently runs against hadoop-0.20.1, which does not include mockito-all-1.8.2.jar&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-08-05 01:22:01, Jakob Homan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1300/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-05 01:22:01)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Commands that don&apos;t return a schema cause NPE when print headers is on.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2334&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 9fa7bc6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ivy/libraries.properties af856bd &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1300/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;New unit tests (both positive and negative) and verification on manual cluster.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jakob&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13080217" author="jiraposter@reviews.apache.org" created="Fri, 5 Aug 2011 20:50:27 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-08-05 20:38:11, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java, line 235&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/diff/1/?file=30859#file30859line235&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff/1/?file=30859#file30859line235&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Might want to consider using StringTokenizer or StreamTokenizer here.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is how it was in the original code.  All of this can actually be done quite a bit better.  I&apos;m happy to switch to tokenizer; the patch is a bit schizophrenic about refactoring/improving.  I didn&apos;t change this since it&apos;s not directly related to what I was trying to test.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-08-05 20:38:11, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java, line 37&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line37&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line37&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     There&apos;s already some very limited test coverage for the hive.cli.print.header feature in print_header.q. Why not extend this testcase instead of adding a new unit test?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because this is an actual unit test against a specific regression, which has value separate from the print_header.q integration test.  I can add additional content to print_header.q, since this test is easier to identify what&apos;s gone wrong and runs in about 0.2 seconds, this one seems more useful.  &lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-08-05 20:38:11, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; ivy/libraries.properties, line 47&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/diff/1/?file=30861#file30861line47&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff/1/?file=30861#file30861line47&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     We need to manage this dependency with Ivy. The Hive build currently runs against hadoop-0.20.1, which does not include mockito-all-1.8.2.jar&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m sorry; I don&apos;t understand.  This is being brought in by Ivy?  As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt;, I had mentioned we need to make sure testing related jars don&apos;t get included during binary/package, but that should be done in a different JIRA.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-08-05 20:38:11, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java, line 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line1&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     cli/build.xml overrides the ant test target with a no-op, so this test is actually not getting run.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll update cli/build.xml to not be a no-op, unless there&apos;s some reason to?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jakob&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1300/#review1308&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#review1308&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-08-05 01:22:01, Jakob Homan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1300/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-05 01:22:01)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Commands that don&apos;t return a schema cause NPE when print headers is on.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2334&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 9fa7bc6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ivy/libraries.properties af856bd &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1300/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;New unit tests (both positive and negative) and verification on manual cluster.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jakob&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13080228" author="jiraposter@reviews.apache.org" created="Fri, 5 Aug 2011 21:08:27 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-08-05 20:38:11, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java, line 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line1&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     cli/build.xml overrides the ant test target with a no-op, so this test is actually not getting run.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jakob Homan wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I&apos;ll update cli/build.xml to not be a no-op, unless there&apos;s some reason to?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yup, it needs to be update, or your test will never get run. Inheriting the test target definition from build-common.xml is probably the best option if it works.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-08-05 20:38:11, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; ivy/libraries.properties, line 47&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/diff/1/?file=30861#file30861line47&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff/1/?file=30861#file30861line47&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     We need to manage this dependency with Ivy. The Hive build currently runs against hadoop-0.20.1, which does not include mockito-all-1.8.2.jar&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jakob Homan wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I&apos;m sorry; I don&apos;t understand.  This is being brought in by Ivy?  As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt;, I had mentioned we need to make sure testing related jars don&apos;t get included during binary/package, but that should be done in a different JIRA.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right now the dependency on mockito is unsatisfied. I tried updating cli/build.xml to fix the test target problem and ended up getting a bunch of compilation errors since the mockito jar is not on the classpath.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt;, I had mentioned we need to make sure testing related jars don&apos;t get included during binary/package, but that should be done in a different JIRA.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ivy supports this behavior through the use of configurations. We need to add a &apos;test&apos; configuration to the root ivy.xml file:&lt;/p&gt;

&lt;p&gt;&amp;lt;conf name=&quot;test&quot; extends=&quot;compile&quot; visibility=&quot;private&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;And then add mockito to the list of dependencies:&lt;/p&gt;

&lt;p&gt;&amp;lt;dependency org=&quot;org.mockito&quot; name=&quot;mockito-all&quot; rev=&quot;${mockito-all.version}&quot; conf=&quot;test-&amp;gt;default&quot;/&amp;gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-08-05 20:38:11, Carl Steinbach wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java, line 37&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line37&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff/1/?file=30860#file30860line37&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     There&apos;s already some very limited test coverage for the hive.cli.print.header feature in print_header.q. Why not extend this testcase instead of adding a new unit test?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jakob Homan wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Because this is an actual unit test against a specific regression, which has value separate from the print_header.q integration test.  I can add additional content to print_header.q, since this test is easier to identify what&apos;s gone wrong and runs in about 0.2 seconds, this one seems more useful.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok. Please update print_header.q with some additional tests.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Carl&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1300/#review1308&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/#review1308&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-08-05 01:22:01, Jakob Homan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1300/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-08-05 01:22:01)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Commands that don&apos;t return a schema cause NPE when print headers is on.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2334&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 9fa7bc6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ivy/libraries.properties af856bd &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1300/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;New unit tests (both positive and negative) and verification on manual cluster.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jakob&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13081264" author="jghoman" created="Mon, 8 Aug 2011 22:39:07 +0000"  >&lt;p&gt;Updated patch to address Carl&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13081266" author="jiraposter@reviews.apache.org" created="Mon, 8 Aug 2011 22:42:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1300/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-08 22:42:22.232604)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Removed star imports in unit test.&lt;/li&gt;
	&lt;li&gt;Added test case to integration test.  Call to use default NPEs before patch, succeeds afterwards&lt;/li&gt;
	&lt;li&gt;Removed no-op from cli/build.xml to ensure test runs&lt;/li&gt;
	&lt;li&gt;Added mockito into cli&apos;s ivy.xml.  The top-level ivy.xml doesn&apos;t need changed since the ivy settings aren&apos;t inherited.&lt;/li&gt;
	&lt;li&gt;Didn&apos;t change the split call to tokenize, since it was as is in the original patch.  No need to introduce unnecessary changes.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Commands that don&apos;t return a schema cause NPE when print headers is on.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2334&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  cli/build.xml c174b22 &lt;br/&gt;
  cli/ivy.xml f272b91 &lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 9fa7bc6 &lt;br/&gt;
  cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java PRE-CREATION &lt;br/&gt;
  ivy/libraries.properties af856bd &lt;br/&gt;
  ql/src/test/queries/clientpositive/print_header.q 96380ab &lt;br/&gt;
  ql/src/test/results/clientpositive/print_header.q.out e3946d7 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1300/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;New unit tests (both positive and negative) and verification on manual cluster.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jakob&lt;/p&gt;
</comment>
                            <comment id="13085293" author="jghoman" created="Mon, 15 Aug 2011 20:04:25 +0000"  >&lt;p&gt;canceling patch due to trunk drift.&lt;/p&gt;</comment>
                            <comment id="13085296" author="jghoman" created="Mon, 15 Aug 2011 20:10:25 +0000"  >&lt;p&gt;New patch that merges cleanly after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt;.  Only change is to remove the inclusion of mockito into ivy, which was also done in the now-committed 2171.  Otherwise patch is the same.&lt;/p&gt;</comment>
                            <comment id="13085297" author="jghoman" created="Mon, 15 Aug 2011 20:10:39 +0000"  >&lt;p&gt;re-submitting for review.&lt;/p&gt;</comment>
                            <comment id="13085299" author="jiraposter@reviews.apache.org" created="Mon, 15 Aug 2011 20:13:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1300/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-15 20:12:23.939812)&lt;/p&gt;


&lt;p&gt;Review request for hive and Carl Steinbach.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated diff now that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2171&quot; title=&quot;Allow custom serdes to set field comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2171&quot;&gt;&lt;del&gt;HIVE-2171&lt;/del&gt;&lt;/a&gt; has been committed.  Removes inclusion of mockito, which was handled in the other JIRA.  Otherwise, no changes.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Commands that don&apos;t return a schema cause NPE when print headers is on.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2334&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  cli/build.xml c174b22 &lt;br/&gt;
  cli/ivy.xml f272b91 &lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java a2976b5 &lt;br/&gt;
  cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/print_header.q 96380ab &lt;br/&gt;
  ql/src/test/results/clientpositive/print_header.q.out e3946d7 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1300/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1300/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;New unit tests (both positive and negative) and verification on manual cluster.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jakob&lt;/p&gt;
</comment>
                            <comment id="13087467" author="cwsteinbach" created="Fri, 19 Aug 2011 02:52:39 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13087891" author="cwsteinbach" created="Fri, 19 Aug 2011 18:55:57 +0000"  >&lt;p&gt;Committed to trunk. Thanks Jakob!&lt;/p&gt;</comment>
                            <comment id="13088070" author="hudson" created="Fri, 19 Aug 2011 23:34:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #907 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/907/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/907/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2334&quot; title=&quot;DESCRIBE TABLE causes NPE when hive.cli.print.header=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2334&quot;&gt;&lt;del&gt;HIVE-2334&lt;/del&gt;&lt;/a&gt;. DESCRIBE TABLE causes NPE when hive.cli.print.header=true (Jakob Homan via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159742&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159742&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/test/org/apache&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/test/org/apache/hadoop/hive/cli/TestCliDriverMethods.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/test/org/apache/hadoop&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/test&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/print_header.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/print_header.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/test/org&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/test/org/apache/hadoop/hive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/test/org/apache/hadoop/hive/cli&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489765" name="HIVE-2334-2.patch" size="16492" author="jghoman" created="Mon, 8 Aug 2011 22:39:07 +0000"/>
                            <attachment id="12490467" name="HIVE-2334-3.patch" size="16130" author="jghoman" created="Mon, 15 Aug 2011 20:10:25 +0000"/>
                            <attachment id="12489430" name="h2334.patch" size="12853" author="jghoman" created="Fri, 5 Aug 2011 01:16:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Aug 2011 01:16:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2335] Indexes are still automatically queried when out of sync with their source tables</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2335</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The automatic index usage does not check whether or not the indexes are still up-to-date when generating the index queries. This can be addressed in two stages, the first is to add a check before generating the index query to ensure that the index is still valid. The next stage may be to add some sort of mode where indexes are automatically updated on table writes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12517718">HIVE-2335</key>
            <summary>Indexes are still automatically queried when out of sync with their source tables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="salbiz">Syed S. Albiz</assignee>
                                    <reporter username="salbiz">Syed S. Albiz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2011 23:13:36 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:33 +0000</updated>
                            <resolved>Fri, 19 Aug 2011 04:18:32 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Indexing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13078493" author="salbiz" created="Tue, 2 Aug 2011 23:14:42 +0000"  >&lt;p&gt;fix + testcases for the immediate solution of checking timestamps to ensure indexes are valid before generating the index queries.&lt;/p&gt;</comment>
                            <comment id="13078495" author="salbiz" created="Tue, 2 Aug 2011 23:16:34 +0000"  >&lt;p&gt;This change will likely break the change introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2138&quot; title=&quot;Exception when no splits returned from index&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2138&quot;&gt;&lt;del&gt;HIVE-2138&lt;/del&gt;&lt;/a&gt;, so it will be smoother to have this one get in, and then modify the patch in 2138 to use a more robust testcase to ensure that indexes are actually used&lt;/p&gt;</comment>
                            <comment id="13078497" author="jiraposter@reviews.apache.org" created="Tue, 2 Aug 2011 23:18:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1260/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive, John Sichi, Yongqiang He, and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Check the timestamps of the tables/partitions to ensure that they were not written to since the index was last generated&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2335&quot; title=&quot;Indexes are still automatically queried when out of sync with their source tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2335&quot;&gt;&lt;del&gt;HIVE-2335&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2335&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2335&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java 8295687 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_stale.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_stale_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale_partitioned.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1260/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1260/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;added index_stale.q and index_stale_partitioned.q to the testcase suite&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13086070" author="salbiz" created="Wed, 17 Aug 2011 00:57:15 +0000"  >&lt;p&gt;Ning pointed out that there was a race condition with the approach I was using, modified to store the timestamps of the base tables before we kick off the rebuild job.&lt;/p&gt;</comment>
                            <comment id="13086072" author="jiraposter@reviews.apache.org" created="Wed, 17 Aug 2011 00:59:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1260/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-17 00:57:46.951422)&lt;/p&gt;


&lt;p&gt;Review request for hive, John Sichi, Yongqiang He, and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Ning pointed out that there was a race condition with the approach I was using, modified to store the timestamps of the base tables before we kick off the rebuild job.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Check the timestamps of the tables/partitions to ensure that they were not written to since the index was last generated&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2335&quot; title=&quot;Indexes are still automatically queried when out of sync with their source tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2335&quot;&gt;&lt;del&gt;HIVE-2335&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2335&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2335&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java 8295687 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 3054f76 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/AlterIndexDesc.java cf20b89 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_stale.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_stale_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale_partitioned.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1260/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1260/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;added index_stale.q and index_stale_partitioned.q to the testcase suite&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13086722" author="he yongqiang" created="Thu, 18 Aug 2011 01:18:07 +0000"  >&lt;p&gt;+1, looks good.&lt;/p&gt;</comment>
                            <comment id="13086844" author="he yongqiang" created="Thu, 18 Aug 2011 07:12:12 +0000"  >&lt;p&gt;Can you fix the errors output by the new testcases?&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: index_stale.q&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted &lt;a href=&quot;file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp&lt;/a&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted &lt;a href=&quot;file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/default__temp_temp_index__&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/default__temp_temp_index__&lt;/a&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted &lt;a href=&quot;file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp&lt;/a&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I USING &apos;java -cp /data/users/heyongqiang/hive-trunk-commit/build/ql/test/logs/clientpositive/index_stale.q.out /data/users/heyongqiang/hive-trunk-commit/ql/src/test/results/clientpositive/index_stale.q.out&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_stale(TestCliDriver.java:130)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:785)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 29c29&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; PREHOOK: type: ALTERINDEX_REBUILD&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; PREHOOK: type: QUERY&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 33c33&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; POSTHOOK: type: ALTERINDEX_REBUILD&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; POSTHOOK: type: QUERY&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: index_stale_partitioned.q&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted pfile:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp/foo=bar&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted pfile:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/default_&lt;em&gt;temp_temp_index&lt;/em&gt;_/foo=bar&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted pfile:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp/foo=bar&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I USING &apos;java -cp /data/users/heyongqiang/hive-trunk-commit/build/ql/test/logs/clientpositive/index_stale_partitioned.q.out /data/users/heyongqiang/hive-trunk-commit/ql/src/test/results/clientpositive/index_stale_partitioned.q.out&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_stale_partitioned(TestCliDriver.java:178)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:785)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 38c38&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; PREHOOK: type: ALTERINDEX_REBUILD&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; PREHOOK: type: QUERY&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 42c42&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; POSTHOOK: type: ALTERINDEX_REBUILD&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; POSTHOOK: type: QUERY&lt;/p&gt;</comment>
                            <comment id="13086925" author="salbiz" created="Thu, 18 Aug 2011 10:07:54 +0000"  >&lt;p&gt;Forgot to update after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2286&quot; title=&quot;ClassCastException when building index with security.authorization turned on&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2286&quot;&gt;&lt;del&gt;HIVE-2286&lt;/del&gt;&lt;/a&gt; landed and changed all the indexing testcase outputs&lt;/p&gt;</comment>
                            <comment id="13086927" author="jiraposter@reviews.apache.org" created="Thu, 18 Aug 2011 10:09:27 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1260/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-08-18 10:08:30.148104)&lt;/p&gt;


&lt;p&gt;Review request for hive, John Sichi, Yongqiang He, and Ning Zhang.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;updated testcases&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Check the timestamps of the tables/partitions to ensure that they were not written to since the index was last generated&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2335&quot; title=&quot;Indexes are still automatically queried when out of sync with their source tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2335&quot;&gt;&lt;del&gt;HIVE-2335&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2335&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2335&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java 8295687 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 3054f76 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/AlterIndexDesc.java cf20b89 &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_stale.q PRE-CREATION &lt;br/&gt;
  ql/src/test/queries/clientpositive/index_stale_partitioned.q PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale.q.out PRE-CREATION &lt;br/&gt;
  ql/src/test/results/clientpositive/index_stale_partitioned.q.out PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1260/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1260/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;added index_stale.q and index_stale_partitioned.q to the testcase suite&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Syed&lt;/p&gt;
</comment>
                            <comment id="13087199" author="he yongqiang" created="Thu, 18 Aug 2011 19:06:07 +0000"  >&lt;p&gt;+1, running tests&lt;/p&gt;</comment>
                            <comment id="13087519" author="he yongqiang" created="Fri, 19 Aug 2011 04:18:32 +0000"  >&lt;p&gt;committed, thanks Syed!&lt;/p&gt;</comment>
                            <comment id="13087675" author="hudson" created="Fri, 19 Aug 2011 12:23:00 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #905 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/905/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/905/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2335&quot; title=&quot;Indexes are still automatically queried when out of sync with their source tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2335&quot;&gt;&lt;del&gt;HIVE-2335&lt;/del&gt;&lt;/a&gt;: Indexes are still automatically queried when out of sync with their source tables (Syed via He Yongqiang)&lt;/p&gt;

&lt;p&gt;heyongqiang : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159499&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159499&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_stale_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/index_stale_partitioned.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/index_stale.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/index_stale.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/AlterIndexDesc.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489129" name="HIVE-2335.1.patch" size="27845" author="salbiz" created="Tue, 2 Aug 2011 23:14:42 +0000"/>
                            <attachment id="12490587" name="HIVE-2335.2.patch" size="34174" author="salbiz" created="Wed, 17 Aug 2011 00:57:15 +0000"/>
                            <attachment id="12490780" name="HIVE-2335.3.patch" size="34226" author="salbiz" created="Thu, 18 Aug 2011 10:07:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Aug 2011 23:18:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i010bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2336] Test whether or not the indexes are actually being used at the InputFormat level</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2336</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is what index_auto_test_if_used.q was supposed to do, but that approach is no longer valid, so we must find another way to test this behaviour. John and Ning suggested writing a JUnit testcase that would access the java objects directly to verify that the correct operations were done.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12517724">HIVE-2336</key>
            <summary>Test whether or not the indexes are actually being used at the InputFormat level</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="salbiz">Syed S. Albiz</assignee>
                                    <reporter username="salbiz">Syed S. Albiz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2011 23:49:36 +0000</created>
                <updated>Tue, 2 Aug 2011 23:49:42 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42165</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
