<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:13:31 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-6-3+AND+created+%3C%3D+2009-6-10+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="16" total="16"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-536] make all CLI commands go through parser.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-536</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;currently lot of commands do not go through parser framework resulting in weird bugs/behavior from cli.&lt;/p&gt;

&lt;p&gt;couple of examples--&lt;br/&gt;
1) comments can&apos;t be in side a query&lt;br/&gt;
2) having set after a comment line throws up errors&lt;/p&gt;

&lt;p&gt;things will be simpler if parser deals with most commands.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426992">HIVE-536</key>
            <summary>make all CLI commands go through parser.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2009 00:40:50 +0000</created>
                <updated>Wed, 3 Jun 2009 20:27:40 +0000</updated>
                                            <version>0.4.0</version>
                                                    <component>Clients</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                            <comments>
                            <comment id="12716052" author="zshao" created="Wed, 3 Jun 2009 20:27:40 +0000"  >&lt;p&gt;Agree. We can add more &quot;XXXSemanticAnalyzer&quot; if needed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12432932">HIVE-753</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jun 2009 20:27:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ladb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122330</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-537] Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-537</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are already some cases inside the code that we use heterogeneous data: JoinOperator, and UnionOperator (in the sense that different parents can pass in records with different ObjectInspectors).&lt;br/&gt;
We currently use Operator&apos;s parentID to distinguish that. However that approach does not extend to more complex plans that might be needed in the future.&lt;/p&gt;

&lt;p&gt;We will support the union type like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TypeDefinition:
  type: primitivetype | structtype | arraytype | maptype | uniontype
  uniontype: &lt;span class=&quot;code-quote&quot;&gt;&quot;union&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;&quot;&lt;/span&gt; tag &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; type (&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; tag &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; type)* &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt;
Example:
  union&amp;lt;0:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,1:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;,2:array&amp;lt;string&amp;gt;,3:struct&amp;lt;a:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,b:string&amp;gt;&amp;gt;

Example of serialized data format:
  We will first store the tag &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; before we serialize the object. On deserialization, we will first read out the tag &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;, then we know what is the current type of the following object, so we can deserialize it successfully.

Interface &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ObjectInspector:
&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; UnionObjectInspector {
  /** Returns the array of OIs that are &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each of the tags
   */
  ObjectInspector[] getObjectInspectors();
  /** Return the tag of the object.
   */
  &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; getTag(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o);
  /** Return the field based on the tag value associated with the &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.
   */
  &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getField(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o);
};

An example serialization format (Using deliminated format, with &lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt; as first-level delimitor and &lt;span class=&quot;code-quote&quot;&gt;&apos;=&apos;&lt;/span&gt; as second-level delimitor)
userid:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,log:union&amp;lt;0:struct&amp;lt;touserid:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,message:string&amp;gt;&amp;gt;,1:string&amp;gt;
123 1=login
123 0=243=helloworld
123 1=logout

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12427012">HIVE-537</key>
            <summary>Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amareshwari">Amareshwari Sriramadasu</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                            <label>uniontype</label>
                    </labels>
                <created>Wed, 3 Jun 2009 08:58:02 +0000</created>
                <updated>Fri, 3 Nov 2017 18:46:45 +0000</updated>
                            <resolved>Fri, 8 Oct 2010 22:03:31 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12715878" author="zshao" created="Wed, 3 Jun 2009 09:16:50 +0000"  >&lt;p&gt;An example usage is for multiple distinct. Min Zhou talked with me offline and has shown that doing multiple distinct in a single map-reduce job can be much faster than doing them separately and then join the results.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Query:
  select a, count(distinct b), count(distinct c), sum(d)

Plan:
  Map side:
    Emit: distribution_key: a, sort_key: a, 0, b, value: d
    Emit: distribution_key: a, sort_key: a, 1, c, value: nothing
  Reduce side:
    Group By:
      a, 0, count(distinct b), sum(d)
      a, 1, count(distinct c)
    Flatten:
      a, count(distinct b), sum(d), count(distinct c)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12716015" author="athusoo" created="Wed, 3 Jun 2009 18:13:54 +0000"  >&lt;p&gt;One thing that you need to be careful about is the fact that you will be increasing the number of rows between the map and the reduce boundaries which, if there are a lot of distincts can lead to data explosion and a subsequent slowdown in the sort.&lt;/p&gt;

&lt;p&gt;From that I mean the following:&lt;/p&gt;

&lt;p&gt;Suppose we have a query with m different distincts and the base table with N rows and p mappers and r reducers&lt;br/&gt;
By doing multiple map/reduce jobs, the predominant term in our complexity is&lt;/p&gt;

&lt;p&gt;O(mN/p) + O(m(N/p log (N/p))) + O(mN/r) + O(m)&lt;/p&gt;

&lt;p&gt;ie.&lt;br/&gt;
map side scan + map side sort + Reduce side merge + fixed cost of starting the map/reduce job.&lt;/p&gt;

&lt;p&gt;how with the current approach the corresponding formula will be&lt;/p&gt;

&lt;p&gt;O(mN/p) + O(mN/p log (mN/p)) + O(mN/r)&lt;br/&gt;
=&lt;br/&gt;
O(mN/p) + O(mN/p log (N/p)) + O(mN/p log m) + O(mN/r)&lt;/p&gt;

&lt;p&gt;There may be situations where one is better than the other... Something to keep in mind.&lt;/p&gt;</comment>
                            <comment id="12718373" author="coderplay" created="Thu, 11 Jun 2009 09:35:27 +0000"  >&lt;p&gt;first approach:&lt;br/&gt;
  O(mN/p) + O(m(N/p log (N/p))) + O(mN/r) + O(m)&lt;br/&gt;
I don&apos;t agree with you about this O(m).  It would be indeed very large cost.  and meanwhile,  you should adding the cost in the end joining all results into one. &lt;/p&gt;

&lt;p&gt; for the second approach, I think it should be  &lt;br/&gt;
  O(N/p) + O(mN/p log (mN/p)) + O(mN/r)  &lt;/p&gt;</comment>
                            <comment id="12724916" author="coderplay" created="Sun, 28 Jun 2009 03:15:04 +0000"  >&lt;p&gt;we&apos;ve done a test about this issue, dataset: 700m records.&lt;/p&gt;

&lt;p&gt;first approach where each distinct count was computed one by one, each of them needed 119 seconds, that meant 10 distinct count need at least  1190 seconds.&lt;br/&gt;
second approach where distinct keys were distinguished by a tag,  10 distinct count need 148 seconds.&lt;/p&gt;</comment>
                            <comment id="12725532" author="coderplay" created="Tue, 30 Jun 2009 08:56:56 +0000"  >&lt;p&gt;Even if UnionObjectInspector has been implemented,  the DynamicSerDe seems don&apos;t support  the schema with a union type  which thrift can&apos;t recoginze.&lt;br/&gt;
We must find a way solving it, any suggestions?  &lt;/p&gt;</comment>
                            <comment id="12727385" author="coderplay" created="Mon, 6 Jul 2009 03:41:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt;.1.patch&lt;/p&gt;</comment>
                            <comment id="12727846" author="zshao" created="Tue, 7 Jul 2009 00:17:04 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt;.1.patch:&lt;br/&gt;
1. Can you remove the property changes? These java files don&apos;t need to be executable:&lt;br/&gt;
Property changes on: src/java/org/apache/hadoop/hive/serde2/objectinspector/StandardUnionObjectInspector.java&lt;br/&gt;
___________________________________________________________________&lt;br/&gt;
Name: svn:executable&lt;br/&gt;
   + *&lt;br/&gt;
2. UnionObjectInspector.java: byte getTag(Object o, int ordinal);&lt;br/&gt;
We don&apos;t need ordinal here.&lt;br/&gt;
3. Can you add union to TypeInfoUtils.java: class TypeInfoParser as well?&lt;br/&gt;
4. We need some test cases. Please take a look at TestStandardObjectInspectors.java&lt;br/&gt;
5. We need to add the capability of serializing/deserializing Union types to LazySimpleSerDe.&lt;/p&gt;</comment>
                            <comment id="12727999" author="coderplay" created="Tue, 7 Jul 2009 09:13:32 +0000"  >&lt;p&gt;Zheng, how would you get field value from an object without a ordinal?&lt;/p&gt;</comment>
                            <comment id="12838256" author="zshao" created="Thu, 25 Feb 2010 09:10:20 +0000"  >&lt;p&gt;I suppose tag is always the first field of an object? Is that reasonable?&lt;/p&gt;</comment>
                            <comment id="12904099" author="amareshwari" created="Mon, 30 Aug 2010 07:31:33 +0000"  >&lt;p&gt;Min, any update on the patch?&lt;/p&gt;</comment>
                            <comment id="12904525" author="amareshwari" created="Tue, 31 Aug 2010 05:51:36 +0000"  >&lt;p&gt;Min, if you are not working on this, I would like to work on the follow-up patch.&lt;/p&gt;</comment>
                            <comment id="12905407" author="amareshwari" created="Thu, 2 Sep 2010 05:13:46 +0000"  >&lt;p&gt;Updated the patch with following changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removed the ordinal from getTag() in UnionObjectInspector.&lt;/li&gt;
	&lt;li&gt;Added union to TypeInfoUtils, TypeInfoParser, LazySimpleSerde and LazyFactory.&lt;/li&gt;
	&lt;li&gt;Added unit tests to TestLazyArrayMapStruct and TestStandardObjectInspectors&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12905420" author="amareshwari" created="Thu, 2 Sep 2010 05:49:40 +0000"  >&lt;p&gt;Patch with minor change in the testcase.&lt;/p&gt;</comment>
                            <comment id="12905421" author="amareshwari" created="Thu, 2 Sep 2010 05:52:06 +0000"  >&lt;p&gt;Zheng, Can you please have a look at the attached patch?&lt;/p&gt;</comment>
                            <comment id="12906759" author="hbasereviewboard" created="Tue, 7 Sep 2010 10:19:17 +0000"  >&lt;p&gt;Message from: &quot;Amareshwari Sriramadasu&quot; &amp;lt;amarsri@yahoo-inc.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/795/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/795/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for Hive Developers.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adds Union type to Standard ObjectInSpectors, TypeInfo and Lazy ObjectInspectors.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-537&quot; title=&quot;Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-537&quot;&gt;&lt;del&gt;HIVE-537&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-537&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-537&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/serde/src/gen-java/org/apache/hadoop/hive/serde/Constants.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/SerDeUtils.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/binarysortable/BinarySortableSerDe.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyFactory.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazySimpleSerDe.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/LazyUnion.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/LazyObjectInspectorFactory.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/lazy/objectinspector/LazyUnionObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspector.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorFactory.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/StandardUnionObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/UnionObject.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/UnionObjectInspector.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfo.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoUtils.java 991812 &lt;br/&gt;
  trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/UnionTypeInfo.java PRE-CREATION &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/lazy/TestLazyArrayMapStruct.java 991812 &lt;br/&gt;
  trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/TestStandardObjectInspectors.java 991812 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/795/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/795/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Amareshwari&lt;/p&gt;

</comment>
                            <comment id="12909919" author="hbasereviewboard" created="Wed, 15 Sep 2010 22:23:07 +0000"  >&lt;p&gt;Message from: &quot;Zheng Shao&quot; &amp;lt;zshao9@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/795/#review1231&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/795/#review1231&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Overall looks like a good first step.  We need to change Hive.g, add UDF etc to allow users to use it in the Hive language.&lt;/p&gt;


&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorFactory.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/795/#comment4192&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/795/#comment4192&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    unioin -&amp;gt; union&lt;/p&gt;



&lt;p&gt;trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorUtils.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/795/#comment4193&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/795/#comment4193&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We cannot compare 2 union objects like this.  We need to first compare their TAG.  Only when the TAG is the same shall we compare the field.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Zheng&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12912420" author="hbasereviewboard" created="Mon, 20 Sep 2010 09:56:04 +0000"  >&lt;p&gt;Message from: &quot;Amareshwari Sriramadasu&quot; &amp;lt;amarsri@yahoo-inc.com&amp;gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-09-15 15:15:08, Zheng Shao wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Overall looks like a good first step.  We need to change Hive.g, add UDF etc to allow users to use it in the Hive language.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Zheng, there is already keyword (KW_UNION: &apos;UNION&apos;) used for doing union/union all operations. Do you think we should use a different keyword for specifying Union type?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Amareshwari&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/795/#review1231&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/795/#review1231&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


</comment>
                            <comment id="12912614" author="zshao" created="Mon, 20 Sep 2010 17:50:27 +0000"  >&lt;p&gt;I think so. Let&apos;s use a different name for the UDF.&lt;/p&gt;

&lt;p&gt;Using &apos;UNION&apos; as UDF name will not cause grammar ambiguity, but it may cause other issues in the future.&lt;/p&gt;

&lt;p&gt;Zheng&lt;/p&gt;</comment>
                            <comment id="12913475" author="amareshwari" created="Wed, 22 Sep 2010 09:25:15 +0000"  >&lt;p&gt;Zheng, Can you give an example usage of union type as UDF? I looked at Struct, Map and array UDFs, but Union is quiet different from them because it holds only one object at any point of time.&lt;/p&gt;</comment>
                            <comment id="12913670" author="zshao" created="Wed, 22 Sep 2010 17:25:17 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;union&amp;lt;T0,T1,T2&amp;gt; create_union(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; tag, T0 o0, T1 o1, T2 o2, ...)
Some real examples:
union&amp;lt;School,Company&amp;gt; create_union( is_student ? 0 : 1, school, company)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Depending on the value of the tag, the returned union object will choose to store only the object corresponding to that tag.&lt;/p&gt;</comment>
                            <comment id="12914382" author="amareshwari" created="Fri, 24 Sep 2010 08:50:41 +0000"  >&lt;p&gt;Patch incorporating review comments:&lt;/p&gt;

&lt;p&gt;Changes include:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Added udf &quot;create_union&quot; to create union object. Added test query using create_union.&lt;/li&gt;
	&lt;li&gt;Added UNIONTYPE keyword to Hive.g.  Added test query to create table with union column.&lt;/li&gt;
	&lt;li&gt;Fixed a couple of minor bugs in LazySimpleSerde and LazyUnion.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12914383" author="amareshwari" created="Fri, 24 Sep 2010 08:59:58 +0000"  >&lt;p&gt;All the tests passed with the patch.&lt;/p&gt;

&lt;p&gt;Zheng, Can you have a look at the updated patch? Thanks.&lt;/p&gt;</comment>
                            <comment id="12916022" author="amareshwari" created="Wed, 29 Sep 2010 05:20:36 +0000"  >&lt;p&gt;Earlier patch has gone stale. Updated the patch to trunk.&lt;/p&gt;</comment>
                            <comment id="12918441" author="amareshwari" created="Wed, 6 Oct 2010 09:07:25 +0000"  >&lt;p&gt;Fixed a minor bug in BinarySortableSerde while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-474&quot; title=&quot;Support for distinct selection on two or more columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-474&quot;&gt;&lt;del&gt;HIVE-474&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Can somebody review the patch, before it goes stale again?&lt;/p&gt;</comment>
                            <comment id="12918739" author="namit" created="Wed, 6 Oct 2010 23:56:25 +0000"  >&lt;p&gt;I will review again: few initial comments:&lt;/p&gt;

&lt;p&gt;1. Constants.java is a generated file ? Can you change serde/if/serde.thrift&lt;br/&gt;
2. desc extended for create_union is not detailed enough ?&lt;/p&gt;</comment>
                            <comment id="12918740" author="namit" created="Thu, 7 Oct 2010 00:18:03 +0000"  >&lt;p&gt;Otherwise it looks good to me&lt;/p&gt;</comment>
                            <comment id="12918795" author="amareshwari" created="Thu, 7 Oct 2010 06:10:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Constants.java is a generated file ? Can you change serde/if/serde.thrift&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;After adding the constant to serde/if/serde.thrift, do i need to regenerate the java file? If yes, How should i do it?&lt;/p&gt;</comment>
                            <comment id="12919015" author="namit" created="Thu, 7 Oct 2010 18:47:49 +0000"  >&lt;p&gt;Add the following line to serde.thrift:&lt;/p&gt;


&lt;p&gt;const string FOO = &quot;foo&quot;&lt;/p&gt;


&lt;p&gt;(whichever constant you want to add).&lt;/p&gt;

&lt;p&gt;Then, call &lt;/p&gt;

&lt;p&gt;ant thriftif &lt;/p&gt;

&lt;p&gt;in serde directory - it will generate the required files &lt;/p&gt;

&lt;p&gt;      src/gen-py/org_apache_hadoop_hive_serde/constants.py&lt;br/&gt;
      src/gen-java/org/apache/hadoop/hive/serde/Constants.java&lt;br/&gt;
      src/gen-cpp/serde_constants.cpp&lt;br/&gt;
      src/gen-cpp/serde_constants.h&lt;br/&gt;
      src/gen-php/serde_constants.php&lt;/p&gt;


&lt;p&gt;Check in these files, but don&apos;t hand edit them&lt;/p&gt;</comment>
                            <comment id="12919154" author="amareshwari" created="Fri, 8 Oct 2010 04:52:21 +0000"  >&lt;p&gt;Added the constant to serde.thrift and re-generated the files.&lt;br/&gt;
Added an example to describe extended for create_union &lt;/p&gt;</comment>
                            <comment id="12919165" author="namit" created="Fri, 8 Oct 2010 05:52:04 +0000"  >&lt;p&gt;Will look at it tomorrow.&lt;/p&gt;</comment>
                            <comment id="12919342" author="namit" created="Fri, 8 Oct 2010 18:27:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12919393" author="namit" created="Fri, 8 Oct 2010 22:03:31 +0000"  >&lt;p&gt;Committed. Thanks Amareshwari&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12424731">HIVE-474</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12519221">HIVE-2390</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13028366">HIVE-15434</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12412575" name="HIVE-537.1.patch" size="10631" author="coderplay" created="Mon, 6 Jul 2009 03:41:25 +0000"/>
                            <attachment id="12453656" name="patch-537-1.txt" size="54540" author="amareshwari" created="Thu, 2 Sep 2010 05:49:40 +0000"/>
                            <attachment id="12455474" name="patch-537-2.txt" size="69441" author="amareshwari" created="Fri, 24 Sep 2010 08:50:41 +0000"/>
                            <attachment id="12455898" name="patch-537-3.txt" size="70426" author="amareshwari" created="Wed, 29 Sep 2010 05:20:36 +0000"/>
                            <attachment id="12456480" name="patch-537-4.txt" size="70856" author="amareshwari" created="Wed, 6 Oct 2010 09:07:25 +0000"/>
                            <attachment id="12456667" name="patch-537-5.txt" size="73706" author="amareshwari" created="Fri, 8 Oct 2010 04:52:21 +0000"/>
                            <attachment id="12453653" name="patch-537.txt" size="54372" author="amareshwari" created="Thu, 2 Sep 2010 05:13:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jun 2009 18:13:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ladj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122331</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-538] make hive_jdbc.jar self-containing</title>
                <link>https://issues.apache.org/jira/browse/HIVE-538</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, most jars in hive/build/dist/lib and the hadoop-*-core.jar are required in the classpath to run jdbc applications on hive. We need to do atleast the following to get rid of most unnecessary dependencies:&lt;br/&gt;
1. get rid of dynamic serde and use a standard serialization format, maybe tab separated, json or avro&lt;br/&gt;
2. dont use hadoop configuration parameters&lt;br/&gt;
3. repackage thrift and fb303 classes into hive_jdbc.jar&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427046">HIVE-538</key>
            <summary>make hive_jdbc.jar self-containing</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njw45">Nick White</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2009 18:13:08 +0000</created>
                <updated>Thu, 13 Nov 2014 19:43:41 +0000</updated>
                            <resolved>Fri, 6 Jun 2014 19:54:07 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.6.0</version>
                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="12896746" author="billgraham" created="Tue, 10 Aug 2010 00:15:57 +0000"  >&lt;p&gt;From a purely empirical approach it appears that the following jars are currently required to use the hive JDBC driver (version 0.5.0):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;dist/lib/hive-exec-0.7.0.jar
dist/lib/hive-jdbc-0.7.0.jar
dist/lib/hive-metastore-0.7.0.jar
dist/lib/hive-service-0.7.0.jar
dist/lib/libfb303.jar
dist/lib/libthrift.jar

hadoop-core-{version}.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I propose modifying the build process to combine the classes from the first set of jars into one single jar. That way users only need to add the hadoop-core jar and and hive-jdbc-combined jar to their classpath. As other dependencies are removed or refactored away, we could thin out what goes in the jar. &lt;/p&gt;

&lt;p&gt;I can take on this JIRA if others agree with the approach.&lt;/p&gt;

</comment>
                            <comment id="13239048" author="ashutoshc" created="Tue, 27 Mar 2012 00:18:11 +0000"  >&lt;p&gt;@Bill,&lt;br/&gt;
Your approach sounds reasonable to me. Will you like to work on this? You can reference my patch at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2900&quot; title=&quot;Add target for fatjar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2900&quot;&gt;&lt;del&gt;HIVE-2900&lt;/del&gt;&lt;/a&gt; for how to do repackaging easily. &lt;/p&gt;</comment>
                            <comment id="13239062" author="billgraham" created="Tue, 27 Mar 2012 00:29:53 +0000"  >&lt;p&gt;@Ashutosh I&apos;m no longer actively using Hive these days, so it would be quite an effort for me to get set up again to contribute. Sorry, but I need to rescind my offer to take this one on. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13242746" author="phabricator@reviews.facebook.net" created="Fri, 30 Mar 2012 21:09:22 +0000"  >&lt;p&gt;ashutoshc requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-538&quot; title=&quot;make hive_jdbc.jar self-containing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-538&quot;&gt;&lt;del&gt;HIVE-538&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make hive_jdbc.jar self-containing&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-538&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-538&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  This patch introduces two new targets:&lt;/p&gt;

&lt;p&gt;  a) jar-jdbc-combined : This target generates a jar file containing all the hive jars required for jdbc driver.&lt;br/&gt;
  b) jar-jdbc-rt-deps  : This target generates a jar file which contains all the hive runtime dependcies in a single jar.&lt;/p&gt;

&lt;p&gt;  Currently, most jars in hive/build/dist/lib and the hadoop-*-core.jar are required in the classpath to run jdbc applications on hive. We need to do atleast the following to get rid of most unnecessary dependencies:&lt;br/&gt;
  1. get rid of dynamic serde and use a standard serialization format, maybe tab separated, json or avro&lt;br/&gt;
  2. dont use hadoop configuration parameters&lt;br/&gt;
  3. repackage thrift and fb303 classes into hive_jdbc.jar&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2553&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2553&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  ivy.xml&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5799/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5799/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13242752" author="ashutoshc" created="Fri, 30 Mar 2012 21:13:50 +0000"  >&lt;p&gt; Patch for generating artifacts for jdbc drivers which makes it easier for folks using jdbc driver to include it in their projects. Note two noticeable omissions from hive-jdbc-rt-deps.jar datanucleus-core.jar and datanucleus-rdbms.jar If those are packaged in same jar then datanucleus have trouble loading them, so I excluded those. As a result, those still needs to put in application&apos;s classpath separately &lt;/p&gt;</comment>
                            <comment id="13253100" author="ashutoshc" created="Fri, 13 Apr 2012 04:35:21 +0000"  >&lt;p&gt;Ready for review.&lt;/p&gt;</comment>
                            <comment id="13254511" author="phabricator@reviews.facebook.net" created="Mon, 16 Apr 2012 05:18:18 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-538&quot; title=&quot;make hive_jdbc.jar self-containing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-538&quot;&gt;&lt;del&gt;HIVE-538&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make hive_jdbc.jar self-containing&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build.xml:1262 Do you want to change it to jdo*api*&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2553&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2553&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13255822" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 18:53:14 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-538&quot; title=&quot;make hive_jdbc.jar self-containing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-538&quot;&gt;&lt;del&gt;HIVE-538&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make hive_jdbc.jar self-containing&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build.xml:1262 I dont see any advantage of it. But, since it wont make a difference I will do it any case.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2553&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2553&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13255823" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 18:53:16 +0000"  >&lt;p&gt;ashutoshc updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-538&quot; title=&quot;make hive_jdbc.jar self-containing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-538&quot;&gt;&lt;del&gt;HIVE-538&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; make hive_jdbc.jar self-containing&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Addressing Namit&apos;s comments.&lt;br/&gt;
  Rebased to trunk.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2553&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2553&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  ivy.xml&lt;/p&gt;</comment>
                            <comment id="13971569" author="njw45" created="Wed, 16 Apr 2014 15:46:34 +0000"  >&lt;p&gt;This should be easier to implement now Hive uses Maven as a build system - you could make the JDBC driver project use the shade plugin (&lt;a href=&quot;https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13971570" author="rmurthy@fb.com" created="Wed, 16 Apr 2014 15:48:21 +0000"  >&lt;p&gt;Hi, Raghu Murthy is no longer at Facebook so this email address is no longer being monitored. If you need assistance, please contact another person who is currently at the company or peeps@fb.com.&lt;/p&gt;</comment>
                            <comment id="13972851" author="njw45" created="Thu, 17 Apr 2014 11:32:34 +0000"  >&lt;p&gt;I&apos;ve attached a patch that builds a self-containing jar -&lt;/p&gt;</comment>
                            <comment id="13973198" author="ashutoshc" created="Thu, 17 Apr 2014 17:54:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=njw45&quot; class=&quot;user-hover&quot; rel=&quot;njw45&quot;&gt;Nick White&lt;/a&gt; Can you take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6593&quot; title=&quot;Create a maven assembly for hive-jdbc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6593&quot;&gt;&lt;del&gt;HIVE-6593&lt;/del&gt;&lt;/a&gt; to see if it satisfies your needs?&lt;/p&gt;</comment>
                            <comment id="13975767" author="njw45" created="Mon, 21 Apr 2014 17:42:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; not really, it manually lists some dependencies (not the transitive ones) instead of using maven to work them out, and creates a tar.gz of many jars, not a single jar with all the dependencies in. A tar.gz can&apos;t easily integrate with maven; it&apos;s easy to add this complete jar as a dependency to a third-party maven project as it&apos;s published with a distinct classifier.&lt;/p&gt;</comment>
                            <comment id="13975771" author="njw45" created="Mon, 21 Apr 2014 17:47:16 +0000"  >&lt;p&gt;also, duplicating hive-jdbc&apos;s dependencies in an xml file in a different project will increase maintenance costs, as these two lists will have to be manually kept in sync.&lt;/p&gt;</comment>
                            <comment id="13983617" author="ashutoshc" created="Mon, 28 Apr 2014 21:47:49 +0000"  >&lt;p&gt;I think name of jar should be &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; apache-hive-${project.version}-jdbc-client.jar &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; instead of &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; apache-hive-${project.version}-jdbc.jar &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Currently hadoop classes are excluded from this uber jar but adds in other transitive deps. Seems like we have few options of what to put in this jdbc jar:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;One which is currently implemented in patch : all deps excluding hadoop.&lt;/li&gt;
	&lt;li&gt;Only hive classes in there.&lt;/li&gt;
	&lt;li&gt;All deps including hadoop.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I don&apos;t have good sense whats the best choice here. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;Vaibhav Gumashta&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;Prasad Mujumdar&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;Thejas M Nair&lt;/a&gt; Do you guys have an opinion on this?&lt;/p&gt;</comment>
                            <comment id="13983684" author="brocknoland" created="Mon, 28 Apr 2014 22:32:19 +0000"  >&lt;p&gt;I&apos;d prefer either 1 or 3 and that we shade all non-hive deps.&lt;/p&gt;</comment>
                            <comment id="13983886" author="thejas" created="Tue, 29 Apr 2014 02:21:23 +0000"  >&lt;p&gt;The hadoop dependencies for jdbc client are needed only when kerberos authentication is used. However, it is a small set of hadoop jars that are needed, and their transitive dependencies are not needed. In case of hadoop 1.x, it is just hadoop-core*jar that is needed. I am not sure of the exact dependency in hadoop-2.x .&lt;/p&gt;

&lt;p&gt;I am fine with option 1. But if we can do option 3, with the minimal set of hadoop jars requried, that would be awesome.&lt;/p&gt;</comment>
                            <comment id="14014414" author="ashutoshc" created="Sat, 31 May 2014 00:18:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14020291" author="ashutoshc" created="Fri, 6 Jun 2014 19:54:07 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Nick!&lt;/p&gt;</comment>
                            <comment id="14058185" author="ekoifman" created="Fri, 11 Jul 2014 01:08:27 +0000"  >&lt;p&gt;the current build system produces 2 jdbc jars:&lt;br/&gt;
hive-jdbc-0.14.0-SNAPSHOT-standalone.jar - the 51MB uber jar&lt;br/&gt;
hive-jdbc-0.14.0-SNAPSHOT.jar - the 135K jar&lt;/p&gt;

&lt;p&gt;The pom file hive-jdbc-0.14.0-SNAPSHOT.pom (which I will attach) does not mention the hive-jdbc-0.14.0-SNAPSHOT-standalone.jar at all. Standalone jar is not part of hive tar bundle either.  How is the end user supposed to access this standalone jar?&lt;/p&gt;</comment>
                            <comment id="14058557" author="njw45" created="Fri, 11 Jul 2014 08:45:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;Eugene Koifman&lt;/a&gt; Are you adding the driver as a dependency to a Maven project? If so, you should probably add the non-standalone version so you have more control over transitive dependency versioning. I&apos;d use the standalone jar as an end-user download, e.g. if you want to drop it into an existing app (e.g. &lt;a href=&quot;http://squirrel-sql.sourceforge.net&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://squirrel-sql.sourceforge.net&lt;/a&gt;, Sqoop). Or is your question - &quot;where is the standalone jar automatically published to?&quot;?&lt;/p&gt;</comment>
                            <comment id="14058873" author="ekoifman" created="Fri, 11 Jul 2014 15:07:44 +0000"  >&lt;p&gt;yes, &quot;where is it published to&quot;?  It seems like one would have to build Hive to get it.&lt;/p&gt;</comment>
                            <comment id="14211017" author="thejas" created="Thu, 13 Nov 2014 19:43:41 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12599586">HIVE-3285</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12726433">HIVE-7376</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12744243">HIVE-8270</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12699551">HIVE-6593</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12520670" name="ASF.LICENSE.NOT.GRANTED--HIVE-538.D2553.1.patch" size="5235" author="phabricator@reviews.facebook.net" created="Fri, 30 Mar 2012 21:09:23 +0000"/>
                            <attachment id="12523001" name="ASF.LICENSE.NOT.GRANTED--HIVE-538.D2553.2.patch" size="5233" author="phabricator@reviews.facebook.net" created="Tue, 17 Apr 2012 18:53:17 +0000"/>
                            <attachment id="12640663" name="HIVE-538.patch" size="5272" author="njw45" created="Thu, 17 Apr 2014 17:48:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Aug 2010 00:15:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08oif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48570</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-539] Support range bucketing of hive tables/partitions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-539</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive uses hash partitioner to distribute keys to reducers and thus creating hash bucketed tables/partitions. There are some cases where range partitioning will help in further query processing such as joins/filters.&lt;/p&gt;

&lt;p&gt;Terasort (&lt;a href=&quot;http://hadoop.apache.org/core/docs/current/api/org/apache/hadoop/examples/terasort/package-summary.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/core/docs/current/api/org/apache/hadoop/examples/terasort/package-summary.html&lt;/a&gt;) seems to have implemented a sampling based range partitioner and Hive can reuse this or implement something similar.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427063">HIVE-539</key>
            <summary>Support range bucketing of hive tables/partitions</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2009 20:53:26 +0000</created>
                <updated>Wed, 3 Jun 2009 20:53:26 +0000</updated>
                                            <version>0.4.0</version>
                                                    <component>Metastore</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42810</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ladr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122332</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-540] Restore the test.silent setting</title>
                <link>https://issues.apache.org/jira/browse/HIVE-540</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ExecDriver code was inadvertently changed in the test log output part. We should change it back.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427075">HIVE-540</key>
            <summary>Restore the test.silent setting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2009 23:54:39 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:42 +0000</updated>
                            <resolved>Thu, 4 Jun 2009 04:32:36 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12716112" author="namit" created="Thu, 4 Jun 2009 00:52:53 +0000"  >&lt;p&gt;+1 looks good&lt;br/&gt;
will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12716122" author="prasadc" created="Thu, 4 Jun 2009 01:28:33 +0000"  >&lt;p&gt;oh.. ok, i will stop my tests then &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12716152" author="namit" created="Thu, 4 Jun 2009 04:32:36 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409828" name="HIVE-540.1.patch" size="624" author="zshao" created="Wed, 3 Jun 2009 23:55:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Jun 2009 00:52:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73458</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ladz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-541] Implement UDFs: INSTR and LOCATE</title>
                <link>https://issues.apache.org/jira/browse/HIVE-541</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_instr&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_instr&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;These functions can be directly implemented with Text (instead of String). This will make the test of whether one string contains another string much faster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427095">HIVE-541</key>
            <summary>Implement UDFs: INSTR and LOCATE</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coderplay">Min Zhou</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jun 2009 08:26:20 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:44 +0000</updated>
                            <resolved>Thu, 16 Jul 2009 14:08:20 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12731361" author="coderplay" created="Wed, 15 Jul 2009 09:21:20 +0000"  >&lt;p&gt;patch&lt;/p&gt;
</comment>
                            <comment id="12731363" author="coderplay" created="Wed, 15 Jul 2009 09:25:03 +0000"  >&lt;p&gt;Text.find(String)  would not be faster ,  string argument will be encoded internally in Text, equivalent cost of Text.toString() which will decode a text. &lt;/p&gt;</comment>
                            <comment id="12731573" author="athusoo" created="Wed, 15 Jul 2009 17:29:33 +0000"  >&lt;p&gt;Assigning to Min as he has submitted the patch.&lt;/p&gt;</comment>
                            <comment id="12731582" author="yuntao" created="Wed, 15 Jul 2009 17:40:09 +0000"  >&lt;p&gt;The patch now uses &quot;String.indexOf(String)&quot; to find the position of a text inside of another text. What about writing our own function like &lt;/p&gt;

&lt;p&gt;int find(Text text, Text subtext);&lt;/p&gt;

&lt;p&gt;It does not requires converting Texts to Strings any more. Would it be even faster?&lt;/p&gt;
</comment>
                            <comment id="12731764" author="coderplay" created="Thu, 16 Jul 2009 01:35:12 +0000"  >&lt;p&gt;hmm, It&apos;s may be a good way. I will try it soon. &lt;/p&gt;</comment>
                            <comment id="12731795" author="coderplay" created="Thu, 16 Jul 2009 04:25:24 +0000"  >&lt;p&gt;Added a GenericUDFUtils.findText() where string encoding and decoding is avoided, faster execution will be gained.  &lt;/p&gt;</comment>
                            <comment id="12731812" author="namit" created="Thu, 16 Jul 2009 05:23:25 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;The changes looks good - will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12731858" author="coderplay" created="Thu, 16 Jul 2009 08:42:03 +0000"  >&lt;p&gt;all test cases passed on my side,  how&apos;s  yours?&lt;/p&gt;</comment>
                            <comment id="12731948" author="namit" created="Thu, 16 Jul 2009 14:08:20 +0000"  >&lt;p&gt;Committed. Thanks Min&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12429770">HIVE-615</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12413536" name="HIVE-541.1.patch" size="24905" author="coderplay" created="Wed, 15 Jul 2009 09:21:20 +0000"/>
                            <attachment id="12413625" name="HIVE-541.2.patch" size="26803" author="coderplay" created="Thu, 16 Jul 2009 04:25:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jul 2009 09:21:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73457</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lae7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-542] Faster String Like</title>
                <link>https://issues.apache.org/jira/browse/HIVE-542</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently Hive uses regular expression to do string like which is really really slow. We should implement &quot;LIKE&quot; natively using Text.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427096">HIVE-542</key>
            <summary>Faster String Like</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuntao">Yuntao Jia</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jun 2009 08:28:00 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:30 +0000</updated>
                            <resolved>Fri, 19 Jun 2009 00:50:52 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12719728" author="zshao" created="Mon, 15 Jun 2009 19:27:07 +0000"  >&lt;p&gt;Since there are so many advanced string matching algorithms (e.g. KMP and its variants), we should limit the scope here and maybe only optimize for the simplest case: &quot;LIKE&quot; that can be replaced by something like String.find().&lt;/p&gt;

&lt;p&gt;Basically, if the pattern is in the form of &quot;%xxx%&quot; where xxx does not contain any wildcards, we can do &quot;find&quot;.&lt;br/&gt;
If the pattern is in the form of &quot;%xxx&quot; or &quot;xxx%&quot;, we can also do very efficient computation.&lt;/p&gt;</comment>
                            <comment id="12721555" author="yuntao" created="Thu, 18 Jun 2009 23:33:15 +0000"  >&lt;p&gt;I tried to make the function checkSimplePattern() static. However, there are two member variables modified in that function, so I left it unchanged. If static is necessary,  I can decompose it to two functions. One function checks if the pattern is a simple pattern, the second function finds out the strings to match in that pattern. &lt;/p&gt;
</comment>
                            <comment id="12721576" author="yuntao" created="Fri, 19 Jun 2009 00:13:55 +0000"  >&lt;p&gt;I changed the function name from checkSimplePattern(...) to parseSimplePattern(...) and added some comments. Now it is easier to understand how it works. I also changed the &quot;if ... else if ... else ... &quot; statement to a switch statement to make the code in evaluate(...) more readable. &lt;/p&gt;</comment>
                            <comment id="12721591" author="zshao" created="Fri, 19 Jun 2009 00:50:52 +0000"  >&lt;p&gt;Committed. Thanks Yuntao!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411162" name="HIVE-542.1.patch" size="9377" author="yuntao" created="Thu, 18 Jun 2009 23:33:15 +0000"/>
                            <attachment id="12411168" name="HIVE-542.2.patch" size="9967" author="yuntao" created="Fri, 19 Jun 2009 00:13:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Jun 2009 23:33:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73456</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-542&quot; title=&quot;Faster String Like&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-542&quot;&gt;&lt;strike&gt;HIVE-542&lt;/strike&gt;&lt;/a&gt;. UDF: Faster String Like. (Yuntao Jia via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-543] provide option to run hive in local mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-543</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;this is a little bit more than just mapred.job.tracker=local&lt;/p&gt;

&lt;p&gt;when run in this mode - multiple jobs are an issue since writing to same tmp directories is an issue. the following options:&lt;/p&gt;

&lt;p&gt;hadoop.tmp.dir&lt;br/&gt;
mapred.local.dir&lt;/p&gt;

&lt;p&gt;need to be randomized (perhaps based on queryid). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12427161">HIVE-543</key>
            <summary>provide option to run hive in local mode</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsensarma">Joydeep Sen Sarma</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jun 2009 22:59:42 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:38 +0000</updated>
                            <resolved>Thu, 17 Jun 2010 18:39:32 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12716449" author="jsensarma" created="Thu, 4 Jun 2009 23:00:18 +0000"  >&lt;p&gt;currently the local mode prints a lot of goop that needs to be fixed.&lt;/p&gt;</comment>
                            <comment id="12877695" author="jsensarma" created="Fri, 11 Jun 2010 02:52:25 +0000"  >&lt;p&gt;a few fixes for better local mode execution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;provide alternate log4j file configuration for capturing local mode execution log (and default to hive log4j if none provided). this cleans up the goop on the cli but allows captuing execution time logs in a separate location if desired&lt;/li&gt;
	&lt;li&gt;bypass distributed cache for local mode submissions. saves on hdfs time&lt;/li&gt;
	&lt;li&gt;some cleanup on the set/get MapRedWork code path. it seems to have been messed up after the parallel execution changes&lt;/li&gt;
	&lt;li&gt;getMRScratchDir - now returns a local scratch dir when executing in local mode. so we don&apos;t hit hdfs unnecessarily in local mode.&lt;/li&gt;
	&lt;li&gt;fix to fileutils.makequalified because of the above. there was a subtle bug in this that was causing file paths to get messed up when using local paths for interemediate data&lt;/li&gt;
	&lt;li&gt;bypassed query plan serialization/deserialization except for test mode. from past experience - xml serialization/deserialization is pretty expensive and makes no sense to subject every query to it.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12877696" author="jsensarma" created="Fri, 11 Jun 2010 02:57:09 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mapred.job.tracker=local continues to be the way to setup hive local mode.&lt;/li&gt;
	&lt;li&gt;admins can provide appropriate mapred.local.dir and mapred.system.dir settings for hive clients (for local mode execution). they can do this either via hive configuration files or via hadoop client-side-only configuration files. for regular cluster jobs - these are controlled by hadoop server side configuration files.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;some of the cleanups regarding randomizing local/system directories etc. for concurrent queries were already in place (via hive-77).&lt;/p&gt;</comment>
                            <comment id="12877741" author="jsensarma" created="Fri, 11 Jun 2010 07:12:54 +0000"  >&lt;p&gt;log jobconf parameters from child jvm in local mode. emulates the fact that we can look at job.xml from TT/JT.&lt;/p&gt;</comment>
                            <comment id="12879002" author="namit" created="Tue, 15 Jun 2010 15:30:18 +0000"  >&lt;p&gt;Some minor comments:&lt;/p&gt;

&lt;p&gt;1. Do you want to add a parameter for specifying the local directory ?&lt;br/&gt;
2. Not sure about the removal of synchronization around gWorkMap - let us go over it offline.&lt;br/&gt;
3. Need to see in more detail - why did the output change for only 2 join tests&lt;/p&gt;</comment>
                            <comment id="12879039" author="jsensarma" created="Tue, 15 Jun 2010 17:37:24 +0000"  >&lt;p&gt;#2 - this piece of code got quite messed up because of the changes because of parallel execution (hive-549). the initial synchronized block protected access to a single global variable. this was replaced by a synchronized map (gWorkMap) - but the surrounding synchronized block was never taken out (it&apos;s now unnecessary because of the synchronized map). also the (gWork==null) check inside the synchronized section was redundant (it made sense when there was a singleton pattern - but with the synchronized map doesn&apos;t make sense).&lt;/p&gt;

&lt;p&gt;#1- don&apos;t understand this. there&apos;s already a hadoop parameter (mapred.local.dir) for specifying local scratch directory. i didn&apos;t add any new parameters as far as hive scratch directories are concerned .. is the concern about automatically selecting local intermediate directory for local mode execution? - that should be ok.&lt;/p&gt;

&lt;p&gt;#3 - mystery to me as well. the ordering of the output lines has changed (not the content). the diff script is not able to ignore these changes.&lt;/p&gt;</comment>
                            <comment id="12879882" author="namit" created="Thu, 17 Jun 2010 18:39:32 +0000"  >&lt;p&gt;Committed. Thanks Joy&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12409528">HIVE-88</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12409528">HIVE-88</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446846" name="hive-534.patch.2" size="71537" author="jsensarma" created="Fri, 11 Jun 2010 07:12:54 +0000"/>
                            <attachment id="12446834" name="hive-543.patch.1" size="69069" author="jsensarma" created="Fri, 11 Jun 2010 02:52:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Jun 2010 15:30:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73455</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122336</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-544] predicate pushdown is not handling exprFieldNodeDesc correctly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-544</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;complex column fields are not handled correctly resulting in ClassCastException.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427168">HIVE-544</key>
            <summary>predicate pushdown is not handling exprFieldNodeDesc correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jun 2009 01:56:35 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:31 +0000</updated>
                            <resolved>Fri, 5 Jun 2009 03:39:22 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12716484" author="zshao" created="Fri, 5 Jun 2009 03:13:31 +0000"  >&lt;p&gt;+1. Will test and commit.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12426321">HIVE-516</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12409921" name="hive-544.patch" size="7679" author="prasadc" created="Fri, 5 Jun 2009 01:57:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Jun 2009 03:13:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-544&quot; title=&quot;predicate pushdown is not handling exprFieldNodeDesc correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-544&quot;&gt;&lt;strike&gt;HIVE-544&lt;/strike&gt;&lt;/a&gt;. Fix predicate push for exprFieldNodeDesc. (Prasad Chakka via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-545] Use ArrayList instead of Vector in single-threaded Hive code</title>
                <link>https://issues.apache.org/jira/browse/HIVE-545</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Most of the Hive code is single-threaded, but sometimes we are using Vector instead of the more efficient ArrayList.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html&lt;/a&gt;&lt;br/&gt;
&quot;This class (ArrayList) is roughly equivalent to Vector, except that it is unsynchronized.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427265">HIVE-545</key>
            <summary>Use ArrayList instead of Vector in single-threaded Hive code</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Jun 2009 00:56:15 +0000</created>
                <updated>Sat, 25 Dec 2010 15:55:16 +0000</updated>
                            <resolved>Sat, 25 Dec 2010 15:55:16 +0000</resolved>
                                    <version>0.4.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12747592" author="appodictic" created="Tue, 25 Aug 2009 19:28:38 +0000"  >&lt;p&gt;Once upon a time, a major factor in changing jobs was over an argument over Vector vs ArrayList &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Should the declaration be of type List while instances be ArrayList? &lt;/p&gt;

&lt;p&gt;Do you want help ? I think I can tackle this one with search/replace? then re-run tests?&lt;/p&gt;</comment>
                            <comment id="12762496" author="katrakc" created="Tue, 6 Oct 2009 03:59:50 +0000"  >&lt;p&gt;Patch attached. Tests still running, but looks good so far.&lt;br/&gt;
Sorry about the size of this, what started off as a quick fix sprawled into an gargantuan search and replace of epic proportions:&lt;/p&gt;

&lt;p&gt;-Replaced most instances of Vector with ArrayList&lt;br/&gt;
-Replaced most ArrayList variable declarations with List (ArrayList a = new ArrayList -&amp;gt; List a = new ArrayList)&lt;br/&gt;
-Replaced most ArrayList method argument declarations with List ( doWork(ArrayList a) -&amp;gt; doWork(List a) )&lt;br/&gt;
-Replaced most ArrayList template type declarations with List (Map&amp;lt;ArrayList&amp;lt;String&amp;gt;&amp;gt; -&amp;gt; Map&amp;lt;List&amp;lt;String&amp;gt;&amp;gt;)&lt;/p&gt;</comment>
                            <comment id="12975065" author="appodictic" created="Sat, 25 Dec 2010 15:54:27 +0000"  >

&lt;p&gt;./RELEASE_NOTES.txt:    * &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1112&quot; title=&quot;Replace instances of StringBuffer/Vector with StringBuilder/ArrayList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1112&quot;&gt;&lt;del&gt;HIVE-1112&lt;/del&gt;&lt;/a&gt; - Replace instances of StringBuffer/Vector with StringBuilder/ArrayList&lt;/p&gt;</comment>
                            <comment id="12975066" author="appodictic" created="Sat, 25 Dec 2010 15:55:16 +0000"  >&lt;p&gt;Please remember to click &apos;submit patch&apos; when you are ready for review. Otherwise no one will be alerted to the completion status of your patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12446855">HIVE-1112</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12421381" name="HIVE-545.patch" size="109275" author="katrakc" created="Tue, 6 Oct 2009 03:58:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Aug 2009 19:28:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73453</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122338</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-546] Script operator does not kill any spawned sub tasks in case of failures</title>
                <link>https://issues.apache.org/jira/browse/HIVE-546</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The script operator spawns a script in a separate process. However, this process may not get cleaned up if the top level hadoop job is killed. We need to add child process cleanup code to the jvm shutdown hook in Hive.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427266">HIVE-546</key>
            <summary>Script operator does not kill any spawned sub tasks in case of failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="athusoo">Ashish Thusoo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Jun 2009 01:28:41 +0000</created>
                <updated>Sat, 6 Jun 2009 04:44:07 +0000</updated>
                                            <version>0.3.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12716826" author="jsensarma" created="Sat, 6 Jun 2009 04:44:07 +0000"  >&lt;p&gt;i think the right way to do this is to have the jvm for the task be a process leader so anything it spawns is killed when the task is gone. there may already be some progress on recent hadoop versions on this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 Jun 2009 04:44:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42809</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lafb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122339</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-547] NullPointerException in ExecDriver</title>
                <link>https://issues.apache.org/jira/browse/HIVE-547</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We saw a job failed with the following message in hive.log.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2009-06-06 22:50:55,275 ERROR exec.ExecDriver (SessionState.java:printError(279)) - Ended Job = job_200905211352_145363 with exception &apos;java.lang.NullPointerException(null)&apos;
java.lang.NullPointerException
        at org.apache.hadoop.hive.ql.exec.ExecDriver.jobProgress(ExecDriver.java:193)
        at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:395)
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:307)
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:213)
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:176)
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:216)
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:273)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:166)
        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The corresponding code is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; RunningJob jobProgress(JobClient jc, RunningJob rj) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; lastReport = &quot;&quot;;
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!rj.isComplete()) {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
      }
      rj = jc.getJob(rj.getJobID());
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; report = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
193&#65306;  report = &lt;span class=&quot;code-quote&quot;&gt;&quot; map = &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(rj.mapProgress() * 100) + &lt;span class=&quot;code-quote&quot;&gt;&quot;%,  reduce =&quot;&lt;/span&gt;
          + &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(rj.reduceProgress() * 100) + &lt;span class=&quot;code-quote&quot;&gt;&quot;%&quot;&lt;/span&gt;;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12427289">HIVE-547</key>
            <summary>NullPointerException in ExecDriver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jun 2009 06:01:42 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:48 +0000</updated>
                            <resolved>Fri, 12 Jun 2009 00:18:28 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12717008" author="zshao" created="Sun, 7 Jun 2009 06:04:27 +0000"  >&lt;p&gt;It&apos;s possible that the job finished and then get removed from the JobTracker within 1 second. But I think our cluster is configured to avoid that to happen.&lt;/p&gt;
</comment>
                            <comment id="12717009" author="zshao" created="Sun, 7 Jun 2009 06:13:50 +0000"  >&lt;p&gt;The JobTracker log shows the job is completed about 8 minutes earlier, and retired 3 minutes earlier.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2009-06-06 22:42:14,602 INFO org.apache.hadoop.mapred.JobInProgress: Job job_200905211352_145363 has completed successfully.
...
2009-06-06 22:47:05,429 INFO org.apache.hadoop.mapred.JobTracker: Retired job with id: &apos;job_200905211352_145363&apos; of user: &apos;root&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12717010" author="zshao" created="Sun, 7 Jun 2009 06:26:06 +0000"  >&lt;p&gt;Unfortunately Hive&apos;s progress information (the &quot;report&quot; String from the code above) does not include timestamps, so there is no way to know what happened during those 2 minutes.&lt;/p&gt;

&lt;p&gt;We should include the timestamp into the &quot;report&quot; String.&lt;/p&gt;</comment>
                            <comment id="12717011" author="zshao" created="Sun, 7 Jun 2009 07:00:33 +0000"  >&lt;p&gt;This patch adds the time stamp to the log in the following format:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2009-06-06 11:56:13,872 map = 100%,  reduce =100%
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12717329" author="namit" created="Mon, 8 Jun 2009 17:08:01 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12717353" author="namit" created="Mon, 8 Jun 2009 18:22:30 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                            <comment id="12717941" author="zshao" created="Wed, 10 Jun 2009 06:35:25 +0000"  >&lt;p&gt;This patch makes sure we don&apos;t output one line per second. The behavior is that we will output at least one line per minute if no status change is detected.&lt;/p&gt;</comment>
                            <comment id="12717942" author="zshao" created="Wed, 10 Jun 2009 06:36:03 +0000"  >&lt;p&gt;The current behavior is showing one log line per second. This may not be good in case the job runs a long time.&lt;/p&gt;</comment>
                            <comment id="12718652" author="namit" created="Thu, 11 Jun 2009 22:06:00 +0000"  >&lt;p&gt;Committed. Thanks Zheng &lt;/p&gt;</comment>
                            <comment id="12718678" author="namit" created="Fri, 12 Jun 2009 00:18:28 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410078" name="HIVE-547.1.patch" size="1239" author="zshao" created="Sun, 7 Jun 2009 07:00:33 +0000"/>
                            <attachment id="12410277" name="HIVE-547.2.patch" size="2148" author="zshao" created="Wed, 10 Jun 2009 06:35:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Jun 2009 17:08:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lafj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122340</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-548] Code cleanup: refactor the 4 methods like SemanticAnalyzer.genGroupByPlanGroupByOperator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-548</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We have 4 methods to generate the GroupByOperators in the SemanticAnalyzer:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  SemanticAnalyzer.genGroupByPlanGroupByOperator
  SemanticAnalyzer.genGroupByPlanMapGroupByOperator
  SemanticAnalyzer.genGroupByPlanGroupByOperator1
  SemanticAnalyzer.genGroupByPlanGroupByOperator2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While they are all different, a substantial portion of them are the same. We should factor out all the common functionality into shared functions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427290">HIVE-548</key>
            <summary>Code cleanup: refactor the 4 methods like SemanticAnalyzer.genGroupByPlanGroupByOperator</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jun 2009 08:18:28 +0000</created>
                <updated>Fri, 24 Feb 2012 21:09:35 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13134688" author="ashutoshc" created="Tue, 25 Oct 2011 01:41:02 +0000"  >&lt;p&gt;Refactoring patch aimed at avoiding code duplication.&lt;/p&gt;</comment>
                            <comment id="13138549" author="ashutoshc" created="Fri, 28 Oct 2011 17:17:53 +0000"  >&lt;p&gt;Is there any interest in this work? I am asking because such refactoring patches go stale pretty quickly and its hard to maintain them. If there is an interest, let me know and I will come up with another patch. If there is no interest feel free to resolve this as &quot;Won&apos;t fix&quot;&lt;/p&gt;</comment>
                            <comment id="13215910" author="ashutoshc" created="Fri, 24 Feb 2012 21:09:35 +0000"  >&lt;p&gt;I wont have any time in near future for this. Feel free to take it up.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12430795">HIVE-651</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12500590" name="hive-548.patch" size="16771" author="ashutoshc" created="Tue, 25 Oct 2011 01:41:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Oct 2011 01:41:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-549] Parallel Execution Mechanism</title>
                <link>https://issues.apache.org/jira/browse/HIVE-549</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In a massively parallel database system, it would be awesome to also parallelize some of the mapreduce phases that our data needs to go through.&lt;/p&gt;

&lt;p&gt;One example that just occurred to me is UNION ALL: when you union two SELECT statements, effectively you could run those statements in parallel. There&apos;s no situation (that I can think of, but I don&apos;t have a formal proof) in which the left statement would rely on the right statement, or vice versa. So, they could be run at the same time...and perhaps they should be. Or, perhaps there should be a way to make this happen...PARALLEL UNION ALL? PUNION ALL?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427333">HIVE-549</key>
            <summary>Parallel Execution Mechanism</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmishra">Chaitanya Mishra</assignee>
                                    <reporter username="akramer">Adam Kramer</reporter>
                        <labels>
                            <label>hive-appu</label>
                    </labels>
                <created>Mon, 8 Jun 2009 07:45:22 +0000</created>
                <updated>Fri, 6 Dec 2013 16:52:09 +0000</updated>
                            <resolved>Fri, 4 Dec 2009 02:22:15 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="12717189" author="he yongqiang" created="Mon, 8 Jun 2009 08:00:56 +0000"  >&lt;p&gt;Will hive consider replace its queue exection with a parall execution?&lt;/p&gt;</comment>
                            <comment id="12717327" author="namit" created="Mon, 8 Jun 2009 17:06:51 +0000"  >&lt;p&gt;This is not specific to UNION ALL - Hive maintains the complete task dependency tree and can execute tasks in parallel.&lt;br/&gt;
It will help latency substantially. Should not help the overall cluster usage, but will be specially useful for benchmarks.&lt;/p&gt;

&lt;p&gt;Cant think of any reason of any parallelizing. I dont see any reason to change the plan - while walking the task tree,&lt;br/&gt;
execute all tasks whose dependencies have been executed.&lt;/p&gt;
</comment>
                            <comment id="12717338" author="he yongqiang" created="Mon, 8 Jun 2009 17:47:26 +0000"  >&lt;p&gt;Since the generated tasks plan/task stages is a DAG, the user can get results more quickly if we submitting tasks in parallel (two jobs can be submmitted in parallel if they/their parents does not rely on each other)?  We can let hadoop scheduler how to run the jobs for better cluster usage etc.&lt;/p&gt;</comment>
                            <comment id="12717354" author="namit" created="Mon, 8 Jun 2009 18:24:20 +0000"  >&lt;p&gt;I agree completely - What I was trying to get at is&lt;br/&gt;
1. It is not specific to union all.&lt;br/&gt;
2. It does not need a change in compiler - just the scheduler change should be good enough.&lt;/p&gt;</comment>
                            <comment id="12718074" author="he yongqiang" created="Wed, 10 Jun 2009 13:24:11 +0000"  >&lt;p&gt;Shoud we edit this issue to &quot;parallel execution mechanism&quot;? or we can open a new jira and link this to that.&lt;/p&gt;</comment>
                            <comment id="12718564" author="namit" created="Thu, 11 Jun 2009 17:18:02 +0000"  >&lt;p&gt;done&lt;/p&gt;</comment>
                            <comment id="12721385" author="jarodwen" created="Thu, 18 Jun 2009 18:03:27 +0000"  >&lt;p&gt;Intuitively in the query DAG the sub-branches of a given node can be paralleled. Since the DAG can be generated in several ways, there must be some of them which may be much more efficient than others considering the possible parallel tasks, right? So some changes in the optimization when compiling will be cool. Anyway, I agree with Namit about the first step on the scheduler. &lt;/p&gt;</comment>
                            <comment id="12769413" author="cmishra" created="Fri, 23 Oct 2009 20:28:42 +0000"  >&lt;p&gt;Zheng and I had a email-discussion on this. To launch multiple tasks from the same driver, we&apos;ll need to launch each task as a separate thread.&lt;/p&gt;

&lt;p&gt;The simplest solution is to extend Task to implement the Runnable Interface, but this might affect other components... Not completely sure about this since an element that implements runnable can still be called in a sequential fashion.&lt;/p&gt;

&lt;p&gt;Zheng instead proposes adding a new class TaskRunner, with functions:&lt;/p&gt;

&lt;p&gt;run(): asynchronous call&lt;br/&gt;
start(),&lt;br/&gt;
wait(long timeoutMilli),&lt;br/&gt;
and stop()&lt;/p&gt;

&lt;p&gt;Most likely, if we get taskrunner to extend Thread, we get these functions; if not we can implement runnable.&lt;/p&gt;

&lt;p&gt;So, do we get Task to implement runnable, or add a layer of indirection as TaskRunner? &lt;/p&gt;</comment>
                            <comment id="12769423" author="cmishra" created="Fri, 23 Oct 2009 20:38:47 +0000"  >&lt;p&gt;Just to clarify the previous comment: TaskRunner will call Task, which then proceeds as before.&lt;/p&gt;

&lt;p&gt;The execute() function in ql/Driver.java will now wait for tasks to finish, and launch child tasks (through a taskrunner) as soon as they become runnable.&lt;/p&gt;</comment>
                            <comment id="12769433" author="he yongqiang" created="Fri, 23 Oct 2009 20:48:28 +0000"  >&lt;p&gt;Agree on adding a new TaskRunner which extends Thread.&lt;br/&gt;
I think we can define several states for each TaskRunner. &lt;br/&gt;
An simple example can be:&lt;br/&gt;
1. iterate the task queue and for each task lunch a new TaskRunner for it&lt;br/&gt;
2. For a TaskRunner serving for a special task, first check the states of all of his parents&lt;br/&gt;
   2.1 If any of his parents got dead(Failed), Fail itself&lt;br/&gt;
   2.2 if all parents are successful, lunch itself and mark itself as running&lt;br/&gt;
   2.3 if any of its parents are not running or are not finished/failed, mark itself as pending. And also add itself in a waiting queue of its not finished parent.&lt;br/&gt;
3. If a task successfully finished or failed, notify all children in its waiting queue of whethe it successed or failed. &lt;br/&gt;
Obviously, this simple algorithm has one problem: each task got one dedicated thread allocated for it. It will be better if we can compress thread numbers.&lt;/p&gt;</comment>
                            <comment id="12769441" author="he yongqiang" created="Fri, 23 Oct 2009 20:54:02 +0000"  >&lt;p&gt;In 3) besides notifying its children, the task runner also needs to mark itself of its state.&lt;/p&gt;</comment>
                            <comment id="12769449" author="cmishra" created="Fri, 23 Oct 2009 21:05:33 +0000"  >&lt;p&gt;Thanks for your comments He. &lt;/p&gt;

&lt;p&gt;Just to clarify: The way I&apos;m thinking about it is: a TaskRunner will be launched by the execute function in ql/driver.java only when it satisfies the isRunnable() check which is currently implemented. Therefore, the workflow will be like.&lt;/p&gt;

&lt;p&gt;Task&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Scan through list of tasks. Launch taskrunners for each task that satisfies the isRunnable call.&lt;/li&gt;
	&lt;li&gt;Wait for any task to finish or fail.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If task finishes correctly&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Check its child tasks if isRunnable() is satisfied. If so, launch TaskRunners for the taskrunners.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If task fails&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Kill all existing taskrunners, making sure to cleanup.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TaskRunner (extends thread)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Takes a task, executes it in a separate thread, and returns either 0 or 1, depending on success or failure.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The difference from your design (as I understand it) is that a TaskRunner will be launched only when a task is runnable. All the notifications 2.1, 2.2 and 2.3 aren&apos;t necessary then. The existing logic in the execute() function should handle this.  &lt;/p&gt;</comment>
                            <comment id="12769451" author="cmishra" created="Fri, 23 Oct 2009 21:08:13 +0000"  >&lt;p&gt;Typo in previous outline:&lt;/p&gt;

&lt;p&gt;If task finishes correctly&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Check its child tasks if isRunnable() is satisfied. If so, launch a TaskRunner for each child.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12769460" author="he yongqiang" created="Fri, 23 Oct 2009 21:22:39 +0000"  >&lt;p&gt;Thanks for the clarifying. Your logic looks good. I did not know there is already one isRunnable interface, and the reason that i am adding the notification stuff is to avoid the lots of check work needs to do, but obviously it does not work well.&lt;/p&gt;</comment>
                            <comment id="12770651" author="cmishra" created="Tue, 27 Oct 2009 21:30:55 +0000"  >&lt;p&gt;Attaching a patch for this. I hope its the right format.&lt;/p&gt;

&lt;p&gt;Summary of changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Created TaskRunner.java, which launches new tasks as threads.&lt;/li&gt;
	&lt;li&gt;Created TaskResult.java, which encapsulates the return value of the thread.&lt;/li&gt;
	&lt;li&gt;Modified execute() function of ql/Driver.java to launch tasks as soon as they are runnable.&lt;/li&gt;
	&lt;li&gt;Also, modified the Utilities.gWork variable to be ThreadLocal, so that the state of multiple threads is kept independently.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The end result of this patch is that a task (which is a part of a query plan is launched as soon as it is runnable, instead of waiting in a queue.&lt;/p&gt;

&lt;p&gt;Comments?&lt;/p&gt;</comment>
                            <comment id="12770805" author="zshao" created="Wed, 28 Oct 2009 06:19:37 +0000"  >&lt;p&gt;Hive-549.patch: Overall the structure of the changes look good to me.&lt;/p&gt;

&lt;p&gt;Utilities.java:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;gWorkContainer: this variable needs to be heavily commented - why do we need it, why it&apos;s ThreadLocal, any alternatives (and optionally, why this is better than alternatives).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Where do we serialize data to &quot;HIVE_PLAN&quot;? Is that thread-safe?&lt;br/&gt;
           InputStream in = new FileInputStream(&quot;HIVE_PLAN&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;HiveInputFormat.java:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Unnecessary white-space changes only.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Driver.java:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It&apos;s a good idea to assign the job numbers statically - if the jobNo of the same job can be different in different runs, it will be harder to debug.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Shall we immediately stop all other running jobs if one of them have failed?&lt;br/&gt;
+          console.printError(errorMessage);&lt;br/&gt;
+          taskCleanup(runnable);&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I guess you mean &quot;if the child has already started, or is NOT runnable&quot;&lt;br/&gt;
+          // Check if the child has already started, or is runnable&lt;br/&gt;
+          if(checkLaunch(child)) { &lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;There are 2 places where we do &quot;curJobNo++&quot; in this function:&lt;br/&gt;
+  public int launchTask(Task&amp;lt;? extends Serializable&amp;gt; tsk, String queryId,&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Do we need to get a copy of &quot;conf&quot; object since we are modifying it in launchTask?&lt;br/&gt;
+    tsk.initialize(conf, plan);&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Can we add an option for the user to choose &quot;sequential&quot; or &quot;parallel&quot; execution?  The change could be simple - we just need to check the option in launchTask to decide whether we should call TaskRunner.start() or TaskRunner.run(). Please add the new option to HiveConf class, and conf/hive-default.xml.&lt;/p&gt;
</comment>
                            <comment id="12772152" author="cmishra" created="Fri, 30 Oct 2009 22:57:57 +0000"  >&lt;p&gt;My session timed out in my previous try, so I&apos;m uploading the patch now, and will add comments next.&lt;/p&gt;</comment>
                            <comment id="12772155" author="cmishra" created="Fri, 30 Oct 2009 23:04:56 +0000"  >&lt;p&gt;New patch, reflecting Zhengs comments, and an offline discussion we had.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;gWorkContainer stays as it is, a ThreadLocal variable. A better solution would probably be creating a map from job to mapredWork, but we are deferring it for now.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;job-ids now correspond to Task-ids. Therefore, they will remain same across runs.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The Task-id is displayed in the progress information, since multiple jobs corresponding to the same query might be running at the same time.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;No copy of &quot;conf&quot; is needed since it is used only in the initialize function, to set the jobconf and mapredWork. Only one task is being initialized at a time.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Options: Added a new confvar hive.optimize.par with default value true. If set to false, tasks are launched sequentially in the same thread.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Cleanup/Failure: The taskCleanup function now simply calls System.exit(9). All tasks executing within the process are killed. The map-reduce processes are killed through the runningJonKillURIs hashmap, which is set up as a Shutdownhook in ExecDriver.java. Access to this hashmap is now controlled through a synchronized interface, since multiple threads might be launching at the same time.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12772162" author="cmishra" created="Fri, 30 Oct 2009 23:12:47 +0000"  >&lt;p&gt;For some reason Apache saw the previous patch as a binary file.&lt;/p&gt;</comment>
                            <comment id="12772301" author="cmishra" created="Sun, 1 Nov 2009 04:14:11 +0000"  >&lt;p&gt;There was a race condition in the previous patch of the following form.&lt;/p&gt;

&lt;p&gt;Task 3 is a child of Tasks 1 and 2.&lt;br/&gt;
1 and 2 finish.&lt;br/&gt;
Main thread checks child of 1 (Task 3) if it has started and is runnable. Calls initalize for task 3. Launches new thread for task 3.&lt;br/&gt;
Main thread checks child of 2 (also task 3) if it has started and is runnable. By this point the separate thread for 3 has not actually done any execution. Hence started evaluates to false, and main therefore launches a new instance of Task 3.&lt;/p&gt;

&lt;p&gt;Problem: There are 2 instances of Task 3.&lt;/p&gt;

&lt;p&gt;Solution: Added a new variable initialized to task.java. initialized is set to true as soon as the function initialize() is called. Similarly, launch a task only if it isRunnable() and is not initialized. Since only the main thread invokes tsk.intiialize() and checkLaunch(), there is no race condition here.&lt;/p&gt;

&lt;p&gt;Uploading this patch, and deleting previous two patches.&lt;/p&gt;</comment>
                            <comment id="12772385" author="zshao" created="Sun, 1 Nov 2009 23:01:29 +0000"  >&lt;p&gt;THIVE-549-v3.patch:&lt;br/&gt;
Can you add javadoc comments to all public methods (except getters and setters)? I know we were not following that all the time historically, but we want to enforce that on all new patches.&lt;/p&gt;

&lt;p&gt;It seems to me that &quot;shouldLaunch()&quot; is a better name than &quot;checkLaunch()&quot;, but it&apos;s up to you whether you would like to change it.&lt;/p&gt;

&lt;p&gt;Can we change the name of &quot;hive.optimize.par&quot; to &quot;hive.execution.parallel&quot;?&lt;br/&gt;
&quot;optimize&quot; was meant for plan optimization. This is an execution time option. Also &quot;par&quot; does not reflect to &quot;parallel&quot; in my mind.&lt;/p&gt;</comment>
                            <comment id="12773116" author="zshao" created="Tue, 3 Nov 2009 18:59:18 +0000"  >&lt;p&gt;Please use &quot;hive.exec.parallel&quot; instead, to make it consistent with other &quot;hive.exec&quot; parameters.&lt;/p&gt;</comment>
                            <comment id="12773138" author="namit" created="Tue, 3 Nov 2009 19:27:41 +0000"  >&lt;p&gt;Are we changing the job name to taskId() instead of 3/5 ?&lt;br/&gt;
Also, are we not printing the total number of map-reduce jobs ?&lt;/p&gt;

&lt;p&gt;The above naming convention makes it easier for debugging sometimes.&lt;br/&gt;
So, it might be good to maintain that.&lt;/p&gt;

</comment>
                            <comment id="12773142" author="zshao" created="Tue, 3 Nov 2009 19:34:11 +0000"  >&lt;p&gt;Agree. We should have &quot;taskId()/totalTasks&quot; in the job name.&lt;/p&gt;</comment>
                            <comment id="12773144" author="cmishra" created="Tue, 3 Nov 2009 19:37:43 +0000"  >&lt;p&gt;We are still printing total number of MR jobs.&lt;br/&gt;
However we are changing job names to taskid (i.e Stage-x) format instead of 3/5&lt;/p&gt;

&lt;p&gt;I can switch back to 3/5 kind of format which depended on the curjobno variable , but the issue there is that the order in which tasks are launched might change over runs, and therefore the job name can change. &lt;/p&gt;

&lt;p&gt;Let me know which one sounds better.&lt;/p&gt;</comment>
                            <comment id="12773147" author="cmishra" created="Tue, 3 Nov 2009 19:41:29 +0000"  >&lt;p&gt;Just saw Zhengs comment.&lt;/p&gt;

&lt;p&gt;The problem with TaskID / total tasks is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We might first launch task 1, then task 4, and then task 2. It&apos;ll then look like 1/7, 4/7 and 2/7&lt;/li&gt;
	&lt;li&gt;Also, we currently aren&apos;t displaying non-MR tasks in the log. So total tasks could be 7, but we display information about only the 3 map-reduce ones.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12773160" author="zshao" created="Tue, 3 Nov 2009 20:09:38 +0000"  >&lt;p&gt;We have a task called ConditionalTask which may or may not submit a mapreduce task at runtime. It&apos;s true that map-reduce jobs usually takes longer time, but given ConditionalTask it seems a better idea to treat all tasks the same when reporting progress.&lt;/p&gt;

&lt;p&gt;I agree &quot;1/7, 4/7 and 2/7&quot; on the job tracker may seems bad, but user should see on the command line all 7 tasks starting and finishing.&lt;br/&gt;
We can print out task starting/finishing information on the command line for all tasks.&lt;br/&gt;
For example, every time a task starts/finishes, we can print out &quot;Stage-3 started.  Total: 7, Pending: 3, Running: 2, Finished: 2&quot;, or &quot;Stage-3 finished.  Total: 7, Pending: 3, Running: 2, Finished: 2&quot;&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;By the way, I am OK with finishing this issue first, and then do better progress information in a separate transaction if you want.&lt;/p&gt;</comment>
                            <comment id="12773231" author="namit" created="Tue, 3 Nov 2009 21:59:24 +0000"  >&lt;p&gt;I agree - this can be done in a follow-up.&lt;br/&gt;
Do you want to enable this feature by default, and disable it in specific hive-site.xml if need be ?&lt;/p&gt;</comment>
                            <comment id="12773294" author="nzhang" created="Tue, 3 Nov 2009 23:53:37 +0000"  >&lt;p&gt;Just curious, how do we handle exceptions if tasks are executed in parallel. I am asking this because we probably need to setup a global configuration at any point of the query execution (e.g., change the replication factor of a table in the map-side join), and change it back when the whole query is finished or an exception is caught at the end. &lt;/p&gt;

&lt;p&gt;It seems to me that the parallel execution paradigm can be applied only if there is a child task waiting on all the parallel tasks at any point. The child is responsible for rolling back if any exception is caught. An example I am thinking that cannot use the parallel paradigm is the multi-insert case, where each insert is a branch and they don&apos;t &quot;meet&quot; at the bottom of the plan. &lt;/p&gt;</comment>
                            <comment id="12773312" author="cmishra" created="Wed, 4 Nov 2009 00:41:25 +0000"  >&lt;p&gt;Thanks for the comments.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Renamed variable to hive.exec.parallel&lt;/li&gt;
	&lt;li&gt;Renamed function to shouldLaunch&lt;/li&gt;
	&lt;li&gt;Added javadocs for a few functions&lt;/li&gt;
	&lt;li&gt;The task information remains of the form (Stage-x) as before.&lt;/li&gt;
	&lt;li&gt;However, for each new Map-reduce job launched, I print a sentence of the form &quot;Launching job 3 out of 5&quot;. Note that this is only for map-reduce jobs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I don&apos;t have a good answer for the exception question, since I don&apos;t quite know what Hive did before.&lt;/p&gt;

&lt;p&gt;Comments?&lt;/p&gt;</comment>
                            <comment id="12775997" author="cmishra" created="Tue, 10 Nov 2009 18:37:54 +0000"  >&lt;p&gt;No comments for about a week? If this looks fine, do I formally submit this as a patch?&lt;/p&gt;</comment>
                            <comment id="12776006" author="zshao" created="Tue, 10 Nov 2009 18:54:57 +0000"  >&lt;p&gt;Hi Chaitanya, the code looks good to me except a small nitch: can you change the logic of &quot;shouldLaunch()&quot;? Currently it means &quot;shouldNotLaunch()&quot;.&lt;/p&gt;

&lt;p&gt;After you have done that, please test again with &quot;ant test -logfile log.txt&quot; and make sure all tests are passing.&lt;/p&gt;

&lt;p&gt;Then we can commit it.&lt;/p&gt;
</comment>
                            <comment id="12779259" author="namit" created="Wed, 18 Nov 2009 02:05:15 +0000"  >&lt;p&gt;Sure, I will commit it once you make these changes&lt;/p&gt;</comment>
                            <comment id="12781610" author="cmishra" created="Mon, 23 Nov 2009 20:35:25 +0000"  >&lt;p&gt;New patch: significantly different from the previous one. Doesn&apos;t pass all unit tests, we might need to rewrite some. Will elaborate on this theme in the next comments.&lt;/p&gt;</comment>
                            <comment id="12781643" author="cmishra" created="Mon, 23 Nov 2009 21:49:58 +0000"  >&lt;p&gt;This patch differs from the prev patch in the following ways:&lt;/p&gt;

&lt;p&gt;(a) mapredWork is not stored as a threadlocal variable. Instead we maintain a map from jobname -&amp;gt; mapredwork. This was essential since Hive can launch tasks in localjobrunner mode. This is pretty much like Zheng&apos;s original suggestion.&lt;/p&gt;

&lt;p&gt;(b) There is additional code to ensure that a job always has a randomly generated name, to ensure that the code doesn&apos;t break.&lt;/p&gt;

&lt;p&gt;(c) There is also code to ensure that the distributed cache has a unique handle for plan information. Originally it was always stored as HIVE_PLAN&lt;/p&gt;

&lt;p&gt;(d) Sessionstate was a threadlocal variable. Therefore new code to initlialize sessionstate for new threads has been put in.&lt;/p&gt;

&lt;p&gt;(e) Only map-reduce tasks are launched using new threads. Non map-reduce tasks are launched within the same driver thread. This is to ensure that simple tasks like describe function don&apos;t pay the cost of threadlaunching + sleeping and polling for threads.&lt;/p&gt;

&lt;p&gt;(f) At most maxthreads=8 threads are launched.&lt;/p&gt;</comment>
                            <comment id="12781645" author="cmishra" created="Mon, 23 Nov 2009 21:55:16 +0000"  >&lt;p&gt;The patch fails the following unit tests&lt;/p&gt;

&lt;p&gt;TestCliDriver: input41.q, input42.q and input_part9.q&lt;/p&gt;

&lt;p&gt;For input41.q the query involves a union-all, and the failure is because the threads can execute either part of the union-all data as they see fit.&lt;/p&gt;

&lt;p&gt;Other similar queries are: input25.q, input26.q, nullgroup5.q ,semijoin.q and union_script.q. We need to rewrite these test cases.&lt;/p&gt;

&lt;p&gt;For input42.q, and input_part9.q the problem is that the base table has 2 partitions, and Hive can technically read the partitions in any order it sees fit. &lt;/p&gt;

&lt;p&gt;In fact I checked out the latest version of Hive, and ran the unit test for input_part9.q, and it failed, because the data was generated in the opposite order. I think these two tests should be deprecated.&lt;/p&gt;</comment>
                            <comment id="12781646" author="namit" created="Mon, 23 Nov 2009 22:00:19 +0000"  >&lt;p&gt;I agree there may be some non-deterministic tests, but we should make them deterministic instead of deleting them.&lt;br/&gt;
I will go over the tests above and get back to you&lt;/p&gt;</comment>
                            <comment id="12781664" author="cmishra" created="Mon, 23 Nov 2009 22:23:30 +0000"  >&lt;p&gt;The best suggestion I have is to add an order by clause to these tests.&lt;/p&gt;</comment>
                            <comment id="12781724" author="namit" created="Tue, 24 Nov 2009 01:12:25 +0000"  >&lt;p&gt;Yes, can you do the following:&lt;/p&gt;

&lt;p&gt;input41.q:&lt;/p&gt;

&lt;p&gt;insert into a temporary table and then select from that order with a order by&apos;&lt;/p&gt;

&lt;p&gt;input42.q/input_part9.q: just add a order by&lt;/p&gt;

&lt;p&gt;You can do something similar for input* tests - just remember that there are some special optimizations for map-only union queries which we are testing here.&lt;br/&gt;
We want to keep those tests - so instead of adding a order by at the end of union, just insert into a temporary table and then select from that table order by.&lt;/p&gt;</comment>
                            <comment id="12783859" author="cmishra" created="Mon, 30 Nov 2009 21:50:34 +0000"  >&lt;p&gt;Attached patch fixes the three broken unit tests, and passed all unit tests on my computer.&lt;/p&gt;</comment>
                            <comment id="12784336" author="namit" created="Tue, 1 Dec 2009 18:52:53 +0000"  >&lt;p&gt;I will take a look&lt;/p&gt;</comment>
                            <comment id="12784385" author="rsm" created="Tue, 1 Dec 2009 20:04:41 +0000"  >&lt;p&gt;Sorry about jumping into this late. But have you considered using hadoop&apos;s JobControl? &lt;a href=&quot;http://hadoop.apache.org/common/docs/r0.20.1/api/org/apache/hadoop/mapred/jobcontrol/JobControl.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/common/docs/r0.20.1/api/org/apache/hadoop/mapred/jobcontrol/JobControl.html&lt;/a&gt; I believe PIG uses it as well.&lt;/p&gt;</comment>
                            <comment id="12784400" author="zshao" created="Tue, 1 Dec 2009 20:27:15 +0000"  >&lt;p&gt;We cannot use JobControl because not all Hive tasks are map-reduce jobs.&lt;/p&gt;

&lt;p&gt;In some sense, Driver is reimplementing JobControl to accomodate all different types of Hive tasks. The alternative is to extend JobControl.&lt;br/&gt;
I think implementing Driver from scratch (as we already did) is more flexible at this point of time.&lt;/p&gt;

&lt;p&gt;This is good information though. At some point we should revisit Driver and JobControl to see how we can refactor the code better.&lt;/p&gt;</comment>
                            <comment id="12785638" author="cmishra" created="Thu, 3 Dec 2009 23:43:06 +0000"  >&lt;p&gt;Only difference between this and the previous patch is that hive.exec.parallel is now set to false by default.&lt;/p&gt;

&lt;p&gt;On Namit&apos;s suggestion, based on an offline discussion we had.&lt;/p&gt;</comment>
                            <comment id="12785718" author="namit" created="Fri, 4 Dec 2009 02:22:15 +0000"  >&lt;p&gt;Committed. Thanks Chaitanya&lt;/p&gt;</comment>
                            <comment id="12851820" author="chinna" created="Wed, 31 Mar 2010 11:11:12 +0000"  >&lt;p&gt;dd&lt;/p&gt;</comment>
                            <comment id="13841393" author="asimjalis" created="Fri, 6 Dec 2013 16:25:10 +0000"  >&lt;p&gt;I was curious why you decided to go with false by default? &lt;/p&gt;

&lt;p&gt;Could you summarize the offline discussion?&lt;/p&gt;

&lt;p&gt;If setting it to true is safe then it seems like it would always speed up the query. The only downside I can see is that a query might use up more processor resources on each node.&lt;/p&gt;</comment>
                            <comment id="13841408" author="ashutoshc" created="Fri, 6 Dec 2013 16:50:49 +0000"  >&lt;p&gt;This should be turned on by default. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asimjalis&quot; class=&quot;user-hover&quot; rel=&quot;asimjalis&quot;&gt;Asim Jalis&lt;/a&gt; Would you like to create a jira to change the default value for this config?&lt;/p&gt;</comment>
                            <comment id="13841412" author="ashutoshc" created="Fri, 6 Dec 2013 16:52:09 +0000"  >&lt;p&gt;nevermind there is already &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1033&quot; title=&quot;change default value of hive.exec.parallel to true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1033&quot;&gt;HIVE-1033&lt;/a&gt;. I will update the patch there soon.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12480172">PIG-1734</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12444945">HIVE-1033</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12426840" name="HIVE549-v7.patch" size="203595" author="cmishra" created="Thu, 3 Dec 2009 23:43:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Jun 2009 08:00:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73451</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lafr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122341</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds the feature of launching multiple map-reduce tasks that are not dependent on each other in parallel. Examples of queries affected would be those including union-alls, and trees of join operators.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-550] Hiveserver should use a default port if not specified</title>
                <link>https://issues.apache.org/jira/browse/HIVE-550</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When launched without a port number, hiveserver throws the following java error:&lt;/p&gt;

&lt;p&gt;$ ./hive --service hiveserver&lt;br/&gt;
Starting Hive Thrift Server&lt;br/&gt;
java.lang.NumberFormatException: For input string: &quot;-hiveconf&quot;&lt;br/&gt;
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)&lt;br/&gt;
        at java.lang.Integer.parseInt(Integer.java:447)&lt;br/&gt;
        at java.lang.Integer.parseInt(Integer.java:497)&lt;br/&gt;
        at org.apache.hadoop.hive.service.HiveServer.main(HiveServer.java:204)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:166)&lt;br/&gt;
        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)&lt;br/&gt;
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)&lt;br/&gt;
        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)&lt;/p&gt;

&lt;p&gt;Ideally the code should choose a default port or at least put up an appropriate error message.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427486">HIVE-550</key>
            <summary>Hiveserver should use a default port if not specified</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="nzhang">Ning Zhang</assignee>
                                    <reporter username="ehwang">Eric Hwang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jun 2009 19:05:09 +0000</created>
                <updated>Fri, 29 Oct 2010 22:59:01 +0000</updated>
                            <resolved>Tue, 12 Jan 2010 19:40:50 +0000</resolved>
                                    <version>0.4.0</version>
                                                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12799346" author="nzhang" created="Tue, 12 Jan 2010 19:40:00 +0000"  >&lt;p&gt;This issue was already fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-941&quot; title=&quot;hiveserver.sh doesn&amp;#39;t work with Hadoop 0.20.0 or higher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-941&quot;&gt;&lt;del&gt;HIVE-941&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12799347" author="nzhang" created="Tue, 12 Jan 2010 19:40:50 +0000"  >&lt;p&gt;Mark it as duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-941&quot; title=&quot;hiveserver.sh doesn&amp;#39;t work with Hadoop 0.20.0 or higher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-941&quot;&gt;&lt;del&gt;HIVE-941&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Jan 2010 19:40:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lafz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-551] Metrics for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-551</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It would be great to have metrics possibly totalQueries, failedQueries, totalQueryTime, FilesScanned, the challenge here is that multiple instanced of hive could be running, hive server,hive cli, hivecli so having a dedicated JMX port like in the configuration file would be difficult. The user could set the JMX port through the CLI. Any thoughts?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427495">HIVE-551</key>
            <summary>Metrics for Hive</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jun 2009 20:59:20 +0000</created>
                <updated>Fri, 30 Sep 2016 21:35:53 +0000</updated>
                                                                            <component>Logging</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="12735146" author="appodictic" created="Fri, 24 Jul 2009 20:21:30 +0000"  >&lt;p&gt;Saw something JMX related in another Jira and wanted to bring this up&lt;/p&gt;

&lt;p&gt;Suppose we had a configuration option like...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;set hive.jmx.server.per.job=true
set hive.jmx.server.user=ed
set hive.jmx.server.password=ed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A hive query would emit a status line like...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;jmx url = service:///jmx/hostname:port
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Different types of queries would be free to add objects to the MBean server and then someone could attach in and profile a job as running.&lt;/p&gt;</comment>
                            <comment id="15537143" author="lefty@hortonworks.com" created="Fri, 30 Sep 2016 21:35:52 +0000"  >&lt;p&gt;Did &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10761&quot; title=&quot;Create codahale-based metrics system for Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10761&quot;&gt;&lt;del&gt;HIVE-10761&lt;/del&gt;&lt;/a&gt; resolve this issue or is there more to be done?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 30 Sep 2016 21:35:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lag7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
