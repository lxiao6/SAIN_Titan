<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:23:01 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2013-2-5+AND+created+%3C%3D+2013-2-12+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="27" total="27"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-3984] Maintain a clear separation between Windowing &amp; PTF at the specification level. </title>
                <link>https://issues.apache.org/jira/browse/HIVE-3984</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This has multiple pieces:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;redefine the PTF Spec classes, as described in the Data Structs doc in Hive-896&lt;/li&gt;
	&lt;li&gt;refactor PTFDesc classes based on this design&lt;/li&gt;
	&lt;li&gt;refactor translation: both Phase 1 &amp;amp; GenPlan phases&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12630793">HIVE-3984</key>
            <summary>Maintain a clear separation between Windowing &amp; PTF at the specification level. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhbutani">Harish Butani</assignee>
                                    <reporter username="rhbutani">Harish Butani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 01:34:21 +0000</created>
                <updated>Thu, 16 May 2013 21:11:03 +0000</updated>
                            <resolved>Wed, 20 Feb 2013 02:28:15 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>PTF-Windowing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13580841" author="rhbutani" created="Mon, 18 Feb 2013 21:32:51 +0000"  >&lt;p&gt;Patch is attached.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Spec and Def classes are redesigned.&lt;/li&gt;
	&lt;li&gt;Phase1 and genPlan redone. Windowing &amp;amp; PTF translation are clearly separated.&lt;/li&gt;
	&lt;li&gt;there is no more a dependency on antlr during runtime&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Couple of issues remaining, will create Jiras for these:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Need to do Column pruning for PTF Op for Windowing. (original test6 is failing; will add it back once this is done)&lt;/li&gt;
	&lt;li&gt;runtime has dependency on FuncRegistry; dependency has been removed for PTFs, there is still a dependency for UDAFs.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13580871" author="ashutoshc" created="Mon, 18 Feb 2013 22:51:00 +0000"  >&lt;p&gt;Added &lt;a href=&quot;https://reviews.facebook.net/D8661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8661&lt;/a&gt; to ease review.&lt;/p&gt;</comment>
                            <comment id="13580904" author="ashutoshc" created="Mon, 18 Feb 2013 23:44:10 +0000"  >&lt;p&gt;Left some initial comments on phabricator.&lt;/p&gt;</comment>
                            <comment id="13580916" author="rhbutani" created="Tue, 19 Feb 2013 00:15:59 +0000"  >&lt;p&gt;Have responded to your comments. Attached patch with the missing license headers.&lt;/p&gt;</comment>
                            <comment id="13581860" author="rhbutani" created="Wed, 20 Feb 2013 01:51:24 +0000"  >&lt;p&gt;patch attached.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added the comments&lt;/li&gt;
	&lt;li&gt;many of the lint issues&lt;/li&gt;
	&lt;li&gt;fixed the 2 issues: Input&apos;s alias must not be visible in output of Function; bug in creation of First Partition in PTFOp&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13581879" author="ashutoshc" created="Wed, 20 Feb 2013 02:26:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13581882" author="ashutoshc" created="Wed, 20 Feb 2013 02:28:16 +0000"  >&lt;p&gt;Committed to branch. Thanks Harish and Prajkta for your hard work on this one!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12438744">HIVE-896</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12569859" name="HIVE-3984.1.patch.txt" size="1269946" author="rhbutani" created="Mon, 18 Feb 2013 21:27:48 +0000"/>
                            <attachment id="12569872" name="HIVE-3984.2.patch.txt" size="1272424" author="rhbutani" created="Tue, 19 Feb 2013 00:15:29 +0000"/>
                            <attachment id="12570052" name="HIVE-3984.3.patch.txt" size="1297667" author="rhbutani" created="Wed, 20 Feb 2013 01:46:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Feb 2013 22:51:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hpz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3985] Update new UDAFs introduced for Windowing to work with new Decimal Type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3985</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12630794">HIVE-3985</key>
            <summary>Update new UDAFs introduced for Windowing to work with new Decimal Type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brocknoland">Brock Noland</assignee>
                                    <reporter username="rhbutani">Harish Butani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 01:36:01 +0000</created>
                <updated>Thu, 16 May 2013 21:11:03 +0000</updated>
                            <resolved>Sat, 6 Apr 2013 15:31:28 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>PTF-Windowing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13596357" author="brocknoland" created="Thu, 7 Mar 2013 20:52:20 +0000"  >&lt;p&gt;Review &lt;a href=&quot;https://reviews.facebook.net/D9225&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D9225&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13597514" author="brocknoland" created="Fri, 8 Mar 2013 20:22:12 +0000"  >&lt;p&gt;Updated test based on feedback!&lt;/p&gt;</comment>
                            <comment id="13599216" author="ashutoshc" created="Mon, 11 Mar 2013 20:19:54 +0000"  >&lt;p&gt;Patch looks good. However because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4140&quot; title=&quot;Specifying alias for windowing function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4140&quot;&gt;&lt;del&gt;HIVE-4140&lt;/del&gt;&lt;/a&gt; you need to update the test case to have alias after defining over clause. Sorry about that.&lt;/p&gt;</comment>
                            <comment id="13599220" author="brocknoland" created="Mon, 11 Mar 2013 20:21:50 +0000"  >&lt;p&gt;OK, will do!&lt;/p&gt;</comment>
                            <comment id="13621051" author="ashutoshc" created="Wed, 3 Apr 2013 16:55:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;Brock Noland&lt;/a&gt; Would you like to update this patch ?&lt;/p&gt;</comment>
                            <comment id="13621105" author="brocknoland" created="Wed, 3 Apr 2013 17:52:54 +0000"  >&lt;p&gt;Thanks for reminding me! I have updated this patch, attached. The new test passes on trunk for me.&lt;/p&gt;</comment>
                            <comment id="13621107" author="brocknoland" created="Wed, 3 Apr 2013 17:53:04 +0000"  >&lt;p&gt;Marking &quot;Patch Available&quot;&lt;/p&gt;</comment>
                            <comment id="13621173" author="ashutoshc" created="Wed, 3 Apr 2013 18:48:19 +0000"  >&lt;p&gt;Left a comment on phabricator. &lt;/p&gt;</comment>
                            <comment id="13623801" author="brocknoland" created="Fri, 5 Apr 2013 17:08:05 +0000"  >&lt;p&gt;Latest patch, review item has also been updated. Thanks!&lt;/p&gt;</comment>
                            <comment id="13624013" author="ashutoshc" created="Fri, 5 Apr 2013 20:12:07 +0000"  >&lt;p&gt;Looks good to me. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhbutani&quot; class=&quot;user-hover&quot; rel=&quot;rhbutani&quot;&gt;Harish Butani&lt;/a&gt; would you also want to take a look?&lt;/p&gt;</comment>
                            <comment id="13624135" author="rhbutani" created="Fri, 5 Apr 2013 22:31:28 +0000"  >&lt;p&gt;+1&lt;br/&gt;
looks good. &lt;br/&gt;
Thanks for fixing cume_dist. Prajakta made a similar fix last night; you beat her to it.&lt;br/&gt;
She is looking at StdDev.&lt;/p&gt;</comment>
                            <comment id="13624439" author="ashutoshc" created="Sat, 6 Apr 2013 15:31:28 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Brock!&lt;/p&gt;</comment>
                            <comment id="13624857" author="hudson" created="Sun, 7 Apr 2013 10:26:31 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2049 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2049/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2049/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3985&quot; title=&quot;Update new UDAFs introduced for Windowing to work with new Decimal Type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3985&quot;&gt;&lt;del&gt;HIVE-3985&lt;/del&gt;&lt;/a&gt; : Update new UDAFs introduced for Windowing to work with new Decimal Type (Brock Noland via Ashutosh Chauhan) (Revision 1465263)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1465263&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1465263&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFCumeDist.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ptf_decimal.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ptf.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ptf_decimal.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/windowing.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/windowing_rank.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12438744">HIVE-896</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12572610" name="HIVE-3985-0.patch" size="7483" author="brocknoland" created="Thu, 7 Mar 2013 20:50:40 +0000"/>
                            <attachment id="12572820" name="HIVE-3985-1.patch" size="10326" author="brocknoland" created="Fri, 8 Mar 2013 20:22:12 +0000"/>
                            <attachment id="12576817" name="HIVE-3985-2.patch" size="10328" author="brocknoland" created="Wed, 3 Apr 2013 17:52:54 +0000"/>
                            <attachment id="12577240" name="HIVE-3985-3.patch" size="40916" author="brocknoland" created="Fri, 5 Apr 2013 17:08:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Mar 2013 20:52:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hpzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3986] Fix select expr processing in PTF Operator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3986</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Select expressions that contain Lead/Lag functions are handled by the PTF Operator as a post processing step after output Partition is computed.&lt;br/&gt;
The Select Exprs Node Descs for these are incorrectly created using the Input RR. These should be created, just like the having expression using the Output RR of the PTF.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630795">HIVE-3986</key>
            <summary>Fix select expr processing in PTF Operator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhbutani">Harish Butani</assignee>
                                    <reporter username="rhbutani">Harish Butani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 01:40:38 +0000</created>
                <updated>Thu, 16 May 2013 21:10:48 +0000</updated>
                            <resolved>Wed, 20 Feb 2013 02:29:20 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>PTF-Windowing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13581883" author="ashutoshc" created="Wed, 20 Feb 2013 02:29:20 +0000"  >&lt;p&gt;Fixed via &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3984&quot; title=&quot;Maintain a clear separation between Windowing &amp;amp; PTF at the specification level. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3984&quot;&gt;&lt;del&gt;HIVE-3984&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12438744">HIVE-896</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Feb 2013 02:29:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311291</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hpzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3987] Update PTF invocation and windowing grammar</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3987</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Changes to grammar to make it more Standards based:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;support Partition &amp;amp; Order style along with Hive specific Distribute/Cluster and Sort in windowing specification.&lt;/li&gt;
	&lt;li&gt;PTF args should come after Input details like in Aster.&lt;/li&gt;
	&lt;li&gt;tbd: do we need to support named parameters.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12630801">HIVE-3987</key>
            <summary>Update PTF invocation and windowing grammar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="rhbutani">Harish Butani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 02:33:08 +0000</created>
                <updated>Thu, 16 May 2013 21:10:19 +0000</updated>
                            <resolved>Sat, 2 Mar 2013 20:14:02 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>PTF-Windowing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13583588" author="ashutoshc" created="Thu, 21 Feb 2013 21:59:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4048&quot; title=&quot;Allow partition by/order by in partitioning spec in over clause and partition function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4048&quot;&gt;&lt;del&gt;HIVE-4048&lt;/del&gt;&lt;/a&gt; addresses first bulletin point.&lt;/p&gt;</comment>
                            <comment id="13591187" author="ashutoshc" created="Sat, 2 Mar 2013 01:24:34 +0000"  >&lt;p&gt;Patch which takes care of second and third bullet points of this jira.&lt;/p&gt;</comment>
                            <comment id="13591188" author="ashutoshc" created="Sat, 2 Mar 2013 01:33:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D9027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D9027&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13591500" author="ashutoshc" created="Sat, 2 Mar 2013 20:14:02 +0000"  >&lt;p&gt;Committed to branch. Thanks, Harish for review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12633475">HIVE-4048</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12438744">HIVE-896</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12571703" name="HIVE-3987.patch" size="33113" author="ashutoshc" created="Sat, 2 Mar 2013 01:24:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Feb 2013 21:59:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311297</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hq0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3988] lateral view followed by mapjoin should not be allowed</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3988</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Consider the following queries:&lt;/p&gt;

&lt;p&gt;drop table lazy_array_map;&lt;br/&gt;
create table lazy_array_map (map_col map&amp;lt;int,string&amp;gt;, array_col array &amp;lt;string&amp;gt; );&lt;br/&gt;
INSERT OVERWRITE TABLE lazy_array_map select map(1,&apos;one&apos;,2,&apos;two&apos;,3,&apos;three&apos;), array(&apos;100&apos;,&apos;200&apos;,&apos;300&apos;) FROM src LIMIT 1;&lt;/p&gt;

&lt;p&gt;select /*+ MAPJOIN(a) */ * from&lt;br/&gt;
(SELECT array_col, myCol from lazy_array_map lateral view explode(array_col) X AS myCol) subq1&lt;br/&gt;
join&lt;br/&gt;
src a&lt;br/&gt;
on subq1.myCol = a.key;&lt;/p&gt;

&lt;p&gt;select /*+ MAPJOIN(subq1) */ * from&lt;br/&gt;
(SELECT array_col, myCol from lazy_array_map lateral view explode(array_col) X AS myCol) subq1&lt;br/&gt;
join&lt;br/&gt;
src a&lt;br/&gt;
on subq1.myCol = a.key;&lt;/p&gt;


&lt;p&gt;The last 2 queries should throw an error, but they work fine right now.&lt;br/&gt;
The same affect can be achieved without a mapjoin hint.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630830">HIVE-3988</key>
            <summary>lateral view followed by mapjoin should not be allowed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 08:32:41 +0000</created>
                <updated>Tue, 5 Feb 2013 08:33:56 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12545125">HIVE-2839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311326</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hq7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3989] TestCase TestMTQueries fails with Non-Sun Java</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3989</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The testcase fails with IBM java 6, due to a Hashmap problem.&lt;/p&gt;

&lt;p&gt;Following the error:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a /home/renata/stg-hadoop/hive-0.10/release-0.10.0/build/ql/test/logs/clientpositive/join2.q.out /home/renata/stg-hadoop/hive-0.10/release-0.10.0/ql/src/test/results/clientpositive/join2.q.out&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 109c109&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt;             0 &lt;/p&gt;
{VALUE._col0}
&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt;             0 &lt;/p&gt;
{VALUE._col4}
&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 112c112&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt;           outputColumnNames: _col0, _col9&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt;           outputColumnNames: _col4, _col9&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 115c115&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt;                   expr: _col0&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;#8212;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt;                   expr: _col4&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test join2.q results check failed with error code 1&lt;/p&gt;</description>
                <environment>&lt;p&gt;IBM Java 6 x86 64&lt;/p&gt;</environment>
        <key id="12630926">HIVE-3989</key>
            <summary>TestCase TestMTQueries fails with Non-Sun Java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgduarte@br.ibm.com">Renata Ghisloti Duarte de Souza</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 19:03:58 +0000</created>
                <updated>Mon, 25 Mar 2013 18:05:04 +0000</updated>
                                            <version>0.9.0</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13592400" author="rgduarte@br.ibm.com" created="Mon, 4 Mar 2013 17:43:56 +0000"  >&lt;p&gt;This patch fix the TestMTQueries bug, and solves a bunch of failing queries from testcase org.apache.hadoop.hive.cli.TestCliDriver.&lt;/p&gt;

&lt;p&gt;It substitutes HashMap for LinkedHashMap so that all JVMs have the same output.&lt;/p&gt;

&lt;p&gt;The &quot;*.q.out&quot; files are the new expected outputs from the testcases.&lt;/p&gt;

&lt;p&gt;Fix is for Hive 0.10.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12571907" name="HIVE-3989.patch" size="41535" author="rgduarte@br.ibm.com" created="Mon, 4 Mar 2013 17:43:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hqsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311768</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-3990] Provide input threshold for direct-fetcher (HIVE-2925)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3990</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;As a followup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2925&quot; title=&quot;Support non-MR fetching for simple queries with select/limit/filter operations only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2925&quot;&gt;&lt;del&gt;HIVE-2925&lt;/del&gt;&lt;/a&gt;, add input threshold for fetch task conversion.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630986">HIVE-3990</key>
            <summary>Provide input threshold for direct-fetcher (HIVE-2925)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                            <label>TODOC13</label>
                    </labels>
                <created>Wed, 6 Feb 2013 02:13:21 +0000</created>
                <updated>Sat, 5 Jul 2014 23:17:47 +0000</updated>
                            <resolved>Sun, 10 Nov 2013 03:20:18 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13572092" author="phabricator@reviews.facebook.net" created="Wed, 6 Feb 2013 02:23:12 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3990&quot; title=&quot;Provide input threshold for direct-fetcher (HIVE-2925)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3990&quot;&gt;&lt;del&gt;HIVE-3990&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Provide input threshold for direct-fetcher (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2925&quot; title=&quot;Support non-MR fetching for simple queries with select/limit/filter operations only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2925&quot;&gt;&lt;del&gt;HIVE-2925&lt;/del&gt;&lt;/a&gt;)&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;DPAL-1371 Provide input threshold for direct-fetcher&lt;/p&gt;

&lt;p&gt;As a followup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2925&quot; title=&quot;Support non-MR fetching for simple queries with select/limit/filter operations only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2925&quot;&gt;&lt;del&gt;HIVE-2925&lt;/del&gt;&lt;/a&gt;, add input threshold for fetch task conversion.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8415&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8415&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/InputEstimator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SimpleFetchOptimizer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonmr_fetch_threshold.q&lt;br/&gt;
  ql/src/test/results/clientpositive/nonmr_fetch_threshold.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/20535/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/20535/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13810476" author="ashutoshc" created="Thu, 31 Oct 2013 17:44:00 +0000"  >&lt;p&gt;I think once we have this in, we can set hive.fetch.task.conversion to more by default (with relatively smaller threshold). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt; Can you rebase the patch?&lt;/p&gt;</comment>
                            <comment id="13811122" author="navis" created="Fri, 1 Nov 2013 09:10:18 +0000"  >&lt;p&gt;Sure. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5718&quot; title=&quot;Support direct fetch for lateral views, sub queries, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5718&quot;&gt;&lt;del&gt;HIVE-5718&lt;/del&gt;&lt;/a&gt; also might be useful. Before that I should be accustomed to maven env.&lt;/p&gt;</comment>
                            <comment id="13811240" author="phabricator@reviews.facebook.net" created="Fri, 1 Nov 2013 13:23:18 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3990&quot; title=&quot;Provide input threshold for direct-fetcher (HIVE-2925)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3990&quot;&gt;&lt;del&gt;HIVE-3990&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Provide input threshold for direct-fetcher (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2925&quot; title=&quot;Support non-MR fetching for simple queries with select/limit/filter operations only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2925&quot;&gt;&lt;del&gt;HIVE-2925&lt;/del&gt;&lt;/a&gt;)&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8415&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8415&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8415?vs=27291&amp;amp;id=42879#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8415?vs=27291&amp;amp;id=42879#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/InputEstimator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SimpleFetchOptimizer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonmr_fetch_threshold.q&lt;br/&gt;
  ql/src/test/results/clientpositive/nonmr_fetch_threshold.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13811305" author="hiveqa" created="Fri, 1 Nov 2013 14:55:30 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12611585/D8415.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12611585/D8415.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4548 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/112/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/112/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/112/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/112/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13813617" author="phabricator@reviews.facebook.net" created="Tue, 5 Nov 2013 04:11:22 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3990&quot; title=&quot;Provide input threshold for direct-fetcher (HIVE-2925)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3990&quot;&gt;&lt;del&gt;HIVE-3990&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Provide input threshold for direct-fetcher (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2925&quot; title=&quot;Support non-MR fetching for simple queries with select/limit/filter operations only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2925&quot;&gt;&lt;del&gt;HIVE-2925&lt;/del&gt;&lt;/a&gt;)&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk &amp;amp; Applied InputEstimator to MapJoin big table decision process&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8415&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8415&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8415?vs=42879&amp;amp;id=43035#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8415?vs=42879&amp;amp;id=43035#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/InputEstimator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SimpleFetchOptimizer.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonmr_fetch_threshold.q&lt;br/&gt;
  ql/src/test/results/clientpositive/nonmr_fetch_threshold.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13814010" author="hiveqa" created="Tue, 5 Nov 2013 16:09:00 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12612104/D8415.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12612104/D8415.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4552 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/141/testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/141/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/141/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/141/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12612104&lt;/p&gt;</comment>
                            <comment id="13818225" author="ashutoshc" created="Sat, 9 Nov 2013 18:13:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13818340" author="ashutoshc" created="Sun, 10 Nov 2013 03:20:18 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13818388" author="lefty@hortonworks.com" created="Sun, 10 Nov 2013 07:33:55 +0000"  >&lt;ul&gt;
	&lt;li&gt;hive.fetch.task.conversion.threshold needs to be documented in the wiki:  &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;hive.fetch.task.aggr also needs to be documented.  It isn&apos;t in hive-default.xml.template or the wiki, but it&apos;s in HiveConf.java.  Apparently it was added in Hive 0.12.0 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4002&quot; title=&quot;Fetch task aggregation for simple group by query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4002&quot;&gt;&lt;del&gt;HIVE-4002&lt;/del&gt;&lt;/a&gt;, Fetch task aggregation for simple group by query).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I can add these two parameters to the wiki if someone agrees to review them.  But adding hive.fetch.task.aggr to hive-default.xml.template requires a new JIRA, unless it gets piggybacked onto &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5498&quot; title=&quot;Merge metadata only optimizer into simple fetch optimizer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5498&quot;&gt;HIVE-5498&lt;/a&gt; (open, unassigned: Merge metadata only optimizer into simple fetch optimizer).&lt;/p&gt;</comment>
                            <comment id="13818704" author="navis" created="Mon, 11 Nov 2013 05:18:45 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;~lefty@hortonworks.com&amp;#93;&lt;/span&gt; I&apos;ll update hive-default.xml.template for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4002&quot; title=&quot;Fetch task aggregation for simple group by query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4002&quot;&gt;&lt;del&gt;HIVE-4002&lt;/del&gt;&lt;/a&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5793&quot; title=&quot;Update hive-default.xml.template for HIVE-4002&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5793&quot;&gt;&lt;del&gt;HIVE-5793&lt;/del&gt;&lt;/a&gt;. I&apos;ve missed that.&lt;/p&gt;</comment>
                            <comment id="14052974" author="lefty@hortonworks.com" created="Sat, 5 Jul 2014 21:53:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;Ashutosh Chauhan&lt;/a&gt; commented at the end of October:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I think once we have this in, we can set hive.fetch.task.conversion to more by default (with relatively smaller threshold).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So should the default for hive.fetch.task.conversion be changed to more now (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2925&quot; title=&quot;Support non-MR fetching for simple queries with select/limit/filter operations only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2925&quot;&gt;&lt;del&gt;HIVE-2925&lt;/del&gt;&lt;/a&gt;)?&lt;/p&gt;</comment>
                            <comment id="14052977" author="gopalv" created="Sat, 5 Jul 2014 21:59:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;: I saw usability issues with the threshold setting, two weeks back.&lt;/p&gt;

&lt;p&gt;Once that gets analyzed, I will update the default from -1 to 128Mb soon (because -1 does not mean &quot;disabled&quot;. it means &quot;infinite&quot;).&lt;/p&gt;</comment>
                            <comment id="14052979" author="lefty@hortonworks.com" created="Sat, 5 Jul 2014 22:09:40 +0000"  >&lt;p&gt;&lt;b&gt;hive.fetch.task.conversion.threshold&lt;/b&gt; and &lt;b&gt;hive.fetch.task.aggr&lt;/b&gt; are documented in the wiki (also &lt;b&gt;hive.fetch.task.conversion&lt;/b&gt;):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.fetch.task.conversion.threshold&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; hive.fetch.task.conversion.threshold &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.fetch.task.aggr&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; hive.fetch.task.aggr &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.fetch.task.conversion&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Configuration Properties &amp;#8211; hive.fetch.task.conversion &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please review, especially the description of &lt;b&gt;hive.fetch.task.conversion.threshold&lt;/b&gt; because I added an explanation of the negative default value. By the way:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;What are the input threshold units for &lt;b&gt;hive.fetch.task.conversion.threshold&lt;/b&gt; &amp;#8211; bytes?&lt;/li&gt;
	&lt;li&gt;What does RS mean in the description of &lt;b&gt;hive.fetch.task.conversion&lt;/b&gt; (&quot;should not have any aggregations or distincts (which incurs RS)&quot;)? My best guess is ReduceSinkOperator, from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt;&apos;s comment August 13, 2013 on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5056&quot; title=&quot;MapJoinProcessor ignores order of values in removing RS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5056&quot;&gt;&lt;del&gt;HIVE-5056&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14052982" author="lefty@hortonworks.com" created="Sat, 5 Jul 2014 23:06:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt;, then threshold units are probably megabytes.  Thanks.&lt;/p&gt;</comment>
                            <comment id="14052984" author="gopalv" created="Sat, 5 Jul 2014 23:17:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;Lefty Leverenz&lt;/a&gt;: I have it on my next week&apos;s schedule to revisit, will comment on this or open a new JIRA for a defaults change.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12549443">HIVE-2925</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12678501">HIVE-5793</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12611585" name="D8415.2.patch" size="18942" author="phabricator@reviews.facebook.net" created="Fri, 1 Nov 2013 13:23:18 +0000"/>
                            <attachment id="12612104" name="D8415.3.patch" size="23078" author="phabricator@reviews.facebook.net" created="Tue, 5 Nov 2013 04:11:22 +0000"/>
                            <attachment id="12568157" name="HIVE-3990.D8415.1.patch" size="18726" author="phabricator@reviews.facebook.net" created="Wed, 6 Feb 2013 02:23:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Feb 2013 02:23:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hr5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311828</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3991] junit failure on Semantic Analysis</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3991</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hi, can&apos;t apply patches neither change the code cause there are failures&lt;br/&gt;
 in junits from code that is supposed to be stable and release&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;* release-0.9.0-rc2 974918c Hive 0.9.0-rc0 release.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 45, Failures: 6, Errors: 0, Time elapsed: 633.608 sec&lt;/p&gt;&lt;/blockquote&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] diff /home/zeph/hive/build/ql/test/logs/positive/groupby1.q.out /home/zeph/hive/ql/src/test/results/compiler/parse/groupby1.q.out
    [junit] diff -b /home/zeph/hive/build/ql/test/logs/positive/groupby1.q.xml /home/zeph/hive/ql/src/test/results/compiler/plan/groupby1.q.xml
    [junit] 524,525c524
    [junit] &amp;lt;                        &amp;lt;object class=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.Enum&quot;&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;valueOf&quot;&lt;/span&gt;&amp;gt;
    [junit] &amp;lt;                         &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;org.apache.hadoop.hive.ql.udf.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericUDAFEvaluator$Mode&amp;lt;/&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;
    [junit] ---
    [junit] &amp;gt;                        &amp;lt;object class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hive.ql.udf.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericUDAFEvaluator$Mode&quot;&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;valueOf&quot;&lt;/span&gt;&amp;gt; 
    [junit] 602,603c601
    [junit] &amp;lt;                    &amp;lt;object class=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.Enum&quot;&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;valueOf&quot;&lt;/span&gt;&amp;gt;
    [junit] &amp;lt;                     &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;org.apache.hadoop.hive.ql.plan.GroupByDesc$Mode&amp;lt;/&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;
    [junit] ---
    [junit] &amp;gt;                    &amp;lt;object class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hive.ql.plan.GroupByDesc$Mode&quot;&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;valueOf&quot;&lt;/span&gt;&amp;gt; 
    [junit] 1357,1358c1355
    [junit] &amp;lt;              &amp;lt;object class=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.Enum&quot;&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;valueOf&quot;&lt;/span&gt;&amp;gt;
    [junit] &amp;lt;               &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;org.apache.hadoop.hive.ql.udf.&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;.GenericUDAFEvaluator$Mode&amp;lt;/&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;
    [junit] ---
    [junit] junit.framework.AssertionFailedError: Semantic Analysis has unexpected output with error code = 1
    [junit] See build/ql/tmp/hive.log, or &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;ant test ... -Dtest.silent=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; to get more logs.
    [junit]     at junit.framework.Assert.fail(Assert.java:47)
    [junit]     at org.apache.hadoop.hive.ql.parse.TestParse.testParse_groupby1(TestParse.java:214)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    [junit]     at java.lang.reflect.Method.invoke(Method.java:616)
    [junit]     at junit.framework.TestCase.runTest(TestCase.java:154)
    [junit]     at junit.framework.TestCase.runBare(TestCase.java:127)
    [junit]     at junit.framework.TestResult$1.protect(TestResult.java:106)
    [junit]     at junit.framework.TestResult.runProtected(TestResult.java:124)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;run multiple times, with different OSes/AntLibs&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;(OsX) Apache Ant(TM) version 1.8.2 compiled on March 26 2012&lt;/li&gt;
	&lt;li&gt;(Linux) Apache Ant version 1.7.1 compiled on July 2 2010&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="12631027">HIVE-3991</key>
            <summary>junit failure on Semantic Analysis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zeph">Guido Serra aka Zeph</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Feb 2013 09:18:40 +0000</created>
                <updated>Thu, 14 Nov 2013 17:10:57 +0000</updated>
                            <resolved>Thu, 14 Nov 2013 17:10:57 +0000</resolved>
                                    <version>0.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13572279" author="zeph" created="Wed, 6 Feb 2013 09:20:32 +0000"  >&lt;p&gt;some logs files from compilation&lt;/p&gt;

&lt;p&gt;latest: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;tests_jh.log.gz&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13572281" author="zeph" created="Wed, 6 Feb 2013 09:23:51 +0000"  >&lt;p&gt;probably related to: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3282&quot; title=&quot;Convert runtime exceptions to semantic exceptions for missing partitions/tables in show/describe statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3282&quot;&gt;&lt;del&gt;HIVE-3282&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2348&quot; title=&quot;Group by and order by of the same columns fails semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2348&quot;&gt;HIVE-2348&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3233&quot; title=&quot;Error in semantic analysis:Invalid Table Alias&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3233&quot;&gt;HIVE-3233&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2155&quot; title=&quot;Improve error messages emitted during semantic analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2155&quot;&gt;&lt;del&gt;HIVE-2155&lt;/del&gt;&lt;/a&gt; and many others... searching &quot;HIVE Semantic Analysis&quot;&lt;/p&gt;</comment>
                            <comment id="13572283" author="zeph" created="Wed, 6 Feb 2013 09:24:51 +0000"  >&lt;p&gt;probably not a blocker, since the application works, in general...&lt;br/&gt;
... but it prevents others from contributing to the project&lt;/p&gt;</comment>
                            <comment id="13761145" author="ericchu30" created="Sat, 7 Sep 2013 23:15:34 +0000"  >&lt;p&gt;Is there any update to this? I also got the same error when I ran unit tests on just the Hive 11 branch.&lt;/p&gt;</comment>
                            <comment id="13822629" author="ashutoshc" created="Thu, 14 Nov 2013 17:10:57 +0000"  >&lt;p&gt;Test cases are working fine for quite some time now. If you can still repro this, feel free to reopen, providing steps to repro.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12518939">HIVE-2379</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12517948">HIVE-2348</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12597643">HIVE-3233</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12599551">HIVE-3282</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12506664">HIVE-2155</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12568189" name="tests.log.gz" size="76378" author="zeph" created="Wed, 6 Feb 2013 09:20:32 +0000"/>
                            <attachment id="12568188" name="tests_jh.log.gz" size="76551" author="zeph" created="Wed, 6 Feb 2013 09:20:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Sep 2013 23:15:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hrf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-3992] Hive RCFile::sync(long) does a sub-sequence linear search for sync blocks</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3992</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following function does some bad I/O&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void sync(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; position) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
  ...
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        seek(position + 4); &lt;span class=&quot;code-comment&quot;&gt;// skip escape
&lt;/span&gt;        in.readFully(syncCheck);
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; syncLen = sync.length;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; in.getPos() &amp;lt; end; i++) {
          &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0;
          &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (; j &amp;lt; syncLen; j++) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sync[j] != syncCheck[(i + j) % syncLen]) {
              &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            }
          }
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (j == syncLen) {
            in.seek(in.getPos() - SYNC_SIZE); &lt;span class=&quot;code-comment&quot;&gt;// position before
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// sync
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
          }
          syncCheck[i % syncLen] = in.readByte();
        }
      }
...
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This causes a rather large number of readByte() calls which are passed onto a ByteBuffer via a single byte array.&lt;/p&gt;

&lt;p&gt;This results in rather a large amount of CPU being burnt in a the linear search for the sync pattern in the input RCFile (upto 92% for a skewed example - a trivial map-join + limit 100).&lt;/p&gt;

&lt;p&gt;This behaviour should be avoided at best or at least replaced by a rolling hash for efficient comparison, since it has a known byte-width of 16 bytes.&lt;/p&gt;

&lt;p&gt;Attached the stack trace from a Yourkit profile.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu x86_64/java-1.6/hadoop-2.0.3&lt;/p&gt;</environment>
        <key id="12631143">HIVE-3992</key>
            <summary>Hive RCFile::sync(long) does a sub-sequence linear search for sync blocks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gopalv">Gopal V</assignee>
                                    <reporter username="gopalv">Gopal V</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Feb 2013 21:23:08 +0000</created>
                <updated>Thu, 16 May 2013 21:11:05 +0000</updated>
                            <resolved>Mon, 8 Apr 2013 04:42:05 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13572846" author="gopalv" created="Wed, 6 Feb 2013 21:24:11 +0000"  >&lt;p&gt;Profile view of RCFile::sync(long)&lt;/p&gt;</comment>
                            <comment id="13572927" author="vinodkv" created="Wed, 6 Feb 2013 22:23:34 +0000"  >&lt;p&gt;This is one of the big things that is solved by the ORC file (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3874&quot; title=&quot;Create a new Optimized Row Columnar file format for Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3874&quot;&gt;&lt;del&gt;HIVE-3874&lt;/del&gt;&lt;/a&gt;). Not saying that it shouldn&apos;t be fixed in RCFile, but we will need to modify RCFile to similarly include some kind of file header/footer to index into the row-groups.&lt;/p&gt;</comment>
                            <comment id="13573298" author="gopalv" created="Thu, 7 Feb 2013 08:06:22 +0000"  >&lt;p&gt;We can&apos;t fix it when the map-splits are properly distributed onto different map-tasks. &lt;/p&gt;

&lt;p&gt;But as the profile shows, we have a CombineHiveRecordReader which is reading multiple splits in the same process using different RCFileRecordReaders.&lt;/p&gt;

&lt;p&gt;I put in some prints to check for sync behaviour of readers.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ip-10-195-75-130: split = 0-67108864
ip-10-195-75-130: sync = 57
ip-10-195-75-130: Last seen sync = 70351814 (in 57-67108864)
ip-10-195-75-130: split = 67108864-134217728
ip-10-195-75-130: sync = 70351814
ip-10-195-75-130: Last seen sync = 136274939 (in 70351814-134217728)
ip-10-195-75-130: split = 134217728-157715536
ip-10-195-75-130: sync = 136274939
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so every preceding RCFileRecordReader knows what was the last sync point, except the next one fails to use that information &amp;amp; does a fresh sync().&lt;/p&gt;

&lt;p&gt;We need a sync cache within the same process for the same file-split. &lt;/p&gt;

&lt;p&gt;I.e find me the last sync where sync.end &amp;gt; split.start &amp;amp;&amp;amp; sync.start &amp;lt; split.start for the same path.&lt;/p&gt;

&lt;p&gt;Holding that info in-memory should avoid sync passes after the first 57 byte sync-check.&lt;/p&gt;</comment>
                            <comment id="13573368" author="gopalv" created="Thu, 7 Feb 2013 10:32:27 +0000"  >&lt;p&gt;Cuts down on Sync calls in 2 ways.&lt;/p&gt;

&lt;p&gt;1) Does not do sync if ExecMapper.getDone() == true&lt;br/&gt;
2) Caches sync points encountered during previous iterations of the same file (previous split)&lt;/p&gt;</comment>
                            <comment id="13573402" author="gopalv" created="Thu, 7 Feb 2013 11:36:37 +0000"  >&lt;p&gt;Testing dummy query (to simulate a &quot;col in (select ...)&quot; style query) at SCALE=10&lt;/p&gt;

&lt;p&gt;select /&lt;b&gt;+MAPJOIN(time_dim)&lt;/b&gt;/ store_sales_rc.ss_item_sk from store_sales_rc join time_dim on (store_sales_rc.ss_sold_time_sk = time_dim.t_time_sk) limit 100;&lt;/p&gt;

&lt;p&gt;Before&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2013-02-07 06:32:02,164 Stage-1 map = 0%,  reduce = 0%
2013-02-07 06:32:20,082 Stage-1 map = 50%,  reduce = 0%, Cumulative CPU 53.9 sec
2013-02-07 06:32:21,127 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 61.59 sec
Job 0: Map: 8   Cumulative CPU: 61.59 sec   HDFS Read: 104763092 HDFS Write: 4749 SUCCESS
Total MapReduce CPU Time Spent: 1 minutes 1 seconds 590 msec
Time taken: 34.572 seconds, Fetched: 100 row(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2013-02-07 06:35:29,413 Stage-1 map = 0%,  reduce = 0%
2013-02-07 06:35:43,200 Stage-1 map = 25%,  reduce = 0%, Cumulative CPU 9.31 sec
2013-02-07 06:35:44,247 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 39.45 sec
MapReduce Total cumulative CPU time: 39 seconds 450 msec
Ended Job = job_1359695160319_0164
MapReduce Jobs Launched: 
Job 0: Map: 8   Cumulative CPU: 39.45 sec   HDFS Read: 25416952 HDFS Write: 4749 SUCCESS
Total MapReduce CPU Time Spent: 39 seconds 450 msec
Time taken: 31.351 seconds, Fetched: 100 row(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now the interesting bit is that even though we cut down the CPU cost by almost 50%, the over-all latency drops only by 2 secs.&lt;/p&gt;</comment>
                            <comment id="13582752" author="gopalv" created="Thu, 21 Feb 2013 01:02:03 +0000"  >&lt;p&gt;Patch optimizes for rcfile splits when they are being merged in a CombineFileSplit instance.&lt;/p&gt;</comment>
                            <comment id="13605085" author="gopalv" created="Mon, 18 Mar 2013 13:08:10 +0000"  >&lt;p&gt;From the best of my understanding, this is affecting performance in the short-circuited read because the &quot;in&quot; stream is not buffered &amp;amp; fires 1 byte read() syscalls.&lt;/p&gt;</comment>
                            <comment id="13619267" author="ashutoshc" created="Mon, 1 Apr 2013 22:43:27 +0000"  >&lt;p&gt;I have a question related to 1) Does not do sync if ExecMapper.getDone() == true&lt;br/&gt;
Outside of Hive (meaning using RCFile independent of Hive), getDone() will always be false, so this if block will always be skipped and part of this optimization will not fire. That is alright, but want to make sure this will not result in wrong results for that scenario. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;Gopal V&lt;/a&gt; Is that correct?&lt;/p&gt;</comment>
                            <comment id="13619365" author="gopalv" created="Tue, 2 Apr 2013 00:18:14 +0000"  >&lt;p&gt;That part of the patch can be dropped if hive created record readers only when the mapper is processing, but it does create &amp;amp; sync record readers irrespective of whether the reader is needed or not.&lt;/p&gt;

&lt;p&gt;Making hive less eager about that would remove the need for that line, but this patch gave performance improvements with the least code change instead of a patch higher above that affects all record reader inits.&lt;/p&gt;</comment>
                            <comment id="13619857" author="ashutoshc" created="Tue, 2 Apr 2013 14:36:44 +0000"  >&lt;p&gt;Following tests failed on trunk:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Test org.apache.hadoop.hive.ql.io.TestRCFile FAILED&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: mapjoin_test_outer.q&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted &lt;a href=&quot;file:/home/ashutosh/hive/build/ql/test/data/warehouse/dest_1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/ashutosh/hive/build/ql/test/data/warehouse/dest_1&lt;/a&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running: diff -a /home/ashutosh/hive/build/ql/test/logs/clientpositive/mapjoin_test_outer.q.out /home/ashutosh/hive/ql/src/test/results/clientpositive/mapjoin_test_outer.q.out&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 414d413&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 569a569&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 1320d1319&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 1475a1475&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Failed query: mapjoin_test_outer.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13620123" author="gopalv" created="Tue, 2 Apr 2013 18:47:59 +0000"  >&lt;p&gt;That seems 