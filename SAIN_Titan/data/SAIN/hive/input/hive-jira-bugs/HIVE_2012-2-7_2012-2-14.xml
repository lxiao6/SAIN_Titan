<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:20:09 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2012-2-7+AND+created+%3C%3D+2012-2-14+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="25" total="25"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-2780] Implement more restrictive table sampler</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2780</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Current table sampling scans whole block, making more rows included than expected especially for small tables.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541578">HIVE-2780</key>
            <summary>Implement more restrictive table sampler</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2012 07:45:22 +0000</created>
                <updated>Mon, 25 Feb 2013 08:52:11 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13202147" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 07:48:57 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2780&quot; title=&quot;Implement more restrictive table sampler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2780&quot;&gt;HIVE-2780&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement more restrictive table sampler&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-722 Implement head sampler for each blocks&lt;/p&gt;

&lt;p&gt;  Current table sampling scans whole block, making more rows included than expected especially for small tables.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1623&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/PercentSampler.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/tablesamples.q&lt;br/&gt;
  ql/src/test/results/clientpositive/tablesamples.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3453/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3453/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13275131" author="phabricator@reviews.facebook.net" created="Tue, 15 May 2012 01:52:28 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2780&quot; title=&quot;Implement more restrictive table sampler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2780&quot;&gt;HIVE-2780&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement more restrictive table sampler&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Rebased on trunk&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1623&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/PercentSampler.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/tablesamples.q&lt;br/&gt;
  ql/src/test/results/clientpositive/tablesamples.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13552106" author="ashutoshc" created="Sun, 13 Jan 2013 00:40:11 +0000"  >&lt;p&gt;I believe this new head sampler can only be used for FileInputFormat and only when its uncompressed. Correct? I think since thats a pretty common setup, its useful even in its restricted form. I applied the patch, but there were conflicts, I manually resolved the conflicts. Running tests now. &lt;/p&gt;</comment>
                            <comment id="13552279" author="ashutoshc" created="Sun, 13 Jan 2013 19:14:12 +0000"  >&lt;p&gt;My manually conflict-resolved patch resulted in failure in split_sample.q&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] java.lang.NullPointerException
    [junit]     at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat$DefaultPercentSampler.sampling(CombineHiveInputFormat.java:596)
    [junit]     at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.sampling(CombineHiveInputFormat.java:496)
    [junit]     at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.sampleSplits(CombineHiveInputFormat.java:477)
    [junit]     at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getSplits(CombineHiveInputFormat.java:403)
    [junit]     at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:810)
    [junit]     at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:781)
    [junit]     at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:730)
    [junit]     at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:448)
    [junit]     at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:682)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    [junit]     at java.lang.reflect.Method.invoke(Method.java:597)
    [junit]     at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
    [junit] Job Submission failed with exception &lt;span class=&quot;code-quote&quot;&gt;&apos;java.lang.NullPointerException(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Either my resolution wasn&apos;t correct or trunk has moved significantly. Navis, if you rebase the patch, I will take a look at this one quickly so that it doesnt go stale again.&lt;/p&gt;</comment>
                            <comment id="13553863" author="phabricator@reviews.facebook.net" created="Tue, 15 Jan 2013 15:00:12 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2780&quot; title=&quot;Implement more restrictive table sampler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2780&quot;&gt;HIVE-2780&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement more restrictive table sampler&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Rebased to trunk &amp;amp; add support for total length sampling&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1623&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/SplitSampler.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/split_sample_sampler.q&lt;br/&gt;
  ql/src/test/results/clientpositive/split_sample_sampler.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13558076" author="ashutoshc" created="Sat, 19 Jan 2013 19:30:21 +0000"  >&lt;p&gt;Thanks for updating patch. Marking Patch Available. Reviewing it now.&lt;/p&gt;</comment>
                            <comment id="13558083" author="ashutoshc" created="Sat, 19 Jan 2013 20:01:39 +0000"  >&lt;p&gt;Some comments on phabricator.&lt;/p&gt;</comment>
                            <comment id="13558084" author="phabricator@reviews.facebook.net" created="Sat, 19 Jan 2013 20:02:11 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2780&quot; title=&quot;Implement more restrictive table sampler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2780&quot;&gt;HIVE-2780&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement more restrictive table sampler&quot;.&lt;/p&gt;

&lt;p&gt;  Few comments.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java:489 This config needs to be added to HiveConf.java and in hive-site.xml.template with description. Also, indicate that alternate sampler is available if someone wants to use it.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java:583 Instead of growing this file further, I think it will make sense to put this class in its own java file. Also,  can you please also add comments on algorithm which this sampler follows.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java:620 Instead of growing this file further, I think it will make sense to put this class in its own java file. Also,  can you please also add comments on algorithm which this sampler follows.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java:657 I assume split is splitable only if its either FileInputFormat or uncompressed TextInputFormat. Is that correct ? If so, I think it will be easier to read this logic if its written as follows:&lt;/p&gt;

&lt;p&gt;  if ( if instanceof FileIF  || if instanceof mapreduce.FileIF || (if instanceof TextIF &amp;amp;&amp;amp; !uncompressed))&lt;br/&gt;
   return true&lt;br/&gt;
  else&lt;br/&gt;
  return false&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/SplitSampler.java:34 Please document the contract of this interface.&lt;br/&gt;
  ql/src/test/results/clientpositive/split_sample_sampler.q.out:27 Just because sampler is different, value of count( * ) should not change ? But you got 8 with HeadSampler, but 118 with Default Sampler ?&lt;br/&gt;
  ql/src/test/results/clientpositive/split_sample_sampler.q.out:36 Just because sampler is different, value of count( * ) should not change ? But you got 8 with HeadSampler, but 20 with Default Sampler ? Also, default sampler generated same number 118 for both percent as well as Bytes, but Head sampler got different values. Whats the reason for that ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1623&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-722&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;/p&gt;</comment>
                            <comment id="13558440" author="phabricator@reviews.facebook.net" created="Sun, 20 Jan 2013 23:46:12 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2780&quot; title=&quot;Implement more restrictive table sampler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2780&quot;&gt;HIVE-2780&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement more restrictive table sampler&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java:489 ok.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java:583 ok.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java:657 I remember the code is copied from CombineHiveInputFormat. I&apos;ll check that.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/SplitSampler.java:34 ok.&lt;br/&gt;
  ql/src/test/results/clientpositive/split_sample_sampler.q.out:27 Original implementation provided split level granularity and the purpose of this patch is making it smaller (per row). This means underlying files should be splittable, which you pointed out previously.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1623&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-722&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;/p&gt;</comment>
                            <comment id="13585729" author="phabricator@reviews.facebook.net" created="Mon, 25 Feb 2013 08:52:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2780&quot; title=&quot;Implement more restrictive table sampler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2780&quot;&gt;HIVE-2780&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Implement more restrictive table sampler&quot;.&lt;/p&gt;

&lt;p&gt;  Addressed comments &amp;amp; rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: ashutoshc, JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1623&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1623?vs=25479&amp;amp;id=28587#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1623?vs=25479&amp;amp;id=28587#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  conf/hive-default.xml.template&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/DefaultSplitSampler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/ShirinkSplitSampler.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/SplitSampler.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/split_sample_custom.q&lt;br/&gt;
  ql/src/test/results/clientpositive/split_sample_custom.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, navis&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12604317">HIVE-3401</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513581" name="ASF.LICENSE.NOT.GRANTED--HIVE-2780.D1623.1.patch" size="8925" author="phabricator@reviews.facebook.net" created="Tue, 7 Feb 2012 07:49:00 +0000"/>
                            <attachment id="12526868" name="ASF.LICENSE.NOT.GRANTED--HIVE-2780.D1623.2.patch" size="9670" author="phabricator@reviews.facebook.net" created="Tue, 15 May 2012 01:52:29 +0000"/>
                            <attachment id="12564935" name="HIVE-2780.D1623.3.patch" size="10829" author="phabricator@reviews.facebook.net" created="Tue, 15 Jan 2013 15:00:12 +0000"/>
                            <attachment id="12570747" name="HIVE-2780.D1623.4.patch" size="17328" author="phabricator@reviews.facebook.net" created="Mon, 25 Feb 2013 08:52:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2012 07:48:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2781] HBaseSerDe should allow users to specify the timestamp passed to Puts </title>
                <link>https://issues.apache.org/jira/browse/HIVE-2781</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Users may want to specify the timestamp used for Put requests to hbase. Thus enabling users to have the same timestamp for a single batch of writes. Which would be useful for a number of things. HCatalog&apos;s HBase storageHandler implementation makes use of this feature to provide users with snapshot isolation and write transactions. My proposal is to add the timestamp option as a final static member:&lt;/p&gt;

&lt;p&gt;public static final long HBASE_PUT_TIMESTAMP = &quot;hbase.put_timestamp&quot;&lt;/p&gt;

&lt;p&gt;And passing this value to all the Puts created by serialize()&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541696">HIVE-2781</key>
            <summary>HBaseSerDe should allow users to specify the timestamp passed to Puts </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="toffer">Francis Liu</assignee>
                                    <reporter username="toffer">Francis Liu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2012 21:47:27 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:34 +0000</updated>
                            <resolved>Sat, 25 Feb 2012 14:25:51 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13213427" author="phabricator@reviews.facebook.net" created="Wed, 22 Feb 2012 07:46:48 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HBaseSerDe should allow users to specify the timestamp passed to Puts&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-861 HBaseSerDe should allow users to specify the timestamp passed to Puts&lt;/p&gt;

&lt;p&gt;  Users may want to specify the timestamp used for Put requests to hbase. Thus enabling users to have the same timestamp for a single batch of writes. Which would be useful for a number of things. HCatalog&apos;s HBase storageHandler implementation makes use of this feature to provide users with snapshot isolation and write transactions. My proposal is to add the timestamp option as a final static member:&lt;/p&gt;

&lt;p&gt;  public static final long HBASE_PUT_TIMESTAMP = &quot;hbase.put_timestamp&quot;&lt;/p&gt;

&lt;p&gt;  And passing this value to all the Puts created by serialize()&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1863&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1863&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseSerDe.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/LazyHBaseRow.java&lt;br/&gt;
  hbase-handler/src/test/org/apache/hadoop/hive/hbase/TestLazyHBaseObject.java&lt;br/&gt;
  hbase-handler/src/test/queries/hbase_timestamp.q&lt;br/&gt;
  hbase-handler/src/test/results/hbase_timestamp.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3957/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3957/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13213431" author="phabricator@reviews.facebook.net" created="Wed, 22 Feb 2012 07:52:49 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HBaseSerDe should allow users to specify the timestamp passed to Puts&quot;.&lt;/p&gt;

&lt;p&gt;  Added special column :timestamp to interchange timestamp with hbase value. This is only a suggestion and should do more works including test and javadocs.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1863&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1863&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13214187" author="phabricator@reviews.facebook.net" created="Thu, 23 Feb 2012 01:45:48 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HBaseSerDe should allow users to specify the timestamp passed to Puts&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Bug fix for timestamp=-1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1863&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1863&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseSerDe.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStorageHandler.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat.java&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/LazyHBaseRow.java&lt;br/&gt;
  hbase-handler/src/test/org/apache/hadoop/hive/hbase/TestLazyHBaseObject.java&lt;br/&gt;
  hbase-handler/src/test/queries/hbase_timestamp.q&lt;br/&gt;
  hbase-handler/src/test/results/hbase_timestamp.q.out&lt;/p&gt;</comment>
                            <comment id="13214205" author="phabricator@reviews.facebook.net" created="Thu, 23 Feb 2012 02:15:47 +0000"  >&lt;p&gt;toffer requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HBaseSerDe should allow users to specify the timestamp passed to Puts&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Users may want to specify the timestamp used for Put requests to hbase. Thus enabling users to have the same timestamp for a single batch of writes. Which would be useful for a number of things. HCatalog&apos;s HBase storageHandler implementation makes use of this feature to provide users with snapshot isolation and write transactions. My proposal is to add the timestamp option as a final static member: public static final long HBASE_PUT_TIMESTAMP = &quot;hbase.put_timestamp&quot;. And passing this value to all the Puts created by serialize()&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Added an unit test.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1881&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1881&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseSerDe.java&lt;br/&gt;
  hbase-handler/src/test/org/apache/hadoop/hive/hbase/TestHBaseSerDe.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4005/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4005/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13214209" author="toffer" created="Thu, 23 Feb 2012 02:19:17 +0000"  >&lt;p&gt;Navis, my intention was a bit different when I filed this jira. I wouldn&apos;t want to expose the timestamp field to users as we are using it internally for dealing with concurrent writes and reads on a table. See attached patch. Though I can a use case for your patch as well, not just what I had in mind for this Jira &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. &lt;/p&gt;</comment>
                            <comment id="13214222" author="navis" created="Thu, 23 Feb 2012 02:30:52 +0000"  >&lt;p&gt;I didn&apos;t know that there was already a patch, sorry.&lt;/p&gt;</comment>
                            <comment id="13214836" author="toffer" created="Thu, 23 Feb 2012 16:28:30 +0000"  >&lt;p&gt;You submitted a patch first. I just wanted to point out that your implementation was not what I had in mind when I filed this Jira.&lt;/p&gt;</comment>
                            <comment id="13215905" author="ashutoshc" created="Fri, 24 Feb 2012 21:05:40 +0000"  >&lt;p&gt;@Francis,&lt;br/&gt;
Can you upload the patch on jira granting licensing rights?&lt;/p&gt;</comment>
                            <comment id="13215907" author="phabricator@reviews.facebook.net" created="Fri, 24 Feb 2012 21:05:48 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HBaseSerDe should allow users to specify the timestamp passed to Puts&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Running tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1881&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1881&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  HBaseSerDe&lt;/p&gt;</comment>
                            <comment id="13216032" author="toffer" created="Fri, 24 Feb 2012 22:50:56 +0000"  >&lt;p&gt;license granted &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13216465" author="ashutoshc" created="Sat, 25 Feb 2012 14:25:51 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Francis!&lt;/p&gt;</comment>
                            <comment id="13216542" author="hudson" created="Sat, 25 Feb 2012 21:16:52 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1276 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1276/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1276/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt;: HBaseSerDe should allow users to specify the timestamp passed to Puts (toffer via hashutosh) (Revision 1293616)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293616&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseSerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/org/apache/hadoop/hive/hbase/TestHBaseSerDe.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13217776" author="phabricator@reviews.facebook.net" created="Tue, 28 Feb 2012 01:05:46 +0000"  >&lt;p&gt;navis has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; HBaseSerDe should allow users to specify the timestamp passed to Puts&quot;.&lt;/p&gt;

&lt;p&gt;  Not accepted&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1863&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1863&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13265324" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:43 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547916" author="hudson" created="Wed, 9 Jan 2013 10:23:34 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2781&quot; title=&quot;HBaseSerDe should allow users to specify the timestamp passed to Puts &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2781&quot;&gt;&lt;del&gt;HIVE-2781&lt;/del&gt;&lt;/a&gt;: HBaseSerDe should allow users to specify the timestamp passed to Puts (toffer via hashutosh) (Revision 1293616)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1293616&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseSerDe.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/org/apache/hadoop/hive/hbase/TestHBaseSerDe.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12515546" name="ASF.LICENSE.NOT.GRANTED--HIVE-2781.D1863.1.patch" size="22505" author="phabricator@reviews.facebook.net" created="Wed, 22 Feb 2012 07:46:51 +0000"/>
                            <attachment id="12515675" name="ASF.LICENSE.NOT.GRANTED--HIVE-2781.D1863.2.patch" size="23792" author="phabricator@reviews.facebook.net" created="Thu, 23 Feb 2012 01:45:48 +0000"/>
                            <attachment id="12515680" name="ASF.LICENSE.NOT.GRANTED--HIVE-2781.D1881.1.patch" size="4853" author="phabricator@reviews.facebook.net" created="Thu, 23 Feb 2012 02:15:47 +0000"/>
                            <attachment id="12515986" name="HIVE-2781.D1881.1.patch" size="4853" author="toffer" created="Fri, 24 Feb 2012 22:50:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Feb 2012 07:46:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lliv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hbase</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2782] New BINARY type produces unexpected results with supported UDFS when using MapReduce2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2782</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When using MapReduce2 for Hive&lt;/p&gt;

&lt;p&gt;ba_table_udfs is failing with unexpected output:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: ba_table_udfs.q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 13:32:28 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 13:32:28 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I LOCK_TIME: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I job_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt; -I USING &apos;java -cp /home/cloudera/Code/hive/build/ql/test/logs/clientpositive/ba_table_udfs.q.out /home/cloudera/Code/hive/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 20,26c20,26&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	10val_10	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 3	164val_164	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 3	150val_150	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	18val_18	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 3	177val_177	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	12val_12	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	11val_11	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	120val_120	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	192val_192	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	119val_119	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	187val_187	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	176val_176	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	199val_199	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	118val_118	1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.Assert.fail(Assert.java:50)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ba_table_udfs(TestCliDriver.java:129)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Cleaning up TestCliDriver&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 10.751 sec&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hive.cli.TestCliDriver FAILED&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/ql/build.xml: The following error occurred while executing this line:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/build.xml:328: The following error occurred while executing this line:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/build-common.xml:453: Tests failed!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541720">HIVE-2782</key>
            <summary>New BINARY type produces unexpected results with supported UDFS when using MapReduce2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 00:25:16 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:34 +0000</updated>
                            <resolved>Wed, 15 Feb 2012 02:07:06 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13203477" author="phabricator@reviews.facebook.net" created="Wed, 8 Feb 2012 11:11:58 +0000"  >&lt;p&gt;cwsteinbach requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt;. Make ba_table_udfs.q deterministic&lt;/p&gt;

&lt;p&gt;  When using MapReduce2 for Hive&lt;/p&gt;

&lt;p&gt;  ba_table_udfs is failing with unexpected output:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: ba_table_udfs.q&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 13:32:28 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 13:32:28 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I LOCK_TIME: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I job_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt; -I USING &apos;java -cp /home/cloudera/Code/hive/build/ql/test/logs/clientpositive/ba_table_udfs.q.out /home/cloudera/Code/hive/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 20,26c20,26&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	10val_10	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 3	164val_164	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 3	150val_150	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	18val_18	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 3	177val_177	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	12val_12	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 2	11val_11	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	120val_120	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	192val_192	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	119val_119	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	187val_187	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	176val_176	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	199val_199	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 3	118val_118	1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.Assert.fail(Assert.java:50)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ba_table_udfs(TestCliDriver.java:129)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Cleaning up TestCliDriver&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 10.751 sec&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hive.cli.TestCliDriver FAILED&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/ql/build.xml: The following error occurred while executing this line:&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/build.xml:328: The following error occurred while executing this line:&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/build-common.xml:453: Tests failed!&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1653&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1653&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3531/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3531/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13203844" author="ashutoshc" created="Wed, 8 Feb 2012 18:55:50 +0000"  >&lt;p&gt;You modified the original query in non-trivial way. I am not sure if its an ordering issue. Original query had the order-by and its output also was indeed ordered. Further, if you look at the output diff posted by Zhenxiao, its clear that rows are not out of order, but are rather different. This requires further analysis as to why this query is giving wrong results with MR2. &lt;/p&gt;</comment>
                            <comment id="13203886" author="cwsteinbach" created="Wed, 8 Feb 2012 19:35:58 +0000"  >&lt;p&gt;@Ashutosh: here&apos;s a slightly reformatted version of the original query from ba_table_udfs.q:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT
  LENGTH(CAST(src.key AS BINARY)) AS len,
  CONCAT(CAST(src.key AS BINARY), CAST(src.value AS BINARY)),
  SUBSTR(src.value, 5, 1) AS sub
FROM src
ORDER BY sub
LIMIT 10;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I agree that the orignal query has an order by clause, but this ordering is being applied to the fifth character of the src.value field, which takes on the values 1-9. This is not a strong enough condition to guarantee deterministic ordering of the result set. In the modified version of this query that appears in the patch I have instead applied the ordering to the src.value field. I also cast the SUBSTR input as BINARY, which I assume was an oversight in the original patch.&lt;/p&gt;


&lt;p&gt;In this patch I have replaced your original query with this new one:&lt;/p&gt;
</comment>
                            <comment id="13204081" author="zhenxiao" created="Wed, 8 Feb 2012 22:51:31 +0000"  >&lt;p&gt;I think Carl is correct. Order by the fifth character of the src.value field does not guarantee deterministic ordering.&lt;/p&gt;

&lt;p&gt;How about:&lt;/p&gt;

&lt;p&gt;SELECT&lt;br/&gt;
  key,&lt;br/&gt;
  value,&lt;br/&gt;
  LENGTH(CAST(src.key AS BINARY)) as key_length,&lt;br/&gt;
  LENGTH(CAST(src.value AS BINARY)) as value_length,&lt;br/&gt;
  CONCAT(CAST(src.key AS BINARY), CAST(src.value AS BINARY)) as key_value_concat,&lt;br/&gt;
  SUBSTR(CAST(src.value AS BINARY), 1, 4) as value_substr&lt;br/&gt;
FROM src&lt;br/&gt;
ORDER BY key ASC, value ASC, key_length ASC, value_length ASC, key_value_concat ASC, value_substr ASC&lt;br/&gt;
LIMIT 100;&lt;/p&gt;

&lt;p&gt;This should guarantee the ordering.&lt;/p&gt;</comment>
                            <comment id="13204092" author="cwsteinbach" created="Wed, 8 Feb 2012 23:03:46 +0000"  >&lt;p&gt;@Zhenxiao: Can you please explain how this is an improvement on the version I provided in my patch?&lt;/p&gt;</comment>
                            <comment id="13204094" author="ashutoshc" created="Wed, 8 Feb 2012 23:08:15 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit] &amp;lt; 2	10val_10	1
[junit] &amp;lt; 3	164val_164	1
[junit] &amp;lt; 3	150val_150	1
[junit] &amp;lt; 2	18val_18	1
[junit] &amp;lt; 3	177val_177	1
[junit] &amp;lt; 2	12val_12	1
[junit] &amp;lt; 2	11val_11	1
[junit] &#8212;
[junit] &amp;gt; 3	120val_120	1
[junit] &amp;gt; 3	192val_192	1
[junit] &amp;gt; 3	119val_119	1
[junit] &amp;gt; 3	187val_187	1
[junit] &amp;gt; 3	176val_176	1
[junit] &amp;gt; 3	199val_199	1
[junit] &amp;gt; 3	118val_118	1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I am reading this correctly, this diff is not showing ordering issues of rows, rather few of the rows are different then whats expected, which then is a correctness issue. Isn&apos;t it ?&lt;/p&gt;</comment>
                            <comment id="13204109" author="zhenxiao" created="Wed, 8 Feb 2012 23:31:23 +0000"  >&lt;p&gt;@carl: No problem with the original patch.&lt;/p&gt;

&lt;p&gt;@Ashutosh:&lt;/p&gt;

&lt;p&gt;My understanding is,&lt;/p&gt;

&lt;p&gt;The original query:&lt;/p&gt;

&lt;p&gt;select&lt;br/&gt;
length (cast(src.key as binary)) as len,&lt;br/&gt;
concat(cast(src.key as binary), cast(src.value as binary)),&lt;br/&gt;
substr(src.value, 5,1) as sub&lt;br/&gt;
from src&lt;br/&gt;
order by sub&lt;br/&gt;
limit 10;&lt;/p&gt;

&lt;p&gt;Has the order by on sub, which is the fifth character of src.value.&lt;/p&gt;

&lt;p&gt;In the result set, we could see sub is ordered(only showing sub == 1)&lt;/p&gt;

&lt;p&gt;While, for the len and concat with the same sub, their orders are not deterministic.&lt;/p&gt;

&lt;p&gt;Eg. &lt;/p&gt;

&lt;p&gt;2	10val_10	1&lt;br/&gt;
3	120val_120	1&lt;/p&gt;

&lt;p&gt;both has sub == 1. but the order of these two tuples is not deterministic.&lt;br/&gt;
since we only show the top 10 results(limit 10), and there seems are more than 7 tuples with sub == 1, so what shows in the result set is non-deterministic.&lt;/p&gt;

&lt;p&gt;Carl solves the problem by providing order into the query.&lt;/p&gt;

&lt;p&gt;Correct me if I am wrong.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13204202" author="cwsteinbach" created="Thu, 9 Feb 2012 02:30:22 +0000"  >&lt;p&gt;@Ashutosh: I also found what I think is a bug in the way SUBSTR handles BINARY inputs. Can you please take a look?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2792&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13207475" author="cwsteinbach" created="Tue, 14 Feb 2012 03:04:15 +0000"  >&lt;p&gt;@Ashutosh: Do you have time to take a look at this? Thanks.&lt;/p&gt;</comment>
                            <comment id="13207908" author="ashutoshc" created="Tue, 14 Feb 2012 18:54:09 +0000"  >&lt;p&gt;@Carl,&lt;br/&gt;
Unfortunately I don&apos;t have time to look at this one right now. &lt;/p&gt;</comment>
                            <comment id="13207911" author="ashutoshc" created="Tue, 14 Feb 2012 18:55:53 +0000"  >&lt;p&gt;Oh.. previous comment was for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; I assumed you meant &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; in that I am looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt; right now.&lt;/p&gt;</comment>
                            <comment id="13207915" author="phabricator@reviews.facebook.net" created="Tue, 14 Feb 2012 19:01:58 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Looks good.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1653&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1653&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13208185" author="cwsteinbach" created="Wed, 15 Feb 2012 02:07:06 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13208493" author="hudson" created="Wed, 15 Feb 2012 14:17:57 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1259 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1259/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1259/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; New BINARY type produces unexpected results with supported UDFS&lt;br/&gt;
when using MapReduce2&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt;. Make ba_table_udfs.q deterministic&lt;/p&gt;


&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;CC: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1653&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1653&lt;/a&gt; (Revision 1244314)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244314&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244314&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13209172" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:53:09 +0000"  >&lt;p&gt;cwsteinbach has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by cws.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1653&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1653&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1244314&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1244314&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13265291" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:32 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547912" author="hudson" created="Wed, 9 Jan 2013 10:23:34 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; New BINARY type produces unexpected results with supported UDFS&lt;br/&gt;
when using MapReduce2&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2782&quot; title=&quot;New BINARY type produces unexpected results with supported UDFS when using MapReduce2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2782&quot;&gt;&lt;del&gt;HIVE-2782&lt;/del&gt;&lt;/a&gt;. Make ba_table_udfs.q deterministic&lt;/p&gt;


&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;CC: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1653&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1653&lt;/a&gt; (Revision 1244314)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244314&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244314&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12513795" name="ASF.LICENSE.NOT.GRANTED--HIVE-2782.D1653.1.patch" size="6256" author="phabricator@reviews.facebook.net" created="Wed, 8 Feb 2012 11:11:58 +0000"/>
                            <attachment id="12513796" name="HIVE-2782.D1653.1.patch" size="6256" author="cwsteinbach" created="Wed, 8 Feb 2012 11:14:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2012 11:11:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227007</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2783] Predicate Pushdown failure a view with union when using MapReduce2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2783</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ppd_union_view failure:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: ppd_union_view.q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:30 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:30 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:37 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:37 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:44 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:44 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:51 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:51 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:57 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:57:57 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:04 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:04 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:11 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:11 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:16 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:16 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:21 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:21 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:26 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:26 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:31 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:31 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:35 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:35 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:41 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:41 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:46 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:46 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:50 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:50 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:55 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:58:55 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:00 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:00 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:04 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:04 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I LOCK_TIME: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I job_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt; -I USING &apos;java -cp /home/cloudera/Code/hive/build/ql/test/logs/clientpositive/ppd_union_view.q.out /home/cloudera/Code/hive/ql/src/test/results/clientpositive/ppd_union_view.q.out&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 565c565&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; NULL	NULL	NULL&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; key3	value3	2011-10-13&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 588c588&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; NULL	NULL	NULL&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; key4	value4	2011-10-14&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.Assert.fail(Assert.java:50)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_union_view(TestCliDriver.java:179)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541727">HIVE-2783</key>
            <summary>Predicate Pushdown failure a view with union when using MapReduce2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 01:07:18 +0000</created>
                <updated>Fri, 15 Jun 2012 22:19:10 +0000</updated>
                            <resolved>Fri, 15 Jun 2012 22:19:10 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13225617" author="zhenxiao" created="Thu, 8 Mar 2012 22:37:11 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3952&quot; title=&quot;In MR2, when Total input paths to process == 1, CombinefileInputFormat.getSplits() returns 0 split.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3952&quot;&gt;&lt;del&gt;MAPREDUCE-3952&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227014</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lljb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2784] Integrating with MapReduce2 get NPE throwed when executing a query with a &quot;TABLESAMPLE(x percent)&quot; clause</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2784</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;the following TestCliDriver testcases fail:&lt;/p&gt;

&lt;p&gt;sample_islocalmode_hook&lt;br/&gt;
split_sample&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.lang.NullPointerException&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.sampleSplits(CombineHiveInputFormat.java:450)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getSplits(CombineHiveInputFormat.java:403)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapreduce.JobSubmitter.writeOldSplits(JobSubmitter.java:472)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapreduce.JobSubmitter.writeSplits(JobSubmitter.java:464)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:360)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1215)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1212)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapreduce.Job.submit(Job.java:1212)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:592)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:587)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:587)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:452)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:710)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.util.RunJar.main(RunJar.java:200)&lt;/p&gt;

&lt;p&gt;There are other qfiles which pass which use TABLESAMPLE without specifying a percent&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541728">HIVE-2784</key>
            <summary>Integrating with MapReduce2 get NPE throwed when executing a query with a &quot;TABLESAMPLE(x percent)&quot; clause</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 01:17:39 +0000</created>
                <updated>Sat, 14 Jul 2012 00:42:20 +0000</updated>
                            <resolved>Fri, 16 Mar 2012 23:04:46 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13203100" author="navis" created="Wed, 8 Feb 2012 01:26:10 +0000"  >&lt;p&gt;If you are using hadoop-CDH version, it might be the same problem described by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13231724" author="cwsteinbach" created="Fri, 16 Mar 2012 23:04:27 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2778&quot; title=&quot;Fail on table sampling &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2778&quot;&gt;&lt;del&gt;HIVE-2778&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12541359">HIVE-2778</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12598782">HIVE-3257</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2012 01:26:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227015</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d2uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74239</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2785] support use region</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2785</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;use physicalRegion;&lt;/p&gt;

&lt;p&gt;use physicalRegion &amp;lt;region_name&amp;gt;;&lt;/p&gt;

&lt;p&gt;should be supported&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541737">HIVE-2785</key>
            <summary>support use region</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 02:44:35 +0000</created>
                <updated>Thu, 19 Jul 2012 05:16:19 +0000</updated>
                            <resolved>Thu, 19 Jul 2012 05:16:19 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13205700" author="namit" created="Fri, 10 Feb 2012 19:55:23 +0000"  >&lt;p&gt;The semantics are as follows:&lt;/p&gt;

&lt;p&gt;use physicalRegion;&lt;/p&gt;

&lt;p&gt;Use the default region based on the primary region of the table being queried.&lt;br/&gt;
Choose the jobtracker, dfs from the region provided.&lt;/p&gt;

&lt;p&gt;use physicalRegion &amp;lt;region_name&amp;gt;;&lt;/p&gt;

&lt;p&gt;Use the region specified.&lt;/p&gt;

&lt;p&gt;The query should only succeed if all the partitions of the table are present in the primary region&lt;/p&gt;</comment>
                            <comment id="13418076" author="namit" created="Thu, 19 Jul 2012 05:16:19 +0000"  >&lt;p&gt;This is not needed anymore&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lljj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2786] Throw an error if the user tries to insert a table into a region other than the primary region</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2786</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;By default, the user can only insert into the primary region.&lt;/p&gt;

&lt;p&gt;Add an option to insert into the secondary region also.&lt;br/&gt;
The config variable is &apos;hive.insert.secondary.regions&apos; - default for that variable is false&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541738">HIVE-2786</key>
            <summary>Throw an error if the user tries to insert a table into a region other than the primary region</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 02:47:22 +0000</created>
                <updated>Thu, 19 Jul 2012 05:17:01 +0000</updated>
                            <resolved>Thu, 19 Jul 2012 05:17:01 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13205706" author="namit" created="Fri, 10 Feb 2012 20:04:04 +0000"  >&lt;p&gt;The semantics are as follows:&lt;/p&gt;

&lt;p&gt;If the table/partition is present in the primary region, and the insert is happening in the secondary region, verify that the table/partition is the same (the file size should be exactly&lt;br/&gt;
the same). Otherwise, the operation fails.&lt;/p&gt;

&lt;p&gt;If the table/partition is present in the secondary region, and the insert is happening in the primary region, verify that the table/partition is the same (the file size should be exactly&lt;br/&gt;
the same). Otherwise, the secondary region needs to be deleted.&lt;/p&gt;</comment>
                            <comment id="13418077" author="namit" created="Thu, 19 Jul 2012 05:17:01 +0000"  >&lt;p&gt;This is not needed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lljr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2787] When integrating into MapReduce2, ALTER TABLE test ARCHIVE get invalid usage error</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2787</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: archive_multi.q&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:06 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:06 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; rmr: DEPRECATED: Please use &apos;rm -r&apos; instead.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Deleted /var/lib/hudson/workspace/CDH4-Hive-0.8.0/build/ql/test/data/warehouse/tstsrc&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:10 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:10 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:15 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:15 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:20 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:20 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:25 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:25 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:30 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/18 02:07:30 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; archive -archiveName NAME -p &amp;lt;parent path&amp;gt; &amp;lt;src&amp;gt;* &amp;lt;dest&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Invalid usage.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client Execution failed with error code = 9&lt;br/&gt;
This affects the following TestCliDriver test cases:&lt;/p&gt;

&lt;p&gt;archive&lt;br/&gt;
archive_multi&lt;br/&gt;
archive1&lt;br/&gt;
archive_insert1&lt;br/&gt;
archive_insert2&lt;br/&gt;
archive_insert3&lt;br/&gt;
archive_insert4&lt;br/&gt;
archive_multi1&lt;br/&gt;
archive_multi3&lt;br/&gt;
archive_multi4&lt;br/&gt;
archive_multi5&lt;br/&gt;
archive_multi6&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541739">HIVE-2787</key>
            <summary>When integrating into MapReduce2, ALTER TABLE test ARCHIVE get invalid usage error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 02:52:07 +0000</created>
                <updated>Wed, 8 Feb 2012 05:28:31 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lljz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2788] When integrating into MapReduce2, Hive is unable to handle corrupt rcfile archive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2788</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;archive_corrupt.q is failing due to file format exception when loading archive_corrupt.rc:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hive.cli.TestCliDriver&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: archive_corrupt.q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive/data/files/archive_corrupt.rc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/cloudera/Code/hive/data/files/archive_corrupt.rc&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client Execution failed with error code = 9&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client Execution failed with error code = 9&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.Assert.fail(Assert.java:50)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_archive_corrupt(TestCliDriver.java:109)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Cleaning up TestCliDriver&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 6.778 sec&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hive.cli.TestCliDriver FAILED&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/ql/build.xml: The following error occurred while executing this line:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/build.xml:328: The following error occurred while executing this line:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;for&amp;#93;&lt;/span&gt; /home/cloudera/Code/hive/build-common.xml:453: Tests failed!&lt;/p&gt;

&lt;p&gt;And, in /build/ql/test/logs/clientpositive/archive_corrupt.q.out:&lt;/p&gt;

&lt;p&gt;PREHOOK: query: drop table tstsrcpart&lt;br/&gt;
PREHOOK: type: DROPTABLE&lt;br/&gt;
POSTHOOK: query: drop table tstsrcpart&lt;br/&gt;
POSTHOOK: type: DROPTABLE&lt;br/&gt;
PREHOOK: query: create table tstsrcpart like srcpart&lt;br/&gt;
PREHOOK: type: CREATETABLE&lt;br/&gt;
POSTHOOK: query: create table tstsrcpart like srcpart&lt;br/&gt;
POSTHOOK: type: CREATETABLE&lt;br/&gt;
POSTHOOK: Output: default@tstsrcpart&lt;br/&gt;
PREHOOK: query: load data local inpath &apos;../data/files/archive_corrupt.rc&apos; overwrite into table tstsrcpart partition (ds=&apos;2008-04-08&apos;, hr=&apos;11&apos;)&lt;br/&gt;
PREHOOK: type: LOAD&lt;br/&gt;
PREHOOK: Output: default@tstsrcpart&lt;br/&gt;
Failed with exception Wrong file format. Please check the file&apos;s format.&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MoveTask&lt;/p&gt;


&lt;p&gt;When running the following:&lt;br/&gt;
load data local inpath &apos;../data/files/archive_corrupt.rc&apos; overwrite into table tstsrcpart partition (ds=&apos;2008-04-08&apos;, hr=&apos;11&apos;)&lt;/p&gt;

&lt;p&gt;Get exception:&lt;br/&gt;
Failed with exception Wrong file format. Please check the file&apos;s format.&lt;br/&gt;
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MoveTask&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12541740">HIVE-2788</key>
            <summary>When integrating into MapReduce2, Hive is unable to handle corrupt rcfile archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 02:59:05 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:52 +0000</updated>
                            <resolved>Fri, 11 May 2012 20:23:20 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13273577" author="zhenxiao" created="Fri, 11 May 2012 20:23:03 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2979&quot; title=&quot;Implement INCLUDE_HADOOP_MAJOR_VERSION test macro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2979&quot;&gt;&lt;del&gt;HIVE-2979&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13550225" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:52 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Jan 2013 19:53:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124143</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2979&quot; title=&quot;Implement INCLUDE_HADOOP_MAJOR_VERSION test macro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2979&quot;&gt;&lt;strike&gt;HIVE-2979&lt;/strike&gt;&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2789] query_properties.q contains non-deterministic queries</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2789</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;query_properties.q test failure:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: query_properties.q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:13 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:13 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:18 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:18 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:22 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:22 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:27 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:27 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:32 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:32 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:36 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:36 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:41 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:41 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:46 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:46 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:50 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:50 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:55 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:55 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:59 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:59 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:04 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:04 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:08 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:08 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:13 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:13 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:18 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:18 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:22 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:22 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:27 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:27 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:31 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:31 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I LOCK_TIME: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I job_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt; -I USING &apos;java -cp /home/cloudera/Code/hive/build/ql/test/logs/clientpositive/query_properties.q.out /home/cloudera/Code/hive/ql/src/test/results/clientpositive/query_properties.q.out&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 91c91&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 97	val_97&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 238	val_238&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.Assert.fail(Assert.java:50)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_query_properties(TestCliDriver.java:227)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Cleaning up TestCliDriver&lt;/p&gt;

&lt;p&gt;The query that produces the diff is:&lt;/p&gt;

&lt;p&gt;SELECT * FROM SRC DISTRIBUTE BY src.key LIMIT 1&lt;/p&gt;

&lt;p&gt;The query produces nondeterministic results without and ORDER BY clause.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541742">HIVE-2789</key>
            <summary>query_properties.q contains non-deterministic queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 03:08:43 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:50 +0000</updated>
                            <resolved>Wed, 8 Aug 2012 21:30:58 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13203359" author="phabricator@reviews.facebook.net" created="Wed, 8 Feb 2012 08:17:57 +0000"  >&lt;p&gt;cwsteinbach requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2789&quot; title=&quot;query_properties.q contains non-deterministic queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2789&quot;&gt;&lt;del&gt;HIVE-2789&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; When integrating into MapReduce2, &apos;select * from src distribute by src.key limit 1&apos; returns non-deterministic result&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Fix nondeterminism in query_properties.q by limiting all result sets to 0 rows.&lt;/p&gt;

&lt;p&gt;  query_properties.q test failure:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: query_properties.q&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:13 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:13 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:18 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:18 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:22 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:22 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:27 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:27 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:32 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:32 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:36 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:36 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:41 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:41 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:46 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:46 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:50 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:50 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:55 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:55 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:59 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 16:59:59 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:04 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:04 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:08 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:08 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:13 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:13 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:18 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:18 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:22 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:22 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:27 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:27 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:31 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/23 17:00:31 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I LOCK_TIME: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I job_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt; -I USING &apos;java -cp /home/cloudera/Code/hive/build/ql/test/logs/clientpositive/query_properties.q.out /home/cloudera/Code/hive/ql/src/test/results/clientpositive/query_properties.q.out&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 91c91&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; 97	val_97&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; 238	val_238&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.Assert.fail(Assert.java:50)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_query_properties(TestCliDriver.java:227)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Cleaning up TestCliDriver&lt;/p&gt;

&lt;p&gt;  The query that produces the diff is:&lt;/p&gt;

&lt;p&gt;  SELECT * FROM SRC DISTRIBUTE BY src.key LIMIT 1&lt;/p&gt;

&lt;p&gt;  The query produces nondeterministic results without and ORDER BY clause.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1647&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1647&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/queries/clientpositive/query_properties.q&lt;br/&gt;
  ql/src/test/results/clientpositive/query_properties.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3507/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3507/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13212389" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 05:53:32 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2789&quot; title=&quot;query_properties.q contains non-deterministic queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2789&quot;&gt;&lt;del&gt;HIVE-2789&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; When integrating into MapReduce2, &apos;select * from src distribute by src.key limit 1&apos; returns non-deterministic result&quot;.&lt;/p&gt;

&lt;p&gt;  +1 will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1647&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1647&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2789&quot; title=&quot;query_properties.q contains non-deterministic queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2789&quot;&gt;&lt;del&gt;HIVE-2789&lt;/del&gt;&lt;/a&gt;-query-properties&lt;/p&gt;</comment>
                            <comment id="13212392" author="ashutoshc" created="Tue, 21 Feb 2012 05:55:12 +0000"  >&lt;p&gt;Carl,&lt;br/&gt;
Patch failed to apply cleanly for me. I have reviewed it. Looks good. Can you update the patch, test and commit?&lt;/p&gt;</comment>
                            <comment id="13212415" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 06:53:32 +0000"  >&lt;p&gt;cwsteinbach updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2789&quot; title=&quot;query_properties.q contains non-deterministic queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2789&quot;&gt;&lt;del&gt;HIVE-2789&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; When integrating into MapReduce2, &apos;select * from src distribute by src.key limit 1&apos; returns non-deterministic result&quot;.&lt;br/&gt;
Reviewers: JIRA, kevinwilfong, ashutoshc&lt;/p&gt;

&lt;p&gt;  Rebased patch on top of trunk.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1647&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1647&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/queries/clientpositive/query_properties.q&lt;br/&gt;
  ql/src/test/results/clientpositive/query_properties.q.out&lt;/p&gt;</comment>
                            <comment id="13216306" author="ashutoshc" created="Sat, 25 Feb 2012 04:46:29 +0000"  >&lt;p&gt;I still cant apply this patch cleanly either with arc or with patch command directly.&lt;/p&gt;</comment>
                            <comment id="13224340" author="ashutoshc" created="Wed, 7 Mar 2012 13:54:09 +0000"  >&lt;p&gt;Patch needs to be rebased.&lt;/p&gt;</comment>
                            <comment id="13397664" author="zhenxiao" created="Wed, 20 Jun 2012 17:36:58 +0000"  >&lt;p&gt;@Carl and Ashutosh:&lt;/p&gt;

&lt;p&gt;The same bug appears when running query_properties.q in Hive0.9.0 on MapReduce2. I just submitted a new patch for this bug.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13398303" author="cwsteinbach" created="Thu, 21 Jun 2012 09:00:09 +0000"  >&lt;p&gt;@Zhenxiao: Please submit a review request on reviews.apache.org. Thanks.&lt;/p&gt;</comment>
                            <comment id="13398608" author="zhenxiao" created="Thu, 21 Jun 2012 17:23:54 +0000"  >&lt;p&gt;@Carl: Patch submitted at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/5492/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/5492/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13429551" author="cwsteinbach" created="Mon, 6 Aug 2012 23:01:07 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13431411" author="cwsteinbach" created="Wed, 8 Aug 2012 21:30:58 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13547839" author="hudson" created="Wed, 9 Jan 2013 10:23:16 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2789&quot; title=&quot;query_properties.q contains non-deterministic queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2789&quot;&gt;&lt;del&gt;HIVE-2789&lt;/del&gt;&lt;/a&gt;. query_properties.q contains non-deterministic queries (Zhenxiao Luo via cws) (Revision 1370982)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1370982&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1370982&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/query_properties.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/query_properties.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550217" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:50 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12513774" name="ASF.LICENSE.NOT.GRANTED--HIVE-2789.D1647.1.patch" size="6003" author="phabricator@reviews.facebook.net" created="Wed, 8 Feb 2012 08:17:58 +0000"/>
                            <attachment id="12515329" name="ASF.LICENSE.NOT.GRANTED--HIVE-2789.D1647.2.patch" size="6003" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 06:53:33 +0000"/>
                            <attachment id="12532730" name="HIVE-2789.3.patch.txt" size="6417" author="zhenxiao" created="Wed, 20 Jun 2012 17:35:28 +0000"/>
                            <attachment id="12513776" name="HIVE-2789.D1647.1.patch" size="6003" author="cwsteinbach" created="Wed, 8 Feb 2012 08:19:43 +0000"/>
                            <attachment id="12515331" name="HIVE-2789.D1647.2.patch" size="6003" author="cwsteinbach" created="Tue, 21 Feb 2012 07:00:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2012 08:17:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02umn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2790] Grouping on constant expressions is broken on 0.23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2790</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Query result(-30.33) is missing in the running output:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: groupby_neg_float.q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/24 10:57:53 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/24 10:57:53 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/24 10:57:58 WARN conf.Configuration: mapred.system.dir is deprecated. Instead, use mapreduce.jobtracker.system.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 12/01/24 10:57:58 WARN conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;Oo&amp;#93;&lt;/span&gt;wner -I CreateTime -I LastAccessTime -I Location -I LOCATION &apos; -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I LOCK_TIME: -I grantTime -I &lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;* more -I job_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;_&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/b&gt; -I USING &apos;java -cp /home/cloudera/Code/hive/build/ql/test/logs/clientpositive/groupby_neg_float.q.out /home/cloudera/Code/hive/ql/src/test/results/clientpositive/groupby_neg_float.q.out&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 14c14,15&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; POSTHOOK: Output: &lt;a href=&quot;file:/tmp/cloudera/hive_2012-01-24_10-57-51_652_2049459353574360528/-mr-10000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-01-24_10-57-51_652_2049459353574360528/-mr-10000&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; POSTHOOK: Output: &lt;a href=&quot;file:/data/users/njain/hive5/hive5/build/ql/tmp/815331462/10000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/data/users/njain/hive5/hive5/build/ql/tmp/815331462/10000&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; -30.33&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 28c29,30&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;lt; POSTHOOK: Output: &lt;a href=&quot;file:/tmp/cloudera/hive_2012-01-24_10-57-56_909_7738265803221872068/-mr-10000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/cloudera/hive_2012-01-24_10-57-56_909_7738265803221872068/-mr-10000&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; POSTHOOK: Output: &lt;a href=&quot;file:/data/users/njain/hive5/hive5/build/ql/tmp/2082702070/10000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/data/users/njain/hive5/hive5/build/ql/tmp/2082702070/10000&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.Assert.fail(Assert.java:50)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_neg_float(TestCliDriver.java:129)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client execution results failed with error code = 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &amp;gt; -30.33&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; See build/ql/tmp/hive.log, or try &quot;ant test ... -Dtest.silent=false&quot; to get more logs.)&lt;/p&gt;

&lt;p&gt;When trying the following(GROUP BY on Floating Point type and string type):&lt;/p&gt;

&lt;p&gt;FROM src&lt;br/&gt;
SELECT -30.33&lt;br/&gt;
GROUP BY -30.33&lt;br/&gt;
LIMIT 1;&lt;/p&gt;

&lt;p&gt;FROM src&lt;br/&gt;
SELECT &apos;-30.33&apos;&lt;br/&gt;
GROUP BY &apos;-30.33&apos;&lt;br/&gt;
LIMIT 1;&lt;/p&gt;

&lt;p&gt;Get NULL in result&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541744">HIVE-2790</key>
            <summary>Grouping on constant expressions is broken on 0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 03:17:33 +0000</created>
                <updated>Fri, 15 Jun 2012 20:59:01 +0000</updated>
                            <resolved>Fri, 15 Jun 2012 20:59:01 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13249015" author="zhenxiao" created="Fri, 6 Apr 2012 22:44:09 +0000"  >&lt;p&gt;This failure won&apos;t reproduce on the current branch, probably due to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3952&quot; title=&quot;In MR2, when Total input paths to process == 1, CombinefileInputFormat.getSplits() returns 0 split.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3952&quot;&gt;&lt;del&gt;MAPREDUCE-3952&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13249016" author="zhenxiao" created="Fri, 6 Apr 2012 22:45:02 +0000"  >&lt;p&gt;This failure won&apos;t reproduce on the current branch, &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3952&quot; title=&quot;In MR2, when Total input paths to process == 1, CombinefileInputFormat.getSplits() returns 0 split.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3952&quot;&gt;&lt;del&gt;MAPREDUCE-3952&lt;/del&gt;&lt;/a&gt; get it fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227031</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2791] filter is still removed due to regression of HIVE-1538 althougth HIVE-2344</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2791</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12541746">HIVE-2791</key>
            <summary>filter is still removed due to regression of HIVE-1538 althougth HIVE-2344</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aoxiang">binlijin</assignee>
                                    <reporter username="aoxiang">binlijin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2012 04:46:16 +0000</created>
                <updated>Thu, 28 Jan 2016 00:25:52 +0000</updated>
                            <resolved>Tue, 21 Feb 2012 17:01:17 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13204173" author="ashutoshc" created="Thu, 9 Feb 2012 01:08:59 +0000"  >&lt;p&gt;Binlijin,&lt;br/&gt;
Is it ready for review? Mark Patch Available in that case. Also, reupload the patch granting the ASF perms.&lt;/p&gt;</comment>
                            <comment id="13212406" author="ashutoshc" created="Tue, 21 Feb 2012 06:35:59 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13212735" author="ashutoshc" created="Tue, 21 Feb 2012 17:01:18 +0000"  >&lt;p&gt;Committed to trunk. Thanks, binlijin!&lt;/p&gt;</comment>
                            <comment id="13212984" author="hudson" created="Tue, 21 Feb 2012 21:42:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1268 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1268/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1268/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2791&quot; title=&quot;filter is still removed due to regression of HIVE-1538 althougth HIVE-2344&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2791&quot;&gt;&lt;del&gt;HIVE-2791&lt;/del&gt;&lt;/a&gt;: filter is still removed due to regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1538&quot; title=&quot;FilterOperator is applied twice with ppd on.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1538&quot;&gt;&lt;del&gt;HIVE-1538&lt;/del&gt;&lt;/a&gt; althougth &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2344&quot; title=&quot;filter is removed due to regression of HIVE-1538&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2344&quot;&gt;&lt;del&gt;HIVE-2344&lt;/del&gt;&lt;/a&gt; (binlijin via hashutosh) (Revision 1291916)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291916&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291916&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ppd2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ppd2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265356" author="ashutoshc" created="Mon, 30 Apr 2012 21:12:00 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13506756" author="kamboj" created="Thu, 29 Nov 2012 20:22:27 +0000"  >&lt;p&gt;Hi guys,&lt;/p&gt;

&lt;p&gt;There is a use case I have attached: ppd-dropped-filter.q. The last 2 insert queries in the file contain following &apos;in&apos; predicates:&lt;br/&gt;
where t3.crit5 in (&apos;a&apos; , &apos;b&apos; ) and where t3.crit5 in (&apos;c&apos; , &apos;d&apos; , &apos;e&apos; )&lt;/p&gt;

&lt;p&gt;The explain output doesn&apos;t contain Filter Operators for these &apos;in&apos; predicates. This results in execution of incorrect query (without in clauses). &lt;/p&gt;

&lt;p&gt;The workaround is set hive.ppd.remove.duplicatefilters=false;&lt;/p&gt;

&lt;p&gt;Is this use case related to this patch?&lt;/p&gt;</comment>
                            <comment id="13547845" author="hudson" created="Wed, 9 Jan 2013 10:23:17 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2791&quot; title=&quot;filter is still removed due to regression of HIVE-1538 althougth HIVE-2344&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2791&quot;&gt;&lt;del&gt;HIVE-2791&lt;/del&gt;&lt;/a&gt;: filter is still removed due to regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1538&quot; title=&quot;FilterOperator is applied twice with ppd on.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1538&quot;&gt;&lt;del&gt;HIVE-1538&lt;/del&gt;&lt;/a&gt; althougth &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2344&quot; title=&quot;filter is removed due to regression of HIVE-1538&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2344&quot;&gt;&lt;del&gt;HIVE-2344&lt;/del&gt;&lt;/a&gt; (binlijin via hashutosh) (Revision 1291916)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291916&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291916&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ppd2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ppd2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12471503">HIVE-1538</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12625501">HIVE-3847</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513926" name="HIVE-2791.2.patch" size="23983" author="aoxiang" created="Thu, 9 Feb 2012 08:34:25 +0000"/>
                            <attachment id="12513762" name="HIVE-2791.patch" size="23983" author="aoxiang" created="Wed, 8 Feb 2012 05:05:42 +0000"/>
                            <attachment id="12555392" name="ppd-dropped-filter.q" size="1447" author="kamboj" created="Thu, 29 Nov 2012 20:09:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2012 01:08:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124145</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2792] SUBSTR(CAST(&lt;string&gt; AS BINARY)) produces unexpected results</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2792</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12541916">HIVE-2792</key>
            <summary>SUBSTR(CAST(&lt;string&gt; AS BINARY)) produces unexpected results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2012 02:25:34 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:18 +0000</updated>
                            <resolved>Tue, 21 Feb 2012 07:43:36 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.8.1</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13204200" author="cwsteinbach" created="Thu, 9 Feb 2012 02:29:08 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT
  value,
  SUBSTR(value, 4, 5),
  SUBSTR(CAST(value AS BINARY), 4, 5)
FROM src
ORDER BY value;
...
val_0	_0	039    &amp;lt;-- Third column of the first three rows should be the same, right?
val_0	_0	096    
val_0	_0	073
val_10	_10	105
val_100	_100	100
val_100	_100	100
val_103	_103	103
val_103	_103	103
val_104	_104	104
val_104	_104	104
val_105	_105	105
val_11	_11	116
val_111	_111	111
val_113	_113	113
val_113	_113	113
val_114	_114	114
val_116	_116	116
val_118	_118	118
val_118	_118	118
val_119	_119	119
val_119	_119	119
val_119	_119	119
val_12	_12	124
val_12	_12	124
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13211719" author="phabricator@reviews.facebook.net" created="Mon, 20 Feb 2012 08:41:38 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-848 SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_substr.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_substr.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3831/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3831/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13211720" author="phabricator@reviews.facebook.net" created="Mon, 20 Feb 2012 08:43:35 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;/p&gt;

&lt;p&gt;  For substr() for binary type..&lt;br/&gt;
  1. Fixed length problem (dummy values at the end)&lt;br/&gt;
  2. Changed to use 1-based index (like mysql)&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13212268" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 01:09:33 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;/p&gt;

&lt;p&gt;  Patch looks good. Can you update the testcase as I noted so that we have better coverage?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/results/clientpositive/ba_table_udfs.q.out:28 For a better test so that it captures variance in the rows, modify the test in ba_tables_udfs.q to SUBSTR(src.value AS BINARY), 3),&lt;br/&gt;
  SUBSTR(src.value AS BINARY), -4,3)&lt;/p&gt;




&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-848&lt;/p&gt;</comment>
                            <comment id="13212269" author="ashutoshc" created="Tue, 21 Feb 2012 01:10:20 +0000"  >&lt;p&gt;@Navis, Can you also please upload the updated patch directly on jira granting ASF perms?&lt;/p&gt;</comment>
                            <comment id="13212279" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 01:23:33 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;  added test cases requested&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_substr.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_substr.q.out&lt;/p&gt;</comment>
                            <comment id="13212296" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 02:19:32 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-848&lt;/p&gt;</comment>
                            <comment id="13212298" author="ashutoshc" created="Tue, 21 Feb 2012 02:19:47 +0000"  >&lt;p&gt;@Navis,&lt;br/&gt;
Can you please upload the patch on jira also granting ASF perms. On top of this page, click More Actions &amp;gt; Attach Files. Then after attaching your patch file, click on radio button granting ASF perms.&lt;/p&gt;</comment>
                            <comment id="13212426" author="ashutoshc" created="Tue, 21 Feb 2012 07:43:38 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13212572" author="hudson" created="Tue, 21 Feb 2012 13:22:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1267 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1267/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1267/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt;: SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results (navis via hashutosh) (Revision 1291633)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_substr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substr.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13212985" author="hudson" created="Tue, 21 Feb 2012 21:42:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1268 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1268/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1268/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt;: SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results (navis via hashutosh) (Revision 1291633)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_substr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substr.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265262" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:23 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547846" author="hudson" created="Wed, 9 Jan 2013 10:23:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt;: SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results (navis via hashutosh) (Revision 1291633)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_substr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substr.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12515227" name="ASF.LICENSE.NOT.GRANTED--HIVE-2792.D1797.1.patch" size="13401" author="phabricator@reviews.facebook.net" created="Mon, 20 Feb 2012 08:41:47 +0000"/>
                            <attachment id="12515298" name="ASF.LICENSE.NOT.GRANTED--HIVE-2792.D1797.2.patch" size="15695" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 01:23:34 +0000"/>
                            <attachment id="12515311" name="HIVE-2792.D1797.2.patch" size="15695" author="navis" created="Tue, 21 Feb 2012 02:26:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Feb 2012 08:41:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2793] Disable loadpart_err.q on 0.23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2793</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12541920">HIVE-2793</key>
            <summary>Disable loadpart_err.q on 0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cwsteinbach">Carl Steinbach</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2012 03:40:10 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:18 +0000</updated>
                            <resolved>Wed, 15 Feb 2012 02:03:04 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13204224" author="cwsteinbach" created="Thu, 9 Feb 2012 03:41:37 +0000"  >&lt;p&gt;This testcase was previously disabled for all Hadoop versions in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1491&quot; title=&quot;fix or disable loadpart_err.q&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1491&quot;&gt;&lt;del&gt;HIVE-1491&lt;/del&gt;&lt;/a&gt;. On 0.23 this test fails with the same error as the one produced on 0.20 (if enabled).&lt;/p&gt;</comment>
                            <comment id="13204230" author="phabricator@reviews.facebook.net" created="Thu, 9 Feb 2012 03:53:58 +0000"  >&lt;p&gt;cwsteinbach requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Disable loadpart_err.q on 0.23&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt;. Add 0.23 to list of excluded Hadoop versions for loadpart_err.q&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1665&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1665&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/queries/clientpositive/loadpart_err.q&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3555/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3555/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13207902" author="phabricator@reviews.facebook.net" created="Tue, 14 Feb 2012 18:52:00 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Disable loadpart_err.q on 0.23&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1665&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1665&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13208184" author="cwsteinbach" created="Wed, 15 Feb 2012 02:03:04 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13208494" author="hudson" created="Wed, 15 Feb 2012 14:17:57 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1259 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1259/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1259/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Disable loadpart_err.q on 0.23&lt;/p&gt;

&lt;p&gt;Summary: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt;. Add 0.23 to list of excluded Hadoop versions for&lt;br/&gt;
loadpart_err.q&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, jsichi, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;CC: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1665&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1665&lt;/a&gt; (Revision 1244311)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244311&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/loadpart_err.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13209170" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:53:07 +0000"  >&lt;p&gt;cwsteinbach has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Disable loadpart_err.q on 0.23&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by cws.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1665&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1665&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1244311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1244311&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13265344" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:58 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547847" author="hudson" created="Wed, 9 Jan 2013 10:23:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Disable loadpart_err.q on 0.23&lt;/p&gt;

&lt;p&gt;Summary: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2793&quot; title=&quot;Disable loadpart_err.q on 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2793&quot;&gt;&lt;del&gt;HIVE-2793&lt;/del&gt;&lt;/a&gt;. Add 0.23 to list of excluded Hadoop versions for&lt;br/&gt;
loadpart_err.q&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, jsichi, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;CC: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1665&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1665&lt;/a&gt; (Revision 1244311)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1244311&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/loadpart_err.q&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12513900" name="ASF.LICENSE.NOT.GRANTED--HIVE-2793.D1665.1.patch" size="566" author="phabricator@reviews.facebook.net" created="Thu, 9 Feb 2012 03:53:58 +0000"/>
                            <attachment id="12513901" name="HIVE-2793.D1665.1.patch" size="566" author="cwsteinbach" created="Thu, 9 Feb 2012 03:59:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2012 03:53:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227207</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lll3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2794] Aggregations without grouping should return NULL when applied to partitioning column of a partitionless table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2794</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12541930">HIVE-2794</key>
            <summary>Aggregations without grouping should return NULL when applied to partitioning column of a partitionless table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2012 06:02:03 +0000</created>
                <updated>Thu, 16 May 2013 21:10:48 +0000</updated>
                            <resolved>Sun, 9 Dec 2012 09:26:30 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13204295" author="cwsteinbach" created="Thu, 9 Feb 2012 06:04:50 +0000"  >&lt;p&gt;&quot;SELECT MAX(p) FROM empty&quot; should return NULL, but instead it returns an empty result set:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; CREATE TABLE empty (c INT) PARTITIONED BY (p INT);
hive&amp;gt; SELECT MAX(c) FROM empty;
NULL
hive&amp;gt; SELECT MAX(p) FROM empty;

hive&amp;gt; ALTER TABLE empty ADD PARTITION (p=1);
hive&amp;gt; SELECT MAX(p) FROM empty;
1
hive&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13480841" author="shreepadma" created="Sat, 20 Oct 2012 21:48:58 +0000"  >&lt;p&gt;SQL standard dictates that the return value should be NULL. However, HiveQL seems to deviate and return an empty result set for other aggregate functions as well. This needs to be fixed to achieve parity with the SQL standard.&lt;/p&gt;</comment>
                            <comment id="13527253" author="ashutoshc" created="Sat, 8 Dec 2012 20:33:21 +0000"  >&lt;p&gt;+1 will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13527380" author="ashutoshc" created="Sun, 9 Dec 2012 09:26:30 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13527571" author="hudson" created="Sun, 9 Dec 2012 18:39:51 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1845 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1845/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1845/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2794&quot; title=&quot;Aggregations without grouping should return NULL when applied to partitioning column of a partitionless table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2794&quot;&gt;&lt;del&gt;HIVE-2794&lt;/del&gt;&lt;/a&gt; : Aggregations without grouping should return NULL when applied to partitioning column of a partitionless table (Zhenxiao Luo via Ashutosh Chauhan) (Revision 1418848)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418848&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418848&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/partInit.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/metadataonly1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/partInit.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547848" author="hudson" created="Wed, 9 Jan 2013 10:23:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2794&quot; title=&quot;Aggregations without grouping should return NULL when applied to partitioning column of a partitionless table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2794&quot;&gt;&lt;del&gt;HIVE-2794&lt;/del&gt;&lt;/a&gt; : Aggregations without grouping should return NULL when applied to partitioning column of a partitionless table (Zhenxiao Luo via Ashutosh Chauhan) (Revision 1418848)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418848&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1418848&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/partInit.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/metadataonly1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/partInit.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12519664" name="HIVE-2794.1.patch.txt" size="3123" author="zhenxiao" created="Fri, 23 Mar 2012 17:19:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 20 Oct 2012 21:48:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0apqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2795] View partitions do not have a storage descriptor</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2795</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Besides being an inconsistency, it causes errors.&lt;/p&gt;

&lt;p&gt;Calling describe formatted on a view partition throws an exception&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
  at org.apache.hadoop.hive.ql.metadata.Partition.getCols(Partition.java:505)  &lt;br/&gt;
  at org.apache.hadoop.hive.ql.exec.DDLTask.describeTable(DDLTask.java:2570)&lt;/p&gt;

&lt;p&gt;because it does not have a column descriptor, which is part of the storage descriptor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542037">HIVE-2795</key>
            <summary>View partitions do not have a storage descriptor</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2012 22:10:04 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:18 +0000</updated>
                            <resolved>Fri, 10 Feb 2012 05:47:29 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13204983" author="phabricator@reviews.facebook.net" created="Thu, 9 Feb 2012 22:47:58 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; View partitions do not have a storage descriptor&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2795&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Updated the metastore so that if a partition is added to a view and the partition&apos;s StorageDescriptor is null it will use a copy of the table&apos;s StorageDescriptor.&lt;/p&gt;

&lt;p&gt;  Besides being an inconsistency, it causes errors.&lt;/p&gt;

&lt;p&gt;  Calling describe formatted on a view partition throws an exception&lt;/p&gt;

&lt;p&gt;  java.lang.NullPointerException&lt;br/&gt;
    at org.apache.hadoop.hive.ql.metadata.Partition.getCols(Partition.java:505)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.exec.DDLTask.describeTable(DDLTask.java:2570)&lt;/p&gt;

&lt;p&gt;  because it does not have a column descriptor, which is part of the storage descriptor.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3591/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3591/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13204991" author="phabricator@reviews.facebook.net" created="Thu, 9 Feb 2012 22:57:58 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; View partitions do not have a storage descriptor&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Added a test to verify calling describe formatted on a view partition succeeds.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/test/results/clientpositive/describe_formatted_view_partitioned.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/describe_formatted_view_partitioned.q&lt;/p&gt;</comment>
                            <comment id="13205038" author="phabricator@reviews.facebook.net" created="Thu, 9 Feb 2012 23:29:58 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; View partitions do not have a storage descriptor&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1683&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13205170" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 02:27:59 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; View partitions do not have a storage descriptor&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Included a Python script to go through the metastore and update all view partitions to have a Storage Descriptor.  It does so by dropping the partition and adding the partition.  As the only view partition data that can be modified is the name, no data will be lost by doing this.  Detailed instructions and warnings are included in the script.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/scripts/upgrade/001-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt;.update_view_partitions.py&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;br/&gt;
  ql/src/test/results/clientpositive/describe_formatted_view_partitioned.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/describe_formatted_view_partitioned.q&lt;/p&gt;</comment>
                            <comment id="13205256" author="namit" created="Fri, 10 Feb 2012 05:47:29 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13205354" author="hudson" created="Fri, 10 Feb 2012 10:50:44 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1252 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1252/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1252/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt; View partitions do not have a storage descriptor&lt;br/&gt;
(Kevin Wilfong via namit)&lt;/p&gt;

&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1242682&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1242682&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/001-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt;.update_view_partitions.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/describe_formatted_view_partitioned.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/describe_formatted_view_partitioned.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13258800" author="hudson" created="Sat, 21 Apr 2012 07:34:17 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1387 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1387/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1387/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2966&quot; title=&quot;Revert HIVE-2795&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2966&quot;&gt;&lt;del&gt;HIVE-2966&lt;/del&gt;&lt;/a&gt; :Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt;  (Thejas Nair via Ashutosh Chauhan) (Revision 1328568)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328568&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328568&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/001-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt;.update_view_partitions.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/formatting/MetaDataFormatUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/describe_formatted_view_partitioned_json.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/describe_formatted_view_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/describe_formatted_view_partitioned_json.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265311" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:40 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13494428" author="phabricator@reviews.facebook.net" created="Fri, 9 Nov 2012 23:37:11 +0000"  >&lt;p&gt;kevinwilfong has closed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; View partitions do not have a storage descriptor&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, kevinwilfong&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13547849" author="hudson" created="Wed, 9 Jan 2013 10:23:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2966&quot; title=&quot;Revert HIVE-2795&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2966&quot;&gt;&lt;del&gt;HIVE-2966&lt;/del&gt;&lt;/a&gt; :Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt;  (Thejas Nair via Ashutosh Chauhan) (Revision 1328568)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt; View partitions do not have a storage descriptor&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1242682)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328568&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328568&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/001-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt;.update_view_partitions.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/formatting/MetaDataFormatUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/describe_formatted_view_partitioned_json.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/describe_formatted_view_partitioned.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/describe_formatted_view_partitioned_json.q.out&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1242682&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1242682&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/001-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;del&gt;HIVE-2795&lt;/del&gt;&lt;/a&gt;.update_view_partitions.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/describe_formatted_view_partitioned.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/describe_formatted_view_partitioned.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12514030" name="ASF.LICENSE.NOT.GRANTED--HIVE-2795.D1683.1.patch" size="961" author="phabricator@reviews.facebook.net" created="Thu, 9 Feb 2012 22:47:59 +0000"/>
                            <attachment id="12514033" name="ASF.LICENSE.NOT.GRANTED--HIVE-2795.D1683.2.patch" size="4361" author="phabricator@reviews.facebook.net" created="Thu, 9 Feb 2012 22:57:59 +0000"/>
                            <attachment id="12514066" name="ASF.LICENSE.NOT.GRANTED--HIVE-2795.D1683.3.patch" size="10084" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 02:27:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2012 22:47:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iy73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>108634</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Requires upgrade of the metadata corresponding to partitioned views. Please see the comments in metastore/scripts/upgrade/001-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2795&quot; title=&quot;View partitions do not have a storage descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2795&quot;&gt;&lt;strike&gt;HIVE-2795&lt;/strike&gt;&lt;/a&gt;.update_view_partitions.py for more information.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2796] Support auto completion for hive configs in CliDriver</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2796</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It&apos;s very cumbersome to memorize hive conf vars.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542059">HIVE-2796</key>
            <summary>Support auto completion for hive configs in CliDriver</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis</assignee>
                                    <reporter username="navis">Navis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2012 01:25:05 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:03 +0000</updated>
                            <resolved>Fri, 15 Jun 2012 21:24:23 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13205136" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 01:27:58 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2796&quot; title=&quot;Support auto completion for hive configs in CliDriver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2796&quot;&gt;&lt;del&gt;HIVE-2796&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Support auto completion for hive configs in CliDriver&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-747 Support auto completion for hive configs in CliDriver&lt;/p&gt;

&lt;p&gt;  It&apos;s very cumbersome to memorize hive conf vars.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1689&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1689&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3603/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3603/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13205274" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 07:17:57 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2796&quot; title=&quot;Support auto completion for hive configs in CliDriver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2796&quot;&gt;&lt;del&gt;HIVE-2796&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Support auto completion for hive configs in CliDriver&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  1. Removed trailing space after completion&lt;br/&gt;
  2. Fix not showing s-started keywords&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1689&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1689&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/p&gt;</comment>
                            <comment id="13209037" author="ashutoshc" created="Thu, 16 Feb 2012 01:06:53 +0000"  >&lt;p&gt;If its ready for review, feel free to change status to &quot;Patch Available&quot;&lt;/p&gt;</comment>
                            <comment id="13258883" author="ashutoshc" created="Sat, 21 Apr 2012 16:36:37 +0000"  >&lt;p&gt;Unlinking from 0.9 &lt;/p&gt;</comment>
                            <comment id="13295933" author="ashutoshc" created="Fri, 15 Jun 2012 21:24:23 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13296100" author="hudson" created="Sat, 16 Jun 2012 04:13:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1490 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1490/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1490/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2796&quot; title=&quot;Support auto completion for hive configs in CliDriver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2796&quot;&gt;&lt;del&gt;HIVE-2796&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Support auto completion for hive configs in CliDriver&lt;br/&gt;
(Navis Ryu via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
DPAL-747 Support auto completion for hive configs in CliDriver&lt;/p&gt;

&lt;p&gt;It&apos;s very cumbersome to memorize hive conf vars.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1689&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1689&lt;/a&gt; (Revision 1350807)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1350807&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1350807&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13404183" author="kevinwilfong" created="Fri, 29 Jun 2012 20:33:25 +0000"  >&lt;p&gt;This is awesome, thanks Navis!&lt;/p&gt;</comment>
                            <comment id="13547852" author="hudson" created="Wed, 9 Jan 2013 10:23:19 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2796&quot; title=&quot;Support auto completion for hive configs in CliDriver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2796&quot;&gt;&lt;del&gt;HIVE-2796&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Support auto completion for hive configs in CliDriver&lt;br/&gt;
(Navis Ryu via Ashutosh Chauhan)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
DPAL-747 Support auto completion for hive configs in CliDriver&lt;/p&gt;

&lt;p&gt;It&apos;s very cumbersome to memorize hive conf vars.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;Reviewed By: ashutoshc&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1689&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1689&lt;/a&gt; (Revision 1350807)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1350807&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1350807&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550014" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:03 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12514056" name="ASF.LICENSE.NOT.GRANTED--HIVE-2796.D1689.1.patch" size="1759" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 01:27:59 +0000"/>
                            <attachment id="12514084" name="ASF.LICENSE.NOT.GRANTED--HIVE-2796.D1689.2.patch" size="2163" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 07:17:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2012 01:27:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227346</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ucf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2797] Make the IP address of a Thrift client available to HMSHandler.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2797</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, in unsecured mode, metastore Thrift calls are, from the HMSHandler&apos;s point of view, anonymous.  If we expose the IP address of the Thrift client to the HMSHandler from the Processor, this will help to give some context, in particular for audit logging, of where the call is coming from.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542177">HIVE-2797</key>
            <summary>Make the IP address of a Thrift client available to HMSHandler.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2012 19:19:14 +0000</created>
                <updated>Sun, 16 Mar 2014 03:38:30 +0000</updated>
                            <resolved>Sun, 25 Mar 2012 14:13:37 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13205668" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 19:24:57 +0000"  >&lt;p&gt;kevinwilfong requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Created a new subclass of ThriftHiveMetastore.Processor which passes the IP address to the HMSHandler.  Unsecure connections will use this processor.  The IP address is stored in a thread local variable, so that multiple connections will each maintain there own IP address.&lt;/p&gt;

&lt;p&gt;  Currently, in unsecured mode, metastore Thrift calls are, from the HMSHandler&apos;s point of view, anonymous.  If we expose the IP address of the Thrift client to the HMSHandler from the Processor, this will help to give some context, in particular for audit logging, of where the call is coming from.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3633/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3633/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13209026" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 00:48:59 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good. Mind, adding a test for it?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13223764" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 23:01:55 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Added a test case to check that the IP address is set for remote metastores.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/IpAddressListener.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;</comment>
                            <comment id="13223848" author="phabricator@reviews.facebook.net" created="Wed, 7 Mar 2012 00:11:57 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/IpAddressListener.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;</comment>
                            <comment id="13223850" author="phabricator@reviews.facebook.net" created="Wed, 7 Mar 2012 00:12:00 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Ran svn up and resolved conflicts.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/IpAddressListener.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;</comment>
                            <comment id="13230794" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 01:02:35 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;/p&gt;

&lt;p&gt;  Thanks for adding test-case, Kevin.&lt;br/&gt;
  +1 will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13231249" author="phabricator@reviews.facebook.net" created="Fri, 16 Mar 2012 14:47:36 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;/p&gt;

&lt;p&gt;  I saw multiple failures in metastore tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13233895" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 22:41:38 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;br/&gt;
Reviewers: JIRA, njain, ashutoshc&lt;/p&gt;

&lt;p&gt;  Really sorry about that Ashutosh.  The TUGIContainingTranspport does not extend TSocket, which caused the errors you saw.  I added a getSocket method to the class which returns the Socket object if the underlying TTransport is an instance of TSocket, otherwise null.  TUGIBasedProcessor&apos;s implementation of setIpAddress now uses this method and handles the case of null.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteUGIHiveMetaStoreIpAddress.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/IpAddressListener.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;</comment>
                            <comment id="13233897" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 22:43:35 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;/p&gt;

&lt;p&gt;  I added a test case which verifies that the IP address is accessible when the setugi config variable is true.&lt;/p&gt;

&lt;p&gt;  In addition I ran the entire test suite, TestHiveServerSessions timed out, but that seems to be an unrelated issue as it does the same on a fresh checkout.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13233950" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 23:42:34 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;/p&gt;

&lt;p&gt;  No worries, Kevin. Thanks, for making changes.&lt;br/&gt;
  +1 Feel free to commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13235638" author="ashutoshc" created="Thu, 22 Mar 2012 15:27:46 +0000"  >&lt;p&gt;Patch doesn&apos;t  apply cleanly. Needs a rebase.&lt;/p&gt;</comment>
                            <comment id="13235692" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 16:33:24 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make the IP address of a Thrift client available to HMSHandler.&quot;.&lt;br/&gt;
Reviewers: JIRA, njain, ashutoshc&lt;/p&gt;

&lt;p&gt;  Ran updated my checkout.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1701&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteUGIHiveMetaStoreIpAddress.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/IpAddressListener.java&lt;br/&gt;
  metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;br/&gt;
  metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/p&gt;</comment>
                            <comment id="13235864" author="ashutoshc" created="Thu, 22 Mar 2012 18:39:36 +0000"  >&lt;p&gt;Latest patch fails to apply with following in shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java.rej&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;***************
*** 71,74 ****
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; transMap.get(trans);
      }
    }
- }
--- 85,88 ----
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; transMap.get(trans);
      }
    }
+ }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13237754" author="kevinwilfong" created="Sun, 25 Mar 2012 00:58:59 +0000"  >&lt;p&gt;Looks like something my editor must have done automatically, something about adding or removing a new line at the end of files. Anyway, I removed those lines from the patch manually (I hadn&apos;t intended to change that line anyway).  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt;.7.patch contains this, and I tried applying it to a fresh checkout and did not get that error.&lt;/p&gt;</comment>
                            <comment id="13237871" author="ashutoshc" created="Sun, 25 Mar 2012 14:13:37 +0000"  >&lt;p&gt;Thanks, Kevin for updating the patch. Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13237952" author="hudson" created="Sun, 25 Mar 2012 19:26:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1332 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1332/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1332/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt;: Make the IP address of a Thrift client available to HMSHandler. (Kevin Wilfong via Ashutosh Chauhan) (Revision 1305041)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305041&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305041&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/IpAddressListener.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteUGIHiveMetaStoreIpAddress.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265360" author="ashutoshc" created="Mon, 30 Apr 2012 21:12:00 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547865" author="hudson" created="Wed, 9 Jan 2013 10:23:22 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2797&quot; title=&quot;Make the IP address of a Thrift client available to HMSHandler.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2797&quot;&gt;&lt;del&gt;HIVE-2797&lt;/del&gt;&lt;/a&gt;: Make the IP address of a Thrift client available to HMSHandler. (Kevin Wilfong via Ashutosh Chauhan) (Revision 1305041)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305041&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305041&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TSetIpAddressProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/TUGIBasedProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/IpAddressListener.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStoreIpAddress.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteUGIHiveMetaStoreIpAddress.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/thrift/TUGIContainingTransport.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12497525">HIVE-1948</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12514145" name="ASF.LICENSE.NOT.GRANTED--HIVE-2797.D1701.1.patch" size="5332" author="phabricator@reviews.facebook.net" created="Fri, 10 Feb 2012 19:24:58 +0000"/>
                            <attachment id="12517330" name="ASF.LICENSE.NOT.GRANTED--HIVE-2797.D1701.2.patch" size="12872" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 23:01:56 +0000"/>
                            <attachment id="12517339" name="ASF.LICENSE.NOT.GRANTED--HIVE-2797.D1701.3.patch" size="12950" author="phabricator@reviews.facebook.net" created="Wed, 7 Mar 2012 00:11:58 +0000"/>
                            <attachment id="12517340" name="ASF.LICENSE.NOT.GRANTED--HIVE-2797.D1701.4.patch" size="12799" author="phabricator@reviews.facebook.net" created="Wed, 7 Mar 2012 00:12:01 +0000"/>
                            <attachment id="12519142" name="ASF.LICENSE.NOT.GRANTED--HIVE-2797.D1701.5.patch" size="15628" author="phabricator@reviews.facebook.net" created="Tue, 20 Mar 2012 22:41:40 +0000"/>
                            <attachment id="12519457" name="ASF.LICENSE.NOT.GRANTED--HIVE-2797.D1701.6.patch" size="15628" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 16:33:27 +0000"/>
                            <attachment id="12519836" name="HIVE-2797.7.patch" size="16060" author="kevinwilfong" created="Sun, 25 Mar 2012 00:56:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2012 19:24:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lllj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2798] add an option to change the primary region for a table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2798</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This should error out if any of the partitions are not present in the primary region&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542182">HIVE-2798</key>
            <summary>add an option to change the primary region for a table</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2012 19:59:19 +0000</created>
                <updated>Thu, 19 Jul 2012 05:17:37 +0000</updated>
                            <resolved>Thu, 19 Jul 2012 05:17:37 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13418078" author="namit" created="Thu, 19 Jul 2012 05:17:37 +0000"  >&lt;p&gt;This is not needed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227469</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lllr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2799] change the following thrift apis to add a region</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2799</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt; list&amp;lt;string&amp;gt; get_tables(1: string db_name, 2: string pattern) throws (1: MetaException o1)&lt;br/&gt;
  list&amp;lt;string&amp;gt; get_all_tables(1: string db_name) throws (1: MetaException o1)&lt;br/&gt;
  Table get_table(1:string dbname, 2:string tbl_name)&lt;br/&gt;
                       throws (1:MetaException o1, 2:NoSuchObjectException o2)&lt;br/&gt;
  list&amp;lt;Table&amp;gt; get_table_objects_by_name(1:string dbname, 2:list&amp;lt;string&amp;gt; tbl_names)&lt;br/&gt;
           throws (1:MetaException o1, 2:InvalidOperationException o2, 3:UnknownDBException o3)&lt;br/&gt;
  list&amp;lt;string&amp;gt; get_table_names_by_filter(1:string dbname, 2:string filter, 3:i16 max_tables=-1)&lt;br/&gt;
                       throws (1:MetaException o1, 2:InvalidOperationException o2, 3:UnknownDBException o3)&lt;br/&gt;
  Partition add_partition(1:Partition new_part)&lt;br/&gt;
                       throws(1:InvalidObjectException o1, 2:AlreadyExistsException o2, 3:MetaException o3)&lt;br/&gt;
  i32 add_partitions(1:list&amp;lt;Partition&amp;gt; new_parts)&lt;br/&gt;
                       throws(1:InvalidObjectException o1, 2:AlreadyExistsException o2, 3:MetaException o3)&lt;br/&gt;
  Partition append_partition(1:string db_name, 2:string tbl_name, 3:list&amp;lt;string&amp;gt; part_vals)&lt;br/&gt;
                       throws (1:InvalidObjectException o1, 2:AlreadyExistsException o2, 3:MetaException o3)&lt;br/&gt;
  Partition append_partition_by_name(1:string db_name, 2:string tbl_name, 3:string part_name)&lt;br/&gt;
                       throws (1:InvalidObjectException o1, 2:AlreadyExistsException o2, 3:MetaException o3)&lt;br/&gt;
  bool drop_partition(1:string db_name, 2:string tbl_name, 3:list&amp;lt;string&amp;gt; part_vals, 4:bool deleteData)&lt;br/&gt;
                       throws(1:NoSuchObjectException o1, 2:MetaException o2)&lt;br/&gt;
  bool drop_partition_by_name(1:string db_name, 2:string tbl_name, 3:string part_name, 4:bool deleteData)&lt;br/&gt;
                       throws(1:NoSuchObjectException o1, 2:MetaException o2)&lt;br/&gt;
  Partition get_partition(1:string db_name, 2:string tbl_name, 3:list&amp;lt;string&amp;gt; part_vals)&lt;br/&gt;
                       throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;/p&gt;

&lt;p&gt;  Partition get_partition_with_auth(1:string db_name, 2:string tbl_name, 3:list&amp;lt;string&amp;gt; part_vals,&lt;br/&gt;
      4: string user_name, 5: list&amp;lt;string&amp;gt; group_names) throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;/p&gt;

&lt;p&gt;  Partition get_partition_by_name(1:string db_name 2:string tbl_name, 3:string part_name)&lt;br/&gt;
                       throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;br/&gt;
  list&amp;lt;Partition&amp;gt; get_partitions(1:string db_name, 2:string tbl_name, 3:i16 max_parts=-1)&lt;br/&gt;
                       throws(1:NoSuchObjectException o1, 2:MetaException o2)&lt;br/&gt;
  list&amp;lt;Partition&amp;gt; get_partitions_with_auth(1:string db_name, 2:string tbl_name, 3:i16 max_parts=-1,&lt;br/&gt;
     4: string user_name, 5: list&amp;lt;string&amp;gt; group_names) throws(1:NoSuchObjectException o1, 2:MetaException o2)&lt;/p&gt;

&lt;p&gt;  list&amp;lt;string&amp;gt; get_partition_names(1:string db_name, 2:string tbl_name, 3:i16 max_parts=-1)&lt;br/&gt;
                       throws(1:MetaException o2)&lt;br/&gt;
  list&amp;lt;Partition&amp;gt; get_partitions_ps(1:string db_name 2:string tbl_name&lt;br/&gt;
    3:list&amp;lt;string&amp;gt; part_vals, 4:i16 max_parts=-1)&lt;br/&gt;
                       throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;br/&gt;
  list&amp;lt;Partition&amp;gt; get_partitions_ps_with_auth(1:string db_name, 2:string tbl_name, 3:list&amp;lt;string&amp;gt; part_vals, 4:i16 max_parts=-1,&lt;br/&gt;
     5: string user_name, 6: list&amp;lt;string&amp;gt; group_names) throws(1:NoSuchObjectException o1, 2:MetaException o2)&lt;/p&gt;

&lt;p&gt;  list&amp;lt;string&amp;gt; get_partition_names_ps(1:string db_name,&lt;br/&gt;
    2:string tbl_name, 3:list&amp;lt;string&amp;gt; part_vals, 4:i16 max_parts=-1)&lt;br/&gt;
                       throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;br/&gt;
  list&amp;lt;Partition&amp;gt; get_partitions_by_filter(1:string db_name 2:string tbl_name&lt;br/&gt;
    3:string filter, 4:i16 max_parts=-1)&lt;br/&gt;
                       throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;br/&gt;
  list&amp;lt;Partition&amp;gt; get_partitions_by_names(1:string db_name 2:string tbl_name 3:list&amp;lt;string&amp;gt; names)&lt;br/&gt;
                       throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;br/&gt;
  bool drop_index_by_name(1:string db_name, 2:string tbl_name, 3:string index_name, 4:bool deleteData)&lt;br/&gt;
                       throws(1:NoSuchObjectException o1, 2:MetaException o2)&lt;br/&gt;
  Index get_index_by_name(1:string db_name 2:string tbl_name, 3:string index_name)&lt;br/&gt;
                       throws(1:MetaException o1, 2:NoSuchObjectException o2)&lt;/p&gt;

&lt;p&gt;  list&amp;lt;Index&amp;gt; get_indexes(1:string db_name, 2:string tbl_name, 3:i16 max_indexes=-1)&lt;br/&gt;
                       throws(1:NoSuchObjectException o1, 2:MetaException o2)&lt;br/&gt;
  list&amp;lt;string&amp;gt; get_index_names(1:string db_name, 2:string tbl_name, 3:i16 max_indexes=-1)&lt;br/&gt;
                       throws(1:MetaException o2)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542184">HIVE-2799</key>
            <summary>change the following thrift apis to add a region</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2012 20:13:11 +0000</created>
                <updated>Fri, 20 Jul 2012 20:51:04 +0000</updated>
                            <resolved>Fri, 20 Jul 2012 20:51:04 +0000</resolved>
                                                                    <component>Metastore</component>
                    <component>Thrift API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13207033" author="kevinwilfong" created="Mon, 13 Feb 2012 18:20:24 +0000"  >&lt;p&gt;Adding the following to the list to be changed.&lt;/p&gt;

&lt;p&gt;void create_table(1:Table tbl) throws(1:AlreadyExistsException o1, 2:InvalidObjectException o2, 3:MetaException o3, 4:NoSuchObjectException o4)&lt;br/&gt;
void drop_table(1:string dbname, 2:string name, 3:bool deleteData)&lt;br/&gt;
                       throws(1:NoSuchObjectException o1, 2:MetaException o3)&lt;br/&gt;
Index add_index(1:Index new_index, 2: Table index_table)&lt;br/&gt;
                       throws(1:InvalidObjectException o1, 2:AlreadyExistsException o2, 3:MetaException o3)&lt;/p&gt;</comment>
                            <comment id="13207134" author="ashutoshc" created="Mon, 13 Feb 2012 19:48:29 +0000"  >&lt;p&gt;I assume all of these apis will be backward compatible because thrift rpc will take care of it. Namit/Kevin can you please confirm?&lt;/p&gt;</comment>
                            <comment id="13207144" author="kevinwilfong" created="Mon, 13 Feb 2012 19:54:49 +0000"  >&lt;p&gt;I will leave the current API&apos;s unchanged, I intend to add additional APIs, like create_table_using_region, which will allow the user to provide a region name in addition to all normal arguments.&lt;/p&gt;</comment>
                            <comment id="13207193" author="cwsteinbach" created="Mon, 13 Feb 2012 20:54:37 +0000"  >&lt;p&gt;I recommend adding methods that take a single &quot;request&quot; object as input, e.g:&lt;/p&gt;

&lt;p&gt;void create_table(1: CreateTableReq req) throws (1:AlreadyExistsException o1, 2:InvalidObjectException o2, 3:MetaException o3, 4:NoSuchObjectException o4)&lt;/p&gt;

&lt;p&gt;My understanding of Thrift is that new properties can be added to the CreateTableReq object without breaking backwards compatibility.&lt;/p&gt;</comment>
                            <comment id="13207206" author="kevinwilfong" created="Mon, 13 Feb 2012 21:08:51 +0000"  >&lt;p&gt;Thanks, Carl, that sounds like a good idea.&lt;/p&gt;

&lt;p&gt;Unfortunately, Thrift doesn&apos;t support method overloading so I&apos;ll still have to create new methods with new names to provide backwards compatibility.  This should make it easier to make changes like this in the future though.&lt;/p&gt;</comment>
                            <comment id="13208945" author="ashutoshc" created="Wed, 15 Feb 2012 23:18:26 +0000"  >&lt;p&gt;My understanding of thrift is limited. But, AFAIK you can add new params into existing thrift api and they will still be backward compatible. Is that not the case? Or, is there any other reason that you want to add a whole new set of parallel apis?&lt;/p&gt;</comment>
                            <comment id="13208972" author="kevinwilfong" created="Wed, 15 Feb 2012 23:37:07 +0000"  >&lt;p&gt;I was under the impression that that&apos;s true in the sense that, if you are using an old client which thinks a method takes 1 parameter and the server is running new code which thinks that method takes 2 parameters it will still work.  However, once you upgrade your client to use new code, you will always have to provide 2 parameters, at least if the client is in Java, I&apos;m not sure if this applies to all languages Thrift supports.&lt;/p&gt;

&lt;p&gt;I wanted to makes sure that this would not break code that uses the current Thrift APIs, even after the clients are upgraded.&lt;/p&gt;</comment>
                            <comment id="13208988" author="ashutoshc" created="Wed, 15 Feb 2012 23:58:13 +0000"  >&lt;p&gt;In case client is upgraded but server is not, my impression is that extra param passed on by client is automatically dropped by rpc before making a call on server side. So, that will still work. &lt;/p&gt;</comment>
                            <comment id="13208997" author="kevinwilfong" created="Thu, 16 Feb 2012 00:05:47 +0000"  >&lt;p&gt;@Ashutosh&lt;/p&gt;

&lt;p&gt;I agree, that will work as well.  I meant I wanted to make sure I don&apos;t force people who don&apos;t want to use multi-region to have to add a region to their Thrift API calls, once both the server and client are upgraded.&lt;/p&gt;</comment>
                            <comment id="13209013" author="ashutoshc" created="Thu, 16 Feb 2012 00:25:46 +0000"  >&lt;p&gt;For that we can modify HiveMetaStoreClient.java (the most widely used client) to wrap these methods in the one which don&apos;t take region as an argument (which is the current api) and then passing null for server param through rpc client. Those folks who are using real rpc clients their clients will continue to work without recompilation and if they are indeed recompiling they can pass on a null in there. &lt;/p&gt;

&lt;p&gt;At this point, I think we should reconsider whether we want to add a new set of apis or want to modify the existing ones. To me, latter seems a better choice to avoid code duplication and confusion.&lt;/p&gt;</comment>
                            <comment id="13209016" author="kevinwilfong" created="Thu, 16 Feb 2012 00:32:23 +0000"  >&lt;p&gt;I&apos;m definitely in favor of that approach.  The primary reason I intended to add duplicate Thrift API calls was to keep open source users happy, but if people are content with simply wrapping them in HiveMetaStoreClient, I am more than happy to oblige.&lt;/p&gt;</comment>
                            <comment id="13209485" author="ashutoshc" created="Thu, 16 Feb 2012 16:37:18 +0000"  >&lt;p&gt;As a developer of Hive, I am definitely in favor of keeping code simpler and interfaces cleaner. As an open source user, I am fine with wrapping the new calls in existing apis.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Feb 2012 18:20:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227471</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lllz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124151</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2800] NPE in &quot;create index&quot; without comment clause in external metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2800</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This happens only when using external metastore (with --hiveconf hive.metastore.uris=thrift://localhost:8088 --hiveconf hive.metastore.local=false). Also if I gave a comment in the statement, this exception go away.&lt;/p&gt;

&lt;p&gt;Here is the statement:&lt;br/&gt;
create index test111 on table hcat_test(name) as &apos;compact&apos; with deferred rebuild;&lt;/p&gt;

&lt;p&gt;Here is the stack:&lt;br/&gt;
2012-02-10 17:07:42,612 ERROR exec.Task (SessionState.java:printError(380)) - FAILED: Error in metadata: java.lang.NullPointerException&lt;br/&gt;
org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.hive.ql.metadata.Hive.createIndex(Hive.java:725)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.DDLTask.createIndex(DDLTask.java:822)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:231)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1291)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1082)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:933)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:255)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.thrift.protocol.TBinaryProtocol.writeString(TBinaryProtocol.java:185)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.api.Index.write(Index.java:1032)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$add_index_args.write(ThriftHiveMetastore.java:47518)&lt;br/&gt;
        at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:63)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.send_add_index(ThriftHiveMetastore.java:1675)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.add_index(ThriftHiveMetastore.java:1666)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createIndex(HiveMetaStoreClient.java:853)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.metadata.Hive.createIndex(Hive.java:722)&lt;br/&gt;
        ... 17 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542211">HIVE-2800</key>
            <summary>NPE in &quot;create index&quot; without comment clause in external metastore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sushanth">Sushanth Sowmyan</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Feb 2012 01:17:40 +0000</created>
                <updated>Thu, 10 Jan 2013 19:54:09 +0000</updated>
                            <resolved>Fri, 23 Nov 2012 05:01:14 +0000</resolved>
                                    <version>0.7.1</version>
                    <version>0.8.1</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13280054" author="bejoyks" created="Mon, 21 May 2012 09:31:37 +0000"  >&lt;p&gt;The same bug is found on hive 0.7.1 as well&lt;/p&gt;</comment>
                            <comment id="13290537" author="sushanth" created="Wed, 6 Jun 2012 22:43:55 +0000"  >&lt;p&gt;This seems to be because the we don&apos;t check if the comment is null before we add it. Then, later, when we&apos;re trying to write out using thrift, thrift throws the NPE when it tries to read from parameters and tries to write out as-is. The following fixes this error:&lt;/p&gt;


&lt;p&gt;&amp;#8212; ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java	(revision 1347150)&lt;br/&gt;
+++ ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java	(working copy)&lt;br/&gt;
@@ -709,7 +709,10 @@&lt;/p&gt;

&lt;p&gt;       Index indexDesc = new Index(indexName, indexHandlerClass, dbName, tableName, time, time, indexTblName,&lt;br/&gt;
           storageDescriptor, params, deferredRebuild);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;indexDesc.getParameters().put(&quot;comment&quot;, indexComment);&lt;br/&gt;
+      if (indexComment != null)&lt;br/&gt;
+      
{
+        indexDesc.getParameters().put(&quot;comment&quot;, indexComment);
+      }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       if (idxProps != null)&lt;br/&gt;
       {&lt;/p&gt;</comment>
                            <comment id="13290575" author="sushanth" created="Wed, 6 Jun 2012 23:18:23 +0000"  >&lt;p&gt;Sample code that demonstrates bug:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;drop table &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exists missing_ddl_3;
drop index &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exists missing_ddl_3_index on missing_ddl_3;
create table missing_ddl_3(name string, age &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, gpa &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;);
insert overwrite table missing_ddl_3 select name, age, gpa from studenttab10k;
create index missing_ddl_3_index on table missing_ddl_3(name) as &lt;span class=&quot;code-quote&quot;&gt;&apos;COMPACT&apos;&lt;/span&gt; WITH DEFERRED REBUILD;
alter index missing_ddl_3_index on missing_ddl_3 rebuild;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will fail at the create index time itself(ignoring the rebuild).&lt;/p&gt;</comment>
                            <comment id="13291088" author="ashutoshc" created="Thu, 7 Jun 2012 16:02:33 +0000"  >&lt;p&gt;@Sushanth,&lt;br/&gt;
Reason it happens only in thrift client-server mode and your suggested fix of null-checking strongly hints to me that thrift layer is not able to handle nulls very well. This is  kind of surprise to me as I thought thrift can handle nulls. I think there is a value in figuring out if this really is the case and file a bug with thrift project since it looks like this may bite us again in future.&lt;/p&gt;</comment>
                            <comment id="13291334" author="sushanth" created="Thu, 7 Jun 2012 21:41:37 +0000"  >&lt;p&gt;Ashutosh, digging a bit more into thrift sources, this is what I find:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/thrift/trunk/lib/java/src/org/apache/thrift/protocol/TBinaryProtocol.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/thrift/trunk/lib/java/src/org/apache/thrift/protocol/TBinaryProtocol.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you look at the method writeString there, it does not check for null, it calls str.getBytes(). So as of thrift trunk, this does not work. I&apos;m not sure if that&apos;s intentional on thrift&apos;s part (to maximize speed by minimizing checks) and something to fix on hive&apos;s side, or something to fix on thrift&apos;s side.&lt;/p&gt;

&lt;p&gt;In the meanwhile, I&apos;ve added a testcase for this bug in the RemoteHiveMetaStore, I&apos;m updating the patch now.&lt;/p&gt;</comment>
                            <comment id="13291347" author="sushanth" created="Thu, 7 Jun 2012 21:51:00 +0000"  >&lt;p&gt;Hmm, actually, the problem does go deeper than that. We&apos;d have the same issue if a user were to set one of the parameter values as null. We&apos;d fix this issue by this patch, but only to hit it again with other user code.&lt;/p&gt;</comment>
                            <comment id="13291355" author="ashutoshc" created="Thu, 7 Jun 2012 21:56:05 +0000"  >&lt;p&gt;Thanks, Sushanth for digging in. I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1625&quot; title=&quot;Null handling in TBinaryProtocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1625&quot;&gt;&lt;del&gt;THRIFT-1625&lt;/del&gt;&lt;/a&gt; to get response from thrift devs. Thats what my worry is if thrift can&apos;t handle nulls cleanly then we have to litter our codebase with null-checks everywhere.&lt;/p&gt;</comment>
                            <comment id="13291357" author="ashutoshc" created="Thu, 7 Jun 2012 21:57:11 +0000"  >&lt;p&gt;Linking with thrift issue.&lt;/p&gt;</comment>
                            <comment id="13291385" author="sushanth" created="Thu, 7 Jun 2012 22:30:13 +0000"  >&lt;p&gt;This thread makes for interesting reading, and refers to the same issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mail-archive.com/thrift-dev@incubator.apache.org/msg01185.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.mail-archive.com/thrift-dev@incubator.apache.org/msg01185.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13503020" author="ashutoshc" created="Fri, 23 Nov 2012 05:01:14 +0000"  >&lt;p&gt;Fixed as a part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3722&quot; title=&quot;Create index fails on CLI using remote metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3722&quot;&gt;&lt;del&gt;HIVE-3722&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13506120" author="phabricator@reviews.facebook.net" created="Thu, 29 Nov 2012 01:24:57 +0000"  >&lt;p&gt;khorgath has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2800&quot; title=&quot;NPE in &amp;quot;create index&amp;quot; without comment clause in external metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2800&quot;&gt;&lt;del&gt;HIVE-2800&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; NPE in &quot;create index&quot; without comment clause in external metastore&quot;.&lt;/p&gt;

&lt;p&gt;  Same change implemented by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3722&quot; title=&quot;Create index fails on CLI using remote metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3722&quot;&gt;&lt;del&gt;HIVE-3722&lt;/del&gt;&lt;/a&gt;, redundant now.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3519&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3519&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, khorgath&lt;/p&gt;</comment>
                            <comment id="13550297" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:09 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12559759">THRIFT-1625</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 May 2012 09:31:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124152</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2801] When join key is null, random distribute this tuple</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2801</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12542235">HIVE-2801</key>
            <summary>When join key is null, random distribute this tuple</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aoxiang">binlijin</assignee>
                                    <reporter username="aoxiang">binlijin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Feb 2012 13:23:28 +0000</created>
                <updated>Tue, 24 Apr 2012 02:57:11 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13208953" author="ashutoshc" created="Wed, 15 Feb 2012 23:25:30 +0000"  >&lt;p&gt;I didn&apos;t get the context. Can you expand a bit more? Better still, you can add a testcase which illustrate the &quot;fix&quot; for the problem.&lt;/p&gt;</comment>
                            <comment id="13244280" author="namit" created="Mon, 2 Apr 2012 15:55:38 +0000"  >&lt;p&gt;Please make it &apos;Patch Available&apos; after addresssing Ashutosh&apos;s concerns&lt;/p&gt;</comment>
                            <comment id="13260166" author="aoxiang" created="Tue, 24 Apr 2012 02:53:56 +0000"  >&lt;p&gt;If one table&apos;s join key have many null key, in reduce the data is skew. so if we random distribute the null key will sovle the skew problem.&lt;/p&gt;</comment>
                            <comment id="13260169" author="aoxiang" created="Tue, 24 Apr 2012 02:57:11 +0000"  >&lt;p&gt;All records who&apos;s join key is null will go to the same reduce.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12514213" name="HIVE-2801.patch" size="17800" author="aoxiang" created="Sat, 11 Feb 2012 13:24:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Feb 2012 23:25:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227522</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08o2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2802] When writing output files, OUTPUTFORMAT does not take effect.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2802</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I want to query the input text and store the result as other format such as sequence file.&lt;/p&gt;

&lt;p&gt;For example:&lt;br/&gt;
CREATE TABLE pokes (foo INT, bar STRING) STORED AS INPUTFORMAT &apos;org.apache.hadoop.mapred.TextInputFormat&apos; OUTPUTFORMAT &apos;org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat&apos;;&lt;br/&gt;
LOAD DATA LOCAL INPATH &apos;./examples/files/kv1.txt&apos; OVERWRITE INTO TABLE pokes; &lt;br/&gt;
INSERT OVERWRITE DIRECTORY &apos;/tmp/pokes_out&apos; select * from pokes;&lt;/p&gt;

&lt;p&gt;Result file in /tmp/pokes_out is in Text Format not HiveSequenceFileOutputFormat.&lt;br/&gt;
I dig into the source code, and it seems there is a property &quot;hive.query.result.fileformat&quot; that cause the result to be in text format.&lt;br/&gt;
Is it a bug and how to achieve my purpose?&lt;/p&gt;</description>
                <environment>&lt;p&gt;hadoop-0.20.203&lt;/p&gt;</environment>
        <key id="12542240">HIVE-2802</key>
            <summary>When writing output files, OUTPUTFORMAT does not take effect.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gengyifeng">Yifeng Geng</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Feb 2012 15:02:03 +0000</created>
                <updated>Sat, 11 Feb 2012 15:02:03 +0000</updated>
                                            <version>0.7.1</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227527</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124153</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-2803] utc_from_timestamp and utc_to_timestamp returns incorrect results.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2803</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ echo &quot;2011-12-25 09:00:00.123456&quot; &amp;gt; /tmp/data5.txt
hive&amp;gt; create table ts1(t1 timestamp);
hive&amp;gt; load data local inpath &apos;/tmp/data5.txt&apos; overwrite into table ts1;
hive&amp;gt; select t1, from_utc_timestamp(t1, &apos;JST&apos;), from_utc_timestamp(t1, &apos;JST&apos;) from ts1 limit 1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following result is expected:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 2011-12-25 09:00:00.123456      2011-12-25 18:00:00.123456      2011-12-25 18:00:00.123456
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, the above query return incorrect result like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 2011-12-26 03:00:00.492456      2011-12-26 03:00:00.492456      2011-12-26 03:00:00.492456
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because GenericUDFFromUtcTimestamp.applyOffset() does setTime() improperly.&lt;br/&gt;
On evaluating query, timestamp argument always returns the same instance.&lt;br/&gt;
GenericUDFFromUtcTimestamp.applyOffset() does setTime() on the instance.&lt;br/&gt;
That means it adds all offsets in the query.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542283">HIVE-2803</key>
            <summary>utc_from_timestamp and utc_to_timestamp returns incorrect results.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tamtam180">tamtam180</assignee>
                                    <reporter username="tamtam180">tamtam180</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Feb 2012 11:50:03 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:06 +0000</updated>
                            <resolved>Mon, 23 Apr 2012 23:23:18 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13206398" author="tamtam180" created="Sun, 12 Feb 2012 12:03:53 +0000"  >&lt;p&gt;Attached is the patch which fixes this issue.&lt;br/&gt;
It changed so that applyOffset() return a new instance.&lt;/p&gt;
</comment>
                            <comment id="13214221" author="cwsteinbach" created="Thu, 23 Feb 2012 02:30:34 +0000"  >&lt;p&gt;@tamtam180: If this patch is ready for review can you please change the status to &apos;Patch Available&apos; and submit a review request using Phabricator? Instructions are located here:&lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-ReviewProcess&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-ReviewProcess&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13216252" author="phabricator@reviews.facebook.net" created="Sat, 25 Feb 2012 02:20:03 +0000"  >&lt;p&gt;tamtam180 requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; title=&quot;utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2803&quot;&gt;&lt;del&gt;HIVE-2803&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2803&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; title=&quot;utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2803&quot;&gt;&lt;del&gt;HIVE-2803&lt;/del&gt;&lt;/a&gt; utc_from_timestamp and utc_to_timestamp returns incorrect results.&lt;/p&gt;

&lt;p&gt;  It changed so that applyOffset() return a new instance.&lt;/p&gt;

&lt;p&gt;  How to reproduce:&lt;/p&gt;


&lt;p&gt;  $ echo &quot;2011-12-25 09:00:00.123456&quot; &amp;gt; /tmp/data5.txt&lt;br/&gt;
  hive&amp;gt; create table ts1(t1 timestamp);&lt;br/&gt;
  hive&amp;gt; load data local inpath &apos;/tmp/data5.txt&apos; overwrite into table ts1;&lt;br/&gt;
  hive&amp;gt; select t1, from_utc_timestamp(t1, &apos;JST&apos;), from_utc_timestamp(t1, &apos;JST&apos;) from ts1 limit 1;&lt;/p&gt;



&lt;p&gt;  The following result is expected:&lt;/p&gt;

&lt;p&gt;   2011-12-25 09:00:00.123456      2011-12-25 18:00:00.123456      2011-12-25 18:00:00.123456&lt;/p&gt;


&lt;p&gt;  However, the above query return incorrect result like this:&lt;/p&gt;

&lt;p&gt;   2011-12-26 03:00:00.492456      2011-12-26 03:00:00.492456      2011-12-26 03:00:00.492456&lt;/p&gt;



&lt;p&gt;  This is because GenericUDFFromUtcTimestamp.applyOffset() does setTime() improperly.&lt;br/&gt;
  On evaluating query, timestamp argument always returns the same instance.&lt;br/&gt;
  GenericUDFFromUtcTimestamp.applyOffset() does setTime() on the instance.&lt;br/&gt;
  That means it adds all offsets in the query.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1959&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/timestamp_udf.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/timestamp_udf.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFromUtcTimestamp.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/4143/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13216361" author="tamtam180" created="Sat, 25 Feb 2012 08:08:38 +0000"  >&lt;p&gt;Carl,&lt;br/&gt;
thanks your advice.&lt;br/&gt;
I tried use of Phabricator, and changed status to &apos;Patch Available&apos;.&lt;/p&gt;</comment>
                            <comment id="13260071" author="cwsteinbach" created="Mon, 23 Apr 2012 23:23:18 +0000"  >&lt;p&gt;Committed to trunk. Thanks Tamtam180!&lt;/p&gt;</comment>
                            <comment id="13260073" author="cwsteinbach" created="Mon, 23 Apr 2012 23:24:15 +0000"  >&lt;p&gt;@tamtam180: can you please upload another copy of the patch and click the box that grants license rights to the ASF? Thanks!&lt;/p&gt;</comment>
                            <comment id="13260076" author="phabricator@reviews.facebook.net" created="Mon, 23 Apr 2012 23:30:30 +0000"  >&lt;p&gt;tamtam180 has committed the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; title=&quot;utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2803&quot;&gt;&lt;del&gt;HIVE-2803&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot;.&lt;/p&gt;

&lt;p&gt;  Change committed by cws.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1959&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHIVE1329507&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHIVE1329507&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13260139" author="tamtam180" created="Tue, 24 Apr 2012 01:43:59 +0000"  >&lt;p&gt;Final version which grants rights to the ASF.&lt;/p&gt;</comment>
                            <comment id="13260299" author="hudson" created="Tue, 24 Apr 2012 06:51:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1392 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1392/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1392/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; title=&quot;utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2803&quot;&gt;&lt;del&gt;HIVE-2803&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; utc_from_timestamp and utc_to_timestamp returns incorrect&lt;br/&gt;
results.&lt;br/&gt;
(Kiyotaka Suzuki via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2803&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; title=&quot;utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2803&quot;&gt;&lt;del&gt;HIVE-2803&lt;/del&gt;&lt;/a&gt; utc_from_timestamp and utc_to_timestamp returns incorrect results.&lt;/p&gt;

&lt;p&gt;It changed so that applyOffset() return a new instance.&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;


&lt;p&gt;$ echo &quot;2011-12-25 09:00:00.123456&quot; &amp;gt; /tmp/data5.txt&lt;br/&gt;
hive&amp;gt; create table ts1(t1 timestamp);&lt;br/&gt;
hive&amp;gt; load data local inpath &apos;/tmp/data5.txt&apos; overwrite into table ts1;&lt;br/&gt;
hive&amp;gt; select t1, from_utc_timestamp(t1, &apos;JST&apos;), from_utc_timestamp(t1, &apos;JST&apos;)&lt;br/&gt;
from ts1 limit 1;&lt;/p&gt;



&lt;p&gt;The following result is expected:&lt;/p&gt;

&lt;p&gt; 2011-12-25 09:00:00.123456      2011-12-25 18:00:00.123456      2011-12-25&lt;br/&gt;
18:00:00.123456&lt;/p&gt;


&lt;p&gt;However, the above query return incorrect result like this:&lt;/p&gt;

&lt;p&gt; 2011-12-26 03:00:00.492456      2011-12-26 03:00:00.492456      2011-12-26&lt;br/&gt;
03:00:00.492456&lt;/p&gt;



&lt;p&gt;This is because GenericUDFFromUtcTimestamp.applyOffset() does setTime()&lt;br/&gt;
improperly.&lt;br/&gt;
On evaluating query, timestamp argument always returns the same instance.&lt;br/&gt;
GenericUDFFromUtcTimestamp.applyOffset() does setTime() on the instance.&lt;br/&gt;
That means it adds all offsets in the query.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1959&lt;/a&gt; (Revision 1329507)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329507&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329507&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFromUtcTimestamp.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/timestamp_udf.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/timestamp_udf.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548231" author="hudson" created="Wed, 9 Jan 2013 10:24:54 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; title=&quot;utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2803&quot;&gt;&lt;del&gt;HIVE-2803&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; utc_from_timestamp and utc_to_timestamp returns incorrect&lt;br/&gt;
results.&lt;br/&gt;
(Kiyotaka Suzuki via Carl Steinbach)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2803&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2803&quot; title=&quot;utc_from_timestamp and utc_to_timestamp returns incorrect results.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2803&quot;&gt;&lt;del&gt;HIVE-2803&lt;/del&gt;&lt;/a&gt; utc_from_timestamp and utc_to_timestamp returns incorrect results.&lt;/p&gt;

&lt;p&gt;It changed so that applyOffset() return a new instance.&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;


&lt;p&gt;$ echo &quot;2011-12-25 09:00:00.123456&quot; &amp;gt; /tmp/data5.txt&lt;br/&gt;
hive&amp;gt; create table ts1(t1 timestamp);&lt;br/&gt;
hive&amp;gt; load data local inpath &apos;/tmp/data5.txt&apos; overwrite into table ts1;&lt;br/&gt;
hive&amp;gt; select t1, from_utc_timestamp(t1, &apos;JST&apos;), from_utc_timestamp(t1, &apos;JST&apos;)&lt;br/&gt;
from ts1 limit 1;&lt;/p&gt;



&lt;p&gt;The following result is expected:&lt;/p&gt;

&lt;p&gt; 2011-12-25 09:00:00.123456      2011-12-25 18:00:00.123456      2011-12-25&lt;br/&gt;
18:00:00.123456&lt;/p&gt;


&lt;p&gt;However, the above query return incorrect result like this:&lt;/p&gt;

&lt;p&gt; 2011-12-26 03:00:00.492456      2011-12-26 03:00:00.492456      2011-12-26&lt;br/&gt;
03:00:00.492456&lt;/p&gt;



&lt;p&gt;This is because GenericUDFFromUtcTimestamp.applyOffset() does setTime()&lt;br/&gt;
improperly.&lt;br/&gt;
On evaluating query, timestamp argument always returns the same instance.&lt;br/&gt;
GenericUDFFromUtcTimestamp.applyOffset() does setTime() on the instance.&lt;br/&gt;
That means it adds all offsets in the query.&lt;/p&gt;

&lt;p&gt;Test Plan: EMPTY&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1959&lt;/a&gt; (Revision 1329507)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329507&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329507&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFromUtcTimestamp.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/timestamp_udf.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/timestamp_udf.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550029" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:06 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12516018" name="ASF.LICENSE.NOT.GRANTED--HIVE-2803.D1959.1.patch" size="5586" author="phabricator@reviews.facebook.net" created="Sat, 25 Feb 2012 02:20:07 +0000"/>
                            <attachment id="12514267" name="HIVE-2803.1.patch.txt" size="5951" author="tamtam180" created="Sun, 12 Feb 2012 12:03:52 +0000"/>
                            <attachment id="12523904" name="HIVE-2803.D1959.1.patch" size="5586" author="tamtam180" created="Tue, 24 Apr 2012 01:43:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Feb 2012 02:30:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227570</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02upb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14575</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-2804] Task log retrieval fails on Hadoop 0.23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2804</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12542461">HIVE-2804</key>
            <summary>Task log retrieval fails on Hadoop 0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Feb 2012 23:44:27 +0000</created>
                <updated>Thu, 2 May 2013 02:30:53 +0000</updated>
                            <resolved>Tue, 14 Aug 2012 22:22:19 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Diagnosability</component>
                    <component>Query Processor</component>
                    <component>Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13207354" author="cwsteinbach" created="Mon, 13 Feb 2012 23:45:53 +0000"  >&lt;p&gt;On a secure Hadoop cluster TaskLogProcessor.getErrors() fails:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Ended Job = job_201202112025_0356 with errors
Error during job, obtaining debugging information...
Examining task ID: task_201202112025_0356_m_000003 (and more) from job job_201202112025_0356
Exception in thread &quot;Thread-22&quot; java.lang.RuntimeException: Error while reading from task log url
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:130)
	at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:211)
	at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:81)
	at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: http://c0509.hal.cloudera.com:50060/tasklog?taskid=attempt_201202112025_0356_r_000000_1&amp;amp;start=-8193
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
	at java.net.URL.openStream(URL.java:1010)
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:120)
	... 3 more
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13257616" author="zhenxiao" created="Thu, 19 Apr 2012 17:27:14 +0000"  >&lt;p&gt;Also relates to the following:&lt;br/&gt;
&lt;a href=&quot;http://search-hadoop.com/m/LR0vP1Y5227&amp;amp;subj=Hive+Hadoop+Log+Retrieval+Problem&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/LR0vP1Y5227&amp;amp;subj=Hive+Hadoop+Log+Retrieval+Problem&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13257964" author="appodictic" created="Fri, 20 Apr 2012 01:18:09 +0000"  >&lt;p&gt;It seems like you will have to make a shim or variable that can be used to generate a version dependent URL.&lt;/p&gt;</comment>
                            <comment id="13263272" author="zhenxiao" created="Fri, 27 Apr 2012 00:26:31 +0000"  >&lt;p&gt;By creating an ThrowNullPointer UDF, and running it in MiniMRCluster, could reproduce a MapReduce job failing.&lt;/p&gt;

&lt;p&gt;When running on apache trunk(which is using MR1), get the following error message:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: throw_npe.q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Error during job, obtaining debugging information...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Examining task ID: task_20120426165633901_0001_m_000002 (and more) from job job_20120426165633901_0001&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task with the most failures(4): &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; -----&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task ID:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; task_20120426165633901_0001_m_000000&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; URL:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://localhost:50030/taskdetails.jsp?jobid=job_20120426165633901_0001&amp;amp;tipid=task_20120426165633901_0001_m_000000&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:50030/taskdetails.jsp?jobid=job_20120426165633901_0001&amp;amp;tipid=task_20120426165633901_0001_m_000000&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; -----&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client Execution failed with error code = 9&lt;/p&gt;

&lt;p&gt;And in the output file:&lt;/p&gt;

&lt;p&gt;PREHOOK: Output: hdfs://rotor:35306/home/cloudera/Code/hive/build/ql/scratchdir/hive_2012-04-26_16-57-11_129_4964809859660696177/-mr-10000&lt;br/&gt;
Ended Job = job_20120426165633901_0001 with errors&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;/p&gt;

&lt;p&gt;So, on apache trunk, TaskLog retrieval is working OK.&lt;/p&gt;

&lt;p&gt;Since our CDH4 branch could not run MiniMRCluster yet, will try on an MR2 cluster, and also try to run a local cluster in pseudo-distributed mode.&lt;/p&gt;</comment>
                            <comment id="13266239" author="zhenxiao" created="Tue, 1 May 2012 23:18:24 +0000"  >&lt;p&gt;When running in CDH4 branch(which is using MR2 cluster), in a real non-secure cluster, always getting the following exception:&lt;/p&gt;


&lt;p&gt;Exception in thread &quot;Thread-31&quot; java.lang.RuntimeException: Error while reading from task log url&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:130)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:222)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:82)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: &lt;a href=&quot;http://c0409.hal.cloudera.com:8080/tasklog?attemptid=attempt_1335202931724_0600_m_000000_0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://c0409.hal.cloudera.com:8080/tasklog?attemptid=attempt_1335202931724_0600_m_000000_0&lt;/a&gt;&lt;br/&gt;
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1403)&lt;br/&gt;
	at java.net.URL.openStream(URL.java:1029)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:120)&lt;br/&gt;
	... 3 more&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask&lt;br/&gt;
MapReduce Jobs Launched: &lt;br/&gt;
Job 0: Map: 2   HDFS Read: 0 HDFS Write: 0 FAIL&lt;br/&gt;
Total MapReduce CPU Time Spent: 0 msec&lt;/p&gt;

&lt;p&gt;After working a patch, using HostUtil.getTaskLogUrl() to retrieve the log, the same exception still happens.&lt;/p&gt;

&lt;p&gt;Found out that, for this intentionally failed testcase, no log generated at all.&lt;/p&gt;</comment>
                            <comment id="13266267" author="zhenxiao" created="Wed, 2 May 2012 00:33:29 +0000"  >&lt;p&gt;The bug could be reproduced in a non-secure MR2 cluster. In non-secure MR1 cluster, everything works OK.&lt;br/&gt;
It is not related to secure-cluster at all. &lt;br/&gt;
The reason is for a Null Pointer Exception Killed MapReduce Job in MR2 cluster, no log generated for the MapReduce job.&lt;br/&gt;
Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4218&quot; title=&quot;Killed MapReduce Job does not generate log in MR2 cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4218&quot;&gt;MAPREDUCE-4218&lt;/a&gt; to track the problem.&lt;/p&gt;</comment>
                            <comment id="13268728" author="zhenxiao" created="Fri, 4 May 2012 21:40:14 +0000"  >&lt;p&gt;On Hive Side, when using MR1, Hive is generating the TaskLog URL manually, since no available MapReduce api yet.&lt;/p&gt;

&lt;p&gt;when using MR2, Hive could be using the existing MapReduce api to generate TaskLog URLs.&lt;/p&gt;

&lt;p&gt;Shims should be created to fix the Hive side problem.&lt;/p&gt;</comment>
                            <comment id="13268729" author="zhenxiao" created="Fri, 4 May 2012 21:42:05 +0000"  >&lt;p&gt;@Edward: Yes. Shims are to created to fix the bug. I will submit a patch soon.&lt;/p&gt;</comment>
                            <comment id="13268784" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 22:55:47 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; Task log retrieval fails on secure cluster&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_npe_tasklog.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_npe_tasklog.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6927/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6927/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13269133" author="phabricator@reviews.facebook.net" created="Sun, 6 May 2012 05:53:55 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:1 Can this file be added in ql/src/test instead ?&lt;/p&gt;

&lt;p&gt;  You can add the relevant function in the test.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269294" author="cwsteinbach" created="Sun, 6 May 2012 21:50:29 +0000"  >&lt;p&gt;@Zhenxiao: please address the review comments and then resubmit. Thanks!&lt;/p&gt;</comment>
                            <comment id="13269295" author="phabricator@reviews.facebook.net" created="Sun, 6 May 2012 21:50:45 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java:255 This doesn&apos;t belong here. The UDF is for testing purposes only. Users should not see it listed in the output of &apos;SHOW FUNCTIONS&apos;.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:1 @Namit: Good point.&lt;/p&gt;

&lt;p&gt;  @Zhenxiao: Please put this in ql/src/test/org/apache/hadoop/hive/ql/udf/generic, and then take a look at ql/src/test/queries/clientpositive/create_genericudf.q for an example of how to register a temporary UDF.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:37 Might be good to change the name to &quot;evaluate_npe&quot; (and update the other comments accordingly) just to make it clear that the NPE is thrown in evaluate() as opposed to initialize().&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:49 I&apos;m curious if this if() block is really necessary. Does the Java compiler complain without it?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFNPE.java:42 Is it possible to write a GenericUDF that takes no input parameters (e.g. like UDFPI)? If so then I think we should do that here since we ignore the input anyway. If that isn&apos;t possible, then please change this to take a string as input since that will work better with the src table.&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_npe_tasklog.q:3 Referencing src_thrift may give people the impression that this test is somehow related to Thrift. Let&apos;s use the src table instead.&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_npe_tasklog.q:1 Please change the name to &quot;cluster_tasklog_retrieval.q&quot;.&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java:529 Can we call TaskLogServlet.getTaskLogUrl() here instead of manually constructing the URL? If the answer is no then please add a comment explaining why. Thanks.&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java:33 Same question as above.&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java:38 Please use the getHost() and getPort() methods that are provided by java.net.URL.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269356" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 04:20:00 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;   Task log retrieval fails on secure cluster&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;</comment>
                            <comment id="13269358" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 04:23:52 +0000"  >&lt;p&gt;zhenxiao has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;  @Carl and Namit: Thanks a lot. My updated patch is attached.&lt;/p&gt;

&lt;p&gt;  1. The without the &quot;if (true)&quot; statement, compiler is complaining return is an unreachable command, and fails the compilation. I keeps this &quot;if(true)&quot;.&lt;/p&gt;

&lt;p&gt;  2. GenericUDFEvaluateNPE is taking a string as parameter.&lt;/p&gt;

&lt;p&gt;  3. TaskLogServlet is not available as Hadoop library, HostUtil is the corresponding one. While, HostUtil.java is not available until Hadoop0.23, so in Hadoop0.20, still needs to manually construct the URL. I left comments there.&lt;/p&gt;

&lt;p&gt;  Your comments and suggestions are appreciated.&lt;/p&gt;

&lt;p&gt;  Thanks,&lt;br/&gt;
  Zhenxiao&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269382" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 05:45:55 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good overall. Please make the changes I requested and I will test and commit. Thanks.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java:46 If this exception is thrown and we ignore it, then the next line is going to throw an NPE since taskTrackerHttpURL will be null. We should make the caller handle this exception instead of squelching it.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java:108 Modify this to also throw MalformedUrlException.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java:103 Modify this to catch Exception instead of IOException. We should also dump the exception stack trace at this point, but that involves modify LogHelper. We&apos;ll save that for another ticket.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269867" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 18:42:47 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;   Handling MalformedUrlException in the caller&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;</comment>
                            <comment id="13275093" author="phabricator@reviews.facebook.net" created="Tue, 15 May 2012 00:40:30 +0000"  >&lt;p&gt;zhenxiao requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; Task log retrieval fails on Hadoop 0.23&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/7287/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/7287/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13278508" author="phabricator@reviews.facebook.net" created="Fri, 18 May 2012 02:12:02 +0000"  >&lt;p&gt;zhenxiao updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Updated patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/errors/TaskLogProcessor.java&lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;br/&gt;
  ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;br/&gt;
  shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;br/&gt;
  shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;br/&gt;
  shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;br/&gt;
  shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13278514" author="phabricator@reviews.facebook.net" created="Fri, 18 May 2012 02:28:06 +0000"  >&lt;p&gt;cwsteinbach has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;/p&gt;

&lt;p&gt;  +1. Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3219&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, cwsteinbach, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13397421" author="rohithsharma" created="Wed, 20 Jun 2012 10:54:31 +0000"  >&lt;p&gt;I also encountered the same problem with hive UDAF queries such as PERCENTILE and ASSERT_TRUE. I have applied given patch and run these 2 queries. This patch fails throwing following excetiption.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error during job, obtaining debugging information...
Examining task ID: task_1340014683209_0037_m_000000 (and more) from job job_1340014683209_0037
Exception in thread &quot;Thread-26&quot; java.lang.RuntimeException: Bad task log url
        at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getStackTraces(TaskLogProcessor.java:193)
        at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:227)
        at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:94)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.MalformedURLException
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:601)
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:464)
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:413)
        at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getStackTraces(TaskLogProcessor.java:191)
        ... 3 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Correct me if I am wrong ,&lt;br/&gt;
With my understanding problem is adding URI&apos;s into &apos;taskLogUrls&apos;, I feel we need null check while adding URI into &apos;taskLogUrls&apos;  because hadoop23shims returns null if the cluster is MR2. This URI construction fails since null is passed as argument when TaskLogProcessor.getErrors() or TaskLogProcessor.getStackTraces() is called and throws MalformedURLException.&lt;/p&gt;</comment>
                            <comment id="13397429" author="rohithsharma" created="Wed, 20 Jun 2012 11:30:03 +0000"  >&lt;p&gt;In addition to above, &lt;/p&gt;

&lt;p&gt;Currently, Once the job is failed, debug information is displayed along with URL. This &apos;taskUrl&apos; displayed is specific to MR1 cluster. This &apos;taskUrl&apos; construction should be based on MR cluster.&lt;/p&gt;</comment>
                            <comment id="13398052" author="zhenxiao" created="Thu, 21 Jun 2012 01:19:50 +0000"  >&lt;p&gt;@rohithsharma:&lt;/p&gt;

&lt;p&gt;Thanks a lot for the comment. Are you using MR1 or MR2 to reproduce the exception? I manually tested &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;.6.patch.txt on a real cluster for both MR1 and MR2. It was running OK. While, returning null could be a problem. I will attach an updated &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;.7.patch.txt, trying to fix the problem.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13398054" author="zhenxiao" created="Thu, 21 Jun 2012 01:24:48 +0000"  >&lt;p&gt;@rohithsharma:&lt;/p&gt;

&lt;p&gt;new patch attached: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;.7.patch.txt&lt;/p&gt;

&lt;p&gt;added null check for taskLogUrl construction.&lt;/p&gt;

&lt;p&gt;Would you please try this patch, and if the exception still occurs, send me a note of the stack trace, I will do more investigation.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zhenxiao&lt;/p&gt;</comment>
                            <comment id="13398194" author="rohithsharma" created="Thu, 21 Jun 2012 05:03:56 +0000"  >&lt;p&gt;@zhenxiao&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; Are you using MR1 or MR2 to reproduce the exception?&lt;br/&gt;
I am using MR2 cluster.&lt;/p&gt;

&lt;p&gt;Latest patch solved the problem, Thanks you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13398195" author="rohithsharma" created="Thu, 21 Jun 2012 05:06:15 +0000"  >&lt;p&gt;I think, &lt;br/&gt;
adding &quot;GenericUDFEvaluateNPE.java&quot; only for test framework is not required. Existing below UDAF queries will catch above problem.&lt;br/&gt;
&amp;gt;&amp;gt; SELECT percentile(key,5) FROM src;&lt;br/&gt;
&amp;gt;&amp;gt; SELECT assert_true(key &amp;gt;= 100) FROM src;&lt;/p&gt;

&lt;p&gt;We can add these queries into tests.&lt;/p&gt;</comment>
                            <comment id="13398234" author="rohithsharma" created="Thu, 21 Jun 2012 07:00:51 +0000"  >&lt;p&gt;In TaskLogProcessor.java, there are 2 methods which construct URL. One is getError() and another is getStackTraces(). TaskLogProcessor.getStackTraces() is called only if &apos;hive.exec.job.debug.capture.stacktraces&apos; is set to true.I think in your case this was not set false.&lt;/p&gt;</comment>
                            <comment id="13398634" author="zhenxiao" created="Thu, 21 Jun 2012 17:46:07 +0000"  >&lt;p&gt;@rohithsharma:&lt;/p&gt;

&lt;p&gt;Thank you so much for the comment. I will update the patch, and submit for review soon.&lt;/p&gt;</comment>
                            <comment id="13398727" author="zhenxiao" created="Thu, 21 Jun 2012 18:38:22 +0000"  >&lt;p&gt;Patch submitted for review at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/5310/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/5310/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13429561" author="cwsteinbach" created="Mon, 6 Aug 2012 23:10:29 +0000"  >&lt;p&gt;@Zhenxiao: Patch needs to be rebased against trunk. Thanks.&lt;/p&gt;</comment>
                            <comment id="13429657" author="zhenxiao" created="Tue, 7 Aug 2012 01:42:51 +0000"  >&lt;p&gt;Updated patch submitted for review at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D4551&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D4551&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13429671" author="cwsteinbach" created="Tue, 7 Aug 2012 02:30:39 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13434582" author="cwsteinbach" created="Tue, 14 Aug 2012 22:22:19 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13434869" author="hudson" created="Wed, 15 Aug 2012 07:57:14 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1606 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1606/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1606/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;. Task log retrieval fails on Hadoop 0.23 (Zhenxiao Luo via cws) (Revision 1373145)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/errors/TaskLogProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528520" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:37:21 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on Hadoop 0.23&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3567&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, zhenxiao&lt;/p&gt;</comment>
                            <comment id="13528521" author="phabricator@reviews.facebook.net" created="Tue, 11 Dec 2012 00:37:21 +0000"  >&lt;p&gt;zhenxiao has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Task log retrieval fails on secure cluster&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3057&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, cwsteinbach, zhenxiao&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13548230" author="hudson" created="Wed, 9 Jan 2013 10:24:54 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2804&quot; title=&quot;Task log retrieval fails on Hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2804&quot;&gt;&lt;del&gt;HIVE-2804&lt;/del&gt;&lt;/a&gt;. Task log retrieval fails on Hadoop 0.23 (Zhenxiao Luo via cws) (Revision 1373145)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1373145&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/HadoopJobExecHelper.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JobDebugger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/errors/TaskLogProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/udf/generic/GenericUDFEvaluateNPE.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/cluster_tasklog_retrieval.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550325" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:15 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12553575">MAPREDUCE-4218</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12472147">HIVE-1579</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12600537">HIVE-3313</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12600246">HIVE-3301</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12525694" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3057.1.patch" size="11183" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 22:55:49 +0000"/>
                            <attachment id="12525799" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3057.2.patch" size="11702" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 04:20:03 +0000"/>
                            <attachment id="12525899" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3057.3.patch" size="13824" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 18:42:48 +0000"/>
                            <attachment id="12526866" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3219.1.patch" size="15140" author="phabricator@reviews.facebook.net" created="Tue, 15 May 2012 00:40:32 +0000"/>
                            <attachment id="12527979" name="ASF.LICENSE.NOT.GRANTED--HIVE-2804.D3219.2.patch" size="18785" author="phabricator@reviews.facebook.net" created="Fri, 18 May 2012 02:12:03 +0000"/>
                            <attachment id="12525695" name="HIVE-2804.1.patch.txt" size="11183" author="zhenxiao" created="Fri, 4 May 2012 22:59:08 +0000"/>
                            <attachment id="12525801" name="HIVE-2804.2.patch.txt" size="13566" author="zhenxiao" created="Mon, 7 May 2012 04:55:35 +0000"/>
                            <attachment id="12525900" name="HIVE-2804.3.patch.txt" size="13824" author="zhenxiao" created="Mon, 7 May 2012 18:44:20 +0000"/>
                            <attachment id="12527366" name="HIVE-2804.4.patch.txt" size="15140" author="zhenxiao" created="Tue, 15 May 2012 15:48:27 +0000"/>
                            <attachment id="12527982" name="HIVE-2804.5.patch.txt" size="18785" author="zhenxiao" created="Fri, 18 May 2012 02:15:48 +0000"/>
                            <attachment id="12527980" name="HIVE-2804.5.patch.txt" size="18785" author="zhenxiao" created="Fri, 18 May 2012 02:15:33 +0000"/>
                            <attachment id="12530299" name="HIVE-2804.6.patch.txt" size="19881" author="zhenxiao" created="Wed, 30 May 2012 23:39:56 +0000"/>
                            <attachment id="12532810" name="HIVE-2804.7.patch.txt" size="20109" author="zhenxiao" created="Thu, 21 Jun 2012 01:22:33 +0000"/>
                            <attachment id="12532921" name="HIVE-2804.8.patch.txt" size="15198" author="zhenxiao" created="Thu, 21 Jun 2012 18:38:45 +0000"/>
                            <attachment id="12539402" name="HIVE-2804.9.patch.txt" size="20359" author="zhenxiao" created="Tue, 7 Aug 2012 01:43:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Apr 2012 17:27:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ulr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14559</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>
