<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Jan 22 15:13:57 UTC 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+HIVE+AND+created+%3E%3D+2009-7-28+AND+created+%3C%3D+2009-8-5+ORDER+BY+key+ASC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="28" total="28"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[HIVE-695] sort by does not support columns along with table alias when there is a group by</title>
                <link>https://issues.apache.org/jira/browse/HIVE-695</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The following query works:&lt;/p&gt;

&lt;p&gt;select a.userid from pageviews a where a.ds = &apos;2009-07-21&apos; sort by a.userid; &lt;/p&gt;

&lt;p&gt;However, the query below results in an error:&lt;/p&gt;

&lt;p&gt;select a.userid, count(1) from pageviews a where a.ds = &apos;2009-07-21&apos; group by a.userid sort by a.userid; &lt;/p&gt;

&lt;p&gt;FAILED: Error in semantic analysis: line 1:109 Invalid Table Alias or Column Reference a&lt;/p&gt;

&lt;p&gt;We should either not allow sort by after a group by or allow sort by to have column aliases always.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431557">HIVE-695</key>
            <summary>sort by does not support columns along with table alias when there is a group by</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 01:04:55 +0000</created>
                <updated>Thu, 21 Apr 2016 12:53:50 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14125293" author="lars_francke" created="Mon, 8 Sep 2014 08:19:41 +0000"  >&lt;p&gt;I just checked and it&apos;s still an issue in Hive 0.12&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12546641">HIVE-2873</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Sep 2014 08:19:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lb9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122476</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-696] GenericUDF.getDisplayString should display the correct name for multiple functions using the same implementation</title>
                <link>https://issues.apache.org/jira/browse/HIVE-696</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;GenericUDF.getDisplayString() should take as an argument the name of the function called and display it instead of using a hardcoded value&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431558">HIVE-696</key>
            <summary>GenericUDF.getDisplayString should display the correct name for multiple functions using the same implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eibrishimov">Emil Ibrishimov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 02:04:41 +0000</created>
                <updated>Tue, 28 Jul 2009 02:04:41 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42759</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lb9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122477</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-697] GroupByOperator&apos;s initialization calls GenericUDAF.newAggregation before GenericUDAF.init</title>
                <link>https://issues.apache.org/jira/browse/HIVE-697</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It should call GenericUDAF.init first, so GenericUDAF knows what to store in the AggregationBuffer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431566">HIVE-697</key>
            <summary>GroupByOperator&apos;s initialization calls GenericUDAF.newAggregation before GenericUDAF.init</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 05:58:13 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:26 +0000</updated>
                            <resolved>Tue, 28 Jul 2009 19:17:36 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12735960" author="zshao" created="Tue, 28 Jul 2009 06:21:12 +0000"  >&lt;p&gt;This patch moves the block of code up.  It does not contain any additional tests but I think it&apos;s OK since it&apos;s such a simple change.&lt;/p&gt;</comment>
                            <comment id="12736163" author="namit" created="Tue, 28 Jul 2009 17:29:42 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12736230" author="namit" created="Tue, 28 Jul 2009 19:17:36 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414717" name="HIVE-697.1.patch" size="1800" author="zshao" created="Tue, 28 Jul 2009 06:21:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jul 2009 17:29:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lba7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122478</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-698] Create temporary function for GenericUDAF</title>
                <link>https://issues.apache.org/jira/browse/HIVE-698</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We don&apos;t have that capability for GenericUDAF yet. We should add it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431567">HIVE-698</key>
            <summary>Create temporary function for GenericUDAF</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 05:59:29 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:19 +0000</updated>
                            <resolved>Wed, 29 Jul 2009 16:25:20 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12735959" author="zshao" created="Tue, 28 Jul 2009 06:20:43 +0000"  >&lt;p&gt;This patch fixed the problem with a test.&lt;/p&gt;</comment>
                            <comment id="12736161" author="namit" created="Tue, 28 Jul 2009 17:28:26 +0000"  >&lt;p&gt;This should go in after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-700&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-700&lt;/a&gt;&lt;br/&gt;
since the existing tests output now depends on the order in which the tests are run&lt;/p&gt;</comment>
                            <comment id="12736495" author="zshao" created="Wed, 29 Jul 2009 07:46:40 +0000"  >&lt;p&gt;Merged with trunk.&lt;/p&gt;</comment>
                            <comment id="12736666" author="namit" created="Wed, 29 Jul 2009 15:29:10 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12736690" author="namit" created="Wed, 29 Jul 2009 16:25:20 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414716" name="HIVE-698.1.patch" size="4978" author="zshao" created="Tue, 28 Jul 2009 06:20:43 +0000"/>
                            <attachment id="12414864" name="HIVE-698.2.patch" size="5046" author="zshao" created="Wed, 29 Jul 2009 07:46:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jul 2009 17:28:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-699] Make lots of existing ObjectInspectors settable</title>
                <link>https://issues.apache.org/jira/browse/HIVE-699</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We should make JavaObjectInspectors, StandardList/Struct/MapObjectInspector, ReflectionObjectInspectors settable.&lt;/p&gt;

&lt;p&gt;This will allow us to make it possible to &lt;b&gt;write&lt;/b&gt; into Thrift tables, as well as ProtocolBuffer tables in the future.&lt;br/&gt;
This will also allow us to pass complex objects into UDF and receive complex objects from UDF by using ObjectInspectorConverters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431568">HIVE-699</key>
            <summary>Make lots of existing ObjectInspectors settable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 06:05:13 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:13 +0000</updated>
                            <resolved>Fri, 14 Aug 2009 07:48:12 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12736522" author="zshao" created="Wed, 29 Jul 2009 08:11:18 +0000"  >&lt;p&gt;This patch does the trick. As a side effect, UDAF can take complex arguments and return complex values - Hive will convert the object to the corresponding Java Class on the fly.&lt;/p&gt;

&lt;p&gt;This patch also includes an example UDAF (average) that uses a static inner class with 2 fields: mCount and mSum to store the internal state.  The terminatePartial function just returns an object of this inner class, and Hive is capable of reading the value out using reflection ObjectInspector. Then in the reducer, Hive converts a struct with these 2 fields into an object of this inner class by using the ReflectionStructObjectInspector(which implements SettableStructObjectInspector).&lt;/p&gt;</comment>
                            <comment id="12736704" author="namit" created="Wed, 29 Jul 2009 16:51:44 +0000"  >&lt;p&gt;Some tests are failing for this&lt;/p&gt;</comment>
                            <comment id="12737357" author="zshao" created="Thu, 30 Jul 2009 23:41:24 +0000"  >&lt;p&gt;This patch fixes the test failure and added another example UDAF group_concat for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-707&quot; title=&quot;add group_concat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-707&quot;&gt;HIVE-707&lt;/a&gt;.&lt;br/&gt;
Note that we are able to use UDAF (instead of GenericUDAF) to implement arbitrary-length argument list. This may not be really efficient (since we are doing reflection), but will provide a much easier way to write UDAF with arbitrary-length argument list.&lt;/p&gt;</comment>
                            <comment id="12738561" author="zshao" created="Mon, 3 Aug 2009 20:27:10 +0000"  >&lt;p&gt;This patch fixes all test failures. It&apos;s ready to commit, pending code review.&lt;/p&gt;</comment>
                            <comment id="12738909" author="zshao" created="Tue, 4 Aug 2009 09:06:02 +0000"  >&lt;p&gt;This one contains the changes of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-719&quot; title=&quot;LazyArray/LazyMap index out of bound exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-719&quot;&gt;&lt;del&gt;HIVE-719&lt;/del&gt;&lt;/a&gt; and passed all tests.&lt;/p&gt;</comment>
                            <comment id="12739165" author="namit" created="Tue, 4 Aug 2009 21:02:03 +0000"  >&lt;p&gt;Let us do this after the branch assuming we have a branch pretty soon&lt;/p&gt;</comment>
                            <comment id="12742699" author="zshao" created="Thu, 13 Aug 2009 03:50:40 +0000"  >&lt;p&gt;Resolved conflicts.&lt;/p&gt;</comment>
                            <comment id="12743027" author="zshao" created="Thu, 13 Aug 2009 23:54:09 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-699&quot; title=&quot;Make lots of existing ObjectInspectors settable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-699&quot;&gt;&lt;del&gt;HIVE-699&lt;/del&gt;&lt;/a&gt;.7.patch:&lt;br/&gt;
Incorporated code review comments from Namit:&lt;br/&gt;
1. Add test for UDFs that takes Map&amp;lt;String,String&amp;gt;, List&amp;lt;Integer&amp;gt;, and Object. (udf_example_arraymapstruct.q)&lt;br/&gt;
2. TypeInfoUtils.getParameterTypeInfos should return null if the number of parameters do not match.&lt;/p&gt;</comment>
                            <comment id="12743054" author="zshao" created="Fri, 14 Aug 2009 02:11:42 +0000"  >&lt;p&gt;Updated some tests.&lt;/p&gt;</comment>
                            <comment id="12743123" author="namit" created="Fri, 14 Aug 2009 07:48:12 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12431705">HIVE-707</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12414865" name="HIVE-699.1.patch" size="68587" author="zshao" created="Wed, 29 Jul 2009 08:11:18 +0000"/>
                            <attachment id="12415073" name="HIVE-699.2.patch" size="86974" author="zshao" created="Thu, 30 Jul 2009 23:41:24 +0000"/>
                            <attachment id="12415403" name="HIVE-699.3.patch" size="1708482" author="zshao" created="Mon, 3 Aug 2009 20:27:10 +0000"/>
                            <attachment id="12415475" name="HIVE-699.4.patch" size="1643988" author="zshao" created="Tue, 4 Aug 2009 09:06:02 +0000"/>
                            <attachment id="12416392" name="HIVE-699.6.patch" size="1783920" author="zshao" created="Thu, 13 Aug 2009 03:50:40 +0000"/>
                            <attachment id="12416512" name="HIVE-699.7.patch" size="1794939" author="zshao" created="Thu, 13 Aug 2009 23:54:09 +0000"/>
                            <attachment id="12416522" name="HIVE-699.8.patch" size="1795023" author="zshao" created="Fri, 14 Aug 2009 02:11:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jul 2009 16:51:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lban:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122480</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-700] Fix test error by adding &quot;DROP FUNCTION&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-700</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Since we added &quot;Show Functions&quot; in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-580&quot; title=&quot;command to list available UDF names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-580&quot;&gt;&lt;del&gt;HIVE-580&lt;/del&gt;&lt;/a&gt;, test results will depend on what temporary functions are added to the system.&lt;/p&gt;

&lt;p&gt;We should add the capability of &quot;DROP FUNCTION&quot;, and do that at the end of those &quot;create function&quot; tests to make sure the &quot;show functions&quot; results are deterministic.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431573">HIVE-700</key>
            <summary>Fix test error by adding &quot;DROP FUNCTION&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coderplay">Min Zhou</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 07:09:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:17 +0000</updated>
                            <resolved>Wed, 29 Jul 2009 03:21:06 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12736022" author="coderplay" created="Tue, 28 Jul 2009 10:28:19 +0000"  >&lt;p&gt;usage: &lt;br/&gt;
drop function function_name&lt;/p&gt;</comment>
                            <comment id="12736157" author="namit" created="Tue, 28 Jul 2009 17:25:52 +0000"  >&lt;p&gt;I dont think we should allow DROP FUNCTION - we should only support&lt;br/&gt;
DROP TEMPORARY FUNCTION - this cannot drop the functions that were not added temporarily.&lt;br/&gt;
If not already there, FunctionRegistry needs to be enhanced to store the fact whether a function is temporary or not.&lt;/p&gt;

&lt;p&gt;Also, &lt;/p&gt;

&lt;p&gt;1. Can you add a negative test which tries to drop a permanent function and fails.&lt;br/&gt;
2. Can you change the existing tests with a &apos;create temporary function&apos; to have a &apos;drop temporary function&apos; at the end ?&lt;/p&gt;</comment>
                            <comment id="12736374" author="namit" created="Wed, 29 Jul 2009 00:05:12 +0000"  >&lt;p&gt;Since this is blocking many merges, I will commit it and file some follow-up jiras&lt;/p&gt;
</comment>
                            <comment id="12736406" author="namit" created="Wed, 29 Jul 2009 01:12:27 +0000"  >&lt;p&gt;The patch fixed 2.&lt;/p&gt;

&lt;p&gt;For 1. a new JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-700&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-700&lt;/a&gt; has been filed &lt;/p&gt;</comment>
                            <comment id="12736409" author="rsm" created="Wed, 29 Jul 2009 01:36:44 +0000"  >&lt;p&gt;The Jira for 1. is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-702&quot; title=&quot;DROP TEMPORARY FUNCTION should not drop builtin functions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-702&quot;&gt;&lt;del&gt;HIVE-702&lt;/del&gt;&lt;/a&gt;. The patch looks good. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12736428" author="zshao" created="Wed, 29 Jul 2009 03:21:06 +0000"  >&lt;p&gt;Committed. Thanks Min and Namit.&lt;br/&gt;
Raghu, I took the liberty to commit it first since it&apos;s blocking other issues.&lt;/p&gt;</comment>
                            <comment id="12736435" author="coderplay" created="Wed, 29 Jul 2009 04:11:18 +0000"  >&lt;p&gt;Sorry for my late. we have a training today, I will update a new patch for hive-700 related jiras.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12428814">HIVE-580</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12414733" name="HIVE-700.1.patch" size="11557" author="coderplay" created="Tue, 28 Jul 2009 10:28:19 +0000"/>
                            <attachment id="12414833" name="hive.700.2.patch" size="16308" author="namit" created="Wed, 29 Jul 2009 01:11:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jul 2009 10:28:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73353</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-700&quot; title=&quot;Fix test error by adding &amp;quot;DROP FUNCTION&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-700&quot;&gt;&lt;strike&gt;HIVE-700&lt;/strike&gt;&lt;/a&gt;. Fix test error by adding \&amp;quot;DROP FUNCTION\&amp;quot;. (Min Zhou and Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-701] lots of reserved keywords in hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-701</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>
&lt;p&gt;There is a problem if we want to use some reserved keywords:&lt;/p&gt;

&lt;p&gt;for example, creating a function of name left/right ? left/right is already a reserved keyword.&lt;/p&gt;

&lt;p&gt;The other way around should also be possible - if we want to add a &apos;show tables status&apos; and some applications already use status as a column name, they should not break&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431611">HIVE-701</key>
            <summary>lots of reserved keywords in hive</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sxyuan">Samuel Yuan</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 17:45:45 +0000</created>
                <updated>Fri, 16 Jan 2015 23:02:52 +0000</updated>
                            <resolved>Thu, 21 Feb 2013 18:33:05 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="12736183" author="prasadc" created="Tue, 28 Jul 2009 18:00:26 +0000"  >&lt;p&gt;i think quoted reserved words work fine as column tables or table names. that is how mysql works and i remember someone making this fix long time ago. if not then we should make that fix as part of this JIRA.&lt;/p&gt;</comment>
                            <comment id="12736262" author="namit" created="Tue, 28 Jul 2009 20:17:25 +0000"  >&lt;p&gt;That&apos;s right - &lt;/p&gt;

&lt;p&gt;mysql&amp;gt; create table `tst2`(`table` int);&lt;br/&gt;
ERROR 1050 (42S01): Table &apos;tst2&apos; already exists&lt;br/&gt;
mysql&amp;gt; create table `create`(`table` int);&lt;br/&gt;
Query OK, 0 rows affected (0.05 sec)&lt;/p&gt;



&lt;p&gt;However, that is not good enough for hive - where a lot of the keywords which we might want to reserve in the future are already being used by applications&lt;/p&gt;

</comment>
                            <comment id="12736332" author="athusoo" created="Tue, 28 Jul 2009 22:12:17 +0000"  >&lt;p&gt;This came up on show table status. It so happens as you pointed out that status is being used for column names and if we put it into a keyword now, it will break existing scripts. Any ideas on how to address this? I think this is going to be tricky with antlr.&lt;/p&gt;</comment>
                            <comment id="13571569" author="phabricator@reviews.facebook.net" created="Tue, 5 Feb 2013 18:45:12 +0000"  >&lt;p&gt;sxyuan requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make keywords non-reserved&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: kevinwilfong, JIRA&lt;/p&gt;

&lt;p&gt;Almost all keywords in Hive are reserved. This change makes all but the following keywords non-reserved:&lt;/p&gt;

&lt;p&gt;IF, HAVING, WHERE, SELECT, UNIQUEJOIN, JOIN, ON, TRANSFORM, MAP, REDUCE, TABLESAMPLE, CAST, FUNCTION, EXTENDED, FORMATTED, PRETTY, CASE, WHEN, THEN, ELSE, END, DATABASE, CROSS&lt;/p&gt;

&lt;p&gt;Because the grammar grew too large, it was split into multiple files to accommodate Java&apos;s code size limit. As a result, the custom error handling needed to be moved as well.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Use keywords as identifiers in test queries. Existing unit tests should ensure that keywords will not be mistakenly identified as identifiers.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  ql/src/test/results/clientnegative/show_tables_bad1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/archive_partspec3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_create_tbl2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/select_udtf_alias.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/show_tables_bad2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_tbl_name.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nonreserved_keywords_input37.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;br/&gt;
  ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;br/&gt;
  ql/src/test/results/compiler/errors/missing_overwrite.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/show_tables_bad1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/show_tables_bad2.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SelectClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g&lt;br/&gt;
  ql/build.xml&lt;/p&gt;

&lt;p&gt;To: JIRA&lt;/p&gt;</comment>
                            <comment id="13571573" author="sxyuan" created="Tue, 5 Feb 2013 18:48:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13572007" author="phabricator@reviews.facebook.net" created="Wed, 6 Feb 2013 01:01:12 +0000"  >&lt;p&gt;sxyuan updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make keywords non-reserved&quot;.&lt;/p&gt;

&lt;p&gt;  Forgot a step. FORMATTED and PRETTY are also non-reserved.&lt;/p&gt;

&lt;p&gt;Reviewers: kevinwilfong, JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397?vs=27255&amp;amp;id=27285#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397?vs=27255&amp;amp;id=27285#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  ql/src/test/results/clientnegative/show_tables_bad1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/archive_partspec3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_create_tbl2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/select_udtf_alias.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/show_tables_bad2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_tbl_name.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nonreserved_keywords_input37.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;br/&gt;
  ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;br/&gt;
  ql/src/test/results/compiler/errors/missing_overwrite.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/show_tables_bad1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/show_tables_bad2.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SelectClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g&lt;br/&gt;
  ql/build.xml&lt;/p&gt;

&lt;p&gt;To: kevinwilfong, JIRA, sxyuan&lt;/p&gt;</comment>
                            <comment id="13572008" author="sxyuan" created="Wed, 6 Feb 2013 01:01:39 +0000"  >&lt;p&gt;Updated, see Phabricator.&lt;/p&gt;</comment>
                            <comment id="13572122" author="phabricator@reviews.facebook.net" created="Wed, 6 Feb 2013 03:59:11 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make keywords non-reserved&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q:9 I haven&apos;t looked at the patch, but don&apos;t use MAP/REDUCE&lt;br/&gt;
  for tests.&lt;br/&gt;
  We are trying to deprecate this syntax, if possible.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: kevinwilfong, JIRA, sxyuan&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13576319" author="phabricator@reviews.facebook.net" created="Tue, 12 Feb 2013 02:51:11 +0000"  >&lt;p&gt;kevinwilfong has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make keywords non-reserved&quot;.&lt;/p&gt;

&lt;p&gt;  Could you highlight what changes you made to the grammar files (besides splitting them up)?  It&apos;s hard to tell given that the code is all in new files.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g:461 If URL was not already in the grammar, could you hold off on adding it until you have a use for it?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g:17 I don&apos;t see this getting imported anywhere, how is it getting included?&lt;/p&gt;

&lt;p&gt;  Alternatively, what am I missing?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: kevinwilfong, JIRA, sxyuan&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13576434" author="phabricator@reviews.facebook.net" created="Tue, 12 Feb 2013 07:15:12 +0000"  >&lt;p&gt;sxyuan has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make keywords non-reserved&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q:9 Alright, will change.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g:461 Sorry, didn&apos;t mean to leave that in there. Will remove.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g:17 This is really strange. I don&apos;t see the import here either, but if you check both versions of the latest diff on JIRA, they&apos;re there.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: kevinwilfong, JIRA, sxyuan&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13576839" author="phabricator@reviews.facebook.net" created="Tue, 12 Feb 2013 18:11:12 +0000"  >&lt;p&gt;sxyuan has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make keywords non-reserved&quot;.&lt;/p&gt;

&lt;p&gt;  Highlighting the main changes.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g:302 Moved from ParseDriver.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g:496 Main change for making keywords non-reserved. Future non-reserved keywords should be added to the nonReserved rule.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g:1154 Alternatives reordered to make identifier come last.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g:1161 Same as above.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g:36 gParent is an ANTLR-defined variable referring to the importing parser. The delegate parsers all refer to HiveParser for custom error handling.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g:174 Reordered.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: kevinwilfong, JIRA, sxyuan&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13577156" author="phabricator@reviews.facebook.net" created="Tue, 12 Feb 2013 23:21:11 +0000"  >&lt;p&gt;sxyuan updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Make keywords non-reserved&quot;.&lt;/p&gt;

&lt;p&gt;  Updated.&lt;/p&gt;

&lt;p&gt;Reviewers: kevinwilfong, JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8397?vs=27285&amp;amp;id=27627#toc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D8397?vs=27285&amp;amp;id=27627#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
  ql/src/test/results/clientnegative/show_tables_bad1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/archive_partspec3.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_create_tbl2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/select_udtf_alias.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/show_tables_bad2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_tbl_name.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nonreserved_keywords_input37.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;br/&gt;
  ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;br/&gt;
  ql/src/test/results/compiler/errors/missing_overwrite.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/show_tables_bad1.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/show_tables_bad2.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SelectClauseParser.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g&lt;br/&gt;
  ql/build.xml&lt;/p&gt;

&lt;p&gt;To: kevinwilfong, JIRA, sxyuan&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13581896" author="kevinwilfong" created="Wed, 20 Feb 2013 02:41:23 +0000"  >&lt;p&gt;+1 Looks good.&lt;/p&gt;</comment>
                            <comment id="13583408" author="kevinwilfong" created="Thu, 21 Feb 2013 18:33:05 +0000"  >&lt;p&gt;Committed, thanks Sam.&lt;/p&gt;</comment>
                            <comment id="13583506" author="hudson" created="Thu, 21 Feb 2013 20:08:06 +0000"  >&lt;p&gt;Integrated in hive-trunk-hadoop1 #96 (See &lt;a href=&quot;https://builds.apache.org/job/hive-trunk-hadoop1/96/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hive-trunk-hadoop1/96/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt;. lots of reserved keywords in hive. (Samuel Yuan via kevinwilfong) (Revision 1448762)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1448762&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1448762&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SelectClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_tables_bad1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_tables_bad2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/archive_partspec3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_create_tbl2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_tbl_name.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/select_udtf_alias.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_tables_bad1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_tables_bad2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_input37.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/missing_overwrite.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13583849" author="hudson" created="Fri, 22 Feb 2013 02:55:15 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1981 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1981/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1981/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt;. lots of reserved keywords in hive. (Samuel Yuan via kevinwilfong) (Revision 1448762)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1448762&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1448762&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SelectClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_tables_bad1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_tables_bad2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/archive_partspec3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_create_tbl2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_tbl_name.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/select_udtf_alias.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_tables_bad1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_tables_bad2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_input37.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/missing_overwrite.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13583889" author="hudson" created="Fri, 22 Feb 2013 03:58:36 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #133 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/133/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/133/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt;. lots of reserved keywords in hive. (Samuel Yuan via kevinwilfong) (Revision 1448762)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1448762&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1448762&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/FromClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveLexer.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SelectClauseParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_tables_bad1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/show_tables_bad2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_input37.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/archive_partspec3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_create_tbl2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_tbl_name.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/lateral_view_join.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/select_udtf_alias.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_tables_bad1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/show_tables_bad2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_input37.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/missing_overwrite.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13584042" author="ashutoshc" created="Fri, 22 Feb 2013 07:13:23 +0000"  >&lt;p&gt;After this commit, it seems like grammar has became far more ambiguous. It was ambiguous even before, but judging from number of warnings during generation of parser it seems like it has become much worse. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sxyuan&quot; class=&quot;user-hover&quot; rel=&quot;sxyuan&quot;&gt;Samuel Yuan&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevinwilfong&quot; class=&quot;user-hover&quot; rel=&quot;kevinwilfong&quot;&gt;Kevin Wilfong&lt;/a&gt; is there any plan to address those warnings?&lt;/p&gt;</comment>
                            <comment id="13584050" author="kevinwilfong" created="Fri, 22 Feb 2013 07:26:35 +0000"  >&lt;p&gt;Sorry didn&apos;t notice that when testing.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sxyuan&quot; class=&quot;user-hover&quot; rel=&quot;sxyuan&quot;&gt;Samuel Yuan&lt;/a&gt; It looks like most of these are related to the keywords DISTINCT and ALL, could you try making these reserved again and see if that reduces the number for warnings.  If so could you file a follow up JIRA.&lt;/p&gt;</comment>
                            <comment id="13584073" author="sxyuan" created="Fri, 22 Feb 2013 07:55:53 +0000"  >&lt;p&gt;Taking out DISTINCT and ALL takes the lines of warnings down from about 2900 to around 2300. We were originally at around 1000. I can try taking out more keywords to reduce the ambiguity.&lt;/p&gt;

&lt;p&gt;By the way, what is the concern about the ambiguity? There is no impact to the user, and I don&apos;t think there&apos;s much of a performance hit. Is it just that the warnings are clogging up the build log, or is there something else?&lt;/p&gt;</comment>
                            <comment id="13584490" author="kevinwilfong" created="Fri, 22 Feb 2013 18:01:21 +0000"  >&lt;p&gt;AND, OR, and NOT also seem to be big contributors.&lt;/p&gt;

&lt;p&gt;The warnings bring up a good point, e.g. if you run SELECT distinct col FROM ... are you selecting a column named distinct and aliasing it as col or are your trying to select distinct values of the column called col&lt;/p&gt;</comment>
                            <comment id="13584786" author="sxyuan" created="Fri, 22 Feb 2013 22:48:07 +0000"  >&lt;p&gt;Removing FROM, DISTINCT, PRESERVE, COLUMN, ALL, AND, OR, and NOT brings the number of warnings down to 134. Before this change it was at 81. Most of these other cases are trivial, an example being &quot;KW_ELEM_TYPE | KW_KEY_TYPE | KW_VALUE_TYPE | identifier&quot;, and they are all correctly handled by ANTLR.&lt;/p&gt;

&lt;p&gt;I have created a followup JIRA: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4067&quot; title=&quot;Followup to HIVE-701: reduce ambiguity in grammar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4067&quot;&gt;&lt;del&gt;HIVE-4067&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13623271" author="hudson" created="Fri, 5 Apr 2013 02:36:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #139 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/139/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/139/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4067&quot; title=&quot;Followup to HIVE-701: reduce ambiguity in grammar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4067&quot;&gt;&lt;del&gt;HIVE-4067&lt;/del&gt;&lt;/a&gt; : Followup to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt;: reduce ambiguity in grammar (Samuel Yuan via Ashutosh Chauhan) (Revision 1464808)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464808&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464808&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623321" author="hudson" created="Fri, 5 Apr 2013 03:37:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2046 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2046/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2046/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4067&quot; title=&quot;Followup to HIVE-701: reduce ambiguity in grammar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4067&quot;&gt;&lt;del&gt;HIVE-4067&lt;/del&gt;&lt;/a&gt; : Followup to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-701&quot; title=&quot;lots of reserved keywords in hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-701&quot;&gt;&lt;del&gt;HIVE-701&lt;/del&gt;&lt;/a&gt;: reduce ambiguity in grammar (Samuel Yuan via Ashutosh Chauhan) (Revision 1464808)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464808&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464808&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/HiveParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/IdentifiersParser.g&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/nonreserved_keywords_insert_into1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/compiler/errors/wrong_distinct2.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12700763">HIVE-6617</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12568053" name="HIVE-701.1.patch.txt" size="200473" author="sxyuan" created="Tue, 5 Feb 2013 18:48:47 +0000"/>
                            <attachment id="12568142" name="HIVE-701.2.patch.txt" size="200500" author="sxyuan" created="Wed, 6 Feb 2013 01:01:39 +0000"/>
                            <attachment id="12568051" name="HIVE-701.D8397.1.patch" size="199173" author="phabricator@reviews.facebook.net" created="Tue, 5 Feb 2013 18:45:12 +0000"/>
                            <attachment id="12568141" name="HIVE-701.HIVE-701.D8397.2.patch" size="199200" author="phabricator@reviews.facebook.net" created="Wed, 6 Feb 2013 01:01:12 +0000"/>
                            <attachment id="12569098" name="HIVE-701.HIVE-701.D8397.3.patch" size="199222" author="phabricator@reviews.facebook.net" created="Tue, 12 Feb 2013 23:21:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jul 2009 18:00:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-702] DROP TEMPORARY FUNCTION should not drop builtin functions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-702</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Only temporary functions should be dropped. It should error out if the user tries to drop built-in functions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431647">HIVE-702</key>
            <summary>DROP TEMPORARY FUNCTION should not drop builtin functions</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coderplay">Min Zhou</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 00:06:05 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:16 +0000</updated>
                            <resolved>Wed, 29 Jul 2009 21:22:06 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12736529" author="coderplay" created="Wed, 29 Jul 2009 08:28:00 +0000"  >&lt;p&gt;patch&lt;/p&gt;</comment>
                            <comment id="12736668" author="namit" created="Wed, 29 Jul 2009 15:33:42 +0000"  >&lt;p&gt;1. It will conflict with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-698&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-698&lt;/a&gt; - can you regenerate the patch after that is committed.&lt;br/&gt;
2. In drop_native_udf.q.out, should the error message be printed : &lt;br/&gt;
+      else&lt;br/&gt;
+        throw new HiveException(&quot;Function &quot; + functionName &lt;br/&gt;
+            + &quot; is hive native, it can&apos;t be dropped&quot;);&lt;br/&gt;
+    }&lt;/p&gt;
</comment>
                            <comment id="12736752" author="coderplay" created="Wed, 29 Jul 2009 18:57:55 +0000"  >&lt;p&gt;@Namit&lt;br/&gt;
2. I think we should uniformly slove that problem on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-619&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HIVE-619&lt;/a&gt;. It would be difficult if that issue hasn&apos;t been sloved.&lt;/p&gt;

&lt;p&gt;regenerating patch.&lt;/p&gt;</comment>
                            <comment id="12736755" author="namit" created="Wed, 29 Jul 2009 19:04:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks  good - will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12736762" author="coderplay" created="Wed, 29 Jul 2009 19:12:21 +0000"  >&lt;p&gt;pls wait a moment, I haven&apos;t deal with the conflict you mentioned.&lt;/p&gt;</comment>
                            <comment id="12736766" author="coderplay" created="Wed, 29 Jul 2009 19:22:32 +0000"  >&lt;p&gt;done&lt;/p&gt;</comment>
                            <comment id="12736767" author="coderplay" created="Wed, 29 Jul 2009 19:26:06 +0000"  >&lt;p&gt;that patch hasn&apos;t been tested, cuz I stay at home, can not connect to the company&apos;s vpn.&lt;/p&gt;</comment>
                            <comment id="12736848" author="namit" created="Wed, 29 Jul 2009 21:22:06 +0000"  >&lt;p&gt;Committed. Thanks Min&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414869" name="HIVE-702.1.patch" size="9232" author="coderplay" created="Wed, 29 Jul 2009 08:28:00 +0000"/>
                            <attachment id="12414936" name="HIVE-702.2.patch" size="9580" author="coderplay" created="Wed, 29 Jul 2009 19:22:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jul 2009 08:28:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73352</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122483</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-703] change unit tests to add &apos;DROP FUNCTION&apos; at the end which create a function</title>
                <link>https://issues.apache.org/jira/browse/HIVE-703</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;change unit tests to add &apos;DROP FUNCTION&apos; at the end which create a function&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431648">HIVE-703</key>
            <summary>change unit tests to add &apos;DROP FUNCTION&apos; at the end which create a function</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 00:06:43 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:59 +0000</updated>
                            <resolved>Wed, 29 Jul 2009 15:47:01 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12736673" author="namit" created="Wed, 29 Jul 2009 15:47:01 +0000"  >&lt;p&gt;Fixed as part of&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/browse/HIVE-700&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HIVE-700&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122484</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-704] join order should be based on table sizes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-704</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, hive uses the same order as specified by the user in the query.&lt;/p&gt;

&lt;p&gt;It would be great if that order can be based on the size of tables - largest table should be outermost table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431663">HIVE-704</key>
            <summary>join order should be based on table sizes</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 05:43:51 +0000</created>
                <updated>Thu, 30 Jul 2009 23:54:53 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12737365" author="zshao" created="Thu, 30 Jul 2009 23:54:53 +0000"  >&lt;p&gt;I think we can do this in two steps:&lt;/p&gt;

&lt;p&gt;1. Allow users to give a hint on which table is the &quot;large&quot; table that needs to have the largest tag;&lt;br/&gt;
2. Let hive automatically figure out the &quot;large&quot; table.&lt;/p&gt;

&lt;p&gt;1 will help us solve the following problem:&lt;br/&gt;
A usual case for join is like this: &quot;fact_table JOIN dim_table_1 JOIN dim_table_2 JOIN dim_table_3&quot;. Currently the only way to do that in Hive is to use sub queries for each join (since the &quot;large&quot; table needs to be on the right).&lt;br/&gt;
With 1 users don&apos;t need to rewrite the query using sub queries, but just need to give a hint.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jul 2009 23:54:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42757</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ojr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48576</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-705] Hive HBase Integration (umbrella)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-705</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Add a serde over the hbase&apos;s tables, so that hive can analyse the data stored in hbase easily.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431664">HIVE-705</key>
            <summary>Hive HBase Integration (umbrella)</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="hustlmsp">Sijie Guo</reporter>
                        <labels>
                            <label>HiveHBase</label>
                    </labels>
                <created>Wed, 29 Jul 2009 06:01:31 +0000</created>
                <updated>Thu, 24 Dec 2015 09:59:23 +0000</updated>
                            <resolved>Fri, 12 Mar 2010 19:55:06 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>33</watches>
                                                                <comments>
                            <comment id="12736467" author="he yongqiang" created="Wed, 29 Jul 2009 06:35:02 +0000"  >&lt;p&gt;Do we need to add a new serde for this? can you add more in the description?&lt;/p&gt;</comment>
                            <comment id="12736477" author="hustlmsp" created="Wed, 29 Jul 2009 06:54:06 +0000"  >&lt;p&gt;I will add more detail about this issue late.&lt;/p&gt;</comment>
                            <comment id="12736728" author="athusoo" created="Wed, 29 Jul 2009 18:04:55 +0000"  >&lt;p&gt;Also would be great if you could comment on how you plan to map the hbase data model to the sql data model (i.e. tables, columns etc.)&lt;/p&gt;

&lt;p&gt;This will be a cool contribution....&lt;/p&gt;

&lt;p&gt;SerDe would be the right way to go...&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Ashish&lt;/p&gt;</comment>
                            <comment id="12737453" author="hustlmsp" created="Fri, 31 Jul 2009 07:49:03 +0000"  >&lt;p&gt;The key problem to let hive analyse hbase&apos;s tables is how to map the hbase&apos;s data model to hive&apos;s sql data model.&lt;/p&gt;

&lt;p&gt;As we know, the hbase&apos;s data is accessed by &amp;lt;key, column_family:column_name, timestamp&amp;gt;. so a meta-data mapping should be recorded in hive&apos;s metadata, as below:&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
hbase&apos;s tablename -&amp;gt; hive&apos;s tablename&lt;br/&gt;
hbase&apos;s columns   -&amp;gt; hive&apos;s columns&lt;br/&gt;
hbase&apos;s key       -&amp;gt; hive&apos;s first column&lt;br/&gt;
hbase&apos;s timestamp -&amp;gt; hive&apos;s second column&lt;br/&gt;
-------------------------------------------------------&lt;/p&gt;

&lt;p&gt;The key and timestamp of hbase table will be mapped to &lt;b&gt;first two default columns&lt;/b&gt; in hive&apos;s table automatically. So the hbased-hive table may be like &amp;lt;.key, .timestamp, ..., other columns defined by users&amp;gt;.&lt;/p&gt;

&lt;p&gt;For example, a hbase table &apos;webpages&apos;, has columns &amp;lt;contents:page_content, anchors:&amp;gt;. There are 2 column families, &quot;contents&quot; and &quot;anchors&quot;. The content of table &apos;webpages&apos; is stored in column &apos;contents:page_content&apos;, the data is dense. And the anchors of a specified page will varied between different pages, so the data in &apos;anchros:&apos; will be sparse. &lt;br/&gt;
The columns of hbase&apos; table will be mapped manually be programmers : we can map a full column &amp;lt;column_family:column_name&amp;gt; in hbase to a &lt;b&gt;primitive_type&lt;/b&gt; column in hive, while mapping a column family &amp;lt;column_family:&amp;gt; in hbase to a &lt;b&gt;map_type&lt;/b&gt; column in hive. So the hbase table webpages&apos; hive schema will be (.key, .timestamp, page_content, anchors).&lt;/p&gt;

&lt;p&gt;Setting up schema mapping between hbase table and hive table, we need to consider how to record the shema mapping, serialize the hive object to hbase table and deserialize hbase&apos;s data to hive object.&lt;/p&gt;

&lt;p&gt;The proposal is to add a new HbaseSerDe for recording the schema mapping in SerDe properties. So the SerDe can use its schema mapping to serialize the hive object to hbase&apos;s table and deserialize hbase&apos;s data to hive object.&lt;/p&gt;

&lt;p&gt;The properties in HBaseSerDe will be:&lt;br/&gt;
1)  &quot;hbase.key.type&quot; : the type of .key column in hive table, defining how to deserialize the .key field from hbase&apos;s key. (the hbase key is a bytes array)&lt;br/&gt;
2)  &quot;hbase.schema.mapping&quot; : a string separated by comma, defining the shema mapping. The schema will be mapped in order one by one.&lt;/p&gt;

&lt;p&gt;These properites should be provided during creating a hbased-hive table. If the &quot;hbase.key.type&quot; is not defined, we treat it as a string. But if the &quot;hbase.schema.mapping&quot; is not defined, we should fail the table creation because we do not how to deserialize hive object from hbase raw bytes data.&lt;/p&gt;

&lt;p&gt;A hbased-hive table&apos;s operations are showed as below:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1.  Using existed hbase table as an external table in hive&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The &apos;create&apos; command will be as below:&lt;/p&gt;

&lt;p&gt;-----------------------------&lt;/p&gt;

&lt;p&gt;CREATE EXTERNAL TABLE webpages(page_content STRING, anchors MAP&amp;lt;STRING, STRING&amp;gt;)&lt;br/&gt;
COMMENT &apos;This is the pages table&apos;&lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.HBaseSerDe&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
	&quot;hbase.key.type&quot; = &quot;string&quot;,&lt;br/&gt;
	&quot;hbase.columns.mapping&quot; = &quot;contents:page_content,anchors:&quot;,&lt;br/&gt;
)&lt;br/&gt;
STORED AS HBASETABLE&lt;br/&gt;
LOCATION &apos;&amp;lt;hbase_table_location&amp;gt;&apos;&lt;/p&gt;

&lt;p&gt;-----------------------------&lt;br/&gt;
Here the hbase_table_location will identify the location of hbase and the hbase table name, such as &quot;hbase:/hbase_master:port/hbase_tablename&quot;.&lt;/p&gt;

&lt;p&gt;And after creating an external table using an existing hbase table, we can do analysis over the table like normal hive table.&lt;/p&gt;

&lt;p&gt;A. Get all the urls and their pages that added after a specified time t1.&lt;/p&gt;

&lt;p&gt;SELECT .key, page_content FROM webpages WHERE .timestamp &amp;gt; t1;&lt;/p&gt;

&lt;p&gt;B. Get the revisions of a specified url &amp;lt;www.apache.org&amp;gt; from a specified time t1 to a specified time t2.&lt;/p&gt;

&lt;p&gt;SELECT page_content FROM webpages WHERE .timestamp &amp;gt; t1 AND .timestamp &amp;lt; t2 AND .key = &apos;www.apache.org&apos;;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2. Creating a new hbase table as a hive table.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The &apos;create&apos; command will be as below:&lt;/p&gt;

&lt;p&gt;-----------------------------&lt;/p&gt;

&lt;p&gt;CREATE TABLE webpages(page_content STRING, anchors MAP&amp;lt;STRING, STRING&amp;gt;)&lt;br/&gt;
COMMENT &apos;This is the pages table&apos;&lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.HBaseSerDe&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
	&quot;hbase.key.type&quot; = &quot;string&quot;,&lt;br/&gt;
	&quot;hbase.columns.mapping&quot; = &quot;contents:page_content,anchors:&quot;,&lt;br/&gt;
)&lt;br/&gt;
STORED AS HBASETABLE&lt;br/&gt;
LOCATION &apos;&amp;lt;hbase_table_location&amp;gt;&apos;&lt;/p&gt;

&lt;p&gt;-----------------------------&lt;/p&gt;

&lt;p&gt;After invoking the &apos;create&apos; command, the hive client will also create a hbase table in the specified hbase cluster. And the created hbase table will have two column families defined in HBaseSerDe properties, &quot;contents:&quot; and &quot;anchros:&quot;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3. Loading data into tables.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;As we have two default hidden column (.key, .timestamp) in hbased-hive table, we must count these two columns in during inserting data. &lt;br/&gt;
We can eigth load data into hbased-hive table by inserting data from other tables or loading data from local filesystem. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;A. Inserting data from other tables.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;for example, we have a &apos;crawled_pages&apos; table collecting all the pages crawled from the internet. the &apos;crawled_pages&apos; is simple: &amp;lt;url, crawled_date, page_content&amp;gt;. &lt;/p&gt;

&lt;p&gt;I. If we want to load all this data into the &apos;webpages&apos; table, we will invoke the command as below:&lt;/p&gt;

&lt;p&gt;FROM crawled_pages cp &lt;br/&gt;
    INSERT TABLE webpages&lt;br/&gt;
    SELECT cp.url, cp.crawled_date, cp.page_content, null;&lt;/p&gt;

&lt;p&gt;II. If we do not want to specified the time during inserting these data, we can simply set the .timestamp column to &apos;null&apos;, as below:&lt;/p&gt;

&lt;p&gt;FROM crawled_pages cp&lt;br/&gt;
     INSERT TABLE webpages&lt;br/&gt;
     SELECT cp.url, null, cp.page_content, null;&lt;/p&gt;

&lt;p&gt;III. Crazily, if the .key column provided is null, we may throw out errors to client or just skipping the bad records?&lt;/p&gt;

&lt;p&gt;FORM crawled_pages cp&lt;br/&gt;
     INSERT TABLE webpages&lt;br/&gt;
     SELECT null, null, cp.page_content, null;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;B. Loading data from local filesystem (or hdfs)&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Now hive just copy/move the file to the specified dir of a hive table. But we should forbbiden it during loading data into a hbased-hive table.&lt;/p&gt;

&lt;p&gt;if we want to loading data from files in local filesystem (or hdfs) into hbased-hive tables, we can do as below:&lt;/p&gt;

&lt;p&gt;I. create a temp external table for the original data(files).&lt;br/&gt;
II. load data into the hbased-hive table using &apos;insert&apos; from the temp external table.&lt;/p&gt;

&lt;p&gt;4.  Performance Improvements&lt;br/&gt;
Some improvements may be considered during analysing hbase tables.for example, hbase key is an index to access data that can be used to accelerating hive. No clearly.&lt;/p&gt;

&lt;p&gt;-----------------------------&lt;/p&gt;

&lt;p&gt;forget my pool english, and welcome for comments.&lt;/p&gt;</comment>
                            <comment id="12741030" author="hustlmsp" created="Sun, 9 Aug 2009 06:05:10 +0000"  >&lt;p&gt;Attach my patch.&lt;/p&gt;

&lt;p&gt;There is a little different with my previous proposal.&lt;/p&gt;

&lt;p&gt;creating a table will be:&lt;/p&gt;

&lt;p&gt;-------------------------------------&lt;br/&gt;
CREATE EXTERNAL TABLE webpages(pageURL STRING, page_content STRING, anchors MAP&amp;lt;STRING, STRING&amp;gt;)&lt;br/&gt;
COMMENT &apos;This is the pages table&apos;&lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.HBaseSerDe&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
&quot;hbase.columns.mapping&quot; = &quot;contents:page_content,anchors:&quot;,&lt;br/&gt;
)&lt;br/&gt;
STORED AS HBASETABLE&lt;br/&gt;
LOCATION &apos;&amp;lt;hbase_table_location&amp;gt;&apos;&lt;br/&gt;
--------------------------------------&lt;/p&gt;

&lt;p&gt;The first field defined in the hive table will be mapped to hbase&apos;s table key and the left fields will be mapped to the hbase columns specified in serde properties named &quot;hbase.columns.mapping&quot;.&lt;/p&gt;

&lt;p&gt;And the timestamp field is not added now. I just retrieve the latest version of each hbase cell from a hbase table now.&lt;/p&gt;


</comment>
                            <comment id="12741431" author="schubertzhang" created="Mon, 10 Aug 2009 17:24:27 +0000"  >&lt;p&gt;Hi Samuel,&lt;/p&gt;

&lt;p&gt;Thanks for your great job.&lt;br/&gt;
In you patch, we found many java files are modified, it is really a big effort. I don&apos;t know if there is any way to avoid such a big modification.&lt;/p&gt;

&lt;p&gt;Regards the schema mapping between HBase table and Hive SQL table, I have following consideration.&lt;br/&gt;
1. We just want to use HBase as a scalable structure data store, or key-value store.&lt;br/&gt;
2. The performance is not good when we maped SQL columns to HBase columns in our past experience. For example, we have a table with 20 columns, then, each read or write of a row will comprise 20 key-value operations. It is ineffective.&lt;/p&gt;

&lt;p&gt;How about consider more flexible schema mapping:&lt;br/&gt;
1. one HBase column can map to multiple hive-SQL columns with a SerDe. e.g.  cf1:q1 =&amp;gt; &lt;/p&gt;
{(col1, col2, col3), Default SerDe}
&lt;p&gt; &lt;br/&gt;
2. one HBase column family can map to multiple hive-SQL columns with a SerDe. e.g. cf2: =&amp;gt; &lt;/p&gt;
{(col3, col5, col6), Default SerDe}
&lt;p&gt; &lt;br/&gt;
3. your MAP column (in Hive table) for sparse column family. &lt;span class=&quot;error&quot;&gt;&amp;#91;Optional&amp;#93;&lt;/span&gt; Since Hive is a structured data analysis front-end, we can omit this feature at the beginning.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;CREATE EXTERNAL TABLE hive_table (pkey STRING,  col1 STRING, col2 INT, col2, STRING, col3 INT, col4 STRING)&lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.MyHBaseSerDe&apos;&lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
&quot;hbase.columns.mapping&quot; = &quot;cf1:(col1,col2,col3) with DefaultSerDe, cf2:c1 (col4) with DefaultSerDe&quot;,&lt;br/&gt;
)&lt;br/&gt;
STORED AS HBASETABLE&lt;br/&gt;
LOCATION &apos;&amp;lt;hbase_table_location&amp;gt;&apos;&lt;/p&gt;

&lt;p&gt;Usually,  we want a more advanced data store backend than HDFS, to achieve more flexible data placement and indexing. HBase&apos;s data model is very good to meet this requirement, but we may need not the full fearures of HBase here.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
Look forward to have more communication with you in Chinese, by your convenience.&lt;/p&gt;

&lt;p&gt;Schubert&lt;/p&gt;</comment>
                            <comment id="12741655" author="he yongqiang" created="Tue, 11 Aug 2009 01:18:34 +0000"  >&lt;p&gt;Samuel, i am now in ShangHai attending a meeting. I will talk with you on phone asap when i get back. Thanks for the quick fix. &lt;/p&gt;</comment>
                            <comment id="12741672" author="hustlmsp" created="Tue, 11 Aug 2009 03:05:30 +0000"  >&lt;p&gt;@schubert,&lt;/p&gt;

&lt;p&gt;Thank you for you comment.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; In you patch, we found many java files are modified, it is really a big effort. I don&apos;t know if there is any way to avoid such a big modification.&lt;br/&gt;
A HBase Table is quite different with a file in HDFS. The original Hive code is based on files. For example, when outputting the reduce results to the target table, Hive uses a FileSinkOperator to output the results to the temp file in the HDFS, and uses a MoveTask to rename the temp files in the HDFS to the target table dir. But when the the target table is based on a HBase Table, we do not need to deal with these file operations, and just output to the target HBase Table.&lt;/p&gt;

&lt;p&gt;The modification of the original java files is to tell hive to deal with a hbase table in a differnt way. &lt;/p&gt;

&lt;p&gt;I will try to look into the code and find a way to avoid the modification.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; 2. The performance is not good when we maped SQL columns to HBase columns in our past experience. For example, we have a table with 20 columns, then, each read or write of a row will comprise 20 key-value operations. It is ineffective.&lt;/p&gt;

&lt;p&gt;A good point. The schema mapping does not effect the peformance during creating a hive table. The performance is effected if we get all the mapping columns out of hbase table in an actual query operation. Some code will be added to do the column-prune during hbase table scanning.&lt;/p&gt;

&lt;p&gt;For example, an hbase table (cf1:(co1, col2, col3), cf2:(col4,col5,col6), ... , cfn:(colk,colj,coll)) is mapping to a hive table (column1, column2, column3, column4, ... ,column n).&lt;br/&gt;
If a query &quot;select column3, column4 from hbasedhivetable&quot; is invoked, we should not let hbase scan out all the columns. We know all the hive columns used in the query, map back to the hbase column, and get the scanning list &quot;cf1:col3 cf2:col4&quot;. We set the scanning list &quot;cf1:col3 cf2:col4&quot; in the HBaseInputFormat to let HBase just scan out the useful columns.&lt;/p&gt;

&lt;p&gt;The code will be added in the new patch.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; cf2: =&amp;gt; &lt;/p&gt;
{(col3, col5, col6), Default SerDe}
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;Cool. Let different SerDe work on different hbase column.  I will try it in the new patch.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; Look forward to have more communication with you in Chinese, by your convenience.&lt;br/&gt;
My Gtalk is : sijie0413@gmail.com&lt;/p&gt;</comment>
                            <comment id="12742106" author="athusoo" created="Tue, 11 Aug 2009 22:49:33 +0000"  >&lt;p&gt;The data model mapping works. I have one suggestion though. Can we infer the columns list of the hive table from the hbase table instead of explicitly stating it in the create command. My concerns is that an addition of a column family in hbase will require an alter table on hive and if we can avoid it that would be great.&lt;/p&gt;</comment>
                            <comment id="12742191" author="hustlmsp" created="Wed, 12 Aug 2009 03:02:10 +0000"  >&lt;p&gt;@Ashish&lt;/p&gt;

&lt;p&gt;Thank you for your comment. &lt;br/&gt;
It is difficult to infer the columns list from a sparse column hbase table, we do not know exactly how many columns in a given hbase table. We just know all the column families of a given hbase table. &lt;br/&gt;
Also, the data in hbase are all raw bytes. If we do not explicitly stat the schema mapping, we will lose the information how to serialize/deserialize the data from raw bytes.&lt;/p&gt;</comment>
                            <comment id="12742697" author="kula" created="Thu, 13 Aug 2009 03:49:47 +0000"  >&lt;p&gt;Hi Samuel,&lt;/p&gt;

&lt;p&gt;Thanks for your great job.&lt;br/&gt;
I found some error when testing your patch.&lt;/p&gt;

&lt;p&gt;The sql statements are from the file : &quot;ql/src/test/queries/clienthbase/hbase_queries.q&quot;.&lt;br/&gt;
I created a table named &quot;hbase_table_1&quot; using the following statement:&lt;/p&gt;

&lt;p&gt;CREATE TABLE hbase_table_1(key int, value string) &lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.hbase.HBaseSerDe&apos; &lt;br/&gt;
WITH SERDEPROPERTIES (&lt;br/&gt;
&quot;hbase.columns.mapping&quot; = &quot;cf:string&quot;&lt;br/&gt;
) STORED AS HBASETABLE;&lt;/p&gt;

&lt;p&gt;OK. Then I inserted data into &quot;hbase_table_1&quot;. &lt;/p&gt;

&lt;p&gt;hive&amp;gt; FROM src INSERT OVERWRITE TABLE hbase_table_1 SELECT *;&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Number of reduce tasks is set to 0 since there&apos;s no reduce operator&lt;br/&gt;
Starting Job = job_200908131113_0002, Tracking URL = &lt;a href=&quot;http://localhost:50030/jobdetails.jsp?jobid=job_200908131113_0002&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:50030/jobdetails.jsp?jobid=job_200908131113_0002&lt;/a&gt;&lt;br/&gt;
Kill Command = /home/stephen/hadoop-0.19.2/bin/../bin/hadoop job  -Dmapred.job.tracker=localhost:9001 -kill job_200908131113_0002&lt;br/&gt;
2009-08-13 11:17:07,162 map = 0%,  reduce =0%&lt;br/&gt;
2009-08-13 11:17:14,200 map = 50%,  reduce =0%&lt;br/&gt;
2009-08-13 11:17:15,215 map = 100%,  reduce =0%&lt;br/&gt;
Ended Job = job_200908131113_0002&lt;br/&gt;
500 Rows loaded to hbase_table_1&lt;br/&gt;
OK&lt;/p&gt;

&lt;p&gt;When I tried to do some queries. I found the following error message:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; select * from hbase_table_1 where value &amp;gt; &apos;0&apos;;         &lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Number of reduce tasks is set to 0 since there&apos;s no reduce operator&lt;br/&gt;
Starting Job = job_200908131113_0003, Tracking URL = &lt;a href=&quot;http://localhost:50030/jobdetails.jsp?jobid=job_200908131113_0003&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:50030/jobdetails.jsp?jobid=job_200908131113_0003&lt;/a&gt;&lt;br/&gt;
Kill Command = /home/stephen/hadoop-0.19.2/bin/../bin/hadoop job  -Dmapred.job.tracker=localhost:9001 -kill job_200908131113_0003&lt;br/&gt;
2009-08-13 11:18:24,019 map = 0%,  reduce =0%&lt;br/&gt;
2009-08-13 11:18:42,146 map = 100%,  reduce =100%&lt;br/&gt;
Ended Job = job_200908131113_0003 with errors&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.ExecDriver&lt;/p&gt;

&lt;p&gt;The following message is found in the mapreduce log:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.mapred.TableInputFormat.configure(TableInputFormat.java:52)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.io.HiveHBaseTableInputFormat.configure(HiveHBaseTableInputFormat.java:36)&lt;br/&gt;
	at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:58)&lt;br/&gt;
	at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:83)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.io.HiveInputFormat.getInputFormatFromCache(HiveInputFormat.java:184)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.io.HiveInputFormat.getRecordReader(HiveInputFormat.java:211)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:331)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:158)&lt;/p&gt;

&lt;p&gt;There is another query, nothing returned.&lt;br/&gt;
hive&amp;gt; select * from hbase_table_1;&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 2.952 seconds&lt;/p&gt;</comment>
                            <comment id="12742704" author="naiteix" created="Thu, 13 Aug 2009 04:04:35 +0000"  >&lt;p&gt;Hi Samuel, &lt;/p&gt;

&lt;p&gt;  Also, I found the same problem as Kula.&lt;br/&gt;
  I changed one line in the method HiveInputFormat::getSplits,&lt;/p&gt;

&lt;p&gt;&amp;#8212;     newjob.set(TableInputFormat.COLUMN_LIST, hbaseColumns);&lt;br/&gt;
+++  job.set(TableInputFormat.COLUMN_LIST, hbaseColumns);&lt;/p&gt;

&lt;p&gt;  Then the above java exception disappered, select is ok.&lt;/p&gt;

&lt;p&gt;  But when I tested more than 2 columns, the query returned nothing.&lt;/p&gt;

&lt;p&gt;CREATE TABLE hbase_table_2(key int, value1 string, value2 int) &lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.hbase.HBaseSerDe&apos; &lt;br/&gt;
WITH SERDEPROPERTIES (&quot;hbase.columns.mapping&quot; = &quot;cf:value1, cf:value2&quot;&lt;br/&gt;
) STORED AS HBASETABLE;&lt;br/&gt;
FROM src2 INSERT OVERWRITE TABLE hbase_table_2 SELECT *;&lt;/p&gt;

&lt;p&gt;The following 2 queries both returned nothing.&lt;br/&gt;
select * from hbase_table_2 where value &amp;gt; &apos;0&apos;;&lt;br/&gt;
select * from hbase_table2;&lt;/p&gt;</comment>
                            <comment id="12742720" author="hustlmsp" created="Thu, 13 Aug 2009 05:12:11 +0000"  >&lt;p&gt;@kula @stephen&lt;br/&gt;
Thank you all for your comments.&lt;/p&gt;

&lt;p&gt;1) As stephen methioned, the NullPointerException is thrown out because the COLUMN_LIST is set in the wrong job configuration.&lt;br/&gt;
I will fixed it in the new path.&lt;/p&gt;

&lt;p&gt;2) It seems that &quot;select *&quot; statement is buggy now. I will find out the problem and fix it.&lt;/p&gt;</comment>
                            <comment id="12746592" author="hustlmsp" created="Sun, 23 Aug 2009 12:20:20 +0000"  >&lt;p&gt;Attach a new patch.&lt;/p&gt;

&lt;p&gt;1) move the related hbase code to the contrib package, as hbase just an optional storage for hive, not neccessary.&lt;br/&gt;
I have tried to avoid modifying the hive original code and just add a hbase serde to connect hive with hbase. But the hbase storage model is quite different with file storage model. For example, a loadwork is used to rename/copy files from temp dir to the target table&apos;s dir if a query&apos;s target is a hive table. But in a hbased hive table, we can&apos;t rename a table now. So it&apos;s hard to let a hbased hive table to follow the logic of a normal file-based hive table.  So I add some code(HiveFormatUtils) to distinguish a file-based table from a not-file-based table.&lt;/p&gt;

&lt;p&gt;2) fix some bugs in the draft patch, such as &quot;select *&quot; return nothing.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;How to use the hbase as hive&apos;s storage?&lt;/p&gt;

&lt;p&gt;1) remember to add the contrib jar and the hbase jar in the hive&apos;s auxPath, so m/r can populate the neccessary hbase-related jars to the whole hadoop m/r cluster.&lt;/p&gt;

&lt;p&gt;&amp;gt; $HIVE_HOME/bin/hive -auxPath ${contrib_jar},${hbase_jar}&lt;/p&gt;

&lt;p&gt;2) modify the configuration to add the following configuration parameters.&lt;/p&gt;

&lt;p&gt;&quot;hbase.master&quot; : pointer to the hbase&apos;s master.&lt;br/&gt;
&quot;hive.othermetadata.handlers&quot; : &quot;org.apache.hadoop.hive.contrib.hbase.HiveHBaseTableInputFormat:org.apache.hadoop.hive.contrib.hbase.HBaseMetadataHandler&quot;&lt;/p&gt;

&lt;p&gt;&quot;hive.othermetadata.handlers&quot; collects the metadata handlers to handle the other metadata operations in the not-file-based hive tables. Take hbase as an example. HBaseMetadataHandler will create the neccessary hbase table and its family columns when we create a hbased hive table from hive&apos;s client. It also drop the hbase table when we drop the hive table.&lt;/p&gt;

&lt;p&gt;The metastore read the registered handlers map from the configuration file during initialization. The registered handlers map is formated as &quot;table_format_classname:table_metadata_handler_classname,table_format_classname:table_metadata_handler_classname,...&quot;.&lt;/p&gt;

&lt;p&gt;3) enjoy &quot;hive over hbase&quot;!&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Other problems.&lt;/p&gt;

&lt;p&gt;1) Altering a hased-hive table is not supported now. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
renaming a table in hbase is not supported now, so I just do not support rename operation. ( maybe if we rename a hive table, we do not need to rename the base hbase table.)&lt;/p&gt;

&lt;p&gt;adding/replacing cloumns.&lt;br/&gt;
Now we need to specify the schema mapping in the SerDe properties explicitly. If we want to adding columns, we need to call &apos;alter&apos; twice to adding columns: change the serde properties and the hive columns.  Either change the serde properties first or change the hive columns first will fail now, because we validate the schema mapping during SerDe initialization. One of the hbase serde validation is to check the counts of hive columns and hbase mapping columns. If we first change the hive columns, the number of hive columns will be more than hbase mapping columns, the HBase Serde initialization will fail this alter operation.  (maybe we need to remove the validation code from HBaseSerDe initialization and do it in other place?)&lt;/p&gt;

&lt;p&gt;2) more flexible schema mapping?&lt;br/&gt;
As Schubert metioned before, more flexible schema mapping will be useful for user. This feature will be added later.&lt;/p&gt;


&lt;p&gt;welcome for comments~&lt;/p&gt;

</comment>
                            <comment id="12751283" author="naiteix" created="Fri, 4 Sep 2009 03:35:13 +0000"  >&lt;p&gt;Hi, Samuel&lt;/p&gt;

&lt;p&gt;    Thankx very much for your new patch.&lt;br/&gt;
    There are some problem when i used it as the following,&lt;/p&gt;

&lt;p&gt;1. create table src(key int, value string);&lt;br/&gt;
ok&lt;br/&gt;
2. LOAD DATA LOCAL INPATH &apos;./examples/files/kv1.txt&apos; OVERWRITE INTO TABLE src;&lt;br/&gt;
ok&lt;br/&gt;
3. CREATE TABLE hbase_table_1(key int, value string) &lt;br/&gt;
ROW FORMAT SERDE &apos;org.apache.hadoop.hive.contrib.hbase.HBaseSerDe&apos; &lt;br/&gt;
WITH SERDEPROPERTIES (&quot;hbase.columns.mapping&quot; = &quot;cf:string&quot;&lt;br/&gt;
) STORED AS HBASETABLE;&lt;br/&gt;
ok&lt;br/&gt;
4.FROM src INSERT OVERWRITE TABLE hbase_table_1 SELECT *;&lt;br/&gt;
FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.ExecDriver&lt;/p&gt;

&lt;p&gt;I found error in the m/r map process, just as the following,&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: Map operator initialization failed&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecMapper.configure(ExecMapper.java:110)&lt;br/&gt;
	at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:58)&lt;br/&gt;
	at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:83)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)&lt;br/&gt;
	at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:58)&lt;br/&gt;
	at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:83)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:338)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:158)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.FileSinkOperator.initializeOp(FileSinkOperator.java:165)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:308)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:345)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:330)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.SelectOperator.initializeOp(SelectOperator.java:58)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:308)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:345)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:330)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initializeOp(Operator.java:316)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:308)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.MapOperator.initializeOp(MapOperator.java:289)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:308)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.ExecMapper.configure(ExecMapper.java:82)&lt;br/&gt;
	... 7 more&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.FileSinkOperator.initializeOp(FileSinkOperator.java:88)&lt;br/&gt;
	... 19 more&lt;/p&gt;</comment>
                            <comment id="12751876" author="hustlmsp" created="Sun, 6 Sep 2009 10:54:40 +0000"  >&lt;p&gt;@stephen:&lt;/p&gt;

&lt;p&gt;Did you set the configuration parameter &apos; &quot;hive.othermetadata.handlers&quot; : &quot;org.apache.hadoop.hive.contrib.hbase.HiveHBaseTableInputFormat:org.apache.hadoop.hive.contrib.hbase.HBaseMetadataHandler&quot; &apos;?&lt;/p&gt;

&lt;p&gt;I am sorry that I have other things to handle these days. I will fix the bug immediately if I have time.&lt;/p&gt;</comment>
                            <comment id="12751898" author="naiteix" created="Sun, 6 Sep 2009 13:06:41 +0000"  >&lt;p&gt;Hi, Samuel&lt;/p&gt;

&lt;p&gt;    Before the testing, I have set the configuration parameter &apos; &quot;hive.othermetadata.handlers&quot; the same as your said.&lt;br/&gt;
    Thanks.&lt;/p&gt;</comment>
                            <comment id="12752325" author="hustlmsp" created="Tue, 8 Sep 2009 03:51:37 +0000"  >&lt;p&gt;@stephen&lt;/p&gt;

&lt;p&gt;I have run the patch on my notebook. But I did not encounter the NullPointerException mentioned in your comment. &lt;br/&gt;
Can you send me the hive log and the userlogs of the mr job &apos;FROM src INSERT OVERWRITE TABLE hbase_table_1 SELECT *;&apos; ?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12752340" author="naiteix" created="Tue, 8 Sep 2009 05:24:22 +0000"  >&lt;p&gt;thanks very much for Samuel&apos;s help.&lt;br/&gt;
The issue above has been resolved.&lt;br/&gt;
In the distributed test environment, running hive command must be added the parameter --auxpath hive_contrib.jar,hbase.jar.&lt;/p&gt;</comment>
                            <comment id="12781115" author="hustlmsp" created="Sun, 22 Nov 2009 11:08:08 +0000"  >&lt;p&gt;Attach a new patch for trunk.&lt;/p&gt;</comment>
                            <comment id="12806193" author="jvs" created="Fri, 29 Jan 2010 02:20:10 +0000"  >&lt;p&gt;I&apos;m going to start working on getting this ready for submission against latest trunk.&lt;/p&gt;</comment>
                            <comment id="12832731" author="jvs" created="Thu, 11 Feb 2010 23:31:21 +0000"  >&lt;p&gt;Here&apos;s the result of rebasing the old patch to apply against latest trunk.  This is NOT intended for submission; it&apos;s just a checkpoint of the rebasing work for anyone who needs it.  For the real submission, I&apos;ll be doing quite a bit of refactoring to generalize the concept of plugging in external storage, and possibly other concepts from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1133&quot; title=&quot;Refactor InputFormat and OutputFormat for Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1133&quot;&gt;HIVE-1133&lt;/a&gt; based on pending discussions.&lt;/p&gt;

&lt;p&gt;Notable changes from the old patch:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;update to require HBase 0.20.3, resulting in new zookeeper dependency (I&apos;m testing with zookeeper 3.2.2)&lt;/li&gt;
	&lt;li&gt;eliminated parser changes; they&apos;ll probably come back in a more general form something like STORED BY &apos;storage-handler-class&apos; which will encapsulate the combination of inputformat, outputformat, metastore hooks, and optimizer interaction such as filter/predicate pushdown&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12836323" author="jbellis" created="Sun, 21 Feb 2010 05:10:40 +0000"  >&lt;p&gt;ISTM that merging the HBase columnfamilies into a single Hive table is the wrong approach and could lead to poor performance; rather, each HBase CF should be its own Hive table, which may of course be joined with others as necessary.  (I think using the word &quot;table&quot; for HBase&apos;s &quot;collection of CFs&quot; is unfortunate in the first place since they are different animals; fundamentally, the basic unit of data access in HBase is the CF.)&lt;/p&gt;

&lt;p&gt;I&apos;m interested because Cassandra is also looking at adding Hive support, and we also implement a ColumnFamily data model.&lt;/p&gt;</comment>
                            <comment id="12836828" author="jvs" created="Mon, 22 Feb 2010 18:54:41 +0000"  >&lt;p&gt;Jonathan, thanks for the input.  I think we should be able to come up with a mapping feature which encompasses what you&apos;ve proposed plus what&apos;s in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-806&quot; title=&quot;Hive with HBase as data store to support MapReduce and direct query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-806&quot;&gt;&lt;del&gt;HIVE-806&lt;/del&gt;&lt;/a&gt; so that it will be up to the user to decide how to map a particular set of HBase tables into Hive.&lt;/p&gt;

&lt;p&gt;We can do this by allowing the HBase table name to be specified as part of mapping it into Hive.  That way, you can have&lt;/p&gt;

&lt;p&gt;Hive t1(c1, c2) -&amp;gt; HBase t.cf1(c1, c2)&lt;br/&gt;
Hive t2(c3, c4) -&amp;gt; HBase t.cf2(c3, c4)&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;Hive t(c1,c2,c3,c4) -&amp;gt; HBase t(cf1(c1, c2), cf2(c3, c4))&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;Hive t(cf1map, cf2map) -&amp;gt; HBase t(cf1, cf2)&lt;/p&gt;

&lt;p&gt;or variations.  I&apos;m going to write up a proposal in the Hive wiki and solicit feedback.&lt;/p&gt;</comment>
                            <comment id="12836941" author="jvs" created="Mon, 22 Feb 2010 22:06:53 +0000"  >&lt;p&gt;BTW, the new STORED BY &apos;storage-handler-class&apos; should make it easy to plug in Cassandra.&lt;/p&gt;</comment>
                            <comment id="12840436" author="jvs" created="Wed, 3 Mar 2010 03:06:50 +0000"  >&lt;p&gt;First draft of the patch ready for review.  Reviewers, please read these two accompanying docs:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/HBaseIntegration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/HBaseIntegration&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/hadoop/Hive/StorageHandlers&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hive/StorageHandlers&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that for this to be committed, it needs the accompanying, which I have also attached:&lt;/p&gt;

&lt;p&gt;hbase-0.20.3.jar&lt;br/&gt;
hbase-0.20.3-test.jar&lt;br/&gt;
zookeeper-3.2.2.jar&lt;/p&gt;

&lt;p&gt;These should be committed to trunk/hbase-handler/lib&lt;/p&gt;</comment>
                            <comment id="12840437" author="jvs" created="Wed, 3 Mar 2010 03:07:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-705&quot; title=&quot;Hive HBase Integration (umbrella)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-705&quot;&gt;&lt;del&gt;HIVE-705&lt;/del&gt;&lt;/a&gt;.2.patch&lt;/p&gt;</comment>
                            <comment id="12840832" author="prasadc" created="Wed, 3 Mar 2010 19:38:32 +0000"  >&lt;p&gt;John, Why are pre, commit, rollback functions needed in MetaHook? Isn&apos;t it enough just to drop table as a rollback for create, and do the drop table after hive drop table? With the current definition the MetaHook implementation needs to keep state around which Hive itself doesn&apos;t do.&lt;/p&gt;

&lt;p&gt;Also alter table on external tables should be allowed since underlying storage format for external tables is not managed by Hive itself. In such cases alter table is just changing metadata in side Hive.&lt;/p&gt;</comment>
                            <comment id="12840848" author="jvs" created="Wed, 3 Mar 2010 20:13:16 +0000"  >&lt;p&gt;Prasad, the MetaHook interface is defined that way so that if a handler wants to, it can carry out the operation in a stateful fashion (e.g. if its underlying catalog supports transactions), but there is no requirement for it to keep state, and in fact the HBaseStorageHandler implementation is itself stateless (and has a NOP for three of its method implementations).&lt;/p&gt;

&lt;p&gt;Alter table:  yes, I&apos;m planning to create a followup task for this.  The original patch had alter table support in the meta hook interface too, but I trimmed it down for now to limit the scope of the first commit.&lt;/p&gt;
</comment>
                            <comment id="12840993" author="jvs" created="Thu, 4 Mar 2010 01:47:42 +0000"  >&lt;p&gt;While testing, found a few bugs in HBaseSerDe.serialize for the case where a Hive map is being converted into an HBase column family; I&apos;ll fix these together with whatever comes out of review.&lt;/p&gt;</comment>
                            <comment id="12841668" author="jvs" created="Fri, 5 Mar 2010 02:44:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-705&quot; title=&quot;Hive HBase Integration (umbrella)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-705&quot;&gt;&lt;del&gt;HIVE-705&lt;/del&gt;&lt;/a&gt;.3.patch resolves a conflict with trunk, fixes some serde bugs, and adds more tests.&lt;/p&gt;</comment>
                            <comment id="12841975" author="jvs" created="Fri, 5 Mar 2010 18:55:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-705&quot; title=&quot;Hive HBase Integration (umbrella)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-705&quot;&gt;&lt;del&gt;HIVE-705&lt;/del&gt;&lt;/a&gt;.4.patch fixes hbase-handler/ivy.xml&lt;/p&gt;</comment>
                            <comment id="12843474" author="jvs" created="Wed, 10 Mar 2010 08:14:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-705&quot; title=&quot;Hive HBase Integration (umbrella)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-705&quot;&gt;&lt;del&gt;HIVE-705&lt;/del&gt;&lt;/a&gt;.5.patch:  fix conflict with latest trunk, and do some more cleanup.&lt;/p&gt;</comment>
                            <comment id="12843594" author="jbellis" created="Wed, 10 Mar 2010 15:37:10 +0000"  >&lt;p&gt;Thanks John, I read your wiki notes and it does look like this will work fine for Cassandra at least at the conceptual level.&lt;/p&gt;

&lt;p&gt;Is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-806&quot; title=&quot;Hive with HBase as data store to support MapReduce and direct query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-806&quot;&gt;&lt;del&gt;HIVE-806&lt;/del&gt;&lt;/a&gt; redundant w/ your latest patchset now?&lt;/p&gt;</comment>
                            <comment id="12843680" author="namit" created="Wed, 10 Mar 2010 18:26:19 +0000"  >&lt;p&gt;John, can you file the follow-up jiras ?&lt;/p&gt;</comment>
                            <comment id="12843702" author="jvs" created="Wed, 10 Mar 2010 18:59:16 +0000"  >&lt;p&gt;@Jonathan:  I haven&apos;t seen any patch uploaded for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-806&quot; title=&quot;Hive with HBase as data store to support MapReduce and direct query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-806&quot;&gt;&lt;del&gt;HIVE-806&lt;/del&gt;&lt;/a&gt;.  The comments indicate that they have a way to customize the serialization per column in HBase, which could be interesting, but it&apos;s non-essential.  Once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-705&quot; title=&quot;Hive HBase Integration (umbrella)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-705&quot;&gt;&lt;del&gt;HIVE-705&lt;/del&gt;&lt;/a&gt; gets committed, I&apos;ll post a comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-806&quot; title=&quot;Hive with HBase as data store to support MapReduce and direct query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-806&quot;&gt;&lt;del&gt;HIVE-806&lt;/del&gt;&lt;/a&gt; and ask whether they want to keep it open or abandon it.&lt;/p&gt;

&lt;p&gt;@Namit:  will do.&lt;/p&gt;</comment>
                            <comment id="12843773" author="jvs" created="Wed, 10 Mar 2010 21:14:42 +0000"  >&lt;p&gt;Followup JIRA issues have been logged and linked to this one as related.&lt;/p&gt;</comment>
                            <comment id="12843826" author="namit" created="Wed, 10 Mar 2010 23:24:09 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; :: problems summary ::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; :::: WARNINGS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;          module not found: hadoop#hbase;${hbase.version}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;  ==== hadoop-source: tried&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &amp;#8211; artifact hadoop#hbase;${hbase.version}!hbase.tar.gz(source):&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &lt;a href=&quot;http://mirror.facebook.net/facebook/hive-deps/hadoop/core/hbase-$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mirror.facebook.net/facebook/hive-deps/hadoop/core/hbase-$&lt;/a&gt;{hbase.version}/hbase-${hbase.version}.tar.gz&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;  ==== apache-snapshot: tried&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/hadoop/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/hadoop/hbase/$&lt;/a&gt;{hbase.version}/hbase-${hbase.version}.pom&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &amp;#8211; artifact hadoop#hbase;${hbase.version}!hbase.tar.gz(source):&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/hadoop/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/hadoop/hbase/$&lt;/a&gt;{hbase.version}/hbase-${hbase.version}.tar.gz&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;  ==== maven2: tried&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &lt;a href=&quot;http://repo1.maven.org/maven2/hadoop/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo1.maven.org/maven2/hadoop/hbase/$&lt;/a&gt;{hbase.version}/hbase-${hbase.version}.pom&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &amp;#8211; artifact hadoop#hbase;${hbase.version}!hbase.tar.gz(source):&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;    &lt;a href=&quot;http://repo1.maven.org/maven2/hadoop/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo1.maven.org/maven2/hadoop/hbase/$&lt;/a&gt;{hbase.version}/hbase-${hbase.version}.tar.gz&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;          ::::::::::::::::::::::::::::::::::::::::::::::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;          ::          UNRESOLVED DEPENDENCIES         ::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;          ::::::::::::::::::::::::::::::::::::::::::::::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;          :: hadoop#hbase;${hbase.version}: not found&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt;          ::::::::::::::::::::::::::::::::::::::::::::::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; :: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS&lt;/p&gt;



&lt;p&gt;I am getting the following errors when I compile&lt;/p&gt;</comment>
                            <comment id="12843839" author="jvs" created="Wed, 10 Mar 2010 23:57:18 +0000"  >&lt;p&gt;Oops, sorry, when I regenerated the last patch, the bad ivy dependency crept back in accidentally.  Here&apos;s a fixed version.&lt;/p&gt;</comment>
                            <comment id="12843840" author="jvs" created="Wed, 10 Mar 2010 23:59:17 +0000"  >&lt;p&gt;Use &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-705&quot; title=&quot;Hive HBase Integration (umbrella)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-705&quot;&gt;&lt;del&gt;HIVE-705&lt;/del&gt;&lt;/a&gt;.6.patch.&lt;/p&gt;</comment>
                            <comment id="12844293" author="jvs" created="Fri, 12 Mar 2010 00:29:20 +0000"  >&lt;p&gt;Latest patch hits a test failure with latest trunk.  I&apos;ll upload a new patch soon to fix it.&lt;/p&gt;</comment>
                            <comment id="12844439" author="jvs" created="Fri, 12 Mar 2010 09:55:58 +0000"  >&lt;p&gt;OK, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-705&quot; title=&quot;Hive HBase Integration (umbrella)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-705&quot;&gt;&lt;del&gt;HIVE-705&lt;/del&gt;&lt;/a&gt;.7.patch should run through tests cleanly.&lt;/p&gt;</comment>
                            <comment id="12844584" author="namit" created="Fri, 12 Mar 2010 17:50:37 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12844646" author="namit" created="Fri, 12 Mar 2010 19:55:06 +0000"  >&lt;p&gt;Committed. Thanks John&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12434341">HIVE-806</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12381587">PIG-6</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12461730">HBASE-2433</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12459904">HIVE-1267</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12459590">HIVE-1257</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433896">HIVE-791</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12434341">HIVE-806</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433141">HIVE-758</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455384">HIVE-1133</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458708">HIVE-1221</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458710">HIVE-1222</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458711">HIVE-1223</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458714">HIVE-1224</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458716">HIVE-1225</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458719">HIVE-1227</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458725">HIVE-1230</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458727">HIVE-1231</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458728">HIVE-1232</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458729">HIVE-1233</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458731">HIVE-1234</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458773">HIVE-1240</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12459221">HIVE-1245</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458707">HIVE-1220</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458718">HIVE-1226</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458720">HIVE-1228</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458724">HIVE-1229</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458734">HIVE-1235</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458736">HIVE-1236</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12435628" name="HIVE-705.1.patch" size="150436" author="jvs" created="Thu, 11 Feb 2010 23:31:21 +0000"/>
                            <attachment id="12437669" name="HIVE-705.2.patch" size="198973" author="jvs" created="Wed, 3 Mar 2010 03:06:50 +0000"/>
                            <attachment id="12437959" name="HIVE-705.3.patch" size="205278" author="jvs" created="Fri, 5 Mar 2010 02:44:00 +0000"/>
                            <attachment id="12438033" name="HIVE-705.4.patch" size="205119" author="jvs" created="Fri, 5 Mar 2010 18:55:24 +0000"/>
                            <attachment id="12438382" name="HIVE-705.5.patch" size="206867" author="jvs" created="Wed, 10 Mar 2010 08:14:41 +0000"/>
                            <attachment id="12438461" name="HIVE-705.6.patch" size="206708" author="jvs" created="Wed, 10 Mar 2010 23:57:18 +0000"/>
                            <attachment id="12438603" name="HIVE-705.7.patch" size="212710" author="jvs" created="Fri, 12 Mar 2010 09:55:58 +0000"/>
                            <attachment id="12415979" name="HIVE-705_draft.patch" size="103541" author="hustlmsp" created="Sun, 9 Aug 2009 06:05:10 +0000"/>
                            <attachment id="12417393" name="HIVE-705_revision806905.patch" size="139707" author="hustlmsp" created="Sun, 23 Aug 2009 10:18:45 +0000"/>
                            <attachment id="12425754" name="HIVE-705_revision883033.patch" size="148032" author="hustlmsp" created="Sun, 22 Nov 2009 11:08:08 +0000"/>
                            <attachment id="12415980" name="hbase-0.19.3-test.jar" size="1377794" author="hustlmsp" created="Sun, 9 Aug 2009 06:05:10 +0000"/>
                            <attachment id="12415981" name="hbase-0.19.3.jar" size="1125668" author="hustlmsp" created="Sun, 9 Aug 2009 06:05:10 +0000"/>
                            <attachment id="12437550" name="hbase-0.20.3-test.jar" size="1995813" author="jvs" created="Tue, 2 Mar 2010 01:19:56 +0000"/>
                            <attachment id="12437549" name="hbase-0.20.3.jar" size="1566756" author="jvs" created="Tue, 2 Mar 2010 01:19:11 +0000"/>
                            <attachment id="12437551" name="zookeeper-3.2.2.jar" size="915651" author="jvs" created="Tue, 2 Mar 2010 01:20:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jul 2009 06:35:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122485</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-706] Move ThriftDeserializer to contrib</title>
                <link>https://issues.apache.org/jira/browse/HIVE-706</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ThriftDeserializer is not a must-have SerDe for Hive. We should move it to contrib.&lt;br/&gt;
ThriftDeserializer is also a good example for developers to look at when developing SerDes based on Java classes.&lt;/p&gt;

&lt;p&gt;Note that HiveServer will still depend on Thrift.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431668">HIVE-706</key>
            <summary>Move ThriftDeserializer to contrib</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 06:50:41 +0000</created>
                <updated>Wed, 29 Jul 2009 06:51:44 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12736476" author="zshao" created="Wed, 29 Jul 2009 06:51:44 +0000"  >&lt;p&gt;This patch moves some of the file.&lt;/p&gt;

&lt;p&gt;Please note this is not complete yet. Will continue to finish this patch when I get time.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414850" name="HIVE-706.1.patch" size="15610" author="zshao" created="Wed, 29 Jul 2009 06:51:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42756</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ojj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48575</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-707] add group_concat</title>
                <link>https://issues.apache.org/jira/browse/HIVE-707</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Moving the discussion to a new jira:&lt;/p&gt;

&lt;p&gt;I&apos;ve implemented group_cat() in a rush, and found something difficult to slove:&lt;br/&gt;
1. function group_cat() has a internal order by clause, currently, we can&apos;t implement such an aggregation in hive.&lt;br/&gt;
2. when the strings will be group concated are too large, in another words, if data skew appears, there is often not enough memory to store such a big result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431705">HIVE-707</key>
            <summary>add group_concat</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="coderplay">Min Zhou</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 15:50:44 +0000</created>
                <updated>Fri, 4 Jul 2014 09:32:16 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="12736689" author="namit" created="Wed, 29 Jul 2009 16:22:46 +0000"  >&lt;p&gt;I am assuming you mean: group_concat() in mysql&lt;/p&gt;

&lt;p&gt;2.  should not be a probelm:&lt;/p&gt;

&lt;p&gt;From MySQL documentation,&lt;/p&gt;

&lt;p&gt;The result is truncated to the maximum length that is given by the group_concat_max_len  system variable, which has a default value of 1024. The value can be set higher, although the effective maximum length of the return value is constrained by the value of max_allowed_packet. The syntax to change the value of group_concat_max_len at runtime is as follows, where val  is an unsigned integer:&lt;/p&gt;

&lt;p&gt;SET &lt;span class=&quot;error&quot;&gt;&amp;#91;GLOBAL | SESSION&amp;#93;&lt;/span&gt; group_concat_max_len = val&lt;/p&gt;

&lt;p&gt;We can also add a new configuration parameter for the maximum length&lt;/p&gt;</comment>
                            <comment id="12736695" author="namit" created="Wed, 29 Jul 2009 16:34:50 +0000"  >&lt;p&gt;I agree 1. is a problem - we dont have any good way to handle the order by.&lt;/p&gt;

&lt;p&gt;A workaround would be to first sort the results in a sub-query and then have the group_concat outside the sub-query. But, syntactially, it is more painful.&lt;br/&gt;
Is there a requirement for the ordering ?&lt;/p&gt;


&lt;p&gt;Separator can be handled as a configuration parameter like the maximum length.&lt;/p&gt;

&lt;p&gt;Other option is to treat group_concat() specially, all the way from the parser - I dont like it because it is kind of hacky.&lt;br/&gt;
I think, first we should find out whether anyone needs ORDER BY in the group_concat and then think about it.&lt;/p&gt;


</comment>
                            <comment id="12736737" author="athusoo" created="Wed, 29 Jul 2009 18:21:27 +0000"  >&lt;p&gt;Found the JIRA...&lt;/p&gt;

&lt;p&gt;Since group by is done in the reducer you could just use the trick that is used in &lt;/p&gt;

&lt;p&gt;distribute by x sort by y &lt;/p&gt;

&lt;p&gt;when we do MAP and REDUCE operators. By setting up reduce sink in a similar way you  would be able to ensure that each reducer gets the rows for a value of x in the sorted order of y. You can look at how we generate plans for the transform operator and use the same strategy in group by code.&lt;/p&gt;

&lt;p&gt;That should work and of course in this case we have to turn of any map/side aggregation?&lt;/p&gt;</comment>
                            <comment id="12736796" author="namit" created="Wed, 29 Jul 2009 20:22:30 +0000"  >&lt;p&gt;I agree - but I think it can be done in a follow-up jira, since the two are kind of independent&lt;/p&gt;</comment>
                            <comment id="12737360" author="zshao" created="Thu, 30 Jul 2009 23:49:09 +0000"  >&lt;p&gt;Shall we do the follow-up jira to provide the capability before we do this?&lt;br/&gt;
Without the follow-up jira, the group_concat is non-deterministic, so it&apos;s harder to write a test.&lt;/p&gt;</comment>
                            <comment id="12935458" author="jimblomo" created="Wed, 24 Nov 2010 19:57:47 +0000"  >&lt;p&gt;Also discussed in &lt;a href=&quot;http://www.mail-archive.com/hive-user@hadoop.apache.org/msg02854.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.mail-archive.com/hive-user@hadoop.apache.org/msg02854.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12935463" author="hammer" created="Wed, 24 Nov 2010 20:02:36 +0000"  >&lt;p&gt;Hey,&lt;/p&gt;

&lt;p&gt;Given that this JIRA has been opened three separate times, and that I have received a recent request for it in IRC, I think it would be worth bumping to near the top of the queue.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="13068182" author="guyan" created="Wed, 20 Jul 2011 06:54:17 +0000"  >&lt;p&gt;hi all, this issue will be resolved?&lt;/p&gt;</comment>
                            <comment id="13593428" author="ph4t" created="Tue, 5 Mar 2013 14:21:00 +0000"  >&lt;p&gt;You could use the currently undocumented union_map function as a workaround... Try :&lt;br/&gt;
concat_ws(&apos; &apos;, map_keys(UNION_MAP(MAP(your_column, &apos;dummy&apos;))))&lt;/p&gt;</comment>
                            <comment id="14052301" author="synckey" created="Fri, 4 Jul 2014 09:32:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ph4t&quot; class=&quot;user-hover&quot; rel=&quot;ph4t&quot;&gt;Svetozar Misljencevic&lt;/a&gt;&lt;br/&gt;
I use this concat_ws(&apos; &apos;, map_keys(UNION_MAP(MAP(your_column, &apos;dummy&apos;)))) method instead of group_concat,but I got a error like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;FAILED: SemanticException &lt;span class=&quot;error&quot;&gt;&amp;#91;Error 10011&amp;#93;&lt;/span&gt;: Line 172:30 Invalid function &apos;UNION_MAP&apos;&lt;/p&gt;
{/code}
&lt;p&gt;should I add some jars ?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12430738">HIVE-650</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12475749">HIVE-1689</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12431568">HIVE-699</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jul 2009 18:21:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122486</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-708] Add TypedBytes SerDe for transform</title>
                <link>https://issues.apache.org/jira/browse/HIVE-708</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, LazySimpleSerDe is used to send data to the user transformation functions - it would be useful to let the user specify the format of the data.&lt;/p&gt;

&lt;p&gt;Specifically, it would be very easy and useful to accommodate: &lt;/p&gt;


&lt;p&gt;(cut and paste from Venky&apos;s mail)&lt;/p&gt;


&lt;p&gt;Here&apos;s the typedbytes stuff that Dumbo uses.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/browse/HADOOP-1722&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HADOOP-1722&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From:&lt;br/&gt;
&lt;a href=&quot;http://static.last.fm/johan/huguk-20090414/klaas-hadoop-1722.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://static.last.fm/johan/huguk-20090414/klaas-hadoop-1722.pdf&lt;/a&gt;&lt;br/&gt;
Timings for IP count program on 300gigs of weblogs:&lt;br/&gt;
Java: 8 minutes&lt;br/&gt;
Dumbo with typed bytes: 10 minutes&lt;br/&gt;
Hive: 13 minutes&lt;br/&gt;
Dumbo without typed bytes: 16 minutes&lt;/p&gt;

&lt;p&gt;They also have a fast python decoder for this, which is apparently 25% faster than the python version. &lt;br/&gt;
&lt;a href=&quot;http://github.com/klbostee/ctypedbytes/tree/master&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/klbostee/ctypedbytes/tree/master&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://dumbotics.com/2009/05/31/dumbo-on-clouderas-distribution/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dumbotics.com/2009/05/31/dumbo-on-clouderas-distribution/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431727">HIVE-708</key>
            <summary>Add TypedBytes SerDe for transform</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 18:53:34 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:55 +0000</updated>
                            <resolved>Mon, 24 Aug 2009 18:24:29 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12736835" author="zshao" created="Wed, 29 Jul 2009 21:07:01 +0000"  >&lt;p&gt;@hive.708.1.patch:&lt;/p&gt;

&lt;p&gt;For the grammar change, can we accept SerDe at both input and output of the user script?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SELECT TRANSFORM(a, b, c)
ROW FORMAT DELIMITED FIELDS TERMINATED BY &lt;span class=&quot;code-quote&quot;&gt;&apos;\001&apos;&lt;/span&gt;
USING &lt;span class=&quot;code-quote&quot;&gt;&apos;mypython.py&apos;&lt;/span&gt;
AS (d STRING, e INT, f DOUBLE)
ROW FORMAT DELIMITED FIELDS TERMINATED BY &lt;span class=&quot;code-quote&quot;&gt;&apos;\t&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12736840" author="namit" created="Wed, 29 Jul 2009 21:09:59 +0000"  >&lt;p&gt;Sure- I will make that change&lt;/p&gt;</comment>
                            <comment id="12736904" author="zshao" created="Wed, 29 Jul 2009 23:19:38 +0000"  >&lt;p&gt;Can we also extract &quot;row format...&quot; to be a common sub tree and have a utility function processing it (which returns a SerDe), so that create table and transform can reuse (in the future, load, and plain select can support this as well).&lt;/p&gt;</comment>
                            <comment id="12739151" author="zshao" created="Tue, 4 Aug 2009 20:41:43 +0000"  >&lt;p&gt;Looked at the code a bit more. It seems it&apos;s compiled against 0.19.  We need to make the following changes to make it compile under 0.17:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Replace org.apache.hadoop.io.ByteWritable with org.apache.hadoop.hive.serde2.io.ByteWritable. (The former is not in hadoop 0.17)&lt;/li&gt;
	&lt;li&gt;Change the calls to org.apache.hadoop.io.BytesWritable - only get() and getSize() are available in hadoop 0.17.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12739387" author="klbostee" created="Wed, 5 Aug 2009 09:26:26 +0000"  >&lt;p&gt;FWIW, the patch seems to be affected by &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-764&quot; title=&quot;TypedBytesInput&amp;#39;s readRaw() does not preserve custom type codes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-764&quot;&gt;&lt;del&gt;MAPREDUCE-764&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12746411" author="namit" created="Sat, 22 Aug 2009 04:37:27 +0000"  >&lt;p&gt;comments from zheng&lt;/p&gt;</comment>
                            <comment id="12746990" author="zshao" created="Mon, 24 Aug 2009 18:24:29 +0000"  >&lt;p&gt;Committed. Thanks Namit.&lt;br/&gt;
Please take a look at the follow-ups when you have time.&lt;/p&gt;</comment>
                            <comment id="12747755" author="zshao" created="Wed, 26 Aug 2009 03:53:33 +0000"  >&lt;p&gt;The new test failed somehow. I had to revert the new test for now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12431074">HIVE-669</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12432879">HIVE-751</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12433869">HIVE-785</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12376160">HADOOP-1722</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433872">HIVE-786</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12414946" name="hive.708.1.patch" size="113844" author="namit" created="Wed, 29 Jul 2009 20:57:16 +0000"/>
                            <attachment id="12416083" name="hive.708.2.patch" size="106714" author="namit" created="Mon, 10 Aug 2009 15:55:08 +0000"/>
                            <attachment id="12416817" name="hive.708.3.patch" size="256627" author="namit" created="Mon, 17 Aug 2009 23:22:13 +0000"/>
                            <attachment id="12417354" name="hive.708.4.patch" size="219885" author="namit" created="Sat, 22 Aug 2009 04:37:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jul 2009 21:07:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73349</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l6fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121692</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-708&quot; title=&quot;Add TypedBytes SerDe for transform&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-708&quot;&gt;&lt;strike&gt;HIVE-708&lt;/strike&gt;&lt;/a&gt;. Add TypedBytes SerDe for transform. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-709] support for adding new functions (not temporary)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-709</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;CREATE and DROP FUNCTIONS should be supported - these functions should not be session specific.&lt;br/&gt;
As long as they are not dropped, users should be able to access them.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12431729">HIVE-709</key>
            <summary>support for adding new functions (not temporary)</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 19:07:09 +0000</created>
                <updated>Mon, 8 Sep 2014 07:54:03 +0000</updated>
                            <resolved>Mon, 8 Sep 2014 07:54:03 +0000</resolved>
                                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12737051" author="zshao" created="Thu, 30 Jul 2009 09:24:45 +0000"  >&lt;p&gt;We need to find a way to &quot;deposit&quot; jars into metastore to make this to happen.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12685241">HIVE-6047</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jul 2009 09:24:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42754</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-710] Fix serialization bug in BinarySortableSerDe for negative double and float numbers</title>
                <link>https://issues.apache.org/jira/browse/HIVE-710</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There is a bug in the serialization/deserialization code of BinarySortableSerDe that causes problems in dealing with negative float/double numbers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431751">HIVE-710</key>
            <summary>Fix serialization bug in BinarySortableSerDe for negative double and float numbers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2009 23:46:40 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:56 +0000</updated>
                            <resolved>Thu, 30 Jul 2009 01:19:33 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12736922" author="zshao" created="Wed, 29 Jul 2009 23:56:48 +0000"  >&lt;p&gt;This patch fixes the problem.&lt;/p&gt;

&lt;p&gt;I also changed the test a bit to try both negative/positive float/double. Negative integers are already tested.&lt;/p&gt;</comment>
                            <comment id="12736926" author="prasadc" created="Thu, 30 Jul 2009 00:14:15 +0000"  >&lt;p&gt;why not use ~ to flip bits?&lt;/p&gt;</comment>
                            <comment id="12736929" author="zshao" created="Thu, 30 Jul 2009 00:22:54 +0000"  >&lt;p&gt;Incorporated Prasad&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="12736932" author="prasadc" created="Thu, 30 Jul 2009 00:27:36 +0000"  >&lt;p&gt;+1 running tests..&lt;/p&gt;</comment>
                            <comment id="12736950" author="prasadc" created="Thu, 30 Jul 2009 01:19:33 +0000"  >&lt;p&gt;Merged into revision 799148. Thanks Zheng.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414965" name="HIVE-710.1.patch" size="2831" author="zshao" created="Wed, 29 Jul 2009 23:57:25 +0000"/>
                            <attachment id="12414967" name="HIVE-710.2.patch" size="2811" author="zshao" created="Thu, 30 Jul 2009 00:22:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jul 2009 00:14:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-711] Check that GROUP BY works for negative double values</title>
                <link>https://issues.apache.org/jira/browse/HIVE-711</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12431755">HIVE-711</key>
            <summary>Check that GROUP BY works for negative double values</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmangla">Karan Mangla</assignee>
                                    <reporter username="kmangla">Karan Mangla</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jul 2009 00:40:43 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:14 +0000</updated>
                            <resolved>Wed, 5 Aug 2009 16:46:17 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12739601" author="namit" created="Wed, 5 Aug 2009 16:46:17 +0000"  >&lt;p&gt;Committed. Thanks Karan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414972" name="patch.txt" size="1080" author="kmangla" created="Thu, 30 Jul 2009 00:43:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Aug 2009 16:46:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122489</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Added test for group by for negative double values</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-712] Cleanup build scripts for Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-712</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The build scripts for hive have a lot of duplication in build-common.xml and the individual build.xml for the different modules. We need to simply this as well as remove any duplications etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431813">HIVE-712</key>
            <summary>Cleanup build scripts for Hive</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="athusoo">Ashish Thusoo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jul 2009 15:04:03 +0000</created>
                <updated>Fri, 12 Sep 2014 11:58:24 +0000</updated>
                            <resolved>Fri, 12 Sep 2014 11:58:24 +0000</resolved>
                                    <version>0.3.0</version>
                                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14131452" author="lars_francke" created="Fri, 12 Sep 2014 11:58:24 +0000"  >&lt;p&gt;Fixed as part of the Mavenization&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Sep 2014 11:58:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42753</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-713] Integrate operator counters into query plan to view progress of queries</title>
                <link>https://issues.apache.org/jira/browse/HIVE-713</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Annotate the QueryPlan - with multiple stages and each stage(Task) can have an Operator tree - with counters that each Operator/Task updates.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431874">HIVE-713</key>
            <summary>Integrate operator counters into query plan to view progress of queries</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jul 2009 08:33:02 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:54 +0000</updated>
                            <resolved>Wed, 19 Aug 2009 21:12:24 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12737468" author="rsm" created="Fri, 31 Jul 2009 08:53:59 +0000"  >&lt;p&gt;This patch contains most of the changes to the APIs in the ql package. It is only for review. The following need to be done:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add the following default counters to Operator: #input rows, # output rows, cputime&lt;/li&gt;
	&lt;li&gt;In QueryPlan, fetch the counters from the active tasks and store them locally to be queried later&lt;/li&gt;
	&lt;li&gt;Add progress method to MoveTask&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and CopyTask&lt;/li&gt;
	&lt;li&gt;Dump stats to history file in all progress methods&lt;/li&gt;
	&lt;li&gt;Dump the query plan so that it can be viewed using tools like graphviz&lt;/li&gt;
	&lt;li&gt;Change CliDriver or create a new class which can reconstruct the plan annotated with counters from logs in history file&lt;/li&gt;
	&lt;li&gt;Provide a call in HiveServer to retrieve the annotated query plan&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12737637" author="namit" created="Fri, 31 Jul 2009 18:23:17 +0000"  >&lt;p&gt;One of the follow-ups that needs to be done is that the progress needs to be done by Driver instead of ExecDriver() - &lt;/p&gt;

&lt;p&gt;Driver should do the following&lt;/p&gt;


&lt;p&gt;   task.execute()&lt;br/&gt;
   task.progress()&lt;br/&gt;
   task.postProcessing()&lt;/p&gt;



&lt;p&gt;This way each task does not have to invoke progress within execute.&lt;/p&gt;
</comment>
                            <comment id="12737751" author="rsm" created="Fri, 31 Jul 2009 22:37:28 +0000"  >&lt;p&gt;More changes, but not yet ready to patch. Remaining tasks:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;in each operator, if there are new counters, call addToCounterNames() in initialize&lt;/li&gt;
	&lt;li&gt;from SemanticAnalyzer, after plan generation walk all tasks and call assignCounterNameToEnum for each operator&lt;/li&gt;
	&lt;li&gt;in each Operator.process increment counters&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;in driver add call to return plan, dump queryplan to history file&lt;/li&gt;
	&lt;li&gt;in ExecDriver.progress walk all operators and call updateCounters and dump out stats to history file&lt;/li&gt;
	&lt;li&gt;in queryplan walk tasks/operators and return plan which includes counters&lt;/li&gt;
	&lt;li&gt;in separate class provide command line option to parse history file and print latest plan&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12737960" author="namit" created="Sat, 1 Aug 2009 22:25:24 +0000"  >&lt;p&gt;made some further progress - bad things are not complete - &lt;/p&gt;

&lt;p&gt;uploading the patch so that raghu can proceed if he wants to&lt;/p&gt;</comment>
                            <comment id="12738499" author="rsm" created="Mon, 3 Aug 2009 18:57:52 +0000"  >&lt;p&gt;added  a thrift interface for the queryplan. we can dump out the json version of the query plan potentially using TJsonProtocol. Also added implementation for updateCounters.&lt;/p&gt;

&lt;p&gt;Still need to figure out how to represent conditional tasks.&lt;/p&gt;</comment>
                            <comment id="12738518" author="rsm" created="Mon, 3 Aug 2009 19:30:45 +0000"  >&lt;p&gt;added support for conditional task by allowing disjunctive edges in the graphs.&lt;/p&gt;</comment>
                            <comment id="12739150" author="namit" created="Tue, 4 Aug 2009 20:41:27 +0000"  >&lt;p&gt;Fixed the bugs - the tests run clean now&lt;/p&gt;

&lt;p&gt;Raghu, can you add your stuff and we are good to go&lt;/p&gt;</comment>
                            <comment id="12739766" author="rsm" created="Wed, 5 Aug 2009 21:32:14 +0000"  >&lt;p&gt;Added the following:&lt;/p&gt;

&lt;p&gt;1. construct thrift query plan from hive structures&lt;br/&gt;
2. populate counters from hive structures into query plan - currently the counters include #input rows, #output rows and time taken&lt;br/&gt;
3. dump out the entire thrift query plan in progress in binary format (urlencoded)&lt;br/&gt;
4. sample php script ql/src/test/php/test_queryplan.php which should decode the urlencoded binary formatted query plan (its not working properly - i am still debugging it)&lt;br/&gt;
5. refreshed php and py thrift libraries&lt;/p&gt;</comment>
                            <comment id="12739769" author="rsm" created="Wed, 5 Aug 2009 21:42:02 +0000"  >&lt;p&gt;removed a couple of typos in php script (still not working though).&lt;/p&gt;</comment>
                            <comment id="12740176" author="rsm" created="Thu, 6 Aug 2009 18:02:51 +0000"  >&lt;p&gt;Could not get TBinaryProtocol/TMemoryBuffer combination to work across java and php. So, I just implemented toString() in QueryPlan which generates a JSON string. The entire query plan with counters is written out in JSON in the history file everytime there is an update.&lt;/p&gt;

&lt;p&gt;With this patch, we should be able to visualize the plan along with the counters.&lt;/p&gt;</comment>
                            <comment id="12740182" author="appodictic" created="Thu, 6 Aug 2009 18:20:26 +0000"  >&lt;p&gt;I am looking to get some hive-jmx integeration (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-551&quot; title=&quot;Metrics for Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-551&quot;&gt;HIVE-551&lt;/a&gt;). One problem I ran into was dealing with true distributed operation. I am wondered where the overlap in what we are doing is and or how you are tackling this.&lt;/p&gt;

&lt;p&gt;1. For hive 551 I am thinking each map/reduce can open a separate JMX port. This is a problem because first multiple mappers might run on the same machine. Secondly, I think i would have to write the location jmx ports to /tmp space so someone can read the file and figure out what to attach to.&lt;/p&gt;

&lt;p&gt;My thinking use JMX proxy. We know that each system is running a task-tracker. From a mapper/reduce we can proxy the task tracker and add MX beans named with query-id. I wonder can we get counters/jmx working together somehow? &lt;/p&gt;</comment>
                            <comment id="12740197" author="rsm" created="Thu, 6 Aug 2009 18:53:29 +0000"  >&lt;p&gt;I am not very familiar with JMX, but it seems useful in cases where command line tools need to read/modify the internal state of servers. Given that we are only reading stuff from the operators/tasks, would it be simpler to use a logging based approach like chukwa or scribe?&lt;/p&gt;</comment>
                            <comment id="12740207" author="appodictic" created="Thu, 6 Aug 2009 19:14:42 +0000"  >&lt;p&gt;True. If we were able to implement JMX we could attach to a mapper/reduce and profile it directly. IE real time how much memory a mapper is using, there are a bunch of standard jmx objects that could be useful. Possibly a logging based approach might be a better way to go. Another technique might be a job completion URL. counters+job completion would be a nice combination.&lt;/p&gt;

&lt;p&gt;JMX could be a tricky implementation due to the multi-jvm nature of the hadoop. But if the framework is managing counters for us getting them into JMX should be doable. I will review your code more.&lt;/p&gt;</comment>
                            <comment id="12740238" author="rsm" created="Thu, 6 Aug 2009 20:22:52 +0000"  >&lt;p&gt;Some tests are failing with the latest patch. I am looking into it now.&lt;/p&gt;</comment>
                            <comment id="12741201" author="namit" created="Mon, 10 Aug 2009 06:07:55 +0000"  >&lt;p&gt;fixed diffs&lt;/p&gt;</comment>
                            <comment id="12742814" author="rsm" created="Thu, 13 Aug 2009 12:45:46 +0000"  >&lt;p&gt;Added support for map/reduce progress, isDone() and handle ConditionalTask. Havent run all the tests yet.&lt;/p&gt;</comment>
                            <comment id="12743945" author="rsm" created="Mon, 17 Aug 2009 01:20:38 +0000"  >&lt;p&gt;Fixed stagegraph for ConditionalTask. Added &apos;started&apos; flag to query, stage, tasks and operators.&lt;/p&gt;</comment>
                            <comment id="12744380" author="namit" created="Tue, 18 Aug 2009 06:05:50 +0000"  >&lt;p&gt;fixed a lot of problems - however, a couple pf them still remain.&lt;/p&gt;

&lt;p&gt;look at nullgroup3.q - for some reason, only the last file is picked - i think most of the other problems is in this category&lt;/p&gt;</comment>
                            <comment id="12744733" author="namit" created="Tue, 18 Aug 2009 21:25:21 +0000"  >&lt;p&gt;fixed the diffs&lt;/p&gt;</comment>
                            <comment id="12744796" author="namit" created="Wed, 19 Aug 2009 00:17:12 +0000"  >&lt;p&gt;Had a code review with Zheng - filing the following jiras for follow-up tasks&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-766&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-766&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-767&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-767&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12744798" author="namit" created="Wed, 19 Aug 2009 00:20:31 +0000"  >&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-768&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12744808" author="namit" created="Wed, 19 Aug 2009 00:46:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-770&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-770&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12744820" author="namit" created="Wed, 19 Aug 2009 01:02:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-771&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-771&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12744905" author="zshao" created="Wed, 19 Aug 2009 05:52:02 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-768&lt;/a&gt; should go together with this patch, because otherwise it&apos;s going to be a performance hit.&lt;br/&gt;
It should be a very simple change as well.&lt;/p&gt;

&lt;p&gt;I am OK with all other follow-ups being done after this one is committed.&lt;/p&gt;</comment>
                            <comment id="12745183" author="rsm" created="Wed, 19 Aug 2009 20:01:31 +0000"  >&lt;p&gt;Fixed problems which resulted in printing null plans. Also, fixed a bug where childTasks&apos; status was not getting updated if the root task was done.&lt;/p&gt;</comment>
                            <comment id="12745199" author="zshao" created="Wed, 19 Aug 2009 21:12:23 +0000"  >&lt;p&gt;Committed. Thanks Raghu and Namit!&lt;br/&gt;
Let&apos;s get the follow-up JIRAs done soon.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12433393">HIVE-766</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433394">HIVE-767</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433399">HIVE-770</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433395">HIVE-768</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433402">HIVE-771</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415110" name="hive-713.1.donot.patch" size="18254" author="rsm" created="Fri, 31 Jul 2009 08:53:59 +0000"/>
                            <attachment id="12415192" name="hive-713.2.donot.patch" size="23560" author="rsm" created="Fri, 31 Jul 2009 22:37:28 +0000"/>
                            <attachment id="12415672" name="hive-713.2.patch" size="1437957" author="rsm" created="Wed, 5 Aug 2009 21:42:02 +0000"/>
                            <attachment id="12415767" name="hive-713.3.patch" size="1442084" author="rsm" created="Thu, 6 Aug 2009 18:02:51 +0000"/>
                            <attachment id="12415386" name="hive-713.4.donot.patch" size="260588" author="rsm" created="Mon, 3 Aug 2009 18:57:52 +0000"/>
                            <attachment id="12415389" name="hive-713.5.donot.patch" size="289825" author="rsm" created="Mon, 3 Aug 2009 19:30:45 +0000"/>
                            <attachment id="12416432" name="hive-713.5.patch" size="1160649" author="rsm" created="Thu, 13 Aug 2009 12:45:46 +0000"/>
                            <attachment id="12416737" name="hive-713.6.patch" size="1176487" author="rsm" created="Mon, 17 Aug 2009 01:20:38 +0000"/>
                            <attachment id="12417049" name="hive-713.9.patch" size="1420106" author="rsm" created="Wed, 19 Aug 2009 20:01:31 +0000"/>
                            <attachment id="12415513" name="hive.713.1.good.patch" size="1317491" author="namit" created="Tue, 4 Aug 2009 20:41:27 +0000"/>
                            <attachment id="12416919" name="hive.713.7.patch" size="1415587" author="namit" created="Tue, 18 Aug 2009 21:25:07 +0000"/>
                            <attachment id="12416947" name="hive.713.8.patch" size="1420078" author="namit" created="Wed, 19 Aug 2009 01:47:18 +0000"/>
                            <attachment id="12416022" name="hive.713.fixdiffs" size="1430152" author="namit" created="Mon, 10 Aug 2009 06:07:55 +0000"/>
                            <attachment id="12415251" name="hive.713.patch.bad" size="39550" author="namit" created="Sat, 1 Aug 2009 22:25:24 +0000"/>
                            <attachment id="12416842" name="newpatch" size="1179485" author="namit" created="Tue, 18 Aug 2009 06:05:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Jul 2009 18:23:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73346</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-713&quot; title=&quot;Integrate operator counters into query plan to view progress of queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-713&quot;&gt;&lt;strike&gt;HIVE-713&lt;/strike&gt;&lt;/a&gt;. Integrate operator counters into query plan to view progress of queries. (Namit Jain and Raghu Murthy via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-714] Rename classes to make them more understandable</title>
                <link>https://issues.apache.org/jira/browse/HIVE-714</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Right now there are a few class names which are quite confusing - we should rename them to be more clear. Here&apos;s the initial list of classes. There are probably others.&lt;/p&gt;

&lt;p&gt;ExecDriver -&amp;gt; MapRedTask&lt;br/&gt;
MapRedTask -&amp;gt; LocalMapRedTask&lt;br/&gt;
FetchOperator -&amp;gt; either make it extend Operator, or call it something like FileReader&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431913">HIVE-714</key>
            <summary>Rename classes to make them more understandable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jul 2009 17:09:38 +0000</created>
                <updated>Fri, 31 Jul 2009 17:09:38 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42752</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08ojz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-715] include throttle status of job tracker in HiveClusterStatus</title>
                <link>https://issues.apache.org/jira/browse/HIVE-715</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, Hive throttles clients when the cluster is in a bad state. This information about the cluster state is missing in HiveClusterStatus.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431922">HIVE-715</key>
            <summary>include throttle status of job tracker in HiveClusterStatus</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ehwang">Eric Hwang</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jul 2009 18:30:25 +0000</created>
                <updated>Fri, 31 Jul 2009 18:30:45 +0000</updated>
                                                                            <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08p5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-716] Web Interface wait/notify, interface changes</title>
                <link>https://issues.apache.org/jira/browse/HIVE-716</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In TestHWISessionItem &lt;/p&gt;

&lt;p&gt;Asserts are backwards&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;assertEquals(  searchItem.getQueryRet(), 0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should be&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;assertEquals( zero , searchItem.getQueryRet());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Wait/notify semantics can be added. This is helpful for end user, and cleaner in the test case.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;while (user1_item2.getStatus() != HWISessionItem.WebSessionItemStatus.QUERY_COMPLETE) {
  Thread.sleep(1);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;synchronized (user1_item2.runnable) {
  while (user1_item2.getStatus() != HWISessionItem.WebSessionItemStatus.QUERY_COMPLETE) {
     user1_item2.runnable.wait();
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The text box in the web interface should accept multiple queries separated by &apos;;&apos; like the cli does. This will add more usability. No need for separate set processor pages. &lt;/p&gt;

&lt;p&gt;setQuery(String) is replaced by setQueries(List&amp;lt;String&amp;gt;)&lt;/p&gt;</description>
                <environment>&lt;p&gt;All&lt;/p&gt;</environment>
        <key id="12432017">HIVE-716</key>
            <summary>Web Interface wait/notify, interface changes</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2009 02:49:27 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:14 +0000</updated>
                            <resolved>Tue, 22 Sep 2009 21:26:38 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Web UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12738174" author="appodictic" created="Mon, 3 Aug 2009 02:54:52 +0000"  >&lt;p&gt;All relevant changes to the HWISessionItem. This still needs some testing, but does anyone have early comments?&lt;/p&gt;</comment>
                            <comment id="12742003" author="appodictic" created="Tue, 11 Aug 2009 18:17:24 +0000"  >&lt;p&gt;Implemented many changes. The web source has not been modified to reflect the changes. I should have a final tested patch within the week.&lt;/p&gt;</comment>
                            <comment id="12743067" author="appodictic" created="Fri, 14 Aug 2009 03:45:55 +0000"  >&lt;p&gt;Working version. The main user facing feature is that the query box accepts multiple queries and a &apos;result bucket&apos; holds the last X rows in the session.&lt;/p&gt;</comment>
                            <comment id="12743215" author="appodictic" created="Fri, 14 Aug 2009 14:39:13 +0000"  >&lt;p&gt;There were two main features I wanted to support in HWI.&lt;/p&gt;

&lt;p&gt;1) The Query Box should allow multiple queries separated by ; This would make the application more user friendly.&lt;/p&gt;

&lt;p&gt;2) For queries with small result sets such as &apos;explain&apos; or &apos;show tables&apos; should be able possible without dumping to a file&lt;/p&gt;

&lt;p&gt;Wait/notify semantics&lt;/p&gt;

&lt;p&gt;Loop w/sleep are ok but a Java threads support wait/notify so that is cleaner, nicer to code.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-               while (searchItem.getStatus() != HWISessionItem.WebSessionItemStatus.QUERY_COMPLETE) {
-                       Thread.sleep(1);
+               synchronized (searchItem.runnable ) {
+                 while (searchItem.getStatus() != HWISessionItem.WebSessionItemStatus.READY) {
+                       searchItem.runnable.wait();
+                  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;HWISessionItem Constructor&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;protected HWISessionItem ()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public HWISessionItem(HWIAuth auth, String sessionName) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Having a public constrcutor is a plus the class could theoretically be used standalone.&lt;br/&gt;
The no argument constructor did not make sense, HWISessionItem was programmed originally like a Java&lt;br/&gt;
Bean no arg, constructore, lots of setters/getters. Really to be instantaited this information is &lt;br/&gt;
write once. It only makes sense to handle it in the constructor. (this also makes the lazy initialization easier)&lt;/p&gt;

&lt;p&gt;state machine&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-       public enum WebSessionItemStatus {
-               NEW, QUERY_SET, QUERY_RUNNING, QUERY_COMPLETE, DESTROY, KILL_QUERY
-       };
+  /**  Represents the state a session item can be in. */
+  public enum WebSessionItemStatus {
+    NEW, READY, QUERY_SET, QUERY_RUNNING, DESTROY, KILL_QUERY
+  };
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;THe state mechanics worked but the states were funky. QUERY_COMPLETE in particular bothered me. &lt;/p&gt;

&lt;p&gt;NEW-Constructed but not initialized&lt;br/&gt;
READY-Initialized waiting for query set&lt;br/&gt;
QUERY-SET-User has signaled that the query should be ran&lt;br/&gt;
Query-running- the query is now running (dont change anything)  &lt;br/&gt;
back to ready READY&lt;br/&gt;
DESTROY-Fall out of run loop&lt;/p&gt;

&lt;p&gt;Right now  KILL_QUERY is not terribly effective. With HiveHistory session can be killed from the job tracker.&lt;/p&gt;

&lt;p&gt;Removed private members w setters/getters&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-       private SetProcessor sp;
-       private Driver qp;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;These are not members they are only local to the runQuery() method&lt;/p&gt;

&lt;p&gt;The framework now takes a list of queries and returns a list of results&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+  private List&amp;lt;String&amp;gt;  queries;
+  queryRet = new ArrayList&amp;lt;Integer&amp;gt;();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Constructor blocks for lazy initiailization&lt;br/&gt;
There was a subtle bug in that the initialization of some variables happned in the thread after the constructor returned. However a redirect on&lt;br/&gt;
the web site could send a user onto a page causing an exception. Now the constructor uses wait/notify to properly wait for initialization&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; l4j.debug(&quot;Wait for NEW-&amp;gt;READY transition&quot;);
+    synchronized (this.runnable){
+      if (this.status != WebSessionItemStatus.READY) {
+       try {
+         this.runnable.wait();
+        } catch (Exception ex) {}
+      }
+    }
+    l4j.debug(&quot;NEW-&amp;gt;READY transition complete&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;run() uses state NEW not conf=null to detect when initialization is needed. Same effect more self documenting&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;

 while (this.status != HWISessionItem.WebSessionItemStatus.DESTROY) {

             if (conf == null) {
-          this.itemInit();
-                               }

 while (this.status != HWISessionItem.WebSessionItemStatus.DESTROY) {
+        if (this.status == WebSessionItemStatus.NEW) {
+         this.itemInit();
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Feature Reuslt Bucket&lt;br/&gt;
a query like explain or show is not the type of thing you want to dump to a file just to look at the file.&lt;br/&gt;
The resultBucket is a sized buffer that saves some query results to make them avaialable from the web interface.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            while (qp.getResults(res)) {
+             resultBucket.add(res);
+              if (resultBucket.size() &amp;gt; resultBucketMaxSize) 
+               resultBucket.remove(0);
+              for (String row : res) {
+               if (ss != null) { 
+                 if (ss.out != null) 
+                   ss.out.println(row);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Many changes went down here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; We could break this up into a few JIRA or bundle together. The last round of changes were a good at cleanup up the SessionManager this round will have the SessionItem nicely polished.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add ResultBucket buffer to web interface&lt;/li&gt;
	&lt;li&gt;HWI to run multiple queries in a single run&lt;/li&gt;
	&lt;li&gt;Changes to  HWI State Mechanics&lt;/li&gt;
	&lt;li&gt;Web Interface format and license. 1 Propertly format and add apache licence to all HWI Source Files&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please review and lets talk about the best way to procede.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="12744139" author="athusoo" created="Mon, 17 Aug 2009 17:27:15 +0000"  >&lt;p&gt;Will check this out tonight. Does this have to go into 0.4 or can this go only into trunk?&lt;/p&gt;</comment>
                            <comment id="12744164" author="appodictic" created="Mon, 17 Aug 2009 18:45:50 +0000"  >&lt;p&gt;This patch should apply cleanly to both 0.4 and into trunk. I did build and tested against trunk.&lt;/p&gt;</comment>
                            <comment id="12745590" author="appodictic" created="Thu, 20 Aug 2009 19:34:07 +0000"  >&lt;p&gt;Do you want me to break some components out into separate Jira&apos;s? This could make the review process easier for you.&lt;/p&gt;</comment>
                            <comment id="12747187" author="techvd" created="Tue, 25 Aug 2009 02:12:04 +0000"  >&lt;p&gt;Hi, I tried the latest patch on trunk and there seems to be a problem.&lt;/p&gt;

&lt;p&gt;I was interested in using the &quot;add jar &quot; command to add jar files to the path. However, by the time the command flows through the SessionState to the AddResourceProcessor (in ./ql/src/java/org/apache/hadoop/hive/ql/processors/AddResourceProcessor.java), the command word &quot;add&quot; is not being stripped so the resource processor is trying to find a ResourceType of &quot;ADD.&quot;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this was an existing bug or was a result of the current set of changes.&lt;/p&gt;</comment>
                            <comment id="12747389" author="appodictic" created="Tue, 25 Aug 2009 13:05:50 +0000"  >&lt;p&gt;This is a new bug. The old code only supported the set processor. Ill get in another patch quickly for you.&lt;/p&gt;</comment>
                            <comment id="12747423" author="appodictic" created="Tue, 25 Aug 2009 14:08:07 +0000"  >&lt;p&gt;Fixed the bug where processors are being fed the query without first token. Also session_result.jsp was missing making viewing the new session bucket impossible.&lt;/p&gt;</comment>
                            <comment id="12747720" author="techvd" created="Wed, 26 Aug 2009 00:38:15 +0000"  >&lt;p&gt;I tried this on 0.4 and everything works perfectly. I really like the idea of the session result bucket .&lt;/p&gt;</comment>
                            <comment id="12747959" author="appodictic" created="Wed, 26 Aug 2009 14:26:08 +0000"  >&lt;p&gt;Great news. My secret codename for the patch you applied is &apos;HWI the Next Generation&apos;. The ResultBucket and the ability to specify multiple queries at once really ups the usability. Let me know any other things you may notice. I am not sure if the new features are going to appear in separate patches or one larger one, but the net result will be what you have now.&lt;/p&gt;</comment>
                            <comment id="12748927" author="techvd" created="Fri, 28 Aug 2009 18:16:51 +0000"  >&lt;p&gt;It&apos;d be great to have this committed soon in whatever process that makes sense. This absolutely ups the usability.&lt;/p&gt;

&lt;p&gt;One related problem I keep running into has to do with the ShimLoader.java class (./shims/src/common/java/org/apache/hadoop/hive/shims/ShimLoader.java). As the sources are right now, when I run hwi, the shim loader cannot find the jetty shim class since it&apos;s looking for org.apache.jetty.hive.shims.Jetty18Shims class (I&apos;m using hadoop 0.18.3). It seems like these classes have recently been moved to the package org.apache.jetty.hive.shims. I simply change org.apache.jetty to org.apache.hadoop and it works but this does seem like either a bug or incomplete code refactor/cleanup task.&lt;/p&gt;</comment>
                            <comment id="12748959" author="appodictic" created="Fri, 28 Aug 2009 19:36:11 +0000"  >&lt;p&gt;You are being effected by this...&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-752&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-752&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will try to commit a patch for it once i get familiar with the shims.&lt;/p&gt;</comment>
                            <comment id="12750193" author="namit" created="Wed, 2 Sep 2009 00:11:04 +0000"  >&lt;p&gt;@Edward, I committed 752 just now. Can you regenerate the patch - I would like to get it in before releasing 0.4&lt;/p&gt;</comment>
                            <comment id="12750462" author="appodictic" created="Wed, 2 Sep 2009 14:59:50 +0000"  >&lt;p&gt;Namit,&lt;/p&gt;

&lt;p&gt;Hive-752 and hive-716 are mutually exclusive actually. This patch did not need to be regenerated. I did this anyway because I had added a few license headers that were missed.&lt;/p&gt;

&lt;p&gt;I am going to open a cosmetic Jira to fix all the indents/license to be done after this commit .&lt;/p&gt;</comment>
                            <comment id="12758090" author="namit" created="Tue, 22 Sep 2009 01:28:37 +0000"  >&lt;p&gt;The test TestHWISessionManager is failing when run as part of all tests&lt;/p&gt;</comment>
                            <comment id="12758110" author="appodictic" created="Tue, 22 Sep 2009 03:50:25 +0000"  >&lt;p&gt;Namit,&lt;/p&gt;

&lt;p&gt;Thank you for look at this. &lt;/p&gt;

&lt;p&gt;It seems to be failing because other tests in QL have not cleaned up after themselves one example is nullscript.q.out. How does the contract of the test cases work? Should a TestCase be able to assume the metastore and test data directory is clean?&lt;/p&gt;</comment>
                            <comment id="12758130" author="namit" created="Tue, 22 Sep 2009 05:33:25 +0000"  >&lt;p&gt;Yes, I agree - which is why TestHWISessionManager standalone is running fine.&lt;br/&gt;
Unfortunately, we need to clean up these tests I dont see any other workaround.&lt;/p&gt;</comment>
                            <comment id="12758242" author="appodictic" created="Tue, 22 Sep 2009 13:23:48 +0000"  >&lt;p&gt;Also this is being showed because I added a query show tables. Instead I could add show tables where name like test_hiw_table. The result will be predictable and we sont have to clean right away&lt;/p&gt;</comment>
                            <comment id="12758279" author="appodictic" created="Tue, 22 Sep 2009 15:49:31 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  [junit] Hive history file=/home/ecapriolo/hive-18.3-dont-touch/hive-trunk/hwi/../build/ql/tmp/hive_job_log_ecapriolo_200909220835_200968210.txt
    [junit] Hive history file=/home/ecapriolo/hive-18.3-dont-touch/hive-trunk/hwi/../build/ql/tmp/hive_job_log_ecapriolo_200909220835_1376971143.txt
    [junit] Hive history file=/home/ecapriolo/hive-18.3-dont-touch/hive-trunk/hwi/../build/ql/tmp/hive_job_log_ecapriolo_200909220835_989905403.txt
    [junit] Pre Exec Hook Class not found:org.apache.hadoop.hive.ql.hooks.PreExecutePrinter
    [junit] FAILED: Unknown exception : org.apache.hadoop.hive.ql.hooks.PreExecutePrinter
    [junit] Pre Exec Hook Class not found:org.apache.hadoop.hive.ql.hooks.PreExecutePrinter
    [junit] FAILED: Unknown exception : org.apache.hadoop.hive.ql.hooks.PreExecutePrinter
    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 1.163 sec
    [junit] Test org.apache.hadoop.hive.hwi.TestHWISessionManager FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ecapriolo@laptop1 hwi]$ svn update
At revision 817701.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have a slightly different classpath and testclasspath to account for the jetty jars in hadoop-core/lib &lt;/p&gt;

&lt;p&gt;Any ideas about this?&lt;/p&gt;</comment>
                            <comment id="12758299" author="namit" created="Tue, 22 Sep 2009 16:57:19 +0000"  >&lt;p&gt;Once you run any test or gen-test, you should see the following:&lt;/p&gt;

&lt;p&gt;./build/ql/test/classes/org/apache/hadoop/hive/ql/hooks/PreExecutePrinter.class&lt;/p&gt;


&lt;p&gt;check that, maybe that will give you some ideas.&lt;/p&gt;

</comment>
                            <comment id="12758376" author="appodictic" created="Tue, 22 Sep 2009 19:14:44 +0000"  >&lt;p&gt;I made the query results deterministic by running&lt;/p&gt;

&lt;p&gt;searchItem.addQuery(&quot;describe &quot;+tableName);&lt;/p&gt;

&lt;p&gt;instead of &quot;show tables&quot;&lt;/p&gt;</comment>
                            <comment id="12758447" author="namit" created="Tue, 22 Sep 2009 21:26:38 +0000"  >&lt;p&gt;Committed. Thanks Edward&lt;/p&gt;</comment>
                            <comment id="12906129" author="shrijeet" created="Fri, 3 Sep 2010 21:54:34 +0000"  >&lt;p&gt;I think we might have bug in HWISessionItem.java. &lt;br/&gt;
I am referring to this change: &lt;a href=&quot;http://svn.apache.org/viewvc/hadoop/hive/trunk/hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java?r1=817845&amp;amp;r2=817844&amp;amp;pathrev=817845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/hadoop/hive/trunk/hwi/src/java/org/apache/hadoop/hive/hwi/HWISessionItem.java?r1=817845&amp;amp;r2=817844&amp;amp;pathrev=817845&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Why was this line (343) commented out : res.clear();&lt;/p&gt;

&lt;p&gt;This is making a query like : &quot; select * from blah limit 1000 &quot;  to return more that 1000 results (because results are not being flushed)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12416231" name="hive-716-2.diff" size="23149" author="appodictic" created="Tue, 11 Aug 2009 18:17:24 +0000"/>
                            <attachment id="12416530" name="hive-716-3.diff" size="34075" author="appodictic" created="Fri, 14 Aug 2009 03:45:55 +0000"/>
                            <attachment id="12417619" name="hive-716-4.diff" size="36538" author="appodictic" created="Tue, 25 Aug 2009 14:08:07 +0000"/>
                            <attachment id="12418384" name="hive-716-5.diff" size="41289" author="appodictic" created="Wed, 2 Sep 2009 14:59:50 +0000"/>
                            <attachment id="12420301" name="hive-716-6.diff" size="41441" author="appodictic" created="Tue, 22 Sep 2009 19:14:44 +0000"/>
                            <attachment id="12415302" name="hive-716.diff" size="15154" author="appodictic" created="Mon, 3 Aug 2009 02:54:52 +0000"/>
                            <attachment id="12416531" name="hwi_query_box.png" size="56298" author="appodictic" created="Fri, 14 Aug 2009 03:45:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Aug 2009 17:27:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-717] test hive in local mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-717</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, there is no way to test hive in local mode&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432065">HIVE-717</key>
            <summary>test hive in local mode</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2009 17:00:48 +0000</created>
                <updated>Mon, 3 Aug 2009 17:00:48 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122492</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[HIVE-718] Load data inpath into a new partition without overwrite does not move the file</title>
                <link>https://issues.apache.org/jira/browse/HIVE-718</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The bug can be reproduced as following. Note that it only happens for partitioned tables. The select after the first load returns nothing, while the second returns the data correctly.&lt;/p&gt;

&lt;p&gt;insert.txt in the current local directory contains 3 lines: &quot;a&quot;, &quot;b&quot; and &quot;c&quot;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; create table tmp_insert_test (value string) stored as textfile;
&amp;gt; load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;insert.txt&apos;&lt;/span&gt; into table tmp_insert_test;
&amp;gt; select * from tmp_insert_test;
a
b
c
&amp;gt; create table tmp_insert_test_p ( value string) partitioned by (ds string) stored as textfile;
&amp;gt; load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;insert.txt&apos;&lt;/span&gt; into table tmp_insert_test_p partition (ds = &lt;span class=&quot;code-quote&quot;&gt;&apos;2009-08-01&apos;&lt;/span&gt;);
&amp;gt; select * from tmp_insert_test_p where ds= &lt;span class=&quot;code-quote&quot;&gt;&apos;2009-08-01&apos;&lt;/span&gt;;
&amp;gt; load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;insert.txt&apos;&lt;/span&gt; into table tmp_insert_test_p partition (ds = &lt;span class=&quot;code-quote&quot;&gt;&apos;2009-08-01&apos;&lt;/span&gt;);
&amp;gt; select * from tmp_insert_test_p where ds= &lt;span class=&quot;code-quote&quot;&gt;&apos;2009-08-01&apos;&lt;/span&gt;;
a       2009-08-01
b       2009-08-01
d       2009-08-01
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12432077">HIVE-718</key>
            <summary>Load data inpath into a new partition without overwrite does not move the file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2009 19:07:23 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:37 +0000</updated>
                            <resolved>Tue, 15 Sep 2009 19:15:26 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                    <fixVersion>0.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12738782" author="he yongqiang" created="Tue, 4 Aug 2009 03:15:52 +0000"  >&lt;p&gt;patch.  &lt;br/&gt;
I will check and test it late tonight.&lt;/p&gt;</comment>
                            <comment id="12738931" author="he yongqiang" created="Tue, 4 Aug 2009 11:44:06 +0000"  >&lt;p&gt;the patch that passed tests in my local.&lt;br/&gt;
Added the code to undo the copy operation when error occures (this might not help in most situations, but we should try out best).&lt;/p&gt;</comment>
                            <comment id="12739075" author="tlipcon" created="Tue, 4 Aug 2009 18:21:11 +0000"  >&lt;p&gt;I can confirm this bug on trunk - it&apos;s a regression since 0.3.0.&lt;/p&gt;

&lt;p&gt;However, I&quot;m not sure about the patch - if one of the later rename fails, we should undo the previous ones, but in this patch it looks like it&apos;s actually deleting the previous ones. Why not attempt to move it back to its original location?&lt;/p&gt;

&lt;p&gt;Also, it seems worth it to add some LOG.error() statements in these cases.&lt;/p&gt;</comment>
                            <comment id="12739084" author="tlipcon" created="Tue, 4 Aug 2009 18:38:58 +0000"  >&lt;p&gt;Here&apos;s a new revision of the patch which addresses my concerns above.&lt;/p&gt;

&lt;p&gt;Is there a way to write a unit test for this? We should have a test to prevent another regression.&lt;/p&gt;</comment>
                            <comment id="12739096" author="prasadc" created="Tue, 4 Aug 2009 19:02:18 +0000"  >&lt;p&gt;can&apos;t this be done the same way replaceFiles() does? that is use a tmpdir as a staging directory and do a rename() which is atomic.&lt;/p&gt;</comment>
                            <comment id="12739100" author="tlipcon" created="Tue, 4 Aug 2009 19:06:49 +0000"  >&lt;p&gt;What if the partition already exists? In that case we couldn&apos;t rename the staging directory since the destination name would already exist, right? Or can we just make another subdirectory of the partition with some unique name?&lt;/p&gt;</comment>
                            <comment id="12739107" author="prasadc" created="Tue, 4 Aug 2009 19:14:16 +0000"  >&lt;p&gt;another subdir should work fine. there is no rule that there can only be files in a partition dir&lt;/p&gt;</comment>
                            <comment id="12739109" author="tlipcon" created="Tue, 4 Aug 2009 19:18:39 +0000"  >&lt;p&gt;OK. How do we come up with a unique name? Just use timestamp?&lt;/p&gt;

&lt;p&gt;Does the metastore need to know this name somehow? Or is the change just localized to that method? (Also, should we rename that method? It&apos;s called copyFiles, but does nothing of the sort)&lt;/p&gt;</comment>
                            <comment id="12739110" author="prasadc" created="Tue, 4 Aug 2009 19:24:10 +0000"  >&lt;p&gt;metastore doesn&apos;t need to know the subdir name. any random enough name should be fine. feel free to rename it.&lt;/p&gt;</comment>
                            <comment id="12739146" author="tlipcon" created="Tue, 4 Aug 2009 20:37:53 +0000"  >&lt;p&gt;In looking through this code, I&apos;ve found a few more issues:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In isolation, it looks like copyFiles/replaceFiles are supposed to be able to handle a srcf like &quot;/foo/*&quot; with a directory layout like:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;/foo/subdir1/part-00000&lt;br/&gt;
/foo/subdir2/part-00000&lt;/p&gt;

&lt;p&gt;I&apos;m assuming this because it first does fs.globStatus on srcf, and then for each of the results of the glob, it calls fs.listStatus (implying that they are directories).&lt;/p&gt;

&lt;p&gt;However, given the example above, this would actually fail, since both files are named part-00000 and the could would attempt to rename both to tmpdir/part-00000.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In fact, using the tmpdir like this is consistent from the view of an outside observer, but not atomic. If the renamer crashes in the middle of the operation, the files will have been moved out of the original location and into the tmpdir, but the tmpdir has not been renamed into the destination. Is this OK? I feel like the solution would be to make dstdir/&lt;em&gt;staging&lt;/em&gt;&amp;lt;timestamp&amp;gt;, move the files one-by-one into there, and then rename &lt;em&gt;staging&lt;/em&gt;&amp;lt;timestamp&amp;gt; to the destination. This way if there is a failure in the middle, the client can at least determine where their files went without looking through a temporary directory.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12739164" author="zshao" created="Tue, 4 Aug 2009 21:02:02 +0000"  >&lt;p&gt;I think it&apos;s not acceptable for a failed &quot;insert&quot; to corrupt the original data of the table.&lt;/p&gt;

&lt;p&gt;We never have a table with sub directories (instead of files) inside. We will need some testing to make sure it actually works.&lt;br/&gt;
For unique name, maybe we can just prepend the job id.&lt;/p&gt;</comment>
                            <comment id="12739170" author="tlipcon" created="Tue, 4 Aug 2009 21:16:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it&apos;s not acceptable for a failed &quot;insert&quot; to corrupt the original data of the table. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;then we definitely have to move an entire directory of files in at once - otherwise we can have an insert partially succeed&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We never have a table with sub directories (instead of files) inside. We will need some testing to make sure it actually works.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is going to be a necessity to do non-overwrite loads into a table/partition, right?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;For unique name, maybe we can just prepend the job id.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This isn&apos;t always available (eg running LOAD DATA from the cli). I think we&apos;re stuck with java.util.UUID, as ugly as it may be.&lt;/p&gt;

&lt;p&gt;I&apos;ve spent the last hour or so trying to figure out any other way of generating a unique name inside a subdirectory. Because of the semantics of FileSystem.mkdirs and FileSystem.rename, I don&apos;t believe there&apos;s any way of doing this. mkdirs doesn&apos;t return false in the case that the directory already exists, and if you rename(src, dst), and dst already exists as a directory, it will move src &lt;b&gt;inside&lt;/b&gt; of dst.&lt;/p&gt;</comment>
                            <comment id="12739187" author="prasadc" created="Tue, 4 Aug 2009 21:39:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;We never have a table with sub directories (instead of files) inside. We will need some testing to make sure it actually works.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Zheng, aren&apos;t buckets are separate subdirs? they work so sub-dirs should be fine.&lt;/p&gt;</comment>
                            <comment id="12739197" author="zshao" created="Tue, 4 Aug 2009 21:53:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;Zheng, aren&apos;t buckets are separate subdirs? they work so sub-dirs should be fine.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I tried to add a directory into a table, and then run this. Apparently hadoop file format does not like the sub directory:&lt;br/&gt;
Buckets are files not directories.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; select * from zshao_tt;
OK
Failed with exception java.io.IOException:Not a file: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//dfs1.data.facebook.com:9000/user/facebook/warehouse/zshao_tt/a
&lt;/span&gt;09/08/04 14:49:38 ERROR exec.FetchTask: Failed with exception java.io.IOException:Not a file: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//dfs1.data.facebook.com:9000/user/facebook/warehouse/zshao_tt/a
&lt;/span&gt;java.io.IOException: Not a file: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//dfs1.data.facebook.com:9000/user/facebook/warehouse/zshao_tt/a
&lt;/span&gt;        at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:231)
        at org.apache.hadoop.hive.ql.exec.FetchTask.getRecordReader(FetchTask.java:236)
        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:291)
        at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:368)
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:183)
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:216)
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:306)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:166)
        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I discussed with Ashish offline on this. I think we still want the atomic property of insert - as a result, we may need to manually expand the input directory into a bunch of files, and feed the files into the map/reduce jobs (instead of the directories).  That code is in ExecDriver.java and MapRedTask.java when we set the JobConf.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="12739352" author="he yongqiang" created="Wed, 5 Aug 2009 06:33:06 +0000"  >&lt;p&gt;Todd&apos;s patch looks good (at least better than mine).  so +1.&lt;br/&gt;
I assumed the srcfs is a tmp dir, and did not recover them when error occurs. &lt;/p&gt;</comment>
                            <comment id="12741454" author="tlipcon" created="Mon, 10 Aug 2009 18:07:43 +0000"  >&lt;p&gt;I think we should go ahead with my patch for now and then open another JIRA for fixing the atomicity issue.&lt;/p&gt;</comment>
                            <comment id="12743911" author="he yongqiang" created="Sun, 16 Aug 2009 21:43:07 +0000"  >&lt;p&gt;I think this should be merged into 0.4 release.&lt;/p&gt;</comment>
                            <comment id="12744138" author="prasadc" created="Mon, 17 Aug 2009 17:24:32 +0000"  >&lt;p&gt;lacking atomicity can lead to silent bugs which are unacceptable in production systems.&lt;/p&gt;</comment>
                            <comment id="12744143" author="tlipcon" created="Mon, 17 Aug 2009 17:44:12 +0000"  >&lt;p&gt;Prasad: this is true, but the atomicity issue was already there - we just discovered it while looking at this section of the code. My guess is that there are similar bugs elsewhere in Hive - there&apos;s no safe way to have multiple threads compete for a directory name, so really any movement of files has to be coordinated by the metastore to be safe. The hadoop-side issues are:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mkdirs on an existing directory will return the exact same thing as mkdirs on one that didn&apos;t previously exist&lt;/li&gt;
	&lt;li&gt;rename of one directory to a new name will not give an error if the new name exists - rather, it will move your directory inside that one&lt;/li&gt;
	&lt;li&gt;checking if (not exists) 
{ do something to a location }
&lt;p&gt; is obviously racy&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12745275" author="zshao" created="Thu, 20 Aug 2009 01:50:50 +0000"  >&lt;p&gt;Let&apos;s get a consensus on this issue soon.&lt;/p&gt;

&lt;p&gt;Atomicity is definitely wanted (either now or some time in the future). It&apos;s not just the move of all files need to be atomic - if the files are moved, the job should always return successful - otherwise most probably the client will try again and end up insert the data twice. It seems it&apos;s impossible to me with what we have.&lt;/p&gt;

&lt;p&gt;Maybe we should not support &quot;append&quot; - user can always load into a new partition every time. Thoughts?&lt;/p&gt;</comment>
                            <comment id="12745548" author="prasadc" created="Thu, 20 Aug 2009 18:30:59 +0000"  >&lt;p&gt;&apos;overwrite&apos; path has less of an issue in the sense that only one of two competing statements will win out. the resulting directory will not contain some files from first statement and some from the second statement. (this assuming probability of two statements creating same random tmp directory is very less)&lt;/p&gt;

&lt;p&gt;my concern in this case is that, it is possible to corrupt the existing partition with only a part of new files and overwrite some of the old files and user has no way of knowing that such a thing has happened and it may not possible to recover the data.&lt;/p&gt;

&lt;p&gt;but if you guys think the current patch is no worse than the existing solution, i  do not have a problem.&lt;/p&gt;</comment>
                            <comment id="12745554" author="tlipcon" created="Thu, 20 Aug 2009 18:36:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;my concern in this case is that, it is possible to corrupt the existing partition with only a part of new files and overwrite some of the old files and user has no way of knowing that such a thing has happened and it may not possible to recover the data.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you explain the order of events that causes this? I think even with the current patch the operation will not fail silently and should not cause unrecoverable loss.&lt;/p&gt;</comment>
                            <comment id="12745569" author="prasadc" created="Thu, 20 Aug 2009 18:52:29 +0000"  >&lt;p&gt;Two statements issue load into same partition around the same time. For one, dirExisted will be true and false for the other. Suppose the &apos;false&apos; stmt copies a file named &apos;a1&apos; first and then &apos;true&apos; stmt will fail if it copies the same file. so it will try to undo the previous copies and then delete the dir. But the &apos;false&apos; stmt keeps copying the files blissfully and succeed but the files &apos;a1&apos; and others that were copied before the &apos;true&apos; stmt deleted the directory will not be there but there won&apos;t be an error for the &apos;false&apos; stmt.&lt;/p&gt;

&lt;p&gt;hoping my writing is understandable enough &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12745572" author="tlipcon" created="Thu, 20 Aug 2009 18:57:21 +0000"  >&lt;p&gt;Thanks for the explanation. I&apos;ll try to block out an hour to look through the code again this afternoon or evening to see if I can fix this issue somehow or another.&lt;/p&gt;

&lt;p&gt;There is one ugly solution whereby you can use a file (not a directory) as a lock. That is to say, open a file &quot;foo_load_lock&quot;. If it&apos;s already being created by another writer, the NN will throw an IOException to the second guy, and we can enforce exclusive access. The problem here is what to do with the failure scenario which might leave a lock hanging around for perpetuity &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12745672" author="prasadc" created="Thu, 20 Aug 2009 21:32:08 +0000"  >&lt;p&gt;continuing the ugly part, you can do some sort of leases instead of locks using files. create a file uniquely named with the current hour so lease will be held for an hour atmost. there might be lot of files hanging around but they can be created in /tmp which will get cleaned.&lt;/p&gt;

&lt;p&gt;another option is, ashish is implementing session level temporary tables in metastore. you can use them as locks without worrying them existing after the session.&lt;/p&gt;</comment>
                            <comment id="12747107" author="tlipcon" created="Mon, 24 Aug 2009 22:22:03 +0000"  >&lt;p&gt;Here&apos;s a proposal: How would you guys feel about an addition to the metastore API that is as simple as:&lt;/p&gt;

&lt;p&gt;string get_unique_id()&lt;/p&gt;

&lt;p&gt;The metastore would simply keep an autoincrement field to hand these out. We can then use these safely to allocate race-free names to clients. Should be straightforward and a lot more simple than any kind of lock/lease based mechanism.&lt;/p&gt;</comment>
                            <comment id="12747580" author="rsm" created="Tue, 25 Aug 2009 19:06:21 +0000"  >&lt;p&gt;Can the unique name problem be solved at the file system level via a mktemp like method? Then you wouldnt have to depend on the metastore to reliably maintain unique ids (for example, what happens when the metastore uses an in-memory db and is restarted).&lt;/p&gt;</comment>
                            <comment id="12747602" author="tlipcon" created="Tue, 25 Aug 2009 19:47:31 +0000"  >&lt;p&gt;I hadn&apos;t considered the case of an in-memory metastore. A mktemp-like method would be great, but o.a.h.FileSystem gives you nothing of the sort &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12747658" author="rsm" created="Tue, 25 Aug 2009 21:30:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;A mktemp-like method would be great, but o.a.h.FileSystem gives you nothing of the sort&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s fine. We could just implement such a method in hive. The logic could be the same as unix mktemp. See &lt;a href=&quot;http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libast/common/path/pathtemp.c&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libast/common/path/pathtemp.c&lt;/a&gt; . Specifically, the for loop starting 245.&lt;/p&gt;</comment>
                            <comment id="12747668" author="tlipcon" created="Tue, 25 Aug 2009 21:42:45 +0000"  >&lt;p&gt;Not sure how that actually helps - if we use an algorithm like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each file to be moved:
  &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; not successful:
    come up with a random name
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to move src file to the random name
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it fails due to dst already existing, &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again with a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; random name
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;then we&apos;d lose the atomicity/isolation - readers would see a partial load during the middle of the operation.&lt;/p&gt;

&lt;p&gt;We can&apos;t use that algorithm with atomic directory renames, since Hadoop has the wacky behavior that move(&quot;srcdir&quot;, &quot;dstdir&quot;) will create &quot;dstdir/srcdir&quot; if dstdir already exists&lt;/p&gt;</comment>
                            <comment id="12748104" author="prasadc" created="Wed, 26 Aug 2009 19:42:23 +0000"  >&lt;p&gt;@todd&lt;br/&gt;
dhruba said he would be willing to provide a &apos;mkdir&apos; method that would mimic the POSIX mkdir() fn. But in the meantime i think the algorithm with atomic directory renames would be sufficient. we can try to generate a pseudo random number and check for that directory to exist before creating it. Since we are generating pseudo random numbers, the probability that two different loads into same directory will be generating same random number and checking for existence at the same time is pretty low. &lt;/p&gt;</comment>
                            <comment id="12754058" author="athusoo" created="Fri, 11 Sep 2009 09:04:53 +0000"  >&lt;p&gt;Apologies on following this earlier. It caught my attention as Todd brought up whether we should get this into 0.4.0 release as this is a regression when compared to 0.3.0. I checked the code on 0.3.0 and it seems to be the same as that in 0.4.0. So I am not sure if this is a regression. If this is not a regression then potentially we can go out with 0.4.0 without this and document this?&lt;/p&gt;

&lt;p&gt;As is evident by this discussion LOAD INTO and its cousin INSERT INTO (when we have it) are very tricky. Almost all our code has been written with the overwrite semantics. Appending new data to an existing partition would need more work to get right and I feel we should punt it and document that insert into is not reliable - I think it has never been reliable.&lt;/p&gt;

&lt;p&gt;In order to safely implement the INSERT INTO and LOAD INTO semantics one approach is to introduce a notion of versions on the DML commands which is encoded in the directory structure i.e.&lt;/p&gt;

&lt;p&gt;instead of storing things as &lt;/p&gt;

&lt;p&gt;xyz/part-0000&lt;/p&gt;

&lt;p&gt;we store the files as&lt;/p&gt;

&lt;p&gt;xyz/v1/part-0000&lt;/p&gt;

&lt;p&gt;and so on so forth. We store the latest created version in the metastore entry for that table. When a reader comes in it first looks at this entry and then finds a version corresponding to that in the table. The versions themselves could be garbage collected by deleting version directories that are older than say some configurable duration old and this could either be done lazily by the writer on the table or by an active garbage collector in the background. These are of course somewhat involved changes and would solve the isolation and atomicity problems. The later becase v1 is a directory so moving data to that directory would be a rename and hence atomic. Thoughts?&lt;/p&gt;</comment>
                            <comment id="12754266" author="tlipcon" created="Fri, 11 Sep 2009 18:20:18 +0000"  >&lt;p&gt;Not sure if people are already following the discussion on &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6240&quot; title=&quot;Rename operation is not consistent between different implementations of FileSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6240&quot;&gt;&lt;del&gt;HADOOP-6240&lt;/del&gt;&lt;/a&gt;, but it&apos;s worth checking out &amp;#8211; discussions regarding rename() semantics on HDFS.&lt;/p&gt;</comment>
                            <comment id="12754285" author="namit" created="Fri, 11 Sep 2009 19:14:03 +0000"  >&lt;p&gt;INSERT INTO is not supported - it will get a parse error.&lt;/p&gt;

&lt;p&gt;LOAD INTO is the only scenario we have to worry about&lt;/p&gt;</comment>
                            <comment id="12754347" author="prasadc" created="Fri, 11 Sep 2009 21:03:54 +0000"  >&lt;p&gt;from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6240&quot; title=&quot;Rename operation is not consistent between different implementations of FileSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6240&quot;&gt;&lt;del&gt;HADOOP-6240&lt;/del&gt;&lt;/a&gt;, it appears that atomic rename() might not be supported on all FileSystems. Given this, I think we may need to avoid depending on HDFS for atomicity or locking.&lt;/p&gt;

&lt;p&gt;There was another discussion on hive-users@ about providing some kind of locking so that two different jobs can do conflicting things to a directory (if there is one writer and a reader). So if we go down that route, this problem can be solved by acquiring write locks (or leases). Ofcourse, this won&apos;t work if one of the processes is a non-Hive process. Even ashish&apos;s solution will not work since the external process needs to handle the version numbers correctly.&lt;/p&gt;</comment>
                            <comment id="12754384" author="namit" created="Fri, 11 Sep 2009 22:25:05 +0000"  >&lt;p&gt;@Todd, I dont think it is a regression, and there is no easy fix for this.&lt;/p&gt;

&lt;p&gt;Do you think we should hold the release for this ?&lt;/p&gt;</comment>
                            <comment id="12754397" author="athusoo" created="Fri, 11 Sep 2009 22:47:06 +0000"  >&lt;p&gt;@prasad, can you explain your comment about the external process stuff?&lt;/p&gt;</comment>
                            <comment id="12754402" author="prasadc" created="Fri, 11 Sep 2009 22:55:22 +0000"  >&lt;p&gt;It is possible for users now to add new files to the table/partition directory without going through Hive to load files. Hive will pick it up these for the future queries. Currently the directory structure is easily inferred and so external processes can write and read data independent of Hive. if we start having versions then they have to read the correct version from Hive to interact with the data. Doesn&apos;t this goes against the philosophy of openness? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12754408" author="tlipcon" created="Fri, 11 Sep 2009 23:06:26 +0000"  >&lt;p&gt;Namit: here&apos;s a trace from a session on hive 0.3.0:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;todd@todd-laptop:~$ cat /tmp/insert.txt 
a
b
c
d
todd@todd-laptop:~$ cat /tmp/insert2.txt 
e
f
g
h
todd@todd-laptop:~$ hive
Hive history file=/tmp/todd/hive_job_log_todd_200909111603_978288634.txt
hive&amp;gt; create table tmp_insert_test_p (value string) partitioned by (ds string);
OK
Time taken: 3.865 seconds
hive&amp;gt; load data local inpath &apos;/tmp/insert.txt&apos; into table tmp_insert_test_p partition (ds = &apos;2009-08-01&apos;);
Copying data from file:/tmp/insert.txt
Loading data to table tmp_insert_test_p partition {ds=2009-08-01}
OK
Time taken: 0.672 seconds
hive&amp;gt; select * from tmp_insert_test_p where ds = &apos;2009-08-01&apos;;
OK
a       2009-08-01
b       2009-08-01
c       2009-08-01
d       2009-08-01
Time taken: 0.374 seconds
hive&amp;gt; load data local inpath &apos;/tmp/insert2.txt&apos; into table tmp_insert_test_p partition (ds = &apos;2009-08-01&apos;);
Copying data from file:/tmp/insert2.txt
Loading data to table tmp_insert_test_p partition {ds=2009-08-01}
OK
Time taken: 0.261 seconds
hive&amp;gt; select * from tmp_insert_test_p where ds = &apos;2009-08-01&apos;;
OK
a       2009-08-01
b       2009-08-01
c       2009-08-01
d       2009-08-01
e       2009-08-01
f       2009-08-01
g       2009-08-01
h       2009-08-01
Time taken: 0.14 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The same session fails on the 0.4 branch:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; create table tmp_insert_test_p (value string) partitioned by (ds string);
OK
Time taken: 0.068 seconds
hive&amp;gt; load data local inpath &apos;/tmp/insert.txt&apos; into table tmp_insert_test_p partition (ds = &apos;2009-08-01&apos;);
Copying data from file:/tmp/insert.txt
Loading data to table tmp_insert_test_p partition {ds=2009-08-01}
OK
Time taken: 0.315 seconds
hive&amp;gt; select * from tmp_insert_test_p where ds = &apos;2009-08-01&apos;;
OK
Time taken: 0.523 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12754458" author="athusoo" created="Sat, 12 Sep 2009 01:27:26 +0000"  >&lt;p&gt;hmm.... that is strange. Given this we should definitely figure out the regression and get it fixed.&lt;/p&gt;</comment>
                            <comment id="12754459" author="namit" created="Sat, 12 Sep 2009 01:38:36 +0000"  >&lt;p&gt;After discussing with Ashish offline, we think it is due to fact that Prasad changed the order of directory move and metastore.&lt;/p&gt;

&lt;p&gt;Unfortunately, users can wait on both hdfs partition creation and partition creation, and we need to do perform 2 in some order while doing a load into.&lt;/p&gt;

&lt;p&gt;Prasad might have some ideas on this&lt;/p&gt;</comment>
                            <comment id="12754461" author="prasadc" created="Sat, 12 Sep 2009 01:59:13 +0000"  >&lt;p&gt;the only change i made was not to create the partition/table until Hive.copyFiles() returns. i,e the partition/table directory was created (if it did not exist) before copyFiles() was called in 0.3. It could be the reason for the discrepancy between 0.3 and 0.4 but I am not sure.&lt;/p&gt;

&lt;p&gt;We can&apos;t do the create the directory if we want to support correct semantics (i.e. the partition directory does not exist until the data has been copied completely). This  is needed for both COPY or REPLACE without which down stream data get corrupted/incomplete data.&lt;/p&gt;

&lt;p&gt;But if you want to keep 0.3 semantics (which we might want to since COPY otherwise is quite unusable), we just need to create destf directory in Hive.copyFiles(). &lt;/p&gt;</comment>
                            <comment id="12754632" author="tlipcon" created="Sat, 12 Sep 2009 22:56:19 +0000"  >&lt;p&gt;Even in the case of LOAD...OVERWRITE, we currently lack atomicity. The old directory is deleted prior to the new directory being moved in. There&apos;s a small window of time in which neither old nor new data is present. Sure, this is probably on the order of a half second, but it is still not correct. There&apos;s also the general case of a query which has already computed input splits being affected by a concurrent LOAD DATA OVERWRITE. The versioning solution I think gets us partly there, but will be very tricky to implement correctly while maintaining performance since there&apos;s no way to do a copy-on-write directory snapshot built in to HDFS. So, I think a significant amount of work will have to be done in the metastore and we&apos;ll definitely have to drop the &quot;external process load&quot; ability that currently exists.&lt;/p&gt;

&lt;p&gt;Should we open a new JIRA for the general concurrency control/locking issues we&apos;re discussing here? It seems like this ticket should be used for the 0.3-&amp;gt;0.4 regression, even if it&apos;s just a temporary fix. We can then put a more general correct solution on the roadmap for 0.5 or later, since it&apos;s looking like it will be a complicated project.&lt;/p&gt;</comment>
                            <comment id="12754651" author="prasadc" created="Sun, 13 Sep 2009 02:22:59 +0000"  >&lt;p&gt;+1 to todd&apos;s suggestion. let&apos;s fix the regression by just creating the directory in copyFiles() and let&apos;s open a separate JIRA for concurrency and atomicity issues.&lt;/p&gt;
</comment>
                            <comment id="12755176" author="namit" created="Mon, 14 Sep 2009 20:17:00 +0000"  >&lt;p&gt;In 0.3, if we insert the same file twice, we get a error &lt;/p&gt;

&lt;p&gt;2009-09-14 13:15:16,422 ERROR exec.MoveTask (SessionState.java:printError(279)) - Failed with exception checkPaths: /data/users/njain/hive6/hive6/build/ql/test/data/warehouse/tmp_insert_test_p/ds=2009-08-01/kv1.txt already exists&lt;br/&gt;
org.apache.hadoop.hive.ql.metadata.HiveException: checkPaths: /data/users/njain/hive6/hive6/build/ql/test/data/warehouse/tmp_insert_test_p/ds=2009-08-01/kv1.txt already exists&lt;br/&gt;
	at org.apache.hadoop.hive.ql.metadata.Hive.checkPaths(Hive.java:703)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.metadata.Hive.copyFiles(Hive.java:726)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.metadata.Hive.loadPartition(Hive.java:522)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.MoveTask.execute(MoveTask.java:145)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:245)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:176)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:211)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.QTestUtil.executeClient(QTestUtil.java:411)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input40(TestCliDriver.java:57)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:297)&lt;br/&gt;
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:672)&lt;br/&gt;
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:567)&lt;/p&gt;


&lt;p&gt;I will stick with the above error for now for 0.4 also.&lt;/p&gt;</comment>
                            <comment id="12755177" author="tlipcon" created="Mon, 14 Sep 2009 20:18:51 +0000"  >&lt;p&gt;Namit: that error is tracked by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-307&quot; title=&quot;&amp;quot;LOAD DATA LOCAL INPATH&amp;quot; fails when the table already contains a file of the same name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-307&quot;&gt;&lt;del&gt;HIVE-307&lt;/del&gt;&lt;/a&gt; marked linked above. I think it&apos;s OK behavior for 0.4 - we should verify, though, that the file that fails to load remains safely in place.&lt;/p&gt;</comment>
                            <comment id="12755216" author="namit" created="Mon, 14 Sep 2009 21:47:14 +0000"  >&lt;p&gt;@Todd, @Prasad, @Raghu - the current patch is very simple - creates the directory if it does not exist - does not account for concurrency etc.&lt;br/&gt;
It should be compatible with 0.3. &lt;/p&gt;

&lt;p&gt;Please review, if it is OK, please merge and I will cut a new release candidate&lt;/p&gt;</comment>
                            <comment id="12755275" author="zshao" created="Tue, 15 Sep 2009 00:49:26 +0000"  >&lt;p&gt;+1 from my side. We don&apos;t want to delay 0.4 release because of this.&lt;/p&gt;</comment>
                            <comment id="12755292" author="athusoo" created="Tue, 15 Sep 2009 01:24:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Looks good to me.&lt;/p&gt;</comment>
                            <comment id="12755611" author="namit" created="Tue, 15 Sep 2009 18:01:26 +0000"  >&lt;p&gt;@Todd, I am assuming you are OK with this - If yes, we will try to commit it in a hour or so, so that we can get another release candidate &lt;/p&gt;</comment>
                            <comment id="12755644" author="tlipcon" created="Tue, 15 Sep 2009 19:07:26 +0000"  >&lt;p&gt;+1 lgtm. Thanks for getting this in, guys!&lt;/p&gt;</comment>
                            <comment id="12755649" author="zshao" created="Tue, 15 Sep 2009 19:15:26 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12435644">HIVE-829</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12415618">HIVE-307</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12433886">HIVE-789</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415442" name="HIVE-718.1.patch" size="966" author="he yongqiang" created="Tue, 4 Aug 2009 03:15:51 +0000"/>
                            <attachment id="12415481" name="HIVE-718.2.patch" size="1513" author="he yongqiang" created="Tue, 4 Aug 2009 11:44:06 +0000"/>
                            <attachment id="12415509" name="hive-718.txt" size="2550" author="tlipcon" created="Tue, 4 Aug 2009 18:38:58 +0000"/>
                            <attachment id="12419569" name="hive.718.1.patch" size="45721" author="namit" created="Mon, 14 Sep 2009 21:42:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Aug 2009 03:15:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-718&quot; title=&quot;Load data inpath into a new partition without overwrite does not move the file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-718&quot;&gt;&lt;strike&gt;HIVE-718&lt;/strike&gt;&lt;/a&gt;. Fix Loading data inpath into a new partition. (Namit Jain via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-719] LazyArray/LazyMap index out of bound exception</title>
                <link>https://issues.apache.org/jira/browse/HIVE-719</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12432122">HIVE-719</key>
            <summary>LazyArray/LazyMap index out of bound exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2009 04:54:15 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:57 +0000</updated>
                            <resolved>Wed, 5 Aug 2009 06:04:42 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12738831" author="zshao" created="Tue, 4 Aug 2009 05:20:26 +0000"  >&lt;p&gt;This patch fixes the problem.&lt;/p&gt;</comment>
                            <comment id="12738838" author="zshao" created="Tue, 4 Aug 2009 05:33:44 +0000"  >&lt;p&gt;This patch fixes the problem and adds a test.&lt;/p&gt;</comment>
                            <comment id="12739162" author="namit" created="Tue, 4 Aug 2009 20:59:02 +0000"  >&lt;p&gt;The changes look fine - I will commit them after 487 &lt;/p&gt;</comment>
                            <comment id="12739349" author="namit" created="Wed, 5 Aug 2009 06:04:42 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415458" name="HIVE-719.1.patch" size="7276" author="zshao" created="Tue, 4 Aug 2009 05:33:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Aug 2009 20:59:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-720] Improve ByteStream by removing all synchronized method calls</title>
                <link>https://issues.apache.org/jira/browse/HIVE-720</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;org.apache.hadoop.hive.serde2.ByteStream has 2 inner classes: Input and Output, which inherits from ByteArrayInputStream and ByteArrayOutputStream.&lt;br/&gt;
Both these classes have a lot of sychronized methods, which make them really slow.&lt;/p&gt;

&lt;p&gt;We should let ByteStream.Input and ByteStream.Output directly inherit InputStream and OutputStream so we don&apos;t need to call synchronized methods at all. This will help LazySimpleSerDe, ColumnarSerDe as well as LazyBinarySerDe.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432129">HIVE-720</key>
            <summary>Improve ByteStream by removing all synchronized method calls</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2009 06:55:54 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:18 +0000</updated>
                            <resolved>Wed, 5 Aug 2009 08:05:42 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12738919" author="he yongqiang" created="Tue, 4 Aug 2009 09:49:34 +0000"  >&lt;p&gt;Hive has its own HiveDataInputBuffer and HiveDataOutputBuffer. We can reuse a lot of code here.&lt;/p&gt;</comment>
                            <comment id="12738934" author="he yongqiang" created="Tue, 4 Aug 2009 11:57:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-720&quot; title=&quot;Improve ByteStream by removing all synchronized method calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-720&quot;&gt;&lt;del&gt;HIVE-720&lt;/del&gt;&lt;/a&gt;.1.patch tries to reuse some io code. It passed tests in my local.&lt;/p&gt;</comment>
                            <comment id="12739129" author="zshao" created="Tue, 4 Aug 2009 20:09:53 +0000"  >&lt;p&gt;Overall it looks good. Some nitpicks about class names:&lt;br/&gt;
1: ByteArrayInputBuffer -&amp;gt; NonSyncByteArrayInputStream, ByteArrayOutputBuffer -&amp;gt; NonSyncByteArrayOutputStream.&lt;br/&gt;
2. HiveDataInputBuffer -&amp;gt; NonSyncDataInputBuffer, HiveDataOutputBuffer -&amp;gt; NonSyncDataOutputBuffer&lt;/p&gt;

&lt;p&gt;Also can we put the new classes into common/io instead of common?&lt;/p&gt;

&lt;p&gt;Also, what is the reason that HiveDataInputBuffer inherits FilterInputStream, while HiveDataOutputBuffer inherits DataOutputStream?&lt;br/&gt;
We might have discussed it before but I cannot remember. Can you put some comments into the code?&lt;/p&gt;</comment>
                            <comment id="12739343" author="he yongqiang" created="Wed, 5 Aug 2009 05:22:42 +0000"  >&lt;p&gt;Will do 1 and 2, and move the two classes into common.io.&lt;br/&gt;
&amp;gt;&amp;gt;what is the reason that HiveDataInputBuffer inherits FilterInputStream, while HiveDataOutputBuffer inherits DataOutputStream?&lt;br/&gt;
Let me figure out why and add some comment.&lt;/p&gt;</comment>
                            <comment id="12739361" author="zshao" created="Wed, 5 Aug 2009 07:39:01 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="12739366" author="zshao" created="Wed, 5 Aug 2009 08:05:42 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415482" name="HIVE-720.1.patch" size="12102" author="he yongqiang" created="Tue, 4 Aug 2009 11:57:21 +0000"/>
                            <attachment id="12415578" name="HIVE-720.2.patch" size="45634" author="he yongqiang" created="Wed, 5 Aug 2009 06:42:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Aug 2009 09:49:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-720&quot; title=&quot;Improve ByteStream by removing all synchronized method calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-720&quot;&gt;&lt;strike&gt;HIVE-720&lt;/strike&gt;&lt;/a&gt;. Improve ByteStream by removing all synchronized method calls. (Yongqiang He via zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-721] Integration with HadoopDB</title>
                <link>https://issues.apache.org/jira/browse/HIVE-721</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The HadoopDB project integrates Hadoop with single node databases, which provide a high performance data layer for analytical queries over structured data. HadoopDB&apos;s SMS (SQL-to-MapReduce-to-SQL) component uses Hive&apos;s SemanticAnalyzer to convert SQL to MapReduce plans. After plan generation, we recreate SQL from the lower plan operators and push the SQL into database layer maintaining the upper layers of the plan, that can&apos;t be pushed into the single node databases, intact. For more information on this process, please read the HadoopDB paper (&lt;a href=&quot;http://db.cs.yale.edu/hadoopdb/hadoopdb.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.cs.yale.edu/hadoopdb/hadoopdb.pdf&lt;/a&gt;) and browse the source code if you feel like it (more specifically the SQLQueryGenerator class) at &lt;a href=&quot;http://sourceforge.net/projects/hadoopdb/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sourceforge.net/projects/hadoopdb/&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;HadoopDB is a natural system level extension of Hive&apos;s goal of providing a simple SQL interface for large-scale data processing.&lt;/p&gt;

&lt;p&gt;A simple patch that integrates Hive with HadoopDB&apos;s SMS could be found here: &lt;a href=&quot;http://hadoopdb.svn.sourceforge.net/viewvc/hadoopdb/trunk/Patches/hive-sms.patch?view=log&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoopdb.svn.sourceforge.net/viewvc/hadoopdb/trunk/Patches/hive-sms.patch?view=log&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In addition to the semantic analyzer post-processing, we modified certain areas to allow paths to be associated with databases to allow the recreation of the operator tree from the map.input.file configuration. Instead of FileInputSplit &amp;#8212; we set up an interface Pathable, to allow any inputsplit that implements pathable to return a dummy path equivalent to the map.input.file path.&lt;/p&gt;

&lt;p&gt;Instead of the post semantic analysis function call to the SQLQueryGenerator class, you could also use hooks. One such suggestion provided by a HadoopDB user is found here &lt;a href=&quot;http://sourceforge.net/tracker/index.php?func=detail&amp;amp;aid=2829253&amp;amp;group_id=269559&amp;amp;atid=1146689&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sourceforge.net/tracker/index.php?func=detail&amp;amp;aid=2829253&amp;amp;group_id=269559&amp;amp;atid=1146689&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We would really appreciate your help in better integrating Hive and HadoopDB. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12432173">HIVE-721</key>
            <summary>Integration with HadoopDB</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="azzadev">Azza Abouzeid</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2009 15:43:03 +0000</created>
                <updated>Thu, 6 Nov 2014 23:25:58 +0000</updated>
                            <resolved>Thu, 6 Nov 2014 23:25:58 +0000</resolved>
                                    <version>0.4.0</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="12740139" author="azzadev" created="Thu, 6 Aug 2009 16:32:16 +0000"  >&lt;p&gt;BTW: we checked out code from the trunk around July 10th 2009.&lt;/p&gt;</comment>
                            <comment id="14131455" author="lars_francke" created="Fri, 12 Sep 2014 11:59:43 +0000"  >&lt;p&gt;There&apos;s not much development on HadoopDB and there&apos;s Tez and Spark now. Do you plan to work on this? Otherwise I suggest closing it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Sep 2014 11:59:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122496</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[HIVE-722] column pruning should work on map and array indices</title>
                <link>https://issues.apache.org/jira/browse/HIVE-722</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;if map&lt;span class=&quot;error&quot;&gt;&amp;#91;key&amp;#93;&lt;/span&gt; or array&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; is selected or used in a predicate, only that element should be projected in column pruning instead of the whole map or array.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432178">HIVE-722</key>
            <summary>column pruning should work on map and array indices</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2009 16:33:00 +0000</created>
                <updated>Tue, 4 Aug 2009 16:33:00 +0000</updated>
                                                                            <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08otb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>
